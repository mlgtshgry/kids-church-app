(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const g of p)if(g.type==="childList")for(const E of g.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&d(E)}).observe(document,{childList:!0,subtree:!0});function l(p){const g={};return p.integrity&&(g.integrity=p.integrity),p.referrerPolicy&&(g.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?g.credentials="include":p.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(p){if(p.ep)return;p.ep=!0;const g=l(p);fetch(p.href,g)}})();var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lp(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Xh={exports:{}},Kl={};var G1;function op(){if(G1)return Kl;G1=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function l(d,p,g){var E=null;if(g!==void 0&&(E=""+g),p.key!==void 0&&(E=""+p.key),"key"in p){g={};for(var S in p)S!=="key"&&(g[S]=p[S])}else g=p;return p=g.ref,{$$typeof:o,type:d,key:E,ref:p!==void 0?p:null,props:g}}return Kl.Fragment=r,Kl.jsx=l,Kl.jsxs=l,Kl}var q1;function cp(){return q1||(q1=1,Xh.exports=op()),Xh.exports}var b=cp(),Wh={exports:{}},$e={};var Y1;function up(){if(Y1)return $e;Y1=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),E=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),B=Symbol.iterator;function L(H){return H===null||typeof H!="object"?null:(H=B&&H[B]||H["@@iterator"],typeof H=="function"?H:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,Y={};function ee(H,le,Te){this.props=H,this.context=le,this.refs=Y,this.updater=Te||U}ee.prototype.isReactComponent={},ee.prototype.setState=function(H,le){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,le,"setState")},ee.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function ie(){}ie.prototype=ee.prototype;function K(H,le,Te){this.props=H,this.context=le,this.refs=Y,this.updater=Te||U}var ce=K.prototype=new ie;ce.constructor=K,z(ce,ee.prototype),ce.isPureReactComponent=!0;var Ie=Array.isArray;function be(){}var W={H:null,A:null,T:null,S:null},he=Object.prototype.hasOwnProperty;function oe(H,le,Te){var ge=Te.ref;return{$$typeof:o,type:H,key:le,ref:ge!==void 0?ge:null,props:Te}}function wt(H,le){return oe(H.type,le,H.props)}function Ke(H){return typeof H=="object"&&H!==null&&H.$$typeof===o}function _e(H){var le={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Te){return le[Te]})}var ve=/\/+/g;function Ne(H,le){return typeof H=="object"&&H!==null&&H.key!=null?_e(""+H.key):le.toString(36)}function J(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(be,be):(H.status="pending",H.then(function(le){H.status==="pending"&&(H.status="fulfilled",H.value=le)},function(le){H.status==="pending"&&(H.status="rejected",H.reason=le)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function te(H,le,Te,ge,ke){var pe=typeof H;(pe==="undefined"||pe==="boolean")&&(H=null);var Ye=!1;if(H===null)Ye=!0;else switch(pe){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(H.$$typeof){case o:case r:Ye=!0;break;case N:return Ye=H._init,te(Ye(H._payload),le,Te,ge,ke)}}if(Ye)return ke=ke(H),Ye=ge===""?"."+Ne(H,0):ge,Ie(ke)?(Te="",Ye!=null&&(Te=Ye.replace(ve,"$&/")+"/"),te(ke,le,Te,"",function(Vn){return Vn})):ke!=null&&(Ke(ke)&&(ke=wt(ke,Te+(ke.key==null||H&&H.key===ke.key?"":(""+ke.key).replace(ve,"$&/")+"/")+Ye)),le.push(ke)),1;Ye=0;var tt=ge===""?".":ge+":";if(Ie(H))for(var St=0;St<H.length;St++)ge=H[St],pe=tt+Ne(ge,St),Ye+=te(ge,le,Te,pe,ke);else if(St=L(H),typeof St=="function")for(H=St.call(H),St=0;!(ge=H.next()).done;)ge=ge.value,pe=tt+Ne(ge,St++),Ye+=te(ge,le,Te,pe,ke);else if(pe==="object"){if(typeof H.then=="function")return te(J(H),le,Te,ge,ke);throw le=String(H),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function fe(H,le,Te){if(H==null)return H;var ge=[],ke=0;return te(H,ge,"","",function(pe){return le.call(Te,pe,ke++)}),ge}function Ce(H){if(H._status===-1){var le=H._result;le=le(),le.then(function(Te){(H._status===0||H._status===-1)&&(H._status=1,H._result=Te)},function(Te){(H._status===0||H._status===-1)&&(H._status=2,H._result=Te)}),H._status===-1&&(H._status=0,H._result=le)}if(H._status===1)return H._result.default;throw H._result}var Re=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Le={map:fe,forEach:function(H,le,Te){fe(H,function(){le.apply(this,arguments)},Te)},count:function(H){var le=0;return fe(H,function(){le++}),le},toArray:function(H){return fe(H,function(le){return le})||[]},only:function(H){if(!Ke(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return $e.Activity=I,$e.Children=Le,$e.Component=ee,$e.Fragment=l,$e.Profiler=p,$e.PureComponent=K,$e.StrictMode=d,$e.Suspense=_,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,$e.__COMPILER_RUNTIME={__proto__:null,c:function(H){return W.H.useMemoCache(H)}},$e.cache=function(H){return function(){return H.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(H,le,Te){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ge=z({},H.props),ke=H.key;if(le!=null)for(pe in le.key!==void 0&&(ke=""+le.key),le)!he.call(le,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&le.ref===void 0||(ge[pe]=le[pe]);var pe=arguments.length-2;if(pe===1)ge.children=Te;else if(1<pe){for(var Ye=Array(pe),tt=0;tt<pe;tt++)Ye[tt]=arguments[tt+2];ge.children=Ye}return oe(H.type,ke,ge)},$e.createContext=function(H){return H={$$typeof:E,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:g,_context:H},H},$e.createElement=function(H,le,Te){var ge,ke={},pe=null;if(le!=null)for(ge in le.key!==void 0&&(pe=""+le.key),le)he.call(le,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(ke[ge]=le[ge]);var Ye=arguments.length-2;if(Ye===1)ke.children=Te;else if(1<Ye){for(var tt=Array(Ye),St=0;St<Ye;St++)tt[St]=arguments[St+2];ke.children=tt}if(H&&H.defaultProps)for(ge in Ye=H.defaultProps,Ye)ke[ge]===void 0&&(ke[ge]=Ye[ge]);return oe(H,pe,ke)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(H){return{$$typeof:S,render:H}},$e.isValidElement=Ke,$e.lazy=function(H){return{$$typeof:N,_payload:{_status:-1,_result:H},_init:Ce}},$e.memo=function(H,le){return{$$typeof:v,type:H,compare:le===void 0?null:le}},$e.startTransition=function(H){var le=W.T,Te={};W.T=Te;try{var ge=H(),ke=W.S;ke!==null&&ke(Te,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(be,Re)}catch(pe){Re(pe)}finally{le!==null&&Te.types!==null&&(le.types=Te.types),W.T=le}},$e.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},$e.use=function(H){return W.H.use(H)},$e.useActionState=function(H,le,Te){return W.H.useActionState(H,le,Te)},$e.useCallback=function(H,le){return W.H.useCallback(H,le)},$e.useContext=function(H){return W.H.useContext(H)},$e.useDebugValue=function(){},$e.useDeferredValue=function(H,le){return W.H.useDeferredValue(H,le)},$e.useEffect=function(H,le){return W.H.useEffect(H,le)},$e.useEffectEvent=function(H){return W.H.useEffectEvent(H)},$e.useId=function(){return W.H.useId()},$e.useImperativeHandle=function(H,le,Te){return W.H.useImperativeHandle(H,le,Te)},$e.useInsertionEffect=function(H,le){return W.H.useInsertionEffect(H,le)},$e.useLayoutEffect=function(H,le){return W.H.useLayoutEffect(H,le)},$e.useMemo=function(H,le){return W.H.useMemo(H,le)},$e.useOptimistic=function(H,le){return W.H.useOptimistic(H,le)},$e.useReducer=function(H,le,Te){return W.H.useReducer(H,le,Te)},$e.useRef=function(H){return W.H.useRef(H)},$e.useState=function(H){return W.H.useState(H)},$e.useSyncExternalStore=function(H,le,Te){return W.H.useSyncExternalStore(H,le,Te)},$e.useTransition=function(){return W.H.useTransition()},$e.version="19.2.4",$e}var X1;function uo(){return X1||(X1=1,Wh.exports=up()),Wh.exports}var ue=uo(),Kh={exports:{}},Zl={},Zh={exports:{}},Qh={};var W1;function hp(){return W1||(W1=1,(function(o){function r(te,fe){var Ce=te.length;te.push(fe);e:for(;0<Ce;){var Re=Ce-1>>>1,Le=te[Re];if(0<p(Le,fe))te[Re]=fe,te[Ce]=Le,Ce=Re;else break e}}function l(te){return te.length===0?null:te[0]}function d(te){if(te.length===0)return null;var fe=te[0],Ce=te.pop();if(Ce!==fe){te[0]=Ce;e:for(var Re=0,Le=te.length,H=Le>>>1;Re<H;){var le=2*(Re+1)-1,Te=te[le],ge=le+1,ke=te[ge];if(0>p(Te,Ce))ge<Le&&0>p(ke,Te)?(te[Re]=ke,te[ge]=Ce,Re=ge):(te[Re]=Te,te[le]=Ce,Re=le);else if(ge<Le&&0>p(ke,Ce))te[Re]=ke,te[ge]=Ce,Re=ge;else break e}}return fe}function p(te,fe){var Ce=te.sortIndex-fe.sortIndex;return Ce!==0?Ce:te.id-fe.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;o.unstable_now=function(){return g.now()}}else{var E=Date,S=E.now();o.unstable_now=function(){return E.now()-S}}var _=[],v=[],N=1,I=null,B=3,L=!1,U=!1,z=!1,Y=!1,ee=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ce(te){for(var fe=l(v);fe!==null;){if(fe.callback===null)d(v);else if(fe.startTime<=te)d(v),fe.sortIndex=fe.expirationTime,r(_,fe);else break;fe=l(v)}}function Ie(te){if(z=!1,ce(te),!U)if(l(_)!==null)U=!0,be||(be=!0,_e());else{var fe=l(v);fe!==null&&J(Ie,fe.startTime-te)}}var be=!1,W=-1,he=5,oe=-1;function wt(){return Y?!0:!(o.unstable_now()-oe<he)}function Ke(){if(Y=!1,be){var te=o.unstable_now();oe=te;var fe=!0;try{e:{U=!1,z&&(z=!1,ie(W),W=-1),L=!0;var Ce=B;try{t:{for(ce(te),I=l(_);I!==null&&!(I.expirationTime>te&&wt());){var Re=I.callback;if(typeof Re=="function"){I.callback=null,B=I.priorityLevel;var Le=Re(I.expirationTime<=te);if(te=o.unstable_now(),typeof Le=="function"){I.callback=Le,ce(te),fe=!0;break t}I===l(_)&&d(_),ce(te)}else d(_);I=l(_)}if(I!==null)fe=!0;else{var H=l(v);H!==null&&J(Ie,H.startTime-te),fe=!1}}break e}finally{I=null,B=Ce,L=!1}fe=void 0}}finally{fe?_e():be=!1}}}var _e;if(typeof K=="function")_e=function(){K(Ke)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Ne=ve.port2;ve.port1.onmessage=Ke,_e=function(){Ne.postMessage(null)}}else _e=function(){ee(Ke,0)};function J(te,fe){W=ee(function(){te(o.unstable_now())},fe)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(te){te.callback=null},o.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<te?Math.floor(1e3/te):5},o.unstable_getCurrentPriorityLevel=function(){return B},o.unstable_next=function(te){switch(B){case 1:case 2:case 3:var fe=3;break;default:fe=B}var Ce=B;B=fe;try{return te()}finally{B=Ce}},o.unstable_requestPaint=function(){Y=!0},o.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ce=B;B=te;try{return fe()}finally{B=Ce}},o.unstable_scheduleCallback=function(te,fe,Ce){var Re=o.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Re+Ce:Re):Ce=Re,te){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=Ce+Le,te={id:N++,callback:fe,priorityLevel:te,startTime:Ce,expirationTime:Le,sortIndex:-1},Ce>Re?(te.sortIndex=Ce,r(v,te),l(_)===null&&te===l(v)&&(z?(ie(W),W=-1):z=!0,J(Ie,Ce-Re))):(te.sortIndex=Le,r(_,te),U||L||(U=!0,be||(be=!0,_e()))),te},o.unstable_shouldYield=wt,o.unstable_wrapCallback=function(te){var fe=B;return function(){var Ce=B;B=fe;try{return te.apply(this,arguments)}finally{B=Ce}}}})(Qh)),Qh}var K1;function dp(){return K1||(K1=1,Zh.exports=hp()),Zh.exports}var Jh={exports:{}},Hn={};var Z1;function fp(){if(Z1)return Hn;Z1=1;var o=uo();function r(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)v+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var d={d:{f:l,r:function(){throw Error(r(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},p=Symbol.for("react.portal");function g(_,v,N){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:I==null?null:""+I,children:_,containerInfo:v,implementation:N}}var E=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Hn.createPortal=function(_,v){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(r(299));return g(_,v,null,N)},Hn.flushSync=function(_){var v=E.T,N=d.p;try{if(E.T=null,d.p=2,_)return _()}finally{E.T=v,d.p=N,d.d.f()}},Hn.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,d.d.C(_,v))},Hn.prefetchDNS=function(_){typeof _=="string"&&d.d.D(_)},Hn.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var N=v.as,I=S(N,v.crossOrigin),B=typeof v.integrity=="string"?v.integrity:void 0,L=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;N==="style"?d.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:I,integrity:B,fetchPriority:L}):N==="script"&&d.d.X(_,{crossOrigin:I,integrity:B,fetchPriority:L,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Hn.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var N=S(v.as,v.crossOrigin);d.d.M(_,{crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&d.d.M(_)},Hn.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var N=v.as,I=S(N,v.crossOrigin);d.d.L(_,N,{crossOrigin:I,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Hn.preloadModule=function(_,v){if(typeof _=="string")if(v){var N=S(v.as,v.crossOrigin);d.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else d.d.m(_)},Hn.requestFormReset=function(_){d.d.r(_)},Hn.unstable_batchedUpdates=function(_,v){return _(v)},Hn.useFormState=function(_,v,N){return E.H.useFormState(_,v,N)},Hn.useFormStatus=function(){return E.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var Q1;function gp(){if(Q1)return Jh.exports;Q1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Jh.exports=fp(),Jh.exports}var J1;function mp(){if(J1)return Zl;J1=1;var o=dp(),r=uo(),l=gp();function d(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function E(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function S(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(g(e)!==e)throw Error(d(188))}function v(e){var n=e.alternate;if(!n){if(n=g(e),n===null)throw Error(d(188));return n!==e?null:e}for(var s=e,h=n;;){var x=s.return;if(x===null)break;var w=x.alternate;if(w===null){if(h=x.return,h!==null){s=h;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===s)return _(x),e;if(w===h)return _(x),n;w=w.sibling}throw Error(d(188))}if(s.return!==h.return)s=x,h=w;else{for(var T=!1,M=x.child;M;){if(M===s){T=!0,s=x,h=w;break}if(M===h){T=!0,h=x,s=w;break}M=M.sibling}if(!T){for(M=w.child;M;){if(M===s){T=!0,s=w,h=x;break}if(M===h){T=!0,h=w,s=x;break}M=M.sibling}if(!T)throw Error(d(189))}}if(s.alternate!==h)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:n}function N(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=N(e),n!==null)return n;e=e.sibling}return null}var I=Object.assign,B=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),wt=Symbol.for("react.memo_cache_sentinel"),Ke=Symbol.iterator;function _e(e){return e===null||typeof e!="object"?null:(e=Ke&&e[Ke]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function Ne(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case ee:return"Profiler";case Y:return"StrictMode";case Ie:return"Suspense";case be:return"SuspenseList";case oe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case K:return e.displayName||"Context";case ie:return(e._context.displayName||"Context")+".Consumer";case ce:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return n=e.displayName||null,n!==null?n:Ne(e.type)||"Memo";case he:n=e._payload,e=e._init;try{return Ne(e(n))}catch{}}return null}var J=Array.isArray,te=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},Re=[],Le=-1;function H(e){return{current:e}}function le(e){0>Le||(e.current=Re[Le],Re[Le]=null,Le--)}function Te(e,n){Le++,Re[Le]=e.current,e.current=n}var ge=H(null),ke=H(null),pe=H(null),Ye=H(null);function tt(e,n){switch(Te(pe,n),Te(ke,e),Te(ge,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?f1(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=f1(n),e=g1(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}le(ge),Te(ge,e)}function St(){le(ge),le(ke),le(pe)}function Vn(e){e.memoizedState!==null&&Te(Ye,e);var n=ge.current,s=g1(n,e.type);n!==s&&(Te(ke,e),Te(ge,s))}function on(e){ke.current===e&&(le(ge),le(ke)),Ye.current===e&&(le(Ye),ql._currentValue=Ce)}var En,Je;function Gn(e){if(En===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);En=n&&n[1]||"",Je=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+En+e+Je}var Fn=!1;function Ci(e,n){if(!e||Fn)return"";Fn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(se){var ne=se}Reflect.construct(e,[],xe)}else{try{xe.call()}catch(se){ne=se}e.call(xe.prototype)}}else{try{throw Error()}catch(se){ne=se}(xe=e())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(se){if(se&&ne&&typeof se.stack=="string")return[se.stack,ne.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),T=w[0],M=w[1];if(T&&M){var P=T.split(`
`),$=M.split(`
`);for(x=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;x<$.length&&!$[x].includes("DetermineComponentFrameRoot");)x++;if(h===P.length||x===$.length)for(h=P.length-1,x=$.length-1;1<=h&&0<=x&&P[h]!==$[x];)x--;for(;1<=h&&0<=x;h--,x--)if(P[h]!==$[x]){if(h!==1||x!==1)do if(h--,x--,0>x||P[h]!==$[x]){var de=`
`+P[h].replace(" at new "," at ");return e.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",e.displayName)),de}while(1<=h&&0<=x);break}}}finally{Fn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Gn(s):""}function gn(e,n){switch(e.tag){case 26:case 27:case 5:return Gn(e.type);case 16:return Gn("Lazy");case 13:return e.child!==n&&n!==null?Gn("Suspense Fallback"):Gn("Suspense");case 19:return Gn("SuspenseList");case 0:case 15:return Ci(e.type,!1);case 11:return Ci(e.type.render,!1);case 1:return Ci(e.type,!0);case 31:return Gn("Activity");default:return""}}function vt(e){try{var n="",s=null;do n+=gn(e,s),s=e,e=e.return;while(e);return n}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var st=Object.prototype.hasOwnProperty,Ur=o.unstable_scheduleCallback,Me=o.unstable_cancelCallback,ns=o.unstable_shouldYield,po=o.unstable_requestPaint,Jt=o.unstable_now,nl=o.unstable_getCurrentPriorityLevel,Jn=o.unstable_ImmediatePriority,il=o.unstable_UserBlockingPriority,oi=o.unstable_NormalPriority,Dn=o.unstable_LowPriority,rl=o.unstable_IdlePriority,is=o.log,Jc=o.unstable_setDisableYieldValue,Vt=null,Se=null;function kt(e){if(typeof is=="function"&&Jc(e),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(Vt,e)}catch{}}var nt=Math.clz32?Math.clz32:al,Kt=Math.log,_a=Math.LN2;function al(e){return e>>>=0,e===0?32:31-(Kt(e)/_a|0)|0}var Ca=256,ht=262144,Ti=4194304;function $i(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ta(e,n,s){var h=e.pendingLanes;if(h===0)return 0;var x=0,w=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var M=h&134217727;return M!==0?(h=M&~w,h!==0?x=$i(h):(T&=M,T!==0?x=$i(T):s||(s=M&~e,s!==0&&(x=$i(s))))):(M=h&~w,M!==0?x=$i(M):T!==0?x=$i(T):s||(s=h&~e,s!==0&&(x=$i(s)))),x===0?0:n!==0&&n!==x&&(n&w)===0&&(w=x&-x,s=n&-n,w>=s||w===32&&(s&4194048)!==0)?n:x}function Mn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function sl(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function An(){var e=Ti;return Ti<<=1,(Ti&62914560)===0&&(Ti=4194304),e}function er(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function tr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ni(e,n,s,h,x,w){var T=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var M=e.entanglements,P=e.expirationTimes,$=e.hiddenUpdates;for(s=T&~s;0<s;){var de=31-nt(s),xe=1<<de;M[de]=0,P[de]=-1;var ne=$[de];if(ne!==null)for($[de]=null,de=0;de<ne.length;de++){var se=ne[de];se!==null&&(se.lane&=-536870913)}s&=~xe}h!==0&&xo(e,h,0),w!==0&&x===0&&e.tag!==0&&(e.suspendedLanes|=w&~(T&~n))}function xo(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-nt(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|s&261930}function nr(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var h=31-nt(s),x=1<<h;x&n|e[h]&n&&(e[h]|=n),s&=~x}}function rs(e,n){var s=n&-n;return s=(s&42)!==0?1:On(s),(s&(e.suspendedLanes|n))!==0?0:s}function On(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function qn(){var e=fe.p;return e!==0?e:(e=window.event,e===void 0?32:j1(e.type))}function Oe(e,n){var s=fe.p;try{return fe.p=e,n()}finally{fe.p=s}}var Yn=Math.random().toString(36).slice(2),cn="__reactFiber$"+Yn,Rt="__reactProps$"+Yn,ci="__reactContainer$"+Yn,zr="__reactEvents$"+Yn,as="__reactListeners$"+Yn,Ii="__reactHandles$"+Yn,yo="__reactResources$"+Yn,Na="__reactMarker$"+Yn;function $n(e){delete e[cn],delete e[Rt],delete e[zr],delete e[as],delete e[Ii]}function en(e){var n=e[cn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[ci]||s[cn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=b1(e);e!==null;){if(s=e[cn])return s;e=b1(e)}return n}e=s,s=e.parentNode}return null}function _t(e){if(e=e[cn]||e[ci]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Pr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(d(33))}function Xn(e){var n=e[yo];return n||(n=e[yo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function tn(e){e[Na]=!0}var ye=new Set,wo={};function Nt(e,n){ui(e,n),ui(e+"Capture",n)}function ui(e,n){for(wo[e]=n,e=0;e<n.length;e++)ye.add(n[e])}var $c=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yt={},xt={};function ot(e){return st.call(xt,e)?!0:st.call(yt,e)?!1:$c.test(e)?xt[e]=!0:(yt[e]=!0,!1)}function Fr(e,n,s){if(ot(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function Hr(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function hi(e,n,s,h){if(h===null)e.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+h)}}function bt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function eu(e,n,s){var h=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,w=h.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return x.call(this)},set:function(T){s=""+T,w.call(this,T)}}),Object.defineProperty(e,n,{enumerable:h.enumerable}),{getValue:function(){return s},setValue:function(T){s=""+T},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function qt(e){if(!e._valueTracker){var n=Fi(e)?"checked":"value";e._valueTracker=eu(e,n,""+e[n])}}function Hi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),h="";return e&&(h=Fi(e)?e.checked?"true":"false":e.value),e=h,e!==s?(n.setValue(e),!0):!1}function ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vr=/[\n"\\]/g;function lt(e){return e.replace(Vr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function mn(e,n,s,h,x,w,T,M){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),n!=null?T==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+bt(n)):e.value!==""+bt(n)&&(e.value=""+bt(n)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),n!=null?k(e,T,bt(n)):s!=null?k(e,T,bt(s)):h!=null&&e.removeAttribute("value"),x==null&&w!=null&&(e.defaultChecked=!!w),x!=null&&(e.checked=x&&typeof x!="function"&&typeof x!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.name=""+bt(M):e.removeAttribute("name")}function Z(e,n,s,h,x,w,T,M){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),n!=null||s!=null){if(!(w!=="submit"&&w!=="reset"||n!=null)){qt(e);return}s=s!=null?""+bt(s):"",n=n!=null?""+bt(n):s,M||n===e.value||(e.value=n),e.defaultValue=n}h=h??x,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=M?e.checked:!!h,e.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),qt(e)}function k(e,n,s){n==="number"&&ss(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function je(e,n,s,h){if(e=e.options,n){n={};for(var x=0;x<s.length;x++)n["$"+s[x]]=!0;for(s=0;s<e.length;s++)x=n.hasOwnProperty("$"+e[s].value),e[s].selected!==x&&(e[s].selected=x),x&&h&&(e[s].defaultSelected=!0)}else{for(s=""+bt(s),n=null,x=0;x<e.length;x++){if(e[x].value===s){e[x].selected=!0,h&&(e[x].defaultSelected=!0);return}n!==null||e[x].disabled||(n=e[x])}n!==null&&(n.selected=!0)}}function un(e,n,s){if(n!=null&&(n=""+bt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+bt(s):""}function Wn(e,n,s,h){if(n==null){if(h!=null){if(s!=null)throw Error(d(92));if(J(h)){if(1<h.length)throw Error(d(93));h=h[0]}s=h}s==null&&(s=""),n=s}s=bt(n),e.defaultValue=s,h=e.textContent,h===s&&h!==""&&h!==null&&(e.value=h),qt(e)}function Gr(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kn(e,n,s){var h=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,s):typeof s!="number"||s===0||ll.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Pe(e,n,s){if(n!=null&&typeof n!="object")throw Error(d(62));if(e=e.style,s!=null){for(var h in s)!s.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var x in n)h=n[x],n.hasOwnProperty(x)&&s[x]!==h&&Kn(e,x,h)}else for(var w in n)n.hasOwnProperty(w)&&Kn(e,w,n[w])}function zt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qr(e){return tu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ei(){}var Ia=null;function ol(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yt=null,Oi=null;function Vi(e){var n=_t(e);if(n&&(e=n.stateNode)){var s=e[Rt]||null;e:switch(e=n.stateNode,n.type){case"input":if(mn(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+lt(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var h=s[n];if(h!==e&&h.form===e.form){var x=h[Rt]||null;if(!x)throw Error(d(90));mn(h,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(n=0;n<s.length;n++)h=s[n],h.form===e.form&&Hi(h)}break e;case"textarea":un(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&je(e,!!s.multiple,n,!1)}}}var He=!1;function bo(e,n,s){if(He)return e(n,s);He=!0;try{var h=e(n);return h}finally{if(He=!1,(Yt!==null||Oi!==null)&&(dc(),Yt&&(n=Yt,e=Oi,Oi=Yt=null,Vi(n),e)))for(n=0;n<e.length;n++)Vi(e[n])}}function Ze(e,n){var s=e.stateNode;if(s===null)return null;var h=s[Rt]||null;if(h===null)return null;s=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,n,typeof s));return s}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=!1;if(Pt)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){cl=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{cl=!1}var Gi=null,qi=null,ls=null;function Yr(){if(ls)return ls;var e,n=qi,s=n.length,h,x="value"in Gi?Gi.value:Gi.textContent,w=x.length;for(e=0;e<s&&n[e]===x[e];e++);var T=s-e;for(h=1;h<=T&&n[s-h]===x[w-h];h++);return ls=x.slice(e,1<h?1-h:void 0)}function ir(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function rr(){return!0}function ul(){return!1}function pn(e){function n(s,h,x,w,T){this._reactName=s,this._targetInst=x,this.type=h,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var M in e)e.hasOwnProperty(M)&&(s=e[M],this[M]=s?s(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?rr:ul,this.isPropagationStopped=ul,this}return I(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),n}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sn=pn(di),Xr=I({},di,{view:0,detail:0}),Eo=pn(Xr),os,hl,Oa,cs=I({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ra,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oa&&(Oa&&e.type==="mousemove"?(os=e.screenX-Oa.screenX,hl=e.screenY-Oa.screenY):hl=os=0,Oa=e),os)},movementY:function(e){return"movementY"in e?e.movementY:hl}}),Ct=pn(cs),Ao=I({},cs,{dataTransfer:0}),us=pn(Ao),ar=I({},Xr,{relatedTarget:0}),dl=pn(ar),ae=I({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),it=pn(ae),_n=I({},di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hs=pn(_n),So=I({},di,{data:0}),_o=pn(So),nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=fl[e])?!!n[e]:!1}function Ra(){return hn}var Zt=I({},Xr,{key:function(e){if(e.key){var n=nu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ir(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ra,charCode:function(e){return e.type==="keypress"?ir(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ir(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ds=pn(Zt),gr=I({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),It=pn(gr),Ve=I({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ra}),ru=pn(Ve),Ft=I({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),mr=pn(Ft),Wr=I({},cs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),au=pn(Wr),Ri=I({},di,{newState:0,oldState:0}),gl=pn(Ri),Co=[9,13,27,32],Da=Pt&&"CompositionEvent"in window,Kr=null;Pt&&"documentMode"in document&&(Kr=document.documentMode);var To=Pt&&"TextEvent"in window&&!Kr,No=Pt&&(!Da||Kr&&8<Kr&&11>=Kr),pr=" ",fs=!1;function Io(e,n){switch(e){case"keyup":return Co.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function sr(e,n){switch(e){case"compositionend":return Zr(n);case"keypress":return n.which!==32?null:(fs=!0,pr);case"textInput":return e=n.data,e===pr&&fs?null:e;default:return null}}function gs(e,n){if(Qr)return e==="compositionend"||!Da&&Io(e,n)?(e=Yr(),ls=qi=Gi=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return No&&n.locale!=="ko"?null:n.data;default:return null}}var ti={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ml(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ti[e.type]:n==="textarea"}function fi(e,n,s,h){Yt?Oi?Oi.push(h):Oi=[h]:Yt=h,n=wc(n,"onChange"),0<n.length&&(s=new Sn("onChange","change",null,s,h),e.push({event:s,listeners:n}))}var Ma=null,xr=null;function su(e){l1(e,0)}function Ba(e){var n=Pr(e);if(Hi(n))return e}function gi(e,n){if(e==="change")return n}var Oo=!1;if(Pt){var ka;if(Pt){var yr="oninput"in document;if(!yr){var dt=document.createElement("div");dt.setAttribute("oninput","return;"),yr=typeof dt.oninput=="function"}ka=yr}else ka=!1;Oo=ka&&(!document.documentMode||9<document.documentMode)}function La(){Ma&&(Ma.detachEvent("onpropertychange",O),xr=Ma=null)}function O(e){if(e.propertyName==="value"&&Ba(xr)){var n=[];fi(n,xr,e,ol(e)),bo(su,n)}}function t(e,n,s){e==="focusin"?(La(),Ma=n,xr=s,Ma.attachEvent("onpropertychange",O)):e==="focusout"&&La()}function i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ba(xr)}function a(e,n){if(e==="click")return Ba(n)}function c(e,n){if(e==="input"||e==="change")return Ba(n)}function u(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var f=typeof Object.is=="function"?Object.is:u;function m(e,n){if(f(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),h=Object.keys(n);if(s.length!==h.length)return!1;for(h=0;h<s.length;h++){var x=s[h];if(!st.call(n,x)||!f(e[x],n[x]))return!1}return!0}function y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A(e,n){var s=y(e);e=0;for(var h;s;){if(s.nodeType===3){if(h=e+s.textContent.length,e<=n&&h>=n)return{node:s,offset:n-e};e=h}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=y(s)}}function C(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?C(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function R(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ss(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ss(e.document)}return n}function D(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var j=Pt&&"documentMode"in document&&11>=document.documentMode,F=null,V=null,X=null,re=!1;function Ae(e,n,s){var h=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;re||F==null||F!==ss(h)||(h=F,"selectionStart"in h&&D(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),X&&m(X,h)||(X=h,h=wc(V,"onSelect"),0<h.length&&(n=new Sn("onSelect","select",null,n,s),e.push({event:n,listeners:h}),n.target=F)))}function Ee(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var we={animationend:Ee("Animation","AnimationEnd"),animationiteration:Ee("Animation","AnimationIteration"),animationstart:Ee("Animation","AnimationStart"),transitionrun:Ee("Transition","TransitionRun"),transitionstart:Ee("Transition","TransitionStart"),transitioncancel:Ee("Transition","TransitionCancel"),transitionend:Ee("Transition","TransitionEnd")},at={},Qe={};Pt&&(Qe=document.createElement("div").style,"AnimationEvent"in window||(delete we.animationend.animation,delete we.animationiteration.animation,delete we.animationstart.animation),"TransitionEvent"in window||delete we.transitionend.transition);function nn(e){if(at[e])return at[e];if(!we[e])return e;var n=we[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Qe)return at[e]=n[s];return e}var ni=nn("animationend"),Bn=nn("animationiteration"),Ot=nn("animationstart"),Cn=nn("transitionrun"),Zn=nn("transitionstart"),Jr=nn("transitioncancel"),wr=nn("transitionend"),Ro=new Map,pl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pl.push("scrollEnd");function Yi(e,n){Ro.set(e,n),Nt(n,[e])}var Do=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Di=[],ms=0,lu=0;function Mo(){for(var e=ms,n=lu=ms=0;n<e;){var s=Di[n];Di[n++]=null;var h=Di[n];Di[n++]=null;var x=Di[n];Di[n++]=null;var w=Di[n];if(Di[n++]=null,h!==null&&x!==null){var T=h.pending;T===null?x.next=x:(x.next=T.next,T.next=x),h.pending=x}w!==0&&Fd(s,x,w)}}function Bo(e,n,s,h){Di[ms++]=e,Di[ms++]=n,Di[ms++]=s,Di[ms++]=h,lu|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function ou(e,n,s,h){return Bo(e,n,s,h),ko(e)}function ja(e,n){return Bo(e,null,null,n),ko(e)}function Fd(e,n,s){e.lanes|=s;var h=e.alternate;h!==null&&(h.lanes|=s);for(var x=!1,w=e.return;w!==null;)w.childLanes|=s,h=w.alternate,h!==null&&(h.childLanes|=s),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(x=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,x&&n!==null&&(x=31-nt(s),e=w.hiddenUpdates,h=e[x],h===null?e[x]=[n]:h.push(n),n.lane=s|536870912),w):null}function ko(e){if(50<Ul)throw Ul=0,xh=null,Error(d(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ps={};function G2(e,n,s,h){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(e,n,s,h){return new G2(e,n,s,h)}function cu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vr(e,n){var s=e.alternate;return s===null?(s=mi(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Hd(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Lo(e,n,s,h,x,w){var T=0;if(h=e,typeof e=="function")cu(e)&&(T=1);else if(typeof e=="string")T=Km(e,s,ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case oe:return e=mi(31,s,n,x),e.elementType=oe,e.lanes=w,e;case z:return Ua(s.children,x,w,n);case Y:T=8,x|=24;break;case ee:return e=mi(12,s,n,x|2),e.elementType=ee,e.lanes=w,e;case Ie:return e=mi(13,s,n,x),e.elementType=Ie,e.lanes=w,e;case be:return e=mi(19,s,n,x),e.elementType=be,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:T=10;break e;case ie:T=9;break e;case ce:T=11;break e;case W:T=14;break e;case he:T=16,h=null;break e}T=29,s=Error(d(130,e===null?"null":typeof e,"")),h=null}return n=mi(T,s,n,x),n.elementType=e,n.type=h,n.lanes=w,n}function Ua(e,n,s,h){return e=mi(7,e,h,n),e.lanes=s,e}function uu(e,n,s){return e=mi(6,e,null,n),e.lanes=s,e}function Vd(e){var n=mi(18,null,null,0);return n.stateNode=e,n}function hu(e,n,s){return n=mi(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Gd=new WeakMap;function Mi(e,n){if(typeof e=="object"&&e!==null){var s=Gd.get(e);return s!==void 0?s:(n={value:e,source:n,stack:vt(n)},Gd.set(e,n),n)}return{value:e,source:n,stack:vt(n)}}var xs=[],ys=0,jo=null,xl=0,Bi=[],ki=0,$r=null,lr=1,or="";function br(e,n){xs[ys++]=xl,xs[ys++]=jo,jo=e,xl=n}function qd(e,n,s){Bi[ki++]=lr,Bi[ki++]=or,Bi[ki++]=$r,$r=e;var h=lr;e=or;var x=32-nt(h)-1;h&=~(1<<x),s+=1;var w=32-nt(n)+x;if(30<w){var T=x-x%5;w=(h&(1<<T)-1).toString(32),h>>=T,x-=T,lr=1<<32-nt(n)+x|s<<x|h,or=w+e}else lr=1<<w|s<<x|h,or=e}function du(e){e.return!==null&&(br(e,1),qd(e,1,0))}function fu(e){for(;e===jo;)jo=xs[--ys],xs[ys]=null,xl=xs[--ys],xs[ys]=null;for(;e===$r;)$r=Bi[--ki],Bi[ki]=null,or=Bi[--ki],Bi[ki]=null,lr=Bi[--ki],Bi[ki]=null}function Yd(e,n){Bi[ki++]=lr,Bi[ki++]=or,Bi[ki++]=$r,lr=n.id,or=n.overflow,$r=e}var kn=null,Xt=null,mt=!1,ea=null,Li=!1,gu=Error(d(519));function ta(e){var n=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yl(Mi(n,e)),gu}function Xd(e){var n=e.stateNode,s=e.type,h=e.memoizedProps;switch(n[cn]=e,n[Rt]=h,s){case"dialog":ut("cancel",n),ut("close",n);break;case"iframe":case"object":case"embed":ut("load",n);break;case"video":case"audio":for(s=0;s<Pl.length;s++)ut(Pl[s],n);break;case"source":ut("error",n);break;case"img":case"image":case"link":ut("error",n),ut("load",n);break;case"details":ut("toggle",n);break;case"input":ut("invalid",n),Z(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":ut("invalid",n);break;case"textarea":ut("invalid",n),Wn(n,h.value,h.defaultValue,h.children)}s=h.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||h.suppressHydrationWarning===!0||h1(n.textContent,s)?(h.popover!=null&&(ut("beforetoggle",n),ut("toggle",n)),h.onScroll!=null&&ut("scroll",n),h.onScrollEnd!=null&&ut("scrollend",n),h.onClick!=null&&(n.onclick=ei),n=!0):n=!1,n||ta(e,!0)}function Wd(e){for(kn=e.return;kn;)switch(kn.tag){case 5:case 31:case 13:Li=!1;return;case 27:case 3:Li=!0;return;default:kn=kn.return}}function ws(e){if(e!==kn)return!1;if(!mt)return Wd(e),mt=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Dh(e.type,e.memoizedProps)),s=!s),s&&Xt&&ta(e),Wd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Xt=v1(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Xt=v1(e)}else n===27?(n=Xt,ma(e.type)?(e=jh,jh=null,Xt=e):Xt=n):Xt=kn?Ui(e.stateNode.nextSibling):null;return!0}function za(){Xt=kn=null,mt=!1}function mu(){var e=ea;return e!==null&&(si===null?si=e:si.push.apply(si,e),ea=null),e}function yl(e){ea===null?ea=[e]:ea.push(e)}var pu=H(null),Pa=null,Er=null;function na(e,n,s){Te(pu,n._currentValue),n._currentValue=s}function Ar(e){e._currentValue=pu.current,le(pu)}function xu(e,n,s){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===s)break;e=e.return}}function yu(e,n,s,h){var x=e.child;for(x!==null&&(x.return=e);x!==null;){var w=x.dependencies;if(w!==null){var T=x.child;w=w.firstContext;e:for(;w!==null;){var M=w;w=x;for(var P=0;P<n.length;P++)if(M.context===n[P]){w.lanes|=s,M=w.alternate,M!==null&&(M.lanes|=s),xu(w.return,s,e),h||(T=null);break e}w=M.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(d(341));T.lanes|=s,w=T.alternate,w!==null&&(w.lanes|=s),xu(T,s,e),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===e){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function vs(e,n,s,h){e=null;for(var x=n,w=!1;x!==null;){if(!w){if((x.flags&524288)!==0)w=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(d(387));if(T=T.memoizedProps,T!==null){var M=x.type;f(x.pendingProps.value,T.value)||(e!==null?e.push(M):e=[M])}}else if(x===Ye.current){if(T=x.alternate,T===null)throw Error(d(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(e!==null?e.push(ql):e=[ql])}x=x.return}e!==null&&yu(n,e,s,h),n.flags|=262144}function Uo(e){for(e=e.firstContext;e!==null;){if(!f(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fa(e){Pa=e,Er=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ln(e){return Kd(Pa,e)}function zo(e,n){return Pa===null&&Fa(e),Kd(e,n)}function Kd(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Er===null){if(e===null)throw Error(d(308));Er=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Er=Er.next=n;return s}var q2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},Y2=o.unstable_scheduleCallback,X2=o.unstable_NormalPriority,xn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wu(){return{controller:new q2,data:new Map,refCount:0}}function wl(e){e.refCount--,e.refCount===0&&Y2(X2,function(){e.controller.abort()})}var vl=null,vu=0,bs=0,Es=null;function W2(e,n){if(vl===null){var s=vl=[];vu=0,bs=Ah(),Es={status:"pending",value:void 0,then:function(h){s.push(h)}}}return vu++,n.then(Zd,Zd),n}function Zd(){if(--vu===0&&vl!==null){Es!==null&&(Es.status="fulfilled");var e=vl;vl=null,bs=0,Es=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function K2(e,n){var s=[],h={status:"pending",value:null,reason:null,then:function(x){s.push(x)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var x=0;x<s.length;x++)(0,s[x])(n)},function(x){for(h.status="rejected",h.reason=x,x=0;x<s.length;x++)(0,s[x])(void 0)}),h}var Qd=te.S;te.S=function(e,n){k0=Jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&W2(e,n),Qd!==null&&Qd(e,n)};var Ha=H(null);function bu(){var e=Ha.current;return e!==null?e:Ht.pooledCache}function Po(e,n){n===null?Te(Ha,Ha.current):Te(Ha,n.pool)}function Jd(){var e=bu();return e===null?null:{parent:xn._currentValue,pool:e}}var As=Error(d(460)),Eu=Error(d(474)),Fo=Error(d(542)),Ho={then:function(){}};function $d(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ef(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(ei,ei),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,nf(e),e;default:if(typeof n.status=="string")n.then(ei,ei);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var x=n;x.status="fulfilled",x.value=h}},function(h){if(n.status==="pending"){var x=n;x.status="rejected",x.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,nf(e),e}throw Ga=n,As}}function Va(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Ga=s,As):s}}var Ga=null;function tf(){if(Ga===null)throw Error(d(459));var e=Ga;return Ga=null,e}function nf(e){if(e===As||e===Fo)throw Error(d(483))}var Ss=null,bl=0;function Vo(e){var n=bl;return bl+=1,Ss===null&&(Ss=[]),ef(Ss,e,n)}function El(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Go(e,n){throw n.$$typeof===B?Error(d(525)):(e=Object.prototype.toString.call(n),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function rf(e){function n(q,G){if(e){var Q=q.deletions;Q===null?(q.deletions=[G],q.flags|=16):Q.push(G)}}function s(q,G){if(!e)return null;for(;G!==null;)n(q,G),G=G.sibling;return null}function h(q){for(var G=new Map;q!==null;)q.key!==null?G.set(q.key,q):G.set(q.index,q),q=q.sibling;return G}function x(q,G){return q=vr(q,G),q.index=0,q.sibling=null,q}function w(q,G,Q){return q.index=Q,e?(Q=q.alternate,Q!==null?(Q=Q.index,Q<G?(q.flags|=67108866,G):Q):(q.flags|=67108866,G)):(q.flags|=1048576,G)}function T(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function M(q,G,Q,me){return G===null||G.tag!==6?(G=uu(Q,q.mode,me),G.return=q,G):(G=x(G,Q),G.return=q,G)}function P(q,G,Q,me){var Fe=Q.type;return Fe===z?de(q,G,Q.props.children,me,Q.key):G!==null&&(G.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===he&&Va(Fe)===G.type)?(G=x(G,Q.props),El(G,Q),G.return=q,G):(G=Lo(Q.type,Q.key,Q.props,null,q.mode,me),El(G,Q),G.return=q,G)}function $(q,G,Q,me){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=hu(Q,q.mode,me),G.return=q,G):(G=x(G,Q.children||[]),G.return=q,G)}function de(q,G,Q,me,Fe){return G===null||G.tag!==7?(G=Ua(Q,q.mode,me,Fe),G.return=q,G):(G=x(G,Q),G.return=q,G)}function xe(q,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=uu(""+G,q.mode,Q),G.return=q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case L:return Q=Lo(G.type,G.key,G.props,null,q.mode,Q),El(Q,G),Q.return=q,Q;case U:return G=hu(G,q.mode,Q),G.return=q,G;case he:return G=Va(G),xe(q,G,Q)}if(J(G)||_e(G))return G=Ua(G,q.mode,Q,null),G.return=q,G;if(typeof G.then=="function")return xe(q,Vo(G),Q);if(G.$$typeof===K)return xe(q,zo(q,G),Q);Go(q,G)}return null}function ne(q,G,Q,me){var Fe=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Fe!==null?null:M(q,G,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case L:return Q.key===Fe?P(q,G,Q,me):null;case U:return Q.key===Fe?$(q,G,Q,me):null;case he:return Q=Va(Q),ne(q,G,Q,me)}if(J(Q)||_e(Q))return Fe!==null?null:de(q,G,Q,me,null);if(typeof Q.then=="function")return ne(q,G,Vo(Q),me);if(Q.$$typeof===K)return ne(q,G,zo(q,Q),me);Go(q,Q)}return null}function se(q,G,Q,me,Fe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return q=q.get(Q)||null,M(G,q,""+me,Fe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case L:return q=q.get(me.key===null?Q:me.key)||null,P(G,q,me,Fe);case U:return q=q.get(me.key===null?Q:me.key)||null,$(G,q,me,Fe);case he:return me=Va(me),se(q,G,Q,me,Fe)}if(J(me)||_e(me))return q=q.get(Q)||null,de(G,q,me,Fe,null);if(typeof me.then=="function")return se(q,G,Q,Vo(me),Fe);if(me.$$typeof===K)return se(q,G,Q,zo(G,me),Fe);Go(G,me)}return null}function Be(q,G,Q,me){for(var Fe=null,Et=null,Ue=G,rt=G=0,gt=null;Ue!==null&&rt<Q.length;rt++){Ue.index>rt?(gt=Ue,Ue=null):gt=Ue.sibling;var At=ne(q,Ue,Q[rt],me);if(At===null){Ue===null&&(Ue=gt);break}e&&Ue&&At.alternate===null&&n(q,Ue),G=w(At,G,rt),Et===null?Fe=At:Et.sibling=At,Et=At,Ue=gt}if(rt===Q.length)return s(q,Ue),mt&&br(q,rt),Fe;if(Ue===null){for(;rt<Q.length;rt++)Ue=xe(q,Q[rt],me),Ue!==null&&(G=w(Ue,G,rt),Et===null?Fe=Ue:Et.sibling=Ue,Et=Ue);return mt&&br(q,rt),Fe}for(Ue=h(Ue);rt<Q.length;rt++)gt=se(Ue,q,rt,Q[rt],me),gt!==null&&(e&&gt.alternate!==null&&Ue.delete(gt.key===null?rt:gt.key),G=w(gt,G,rt),Et===null?Fe=gt:Et.sibling=gt,Et=gt);return e&&Ue.forEach(function(va){return n(q,va)}),mt&&br(q,rt),Fe}function qe(q,G,Q,me){if(Q==null)throw Error(d(151));for(var Fe=null,Et=null,Ue=G,rt=G=0,gt=null,At=Q.next();Ue!==null&&!At.done;rt++,At=Q.next()){Ue.index>rt?(gt=Ue,Ue=null):gt=Ue.sibling;var va=ne(q,Ue,At.value,me);if(va===null){Ue===null&&(Ue=gt);break}e&&Ue&&va.alternate===null&&n(q,Ue),G=w(va,G,rt),Et===null?Fe=va:Et.sibling=va,Et=va,Ue=gt}if(At.done)return s(q,Ue),mt&&br(q,rt),Fe;if(Ue===null){for(;!At.done;rt++,At=Q.next())At=xe(q,At.value,me),At!==null&&(G=w(At,G,rt),Et===null?Fe=At:Et.sibling=At,Et=At);return mt&&br(q,rt),Fe}for(Ue=h(Ue);!At.done;rt++,At=Q.next())At=se(Ue,q,rt,At.value,me),At!==null&&(e&&At.alternate!==null&&Ue.delete(At.key===null?rt:At.key),G=w(At,G,rt),Et===null?Fe=At:Et.sibling=At,Et=At);return e&&Ue.forEach(function(sp){return n(q,sp)}),mt&&br(q,rt),Fe}function Ut(q,G,Q,me){if(typeof Q=="object"&&Q!==null&&Q.type===z&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case L:e:{for(var Fe=Q.key;G!==null;){if(G.key===Fe){if(Fe=Q.type,Fe===z){if(G.tag===7){s(q,G.sibling),me=x(G,Q.props.children),me.return=q,q=me;break e}}else if(G.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===he&&Va(Fe)===G.type){s(q,G.sibling),me=x(G,Q.props),El(me,Q),me.return=q,q=me;break e}s(q,G);break}else n(q,G);G=G.sibling}Q.type===z?(me=Ua(Q.props.children,q.mode,me,Q.key),me.return=q,q=me):(me=Lo(Q.type,Q.key,Q.props,null,q.mode,me),El(me,Q),me.return=q,q=me)}return T(q);case U:e:{for(Fe=Q.key;G!==null;){if(G.key===Fe)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){s(q,G.sibling),me=x(G,Q.children||[]),me.return=q,q=me;break e}else{s(q,G);break}else n(q,G);G=G.sibling}me=hu(Q,q.mode,me),me.return=q,q=me}return T(q);case he:return Q=Va(Q),Ut(q,G,Q,me)}if(J(Q))return Be(q,G,Q,me);if(_e(Q)){if(Fe=_e(Q),typeof Fe!="function")throw Error(d(150));return Q=Fe.call(Q),qe(q,G,Q,me)}if(typeof Q.then=="function")return Ut(q,G,Vo(Q),me);if(Q.$$typeof===K)return Ut(q,G,zo(q,Q),me);Go(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,G!==null&&G.tag===6?(s(q,G.sibling),me=x(G,Q),me.return=q,q=me):(s(q,G),me=uu(Q,q.mode,me),me.return=q,q=me),T(q)):s(q,G)}return function(q,G,Q,me){try{bl=0;var Fe=Ut(q,G,Q,me);return Ss=null,Fe}catch(Ue){if(Ue===As||Ue===Fo)throw Ue;var Et=mi(29,Ue,null,q.mode);return Et.lanes=me,Et.return=q,Et}}}var qa=rf(!0),af=rf(!1),ia=!1;function Au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Su(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,n,s){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(Tt&2)!==0){var x=h.pending;return x===null?n.next=n:(n.next=x.next,x.next=n),h.pending=n,n=ko(e),Fd(e,null,s),n}return Bo(e,h,n,s),ko(e)}function Al(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,nr(e,s)}}function _u(e,n){var s=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,s===h)){var x=null,w=null;if(s=s.firstBaseUpdate,s!==null){do{var T={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};w===null?x=w=T:w=w.next=T,s=s.next}while(s!==null);w===null?x=w=n:w=w.next=n}else x=w=n;s={baseState:h.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var Cu=!1;function Sl(){if(Cu){var e=Es;if(e!==null)throw e}}function _l(e,n,s,h){Cu=!1;var x=e.updateQueue;ia=!1;var w=x.firstBaseUpdate,T=x.lastBaseUpdate,M=x.shared.pending;if(M!==null){x.shared.pending=null;var P=M,$=P.next;P.next=null,T===null?w=$:T.next=$,T=P;var de=e.alternate;de!==null&&(de=de.updateQueue,M=de.lastBaseUpdate,M!==T&&(M===null?de.firstBaseUpdate=$:M.next=$,de.lastBaseUpdate=P))}if(w!==null){var xe=x.baseState;T=0,de=$=P=null,M=w;do{var ne=M.lane&-536870913,se=ne!==M.lane;if(se?(ft&ne)===ne:(h&ne)===ne){ne!==0&&ne===bs&&(Cu=!0),de!==null&&(de=de.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Be=e,qe=M;ne=n;var Ut=s;switch(qe.tag){case 1:if(Be=qe.payload,typeof Be=="function"){xe=Be.call(Ut,xe,ne);break e}xe=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=qe.payload,ne=typeof Be=="function"?Be.call(Ut,xe,ne):Be,ne==null)break e;xe=I({},xe,ne);break e;case 2:ia=!0}}ne=M.callback,ne!==null&&(e.flags|=64,se&&(e.flags|=8192),se=x.callbacks,se===null?x.callbacks=[ne]:se.push(ne))}else se={lane:ne,tag:M.tag,payload:M.payload,callback:M.callback,next:null},de===null?($=de=se,P=xe):de=de.next=se,T|=ne;if(M=M.next,M===null){if(M=x.shared.pending,M===null)break;se=M,M=se.next,se.next=null,x.lastBaseUpdate=se,x.shared.pending=null}}while(!0);de===null&&(P=xe),x.baseState=P,x.firstBaseUpdate=$,x.lastBaseUpdate=de,w===null&&(x.shared.lanes=0),ua|=T,e.lanes=T,e.memoizedState=xe}}function sf(e,n){if(typeof e!="function")throw Error(d(191,e));e.call(n)}function lf(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)sf(s[e],n)}var _s=H(null),qo=H(0);function of(e,n){e=Dr,Te(qo,e),Te(_s,n),Dr=e|n.baseLanes}function Tu(){Te(qo,Dr),Te(_s,_s.current)}function Nu(){Dr=qo.current,le(_s),le(qo)}var pi=H(null),ji=null;function sa(e){var n=e.alternate;Te(dn,dn.current&1),Te(pi,e),ji===null&&(n===null||_s.current!==null||n.memoizedState!==null)&&(ji=e)}function Iu(e){Te(dn,dn.current),Te(pi,e),ji===null&&(ji=e)}function cf(e){e.tag===22?(Te(dn,dn.current),Te(pi,e),ji===null&&(ji=e)):la()}function la(){Te(dn,dn.current),Te(pi,pi.current)}function xi(e){le(pi),ji===e&&(ji=null),le(dn)}var dn=H(0);function Yo(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||kh(s)||Lh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Sr=0,et=null,Lt=null,yn=null,Xo=!1,Cs=!1,Ya=!1,Wo=0,Cl=0,Ts=null,Z2=0;function rn(){throw Error(d(321))}function Ou(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!f(e[s],n[s]))return!1;return!0}function Ru(e,n,s,h,x,w){return Sr=w,et=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,te.H=e===null||e.memoizedState===null?Yf:Yu,Ya=!1,w=s(h,x),Ya=!1,Cs&&(w=hf(n,s,h,x)),uf(e),w}function uf(e){te.H=Il;var n=Lt!==null&&Lt.next!==null;if(Sr=0,yn=Lt=et=null,Xo=!1,Cl=0,Ts=null,n)throw Error(d(300));e===null||wn||(e=e.dependencies,e!==null&&Uo(e)&&(wn=!0))}function hf(e,n,s,h){et=e;var x=0;do{if(Cs&&(Ts=null),Cl=0,Cs=!1,25<=x)throw Error(d(301));if(x+=1,yn=Lt=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}te.H=Xf,w=n(s,h)}while(Cs);return w}function Q2(){var e=te.H,n=e.useState()[0];return n=typeof n.then=="function"?Tl(n):n,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(et.flags|=1024),n}function Du(){var e=Wo!==0;return Wo=0,e}function Mu(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function Bu(e){if(Xo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Xo=!1}Sr=0,yn=Lt=et=null,Cs=!1,Cl=Wo=0,Ts=null}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?et.memoizedState=yn=e:yn=yn.next=e,yn}function fn(){if(Lt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var n=yn===null?et.memoizedState:yn.next;if(n!==null)yn=n,Lt=e;else{if(e===null)throw et.alternate===null?Error(d(467)):Error(d(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},yn===null?et.memoizedState=yn=e:yn=yn.next=e}return yn}function Ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(e){var n=Cl;return Cl+=1,Ts===null&&(Ts=[]),e=ef(Ts,e,n),n=et,(yn===null?n.memoizedState:yn.next)===null&&(n=n.alternate,te.H=n===null||n.memoizedState===null?Yf:Yu),e}function Zo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tl(e);if(e.$$typeof===K)return Ln(e)}throw Error(d(438,String(e)))}function ku(e){var n=null,s=et.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var h=et.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(x){return x.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Ko(),et.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),h=0;h<e;h++)s[h]=wt;return n.index++,s}function _r(e,n){return typeof n=="function"?n(e):n}function Qo(e){var n=fn();return Lu(n,Lt,e)}function Lu(e,n,s){var h=e.queue;if(h===null)throw Error(d(311));h.lastRenderedReducer=s;var x=e.baseQueue,w=h.pending;if(w!==null){if(x!==null){var T=x.next;x.next=w.next,w.next=T}n.baseQueue=x=w,h.pending=null}if(w=e.baseState,x===null)e.memoizedState=w;else{n=x.next;var M=T=null,P=null,$=n,de=!1;do{var xe=$.lane&-536870913;if(xe!==$.lane?(ft&xe)===xe:(Sr&xe)===xe){var ne=$.revertLane;if(ne===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),xe===bs&&(de=!0);else if((Sr&ne)===ne){$=$.next,ne===bs&&(de=!0);continue}else xe={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(M=P=xe,T=w):P=P.next=xe,et.lanes|=ne,ua|=ne;xe=$.action,Ya&&s(w,xe),w=$.hasEagerState?$.eagerState:s(w,xe)}else ne={lane:xe,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(M=P=ne,T=w):P=P.next=ne,et.lanes|=xe,ua|=xe;$=$.next}while($!==null&&$!==n);if(P===null?T=w:P.next=M,!f(w,e.memoizedState)&&(wn=!0,de&&(s=Es,s!==null)))throw s;e.memoizedState=w,e.baseState=T,e.baseQueue=P,h.lastRenderedState=w}return x===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function ju(e){var n=fn(),s=n.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var h=s.dispatch,x=s.pending,w=n.memoizedState;if(x!==null){s.pending=null;var T=x=x.next;do w=e(w,T.action),T=T.next;while(T!==x);f(w,n.memoizedState)||(wn=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),s.lastRenderedState=w}return[w,h]}function df(e,n,s){var h=et,x=fn(),w=mt;if(w){if(s===void 0)throw Error(d(407));s=s()}else s=n();var T=!f((Lt||x).memoizedState,s);if(T&&(x.memoizedState=s,wn=!0),x=x.queue,Pu(mf.bind(null,h,x,e),[e]),x.getSnapshot!==n||T||yn!==null&&yn.memoizedState.tag&1){if(h.flags|=2048,Ns(9,{destroy:void 0},gf.bind(null,h,x,s,n),null),Ht===null)throw Error(d(349));w||(Sr&127)!==0||ff(h,n,s)}return s}function ff(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=et.updateQueue,n===null?(n=Ko(),et.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function gf(e,n,s,h){n.value=s,n.getSnapshot=h,pf(n)&&xf(e)}function mf(e,n,s){return s(function(){pf(n)&&xf(e)})}function pf(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!f(e,s)}catch{return!0}}function xf(e){var n=ja(e,2);n!==null&&li(n,e,2)}function Uu(e){var n=Qn();if(typeof e=="function"){var s=e;if(e=s(),Ya){kt(!0);try{s()}finally{kt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:e},n}function yf(e,n,s,h){return e.baseState=s,Lu(e,Lt,typeof h=="function"?h:_r)}function J2(e,n,s,h,x){if(ec(e))throw Error(d(485));if(e=n.action,e!==null){var w={payload:x,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){w.listeners.push(T)}};te.T!==null?s(!0):w.isTransition=!1,h(w),s=n.pending,s===null?(w.next=n.pending=w,wf(n,w)):(w.next=s.next,n.pending=s.next=w)}}function wf(e,n){var s=n.action,h=n.payload,x=e.state;if(n.isTransition){var w=te.T,T={};te.T=T;try{var M=s(x,h),P=te.S;P!==null&&P(T,M),vf(e,n,M)}catch($){zu(e,n,$)}finally{w!==null&&T.types!==null&&(w.types=T.types),te.T=w}}else try{w=s(x,h),vf(e,n,w)}catch($){zu(e,n,$)}}function vf(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(h){bf(e,n,h)},function(h){return zu(e,n,h)}):bf(e,n,s)}function bf(e,n,s){n.status="fulfilled",n.value=s,Ef(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,wf(e,s)))}function zu(e,n,s){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=s,Ef(n),n=n.next;while(n!==h)}e.action=null}function Ef(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Af(e,n){return n}function Sf(e,n){if(mt){var s=Ht.formState;if(s!==null){e:{var h=et;if(mt){if(Xt){t:{for(var x=Xt,w=Li;x.nodeType!==8;){if(!w){x=null;break t}if(x=Ui(x.nextSibling),x===null){x=null;break t}}w=x.data,x=w==="F!"||w==="F"?x:null}if(x){Xt=Ui(x.nextSibling),h=x.data==="F!";break e}}ta(h)}h=!1}h&&(n=s[0])}}return s=Qn(),s.memoizedState=s.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Af,lastRenderedState:n},s.queue=h,s=Vf.bind(null,et,h),h.dispatch=s,h=Uu(!1),w=qu.bind(null,et,!1,h.queue),h=Qn(),x={state:n,dispatch:null,action:e,pending:null},h.queue=x,s=J2.bind(null,et,x,w,s),x.dispatch=s,h.memoizedState=e,[n,s,!1]}function _f(e){var n=fn();return Cf(n,Lt,e)}function Cf(e,n,s){if(n=Lu(e,n,Af)[0],e=Qo(_r)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=Tl(n)}catch(T){throw T===As?Fo:T}else h=n;n=fn();var x=n.queue,w=x.dispatch;return s!==n.memoizedState&&(et.flags|=2048,Ns(9,{destroy:void 0},$2.bind(null,x,s),null)),[h,w,e]}function $2(e,n){e.action=n}function Tf(e){var n=fn(),s=Lt;if(s!==null)return Cf(n,s,e);fn(),n=n.memoizedState,s=fn();var h=s.queue.dispatch;return s.memoizedState=e,[n,h,!1]}function Ns(e,n,s,h){return e={tag:e,create:s,deps:h,inst:n,next:null},n=et.updateQueue,n===null&&(n=Ko(),et.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(h=s.next,s.next=e,e.next=h,n.lastEffect=e),e}function Nf(){return fn().memoizedState}function Jo(e,n,s,h){var x=Qn();et.flags|=e,x.memoizedState=Ns(1|n,{destroy:void 0},s,h===void 0?null:h)}function $o(e,n,s,h){var x=fn();h=h===void 0?null:h;var w=x.memoizedState.inst;Lt!==null&&h!==null&&Ou(h,Lt.memoizedState.deps)?x.memoizedState=Ns(n,w,s,h):(et.flags|=e,x.memoizedState=Ns(1|n,w,s,h))}function If(e,n){Jo(8390656,8,e,n)}function Pu(e,n){$o(2048,8,e,n)}function em(e){et.flags|=4;var n=et.updateQueue;if(n===null)n=Ko(),et.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function Of(e){var n=fn().memoizedState;return em({ref:n,nextImpl:e}),function(){if((Tt&2)!==0)throw Error(d(440));return n.impl.apply(void 0,arguments)}}function Rf(e,n){return $o(4,2,e,n)}function Df(e,n){return $o(4,4,e,n)}function Mf(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Bf(e,n,s){s=s!=null?s.concat([e]):null,$o(4,4,Mf.bind(null,n,e),s)}function Fu(){}function kf(e,n){var s=fn();n=n===void 0?null:n;var h=s.memoizedState;return n!==null&&Ou(n,h[1])?h[0]:(s.memoizedState=[e,n],e)}function Lf(e,n){var s=fn();n=n===void 0?null:n;var h=s.memoizedState;if(n!==null&&Ou(n,h[1]))return h[0];if(h=e(),Ya){kt(!0);try{e()}finally{kt(!1)}}return s.memoizedState=[h,n],h}function Hu(e,n,s){return s===void 0||(Sr&1073741824)!==0&&(ft&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=j0(),et.lanes|=e,ua|=e,s)}function jf(e,n,s,h){return f(s,n)?s:_s.current!==null?(e=Hu(e,s,h),f(e,n)||(wn=!0),e):(Sr&42)===0||(Sr&1073741824)!==0&&(ft&261930)===0?(wn=!0,e.memoizedState=s):(e=j0(),et.lanes|=e,ua|=e,n)}function Uf(e,n,s,h,x){var w=fe.p;fe.p=w!==0&&8>w?w:8;var T=te.T,M={};te.T=M,qu(e,!1,n,s);try{var P=x(),$=te.S;if($!==null&&$(M,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var de=K2(P,h);Nl(e,n,de,vi(e))}else Nl(e,n,h,vi(e))}catch(xe){Nl(e,n,{then:function(){},status:"rejected",reason:xe},vi())}finally{fe.p=w,T!==null&&M.types!==null&&(T.types=M.types),te.T=T}}function tm(){}function Vu(e,n,s,h){if(e.tag!==5)throw Error(d(476));var x=zf(e).queue;Uf(e,x,n,Ce,s===null?tm:function(){return Pf(e),s(h)})}function zf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:Ce},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Pf(e){var n=zf(e);n.next===null&&(n=e.alternate.memoizedState),Nl(e,n.next.queue,{},vi())}function Gu(){return Ln(ql)}function Ff(){return fn().memoizedState}function Hf(){return fn().memoizedState}function nm(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=vi();e=ra(s);var h=aa(n,e,s);h!==null&&(li(h,n,s),Al(h,n,s)),n={cache:wu()},e.payload=n;return}n=n.return}}function im(e,n,s){var h=vi();s={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ec(e)?Gf(n,s):(s=ou(e,n,s,h),s!==null&&(li(s,e,h),qf(s,n,h)))}function Vf(e,n,s){var h=vi();Nl(e,n,s,h)}function Nl(e,n,s,h){var x={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(ec(e))Gf(n,x);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=n.lastRenderedReducer,w!==null))try{var T=n.lastRenderedState,M=w(T,s);if(x.hasEagerState=!0,x.eagerState=M,f(M,T))return Bo(e,n,x,0),Ht===null&&Mo(),!1}catch{}if(s=ou(e,n,x,h),s!==null)return li(s,e,h),qf(s,n,h),!0}return!1}function qu(e,n,s,h){if(h={lane:2,revertLane:Ah(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},ec(e)){if(n)throw Error(d(479))}else n=ou(e,s,h,2),n!==null&&li(n,e,2)}function ec(e){var n=e.alternate;return e===et||n!==null&&n===et}function Gf(e,n){Cs=Xo=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function qf(e,n,s){if((s&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,nr(e,s)}}var Il={readContext:Ln,use:Zo,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Il.useEffectEvent=rn;var Yf={readContext:Ln,use:Zo,useCallback:function(e,n){return Qn().memoizedState=[e,n===void 0?null:n],e},useContext:Ln,useEffect:If,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Jo(4194308,4,Mf.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Jo(4194308,4,e,n)},useInsertionEffect:function(e,n){Jo(4,2,e,n)},useMemo:function(e,n){var s=Qn();n=n===void 0?null:n;var h=e();if(Ya){kt(!0);try{e()}finally{kt(!1)}}return s.memoizedState=[h,n],h},useReducer:function(e,n,s){var h=Qn();if(s!==void 0){var x=s(n);if(Ya){kt(!0);try{s(n)}finally{kt(!1)}}}else x=n;return h.memoizedState=h.baseState=x,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:x},h.queue=e,e=e.dispatch=im.bind(null,et,e),[h.memoizedState,e]},useRef:function(e){var n=Qn();return e={current:e},n.memoizedState=e},useState:function(e){e=Uu(e);var n=e.queue,s=Vf.bind(null,et,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:Fu,useDeferredValue:function(e,n){var s=Qn();return Hu(s,e,n)},useTransition:function(){var e=Uu(!1);return e=Uf.bind(null,et,e.queue,!0,!1),Qn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var h=et,x=Qn();if(mt){if(s===void 0)throw Error(d(407));s=s()}else{if(s=n(),Ht===null)throw Error(d(349));(ft&127)!==0||ff(h,n,s)}x.memoizedState=s;var w={value:s,getSnapshot:n};return x.queue=w,If(mf.bind(null,h,w,e),[e]),h.flags|=2048,Ns(9,{destroy:void 0},gf.bind(null,h,w,s,n),null),s},useId:function(){var e=Qn(),n=Ht.identifierPrefix;if(mt){var s=or,h=lr;s=(h&~(1<<32-nt(h)-1)).toString(32)+s,n="_"+n+"R_"+s,s=Wo++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=Z2++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gu,useFormState:Sf,useActionState:Sf,useOptimistic:function(e){var n=Qn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=qu.bind(null,et,!0,s),s.dispatch=n,[e,n]},useMemoCache:ku,useCacheRefresh:function(){return Qn().memoizedState=nm.bind(null,et)},useEffectEvent:function(e){var n=Qn(),s={impl:e};return n.memoizedState=s,function(){if((Tt&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}},Yu={readContext:Ln,use:Zo,useCallback:kf,useContext:Ln,useEffect:Pu,useImperativeHandle:Bf,useInsertionEffect:Rf,useLayoutEffect:Df,useMemo:Lf,useReducer:Qo,useRef:Nf,useState:function(){return Qo(_r)},useDebugValue:Fu,useDeferredValue:function(e,n){var s=fn();return jf(s,Lt.memoizedState,e,n)},useTransition:function(){var e=Qo(_r)[0],n=fn().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:df,useId:Ff,useHostTransitionStatus:Gu,useFormState:_f,useActionState:_f,useOptimistic:function(e,n){var s=fn();return yf(s,Lt,e,n)},useMemoCache:ku,useCacheRefresh:Hf};Yu.useEffectEvent=Of;var Xf={readContext:Ln,use:Zo,useCallback:kf,useContext:Ln,useEffect:Pu,useImperativeHandle:Bf,useInsertionEffect:Rf,useLayoutEffect:Df,useMemo:Lf,useReducer:ju,useRef:Nf,useState:function(){return ju(_r)},useDebugValue:Fu,useDeferredValue:function(e,n){var s=fn();return Lt===null?Hu(s,e,n):jf(s,Lt.memoizedState,e,n)},useTransition:function(){var e=ju(_r)[0],n=fn().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:df,useId:Ff,useHostTransitionStatus:Gu,useFormState:Tf,useActionState:Tf,useOptimistic:function(e,n){var s=fn();return Lt!==null?yf(s,Lt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ku,useCacheRefresh:Hf};Xf.useEffectEvent=Of;function Xu(e,n,s,h){n=e.memoizedState,s=s(h,n),s=s==null?n:I({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Wu={enqueueSetState:function(e,n,s){e=e._reactInternals;var h=vi(),x=ra(h);x.payload=n,s!=null&&(x.callback=s),n=aa(e,x,h),n!==null&&(li(n,e,h),Al(n,e,h))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var h=vi(),x=ra(h);x.tag=1,x.payload=n,s!=null&&(x.callback=s),n=aa(e,x,h),n!==null&&(li(n,e,h),Al(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=vi(),h=ra(s);h.tag=2,n!=null&&(h.callback=n),n=aa(e,h,s),n!==null&&(li(n,e,s),Al(n,e,s))}};function Wf(e,n,s,h,x,w,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,w,T):n.prototype&&n.prototype.isPureReactComponent?!m(s,h)||!m(x,w):!0}function Kf(e,n,s,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,h),n.state!==e&&Wu.enqueueReplaceState(n,n.state,null)}function Xa(e,n){var s=n;if("ref"in n){s={};for(var h in n)h!=="ref"&&(s[h]=n[h])}if(e=e.defaultProps){s===n&&(s=I({},s));for(var x in e)s[x]===void 0&&(s[x]=e[x])}return s}function Zf(e){Do(e)}function Qf(e){console.error(e)}function Jf(e){Do(e)}function tc(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function $f(e,n,s){try{var h=e.onCaughtError;h(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Ku(e,n,s){return s=ra(s),s.tag=3,s.payload={element:null},s.callback=function(){tc(e,n)},s}function e0(e){return e=ra(e),e.tag=3,e}function t0(e,n,s,h){var x=s.type.getDerivedStateFromError;if(typeof x=="function"){var w=h.value;e.payload=function(){return x(w)},e.callback=function(){$f(n,s,h)}}var T=s.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){$f(n,s,h),typeof x!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function rm(e,n,s,h,x){if(s.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=s.alternate,n!==null&&vs(n,s,x,!0),s=pi.current,s!==null){switch(s.tag){case 31:case 13:return ji===null?fc():s.alternate===null&&an===0&&(an=3),s.flags&=-257,s.flags|=65536,s.lanes=x,h===Ho?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([h]):n.add(h),vh(e,h,x)),!1;case 22:return s.flags|=65536,h===Ho?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([h]):s.add(h)),vh(e,h,x)),!1}throw Error(d(435,s.tag))}return vh(e,h,x),fc(),!1}if(mt)return n=pi.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=x,h!==gu&&(e=Error(d(422),{cause:h}),yl(Mi(e,s)))):(h!==gu&&(n=Error(d(423),{cause:h}),yl(Mi(n,s))),e=e.current.alternate,e.flags|=65536,x&=-x,e.lanes|=x,h=Mi(h,s),x=Ku(e.stateNode,h,x),_u(e,x),an!==4&&(an=2)),!1;var w=Error(d(520),{cause:h});if(w=Mi(w,s),jl===null?jl=[w]:jl.push(w),an!==4&&(an=2),n===null)return!0;h=Mi(h,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=x&-x,s.lanes|=e,e=Ku(s.stateNode,h,e),_u(s,e),!1;case 1:if(n=s.type,w=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ha===null||!ha.has(w))))return s.flags|=65536,x&=-x,s.lanes|=x,x=e0(x),t0(x,e,s,h),_u(s,x),!1}s=s.return}while(s!==null);return!1}var Zu=Error(d(461)),wn=!1;function jn(e,n,s,h){n.child=e===null?af(n,null,s,h):qa(n,e.child,s,h)}function n0(e,n,s,h,x){s=s.render;var w=n.ref;if("ref"in h){var T={};for(var M in h)M!=="ref"&&(T[M]=h[M])}else T=h;return Fa(n),h=Ru(e,n,s,T,w,x),M=Du(),e!==null&&!wn?(Mu(e,n,x),Cr(e,n,x)):(mt&&M&&du(n),n.flags|=1,jn(e,n,h,x),n.child)}function i0(e,n,s,h,x){if(e===null){var w=s.type;return typeof w=="function"&&!cu(w)&&w.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=w,r0(e,n,w,h,x)):(e=Lo(s.type,null,h,n,n.mode,x),e.ref=n.ref,e.return=n,n.child=e)}if(w=e.child,!rh(e,x)){var T=w.memoizedProps;if(s=s.compare,s=s!==null?s:m,s(T,h)&&e.ref===n.ref)return Cr(e,n,x)}return n.flags|=1,e=vr(w,h),e.ref=n.ref,e.return=n,n.child=e}function r0(e,n,s,h,x){if(e!==null){var w=e.memoizedProps;if(m(w,h)&&e.ref===n.ref)if(wn=!1,n.pendingProps=h=w,rh(e,x))(e.flags&131072)!==0&&(wn=!0);else return n.lanes=e.lanes,Cr(e,n,x)}return Qu(e,n,s,h,x)}function a0(e,n,s,h){var x=h.children,w=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((n.flags&128)!==0){if(w=w!==null?w.baseLanes|s:s,e!==null){for(h=n.child=e.child,x=0;h!==null;)x=x|h.lanes|h.childLanes,h=h.sibling;h=x&~w}else h=0,n.child=null;return s0(e,n,w,s,h)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Po(n,w!==null?w.cachePool:null),w!==null?of(n,w):Tu(),cf(n);else return h=n.lanes=536870912,s0(e,n,w!==null?w.baseLanes|s:s,s,h)}else w!==null?(Po(n,w.cachePool),of(n,w),la(),n.memoizedState=null):(e!==null&&Po(n,null),Tu(),la());return jn(e,n,x,s),n.child}function Ol(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function s0(e,n,s,h,x){var w=bu();return w=w===null?null:{parent:xn._currentValue,pool:w},n.memoizedState={baseLanes:s,cachePool:w},e!==null&&Po(n,null),Tu(),cf(n),e!==null&&vs(e,n,h,!0),n.childLanes=x,null}function nc(e,n){return n=rc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function l0(e,n,s){return qa(n,e.child,null,s),e=nc(n,n.pendingProps),e.flags|=2,xi(n),n.memoizedState=null,e}function am(e,n,s){var h=n.pendingProps,x=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(mt){if(h.mode==="hidden")return e=nc(n,h),n.lanes=536870912,Ol(null,e);if(Iu(n),(e=Xt)?(e=w1(e,Li),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:$r!==null?{id:lr,overflow:or}:null,retryLane:536870912,hydrationErrors:null},s=Vd(e),s.return=n,n.child=s,kn=n,Xt=null)):e=null,e===null)throw ta(n);return n.lanes=536870912,null}return nc(n,h)}var w=e.memoizedState;if(w!==null){var T=w.dehydrated;if(Iu(n),x)if(n.flags&256)n.flags&=-257,n=l0(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(d(558));else if(wn||vs(e,n,s,!1),x=(s&e.childLanes)!==0,wn||x){if(h=Ht,h!==null&&(T=rs(h,s),T!==0&&T!==w.retryLane))throw w.retryLane=T,ja(e,T),li(h,e,T),Zu;fc(),n=l0(e,n,s)}else e=w.treeContext,Xt=Ui(T.nextSibling),kn=n,mt=!0,ea=null,Li=!1,e!==null&&Yd(n,e),n=nc(n,h),n.flags|=4096;return n}return e=vr(e.child,{mode:h.mode,children:h.children}),e.ref=n.ref,n.child=e,e.return=n,e}function ic(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function Qu(e,n,s,h,x){return Fa(n),s=Ru(e,n,s,h,void 0,x),h=Du(),e!==null&&!wn?(Mu(e,n,x),Cr(e,n,x)):(mt&&h&&du(n),n.flags|=1,jn(e,n,s,x),n.child)}function o0(e,n,s,h,x,w){return Fa(n),n.updateQueue=null,s=hf(n,h,s,x),uf(e),h=Du(),e!==null&&!wn?(Mu(e,n,w),Cr(e,n,w)):(mt&&h&&du(n),n.flags|=1,jn(e,n,s,w),n.child)}function c0(e,n,s,h,x){if(Fa(n),n.stateNode===null){var w=ps,T=s.contextType;typeof T=="object"&&T!==null&&(w=Ln(T)),w=new s(h,w),n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Wu,n.stateNode=w,w._reactInternals=n,w=n.stateNode,w.props=h,w.state=n.memoizedState,w.refs={},Au(n),T=s.contextType,w.context=typeof T=="object"&&T!==null?Ln(T):ps,w.state=n.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Xu(n,s,T,h),w.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(T=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),T!==w.state&&Wu.enqueueReplaceState(w,w.state,null),_l(n,h,w,x),Sl(),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){w=n.stateNode;var M=n.memoizedProps,P=Xa(s,M);w.props=P;var $=w.context,de=s.contextType;T=ps,typeof de=="object"&&de!==null&&(T=Ln(de));var xe=s.getDerivedStateFromProps;de=typeof xe=="function"||typeof w.getSnapshotBeforeUpdate=="function",M=n.pendingProps!==M,de||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M||$!==T)&&Kf(n,w,h,T),ia=!1;var ne=n.memoizedState;w.state=ne,_l(n,h,w,x),Sl(),$=n.memoizedState,M||ne!==$||ia?(typeof xe=="function"&&(Xu(n,s,xe,h),$=n.memoizedState),(P=ia||Wf(n,s,P,h,ne,$,T))?(de||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=$),w.props=h,w.state=$,w.context=T,h=P):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{w=n.stateNode,Su(e,n),T=n.memoizedProps,de=Xa(s,T),w.props=de,xe=n.pendingProps,ne=w.context,$=s.contextType,P=ps,typeof $=="object"&&$!==null&&(P=Ln($)),M=s.getDerivedStateFromProps,($=typeof M=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==xe||ne!==P)&&Kf(n,w,h,P),ia=!1,ne=n.memoizedState,w.state=ne,_l(n,h,w,x),Sl();var se=n.memoizedState;T!==xe||ne!==se||ia||e!==null&&e.dependencies!==null&&Uo(e.dependencies)?(typeof M=="function"&&(Xu(n,s,M,h),se=n.memoizedState),(de=ia||Wf(n,s,de,h,ne,se,P)||e!==null&&e.dependencies!==null&&Uo(e.dependencies))?($||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,se,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,se,P)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===e.memoizedProps&&ne===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&ne===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=se),w.props=h,w.state=se,w.context=P,h=de):(typeof w.componentDidUpdate!="function"||T===e.memoizedProps&&ne===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&ne===e.memoizedState||(n.flags|=1024),h=!1)}return w=h,ic(e,n),h=(n.flags&128)!==0,w||h?(w=n.stateNode,s=h&&typeof s.getDerivedStateFromError!="function"?null:w.render(),n.flags|=1,e!==null&&h?(n.child=qa(n,e.child,null,x),n.child=qa(n,null,s,x)):jn(e,n,s,x),n.memoizedState=w.state,e=n.child):e=Cr(e,n,x),e}function u0(e,n,s,h){return za(),n.flags|=256,jn(e,n,s,h),n.child}var Ju={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $u(e){return{baseLanes:e,cachePool:Jd()}}function eh(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=wi),e}function h0(e,n,s){var h=n.pendingProps,x=!1,w=(n.flags&128)!==0,T;if((T=w)||(T=e!==null&&e.memoizedState===null?!1:(dn.current&2)!==0),T&&(x=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,e===null){if(mt){if(x?sa(n):la(),(e=Xt)?(e=w1(e,Li),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:$r!==null?{id:lr,overflow:or}:null,retryLane:536870912,hydrationErrors:null},s=Vd(e),s.return=n,n.child=s,kn=n,Xt=null)):e=null,e===null)throw ta(n);return Lh(e)?n.lanes=32:n.lanes=536870912,null}var M=h.children;return h=h.fallback,x?(la(),x=n.mode,M=rc({mode:"hidden",children:M},x),h=Ua(h,x,s,null),M.return=n,h.return=n,M.sibling=h,n.child=M,h=n.child,h.memoizedState=$u(s),h.childLanes=eh(e,T,s),n.memoizedState=Ju,Ol(null,h)):(sa(n),th(n,M))}var P=e.memoizedState;if(P!==null&&(M=P.dehydrated,M!==null)){if(w)n.flags&256?(sa(n),n.flags&=-257,n=nh(e,n,s)):n.memoizedState!==null?(la(),n.child=e.child,n.flags|=128,n=null):(la(),M=h.fallback,x=n.mode,h=rc({mode:"visible",children:h.children},x),M=Ua(M,x,s,null),M.flags|=2,h.return=n,M.return=n,h.sibling=M,n.child=h,qa(n,e.child,null,s),h=n.child,h.memoizedState=$u(s),h.childLanes=eh(e,T,s),n.memoizedState=Ju,n=Ol(null,h));else if(sa(n),Lh(M)){if(T=M.nextSibling&&M.nextSibling.dataset,T)var $=T.dgst;T=$,h=Error(d(419)),h.stack="",h.digest=T,yl({value:h,source:null,stack:null}),n=nh(e,n,s)}else if(wn||vs(e,n,s,!1),T=(s&e.childLanes)!==0,wn||T){if(T=Ht,T!==null&&(h=rs(T,s),h!==0&&h!==P.retryLane))throw P.retryLane=h,ja(e,h),li(T,e,h),Zu;kh(M)||fc(),n=nh(e,n,s)}else kh(M)?(n.flags|=192,n.child=e.child,n=null):(e=P.treeContext,Xt=Ui(M.nextSibling),kn=n,mt=!0,ea=null,Li=!1,e!==null&&Yd(n,e),n=th(n,h.children),n.flags|=4096);return n}return x?(la(),M=h.fallback,x=n.mode,P=e.child,$=P.sibling,h=vr(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&65011712,$!==null?M=vr($,M):(M=Ua(M,x,s,null),M.flags|=2),M.return=n,h.return=n,h.sibling=M,n.child=h,Ol(null,h),h=n.child,M=e.child.memoizedState,M===null?M=$u(s):(x=M.cachePool,x!==null?(P=xn._currentValue,x=x.parent!==P?{parent:P,pool:P}:x):x=Jd(),M={baseLanes:M.baseLanes|s,cachePool:x}),h.memoizedState=M,h.childLanes=eh(e,T,s),n.memoizedState=Ju,Ol(e.child,h)):(sa(n),s=e.child,e=s.sibling,s=vr(s,{mode:"visible",children:h.children}),s.return=n,s.sibling=null,e!==null&&(T=n.deletions,T===null?(n.deletions=[e],n.flags|=16):T.push(e)),n.child=s,n.memoizedState=null,s)}function th(e,n){return n=rc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function rc(e,n){return e=mi(22,e,null,n),e.lanes=0,e}function nh(e,n,s){return qa(n,e.child,null,s),e=th(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function d0(e,n,s){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),xu(e.return,n,s)}function ih(e,n,s,h,x,w){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:s,tailMode:x,treeForkCount:w}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=s,T.tailMode=x,T.treeForkCount=w)}function f0(e,n,s){var h=n.pendingProps,x=h.revealOrder,w=h.tail;h=h.children;var T=dn.current,M=(T&2)!==0;if(M?(T=T&1|2,n.flags|=128):T&=1,Te(dn,T),jn(e,n,h,s),h=mt?xl:0,!M&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&d0(e,s,n);else if(e.tag===19)d0(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(x){case"forwards":for(s=n.child,x=null;s!==null;)e=s.alternate,e!==null&&Yo(e)===null&&(x=s),s=s.sibling;s=x,s===null?(x=n.child,n.child=null):(x=s.sibling,s.sibling=null),ih(n,!1,x,s,w,h);break;case"backwards":case"unstable_legacy-backwards":for(s=null,x=n.child,n.child=null;x!==null;){if(e=x.alternate,e!==null&&Yo(e)===null){n.child=x;break}e=x.sibling,x.sibling=s,s=x,x=e}ih(n,!0,s,null,w,h);break;case"together":ih(n,!1,null,null,void 0,h);break;default:n.memoizedState=null}return n.child}function Cr(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ua|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(vs(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(d(153));if(n.child!==null){for(e=n.child,s=vr(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=vr(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function rh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Uo(e)))}function sm(e,n,s){switch(n.tag){case 3:tt(n,n.stateNode.containerInfo),na(n,xn,e.memoizedState.cache),za();break;case 27:case 5:Vn(n);break;case 4:tt(n,n.stateNode.containerInfo);break;case 10:na(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Iu(n),null;break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(sa(n),n.flags|=128,null):(s&n.child.childLanes)!==0?h0(e,n,s):(sa(n),e=Cr(e,n,s),e!==null?e.sibling:null);sa(n);break;case 19:var x=(e.flags&128)!==0;if(h=(s&n.childLanes)!==0,h||(vs(e,n,s,!1),h=(s&n.childLanes)!==0),x){if(h)return f0(e,n,s);n.flags|=128}if(x=n.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Te(dn,dn.current),h)break;return null;case 22:return n.lanes=0,a0(e,n,s,n.pendingProps);case 24:na(n,xn,e.memoizedState.cache)}return Cr(e,n,s)}function g0(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)wn=!0;else{if(!rh(e,s)&&(n.flags&128)===0)return wn=!1,sm(e,n,s);wn=(e.flags&131072)!==0}else wn=!1,mt&&(n.flags&1048576)!==0&&qd(n,xl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var h=n.pendingProps;if(e=Va(n.elementType),n.type=e,typeof e=="function")cu(e)?(h=Xa(e,h),n.tag=1,n=c0(null,n,e,h,s)):(n.tag=0,n=Qu(null,n,e,h,s));else{if(e!=null){var x=e.$$typeof;if(x===ce){n.tag=11,n=n0(null,n,e,h,s);break e}else if(x===W){n.tag=14,n=i0(null,n,e,h,s);break e}}throw n=Ne(e)||e,Error(d(306,n,""))}}return n;case 0:return Qu(e,n,n.type,n.pendingProps,s);case 1:return h=n.type,x=Xa(h,n.pendingProps),c0(e,n,h,x,s);case 3:e:{if(tt(n,n.stateNode.containerInfo),e===null)throw Error(d(387));h=n.pendingProps;var w=n.memoizedState;x=w.element,Su(e,n),_l(n,h,null,s);var T=n.memoizedState;if(h=T.cache,na(n,xn,h),h!==w.cache&&yu(n,[xn],s,!0),Sl(),h=T.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=w,n.memoizedState=w,n.flags&256){n=u0(e,n,h,s);break e}else if(h!==x){x=Mi(Error(d(424)),n),yl(x),n=u0(e,n,h,s);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Xt=Ui(e.firstChild),kn=n,mt=!0,ea=null,Li=!0,s=af(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(za(),h===x){n=Cr(e,n,s);break e}jn(e,n,h,s)}n=n.child}return n;case 26:return ic(e,n),e===null?(s=_1(n.type,null,n.pendingProps,null))?n.memoizedState=s:mt||(s=n.type,e=n.pendingProps,h=vc(pe.current).createElement(s),h[cn]=n,h[Rt]=e,Un(h,s,e),tn(h),n.stateNode=h):n.memoizedState=_1(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Vn(n),e===null&&mt&&(h=n.stateNode=E1(n.type,n.pendingProps,pe.current),kn=n,Li=!0,x=Xt,ma(n.type)?(jh=x,Xt=Ui(h.firstChild)):Xt=x),jn(e,n,n.pendingProps.children,s),ic(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&mt&&((x=h=Xt)&&(h=Lm(h,n.type,n.pendingProps,Li),h!==null?(n.stateNode=h,kn=n,Xt=Ui(h.firstChild),Li=!1,x=!0):x=!1),x||ta(n)),Vn(n),x=n.type,w=n.pendingProps,T=e!==null?e.memoizedProps:null,h=w.children,Dh(x,w)?h=null:T!==null&&Dh(x,T)&&(n.flags|=32),n.memoizedState!==null&&(x=Ru(e,n,Q2,null,null,s),ql._currentValue=x),ic(e,n),jn(e,n,h,s),n.child;case 6:return e===null&&mt&&((e=s=Xt)&&(s=jm(s,n.pendingProps,Li),s!==null?(n.stateNode=s,kn=n,Xt=null,e=!0):e=!1),e||ta(n)),null;case 13:return h0(e,n,s);case 4:return tt(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=qa(n,null,h,s):jn(e,n,h,s),n.child;case 11:return n0(e,n,n.type,n.pendingProps,s);case 7:return jn(e,n,n.pendingProps,s),n.child;case 8:return jn(e,n,n.pendingProps.children,s),n.child;case 12:return jn(e,n,n.pendingProps.children,s),n.child;case 10:return h=n.pendingProps,na(n,n.type,h.value),jn(e,n,h.children,s),n.child;case 9:return x=n.type._context,h=n.pendingProps.children,Fa(n),x=Ln(x),h=h(x),n.flags|=1,jn(e,n,h,s),n.child;case 14:return i0(e,n,n.type,n.pendingProps,s);case 15:return r0(e,n,n.type,n.pendingProps,s);case 19:return f0(e,n,s);case 31:return am(e,n,s);case 22:return a0(e,n,s,n.pendingProps);case 24:return Fa(n),h=Ln(xn),e===null?(x=bu(),x===null&&(x=Ht,w=wu(),x.pooledCache=w,w.refCount++,w!==null&&(x.pooledCacheLanes|=s),x=w),n.memoizedState={parent:h,cache:x},Au(n),na(n,xn,x)):((e.lanes&s)!==0&&(Su(e,n),_l(n,null,null,s),Sl()),x=e.memoizedState,w=n.memoizedState,x.parent!==h?(x={parent:h,cache:h},n.memoizedState=x,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=x),na(n,xn,h)):(h=w.cache,na(n,xn,h),h!==x.cache&&yu(n,[xn],s,!0))),jn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(d(156,n.tag))}function Tr(e){e.flags|=4}function ah(e,n,s,h,x){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(x&335544128)===x)if(e.stateNode.complete)e.flags|=8192;else if(F0())e.flags|=8192;else throw Ga=Ho,Eu}else e.flags&=-16777217}function m0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!O1(n))if(F0())e.flags|=8192;else throw Ga=Ho,Eu}function ac(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?An():536870912,e.lanes|=n,Ds|=n)}function Rl(e,n){if(!mt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Wt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,h=0;if(n)for(var x=e.child;x!==null;)s|=x.lanes|x.childLanes,h|=x.subtreeFlags&65011712,h|=x.flags&65011712,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)s|=x.lanes|x.childLanes,h|=x.subtreeFlags,h|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=h,e.childLanes=s,n}function lm(e,n,s){var h=n.pendingProps;switch(fu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(n),null;case 1:return Wt(n),null;case 3:return s=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),Ar(xn),St(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ws(n)?Tr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,mu())),Wt(n),null;case 26:var x=n.type,w=n.memoizedState;return e===null?(Tr(n),w!==null?(Wt(n),m0(n,w)):(Wt(n),ah(n,x,null,h,s))):w?w!==e.memoizedState?(Tr(n),Wt(n),m0(n,w)):(Wt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==h&&Tr(n),Wt(n),ah(n,x,e,h,s)),null;case 27:if(on(n),s=pe.current,x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Tr(n);else{if(!h){if(n.stateNode===null)throw Error(d(166));return Wt(n),null}e=ge.current,ws(n)?Xd(n):(e=E1(x,h,s),n.stateNode=e,Tr(n))}return Wt(n),null;case 5:if(on(n),x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Tr(n);else{if(!h){if(n.stateNode===null)throw Error(d(166));return Wt(n),null}if(w=ge.current,ws(n))Xd(n);else{var T=vc(pe.current);switch(w){case 1:w=T.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:w=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":w=T.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":w=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":w=T.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?T.createElement(x,{is:h.is}):T.createElement(x)}}w[cn]=n,w[Rt]=h;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)w.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=w;e:switch(Un(w,x,h),x){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Tr(n)}}return Wt(n),ah(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&Tr(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(d(166));if(e=pe.current,ws(n)){if(e=n.stateNode,s=n.memoizedProps,h=null,x=kn,x!==null)switch(x.tag){case 27:case 5:h=x.memoizedProps}e[cn]=n,e=!!(e.nodeValue===s||h!==null&&h.suppressHydrationWarning===!0||h1(e.nodeValue,s)),e||ta(n,!0)}else e=vc(e).createTextNode(h),e[cn]=n,n.stateNode=e}return Wt(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(h=ws(n),s!==null){if(e===null){if(!h)throw Error(d(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[cn]=n}else za(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Wt(n),e=!1}else s=mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(xi(n),n):(xi(n),null);if((n.flags&128)!==0)throw Error(d(558))}return Wt(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(x=ws(n),h!==null&&h.dehydrated!==null){if(e===null){if(!x)throw Error(d(318));if(x=n.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(d(317));x[cn]=n}else za(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Wt(n),x=!1}else x=mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=x),x=!0;if(!x)return n.flags&256?(xi(n),n):(xi(n),null)}return xi(n),(n.flags&128)!==0?(n.lanes=s,n):(s=h!==null,e=e!==null&&e.memoizedState!==null,s&&(h=n.child,x=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(x=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==x&&(h.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),ac(n,n.updateQueue),Wt(n),null);case 4:return St(),e===null&&Th(n.stateNode.containerInfo),Wt(n),null;case 10:return Ar(n.type),Wt(n),null;case 19:if(le(dn),h=n.memoizedState,h===null)return Wt(n),null;if(x=(n.flags&128)!==0,w=h.rendering,w===null)if(x)Rl(h,!1);else{if(an!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(w=Yo(e),w!==null){for(n.flags|=128,Rl(h,!1),e=w.updateQueue,n.updateQueue=e,ac(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)Hd(s,e),s=s.sibling;return Te(dn,dn.current&1|2),mt&&br(n,h.treeForkCount),n.child}e=e.sibling}h.tail!==null&&Jt()>uc&&(n.flags|=128,x=!0,Rl(h,!1),n.lanes=4194304)}else{if(!x)if(e=Yo(w),e!==null){if(n.flags|=128,x=!0,e=e.updateQueue,n.updateQueue=e,ac(n,e),Rl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!mt)return Wt(n),null}else 2*Jt()-h.renderingStartTime>uc&&s!==536870912&&(n.flags|=128,x=!0,Rl(h,!1),n.lanes=4194304);h.isBackwards?(w.sibling=n.child,n.child=w):(e=h.last,e!==null?e.sibling=w:n.child=w,h.last=w)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=Jt(),e.sibling=null,s=dn.current,Te(dn,x?s&1|2:s&1),mt&&br(n,h.treeForkCount),e):(Wt(n),null);case 22:case 23:return xi(n),Nu(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(s&536870912)!==0&&(n.flags&128)===0&&(Wt(n),n.subtreeFlags&6&&(n.flags|=8192)):Wt(n),s=n.updateQueue,s!==null&&ac(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==s&&(n.flags|=2048),e!==null&&le(Ha),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Ar(xn),Wt(n),null;case 25:return null;case 30:return null}throw Error(d(156,n.tag))}function om(e,n){switch(fu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ar(xn),St(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return on(n),null;case 31:if(n.memoizedState!==null){if(xi(n),n.alternate===null)throw Error(d(340));za()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(xi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(d(340));za()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return le(dn),null;case 4:return St(),null;case 10:return Ar(n.type),null;case 22:case 23:return xi(n),Nu(),e!==null&&le(Ha),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ar(xn),null;case 25:return null;default:return null}}function p0(e,n){switch(fu(n),n.tag){case 3:Ar(xn),St();break;case 26:case 27:case 5:on(n);break;case 4:St();break;case 31:n.memoizedState!==null&&xi(n);break;case 13:xi(n);break;case 19:le(dn);break;case 10:Ar(n.type);break;case 22:case 23:xi(n),Nu(),e!==null&&le(Ha);break;case 24:Ar(xn)}}function Dl(e,n){try{var s=n.updateQueue,h=s!==null?s.lastEffect:null;if(h!==null){var x=h.next;s=x;do{if((s.tag&e)===e){h=void 0;var w=s.create,T=s.inst;h=w(),T.destroy=h}s=s.next}while(s!==x)}}catch(M){Mt(n,n.return,M)}}function oa(e,n,s){try{var h=n.updateQueue,x=h!==null?h.lastEffect:null;if(x!==null){var w=x.next;h=w;do{if((h.tag&e)===e){var T=h.inst,M=T.destroy;if(M!==void 0){T.destroy=void 0,x=n;var P=s,$=M;try{$()}catch(de){Mt(x,P,de)}}}h=h.next}while(h!==w)}}catch(de){Mt(n,n.return,de)}}function x0(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{lf(n,s)}catch(h){Mt(e,e.return,h)}}}function y0(e,n,s){s.props=Xa(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(h){Mt(e,n,h)}}function Ml(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof s=="function"?e.refCleanup=s(h):s.current=h}}catch(x){Mt(e,n,x)}}function cr(e,n){var s=e.ref,h=e.refCleanup;if(s!==null)if(typeof h=="function")try{h()}catch(x){Mt(e,n,x)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(x){Mt(e,n,x)}else s.current=null}function w0(e){var n=e.type,s=e.memoizedProps,h=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&h.focus();break e;case"img":s.src?h.src=s.src:s.srcSet&&(h.srcset=s.srcSet)}}catch(x){Mt(e,e.return,x)}}function sh(e,n,s){try{var h=e.stateNode;Om(h,e.type,s,n),h[Rt]=n}catch(x){Mt(e,e.return,x)}}function v0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ma(e.type)||e.tag===4}function lh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||v0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oh(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=ei));else if(h!==4&&(h===27&&ma(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(oh(e,n,s),e=e.sibling;e!==null;)oh(e,n,s),e=e.sibling}function sc(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(h!==4&&(h===27&&ma(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(sc(e,n,s),e=e.sibling;e!==null;)sc(e,n,s),e=e.sibling}function b0(e){var n=e.stateNode,s=e.memoizedProps;try{for(var h=e.type,x=n.attributes;x.length;)n.removeAttributeNode(x[0]);Un(n,h,s),n[cn]=e,n[Rt]=s}catch(w){Mt(e,e.return,w)}}var Nr=!1,vn=!1,ch=!1,E0=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function cm(e,n){if(e=e.containerInfo,Oh=Tc,e=R(e),D(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var h=s.getSelection&&s.getSelection();if(h&&h.rangeCount!==0){s=h.anchorNode;var x=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{s.nodeType,w.nodeType}catch{s=null;break e}var T=0,M=-1,P=-1,$=0,de=0,xe=e,ne=null;t:for(;;){for(var se;xe!==s||x!==0&&xe.nodeType!==3||(M=T+x),xe!==w||h!==0&&xe.nodeType!==3||(P=T+h),xe.nodeType===3&&(T+=xe.nodeValue.length),(se=xe.firstChild)!==null;)ne=xe,xe=se;for(;;){if(xe===e)break t;if(ne===s&&++$===x&&(M=T),ne===w&&++de===h&&(P=T),(se=xe.nextSibling)!==null)break;xe=ne,ne=xe.parentNode}xe=se}s=M===-1||P===-1?null:{start:M,end:P}}else s=null}s=s||{start:0,end:0}}else s=null;for(Rh={focusedElem:e,selectionRange:s},Tc=!1,Rn=n;Rn!==null;)if(n=Rn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Rn=e;else for(;Rn!==null;){switch(n=Rn,w=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)x=e[s],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,s=n,x=w.memoizedProps,w=w.memoizedState,h=s.stateNode;try{var Be=Xa(s.type,x);e=h.getSnapshotBeforeUpdate(Be,w),h.__reactInternalSnapshotBeforeUpdate=e}catch(qe){Mt(s,s.return,qe)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)Bh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=n.sibling,e!==null){e.return=n.return,Rn=e;break}Rn=n.return}}function A0(e,n,s){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Or(e,s),h&4&&Dl(5,s);break;case 1:if(Or(e,s),h&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(T){Mt(s,s.return,T)}else{var x=Xa(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(x,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Mt(s,s.return,T)}}h&64&&x0(s),h&512&&Ml(s,s.return);break;case 3:if(Or(e,s),h&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{lf(e,n)}catch(T){Mt(s,s.return,T)}}break;case 27:n===null&&h&4&&b0(s);case 26:case 5:Or(e,s),n===null&&h&4&&w0(s),h&512&&Ml(s,s.return);break;case 12:Or(e,s);break;case 31:Or(e,s),h&4&&C0(e,s);break;case 13:Or(e,s),h&4&&T0(e,s),h&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=ym.bind(null,s),Um(e,s))));break;case 22:if(h=s.memoizedState!==null||Nr,!h){n=n!==null&&n.memoizedState!==null||vn,x=Nr;var w=vn;Nr=h,(vn=n)&&!w?Rr(e,s,(s.subtreeFlags&8772)!==0):Or(e,s),Nr=x,vn=w}break;case 30:break;default:Or(e,s)}}function S0(e){var n=e.alternate;n!==null&&(e.alternate=null,S0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&$n(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qt=null,ii=!1;function Ir(e,n,s){for(s=s.child;s!==null;)_0(e,n,s),s=s.sibling}function _0(e,n,s){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(Vt,s)}catch{}switch(s.tag){case 26:vn||cr(s,n),Ir(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:vn||cr(s,n);var h=Qt,x=ii;ma(s.type)&&(Qt=s.stateNode,ii=!1),Ir(e,n,s),Hl(s.stateNode),Qt=h,ii=x;break;case 5:vn||cr(s,n);case 6:if(h=Qt,x=ii,Qt=null,Ir(e,n,s),Qt=h,ii=x,Qt!==null)if(ii)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(s.stateNode)}catch(w){Mt(s,n,w)}else try{Qt.removeChild(s.stateNode)}catch(w){Mt(s,n,w)}break;case 18:Qt!==null&&(ii?(e=Qt,x1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Ps(e)):x1(Qt,s.stateNode));break;case 4:h=Qt,x=ii,Qt=s.stateNode.containerInfo,ii=!0,Ir(e,n,s),Qt=h,ii=x;break;case 0:case 11:case 14:case 15:oa(2,s,n),vn||oa(4,s,n),Ir(e,n,s);break;case 1:vn||(cr(s,n),h=s.stateNode,typeof h.componentWillUnmount=="function"&&y0(s,n,h)),Ir(e,n,s);break;case 21:Ir(e,n,s);break;case 22:vn=(h=vn)||s.memoizedState!==null,Ir(e,n,s),vn=h;break;default:Ir(e,n,s)}}function C0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(s){Mt(n,n.return,s)}}}function T0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(s){Mt(n,n.return,s)}}function um(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new E0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new E0),n;default:throw Error(d(435,e.tag))}}function lc(e,n){var s=um(e);n.forEach(function(h){if(!s.has(h)){s.add(h);var x=wm.bind(null,e,h);h.then(x,x)}})}function ri(e,n){var s=n.deletions;if(s!==null)for(var h=0;h<s.length;h++){var x=s[h],w=e,T=n,M=T;e:for(;M!==null;){switch(M.tag){case 27:if(ma(M.type)){Qt=M.stateNode,ii=!1;break e}break;case 5:Qt=M.stateNode,ii=!1;break e;case 3:case 4:Qt=M.stateNode.containerInfo,ii=!0;break e}M=M.return}if(Qt===null)throw Error(d(160));_0(w,T,x),Qt=null,ii=!1,w=x.alternate,w!==null&&(w.return=null),x.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)N0(n,e),n=n.sibling}var Xi=null;function N0(e,n){var s=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ri(n,e),ai(e),h&4&&(oa(3,e,e.return),Dl(3,e),oa(5,e,e.return));break;case 1:ri(n,e),ai(e),h&512&&(vn||s===null||cr(s,s.return)),h&64&&Nr&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?h:s.concat(h))));break;case 26:var x=Xi;if(ri(n,e),ai(e),h&512&&(vn||s===null||cr(s,s.return)),h&4){var w=s!==null?s.memoizedState:null;if(h=e.memoizedState,s===null)if(h===null)if(e.stateNode===null){e:{h=e.type,s=e.memoizedProps,x=x.ownerDocument||x;t:switch(h){case"title":w=x.getElementsByTagName("title")[0],(!w||w[Na]||w[cn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=x.createElement(h),x.head.insertBefore(w,x.querySelector("head > title"))),Un(w,h,s),w[cn]=e,tn(w),h=w;break e;case"link":var T=N1("link","href",x).get(h+(s.href||""));if(T){for(var M=0;M<T.length;M++)if(w=T[M],w.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&w.getAttribute("rel")===(s.rel==null?null:s.rel)&&w.getAttribute("title")===(s.title==null?null:s.title)&&w.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){T.splice(M,1);break t}}w=x.createElement(h),Un(w,h,s),x.head.appendChild(w);break;case"meta":if(T=N1("meta","content",x).get(h+(s.content||""))){for(M=0;M<T.length;M++)if(w=T[M],w.getAttribute("content")===(s.content==null?null:""+s.content)&&w.getAttribute("name")===(s.name==null?null:s.name)&&w.getAttribute("property")===(s.property==null?null:s.property)&&w.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&w.getAttribute("charset")===(s.charSet==null?null:s.charSet)){T.splice(M,1);break t}}w=x.createElement(h),Un(w,h,s),x.head.appendChild(w);break;default:throw Error(d(468,h))}w[cn]=e,tn(w),h=w}e.stateNode=h}else I1(x,e.type,e.stateNode);else e.stateNode=T1(x,h,e.memoizedProps);else w!==h?(w===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):w.count--,h===null?I1(x,e.type,e.stateNode):T1(x,h,e.memoizedProps)):h===null&&e.stateNode!==null&&sh(e,e.memoizedProps,s.memoizedProps)}break;case 27:ri(n,e),ai(e),h&512&&(vn||s===null||cr(s,s.return)),s!==null&&h&4&&sh(e,e.memoizedProps,s.memoizedProps);break;case 5:if(ri(n,e),ai(e),h&512&&(vn||s===null||cr(s,s.return)),e.flags&32){x=e.stateNode;try{Gr(x,"")}catch(Be){Mt(e,e.return,Be)}}h&4&&e.stateNode!=null&&(x=e.memoizedProps,sh(e,x,s!==null?s.memoizedProps:x)),h&1024&&(ch=!0);break;case 6:if(ri(n,e),ai(e),h&4){if(e.stateNode===null)throw Error(d(162));h=e.memoizedProps,s=e.stateNode;try{s.nodeValue=h}catch(Be){Mt(e,e.return,Be)}}break;case 3:if(Ac=null,x=Xi,Xi=bc(n.containerInfo),ri(n,e),Xi=x,ai(e),h&4&&s!==null&&s.memoizedState.isDehydrated)try{Ps(n.containerInfo)}catch(Be){Mt(e,e.return,Be)}ch&&(ch=!1,I0(e));break;case 4:h=Xi,Xi=bc(e.stateNode.containerInfo),ri(n,e),ai(e),Xi=h;break;case 12:ri(n,e),ai(e);break;case 31:ri(n,e),ai(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,lc(e,h)));break;case 13:ri(n,e),ai(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(cc=Jt()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,lc(e,h)));break;case 22:x=e.memoizedState!==null;var P=s!==null&&s.memoizedState!==null,$=Nr,de=vn;if(Nr=$||x,vn=de||P,ri(n,e),vn=de,Nr=$,ai(e),h&8192)e:for(n=e.stateNode,n._visibility=x?n._visibility&-2:n._visibility|1,x&&(s===null||P||Nr||vn||Wa(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){P=s=n;try{if(w=P.stateNode,x)T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{M=P.stateNode;var xe=P.memoizedProps.style,ne=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;M.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Be){Mt(P,P.return,Be)}}}else if(n.tag===6){if(s===null){P=n;try{P.stateNode.nodeValue=x?"":P.memoizedProps}catch(Be){Mt(P,P.return,Be)}}}else if(n.tag===18){if(s===null){P=n;try{var se=P.stateNode;x?y1(se,!0):y1(P.stateNode,!1)}catch(Be){Mt(P,P.return,Be)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(s=h.retryQueue,s!==null&&(h.retryQueue=null,lc(e,s))));break;case 19:ri(n,e),ai(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,lc(e,h)));break;case 30:break;case 21:break;default:ri(n,e),ai(e)}}function ai(e){var n=e.flags;if(n&2){try{for(var s,h=e.return;h!==null;){if(v0(h)){s=h;break}h=h.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var x=s.stateNode,w=lh(e);sc(e,w,x);break;case 5:var T=s.stateNode;s.flags&32&&(Gr(T,""),s.flags&=-33);var M=lh(e);sc(e,M,T);break;case 3:case 4:var P=s.stateNode.containerInfo,$=lh(e);oh(e,$,P);break;default:throw Error(d(161))}}catch(de){Mt(e,e.return,de)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function I0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;I0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Or(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)A0(e,n.alternate,n),n=n.sibling}function Wa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:oa(4,n,n.return),Wa(n);break;case 1:cr(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&y0(n,n.return,s),Wa(n);break;case 27:Hl(n.stateNode);case 26:case 5:cr(n,n.return),Wa(n);break;case 22:n.memoizedState===null&&Wa(n);break;case 30:Wa(n);break;default:Wa(n)}e=e.sibling}}function Rr(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,x=e,w=n,T=w.flags;switch(w.tag){case 0:case 11:case 15:Rr(x,w,s),Dl(4,w);break;case 1:if(Rr(x,w,s),h=w,x=h.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch($){Mt(h,h.return,$)}if(h=w,x=h.updateQueue,x!==null){var M=h.stateNode;try{var P=x.shared.hiddenCallbacks;if(P!==null)for(x.shared.hiddenCallbacks=null,x=0;x<P.length;x++)sf(P[x],M)}catch($){Mt(h,h.return,$)}}s&&T&64&&x0(w),Ml(w,w.return);break;case 27:b0(w);case 26:case 5:Rr(x,w,s),s&&h===null&&T&4&&w0(w),Ml(w,w.return);break;case 12:Rr(x,w,s);break;case 31:Rr(x,w,s),s&&T&4&&C0(x,w);break;case 13:Rr(x,w,s),s&&T&4&&T0(x,w);break;case 22:w.memoizedState===null&&Rr(x,w,s),Ml(w,w.return);break;case 30:break;default:Rr(x,w,s)}n=n.sibling}}function uh(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&wl(s))}function hh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&wl(e))}function Wi(e,n,s,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)O0(e,n,s,h),n=n.sibling}function O0(e,n,s,h){var x=n.flags;switch(n.tag){case 0:case 11:case 15:Wi(e,n,s,h),x&2048&&Dl(9,n);break;case 1:Wi(e,n,s,h);break;case 3:Wi(e,n,s,h),x&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&wl(e)));break;case 12:if(x&2048){Wi(e,n,s,h),e=n.stateNode;try{var w=n.memoizedProps,T=w.id,M=w.onPostCommit;typeof M=="function"&&M(T,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(P){Mt(n,n.return,P)}}else Wi(e,n,s,h);break;case 31:Wi(e,n,s,h);break;case 13:Wi(e,n,s,h);break;case 23:break;case 22:w=n.stateNode,T=n.alternate,n.memoizedState!==null?w._visibility&2?Wi(e,n,s,h):Bl(e,n):w._visibility&2?Wi(e,n,s,h):(w._visibility|=2,Is(e,n,s,h,(n.subtreeFlags&10256)!==0||!1)),x&2048&&uh(T,n);break;case 24:Wi(e,n,s,h),x&2048&&hh(n.alternate,n);break;default:Wi(e,n,s,h)}}function Is(e,n,s,h,x){for(x=x&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var w=e,T=n,M=s,P=h,$=T.flags;switch(T.tag){case 0:case 11:case 15:Is(w,T,M,P,x),Dl(8,T);break;case 23:break;case 22:var de=T.stateNode;T.memoizedState!==null?de._visibility&2?Is(w,T,M,P,x):Bl(w,T):(de._visibility|=2,Is(w,T,M,P,x)),x&&$&2048&&uh(T.alternate,T);break;case 24:Is(w,T,M,P,x),x&&$&2048&&hh(T.alternate,T);break;default:Is(w,T,M,P,x)}n=n.sibling}}function Bl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,h=n,x=h.flags;switch(h.tag){case 22:Bl(s,h),x&2048&&uh(h.alternate,h);break;case 24:Bl(s,h),x&2048&&hh(h.alternate,h);break;default:Bl(s,h)}n=n.sibling}}var kl=8192;function Os(e,n,s){if(e.subtreeFlags&kl)for(e=e.child;e!==null;)R0(e,n,s),e=e.sibling}function R0(e,n,s){switch(e.tag){case 26:Os(e,n,s),e.flags&kl&&e.memoizedState!==null&&Zm(s,Xi,e.memoizedState,e.memoizedProps);break;case 5:Os(e,n,s);break;case 3:case 4:var h=Xi;Xi=bc(e.stateNode.containerInfo),Os(e,n,s),Xi=h;break;case 22:e.memoizedState===null&&(h=e.alternate,h!==null&&h.memoizedState!==null?(h=kl,kl=16777216,Os(e,n,s),kl=h):Os(e,n,s));break;default:Os(e,n,s)}}function D0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ll(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];Rn=h,B0(h,e)}D0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)M0(e),e=e.sibling}function M0(e){switch(e.tag){case 0:case 11:case 15:Ll(e),e.flags&2048&&oa(9,e,e.return);break;case 3:Ll(e);break;case 12:Ll(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,oc(e)):Ll(e);break;default:Ll(e)}}function oc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];Rn=h,B0(h,e)}D0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:oa(8,n,n.return),oc(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,oc(n));break;default:oc(n)}e=e.sibling}}function B0(e,n){for(;Rn!==null;){var s=Rn;switch(s.tag){case 0:case 11:case 15:oa(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var h=s.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:wl(s.memoizedState.cache)}if(h=s.child,h!==null)h.return=s,Rn=h;else e:for(s=e;Rn!==null;){h=Rn;var x=h.sibling,w=h.return;if(S0(h),h===s){Rn=null;break e}if(x!==null){x.return=w,Rn=x;break e}Rn=w}}}var hm={getCacheForType:function(e){var n=Ln(xn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Ln(xn).controller.signal}},dm=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Ht=null,ct=null,ft=0,Dt=0,yi=null,ca=!1,Rs=!1,dh=!1,Dr=0,an=0,ua=0,Ka=0,fh=0,wi=0,Ds=0,jl=null,si=null,gh=!1,cc=0,k0=0,uc=1/0,hc=null,ha=null,Tn=0,da=null,Ms=null,Mr=0,mh=0,ph=null,L0=null,Ul=0,xh=null;function vi(){return(Tt&2)!==0&&ft!==0?ft&-ft:te.T!==null?Ah():qn()}function j0(){if(wi===0)if((ft&536870912)===0||mt){var e=ht;ht<<=1,(ht&3932160)===0&&(ht=262144),wi=e}else wi=536870912;return e=pi.current,e!==null&&(e.flags|=32),wi}function li(e,n,s){(e===Ht&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)&&(Bs(e,0),fa(e,ft,wi,!1)),tr(e,s),((Tt&2)===0||e!==Ht)&&(e===Ht&&((Tt&2)===0&&(Ka|=s),an===4&&fa(e,ft,wi,!1)),ur(e))}function U0(e,n,s){if((Tt&6)!==0)throw Error(d(327));var h=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Mn(e,n),x=h?mm(e,n):wh(e,n,!0),w=h;do{if(x===0){Rs&&!h&&fa(e,n,0,!1);break}else{if(s=e.current.alternate,w&&!fm(s)){x=wh(e,n,!1),w=!1;continue}if(x===2){if(w=n,e.errorRecoveryDisabledLanes&w)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var M=e;x=jl;var P=M.current.memoizedState.isDehydrated;if(P&&(Bs(M,T).flags|=256),T=wh(M,T,!1),T!==2){if(dh&&!P){M.errorRecoveryDisabledLanes|=w,Ka|=w,x=4;break e}w=si,si=x,w!==null&&(si===null?si=w:si.push.apply(si,w))}x=T}if(w=!1,x!==2)continue}}if(x===1){Bs(e,0),fa(e,n,0,!0);break}e:{switch(h=e,w=x,w){case 0:case 1:throw Error(d(345));case 4:if((n&4194048)!==n)break;case 6:fa(h,n,wi,!ca);break e;case 2:si=null;break;case 3:case 5:break;default:throw Error(d(329))}if((n&62914560)===n&&(x=cc+300-Jt(),10<x)){if(fa(h,n,wi,!ca),Ta(h,0,!0)!==0)break e;Mr=n,h.timeoutHandle=m1(z0.bind(null,h,s,si,hc,gh,n,wi,Ka,Ds,ca,w,"Throttled",-0,0),x);break e}z0(h,s,si,hc,gh,n,wi,Ka,Ds,ca,w,null,-0,0)}}break}while(!0);ur(e)}function z0(e,n,s,h,x,w,T,M,P,$,de,xe,ne,se){if(e.timeoutHandle=-1,xe=n.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},R0(n,w,xe);var Be=(w&62914560)===w?cc-Jt():(w&4194048)===w?k0-Jt():0;if(Be=Qm(xe,Be),Be!==null){Mr=w,e.cancelPendingCommit=Be(X0.bind(null,e,n,w,s,h,x,T,M,P,de,xe,null,ne,se)),fa(e,w,T,!$);return}}X0(e,n,w,s,h,x,T,M,P)}function fm(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var h=0;h<s.length;h++){var x=s[h],w=x.getSnapshot;x=x.value;try{if(!f(w(),x))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fa(e,n,s,h){n&=~fh,n&=~Ka,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var x=n;0<x;){var w=31-nt(x),T=1<<w;h[w]=-1,x&=~T}s!==0&&xo(e,s,n)}function dc(){return(Tt&6)===0?(zl(0),!1):!0}function yh(){if(ct!==null){if(Dt===0)var e=ct.return;else e=ct,Er=Pa=null,Bu(e),Ss=null,bl=0,e=ct;for(;e!==null;)p0(e.alternate,e),e=e.return;ct=null}}function Bs(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Mm(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Mr=0,yh(),Ht=e,ct=s=vr(e.current,null),ft=n,Dt=0,yi=null,ca=!1,Rs=Mn(e,n),dh=!1,Ds=wi=fh=Ka=ua=an=0,si=jl=null,gh=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var x=31-nt(h),w=1<<x;n|=e[x],h&=~w}return Dr=n,Mo(),s}function P0(e,n){et=null,te.H=Il,n===As||n===Fo?(n=tf(),Dt=3):n===Eu?(n=tf(),Dt=4):Dt=n===Zu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,yi=n,ct===null&&(an=1,tc(e,Mi(n,e.current)))}function F0(){var e=pi.current;return e===null?!0:(ft&4194048)===ft?ji===null:(ft&62914560)===ft||(ft&536870912)!==0?e===ji:!1}function H0(){var e=te.H;return te.H=Il,e===null?Il:e}function V0(){var e=te.A;return te.A=hm,e}function fc(){an=4,ca||(ft&4194048)!==ft&&pi.current!==null||(Rs=!0),(ua&134217727)===0&&(Ka&134217727)===0||Ht===null||fa(Ht,ft,wi,!1)}function wh(e,n,s){var h=Tt;Tt|=2;var x=H0(),w=V0();(Ht!==e||ft!==n)&&(hc=null,Bs(e,n)),n=!1;var T=an;e:do try{if(Dt!==0&&ct!==null){var M=ct,P=yi;switch(Dt){case 8:yh(),T=6;break e;case 3:case 2:case 9:case 6:pi.current===null&&(n=!0);var $=Dt;if(Dt=0,yi=null,ks(e,M,P,$),s&&Rs){T=0;break e}break;default:$=Dt,Dt=0,yi=null,ks(e,M,P,$)}}gm(),T=an;break}catch(de){P0(e,de)}while(!0);return n&&e.shellSuspendCounter++,Er=Pa=null,Tt=h,te.H=x,te.A=w,ct===null&&(Ht=null,ft=0,Mo()),T}function gm(){for(;ct!==null;)G0(ct)}function mm(e,n){var s=Tt;Tt|=2;var h=H0(),x=V0();Ht!==e||ft!==n?(hc=null,uc=Jt()+500,Bs(e,n)):Rs=Mn(e,n);e:do try{if(Dt!==0&&ct!==null){n=ct;var w=yi;t:switch(Dt){case 1:Dt=0,yi=null,ks(e,n,w,1);break;case 2:case 9:if($d(w)){Dt=0,yi=null,q0(n);break}n=function(){Dt!==2&&Dt!==9||Ht!==e||(Dt=7),ur(e)},w.then(n,n);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:$d(w)?(Dt=0,yi=null,q0(n)):(Dt=0,yi=null,ks(e,n,w,7));break;case 5:var T=null;switch(ct.tag){case 26:T=ct.memoizedState;case 5:case 27:var M=ct;if(T?O1(T):M.stateNode.complete){Dt=0,yi=null;var P=M.sibling;if(P!==null)ct=P;else{var $=M.return;$!==null?(ct=$,gc($)):ct=null}break t}}Dt=0,yi=null,ks(e,n,w,5);break;case 6:Dt=0,yi=null,ks(e,n,w,6);break;case 8:yh(),an=6;break e;default:throw Error(d(462))}}pm();break}catch(de){P0(e,de)}while(!0);return Er=Pa=null,te.H=h,te.A=x,Tt=s,ct!==null?0:(Ht=null,ft=0,Mo(),an)}function pm(){for(;ct!==null&&!ns();)G0(ct)}function G0(e){var n=g0(e.alternate,e,Dr);e.memoizedProps=e.pendingProps,n===null?gc(e):ct=n}function q0(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=o0(s,n,n.pendingProps,n.type,void 0,ft);break;case 11:n=o0(s,n,n.pendingProps,n.type.render,n.ref,ft);break;case 5:Bu(n);default:p0(s,n),n=ct=Hd(n,Dr),n=g0(s,n,Dr)}e.memoizedProps=e.pendingProps,n===null?gc(e):ct=n}function ks(e,n,s,h){Er=Pa=null,Bu(n),Ss=null,bl=0;var x=n.return;try{if(rm(e,x,n,s,ft)){an=1,tc(e,Mi(s,e.current)),ct=null;return}}catch(w){if(x!==null)throw ct=x,w;an=1,tc(e,Mi(s,e.current)),ct=null;return}n.flags&32768?(mt||h===1?e=!0:Rs||(ft&536870912)!==0?e=!1:(ca=e=!0,(h===2||h===9||h===3||h===6)&&(h=pi.current,h!==null&&h.tag===13&&(h.flags|=16384))),Y0(n,e)):gc(n)}function gc(e){var n=e;do{if((n.flags&32768)!==0){Y0(n,ca);return}e=n.return;var s=lm(n.alternate,n,Dr);if(s!==null){ct=s;return}if(n=n.sibling,n!==null){ct=n;return}ct=n=e}while(n!==null);an===0&&(an=5)}function Y0(e,n){do{var s=om(e.alternate,e);if(s!==null){s.flags&=32767,ct=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){ct=e;return}ct=e=s}while(e!==null);an=6,ct=null}function X0(e,n,s,h,x,w,T,M,P){e.cancelPendingCommit=null;do mc();while(Tn!==0);if((Tt&6)!==0)throw Error(d(327));if(n!==null){if(n===e.current)throw Error(d(177));if(w=n.lanes|n.childLanes,w|=lu,Ni(e,s,w,T,M,P),e===Ht&&(ct=Ht=null,ft=0),Ms=n,da=e,Mr=s,mh=w,ph=x,L0=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,vm(oi,function(){return J0(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=te.T,te.T=null,x=fe.p,fe.p=2,T=Tt,Tt|=4;try{cm(e,n,s)}finally{Tt=T,fe.p=x,te.T=h}}Tn=1,W0(),K0(),Z0()}}function W0(){if(Tn===1){Tn=0;var e=da,n=Ms,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=te.T,te.T=null;var h=fe.p;fe.p=2;var x=Tt;Tt|=4;try{N0(n,e);var w=Rh,T=R(e.containerInfo),M=w.focusedElem,P=w.selectionRange;if(T!==M&&M&&M.ownerDocument&&C(M.ownerDocument.documentElement,M)){if(P!==null&&D(M)){var $=P.start,de=P.end;if(de===void 0&&(de=$),"selectionStart"in M)M.selectionStart=$,M.selectionEnd=Math.min(de,M.value.length);else{var xe=M.ownerDocument||document,ne=xe&&xe.defaultView||window;if(ne.getSelection){var se=ne.getSelection(),Be=M.textContent.length,qe=Math.min(P.start,Be),Ut=P.end===void 0?qe:Math.min(P.end,Be);!se.extend&&qe>Ut&&(T=Ut,Ut=qe,qe=T);var q=A(M,qe),G=A(M,Ut);if(q&&G&&(se.rangeCount!==1||se.anchorNode!==q.node||se.anchorOffset!==q.offset||se.focusNode!==G.node||se.focusOffset!==G.offset)){var Q=xe.createRange();Q.setStart(q.node,q.offset),se.removeAllRanges(),qe>Ut?(se.addRange(Q),se.extend(G.node,G.offset)):(Q.setEnd(G.node,G.offset),se.addRange(Q))}}}}for(xe=[],se=M;se=se.parentNode;)se.nodeType===1&&xe.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<xe.length;M++){var me=xe[M];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Tc=!!Oh,Rh=Oh=null}finally{Tt=x,fe.p=h,te.T=s}}e.current=n,Tn=2}}function K0(){if(Tn===2){Tn=0;var e=da,n=Ms,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=te.T,te.T=null;var h=fe.p;fe.p=2;var x=Tt;Tt|=4;try{A0(e,n.alternate,n)}finally{Tt=x,fe.p=h,te.T=s}}Tn=3}}function Z0(){if(Tn===4||Tn===3){Tn=0,po();var e=da,n=Ms,s=Mr,h=L0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Tn=5:(Tn=0,Ms=da=null,Q0(e,e.pendingLanes));var x=e.pendingLanes;if(x===0&&(ha=null),Pi(s),n=n.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(Vt,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=te.T,x=fe.p,fe.p=2,te.T=null;try{for(var w=e.onRecoverableError,T=0;T<h.length;T++){var M=h[T];w(M.value,{componentStack:M.stack})}}finally{te.T=n,fe.p=x}}(Mr&3)!==0&&mc(),ur(e),x=e.pendingLanes,(s&261930)!==0&&(x&42)!==0?e===xh?Ul++:(Ul=0,xh=e):Ul=0,zl(0)}}function Q0(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,wl(n)))}function mc(){return W0(),K0(),Z0(),J0()}function J0(){if(Tn!==5)return!1;var e=da,n=mh;mh=0;var s=Pi(Mr),h=te.T,x=fe.p;try{fe.p=32>s?32:s,te.T=null,s=ph,ph=null;var w=da,T=Mr;if(Tn=0,Ms=da=null,Mr=0,(Tt&6)!==0)throw Error(d(331));var M=Tt;if(Tt|=4,M0(w.current),O0(w,w.current,T,s),Tt=M,zl(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(Vt,w)}catch{}return!0}finally{fe.p=x,te.T=h,Q0(e,n)}}function $0(e,n,s){n=Mi(s,n),n=Ku(e.stateNode,n,2),e=aa(e,n,2),e!==null&&(tr(e,2),ur(e))}function Mt(e,n,s){if(e.tag===3)$0(e,e,s);else for(;n!==null;){if(n.tag===3){$0(n,e,s);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ha===null||!ha.has(h))){e=Mi(s,e),s=e0(2),h=aa(n,s,2),h!==null&&(t0(s,h,n,e),tr(h,2),ur(h));break}}n=n.return}}function vh(e,n,s){var h=e.pingCache;if(h===null){h=e.pingCache=new dm;var x=new Set;h.set(n,x)}else x=h.get(n),x===void 0&&(x=new Set,h.set(n,x));x.has(s)||(dh=!0,x.add(s),e=xm.bind(null,e,n,s),n.then(e,e))}function xm(e,n,s){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ht===e&&(ft&s)===s&&(an===4||an===3&&(ft&62914560)===ft&&300>Jt()-cc?(Tt&2)===0&&Bs(e,0):fh|=s,Ds===ft&&(Ds=0)),ur(e)}function e1(e,n){n===0&&(n=An()),e=ja(e,n),e!==null&&(tr(e,n),ur(e))}function ym(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),e1(e,s)}function wm(e,n){var s=0;switch(e.tag){case 31:case 13:var h=e.stateNode,x=e.memoizedState;x!==null&&(s=x.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(d(314))}h!==null&&h.delete(n),e1(e,s)}function vm(e,n){return Ur(e,n)}var pc=null,Ls=null,bh=!1,xc=!1,Eh=!1,ga=0;function ur(e){e!==Ls&&e.next===null&&(Ls===null?pc=Ls=e:Ls=Ls.next=e),xc=!0,bh||(bh=!0,Em())}function zl(e,n){if(!Eh&&xc){Eh=!0;do for(var s=!1,h=pc;h!==null;){if(e!==0){var x=h.pendingLanes;if(x===0)var w=0;else{var T=h.suspendedLanes,M=h.pingedLanes;w=(1<<31-nt(42|e)+1)-1,w&=x&~(T&~M),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(s=!0,r1(h,w))}else w=ft,w=Ta(h,h===Ht?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Mn(h,w)||(s=!0,r1(h,w));h=h.next}while(s);Eh=!1}}function bm(){t1()}function t1(){xc=bh=!1;var e=0;ga!==0&&Dm()&&(e=ga);for(var n=Jt(),s=null,h=pc;h!==null;){var x=h.next,w=n1(h,n);w===0?(h.next=null,s===null?pc=x:s.next=x,x===null&&(Ls=s)):(s=h,(e!==0||(w&3)!==0)&&(xc=!0)),h=x}Tn!==0&&Tn!==5||zl(e),ga!==0&&(ga=0)}function n1(e,n){for(var s=e.suspendedLanes,h=e.pingedLanes,x=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var T=31-nt(w),M=1<<T,P=x[T];P===-1?((M&s)===0||(M&h)!==0)&&(x[T]=sl(M,n)):P<=n&&(e.expiredLanes|=M),w&=~M}if(n=Ht,s=ft,s=Ta(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,s===0||e===n&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&Me(h),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Mn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(h!==null&&Me(h),Pi(s)){case 2:case 8:s=il;break;case 32:s=oi;break;case 268435456:s=rl;break;default:s=oi}return h=i1.bind(null,e),s=Ur(s,h),e.callbackPriority=n,e.callbackNode=s,n}return h!==null&&h!==null&&Me(h),e.callbackPriority=2,e.callbackNode=null,2}function i1(e,n){if(Tn!==0&&Tn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(mc()&&e.callbackNode!==s)return null;var h=ft;return h=Ta(e,e===Ht?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(U0(e,h,n),n1(e,Jt()),e.callbackNode!=null&&e.callbackNode===s?i1.bind(null,e):null)}function r1(e,n){if(mc())return null;U0(e,n,!0)}function Em(){Bm(function(){(Tt&6)!==0?Ur(Jn,bm):t1()})}function Ah(){if(ga===0){var e=bs;e===0&&(e=Ca,Ca<<=1,(Ca&261888)===0&&(Ca=256)),ga=e}return ga}function a1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:qr(""+e)}function s1(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function Am(e,n,s,h,x){if(n==="submit"&&s&&s.stateNode===x){var w=a1((x[Rt]||null).action),T=h.submitter;T&&(n=(n=T[Rt]||null)?a1(n.formAction):T.getAttribute("formAction"),n!==null&&(w=n,T=null));var M=new Sn("action","action",null,h,x);e.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ga!==0){var P=T?s1(x,T):new FormData(x);Vu(s,{pending:!0,data:P,method:x.method,action:w},null,P)}}else typeof w=="function"&&(M.preventDefault(),P=T?s1(x,T):new FormData(x),Vu(s,{pending:!0,data:P,method:x.method,action:w},w,P))},currentTarget:x}]})}}for(var Sh=0;Sh<pl.length;Sh++){var _h=pl[Sh],Sm=_h.toLowerCase(),_m=_h[0].toUpperCase()+_h.slice(1);Yi(Sm,"on"+_m)}Yi(ni,"onAnimationEnd"),Yi(Bn,"onAnimationIteration"),Yi(Ot,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(Cn,"onTransitionRun"),Yi(Zn,"onTransitionStart"),Yi(Jr,"onTransitionCancel"),Yi(wr,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),Nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function l1(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var h=e[s],x=h.event;h=h.listeners;e:{var w=void 0;if(n)for(var T=h.length-1;0<=T;T--){var M=h[T],P=M.instance,$=M.currentTarget;if(M=M.listener,P!==w&&x.isPropagationStopped())break e;w=M,x.currentTarget=$;try{w(x)}catch(de){Do(de)}x.currentTarget=null,w=P}else for(T=0;T<h.length;T++){if(M=h[T],P=M.instance,$=M.currentTarget,M=M.listener,P!==w&&x.isPropagationStopped())break e;w=M,x.currentTarget=$;try{w(x)}catch(de){Do(de)}x.currentTarget=null,w=P}}}}function ut(e,n){var s=n[zr];s===void 0&&(s=n[zr]=new Set);var h=e+"__bubble";s.has(h)||(o1(n,e,2,!1),s.add(h))}function Ch(e,n,s){var h=0;n&&(h|=4),o1(s,e,h,n)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Th(e){if(!e[yc]){e[yc]=!0,ye.forEach(function(s){s!=="selectionchange"&&(Cm.has(s)||Ch(s,!1,e),Ch(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[yc]||(n[yc]=!0,Ch("selectionchange",!1,n))}}function o1(e,n,s,h){switch(j1(n)){case 2:var x=ep;break;case 8:x=tp;break;default:x=Hh}s=x.bind(null,n,s,e),x=void 0,!cl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(x=!0),h?x!==void 0?e.addEventListener(n,s,{capture:!0,passive:x}):e.addEventListener(n,s,!0):x!==void 0?e.addEventListener(n,s,{passive:x}):e.addEventListener(n,s,!1)}function Nh(e,n,s,h,x){var w=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var M=h.stateNode.containerInfo;if(M===x)break;if(T===4)for(T=h.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;M!==null;){if(T=en(M),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){h=w=T;continue e}M=M.parentNode}}h=h.return}bo(function(){var $=w,de=ol(s),xe=[];e:{var ne=Ro.get(e);if(ne!==void 0){var se=Sn,Be=e;switch(e){case"keypress":if(ir(s)===0)break e;case"keydown":case"keyup":se=ds;break;case"focusin":Be="focus",se=dl;break;case"focusout":Be="blur",se=dl;break;case"beforeblur":case"afterblur":se=dl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ct;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=us;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=ru;break;case ni:case Bn:case Ot:se=it;break;case wr:se=mr;break;case"scroll":case"scrollend":se=Eo;break;case"wheel":se=au;break;case"copy":case"cut":case"paste":se=hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=It;break;case"toggle":case"beforetoggle":se=gl}var qe=(n&4)!==0,Ut=!qe&&(e==="scroll"||e==="scrollend"),q=qe?ne!==null?ne+"Capture":null:ne;qe=[];for(var G=$,Q;G!==null;){var me=G;if(Q=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||Q===null||q===null||(me=Ze(G,q),me!=null&&qe.push(Fl(G,me,Q))),Ut)break;G=G.return}0<qe.length&&(ne=new se(ne,Be,null,s,de),xe.push({event:ne,listeners:qe}))}}if((n&7)===0){e:{if(ne=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",ne&&s!==Ia&&(Be=s.relatedTarget||s.fromElement)&&(en(Be)||Be[ci]))break e;if((se||ne)&&(ne=de.window===de?de:(ne=de.ownerDocument)?ne.defaultView||ne.parentWindow:window,se?(Be=s.relatedTarget||s.toElement,se=$,Be=Be?en(Be):null,Be!==null&&(Ut=g(Be),qe=Be.tag,Be!==Ut||qe!==5&&qe!==27&&qe!==6)&&(Be=null)):(se=null,Be=$),se!==Be)){if(qe=Ct,me="onMouseLeave",q="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(qe=It,me="onPointerLeave",q="onPointerEnter",G="pointer"),Ut=se==null?ne:Pr(se),Q=Be==null?ne:Pr(Be),ne=new qe(me,G+"leave",se,s,de),ne.target=Ut,ne.relatedTarget=Q,me=null,en(de)===$&&(qe=new qe(q,G+"enter",Be,s,de),qe.target=Q,qe.relatedTarget=Ut,me=qe),Ut=me,se&&Be)t:{for(qe=Tm,q=se,G=Be,Q=0,me=q;me;me=qe(me))Q++;me=0;for(var Fe=G;Fe;Fe=qe(Fe))me++;for(;0<Q-me;)q=qe(q),Q--;for(;0<me-Q;)G=qe(G),me--;for(;Q--;){if(q===G||G!==null&&q===G.alternate){qe=q;break t}q=qe(q),G=qe(G)}qe=null}else qe=null;se!==null&&c1(xe,ne,se,qe,!1),Be!==null&&Ut!==null&&c1(xe,Ut,Be,qe,!0)}}e:{if(ne=$?Pr($):window,se=ne.nodeName&&ne.nodeName.toLowerCase(),se==="select"||se==="input"&&ne.type==="file")var Et=gi;else if(ml(ne))if(Oo)Et=c;else{Et=i;var Ue=t}else se=ne.nodeName,!se||se.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?$&&zt($.elementType)&&(Et=gi):Et=a;if(Et&&(Et=Et(e,$))){fi(xe,Et,s,de);break e}Ue&&Ue(e,ne,$),e==="focusout"&&$&&ne.type==="number"&&$.memoizedProps.value!=null&&k(ne,"number",ne.value)}switch(Ue=$?Pr($):window,e){case"focusin":(ml(Ue)||Ue.contentEditable==="true")&&(F=Ue,V=$,X=null);break;case"focusout":X=V=F=null;break;case"mousedown":re=!0;break;case"contextmenu":case"mouseup":case"dragend":re=!1,Ae(xe,s,de);break;case"selectionchange":if(j)break;case"keydown":case"keyup":Ae(xe,s,de)}var rt;if(Da)e:{switch(e){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else Qr?Io(e,s)&&(gt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(gt="onCompositionStart");gt&&(No&&s.locale!=="ko"&&(Qr||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Qr&&(rt=Yr()):(Gi=de,qi="value"in Gi?Gi.value:Gi.textContent,Qr=!0)),Ue=wc($,gt),0<Ue.length&&(gt=new _o(gt,e,null,s,de),xe.push({event:gt,listeners:Ue}),rt?gt.data=rt:(rt=Zr(s),rt!==null&&(gt.data=rt)))),(rt=To?sr(e,s):gs(e,s))&&(gt=wc($,"onBeforeInput"),0<gt.length&&(Ue=new _o("onBeforeInput","beforeinput",null,s,de),xe.push({event:Ue,listeners:gt}),Ue.data=rt)),Am(xe,e,$,s,de)}l1(xe,n)})}function Fl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function wc(e,n){for(var s=n+"Capture",h=[];e!==null;){var x=e,w=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||w===null||(x=Ze(e,s),x!=null&&h.unshift(Fl(e,x,w)),x=Ze(e,n),x!=null&&h.push(Fl(e,x,w))),e.tag===3)return h;e=e.return}return[]}function Tm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function c1(e,n,s,h,x){for(var w=n._reactName,T=[];s!==null&&s!==h;){var M=s,P=M.alternate,$=M.stateNode;if(M=M.tag,P!==null&&P===h)break;M!==5&&M!==26&&M!==27||$===null||(P=$,x?($=Ze(s,w),$!=null&&T.unshift(Fl(s,$,P))):x||($=Ze(s,w),$!=null&&T.push(Fl(s,$,P)))),s=s.return}T.length!==0&&e.push({event:n,listeners:T})}var Nm=/\r\n?/g,Im=/\u0000|\uFFFD/g;function u1(e){return(typeof e=="string"?e:""+e).replace(Nm,`
`).replace(Im,"")}function h1(e,n){return n=u1(n),u1(e)===n}function jt(e,n,s,h,x,w){switch(s){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||Gr(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&Gr(e,""+h);break;case"className":Hr(e,"class",h);break;case"tabIndex":Hr(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Hr(e,s,h);break;case"style":Pe(e,h,w);break;case"data":if(n!=="object"){Hr(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=qr(""+h),e.setAttribute(s,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(s==="formAction"?(n!=="input"&&jt(e,n,"name",x.name,x,null),jt(e,n,"formEncType",x.formEncType,x,null),jt(e,n,"formMethod",x.formMethod,x,null),jt(e,n,"formTarget",x.formTarget,x,null)):(jt(e,n,"encType",x.encType,x,null),jt(e,n,"method",x.method,x,null),jt(e,n,"target",x.target,x,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=qr(""+h),e.setAttribute(s,h);break;case"onClick":h!=null&&(e.onclick=ei);break;case"onScroll":h!=null&&ut("scroll",e);break;case"onScrollEnd":h!=null&&ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(d(61));if(s=h.__html,s!=null){if(x.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}s=qr(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""+h):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":h===!0?e.setAttribute(s,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,h):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(s,h):e.removeAttribute(s);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(s):e.setAttribute(s,h);break;case"popover":ut("beforetoggle",e),ut("toggle",e),Fr(e,"popover",h);break;case"xlinkActuate":hi(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":hi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":hi(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":hi(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":hi(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":hi(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":hi(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":hi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":hi(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Fr(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=vo.get(s)||s,Fr(e,s,h))}}function Ih(e,n,s,h,x,w){switch(s){case"style":Pe(e,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(d(61));if(s=h.__html,s!=null){if(x.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof h=="string"?Gr(e,h):(typeof h=="number"||typeof h=="bigint")&&Gr(e,""+h);break;case"onScroll":h!=null&&ut("scroll",e);break;case"onScrollEnd":h!=null&&ut("scrollend",e);break;case"onClick":h!=null&&(e.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(x=s.endsWith("Capture"),n=s.slice(2,x?s.length-7:void 0),w=e[Rt]||null,w=w!=null?w[s]:null,typeof w=="function"&&e.removeEventListener(n,w,x),typeof h=="function")){typeof w!="function"&&w!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,h,x);break e}s in e?e[s]=h:h===!0?e.setAttribute(s,""):Fr(e,s,h)}}}function Un(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",e),ut("load",e);var h=!1,x=!1,w;for(w in s)if(s.hasOwnProperty(w)){var T=s[w];if(T!=null)switch(w){case"src":h=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,n));default:jt(e,n,w,T,s,null)}}x&&jt(e,n,"srcSet",s.srcSet,s,null),h&&jt(e,n,"src",s.src,s,null);return;case"input":ut("invalid",e);var M=w=T=x=null,P=null,$=null;for(h in s)if(s.hasOwnProperty(h)){var de=s[h];if(de!=null)switch(h){case"name":x=de;break;case"type":T=de;break;case"checked":P=de;break;case"defaultChecked":$=de;break;case"value":w=de;break;case"defaultValue":M=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(d(137,n));break;default:jt(e,n,h,de,s,null)}}Z(e,w,M,P,$,T,x,!1);return;case"select":ut("invalid",e),h=T=w=null;for(x in s)if(s.hasOwnProperty(x)&&(M=s[x],M!=null))switch(x){case"value":w=M;break;case"defaultValue":T=M;break;case"multiple":h=M;default:jt(e,n,x,M,s,null)}n=w,s=T,e.multiple=!!h,n!=null?je(e,!!h,n,!1):s!=null&&je(e,!!h,s,!0);return;case"textarea":ut("invalid",e),w=x=h=null;for(T in s)if(s.hasOwnProperty(T)&&(M=s[T],M!=null))switch(T){case"value":h=M;break;case"defaultValue":x=M;break;case"children":w=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(d(91));break;default:jt(e,n,T,M,s,null)}Wn(e,h,x,w);return;case"option":for(P in s)s.hasOwnProperty(P)&&(h=s[P],h!=null)&&(P==="selected"?e.selected=h&&typeof h!="function"&&typeof h!="symbol":jt(e,n,P,h,s,null));return;case"dialog":ut("beforetoggle",e),ut("toggle",e),ut("cancel",e),ut("close",e);break;case"iframe":case"object":ut("load",e);break;case"video":case"audio":for(h=0;h<Pl.length;h++)ut(Pl[h],e);break;case"image":ut("error",e),ut("load",e);break;case"details":ut("toggle",e);break;case"embed":case"source":case"link":ut("error",e),ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in s)if(s.hasOwnProperty($)&&(h=s[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,n));default:jt(e,n,$,h,s,null)}return;default:if(zt(n)){for(de in s)s.hasOwnProperty(de)&&(h=s[de],h!==void 0&&Ih(e,n,de,h,s,void 0));return}}for(M in s)s.hasOwnProperty(M)&&(h=s[M],h!=null&&jt(e,n,M,h,s,null))}function Om(e,n,s,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,w=null,T=null,M=null,P=null,$=null,de=null;for(se in s){var xe=s[se];if(s.hasOwnProperty(se)&&xe!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":P=xe;default:h.hasOwnProperty(se)||jt(e,n,se,null,h,xe)}}for(var ne in h){var se=h[ne];if(xe=s[ne],h.hasOwnProperty(ne)&&(se!=null||xe!=null))switch(ne){case"type":w=se;break;case"name":x=se;break;case"checked":$=se;break;case"defaultChecked":de=se;break;case"value":T=se;break;case"defaultValue":M=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(d(137,n));break;default:se!==xe&&jt(e,n,ne,se,h,xe)}}mn(e,T,M,P,$,de,w,x);return;case"select":se=T=M=ne=null;for(w in s)if(P=s[w],s.hasOwnProperty(w)&&P!=null)switch(w){case"value":break;case"multiple":se=P;default:h.hasOwnProperty(w)||jt(e,n,w,null,h,P)}for(x in h)if(w=h[x],P=s[x],h.hasOwnProperty(x)&&(w!=null||P!=null))switch(x){case"value":ne=w;break;case"defaultValue":M=w;break;case"multiple":T=w;default:w!==P&&jt(e,n,x,w,h,P)}n=M,s=T,h=se,ne!=null?je(e,!!s,ne,!1):!!h!=!!s&&(n!=null?je(e,!!s,n,!0):je(e,!!s,s?[]:"",!1));return;case"textarea":se=ne=null;for(M in s)if(x=s[M],s.hasOwnProperty(M)&&x!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:jt(e,n,M,null,h,x)}for(T in h)if(x=h[T],w=s[T],h.hasOwnProperty(T)&&(x!=null||w!=null))switch(T){case"value":ne=x;break;case"defaultValue":se=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(d(91));break;default:x!==w&&jt(e,n,T,x,h,w)}un(e,ne,se);return;case"option":for(var Be in s)ne=s[Be],s.hasOwnProperty(Be)&&ne!=null&&!h.hasOwnProperty(Be)&&(Be==="selected"?e.selected=!1:jt(e,n,Be,null,h,ne));for(P in h)ne=h[P],se=s[P],h.hasOwnProperty(P)&&ne!==se&&(ne!=null||se!=null)&&(P==="selected"?e.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":jt(e,n,P,ne,h,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in s)ne=s[qe],s.hasOwnProperty(qe)&&ne!=null&&!h.hasOwnProperty(qe)&&jt(e,n,qe,null,h,ne);for($ in h)if(ne=h[$],se=s[$],h.hasOwnProperty($)&&ne!==se&&(ne!=null||se!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(d(137,n));break;default:jt(e,n,$,ne,h,se)}return;default:if(zt(n)){for(var Ut in s)ne=s[Ut],s.hasOwnProperty(Ut)&&ne!==void 0&&!h.hasOwnProperty(Ut)&&Ih(e,n,Ut,void 0,h,ne);for(de in h)ne=h[de],se=s[de],!h.hasOwnProperty(de)||ne===se||ne===void 0&&se===void 0||Ih(e,n,de,ne,h,se);return}}for(var q in s)ne=s[q],s.hasOwnProperty(q)&&ne!=null&&!h.hasOwnProperty(q)&&jt(e,n,q,null,h,ne);for(xe in h)ne=h[xe],se=s[xe],!h.hasOwnProperty(xe)||ne===se||ne==null&&se==null||jt(e,n,xe,ne,h,se)}function d1(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),h=0;h<s.length;h++){var x=s[h],w=x.transferSize,T=x.initiatorType,M=x.duration;if(w&&M&&d1(T)){for(T=0,M=x.responseEnd,h+=1;h<s.length;h++){var P=s[h],$=P.startTime;if($>M)break;var de=P.transferSize,xe=P.initiatorType;de&&d1(xe)&&(P=P.responseEnd,T+=de*(P<M?1:(M-$)/(P-$)))}if(--h,n+=8*(w+T)/(x.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Oh=null,Rh=null;function vc(e){return e.nodeType===9?e:e.ownerDocument}function f1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g1(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Dh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Mh=null;function Dm(){var e=window.event;return e&&e.type==="popstate"?e===Mh?!1:(Mh=e,!0):(Mh=null,!1)}var m1=typeof setTimeout=="function"?setTimeout:void 0,Mm=typeof clearTimeout=="function"?clearTimeout:void 0,p1=typeof Promise=="function"?Promise:void 0,Bm=typeof queueMicrotask=="function"?queueMicrotask:typeof p1<"u"?function(e){return p1.resolve(null).then(e).catch(km)}:m1;function km(e){setTimeout(function(){throw e})}function ma(e){return e==="head"}function x1(e,n){var s=n,h=0;do{var x=s.nextSibling;if(e.removeChild(s),x&&x.nodeType===8)if(s=x.data,s==="/$"||s==="/&"){if(h===0){e.removeChild(x),Ps(n);return}h--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")h++;else if(s==="html")Hl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Hl(s);for(var w=s.firstChild;w;){var T=w.nextSibling,M=w.nodeName;w[Na]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=T}}else s==="body"&&Hl(e.ownerDocument.body);s=x}while(s);Ps(n)}function y1(e,n){var s=e;e=0;do{var h=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=h}while(s)}function Bh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Bh(s),$n(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Lm(e,n,s,h){for(;e.nodeType===1;){var x=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[Na])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==x.rel||e.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||e.getAttribute("title")!==(x.title==null?null:x.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(x.src==null?null:x.src)||e.getAttribute("type")!==(x.type==null?null:x.type)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var w=x.name==null?null:""+x.name;if(x.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=Ui(e.nextSibling),e===null)break}return null}function jm(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Ui(e.nextSibling),e===null))return null;return e}function w1(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ui(e.nextSibling),e===null))return null;return e}function kh(e){return e.data==="$?"||e.data==="$~"}function Lh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Um(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var h=function(){n(),s.removeEventListener("DOMContentLoaded",h)};s.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function Ui(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var jh=null;function v1(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Ui(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function b1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function E1(e,n,s){switch(n=vc(s),e){case"html":if(e=n.documentElement,!e)throw Error(d(452));return e;case"head":if(e=n.head,!e)throw Error(d(453));return e;case"body":if(e=n.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Hl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);$n(e)}var zi=new Map,A1=new Set;function bc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Br=fe.d;fe.d={f:zm,r:Pm,D:Fm,C:Hm,L:Vm,m:Gm,X:Ym,S:qm,M:Xm};function zm(){var e=Br.f(),n=dc();return e||n}function Pm(e){var n=_t(e);n!==null&&n.tag===5&&n.type==="form"?Pf(n):Br.r(e)}var js=typeof document>"u"?null:document;function S1(e,n,s){var h=js;if(h&&typeof n=="string"&&n){var x=lt(n);x='link[rel="'+e+'"][href="'+x+'"]',typeof s=="string"&&(x+='[crossorigin="'+s+'"]'),A1.has(x)||(A1.add(x),e={rel:e,crossOrigin:s,href:n},h.querySelector(x)===null&&(n=h.createElement("link"),Un(n,"link",e),tn(n),h.head.appendChild(n)))}}function Fm(e){Br.D(e),S1("dns-prefetch",e,null)}function Hm(e,n){Br.C(e,n),S1("preconnect",e,n)}function Vm(e,n,s){Br.L(e,n,s);var h=js;if(h&&e&&n){var x='link[rel="preload"][as="'+lt(n)+'"]';n==="image"&&s&&s.imageSrcSet?(x+='[imagesrcset="'+lt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(x+='[imagesizes="'+lt(s.imageSizes)+'"]')):x+='[href="'+lt(e)+'"]';var w=x;switch(n){case"style":w=Us(e);break;case"script":w=zs(e)}zi.has(w)||(e=I({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),zi.set(w,e),h.querySelector(x)!==null||n==="style"&&h.querySelector(Vl(w))||n==="script"&&h.querySelector(Gl(w))||(n=h.createElement("link"),Un(n,"link",e),tn(n),h.head.appendChild(n)))}}function Gm(e,n){Br.m(e,n);var s=js;if(s&&e){var h=n&&typeof n.as=="string"?n.as:"script",x='link[rel="modulepreload"][as="'+lt(h)+'"][href="'+lt(e)+'"]',w=x;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=zs(e)}if(!zi.has(w)&&(e=I({rel:"modulepreload",href:e},n),zi.set(w,e),s.querySelector(x)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Gl(w)))return}h=s.createElement("link"),Un(h,"link",e),tn(h),s.head.appendChild(h)}}}function qm(e,n,s){Br.S(e,n,s);var h=js;if(h&&e){var x=Xn(h).hoistableStyles,w=Us(e);n=n||"default";var T=x.get(w);if(!T){var M={loading:0,preload:null};if(T=h.querySelector(Vl(w)))M.loading=5;else{e=I({rel:"stylesheet",href:e,"data-precedence":n},s),(s=zi.get(w))&&Uh(e,s);var P=T=h.createElement("link");tn(P),Un(P,"link",e),P._p=new Promise(function($,de){P.onload=$,P.onerror=de}),P.addEventListener("load",function(){M.loading|=1}),P.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Ec(T,n,h)}T={type:"stylesheet",instance:T,count:1,state:M},x.set(w,T)}}}function Ym(e,n){Br.X(e,n);var s=js;if(s&&e){var h=Xn(s).hoistableScripts,x=zs(e),w=h.get(x);w||(w=s.querySelector(Gl(x)),w||(e=I({src:e,async:!0},n),(n=zi.get(x))&&zh(e,n),w=s.createElement("script"),tn(w),Un(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(x,w))}}function Xm(e,n){Br.M(e,n);var s=js;if(s&&e){var h=Xn(s).hoistableScripts,x=zs(e),w=h.get(x);w||(w=s.querySelector(Gl(x)),w||(e=I({src:e,async:!0,type:"module"},n),(n=zi.get(x))&&zh(e,n),w=s.createElement("script"),tn(w),Un(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(x,w))}}function _1(e,n,s,h){var x=(x=pe.current)?bc(x):null;if(!x)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Us(s.href),s=Xn(x).hoistableStyles,h=s.get(n),h||(h={type:"style",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Us(s.href);var w=Xn(x).hoistableStyles,T=w.get(e);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,T),(w=x.querySelector(Vl(e)))&&!w._p&&(T.instance=w,T.state.loading=5),zi.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},zi.set(e,s),w||Wm(x,e,s,T.state))),n&&h===null)throw Error(d(528,""));return T}if(n&&h!==null)throw Error(d(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=zs(s),s=Xn(x).hoistableScripts,h=s.get(n),h||(h={type:"script",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Us(e){return'href="'+lt(e)+'"'}function Vl(e){return'link[rel="stylesheet"]['+e+"]"}function C1(e){return I({},e,{"data-precedence":e.precedence,precedence:null})}function Wm(e,n,s,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),Un(n,"link",s),tn(n),e.head.appendChild(n))}function zs(e){return'[src="'+lt(e)+'"]'}function Gl(e){return"script[async]"+e}function T1(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+lt(s.href)+'"]');if(h)return n.instance=h,tn(h),h;var x=I({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),tn(h),Un(h,"style",x),Ec(h,s.precedence,e),n.instance=h;case"stylesheet":x=Us(s.href);var w=e.querySelector(Vl(x));if(w)return n.state.loading|=4,n.instance=w,tn(w),w;h=C1(s),(x=zi.get(x))&&Uh(h,x),w=(e.ownerDocument||e).createElement("link"),tn(w);var T=w;return T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),Un(w,"link",h),n.state.loading|=4,Ec(w,s.precedence,e),n.instance=w;case"script":return w=zs(s.src),(x=e.querySelector(Gl(w)))?(n.instance=x,tn(x),x):(h=s,(x=zi.get(w))&&(h=I({},s),zh(h,x)),e=e.ownerDocument||e,x=e.createElement("script"),tn(x),Un(x,"link",h),e.head.appendChild(x),n.instance=x);case"void":return null;default:throw Error(d(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,Ec(h,s.precedence,e));return n.instance}function Ec(e,n,s){for(var h=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=h.length?h[h.length-1]:null,w=x,T=0;T<h.length;T++){var M=h[T];if(M.dataset.precedence===n)w=M;else if(w!==x)break}w?w.parentNode.insertBefore(e,w.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function Uh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Ac=null;function N1(e,n,s){if(Ac===null){var h=new Map,x=Ac=new Map;x.set(s,h)}else x=Ac,h=x.get(s),h||(h=new Map,x.set(s,h));if(h.has(e))return h;for(h.set(e,null),s=s.getElementsByTagName(e),x=0;x<s.length;x++){var w=s[x];if(!(w[Na]||w[cn]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var T=w.getAttribute(n)||"";T=e+T;var M=h.get(T);M?M.push(w):h.set(T,[w])}}return h}function I1(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function Km(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function O1(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Zm(e,n,s,h){if(s.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var x=Us(h.href),w=n.querySelector(Vl(x));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Sc.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=w,tn(w);return}w=n.ownerDocument||n,h=C1(h),(x=zi.get(x))&&Uh(h,x),w=w.createElement("link"),tn(w);var T=w;T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),Un(w,"link",h),s.instance=w}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Sc.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var Ph=0;function Qm(e,n){return e.stylesheets&&e.count===0&&Cc(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var h=setTimeout(function(){if(e.stylesheets&&Cc(e,e.stylesheets),e.unsuspend){var w=e.unsuspend;e.unsuspend=null,w()}},6e4+n);0<e.imgBytes&&Ph===0&&(Ph=62500*Rm());var x=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Cc(e,e.stylesheets),e.unsuspend)){var w=e.unsuspend;e.unsuspend=null,w()}},(e.imgBytes>Ph?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(h),clearTimeout(x)}}:null}function Sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _c=null;function Cc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_c=new Map,n.forEach(Jm,e),_c=null,Sc.call(e))}function Jm(e,n){if(!(n.state.loading&4)){var s=_c.get(e);if(s)var h=s.get(null);else{s=new Map,_c.set(e,s);for(var x=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<x.length;w++){var T=x[w];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(s.set(T.dataset.precedence,T),h=T)}h&&s.set(null,h)}x=n.instance,T=x.getAttribute("data-precedence"),w=s.get(T)||h,w===h&&s.set(null,x),s.set(T,x),this.count++,h=Sc.bind(this),x.addEventListener("load",h),x.addEventListener("error",h),w?w.parentNode.insertBefore(x,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(x,e.firstChild)),n.state.loading|=4}}var ql={$$typeof:K,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function $m(e,n,s,h,x,w,T,M,P){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=h,this.onUncaughtError=x,this.onCaughtError=w,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function R1(e,n,s,h,x,w,T,M,P,$,de,xe){return e=new $m(e,n,s,T,P,$,de,xe,M),n=1,w===!0&&(n|=24),w=mi(3,null,null,n),e.current=w,w.stateNode=e,n=wu(),n.refCount++,e.pooledCache=n,n.refCount++,w.memoizedState={element:h,isDehydrated:s,cache:n},Au(w),e}function D1(e){return e?(e=ps,e):ps}function M1(e,n,s,h,x,w){x=D1(x),h.context===null?h.context=x:h.pendingContext=x,h=ra(n),h.payload={element:s},w=w===void 0?null:w,w!==null&&(h.callback=w),s=aa(e,h,n),s!==null&&(li(s,e,n),Al(s,e,n))}function B1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Fh(e,n){B1(e,n),(e=e.alternate)&&B1(e,n)}function k1(e){if(e.tag===13||e.tag===31){var n=ja(e,67108864);n!==null&&li(n,e,67108864),Fh(e,67108864)}}function L1(e){if(e.tag===13||e.tag===31){var n=vi();n=On(n);var s=ja(e,n);s!==null&&li(s,e,n),Fh(e,n)}}var Tc=!0;function ep(e,n,s,h){var x=te.T;te.T=null;var w=fe.p;try{fe.p=2,Hh(e,n,s,h)}finally{fe.p=w,te.T=x}}function tp(e,n,s,h){var x=te.T;te.T=null;var w=fe.p;try{fe.p=8,Hh(e,n,s,h)}finally{fe.p=w,te.T=x}}function Hh(e,n,s,h){if(Tc){var x=Vh(h);if(x===null)Nh(e,n,h,Nc,s),U1(e,h);else if(ip(x,e,n,s,h))h.stopPropagation();else if(U1(e,h),n&4&&-1<np.indexOf(e)){for(;x!==null;){var w=_t(x);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var T=$i(w.pendingLanes);if(T!==0){var M=w;for(M.pendingLanes|=2,M.entangledLanes|=2;T;){var P=1<<31-nt(T);M.entanglements[1]|=P,T&=~P}ur(w),(Tt&6)===0&&(uc=Jt()+500,zl(0))}}break;case 31:case 13:M=ja(w,2),M!==null&&li(M,w,2),dc(),Fh(w,2)}if(w=Vh(h),w===null&&Nh(e,n,h,Nc,s),w===x)break;x=w}x!==null&&h.stopPropagation()}else Nh(e,n,h,null,s)}}function Vh(e){return e=ol(e),Gh(e)}var Nc=null;function Gh(e){if(Nc=null,e=en(e),e!==null){var n=g(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=E(n),e!==null)return e;e=null}else if(s===31){if(e=S(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Nc=e,null}function j1(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nl()){case Jn:return 2;case il:return 8;case oi:case Dn:return 32;case rl:return 268435456;default:return 32}default:return 32}}var qh=!1,pa=null,xa=null,ya=null,Yl=new Map,Xl=new Map,wa=[],np="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U1(e,n){switch(e){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":Yl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(n.pointerId)}}function Wl(e,n,s,h,x,w){return e===null||e.nativeEvent!==w?(e={blockedOn:n,domEventName:s,eventSystemFlags:h,nativeEvent:w,targetContainers:[x]},n!==null&&(n=_t(n),n!==null&&k1(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,x!==null&&n.indexOf(x)===-1&&n.push(x),e)}function ip(e,n,s,h,x){switch(n){case"focusin":return pa=Wl(pa,e,n,s,h,x),!0;case"dragenter":return xa=Wl(xa,e,n,s,h,x),!0;case"mouseover":return ya=Wl(ya,e,n,s,h,x),!0;case"pointerover":var w=x.pointerId;return Yl.set(w,Wl(Yl.get(w)||null,e,n,s,h,x)),!0;case"gotpointercapture":return w=x.pointerId,Xl.set(w,Wl(Xl.get(w)||null,e,n,s,h,x)),!0}return!1}function z1(e){var n=en(e.target);if(n!==null){var s=g(n);if(s!==null){if(n=s.tag,n===13){if(n=E(s),n!==null){e.blockedOn=n,Oe(e.priority,function(){L1(s)});return}}else if(n===31){if(n=S(s),n!==null){e.blockedOn=n,Oe(e.priority,function(){L1(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ic(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Vh(e.nativeEvent);if(s===null){s=e.nativeEvent;var h=new s.constructor(s.type,s);Ia=h,s.target.dispatchEvent(h),Ia=null}else return n=_t(s),n!==null&&k1(n),e.blockedOn=s,!1;n.shift()}return!0}function P1(e,n,s){Ic(e)&&s.delete(n)}function rp(){qh=!1,pa!==null&&Ic(pa)&&(pa=null),xa!==null&&Ic(xa)&&(xa=null),ya!==null&&Ic(ya)&&(ya=null),Yl.forEach(P1),Xl.forEach(P1)}function Oc(e,n){e.blockedOn===n&&(e.blockedOn=null,qh||(qh=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,rp)))}var Rc=null;function F1(e){Rc!==e&&(Rc=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Rc===e&&(Rc=null);for(var n=0;n<e.length;n+=3){var s=e[n],h=e[n+1],x=e[n+2];if(typeof h!="function"){if(Gh(h||s)===null)continue;break}var w=_t(s);w!==null&&(e.splice(n,3),n-=3,Vu(w,{pending:!0,data:x,method:s.method,action:h},h,x))}}))}function Ps(e){function n(P){return Oc(P,e)}pa!==null&&Oc(pa,e),xa!==null&&Oc(xa,e),ya!==null&&Oc(ya,e),Yl.forEach(n),Xl.forEach(n);for(var s=0;s<wa.length;s++){var h=wa[s];h.blockedOn===e&&(h.blockedOn=null)}for(;0<wa.length&&(s=wa[0],s.blockedOn===null);)z1(s),s.blockedOn===null&&wa.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(h=0;h<s.length;h+=3){var x=s[h],w=s[h+1],T=x[Rt]||null;if(typeof w=="function")T||F1(s);else if(T){var M=null;if(w&&w.hasAttribute("formAction")){if(x=w,T=w[Rt]||null)M=T.formAction;else if(Gh(x)!==null)continue}else M=T.action;typeof M=="function"?s[h+1]=M:(s.splice(h,3),h-=3),F1(s)}}}function H1(){function e(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(T){return x=T})},focusReset:"manual",scroll:"manual"})}function n(){x!==null&&(x(),x=null),h||setTimeout(s,20)}function s(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,x=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){h=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),x!==null&&(x(),x=null)}}}function Yh(e){this._internalRoot=e}Dc.prototype.render=Yh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(d(409));var s=n.current,h=vi();M1(s,h,e,n,null,null)},Dc.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;M1(e.current,2,null,e,null,null),dc(),n[ci]=null}};function Dc(e){this._internalRoot=e}Dc.prototype.unstable_scheduleHydration=function(e){if(e){var n=qn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<wa.length&&n!==0&&n<wa[s].priority;s++);wa.splice(s,0,e),s===0&&z1(e)}};var V1=r.version;if(V1!=="19.2.4")throw Error(d(527,V1,"19.2.4"));fe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=v(n),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var ap={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Vt=Mc.inject(ap),Se=Mc}catch{}}return Zl.createRoot=function(e,n){if(!p(e))throw Error(d(299));var s=!1,h="",x=Zf,w=Qf,T=Jf;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=R1(e,1,!1,null,null,s,h,null,x,w,T,H1),e[ci]=n.current,Th(e),new Yh(n)},Zl.hydrateRoot=function(e,n,s){if(!p(e))throw Error(d(299));var h=!1,x="",w=Zf,T=Qf,M=Jf,P=null;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(x=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(M=s.onRecoverableError),s.formState!==void 0&&(P=s.formState)),n=R1(e,1,!0,n,s??null,h,x,P,w,T,M,H1),n.context=D1(null),s=n.current,h=vi(),h=On(h),x=ra(h),x.callback=null,aa(s,x,h),s=h,n.current.lanes=s,tr(n,s),ur(n),e[ci]=n.current,Th(e),new Dc(n)},Zl.version="19.2.4",Zl}var $1;function pp(){if($1)return Kh.exports;$1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Kh.exports=mp(),Kh.exports}var xp=pp();function Xc(o,r){var l={};for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&r.indexOf(d)<0&&(l[d]=o[d]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,d=Object.getOwnPropertySymbols(o);p<d.length;p++)r.indexOf(d[p])<0&&Object.prototype.propertyIsEnumerable.call(o,d[p])&&(l[d[p]]=o[d[p]]);return l}function yp(o,r,l,d){function p(g){return g instanceof l?g:new l(function(E){E(g)})}return new(l||(l=Promise))(function(g,E){function S(N){try{v(d.next(N))}catch(I){E(I)}}function _(N){try{v(d.throw(N))}catch(I){E(I)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((d=d.apply(o,r||[])).next())})}const wp=o=>o?(...r)=>o(...r):(...r)=>fetch(...r);class Rd extends Error{constructor(r,l="FunctionsError",d){super(r),this.name=l,this.context=d}}class vp extends Rd{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class eg extends Rd{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class tg extends Rd{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var yd;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(yd||(yd={}));class bp{constructor(r,{headers:l={},customFetch:d,region:p=yd.Any}={}){this.url=r,this.headers=l,this.region=p,this.fetch=wp(d)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return yp(this,arguments,void 0,function*(l,d={}){var p;let g,E;try{const{headers:S,method:_,body:v,signal:N,timeout:I}=d;let B={},{region:L}=d;L||(L=this.region);const U=new URL(`${this.url}/${l}`);L&&L!=="any"&&(B["x-region"]=L,U.searchParams.set("forceFunctionRegion",L));let z;v&&(S&&!Object.prototype.hasOwnProperty.call(S,"Content-Type")||!S)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(B["Content-Type"]="application/octet-stream",z=v):typeof v=="string"?(B["Content-Type"]="text/plain",z=v):typeof FormData<"u"&&v instanceof FormData?z=v:(B["Content-Type"]="application/json",z=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?z=JSON.stringify(v):z=v;let Y=N;I&&(E=new AbortController,g=setTimeout(()=>E.abort(),I),N?(Y=E.signal,N.addEventListener("abort",()=>E.abort())):Y=E.signal);const ee=yield this.fetch(U.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},B),this.headers),S),body:z,signal:Y}).catch(Ie=>{throw new vp(Ie)}),ie=ee.headers.get("x-relay-error");if(ie&&ie==="true")throw new eg(ee);if(!ee.ok)throw new tg(ee);let K=((p=ee.headers.get("Content-Type"))!==null&&p!==void 0?p:"text/plain").split(";")[0].trim(),ce;return K==="application/json"?ce=yield ee.json():K==="application/octet-stream"||K==="application/pdf"?ce=yield ee.blob():K==="text/event-stream"?ce=ee:K==="multipart/form-data"?ce=yield ee.formData():ce=yield ee.text(),{data:ce,error:null,response:ee}}catch(S){return{data:null,error:S,response:S instanceof tg||S instanceof eg?S.context:void 0}}finally{g&&clearTimeout(g)}})}}var Ep=class extends Error{constructor(o){super(o.message),this.name="PostgrestError",this.details=o.details,this.hint=o.hint,this.code=o.code}},Ap=class{constructor(o){var r,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(r=o.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,r){return this.headers=new Headers(this.headers),this.headers.set(o,r),this}then(o,r){var l=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let p=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{let E=null,S=null,_=null,v=g.status,N=g.statusText;if(g.ok){var I,B;if(l.method!=="HEAD"){var L;const ee=await g.text();ee===""||(l.headers.get("Accept")==="text/csv"||l.headers.get("Accept")&&(!((L=l.headers.get("Accept"))===null||L===void 0)&&L.includes("application/vnd.pgrst.plan+text"))?S=ee:S=JSON.parse(ee))}const z=(I=l.headers.get("Prefer"))===null||I===void 0?void 0:I.match(/count=(exact|planned|estimated)/),Y=(B=g.headers.get("content-range"))===null||B===void 0?void 0:B.split("/");z&&Y&&Y.length>1&&(_=parseInt(Y[1])),l.isMaybeSingle&&l.method==="GET"&&Array.isArray(S)&&(S.length>1?(E={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,v=406,N="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{var U;const z=await g.text();try{E=JSON.parse(z),Array.isArray(E)&&g.status===404&&(S=[],E=null,v=200,N="OK")}catch{g.status===404&&z===""?(v=204,N="No Content"):E={message:z}}if(E&&l.isMaybeSingle&&(!(E==null||(U=E.details)===null||U===void 0)&&U.includes("0 rows"))&&(E=null,v=200,N="OK"),E&&l.shouldThrowOnError)throw new Ep(E)}return{error:E,data:S,count:_,status:v,statusText:N}});return this.shouldThrowOnError||(p=p.catch(g=>{var E;let S="";const _=g?.cause;if(_){var v,N,I,B;const U=(v=_?.message)!==null&&v!==void 0?v:"",z=(N=_?.code)!==null&&N!==void 0?N:"";S=`${(I=g?.name)!==null&&I!==void 0?I:"FetchError"}: ${g?.message}`,S+=`

Caused by: ${(B=_?.name)!==null&&B!==void 0?B:"Error"}: ${U}`,z&&(S+=` (${z})`),_?.stack&&(S+=`
${_.stack}`)}else{var L;S=(L=g?.stack)!==null&&L!==void 0?L:""}return{error:{message:`${(E=g?.name)!==null&&E!==void 0?E:"FetchError"}: ${g?.message}`,details:S,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(o,r)}returns(){return this}overrideTypes(){return this}},Sp=class extends Ap{select(o){let r=!1;const l=(o??"*").split("").map(d=>/\s/.test(d)&&!r?"":(d==='"'&&(r=!r),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:r=!0,nullsFirst:l,foreignTable:d,referencedTable:p=d}={}){const g=p?`${p}.order`:"order",E=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${E?`${E},`:""}${o}.${r?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:r,referencedTable:l=r}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,r,{foreignTable:l,referencedTable:d=l}={}){const p=typeof d>"u"?"offset":`${d}.offset`,g=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(g,`${r-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:r=!1,settings:l=!1,buffers:d=!1,wal:p=!1,format:g="text"}={}){var E;const S=[o?"analyze":null,r?"verbose":null,l?"settings":null,d?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(E=this.headers.get("Accept"))!==null&&E!==void 0?E:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${_}"; options=${S};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};const ng=new RegExp("[,()]");var Ws=class extends Sp{eq(o,r){return this.url.searchParams.append(o,`eq.${r}`),this}neq(o,r){return this.url.searchParams.append(o,`neq.${r}`),this}gt(o,r){return this.url.searchParams.append(o,`gt.${r}`),this}gte(o,r){return this.url.searchParams.append(o,`gte.${r}`),this}lt(o,r){return this.url.searchParams.append(o,`lt.${r}`),this}lte(o,r){return this.url.searchParams.append(o,`lte.${r}`),this}like(o,r){return this.url.searchParams.append(o,`like.${r}`),this}likeAllOf(o,r){return this.url.searchParams.append(o,`like(all).{${r.join(",")}}`),this}likeAnyOf(o,r){return this.url.searchParams.append(o,`like(any).{${r.join(",")}}`),this}ilike(o,r){return this.url.searchParams.append(o,`ilike.${r}`),this}ilikeAllOf(o,r){return this.url.searchParams.append(o,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(o,r){return this.url.searchParams.append(o,`ilike(any).{${r.join(",")}}`),this}regexMatch(o,r){return this.url.searchParams.append(o,`match.${r}`),this}regexIMatch(o,r){return this.url.searchParams.append(o,`imatch.${r}`),this}is(o,r){return this.url.searchParams.append(o,`is.${r}`),this}isDistinct(o,r){return this.url.searchParams.append(o,`isdistinct.${r}`),this}in(o,r){const l=Array.from(new Set(r)).map(d=>typeof d=="string"&&ng.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}notIn(o,r){const l=Array.from(new Set(r)).map(d=>typeof d=="string"&&ng.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`not.in.(${l})`),this}contains(o,r){return typeof r=="string"?this.url.searchParams.append(o,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(o,`cs.{${r.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(r)}`),this}containedBy(o,r){return typeof r=="string"?this.url.searchParams.append(o,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(o,`cd.{${r.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(r)}`),this}rangeGt(o,r){return this.url.searchParams.append(o,`sr.${r}`),this}rangeGte(o,r){return this.url.searchParams.append(o,`nxl.${r}`),this}rangeLt(o,r){return this.url.searchParams.append(o,`sl.${r}`),this}rangeLte(o,r){return this.url.searchParams.append(o,`nxr.${r}`),this}rangeAdjacent(o,r){return this.url.searchParams.append(o,`adj.${r}`),this}overlaps(o,r){return typeof r=="string"?this.url.searchParams.append(o,`ov.${r}`):this.url.searchParams.append(o,`ov.{${r.join(",")}}`),this}textSearch(o,r,{config:l,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const g=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${p}fts${g}.${r}`),this}match(o){return Object.entries(o).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(o,r,l){return this.url.searchParams.append(o,`not.${r}.${l}`),this}or(o,{foreignTable:r,referencedTable:l=r}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,r,l){return this.url.searchParams.append(o,`${r}.${l}`),this}},_p=class{constructor(o,{headers:r={},schema:l,fetch:d}){this.url=o,this.headers=new Headers(r),this.schema=l,this.fetch=d}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(o,r){const{head:l=!1,count:d}=r??{},p=l?"HEAD":"GET";let g=!1;const E=(o??"*").split("").map(v=>/\s/.test(v)&&!g?"":(v==='"'&&(g=!g),v)).join(""),{url:S,headers:_}=this.cloneRequestState();return S.searchParams.set("select",E),d&&_.append("Prefer",`count=${d}`),new Ws({method:p,url:S,headers:_,schema:this.schema,fetch:this.fetch})}insert(o,{count:r,defaultToNull:l=!0}={}){var d;const p="POST",{url:g,headers:E}=this.cloneRequestState();if(r&&E.append("Prefer",`count=${r}`),l||E.append("Prefer","missing=default"),Array.isArray(o)){const S=o.reduce((_,v)=>_.concat(Object.keys(v)),[]);if(S.length>0){const _=[...new Set(S)].map(v=>`"${v}"`);g.searchParams.set("columns",_.join(","))}}return new Ws({method:p,url:g,headers:E,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:r,ignoreDuplicates:l=!1,count:d,defaultToNull:p=!0}={}){var g;const E="POST",{url:S,headers:_}=this.cloneRequestState();if(_.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),r!==void 0&&S.searchParams.set("on_conflict",r),d&&_.append("Prefer",`count=${d}`),p||_.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((N,I)=>N.concat(Object.keys(I)),[]);if(v.length>0){const N=[...new Set(v)].map(I=>`"${I}"`);S.searchParams.set("columns",N.join(","))}}return new Ws({method:E,url:S,headers:_,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:r}={}){var l;const d="PATCH",{url:p,headers:g}=this.cloneRequestState();return r&&g.append("Prefer",`count=${r}`),new Ws({method:d,url:p,headers:g,schema:this.schema,body:o,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:o}={}){var r;const l="DELETE",{url:d,headers:p}=this.cloneRequestState();return o&&p.append("Prefer",`count=${o}`),new Ws({method:l,url:d,headers:p,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},Cp=class s2{constructor(r,{headers:l={},schema:d,fetch:p}={}){this.url=r,this.headers=new Headers(l),this.schemaName=d,this.fetch=p}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _p(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new s2(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,l={},{head:d=!1,get:p=!1,count:g}={}){var E;let S;const _=new URL(`${this.url}/rpc/${r}`);let v;const N=L=>L!==null&&typeof L=="object"&&(!Array.isArray(L)||L.some(N)),I=d&&Object.values(l).some(N);I?(S="POST",v=l):d||p?(S=d?"HEAD":"GET",Object.entries(l).filter(([L,U])=>U!==void 0).map(([L,U])=>[L,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([L,U])=>{_.searchParams.append(L,U)})):(S="POST",v=l);const B=new Headers(this.headers);return I?B.set("Prefer",g?`count=${g},return=minimal`:"return=minimal"):g&&B.set("Prefer",`count=${g}`),new Ws({method:S,url:_,headers:B,schema:this.schemaName,body:v,fetch:(E=this.fetch)!==null&&E!==void 0?E:fetch})}};class Tp{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const l=globalThis.process;if(l){const d=l.versions;if(d&&d.node){const p=d.node,g=parseInt(p.replace(/^v/,"").split(".")[0]);return g>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${g} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${g} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let l=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(l+=`

Suggested solution: ${r.workaround}`),new Error(l)}static createWebSocket(r,l){const d=this.getWebSocketConstructor();return new d(r,l)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Np="2.93.3",Ip=`realtime-js/${Np}`,Op="1.0.0",l2="2.0.0",ig=l2,wd=1e4,Rp=1e3,Dp=100;var Ea;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Ea||(Ea={}));var Nn;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Nn||(Nn={}));var Qi;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Qi||(Qi={}));var vd;(function(o){o.websocket="websocket"})(vd||(vd={}));var $a;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})($a||($a={}));class Mp{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,l){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return l(this._binaryEncodeUserBroadcastPush(r));let d=[r.join_ref,r.ref,r.topic,r.event,r.payload];return l(JSON.stringify(d))}_binaryEncodeUserBroadcastPush(r){var l;return this._isArrayBuffer((l=r.payload)===null||l===void 0?void 0:l.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var l,d;const p=(d=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&d!==void 0?d:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,p)}_encodeJsonUserBroadcastPush(r){var l,d;const p=(d=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&d!==void 0?d:{},E=new TextEncoder().encode(JSON.stringify(p)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,E)}_encodeUserBroadcastPush(r,l,d){var p,g;const E=r.topic,S=(p=r.ref)!==null&&p!==void 0?p:"",_=(g=r.join_ref)!==null&&g!==void 0?g:"",v=r.payload.event,N=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},I=Object.keys(N).length===0?"":JSON.stringify(N);if(_.length>255)throw new Error(`joinRef length ${_.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`ref length ${S.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`topic length ${E.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(I.length>255)throw new Error(`metadata length ${I.length} exceeds maximum of 255`);const B=this.USER_BROADCAST_PUSH_META_LENGTH+_.length+S.length+E.length+v.length+I.length,L=new ArrayBuffer(this.HEADER_LENGTH+B);let U=new DataView(L),z=0;U.setUint8(z++,this.KINDS.userBroadcastPush),U.setUint8(z++,_.length),U.setUint8(z++,S.length),U.setUint8(z++,E.length),U.setUint8(z++,v.length),U.setUint8(z++,I.length),U.setUint8(z++,l),Array.from(_,ee=>U.setUint8(z++,ee.charCodeAt(0))),Array.from(S,ee=>U.setUint8(z++,ee.charCodeAt(0))),Array.from(E,ee=>U.setUint8(z++,ee.charCodeAt(0))),Array.from(v,ee=>U.setUint8(z++,ee.charCodeAt(0))),Array.from(I,ee=>U.setUint8(z++,ee.charCodeAt(0)));var Y=new Uint8Array(L.byteLength+d.byteLength);return Y.set(new Uint8Array(L),0),Y.set(new Uint8Array(d),L.byteLength),Y.buffer}decode(r,l){if(this._isArrayBuffer(r)){let d=this._binaryDecode(r);return l(d)}if(typeof r=="string"){const d=JSON.parse(r),[p,g,E,S,_]=d;return l({join_ref:p,ref:g,topic:E,event:S,payload:_})}return l({})}_binaryDecode(r){const l=new DataView(r),d=l.getUint8(0),p=new TextDecoder;if(d===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,l,p)}_decodeUserBroadcast(r,l,d){const p=l.getUint8(1),g=l.getUint8(2),E=l.getUint8(3),S=l.getUint8(4);let _=this.HEADER_LENGTH+4;const v=d.decode(r.slice(_,_+p));_=_+p;const N=d.decode(r.slice(_,_+g));_=_+g;const I=d.decode(r.slice(_,_+E));_=_+E;const B=r.slice(_,r.byteLength),L=S===this.JSON_ENCODING?JSON.parse(d.decode(B)):B,U={type:this.BROADCAST_EVENT,event:N,payload:L};return E>0&&(U.meta=JSON.parse(I)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:U}}_isArrayBuffer(r){var l;return r instanceof ArrayBuffer||((l=r?.constructor)===null||l===void 0?void 0:l.name)==="ArrayBuffer"}_pick(r,l){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([d])=>l.includes(d)))}}class o2{constructor(r,l){this.callback=r,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gt;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Gt||(Gt={}));const rg=(o,r,l={})=>{var d;const p=(d=l.skipTypes)!==null&&d!==void 0?d:[];return r?Object.keys(r).reduce((g,E)=>(g[E]=Bp(E,o,r,p),g),{}):{}},Bp=(o,r,l,d)=>{const p=r.find(S=>S.name===o),g=p?.type,E=l[o];return g&&!d.includes(g)?c2(g,E):bd(E)},c2=(o,r)=>{if(o.charAt(0)==="_"){const l=o.slice(1,o.length);return Up(r,l)}switch(o){case Gt.bool:return kp(r);case Gt.float4:case Gt.float8:case Gt.int2:case Gt.int4:case Gt.int8:case Gt.numeric:case Gt.oid:return Lp(r);case Gt.json:case Gt.jsonb:return jp(r);case Gt.timestamp:return zp(r);case Gt.abstime:case Gt.date:case Gt.daterange:case Gt.int4range:case Gt.int8range:case Gt.money:case Gt.reltime:case Gt.text:case Gt.time:case Gt.timestamptz:case Gt.timetz:case Gt.tsrange:case Gt.tstzrange:return bd(r);default:return bd(r)}},bd=o=>o,kp=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Lp=o=>{if(typeof o=="string"){const r=parseFloat(o);if(!Number.isNaN(r))return r}return o},jp=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch{return o}return o},Up=(o,r)=>{if(typeof o!="string")return o;const l=o.length-1,d=o[l];if(o[0]==="{"&&d==="}"){let g;const E=o.slice(1,l);try{g=JSON.parse("["+E+"]")}catch{g=E?E.split(","):[]}return g.map(S=>c2(r,S))}return o},zp=o=>typeof o=="string"?o.replace(" ","T"):o,u2=o=>{const r=new URL(o);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class $h{constructor(r,l,d={},p=wd){this.channel=r,this.event=l,this.payload=d,this.timeout=p,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,l){var d;return this._hasReceived(r)&&l((d=this.receivedResp)===null||d===void 0?void 0:d.response),this.recHooks.push({status:r,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:l}){this.recHooks.filter(d=>d.status===r).forEach(d=>d.callback(l))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var ag;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(ag||(ag={}));class to{constructor(r,l){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const d=l?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(d.state,{},p=>{const{onJoin:g,onLeave:E,onSync:S}=this.caller;this.joinRef=this.channel._joinRef(),this.state=to.syncState(this.state,p,g,E),this.pendingDiffs.forEach(_=>{this.state=to.syncDiff(this.state,_,g,E)}),this.pendingDiffs=[],S()}),this.channel._on(d.diff,{},p=>{const{onJoin:g,onLeave:E,onSync:S}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(p):(this.state=to.syncDiff(this.state,p,g,E),S())}),this.onJoin((p,g,E)=>{this.channel._trigger("presence",{event:"join",key:p,currentPresences:g,newPresences:E})}),this.onLeave((p,g,E)=>{this.channel._trigger("presence",{event:"leave",key:p,currentPresences:g,leftPresences:E})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,l,d,p){const g=this.cloneDeep(r),E=this.transformState(l),S={},_={};return this.map(g,(v,N)=>{E[v]||(_[v]=N)}),this.map(E,(v,N)=>{const I=g[v];if(I){const B=N.map(Y=>Y.presence_ref),L=I.map(Y=>Y.presence_ref),U=N.filter(Y=>L.indexOf(Y.presence_ref)<0),z=I.filter(Y=>B.indexOf(Y.presence_ref)<0);U.length>0&&(S[v]=U),z.length>0&&(_[v]=z)}else S[v]=N}),this.syncDiff(g,{joins:S,leaves:_},d,p)}static syncDiff(r,l,d,p){const{joins:g,leaves:E}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return d||(d=()=>{}),p||(p=()=>{}),this.map(g,(S,_)=>{var v;const N=(v=r[S])!==null&&v!==void 0?v:[];if(r[S]=this.cloneDeep(_),N.length>0){const I=r[S].map(L=>L.presence_ref),B=N.filter(L=>I.indexOf(L.presence_ref)<0);r[S].unshift(...B)}d(S,N,_)}),this.map(E,(S,_)=>{let v=r[S];if(!v)return;const N=_.map(I=>I.presence_ref);v=v.filter(I=>N.indexOf(I.presence_ref)<0),r[S]=v,p(S,v,_),v.length===0&&delete r[S]}),r}static map(r,l){return Object.getOwnPropertyNames(r).map(d=>l(d,r[d]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((l,d)=>{const p=r[d];return"metas"in p?l[d]=p.metas.map(g=>(g.presence_ref=g.phx_ref,delete g.phx_ref,delete g.phx_ref_prev,g)):l[d]=p,l},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sg;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(sg||(sg={}));var no;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(no||(no={}));var kr;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(kr||(kr={}));class Qs{constructor(r,l={config:{}},d){var p,g;if(this.topic=r,this.params=l,this.socket=d,this.bindings={},this.state=Nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new $h(this,Qi.join,this.params,this.timeout),this.rejoinTimer=new o2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(E=>E.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nn.closed,this.socket._remove(this)}),this._onError(E=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,E),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",E=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,E),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qi.reply,{},(E,S)=>{this._trigger(this._replyEventName(S),E)}),this.presence=new to(this),this.broadcastEndpointURL=u2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((g=(p=this.params.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,l=this.timeout){var d,p,g;if(this.socket.isConnected()||this.socket.connect(),this.state==Nn.closed){const{config:{broadcast:E,presence:S,private:_}}=this.params,v=(p=(d=this.bindings.postgres_changes)===null||d===void 0?void 0:d.map(L=>L.filter))!==null&&p!==void 0?p:[],N=!!this.bindings[no.PRESENCE]&&this.bindings[no.PRESENCE].length>0||((g=this.params.config.presence)===null||g===void 0?void 0:g.enabled)===!0,I={},B={broadcast:E,presence:Object.assign(Object.assign({},S),{enabled:N}),postgres_changes:v,private:_};this.socket.accessTokenValue&&(I.access_token=this.socket.accessTokenValue),this._onError(L=>r?.(kr.CHANNEL_ERROR,L)),this._onClose(()=>r?.(kr.CLOSED)),this.updateJoinPayload(Object.assign({config:B},I)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:L})=>{var U;if(this.socket._isManualToken()||this.socket.setAuth(),L===void 0){r?.(kr.SUBSCRIBED);return}else{const z=this.bindings.postgres_changes,Y=(U=z?.length)!==null&&U!==void 0?U:0,ee=[];for(let ie=0;ie<Y;ie++){const K=z[ie],{filter:{event:ce,schema:Ie,table:be,filter:W}}=K,he=L&&L[ie];if(he&&he.event===ce&&Qs.isFilterValueEqual(he.schema,Ie)&&Qs.isFilterValueEqual(he.table,be)&&Qs.isFilterValueEqual(he.filter,W))ee.push(Object.assign(Object.assign({},K),{id:he.id}));else{this.unsubscribe(),this.state=Nn.errored,r?.(kr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ee,r&&r(kr.SUBSCRIBED);return}}).receive("error",L=>{this.state=Nn.errored,r?.(kr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(L).join(", ")||"error")))}).receive("timeout",()=>{r?.(kr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,l={}){return await this.send({type:"presence",event:"track",payload:r},l.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,l,d){return this.state===Nn.joined&&r===no.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,l,d)}async httpSend(r,l,d={}){var p;if(l==null)return Promise.reject("Payload is required for httpSend()");const g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const E={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:l,private:this.private}]})},S=await this._fetchWithTimeout(this.broadcastEndpointURL,E,(p=d.timeout)!==null&&p!==void 0?p:this.timeout);if(S.status===202)return{success:!0};let _=S.statusText;try{const v=await S.json();_=v.error||v.message||_}catch{}return Promise.reject(new Error(_))}async send(r,l={}){var d,p;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:g,payload:E}=r,S={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(S.Authorization=`Bearer ${this.socket.accessTokenValue}`);const _={method:"POST",headers:S,body:JSON.stringify({messages:[{topic:this.subTopic,event:g,payload:E,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);return await((p=v.body)===null||p===void 0?void 0:p.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(g=>{var E,S,_;const v=this._push(r.type,r,l.timeout||this.timeout);r.type==="broadcast"&&!(!((_=(S=(E=this.params)===null||E===void 0?void 0:E.config)===null||S===void 0?void 0:S.broadcast)===null||_===void 0)&&_.ack)&&g("ok"),v.receive("ok",()=>g("ok")),v.receive("error",()=>g("error")),v.receive("timeout",()=>g("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Nn.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qi.close,"leave",this._joinRef())};this.joinPush.destroy();let d=null;return new Promise(p=>{d=new $h(this,Qi.leave,{},r),d.receive("ok",()=>{l(),p("ok")}).receive("timeout",()=>{l(),p("timed out")}).receive("error",()=>{p("error")}),d.send(),this._canPush()||d.trigger("ok",{})}).finally(()=>{d?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nn.closed,this.bindings={}}async _fetchWithTimeout(r,l,d){const p=new AbortController,g=setTimeout(()=>p.abort(),d),E=await this.socket.fetch(r,Object.assign(Object.assign({},l),{signal:p.signal}));return clearTimeout(g),E}_push(r,l,d=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let p=new $h(this,r,l,d);return this._canPush()?p.send():this._addToPushBuffer(p),p}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Dp){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(r,l,d){return l}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,l,d){var p,g;const E=r.toLocaleLowerCase(),{close:S,error:_,leave:v,join:N}=Qi;if(d&&[S,_,v,N].indexOf(E)>=0&&d!==this._joinRef())return;let B=this._onMessage(E,l,d);if(l&&!B)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(E)?(p=this.bindings.postgres_changes)===null||p===void 0||p.filter(L=>{var U,z,Y;return((U=L.filter)===null||U===void 0?void 0:U.event)==="*"||((Y=(z=L.filter)===null||z===void 0?void 0:z.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())===E}).map(L=>L.callback(B,d)):(g=this.bindings[E])===null||g===void 0||g.filter(L=>{var U,z,Y,ee,ie,K;if(["broadcast","presence","postgres_changes"].includes(E))if("id"in L){const ce=L.id,Ie=(U=L.filter)===null||U===void 0?void 0:U.event;return ce&&((z=l.ids)===null||z===void 0?void 0:z.includes(ce))&&(Ie==="*"||Ie?.toLocaleLowerCase()===((Y=l.data)===null||Y===void 0?void 0:Y.type.toLocaleLowerCase()))}else{const ce=(ie=(ee=L?.filter)===null||ee===void 0?void 0:ee.event)===null||ie===void 0?void 0:ie.toLocaleLowerCase();return ce==="*"||ce===((K=l?.event)===null||K===void 0?void 0:K.toLocaleLowerCase())}else return L.type.toLocaleLowerCase()===E}).map(L=>{if(typeof B=="object"&&"ids"in B){const U=B.data,{schema:z,table:Y,commit_timestamp:ee,type:ie,errors:K}=U;B=Object.assign(Object.assign({},{schema:z,table:Y,commit_timestamp:ee,eventType:ie,new:{},old:{},errors:K}),this._getPayloadRecords(U))}L.callback(B,d)})}_isClosed(){return this.state===Nn.closed}_isJoined(){return this.state===Nn.joined}_isJoining(){return this.state===Nn.joining}_isLeaving(){return this.state===Nn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,l,d){const p=r.toLocaleLowerCase(),g={type:p,filter:l,callback:d};return this.bindings[p]?this.bindings[p].push(g):this.bindings[p]=[g],this}_off(r,l){const d=r.toLocaleLowerCase();return this.bindings[d]&&(this.bindings[d]=this.bindings[d].filter(p=>{var g;return!(((g=p.type)===null||g===void 0?void 0:g.toLocaleLowerCase())===d&&Qs.isEqual(p.filter,l))})),this}static isEqual(r,l){if(Object.keys(r).length!==Object.keys(l).length)return!1;for(const d in r)if(r[d]!==l[d])return!1;return!0}static isFilterValueEqual(r,l){return(r??void 0)===(l??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Qi.close,{},r)}_onError(r){this._on(Qi.error,{},l=>r(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const l={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(l.new=rg(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(l.old=rg(r.columns,r.old_record)),l}}const ed=()=>{},kc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Pp=[1e3,2e3,5e3,1e4],Fp=1e4,Hp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vp{constructor(r,l){var d;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wd,this.transport=null,this.heartbeatIntervalMs=kc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ed,this.ref=0,this.reconnectTimer=null,this.vsn=ig,this.logger=ed,this.conn=null,this.sendBuffer=[],this.serializer=new Mp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=p=>p?(...g)=>p(...g):(...g)=>fetch(...g),!(!((d=l?.params)===null||d===void 0)&&d.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${r}/${vd.websocket}`,this.httpEndpoint=u2(r),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Tp.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const l=r.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const d=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(d),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,l??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const l=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const r=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,l,d){this.logger(r,l,d)}connectionState(){switch(this.conn&&this.conn.readyState){case Ea.connecting:return $a.Connecting;case Ea.open:return $a.Open;case Ea.closing:return $a.Closing;default:return $a.Closed}}isConnected(){return this.connectionState()===$a.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,l={config:{}}){const d=`realtime:${r}`,p=this.getChannels().find(g=>g.topic===d);if(p)return p;{const g=new Qs(`realtime:${r}`,l,this);return this.channels.push(g),g}}push(r){const{topic:l,event:d,payload:p,ref:g}=r,E=()=>{this.encode(r,S=>{var _;(_=this.conn)===null||_===void 0||_.send(S)})};this.log("push",`${l} ${d} (${g})`,p),this.isConnected()?E():this.sendBuffer.push(E)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Rp,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},kc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let l=this.channels.find(d=>d.topic===r&&(d._isJoined()||d._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${r}"`),l.unsubscribe())}_remove(r){this.channels=this.channels.filter(l=>l.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply"&&l.ref&&l.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error",v)}catch(N){this.log("error","error in heartbeat callback",N)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:d,event:p,payload:g,ref:E}=l,S=E?`(${E})`:"",_=g.status||"";this.log("receive",`${_} ${d} ${p} ${S}`.trim(),g),this.channels.filter(v=>v._isMember(d)).forEach(v=>v._trigger(p,g,E)),this._triggerStateCallbacks("message",l)})}_clearTimer(r){var l;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===Ea.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ea.open||this.conn.readyState===Ea.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(l=>{this.log("error","error waiting for auth on connect",l),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this._terminateWorker()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var l;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r);try{this.heartbeatCallback("error")}catch(l){this.log("error","error in heartbeat callback",l)}}_triggerChanError(){this.channels.forEach(r=>r._trigger(Qi.error))}_appendParams(r,l){if(Object.keys(l).length===0)return r;const d=r.match(/\?/)?"&":"?",p=new URLSearchParams(l);return`${r}${d}${p}`}_workerObjectUrl(r){let l;if(r)l=r;else{const d=new Blob([Hp],{type:"application/javascript"});l=URL.createObjectURL(d)}return l}_setConnectionState(r,l=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(r=null){let l,d=!1;if(r)l=r,d=!0;else if(this.accessToken)try{l=await this.accessToken()}catch(p){this.log("error","Error fetching access token from callback",p),l=this.accessTokenValue}else l=this.accessTokenValue;d?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(p=>{const g={access_token:l,version:Ip};l&&p.updateJoinPayload(g),p.joinedOnce&&p._isJoined()&&p._push(Qi.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(l=>{this.log("error",`Error setting auth in ${r}`,l)})}_triggerStateCallbacks(r,l){try{this.stateChangeCallbacks[r].forEach(d=>{try{d(l)}catch(p){this.log("error",`error in ${r} callback`,p)}})}catch(d){this.log("error",`error triggering ${r} callbacks`,d)}}_setupReconnectionTimer(){this.reconnectTimer=new o2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var l,d,p,g,E,S,_,v,N,I,B,L;switch(this.transport=(l=r?.transport)!==null&&l!==void 0?l:null,this.timeout=(d=r?.timeout)!==null&&d!==void 0?d:wd,this.heartbeatIntervalMs=(p=r?.heartbeatIntervalMs)!==null&&p!==void 0?p:kc.HEARTBEAT_INTERVAL,this.worker=(g=r?.worker)!==null&&g!==void 0?g:!1,this.accessToken=(E=r?.accessToken)!==null&&E!==void 0?E:null,this.heartbeatCallback=(S=r?.heartbeatCallback)!==null&&S!==void 0?S:ed,this.vsn=(_=r?.vsn)!==null&&_!==void 0?_:ig,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=r?.reconnectAfterMs)!==null&&v!==void 0?v:(U=>Pp[U-1]||Fp),this.vsn){case Op:this.encode=(N=r?.encode)!==null&&N!==void 0?N:((U,z)=>z(JSON.stringify(U))),this.decode=(I=r?.decode)!==null&&I!==void 0?I:((U,z)=>z(JSON.parse(U)));break;case l2:this.encode=(B=r?.encode)!==null&&B!==void 0?B:this.serializer.encode.bind(this.serializer),this.decode=(L=r?.decode)!==null&&L!==void 0?L:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var io=class extends Error{constructor(o,r){super(o),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Gp(o,r,l){const d=new URL(r,o);if(l)for(const[p,g]of Object.entries(l))g!==void 0&&d.searchParams.set(p,g);return d.toString()}async function qp(o){return!o||o.type==="none"?{}:o.type==="bearer"?{Authorization:`Bearer ${o.token}`}:o.type==="header"?{[o.name]:o.value}:o.type==="custom"?await o.getHeaders():{}}function Yp(o){const r=o.fetchImpl??globalThis.fetch;return{async request({method:l,path:d,query:p,body:g,headers:E}){const S=Gp(o.baseUrl,d,p),_=await qp(o.auth),v=await r(S,{method:l,headers:{...g?{"Content-Type":"application/json"}:{},..._,...E},body:g?JSON.stringify(g):void 0}),N=await v.text(),I=(v.headers.get("content-type")||"").includes("application/json"),B=I&&N?JSON.parse(N):N;if(!v.ok){const L=I?B:void 0,U=L?.error;throw new io(U?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:U?.type,icebergCode:U?.code,details:L})}return{status:v.status,headers:v.headers,data:B}}}}function Lc(o){return o.join("")}var Xp=class{constructor(o,r=""){this.client=o,this.prefix=r}async listNamespaces(o){const r=o?{parent:Lc(o.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(d=>({namespace:d}))}async createNamespace(o,r){const l={namespace:o.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:l})).data}async dropNamespace(o){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lc(o.namespace)}`})}async loadNamespaceMetadata(o){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lc(o.namespace)}`})).data.properties}}async namespaceExists(o){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lc(o.namespace)}`}),!0}catch(r){if(r instanceof io&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(o,r){try{return await this.createNamespace(o,r)}catch(l){if(l instanceof io&&l.status===409)return;throw l}}};function Fs(o){return o.join("")}var Wp=class{constructor(o,r="",l){this.client=o,this.prefix=r,this.accessDelegation=l}async listTables(o){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables`})).data.identifiers}async createTable(o,r){const l={};return this.accessDelegation&&(l["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables`,body:r,headers:l})).data.metadata}async updateTable(o,r){const l=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,body:r});return{"metadata-location":l.data["metadata-location"],metadata:l.data.metadata}}async dropTable(o,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(o){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,headers:r})).data.metadata}async tableExists(o){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,headers:r}),!0}catch(l){if(l instanceof io&&l.status===404)return!1;throw l}}async createTableIfNotExists(o,r){try{return await this.createTable(o,r)}catch(l){if(l instanceof io&&l.status===409)return await this.loadTable({namespace:o.namespace,name:r.name});throw l}}},Kp=class{constructor(o){let r="v1";o.catalogName&&(r+=`/${o.catalogName}`);const l=o.baseUrl.endsWith("/")?o.baseUrl:`${o.baseUrl}/`;this.client=Yp({baseUrl:l,auth:o.auth,fetchImpl:o.fetch}),this.accessDelegation=o.accessDelegation?.join(","),this.namespaceOps=new Xp(this.client,r),this.tableOps=new Wp(this.client,r,this.accessDelegation)}async listNamespaces(o){return this.namespaceOps.listNamespaces(o)}async createNamespace(o,r){return this.namespaceOps.createNamespace(o,r)}async dropNamespace(o){await this.namespaceOps.dropNamespace(o)}async loadNamespaceMetadata(o){return this.namespaceOps.loadNamespaceMetadata(o)}async listTables(o){return this.tableOps.listTables(o)}async createTable(o,r){return this.tableOps.createTable(o,r)}async updateTable(o,r){return this.tableOps.updateTable(o,r)}async dropTable(o,r){await this.tableOps.dropTable(o,r)}async loadTable(o){return this.tableOps.loadTable(o)}async namespaceExists(o){return this.namespaceOps.namespaceExists(o)}async tableExists(o){return this.tableOps.tableExists(o)}async createNamespaceIfNotExists(o,r){return this.namespaceOps.createNamespaceIfNotExists(o,r)}async createTableIfNotExists(o,r){return this.tableOps.createTableIfNotExists(o,r)}},Wc=class extends Error{constructor(o,r="storage",l,d){super(o),this.__isStorageError=!0,this.namespace=r,this.name=r==="vectors"?"StorageVectorsError":"StorageError",this.status=l,this.statusCode=d}};function Kc(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}var jc=class extends Wc{constructor(o,r,l,d="storage"){super(o,d,r,l),this.name=d==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},h2=class extends Wc{constructor(o,r,l="storage"){super(o,l),this.name=l==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=r}};const Zp=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Qp=o=>{if(typeof o!="object"||o===null)return!1;const r=Object.getPrototypeOf(o);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},Ed=o=>{if(Array.isArray(o))return o.map(l=>Ed(l));if(typeof o=="function"||o!==Object(o))return o;const r={};return Object.entries(o).forEach(([l,d])=>{const p=l.replace(/([-_][a-z])/gi,g=>g.toUpperCase().replace(/[-_]/g,""));r[p]=Ed(d)}),r},Jp=o=>!o||typeof o!="string"||o.length===0||o.length>100||o.trim()!==o||o.includes("/")||o.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(o);function ro(o){"@babel/helpers - typeof";return ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ro(o)}function $p(o,r){if(ro(o)!="object"||!o)return o;var l=o[Symbol.toPrimitive];if(l!==void 0){var d=l.call(o,r);if(ro(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}function ex(o){var r=$p(o,"string");return ro(r)=="symbol"?r:r+""}function tx(o,r,l){return(r=ex(r))in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function lg(o,r){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(o);r&&(d=d.filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable})),l.push.apply(l,d)}return l}function We(o){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?lg(Object(l),!0).forEach(function(d){tx(o,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):lg(Object(l)).forEach(function(d){Object.defineProperty(o,d,Object.getOwnPropertyDescriptor(l,d))})}return o}const og=o=>{var r;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(r=o.error)===null||r===void 0?void 0:r.message)||JSON.stringify(o)},nx=async(o,r,l,d)=>{if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!l?.noResolveJson){const p=o,g=p.status||500;if(typeof p.json=="function")p.json().then(E=>{const S=E?.statusCode||E?.code||g+"";r(new jc(og(E),g,S,d))}).catch(()=>{if(d==="vectors"){const E=g+"";r(new jc(p.statusText||`HTTP ${g} error`,g,E,d))}else{const E=g+"";r(new jc(p.statusText||`HTTP ${g} error`,g,E,d))}});else{const E=g+"";r(new jc(p.statusText||`HTTP ${g} error`,g,E,d))}}else r(new h2(og(o),o,d))},ix=(o,r,l,d)=>{const p={method:o,headers:r?.headers||{}};return o==="GET"||o==="HEAD"||!d?We(We({},p),l):(Qp(d)?(p.headers=We({"Content-Type":"application/json"},r?.headers),p.body=JSON.stringify(d)):p.body=d,r?.duplex&&(p.duplex=r.duplex),We(We({},p),l))};async function Ql(o,r,l,d,p,g,E){return new Promise((S,_)=>{o(l,ix(r,d,p,g)).then(v=>{if(!v.ok)throw v;if(d?.noResolveJson)return v;if(E==="vectors"){const N=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!N||!N.includes("application/json"))return{}}return v.json()}).then(v=>S(v)).catch(v=>nx(v,_,d,E))})}function d2(o="storage"){return{get:async(r,l,d,p)=>Ql(r,"GET",l,d,p,void 0,o),post:async(r,l,d,p,g)=>Ql(r,"POST",l,p,g,d,o),put:async(r,l,d,p,g)=>Ql(r,"PUT",l,p,g,d,o),head:async(r,l,d,p)=>Ql(r,"HEAD",l,We(We({},d),{},{noResolveJson:!0}),p,void 0,o),remove:async(r,l,d,p,g)=>Ql(r,"DELETE",l,p,g,d,o)}}const rx=d2("storage"),{get:ao,post:Zi,put:Ad,head:ax,remove:Dd}=rx,Si=d2("vectors");var tl=class{constructor(o,r={},l,d="storage"){this.shouldThrowOnError=!1,this.url=o,this.headers=r,this.fetch=Zp(l),this.namespace=d}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(o){var r=this;try{return{data:await o(),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Kc(l))return{data:null,error:l};throw l}}},sx=class{constructor(o,r){this.downloadFn=o,this.shouldThrowOnError=r}then(o,r){return this.execute().then(o,r)}async execute(){var o=this;try{return{data:(await o.downloadFn()).body,error:null}}catch(r){if(o.shouldThrowOnError)throw r;if(Kc(r))return{data:null,error:r};throw r}}};let f2;f2=Symbol.toStringTag;var lx=class{constructor(o,r){this.downloadFn=o,this.shouldThrowOnError=r,this[f2]="BlobDownloadBuilder",this.promise=null}asStream(){return new sx(this.downloadFn,this.shouldThrowOnError)}then(o,r){return this.getPromise().then(o,r)}catch(o){return this.getPromise().catch(o)}finally(o){return this.getPromise().finally(o)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var o=this;try{return{data:await(await o.downloadFn()).blob(),error:null}}catch(r){if(o.shouldThrowOnError)throw r;if(Kc(r))return{data:null,error:r};throw r}}};const ox={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var cx=class extends tl{constructor(o,r={},l,d){super(o,r,d,"storage"),this.bucketId=l}async uploadOrUpdate(o,r,l,d){var p=this;return p.handleOperation(async()=>{let g;const E=We(We({},cg),d);let S=We(We({},p.headers),o==="POST"&&{"x-upsert":String(E.upsert)});const _=E.metadata;typeof Blob<"u"&&l instanceof Blob?(g=new FormData,g.append("cacheControl",E.cacheControl),_&&g.append("metadata",p.encodeMetadata(_)),g.append("",l)):typeof FormData<"u"&&l instanceof FormData?(g=l,g.has("cacheControl")||g.append("cacheControl",E.cacheControl),_&&!g.has("metadata")&&g.append("metadata",p.encodeMetadata(_))):(g=l,S["cache-control"]=`max-age=${E.cacheControl}`,S["content-type"]=E.contentType,_&&(S["x-metadata"]=p.toBase64(p.encodeMetadata(_))),(typeof ReadableStream<"u"&&g instanceof ReadableStream||g&&typeof g=="object"&&"pipe"in g&&typeof g.pipe=="function")&&!E.duplex&&(E.duplex="half")),d?.headers&&(S=We(We({},S),d.headers));const v=p._removeEmptyFolders(r),N=p._getFinalPath(v),I=await(o=="PUT"?Ad:Zi)(p.fetch,`${p.url}/object/${N}`,g,We({headers:S},E?.duplex?{duplex:E.duplex}:{}));return{path:v,id:I.Id,fullPath:I.Key}})}async upload(o,r,l){return this.uploadOrUpdate("POST",o,r,l)}async uploadToSignedUrl(o,r,l,d){var p=this;const g=p._removeEmptyFolders(o),E=p._getFinalPath(g),S=new URL(p.url+`/object/upload/sign/${E}`);return S.searchParams.set("token",r),p.handleOperation(async()=>{let _;const v=We({upsert:cg.upsert},d),N=We(We({},p.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&l instanceof Blob?(_=new FormData,_.append("cacheControl",v.cacheControl),_.append("",l)):typeof FormData<"u"&&l instanceof FormData?(_=l,_.append("cacheControl",v.cacheControl)):(_=l,N["cache-control"]=`max-age=${v.cacheControl}`,N["content-type"]=v.contentType),{path:g,fullPath:(await Ad(p.fetch,S.toString(),_,{headers:N})).Key}})}async createSignedUploadUrl(o,r){var l=this;return l.handleOperation(async()=>{let d=l._getFinalPath(o);const p=We({},l.headers);r?.upsert&&(p["x-upsert"]="true");const g=await Zi(l.fetch,`${l.url}/object/upload/sign/${d}`,{},{headers:p}),E=new URL(l.url+g.url),S=E.searchParams.get("token");if(!S)throw new Wc("No token returned by API");return{signedUrl:E.toString(),path:o,token:S}})}async update(o,r,l){return this.uploadOrUpdate("PUT",o,r,l)}async move(o,r,l){var d=this;return d.handleOperation(async()=>await Zi(d.fetch,`${d.url}/object/move`,{bucketId:d.bucketId,sourceKey:o,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:d.headers}))}async copy(o,r,l){var d=this;return d.handleOperation(async()=>({path:(await Zi(d.fetch,`${d.url}/object/copy`,{bucketId:d.bucketId,sourceKey:o,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:d.headers})).Key}))}async createSignedUrl(o,r,l){var d=this;return d.handleOperation(async()=>{let p=d._getFinalPath(o),g=await Zi(d.fetch,`${d.url}/object/sign/${p}`,We({expiresIn:r},l?.transform?{transform:l.transform}:{}),{headers:d.headers});const E=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{signedUrl:encodeURI(`${d.url}${g.signedURL}${E}`)}})}async createSignedUrls(o,r,l){var d=this;return d.handleOperation(async()=>{const p=await Zi(d.fetch,`${d.url}/object/sign/${d.bucketId}`,{expiresIn:r,paths:o},{headers:d.headers}),g=l?.download?`&download=${l.download===!0?"":l.download}`:"";return p.map(E=>We(We({},E),{},{signedUrl:E.signedURL?encodeURI(`${d.url}${E.signedURL}${g}`):null}))})}download(o,r){const l=typeof r?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(r?.transform||{}),p=d?`?${d}`:"",g=this._getFinalPath(o),E=()=>ao(this.fetch,`${this.url}/${l}/${g}${p}`,{headers:this.headers,noResolveJson:!0});return new lx(E,this.shouldThrowOnError)}async info(o){var r=this;const l=r._getFinalPath(o);return r.handleOperation(async()=>Ed(await ao(r.fetch,`${r.url}/object/info/${l}`,{headers:r.headers})))}async exists(o){var r=this;const l=r._getFinalPath(o);try{return await ax(r.fetch,`${r.url}/object/${l}`,{headers:r.headers}),{data:!0,error:null}}catch(d){if(r.shouldThrowOnError)throw d;if(Kc(d)&&d instanceof h2){const p=d.originalError;if([400,404].includes(p?.status))return{data:!1,error:d}}throw d}}getPublicUrl(o,r){const l=this._getFinalPath(o),d=[],p=r?.download?`download=${r.download===!0?"":r.download}`:"";p!==""&&d.push(p);const g=typeof r?.transform<"u"?"render/image":"object",E=this.transformOptsToQueryString(r?.transform||{});E!==""&&d.push(E);let S=d.join("&");return S!==""&&(S=`?${S}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${l}${S}`)}}}async remove(o){var r=this;return r.handleOperation(async()=>await Dd(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:o},{headers:r.headers}))}async list(o,r,l){var d=this;return d.handleOperation(async()=>{const p=We(We(We({},ox),r),{},{prefix:o||""});return await Zi(d.fetch,`${d.url}/object/list/${d.bucketId}`,p,{headers:d.headers},l)})}async listV2(o,r){var l=this;return l.handleOperation(async()=>{const d=We({},o);return await Zi(l.fetch,`${l.url}/object/list-v2/${l.bucketId}`,d,{headers:l.headers},r)})}encodeMetadata(o){return JSON.stringify(o)}toBase64(o){return typeof Buffer<"u"?Buffer.from(o).toString("base64"):btoa(o)}_getFinalPath(o){return`${this.bucketId}/${o.replace(/^\/+/,"")}`}_removeEmptyFolders(o){return o.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(o){const r=[];return o.width&&r.push(`width=${o.width}`),o.height&&r.push(`height=${o.height}`),o.resize&&r.push(`resize=${o.resize}`),o.format&&r.push(`format=${o.format}`),o.quality&&r.push(`quality=${o.quality}`),r.join("&")}};const ux="2.93.3",ho={"X-Client-Info":`storage-js/${ux}`};var hx=class extends tl{constructor(o,r={},l,d){const p=new URL(o);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(p.hostname)&&!p.hostname.includes("storage.supabase.")&&(p.hostname=p.hostname.replace("supabase.","storage.supabase."));const g=p.href.replace(/\/$/,""),E=We(We({},ho),r);super(g,E,l,"storage")}async listBuckets(o){var r=this;return r.handleOperation(async()=>{const l=r.listBucketOptionsToQueryString(o);return await ao(r.fetch,`${r.url}/bucket${l}`,{headers:r.headers})})}async getBucket(o){var r=this;return r.handleOperation(async()=>await ao(r.fetch,`${r.url}/bucket/${o}`,{headers:r.headers}))}async createBucket(o,r={public:!1}){var l=this;return l.handleOperation(async()=>await Zi(l.fetch,`${l.url}/bucket`,{id:o,name:o,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async updateBucket(o,r){var l=this;return l.handleOperation(async()=>await Ad(l.fetch,`${l.url}/bucket/${o}`,{id:o,name:o,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async emptyBucket(o){var r=this;return r.handleOperation(async()=>await Zi(r.fetch,`${r.url}/bucket/${o}/empty`,{},{headers:r.headers}))}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Dd(r.fetch,`${r.url}/bucket/${o}`,{},{headers:r.headers}))}listBucketOptionsToQueryString(o){const r={};return o&&("limit"in o&&(r.limit=String(o.limit)),"offset"in o&&(r.offset=String(o.offset)),o.search&&(r.search=o.search),o.sortColumn&&(r.sortColumn=o.sortColumn),o.sortOrder&&(r.sortOrder=o.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},dx=class extends tl{constructor(o,r={},l){const d=o.replace(/\/$/,""),p=We(We({},ho),r);super(d,p,l,"storage")}async createBucket(o){var r=this;return r.handleOperation(async()=>await Zi(r.fetch,`${r.url}/bucket`,{name:o},{headers:r.headers}))}async listBuckets(o){var r=this;return r.handleOperation(async()=>{const l=new URLSearchParams;o?.limit!==void 0&&l.set("limit",o.limit.toString()),o?.offset!==void 0&&l.set("offset",o.offset.toString()),o?.sortColumn&&l.set("sortColumn",o.sortColumn),o?.sortOrder&&l.set("sortOrder",o.sortOrder),o?.search&&l.set("search",o.search);const d=l.toString(),p=d?`${r.url}/bucket?${d}`:`${r.url}/bucket`;return await ao(r.fetch,p,{headers:r.headers})})}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Dd(r.fetch,`${r.url}/bucket/${o}`,{},{headers:r.headers}))}from(o){var r=this;if(!Jp(o))throw new Wc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const l=new Kp({baseUrl:this.url,catalogName:o,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),d=this.shouldThrowOnError;return new Proxy(l,{get(p,g){const E=p[g];return typeof E!="function"?E:async(...S)=>{try{return{data:await E.apply(p,S),error:null}}catch(_){if(d)throw _;return{data:null,error:_}}}}})}},fx=class extends tl{constructor(o,r={},l){const d=o.replace(/\/$/,""),p=We(We({},ho),{},{"Content-Type":"application/json"},r);super(d,p,l,"vectors")}async createIndex(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/CreateIndex`,o,{headers:r.headers})||{})}async getIndex(o,r){var l=this;return l.handleOperation(async()=>await Si.post(l.fetch,`${l.url}/GetIndex`,{vectorBucketName:o,indexName:r},{headers:l.headers}))}async listIndexes(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/ListIndexes`,o,{headers:r.headers}))}async deleteIndex(o,r){var l=this;return l.handleOperation(async()=>await Si.post(l.fetch,`${l.url}/DeleteIndex`,{vectorBucketName:o,indexName:r},{headers:l.headers})||{})}},gx=class extends tl{constructor(o,r={},l){const d=o.replace(/\/$/,""),p=We(We({},ho),{},{"Content-Type":"application/json"},r);super(d,p,l,"vectors")}async putVectors(o){var r=this;if(o.vectors.length<1||o.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/PutVectors`,o,{headers:r.headers})||{})}async getVectors(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/GetVectors`,o,{headers:r.headers}))}async listVectors(o){var r=this;if(o.segmentCount!==void 0){if(o.segmentCount<1||o.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(o.segmentIndex!==void 0&&(o.segmentIndex<0||o.segmentIndex>=o.segmentCount))throw new Error(`segmentIndex must be between 0 and ${o.segmentCount-1}`)}return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/ListVectors`,o,{headers:r.headers}))}async queryVectors(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/QueryVectors`,o,{headers:r.headers}))}async deleteVectors(o){var r=this;if(o.keys.length<1||o.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/DeleteVectors`,o,{headers:r.headers})||{})}},mx=class extends tl{constructor(o,r={},l){const d=o.replace(/\/$/,""),p=We(We({},ho),{},{"Content-Type":"application/json"},r);super(d,p,l,"vectors")}async createBucket(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:o},{headers:r.headers})||{})}async getBucket(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:o},{headers:r.headers}))}async listBuckets(o={}){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/ListVectorBuckets`,o,{headers:r.headers}))}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:o},{headers:r.headers})||{})}},px=class extends mx{constructor(o,r={}){super(o,r.headers||{},r.fetch)}from(o){return new xx(this.url,this.headers,o,this.fetch)}async createBucket(o){var r=()=>super.createBucket,l=this;return r().call(l,o)}async getBucket(o){var r=()=>super.getBucket,l=this;return r().call(l,o)}async listBuckets(o={}){var r=()=>super.listBuckets,l=this;return r().call(l,o)}async deleteBucket(o){var r=()=>super.deleteBucket,l=this;return r().call(l,o)}},xx=class extends fx{constructor(o,r,l,d){super(o,r,d),this.vectorBucketName=l}async createIndex(o){var r=()=>super.createIndex,l=this;return r().call(l,We(We({},o),{},{vectorBucketName:l.vectorBucketName}))}async listIndexes(o={}){var r=()=>super.listIndexes,l=this;return r().call(l,We(We({},o),{},{vectorBucketName:l.vectorBucketName}))}async getIndex(o){var r=()=>super.getIndex,l=this;return r().call(l,l.vectorBucketName,o)}async deleteIndex(o){var r=()=>super.deleteIndex,l=this;return r().call(l,l.vectorBucketName,o)}index(o){return new yx(this.url,this.headers,this.vectorBucketName,o,this.fetch)}},yx=class extends gx{constructor(o,r,l,d,p){super(o,r,p),this.vectorBucketName=l,this.indexName=d}async putVectors(o){var r=()=>super.putVectors,l=this;return r().call(l,We(We({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async getVectors(o){var r=()=>super.getVectors,l=this;return r().call(l,We(We({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async listVectors(o={}){var r=()=>super.listVectors,l=this;return r().call(l,We(We({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async queryVectors(o){var r=()=>super.queryVectors,l=this;return r().call(l,We(We({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async deleteVectors(o){var r=()=>super.deleteVectors,l=this;return r().call(l,We(We({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}},wx=class extends hx{constructor(o,r={},l,d){super(o,r,l,d)}from(o){return new cx(this.url,this.headers,o,this.fetch)}get vectors(){return new px(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new dx(this.url+"/iceberg",this.headers,this.fetch)}};const g2="2.93.3",Ks=30*1e3,Sd=3,td=Sd*Ks,vx="http://localhost:9999",bx="supabase.auth.token",Ex={"X-Client-Info":`gotrue-js/${g2}`},_d="X-Supabase-Api-Version",m2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ax=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sx=600*1e3;class so extends Error{constructor(r,l,d){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=d}}function ze(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class _x extends so{constructor(r,l,d){super(r,l,d),this.name="AuthApiError",this.status=l,this.code=d}}function Cx(o){return ze(o)&&o.name==="AuthApiError"}class es extends so{constructor(r,l){super(r),this.name="AuthUnknownError",this.originalError=l}}class jr extends so{constructor(r,l,d,p){super(r,d,p),this.name=l,this.status=d}}class bi extends jr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nd(o){return ze(o)&&o.name==="AuthSessionMissingError"}class Hs extends jr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Uc extends jr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class zc extends jr{constructor(r,l=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tx(o){return ze(o)&&o.name==="AuthImplicitGrantRedirectError"}class ug extends jr{constructor(r,l=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nx extends jr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cd extends jr{constructor(r,l){super(r,"AuthRetryableFetchError",l,void 0)}}function id(o){return ze(o)&&o.name==="AuthRetryableFetchError"}class hg extends jr{constructor(r,l,d){super(r,"AuthWeakPasswordError",l,"weak_password"),this.reasons=d}}class Td extends jr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dg=` 	
\r=`.split(""),Ix=(()=>{const o=new Array(128);for(let r=0;r<o.length;r+=1)o[r]=-1;for(let r=0;r<dg.length;r+=1)o[dg[r].charCodeAt(0)]=-2;for(let r=0;r<Hc.length;r+=1)o[Hc[r].charCodeAt(0)]=r;return o})();function fg(o,r,l){if(o!==null)for(r.queue=r.queue<<8|o,r.queuedBits+=8;r.queuedBits>=6;){const d=r.queue>>r.queuedBits-6&63;l(Hc[d]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const d=r.queue>>r.queuedBits-6&63;l(Hc[d]),r.queuedBits-=6}}function p2(o,r,l){const d=Ix[o];if(d>-1)for(r.queue=r.queue<<6|d,r.queuedBits+=6;r.queuedBits>=8;)l(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(d===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function gg(o){const r=[],l=E=>{r.push(String.fromCodePoint(E))},d={utf8seq:0,codepoint:0},p={queue:0,queuedBits:0},g=E=>{Dx(E,d,l)};for(let E=0;E<o.length;E+=1)p2(o.charCodeAt(E),p,g);return r.join("")}function Ox(o,r){if(o<=127){r(o);return}else if(o<=2047){r(192|o>>6),r(128|o&63);return}else if(o<=65535){r(224|o>>12),r(128|o>>6&63),r(128|o&63);return}else if(o<=1114111){r(240|o>>18),r(128|o>>12&63),r(128|o>>6&63),r(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Rx(o,r){for(let l=0;l<o.length;l+=1){let d=o.charCodeAt(l);if(d>55295&&d<=56319){const p=(d-55296)*1024&65535;d=(o.charCodeAt(l+1)-56320&65535|p)+65536,l+=1}Ox(d,r)}}function Dx(o,r,l){if(r.utf8seq===0){if(o<=127){l(o);return}for(let d=1;d<6;d+=1)if((o>>7-d&1)===0){r.utf8seq=d;break}if(r.utf8seq===2)r.codepoint=o&31;else if(r.utf8seq===3)r.codepoint=o&15;else if(r.utf8seq===4)r.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|o&63,r.utf8seq-=1,r.utf8seq===0&&l(r.codepoint)}}function $s(o){const r=[],l={queue:0,queuedBits:0},d=p=>{r.push(p)};for(let p=0;p<o.length;p+=1)p2(o.charCodeAt(p),l,d);return new Uint8Array(r)}function Mx(o){const r=[];return Rx(o,l=>r.push(l)),new Uint8Array(r)}function ts(o){const r=[],l={queue:0,queuedBits:0},d=p=>{r.push(p)};return o.forEach(p=>fg(p,l,d)),fg(null,l,d),r.join("")}function Bx(o){return Math.round(Date.now()/1e3)+o}function kx(){return Symbol("auth-callback")}const Pn=()=>typeof window<"u"&&typeof document<"u",Za={tested:!1,writable:!1},x2=()=>{if(!Pn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Za.tested)return Za.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Za.tested=!0,Za.writable=!0}catch{Za.tested=!0,Za.writable=!1}return Za.writable};function Lx(o){const r={},l=new URL(o);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((p,g)=>{r[g]=p})}catch{}return l.searchParams.forEach((d,p)=>{r[p]=d}),r}const y2=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),jx=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Zs=async(o,r,l)=>{await o.setItem(r,JSON.stringify(l))},Qa=async(o,r)=>{const l=await o.getItem(r);if(!l)return null;try{return JSON.parse(l)}catch{return l}},zn=async(o,r)=>{await o.removeItem(r)};class Zc{constructor(){this.promise=new Zc.promiseConstructor((r,l)=>{this.resolve=r,this.reject=l})}}Zc.promiseConstructor=Promise;function Pc(o){const r=o.split(".");if(r.length!==3)throw new Td("Invalid JWT structure");for(let d=0;d<r.length;d++)if(!Ax.test(r[d]))throw new Td("JWT not in base64url format");return{header:JSON.parse(gg(r[0])),payload:JSON.parse(gg(r[1])),signature:$s(r[2]),raw:{header:r[0],payload:r[1]}}}async function Ux(o){return await new Promise(r=>{setTimeout(()=>r(null),o)})}function zx(o,r){return new Promise((d,p)=>{(async()=>{for(let g=0;g<1/0;g++)try{const E=await o(g);if(!r(g,null,E)){d(E);return}}catch(E){if(!r(g,E)){p(E);return}}})()})}function Px(o){return("0"+o.toString(16)).substr(-2)}function Fx(){const r=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",d=l.length;let p="";for(let g=0;g<56;g++)p+=l.charAt(Math.floor(Math.random()*d));return p}return crypto.getRandomValues(r),Array.from(r,Px).join("")}async function Hx(o){const l=new TextEncoder().encode(o),d=await crypto.subtle.digest("SHA-256",l),p=new Uint8Array(d);return Array.from(p).map(g=>String.fromCharCode(g)).join("")}async function Vx(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const l=await Hx(o);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vs(o,r,l=!1){const d=Fx();let p=d;l&&(p+="/PASSWORD_RECOVERY"),await Zs(o,`${r}-code-verifier`,p);const g=await Vx(d);return[g,d===g?"plain":"s256"]}const Gx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qx(o){const r=o.headers.get(_d);if(!r||!r.match(Gx))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Yx(o){if(!o)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(o<=r)throw new Error("JWT has expired")}function Xx(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gs(o){if(!Wx.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rd(){const o={};return new Proxy(o,{get:(r,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const d=l.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Kx(o,r){return new Proxy(o,{get:(l,d,p)=>{if(d==="__isInsecureUserWarningProxy")return!0;if(typeof d=="symbol"){const g=d.toString();if(g==="Symbol(Symbol.toPrimitive)"||g==="Symbol(Symbol.toStringTag)"||g==="Symbol(util.inspect.custom)"||g==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,d,p)}return!r.value&&typeof d=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(l,d,p)}})}function mg(o){return JSON.parse(JSON.stringify(o))}const Ja=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Zx=[502,503,504];async function pg(o){var r;if(!jx(o))throw new Cd(Ja(o),0);if(Zx.includes(o.status))throw new Cd(Ja(o),o.status);let l;try{l=await o.json()}catch(g){throw new es(Ja(g),g)}let d;const p=qx(o);if(p&&p.getTime()>=m2["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?d=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(d=l.error_code),d){if(d==="weak_password")throw new hg(Ja(l),o.status,((r=l.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(d==="session_not_found")throw new bi}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((g,E)=>g&&typeof E=="string",!0))throw new hg(Ja(l),o.status,l.weak_password.reasons);throw new _x(Ja(l),o.status||500,d)}const Qx=(o,r,l,d)=>{const p={method:o,headers:r?.headers||{}};return o==="GET"?p:(p.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),p.body=JSON.stringify(d),Object.assign(Object.assign({},p),l))};async function Xe(o,r,l,d){var p;const g=Object.assign({},d?.headers);g[_d]||(g[_d]=m2["2024-01-01"].name),d?.jwt&&(g.Authorization=`Bearer ${d.jwt}`);const E=(p=d?.query)!==null&&p!==void 0?p:{};d?.redirectTo&&(E.redirect_to=d.redirectTo);const S=Object.keys(E).length?"?"+new URLSearchParams(E).toString():"",_=await Jx(o,r,l+S,{headers:g,noResolveJson:d?.noResolveJson},{},d?.body);return d?.xform?d?.xform(_):{data:Object.assign({},_),error:null}}async function Jx(o,r,l,d,p,g){const E=Qx(r,d,p,g);let S;try{S=await o(l,Object.assign({},E))}catch(_){throw console.error(_),new Cd(Ja(_),0)}if(S.ok||await pg(S),d?.noResolveJson)return S;try{return await S.json()}catch(_){await pg(_)}}function Ki(o){var r;let l=null;ty(o)&&(l=Object.assign({},o),o.expires_at||(l.expires_at=Bx(o.expires_in)));const d=(r=o.user)!==null&&r!==void 0?r:o;return{data:{session:l,user:d},error:null}}function xg(o){const r=Ki(o);return!r.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0)&&(r.data.weak_password=o.weak_password),r}function Aa(o){var r;return{data:{user:(r=o.user)!==null&&r!==void 0?r:o},error:null}}function $x(o){return{data:o,error:null}}function ey(o){const{action_link:r,email_otp:l,hashed_token:d,redirect_to:p,verification_type:g}=o,E=Xc(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),S={action_link:r,email_otp:l,hashed_token:d,redirect_to:p,verification_type:g},_=Object.assign({},E);return{data:{properties:S,user:_},error:null}}function yg(o){return o}function ty(o){return o.access_token&&o.refresh_token&&o.expires_in}const ad=["global","local","others"];class ny{constructor({url:r="",headers:l={},fetch:d}){this.url=r,this.headers=l,this.fetch=y2(d),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,l=ad[0]){if(ad.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ad.join(", ")}`);try{return await Xe(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(d){if(ze(d))return{data:null,error:d};throw d}}async inviteUserByEmail(r,l={}){try{return await Xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:Aa})}catch(d){if(ze(d))return{data:{user:null},error:d};throw d}}async generateLink(r){try{const{options:l}=r,d=Xc(r,["options"]),p=Object.assign(Object.assign({},d),l);return"newEmail"in d&&(p.new_email=d?.newEmail,delete p.newEmail),await Xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:p,headers:this.headers,xform:ey,redirectTo:l?.redirectTo})}catch(l){if(ze(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(r){try{return await Xe(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Aa})}catch(l){if(ze(l))return{data:{user:null},error:l};throw l}}async listUsers(r){var l,d,p,g,E,S,_;try{const v={nextPage:null,lastPage:0,total:0},N=await Xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:"",per_page:(g=(p=r?.perPage)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""},xform:yg});if(N.error)throw N.error;const I=await N.json(),B=(E=N.headers.get("x-total-count"))!==null&&E!==void 0?E:0,L=(_=(S=N.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&_!==void 0?_:[];return L.length>0&&(L.forEach(U=>{const z=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(U.split(";")[1].split("=")[1]);v[`${Y}Page`]=z}),v.total=parseInt(B)),{data:Object.assign(Object.assign({},I),v),error:null}}catch(v){if(ze(v))return{data:{users:[]},error:v};throw v}}async getUserById(r){Gs(r);try{return await Xe(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Aa})}catch(l){if(ze(l))return{data:{user:null},error:l};throw l}}async updateUserById(r,l){Gs(r);try{return await Xe(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:l,headers:this.headers,xform:Aa})}catch(d){if(ze(d))return{data:{user:null},error:d};throw d}}async deleteUser(r,l=!1){Gs(r);try{return await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:l},xform:Aa})}catch(d){if(ze(d))return{data:{user:null},error:d};throw d}}async _listFactors(r){Gs(r.userId);try{const{data:l,error:d}=await Xe(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:p=>({data:{factors:p},error:null})});return{data:l,error:d}}catch(l){if(ze(l))return{data:null,error:l};throw l}}async _deleteFactor(r){Gs(r.userId),Gs(r.id);try{return{data:await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(l){if(ze(l))return{data:null,error:l};throw l}}async _listOAuthClients(r){var l,d,p,g,E,S,_;try{const v={nextPage:null,lastPage:0,total:0},N=await Xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:"",per_page:(g=(p=r?.perPage)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""},xform:yg});if(N.error)throw N.error;const I=await N.json(),B=(E=N.headers.get("x-total-count"))!==null&&E!==void 0?E:0,L=(_=(S=N.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&_!==void 0?_:[];return L.length>0&&(L.forEach(U=>{const z=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(U.split(";")[1].split("=")[1]);v[`${Y}Page`]=z}),v.total=parseInt(B)),{data:Object.assign(Object.assign({},I),v),error:null}}catch(v){if(ze(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(r){try{return await Xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ze(l))return{data:null,error:l};throw l}}async _getOAuthClient(r){try{return await Xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ze(l))return{data:null,error:l};throw l}}async _updateOAuthClient(r,l){try{return await Xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:l,headers:this.headers,xform:d=>({data:d,error:null})})}catch(d){if(ze(d))return{data:null,error:d};throw d}}async _deleteOAuthClient(r){try{return await Xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(ze(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(r){try{return await Xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ze(l))return{data:null,error:l};throw l}}}function wg(o={}){return{getItem:r=>o[r]||null,setItem:(r,l)=>{o[r]=l},removeItem:r=>{delete o[r]}}}const qs={debug:!!(globalThis&&x2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class w2 extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class iy extends w2{}async function ry(o,r,l){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,r);const d=new globalThis.AbortController;return r>0&&setTimeout(()=>{d.abort(),qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},async p=>{if(p){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,p.name);try{return await l()}finally{qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,p.name)}}else{if(r===0)throw qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new iy(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(qs.debug)try{const g=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(g,null,"  "))}catch(g){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",g)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}function ay(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function v2(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function sy(o){return parseInt(o,16)}function ly(o){const r=new TextEncoder().encode(o);return"0x"+Array.from(r,d=>d.toString(16).padStart(2,"0")).join("")}function oy(o){var r;const{chainId:l,domain:d,expirationTime:p,issuedAt:g=new Date,nonce:E,notBefore:S,requestId:_,resources:v,scheme:N,uri:I,version:B}=o;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(E&&E.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${E}`);if(!I)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(B!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${B}`);if(!((r=o.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const L=v2(o.address),U=N?`${N}://${d}`:d,z=o.statement?`${o.statement}
`:"",Y=`${U} wants you to sign in with your Ethereum account:
${L}

${z}`;let ee=`URI: ${I}
Version: ${B}
Chain ID: ${l}${E?`
Nonce: ${E}`:""}
Issued At: ${g.toISOString()}`;if(p&&(ee+=`
Expiration Time: ${p.toISOString()}`),S&&(ee+=`
Not Before: ${S.toISOString()}`),_&&(ee+=`
Request ID: ${_}`),v){let ie=`
Resources:`;for(const K of v){if(!K||typeof K!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${K}`);ie+=`
- ${K}`}ee+=ie}return`${Y}
${ee}`}class bn extends Error{constructor({message:r,code:l,cause:d,name:p}){var g;super(r,{cause:d}),this.__isWebAuthnError=!0,this.name=(g=p??(d instanceof Error?d.name:void 0))!==null&&g!==void 0?g:"Unknown Error",this.code=l}}class Vc extends bn{constructor(r,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:r}),this.name="WebAuthnUnknownError",this.originalError=l}}function cy({error:o,options:r}){var l,d,p;const{publicKey:g}=r;if(!g)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new bn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((l=g.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new bn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(r.mediation==="conditional"&&((d=g.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new bn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((p=g.authenticatorSelection)===null||p===void 0?void 0:p.userVerification)==="required")return new bn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new bn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new bn({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return g.pubKeyCredParams.filter(S=>S.type==="public-key").length===0?new bn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new bn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const E=window.location.hostname;if(b2(E)){if(g.rp.id!==E)return new bn({message:`The RP ID "${g.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(g.user.id.byteLength<1||g.user.id.byteLength>64)return new bn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new bn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function uy({error:o,options:r}){const{publicKey:l}=r;if(!l)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new bn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new bn({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const d=window.location.hostname;if(b2(d)){if(l.rpId!==d)return new bn({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new bn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class hy{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const dy=new hy;function fy(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:r,user:l,excludeCredentials:d}=o,p=Xc(o,["challenge","user","excludeCredentials"]),g=$s(r).buffer,E=Object.assign(Object.assign({},l),{id:$s(l.id).buffer}),S=Object.assign(Object.assign({},p),{challenge:g,user:E});if(d&&d.length>0){S.excludeCredentials=new Array(d.length);for(let _=0;_<d.length;_++){const v=d[_];S.excludeCredentials[_]=Object.assign(Object.assign({},v),{id:$s(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return S}function gy(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:r,allowCredentials:l}=o,d=Xc(o,["challenge","allowCredentials"]),p=$s(r).buffer,g=Object.assign(Object.assign({},d),{challenge:p});if(l&&l.length>0){g.allowCredentials=new Array(l.length);for(let E=0;E<l.length;E++){const S=l[E];g.allowCredentials[E]=Object.assign(Object.assign({},S),{id:$s(S.id).buffer,type:S.type||"public-key",transports:S.transports})}}return g}function my(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o;return{id:o.id,rawId:o.id,response:{attestationObject:ts(new Uint8Array(o.response.attestationObject)),clientDataJSON:ts(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function py(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o,d=o.getClientExtensionResults(),p=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:ts(new Uint8Array(p.authenticatorData)),clientDataJSON:ts(new Uint8Array(p.clientDataJSON)),signature:ts(new Uint8Array(p.signature)),userHandle:p.userHandle?ts(new Uint8Array(p.userHandle)):void 0},type:"public-key",clientExtensionResults:d,authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function b2(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function vg(){var o,r;return!!(Pn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function xy(o){try{const r=await navigator.credentials.create(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Vc("Browser returned unexpected credential type",r)}:{data:null,error:new Vc("Empty credential response",r)}}catch(r){return{data:null,error:cy({error:r,options:o})}}}async function yy(o){try{const r=await navigator.credentials.get(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Vc("Browser returned unexpected credential type",r)}:{data:null,error:new Vc("Empty credential response",r)}}catch(r){return{data:null,error:uy({error:r,options:o})}}}const wy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Gc(...o){const r=p=>p!==null&&typeof p=="object"&&!Array.isArray(p),l=p=>p instanceof ArrayBuffer||ArrayBuffer.isView(p),d={};for(const p of o)if(p)for(const g in p){const E=p[g];if(E!==void 0)if(Array.isArray(E))d[g]=E;else if(l(E))d[g]=E;else if(r(E)){const S=d[g];r(S)?d[g]=Gc(S,E):d[g]=Gc(E)}else d[g]=E}return d}function by(o,r){return Gc(wy,o,r||{})}function Ey(o,r){return Gc(vy,o,r||{})}class Ay{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:l,friendlyName:d,signal:p},g){var E;try{const{data:S,error:_}=await this.client.mfa.challenge({factorId:r,webauthn:l});if(!S)return{data:null,error:_};const v=p??dy.createNewAbortSignal();if(S.webauthn.type==="create"){const{user:N}=S.webauthn.credential_options.publicKey;if(!N.name){const I=d;if(I)N.name=`${N.id}:${I}`;else{const L=(await this.client.getUser()).data.user,U=((E=L?.user_metadata)===null||E===void 0?void 0:E.name)||L?.email||L?.id||"User";N.name=`${N.id}:${U}`}}N.displayName||(N.displayName=N.name)}switch(S.webauthn.type){case"create":{const N=by(S.webauthn.credential_options.publicKey,g?.create),{data:I,error:B}=await xy({publicKey:N,signal:v});return I?{data:{factorId:r,challengeId:S.id,webauthn:{type:S.webauthn.type,credential_response:I}},error:null}:{data:null,error:B}}case"request":{const N=Ey(S.webauthn.credential_options.publicKey,g?.request),{data:I,error:B}=await yy(Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:N,signal:v}));return I?{data:{factorId:r,challengeId:S.id,webauthn:{type:S.webauthn.type,credential_response:I}},error:null}:{data:null,error:B}}}}catch(S){return ze(S)?{data:null,error:S}:{data:null,error:new es("Unexpected error in challenge",S)}}}async _verify({challengeId:r,factorId:l,webauthn:d}){return this.client.mfa.verify({factorId:l,challengeId:r,webauthn:d})}async _authenticate({factorId:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:d=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},g){if(!l)return{data:null,error:new so("rpId is required for WebAuthn authentication")};try{if(!vg())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:E,error:S}=await this.challenge({factorId:r,webauthn:{rpId:l,rpOrigins:d},signal:p},{request:g});if(!E)return{data:null,error:S};const{webauthn:_}=E;return this._verify({factorId:r,challengeId:E.challengeId,webauthn:{type:_.type,rpId:l,rpOrigins:d,credential_response:_.credential_response}})}catch(E){return ze(E)?{data:null,error:E}:{data:null,error:new es("Unexpected error in authenticate",E)}}}async _register({friendlyName:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:d=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},g){if(!l)return{data:null,error:new so("rpId is required for WebAuthn registration")};try{if(!vg())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:E,error:S}=await this._enroll({friendlyName:r});if(!E)return await this.client.mfa.listFactors().then(N=>{var I;return(I=N.data)===null||I===void 0?void 0:I.all.find(B=>B.factor_type==="webauthn"&&B.friendly_name===r&&B.status!=="unverified")}).then(N=>N?this.client.mfa.unenroll({factorId:N?.id}):void 0),{data:null,error:S};const{data:_,error:v}=await this._challenge({factorId:E.id,friendlyName:E.friendly_name,webauthn:{rpId:l,rpOrigins:d},signal:p},{create:g});return _?this._verify({factorId:E.id,challengeId:_.challengeId,webauthn:{rpId:l,rpOrigins:d,type:_.webauthn.type,credential_response:_.webauthn.credential_response}}):{data:null,error:v}}catch(E){return ze(E)?{data:null,error:E}:{data:null,error:new es("Unexpected error in register",E)}}}}ay();const Sy={url:vx,storageKey:bx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ex,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function bg(o,r,l){return await l()}const Ys={};class lo{get jwks(){var r,l;return(l=(r=Ys[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(r){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,l;return(l=(r=Ys[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{cachedAt:r})}constructor(r){var l,d,p;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const g=Object.assign(Object.assign({},Sy),r);if(this.storageKey=g.storageKey,this.instanceID=(l=lo.nextInstanceID[this.storageKey])!==null&&l!==void 0?l:0,lo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.instanceID>0&&Pn()){const E=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(E),this.logDebugMessages&&console.trace(E)}if(this.persistSession=g.persistSession,this.autoRefreshToken=g.autoRefreshToken,this.admin=new ny({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=y2(g.fetch),this.lock=g.lock||bg,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,this.throwOnError=g.throwOnError,this.lockAcquireTimeout=g.lockAcquireTimeout,g.lock?this.lock=g.lock:this.persistSession&&Pn()&&(!((d=globalThis?.navigator)===null||d===void 0)&&d.locks)?this.lock=ry:this.lock=bg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ay(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:x2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wg(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=wg(this.memoryStorage)),Pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(E){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",E)}(p=this.broadcastChannel)===null||p===void 0||p.addEventListener("message",async E=>{this._debug("received broadcast notification from other tab or client",E);try{await this._notifyAllSubscribers(E.data.event,E.data.session,!1)}catch(S){this._debug("#broadcastChannel","error",S)}})}this.initialize().catch(E=>{this._debug("#initialize()","error",E)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${g2}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let l={},d="none";if(Pn()&&(l=Lx(window.location.href),this._isImplicitGrantCallback(l)?d="implicit":await this._isPKCECallback(l)&&(d="pkce")),Pn()&&this.detectSessionInUrl&&d!=="none"){const{data:p,error:g}=await this._getSessionFromURL(l,d);if(g){if(this._debug("#_initialize()","error detecting session from URL",g),Tx(g)){const _=(r=g.details)===null||r===void 0?void 0:r.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:g}}return{error:g}}const{session:E,redirectType:S}=p;return this._debug("#_initialize()","detected session in URL",E,"redirect type",S),await this._saveSession(E),setTimeout(async()=>{S==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",E):await this._notifyAllSubscribers("SIGNED_IN",E)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return ze(l)?this._returnResult({error:l}):this._returnResult({error:new es("Unexpected error during initialization",l)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var l,d,p;try{const g=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(d=(l=r?.options)===null||l===void 0?void 0:l.data)!==null&&d!==void 0?d:{},gotrue_meta_security:{captcha_token:(p=r?.options)===null||p===void 0?void 0:p.captchaToken}},xform:Ki}),{data:E,error:S}=g;if(S||!E)return this._returnResult({data:{user:null,session:null},error:S});const _=E.session,v=E.user;return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(g){if(ze(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signUp(r){var l,d,p;try{let g;if("email"in r){const{email:N,password:I,options:B}=r;let L=null,U=null;this.flowType==="pkce"&&([L,U]=await Vs(this.storage,this.storageKey)),g=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:B?.emailRedirectTo,body:{email:N,password:I,data:(l=B?.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:B?.captchaToken},code_challenge:L,code_challenge_method:U},xform:Ki})}else if("phone"in r){const{phone:N,password:I,options:B}=r;g=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:N,password:I,data:(d=B?.data)!==null&&d!==void 0?d:{},channel:(p=B?.channel)!==null&&p!==void 0?p:"sms",gotrue_meta_security:{captcha_token:B?.captchaToken}},xform:Ki})}else throw new Uc("You must provide either an email or phone number and a password");const{data:E,error:S}=g;if(S||!E)return await zn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:S});const _=E.session,v=E.user;return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(g){if(await zn(this.storage,`${this.storageKey}-code-verifier`),ze(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithPassword(r){try{let l;if("email"in r){const{email:g,password:E,options:S}=r;l=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:g,password:E,gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:xg})}else if("phone"in r){const{phone:g,password:E,options:S}=r;l=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:g,password:E,gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:xg})}else throw new Uc("You must provide either an email or phone number and a password");const{data:d,error:p}=l;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d||!d.session||!d.user){const g=new Hs;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign({user:d.user,session:d.session},d.weak_password?{weakPassword:d.weak_password}:null),error:p})}catch(l){if(ze(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOAuth(r){var l,d,p,g;return await this._handleProviderSignIn(r.provider,{redirectTo:(l=r.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=r.options)===null||d===void 0?void 0:d.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:(g=r.options)===null||g===void 0?void 0:g.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:l}=r;switch(l){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(r){var l,d,p,g,E,S,_,v,N,I,B;let L,U;if("message"in r)L=r.message,U=r.signature;else{const{chain:z,wallet:Y,statement:ee,options:ie}=r;let K;if(Pn())if(typeof Y=="object")K=Y;else{const oe=window;if("ethereum"in oe&&typeof oe.ethereum=="object"&&"request"in oe.ethereum&&typeof oe.ethereum.request=="function")K=oe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof Y!="object"||!ie?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=Y}const ce=new URL((l=ie?.url)!==null&&l!==void 0?l:window.location.href),Ie=await K.request({method:"eth_requestAccounts"}).then(oe=>oe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ie||Ie.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const be=v2(Ie[0]);let W=(d=ie?.signInWithEthereum)===null||d===void 0?void 0:d.chainId;if(!W){const oe=await K.request({method:"eth_chainId"});W=sy(oe)}const he={domain:ce.host,address:be,statement:ee,uri:ce.href,version:"1",chainId:W,nonce:(p=ie?.signInWithEthereum)===null||p===void 0?void 0:p.nonce,issuedAt:(E=(g=ie?.signInWithEthereum)===null||g===void 0?void 0:g.issuedAt)!==null&&E!==void 0?E:new Date,expirationTime:(S=ie?.signInWithEthereum)===null||S===void 0?void 0:S.expirationTime,notBefore:(_=ie?.signInWithEthereum)===null||_===void 0?void 0:_.notBefore,requestId:(v=ie?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(N=ie?.signInWithEthereum)===null||N===void 0?void 0:N.resources};L=oy(he),U=await K.request({method:"personal_sign",params:[ly(L),be]})}try{const{data:z,error:Y}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:L,signature:U},!((I=r.options)===null||I===void 0)&&I.captchaToken?{gotrue_meta_security:{captcha_token:(B=r.options)===null||B===void 0?void 0:B.captchaToken}}:null),xform:Ki});if(Y)throw Y;if(!z||!z.session||!z.user){const ee=new Hs;return this._returnResult({data:{user:null,session:null},error:ee})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:Y})}catch(z){if(ze(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async signInWithSolana(r){var l,d,p,g,E,S,_,v,N,I,B,L;let U,z;if("message"in r)U=r.message,z=r.signature;else{const{chain:Y,wallet:ee,statement:ie,options:K}=r;let ce;if(Pn())if(typeof ee=="object")ce=ee;else{const be=window;if("solana"in be&&typeof be.solana=="object"&&("signIn"in be.solana&&typeof be.solana.signIn=="function"||"signMessage"in be.solana&&typeof be.solana.signMessage=="function"))ce=be.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ee!="object"||!K?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ce=ee}const Ie=new URL((l=K?.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in ce&&ce.signIn){const be=await ce.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},K?.signInWithSolana),{version:"1",domain:Ie.host,uri:Ie.href}),ie?{statement:ie}:null));let W;if(Array.isArray(be)&&be[0]&&typeof be[0]=="object")W=be[0];else if(be&&typeof be=="object"&&"signedMessage"in be&&"signature"in be)W=be;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)U=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),z=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ce)||typeof ce.signMessage!="function"||!("publicKey"in ce)||typeof ce!="object"||!ce.publicKey||!("toBase58"in ce.publicKey)||typeof ce.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${Ie.host} wants you to sign in with your Solana account:`,ce.publicKey.toBase58(),...ie?["",ie,""]:[""],"Version: 1",`URI: ${Ie.href}`,`Issued At: ${(p=(d=K?.signInWithSolana)===null||d===void 0?void 0:d.issuedAt)!==null&&p!==void 0?p:new Date().toISOString()}`,...!((g=K?.signInWithSolana)===null||g===void 0)&&g.notBefore?[`Not Before: ${K.signInWithSolana.notBefore}`]:[],...!((E=K?.signInWithSolana)===null||E===void 0)&&E.expirationTime?[`Expiration Time: ${K.signInWithSolana.expirationTime}`]:[],...!((S=K?.signInWithSolana)===null||S===void 0)&&S.chainId?[`Chain ID: ${K.signInWithSolana.chainId}`]:[],...!((_=K?.signInWithSolana)===null||_===void 0)&&_.nonce?[`Nonce: ${K.signInWithSolana.nonce}`]:[],...!((v=K?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${K.signInWithSolana.requestId}`]:[],...!((I=(N=K?.signInWithSolana)===null||N===void 0?void 0:N.resources)===null||I===void 0)&&I.length?["Resources",...K.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const be=await ce.signMessage(new TextEncoder().encode(U),"utf8");if(!be||!(be instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");z=be}}try{const{data:Y,error:ee}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:ts(z)},!((B=r.options)===null||B===void 0)&&B.captchaToken?{gotrue_meta_security:{captcha_token:(L=r.options)===null||L===void 0?void 0:L.captchaToken}}:null),xform:Ki});if(ee)throw ee;if(!Y||!Y.session||!Y.user){const ie=new Hs;return this._returnResult({data:{user:null,session:null},error:ie})}return Y.session&&(await this._saveSession(Y.session),await this._notifyAllSubscribers("SIGNED_IN",Y.session)),this._returnResult({data:Object.assign({},Y),error:ee})}catch(Y){if(ze(Y))return this._returnResult({data:{user:null,session:null},error:Y});throw Y}}async _exchangeCodeForSession(r){const l=await Qa(this.storage,`${this.storageKey}-code-verifier`),[d,p]=(l??"").split("/");try{if(!d&&this.flowType==="pkce")throw new Nx;const{data:g,error:E}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:d},xform:Ki});if(await zn(this.storage,`${this.storageKey}-code-verifier`),E)throw E;if(!g||!g.session||!g.user){const S=new Hs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:S})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign(Object.assign({},g),{redirectType:p??null}),error:E})}catch(g){if(await zn(this.storage,`${this.storageKey}-code-verifier`),ze(g))return this._returnResult({data:{user:null,session:null,redirectType:null},error:g});throw g}}async signInWithIdToken(r){try{const{options:l,provider:d,token:p,access_token:g,nonce:E}=r,S=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:d,id_token:p,access_token:g,nonce:E,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Ki}),{data:_,error:v}=S;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!_||!_.session||!_.user){const N=new Hs;return this._returnResult({data:{user:null,session:null},error:N})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:_,error:v})}catch(l){if(ze(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOtp(r){var l,d,p,g,E;try{if("email"in r){const{email:S,options:_}=r;let v=null,N=null;this.flowType==="pkce"&&([v,N]=await Vs(this.storage,this.storageKey));const{error:I}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:S,data:(l=_?.data)!==null&&l!==void 0?l:{},create_user:(d=_?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:v,code_challenge_method:N},redirectTo:_?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:I})}if("phone"in r){const{phone:S,options:_}=r,{data:v,error:N}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:S,data:(p=_?.data)!==null&&p!==void 0?p:{},create_user:(g=_?.shouldCreateUser)!==null&&g!==void 0?g:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},channel:(E=_?.channel)!==null&&E!==void 0?E:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:N})}throw new Uc("You must provide either an email or phone number.")}catch(S){if(await zn(this.storage,`${this.storageKey}-code-verifier`),ze(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async verifyOtp(r){var l,d;try{let p,g;"options"in r&&(p=(l=r.options)===null||l===void 0?void 0:l.redirectTo,g=(d=r.options)===null||d===void 0?void 0:d.captchaToken);const{data:E,error:S}=await Xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:g}}),redirectTo:p,xform:Ki});if(S)throw S;if(!E)throw new Error("An error occurred on token verification.");const _=E.session,v=E.user;return _?.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(p){if(ze(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSSO(r){var l,d,p,g,E;try{let S=null,_=null;this.flowType==="pkce"&&([S,_]=await Vs(this.storage,this.storageKey));const v=await Xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(d=(l=r.options)===null||l===void 0?void 0:l.redirectTo)!==null&&d!==void 0?d:void 0}),!((p=r?.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:S,code_challenge_method:_}),headers:this.headers,xform:$x});return!((g=v.data)===null||g===void 0)&&g.url&&Pn()&&!(!((E=r.options)===null||E===void 0)&&E.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(S){if(await zn(this.storage,`${this.storageKey}-code-verifier`),ze(S))return this._returnResult({data:null,error:S});throw S}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;if(d)throw d;if(!l)throw new bi;const{error:p}=await Xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return this._returnResult({data:{user:null,session:null},error:p})})}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const l=`${this.url}/resend`;if("email"in r){const{email:d,type:p,options:g}=r,{error:E}=await Xe(this.fetch,"POST",l,{headers:this.headers,body:{email:d,type:p,gotrue_meta_security:{captcha_token:g?.captchaToken}},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}else if("phone"in r){const{phone:d,type:p,options:g}=r,{data:E,error:S}=await Xe(this.fetch,"POST",l,{headers:this.headers,body:{phone:d,type:p,gotrue_meta_security:{captcha_token:g?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:E?.message_id},error:S})}throw new Uc("You must provide either an email or phone number and a type")}catch(l){if(ze(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async l=>l))}async _acquireLock(r,l){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const d=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),p=(async()=>(await d,await l()))();return this.pendingInLock.push((async()=>{try{await p}catch{}})()),p}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const d=l();for(this.pendingInLock.push((async()=>{try{await d}catch{}})()),await d;this.pendingInLock.length;){const p=[...this.pendingInLock];await Promise.all(p),this.pendingInLock.splice(0,p.length)}return await d}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await r(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const l=await Qa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?r=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const d=r.expires_at?r.expires_at*1e3-Date.now()<td:!1;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",r.expires_at),!d){if(this.userStorage){const E=await Qa(this.userStorage,this.storageKey+"-user");E?.user?r.user=E.user:r.user=rd()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const E={value:this.suppressGetSessionWarning};r.user=Kx(r.user,E),E.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:p,error:g}=await this._callRefreshToken(r.refresh_token);return g?this._returnResult({data:{session:null},error:g}):this._returnResult({data:{session:p},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const l=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return l.data.user&&(this.suppressGetSessionWarning=!0),l}async _getUser(r){try{return r?await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Aa}):await this._useSession(async l=>{var d,p,g;const{data:E,error:S}=l;if(S)throw S;return!(!((d=E.session)===null||d===void 0)&&d.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bi}:await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(g=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0,xform:Aa})})}catch(l){if(ze(l))return nd(l)&&(await this._removeSession(),await zn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:l});throw l}}async updateUser(r,l={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,l))}async _updateUser(r,l={}){try{return await this._useSession(async d=>{const{data:p,error:g}=d;if(g)throw g;if(!p.session)throw new bi;const E=p.session;let S=null,_=null;this.flowType==="pkce"&&r.email!=null&&([S,_]=await Vs(this.storage,this.storageKey));const{data:v,error:N}=await Xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:S,code_challenge_method:_}),jwt:E.access_token,xform:Aa});if(N)throw N;return E.user=v.user,await this._saveSession(E),await this._notifyAllSubscribers("USER_UPDATED",E),this._returnResult({data:{user:E.user},error:null})})}catch(d){if(await zn(this.storage,`${this.storageKey}-code-verifier`),ze(d))return this._returnResult({data:{user:null},error:d});throw d}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new bi;const l=Date.now()/1e3;let d=l,p=!0,g=null;const{payload:E}=Pc(r.access_token);if(E.exp&&(d=E.exp,p=d<=l),p){const{data:S,error:_}=await this._callRefreshToken(r.refresh_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!S)return{data:{user:null,session:null},error:null};g=S}else{const{data:S,error:_}=await this._getUser(r.access_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});g={access_token:r.access_token,refresh_token:r.refresh_token,user:S.user,token_type:"bearer",expires_in:d-l,expires_at:d},await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)}return this._returnResult({data:{user:g.user,session:g},error:null})}catch(l){if(ze(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async l=>{var d;if(!r){const{data:E,error:S}=l;if(S)throw S;r=(d=E.session)!==null&&d!==void 0?d:void 0}if(!r?.refresh_token)throw new bi;const{data:p,error:g}=await this._callRefreshToken(r.refresh_token);return g?this._returnResult({data:{user:null,session:null},error:g}):p?this._returnResult({data:{user:p.user,session:p},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(l){if(ze(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async _getSessionFromURL(r,l){try{if(!Pn())throw new zc("No browser detected.");if(r.error||r.error_description||r.error_code)throw new zc(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zc("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new ug("No code detected.");const{data:ie,error:K}=await this._exchangeCodeForSession(r.code);if(K)throw K;const ce=new URL(window.location.href);return ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ce.toString()),{data:{session:ie.session,redirectType:null},error:null}}const{provider_token:d,provider_refresh_token:p,access_token:g,refresh_token:E,expires_in:S,expires_at:_,token_type:v}=r;if(!g||!S||!E||!v)throw new zc("No session defined in URL");const N=Math.round(Date.now()/1e3),I=parseInt(S);let B=N+I;_&&(B=parseInt(_));const L=B-N;L*1e3<=Ks&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${L}s, should have been closer to ${I}s`);const U=B-I;N-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,B,N):N-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,B,N);const{data:z,error:Y}=await this._getUser(g);if(Y)throw Y;const ee={provider_token:d,provider_refresh_token:p,access_token:g,expires_in:I,expires_at:B,refresh_token:E,token_type:v,user:z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ee,redirectType:r.type},error:null})}catch(d){if(ze(d))return this._returnResult({data:{session:null,redirectType:null},error:d});throw d}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const l=await Qa(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&l)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async l=>{var d;const{data:p,error:g}=l;if(g&&!nd(g))return this._returnResult({error:g});const E=(d=p.session)===null||d===void 0?void 0:d.access_token;if(E){const{error:S}=await this.admin.signOut(E,r);if(S&&!(Cx(S)&&(S.status===404||S.status===401||S.status===403)||nd(S)))return this._returnResult({error:S})}return r!=="others"&&(await this._removeSession(),await zn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const l=kx(),d={id:l,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,d),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:d}}}async _emitInitialSession(r){return await this._useSession(async l=>{var d,p;try{const{data:{session:g},error:E}=l;if(E)throw E;await((d=this.stateChangeEmitters.get(r))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",g)),this._debug("INITIAL_SESSION","callback id",r,"session",g)}catch(g){await((p=this.stateChangeEmitters.get(r))===null||p===void 0?void 0:p.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",g),console.error(g)}})}async resetPasswordForEmail(r,l={}){let d=null,p=null;this.flowType==="pkce"&&([d,p]=await Vs(this.storage,this.storageKey,!0));try{return await Xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:d,code_challenge_method:p,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(g){if(await zn(this.storage,`${this.storageKey}-code-verifier`),ze(g))return this._returnResult({data:null,error:g});throw g}}async getUserIdentities(){var r;try{const{data:l,error:d}=await this.getUser();if(d)throw d;return this._returnResult({data:{identities:(r=l.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(l){if(ze(l))return this._returnResult({data:null,error:l});throw l}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var l;try{const{data:d,error:p}=await this._useSession(async g=>{var E,S,_,v,N;const{data:I,error:B}=g;if(B)throw B;const L=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(E=r.options)===null||E===void 0?void 0:E.redirectTo,scopes:(S=r.options)===null||S===void 0?void 0:S.scopes,queryParams:(_=r.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await Xe(this.fetch,"GET",L,{headers:this.headers,jwt:(N=(v=I.session)===null||v===void 0?void 0:v.access_token)!==null&&N!==void 0?N:void 0})});if(p)throw p;return Pn()&&!(!((l=r.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(d?.url),this._returnResult({data:{provider:r.provider,url:d?.url},error:null})}catch(d){if(ze(d))return this._returnResult({data:{provider:r.provider,url:null},error:d});throw d}}async linkIdentityIdToken(r){return await this._useSession(async l=>{var d;try{const{error:p,data:{session:g}}=l;if(p)throw p;const{options:E,provider:S,token:_,access_token:v,nonce:N}=r,I=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(d=g?.access_token)!==null&&d!==void 0?d:void 0,body:{provider:S,id_token:_,access_token:v,nonce:N,link_identity:!0,gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:Ki}),{data:B,error:L}=I;return L?this._returnResult({data:{user:null,session:null},error:L}):!B||!B.session||!B.user?this._returnResult({data:{user:null,session:null},error:new Hs}):(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("USER_UPDATED",B.session)),this._returnResult({data:B,error:L}))}catch(p){if(await zn(this.storage,`${this.storageKey}-code-verifier`),ze(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}})}async unlinkIdentity(r){try{return await this._useSession(async l=>{var d,p;const{data:g,error:E}=l;if(E)throw E;return await Xe(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(p=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:void 0})})}catch(l){if(ze(l))return this._returnResult({data:null,error:l});throw l}}async _refreshAccessToken(r){const l=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{const d=Date.now();return await zx(async p=>(p>0&&await Ux(200*Math.pow(2,p-1)),this._debug(l,"refreshing attempt",p),await Xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Ki})),(p,g)=>{const E=200*Math.pow(2,p);return g&&id(g)&&Date.now()+E-d<Ks})}catch(d){if(this._debug(l,"error",d),ze(d))return this._returnResult({data:{session:null,user:null},error:d});throw d}finally{this._debug(l,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,l){const d=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",l,"url",d),Pn()&&!l.skipBrowserRedirect&&window.location.assign(d),{data:{provider:r,url:d},error:null}}async _recoverAndRefresh(){var r,l;const d="#_recoverAndRefresh()";this._debug(d,"begin");try{const p=await Qa(this.storage,this.storageKey);if(p&&this.userStorage){let E=await Qa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!E&&(E={user:p.user},await Zs(this.userStorage,this.storageKey+"-user",E)),p.user=(r=E?.user)!==null&&r!==void 0?r:rd()}else if(p&&!p.user&&!p.user){const E=await Qa(this.storage,this.storageKey+"-user");E&&E?.user?(p.user=E.user,await zn(this.storage,this.storageKey+"-user"),await Zs(this.storage,this.storageKey,p)):p.user=rd()}if(this._debug(d,"session from storage",p),!this._isValidSession(p)){this._debug(d,"session is not valid"),p!==null&&await this._removeSession();return}const g=((l=p.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<td;if(this._debug(d,`session has${g?"":" not"} expired with margin of ${td}s`),g){if(this.autoRefreshToken&&p.refresh_token){const{error:E}=await this._callRefreshToken(p.refresh_token);E&&(console.error(E),id(E)||(this._debug(d,"refresh failed with a non-retryable error, removing the session",E),await this._removeSession()))}}else if(p.user&&p.user.__isUserNotAvailableProxy===!0)try{const{data:E,error:S}=await this._getUser(p.access_token);!S&&E?.user?(p.user=E.user,await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)):this._debug(d,"could not get user data, skipping SIGNED_IN notification")}catch(E){console.error("Error getting user data:",E),this._debug(d,"error getting user data, skipping SIGNED_IN notification",E)}else await this._notifyAllSubscribers("SIGNED_IN",p)}catch(p){this._debug(d,"error",p),console.error(p);return}finally{this._debug(d,"end")}}async _callRefreshToken(r){var l,d;if(!r)throw new bi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const p=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(p,"begin");try{this.refreshingDeferred=new Zc;const{data:g,error:E}=await this._refreshAccessToken(r);if(E)throw E;if(!g.session)throw new bi;await this._saveSession(g.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",g.session);const S={data:g.session,error:null};return this.refreshingDeferred.resolve(S),S}catch(g){if(this._debug(p,"error",g),ze(g)){const E={data:null,error:g};return id(g)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(E),E}throw(d=this.refreshingDeferred)===null||d===void 0||d.reject(g),g}finally{this.refreshingDeferred=null,this._debug(p,"end")}}async _notifyAllSubscribers(r,l,d=!0){const p=`#_notifyAllSubscribers(${r})`;this._debug(p,"begin",l,`broadcast = ${d}`);try{this.broadcastChannel&&d&&this.broadcastChannel.postMessage({event:r,session:l});const g=[],E=Array.from(this.stateChangeEmitters.values()).map(async S=>{try{await S.callback(r,l)}catch(_){g.push(_)}});if(await Promise.all(E),g.length>0){for(let S=0;S<g.length;S+=1)console.error(g[S]);throw g[0]}}finally{this._debug(p,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await zn(this.storage,`${this.storageKey}-code-verifier`);const l=Object.assign({},r),d=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!d&&l.user&&await Zs(this.userStorage,this.storageKey+"-user",{user:l.user});const p=Object.assign({},l);delete p.user;const g=mg(p);await Zs(this.storage,this.storageKey,g)}else{const p=mg(l);await Zs(this.storage,this.storageKey,p)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await zn(this.storage,this.storageKey),await zn(this.storage,this.storageKey+"-code-verifier"),await zn(this.storage,this.storageKey+"-user"),this.userStorage&&await zn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Pn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Ks);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const l=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=l,l&&typeof l=="object"&&typeof l.unref=="function"?l.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(l)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const l=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,l&&clearTimeout(l)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async l=>{const{data:{session:d}}=l;if(!d||!d.refresh_token||!d.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const p=Math.floor((d.expires_at*1e3-r)/Ks);this._debug("#_autoRefreshTokenTick()",`access token expires in ${p} ticks, a tick lasts ${Ks}ms, refresh threshold is ${Sd} ticks`),p<=Sd&&await this._callRefreshToken(d.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof w2)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(r){this._debug("#visibilityChangedCallback","error",r)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const l=`#_onVisibilityChanged(${r})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,l,d){const p=[`provider=${encodeURIComponent(l)}`];if(d?.redirectTo&&p.push(`redirect_to=${encodeURIComponent(d.redirectTo)}`),d?.scopes&&p.push(`scopes=${encodeURIComponent(d.scopes)}`),this.flowType==="pkce"){const[g,E]=await Vs(this.storage,this.storageKey),S=new URLSearchParams({code_challenge:`${encodeURIComponent(g)}`,code_challenge_method:`${encodeURIComponent(E)}`});p.push(S.toString())}if(d?.queryParams){const g=new URLSearchParams(d.queryParams);p.push(g.toString())}return d?.skipBrowserRedirect&&p.push(`skip_http_redirect=${d.skipBrowserRedirect}`),`${r}?${p.join("&")}`}async _unenroll(r){try{return await this._useSession(async l=>{var d;const{data:p,error:g}=l;return g?this._returnResult({data:null,error:g}):await Xe(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(d=p?.session)===null||d===void 0?void 0:d.access_token})})}catch(l){if(ze(l))return this._returnResult({data:null,error:l});throw l}}async _enroll(r){try{return await this._useSession(async l=>{var d,p;const{data:g,error:E}=l;if(E)return this._returnResult({data:null,error:E});const S=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:_,error:v}=await Xe(this.fetch,"POST",`${this.url}/factors`,{body:S,headers:this.headers,jwt:(d=g?.session)===null||d===void 0?void 0:d.access_token});return v?this._returnResult({data:null,error:v}):(r.factorType==="totp"&&_.type==="totp"&&(!((p=_?.totp)===null||p===void 0)&&p.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),this._returnResult({data:_,error:null}))})}catch(l){if(ze(l))return this._returnResult({data:null,error:l});throw l}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var d;const{data:p,error:g}=l;if(g)return this._returnResult({data:null,error:g});const E=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?my(r.webauthn.credential_response):py(r.webauthn.credential_response)})}:{code:r.code}),{data:S,error:_}=await Xe(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:E,headers:this.headers,jwt:(d=p?.session)===null||d===void 0?void 0:d.access_token});return _?this._returnResult({data:null,error:_}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+S.expires_in},S)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",S),this._returnResult({data:S,error:_}))})}catch(l){if(ze(l))return this._returnResult({data:null,error:l});throw l}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var d;const{data:p,error:g}=l;if(g)return this._returnResult({data:null,error:g});const E=await Xe(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(d=p?.session)===null||d===void 0?void 0:d.access_token});if(E.error)return E;const{data:S}=E;if(S.type!=="webauthn")return{data:S,error:null};switch(S.webauthn.type){case"create":return{data:Object.assign(Object.assign({},S),{webauthn:Object.assign(Object.assign({},S.webauthn),{credential_options:Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:fy(S.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},S),{webauthn:Object.assign(Object.assign({},S.webauthn),{credential_options:Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:gy(S.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(ze(l))return this._returnResult({data:null,error:l});throw l}})}async _challengeAndVerify(r){const{data:l,error:d}=await this._challenge({factorId:r.factorId});return d?this._returnResult({data:null,error:d}):await this._verify({factorId:r.factorId,challengeId:l.id,code:r.code})}async _listFactors(){var r;const{data:{user:l},error:d}=await this.getUser();if(d)return{data:null,error:d};const p={all:[],phone:[],totp:[],webauthn:[]};for(const g of(r=l?.factors)!==null&&r!==void 0?r:[])p.all.push(g),g.status==="verified"&&p[g.factor_type].push(g);return{data:p,error:null}}async _getAuthenticatorAssuranceLevel(r){var l,d,p,g;if(r)try{const{payload:L}=Pc(r);let U=null;L.aal&&(U=L.aal);let z=U;const{data:{user:Y},error:ee}=await this.getUser(r);if(ee)return this._returnResult({data:null,error:ee});((d=(l=Y?.factors)===null||l===void 0?void 0:l.filter(ce=>ce.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(z="aal2");const K=L.amr||[];return{data:{currentLevel:U,nextLevel:z,currentAuthenticationMethods:K},error:null}}catch(L){if(ze(L))return this._returnResult({data:null,error:L});throw L}const{data:{session:E},error:S}=await this.getSession();if(S)return this._returnResult({data:null,error:S});if(!E)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:_}=Pc(E.access_token);let v=null;_.aal&&(v=_.aal);let N=v;((g=(p=E.user.factors)===null||p===void 0?void 0:p.filter(L=>L.status==="verified"))!==null&&g!==void 0?g:[]).length>0&&(N="aal2");const B=_.amr||[];return{data:{currentLevel:v,nextLevel:N,currentAuthenticationMethods:B},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async l=>{const{data:{session:d},error:p}=l;return p?this._returnResult({data:null,error:p}):d?await Xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:d.access_token,xform:g=>({data:g,error:null})}):this._returnResult({data:null,error:new bi})})}catch(l){if(ze(l))return this._returnResult({data:null,error:l});throw l}}async _approveAuthorization(r,l){try{return await this._useSession(async d=>{const{data:{session:p},error:g}=d;if(g)return this._returnResult({data:null,error:g});if(!p)return this._returnResult({data:null,error:new bi});const E=await Xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"approve"},xform:S=>({data:S,error:null})});return E.data&&E.data.redirect_url&&Pn()&&!l?.skipBrowserRedirect&&window.location.assign(E.data.redirect_url),E})}catch(d){if(ze(d))return this._returnResult({data:null,error:d});throw d}}async _denyAuthorization(r,l){try{return await this._useSession(async d=>{const{data:{session:p},error:g}=d;if(g)return this._returnResult({data:null,error:g});if(!p)return this._returnResult({data:null,error:new bi});const E=await Xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"deny"},xform:S=>({data:S,error:null})});return E.data&&E.data.redirect_url&&Pn()&&!l?.skipBrowserRedirect&&window.location.assign(E.data.redirect_url),E})}catch(d){if(ze(d))return this._returnResult({data:null,error:d});throw d}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?await Xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,xform:p=>({data:p,error:null})}):this._returnResult({data:null,error:new bi})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async l=>{const{data:{session:d},error:p}=l;return p?this._returnResult({data:null,error:p}):d?(await Xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:d.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new bi})})}catch(l){if(ze(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(r,l={keys:[]}){let d=l.keys.find(S=>S.kid===r);if(d)return d;const p=Date.now();if(d=this.jwks.keys.find(S=>S.kid===r),d&&this.jwks_cached_at+Sx>p)return d;const{data:g,error:E}=await Xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(E)throw E;return!g.keys||g.keys.length===0||(this.jwks=g,this.jwks_cached_at=p,d=g.keys.find(S=>S.kid===r),!d)?null:d}async getClaims(r,l={}){try{let d=r;if(!d){const{data:L,error:U}=await this.getSession();if(U||!L.session)return this._returnResult({data:null,error:U});d=L.session.access_token}const{header:p,payload:g,signature:E,raw:{header:S,payload:_}}=Pc(d);l?.allowExpired||Yx(g.exp);const v=!p.alg||p.alg.startsWith("HS")||!p.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(p.kid,l?.keys?{keys:l.keys}:l?.jwks);if(!v){const{error:L}=await this.getUser(d);if(L)throw L;return{data:{claims:g,header:p,signature:E},error:null}}const N=Xx(p.alg),I=await crypto.subtle.importKey("jwk",v,N,!0,["verify"]);if(!await crypto.subtle.verify(N,I,E,Mx(`${S}.${_}`)))throw new Td("Invalid JWT signature");return{data:{claims:g,header:p,signature:E},error:null}}catch(d){if(ze(d))return this._returnResult({data:null,error:d});throw d}}}lo.nextInstanceID={};const _y=lo,Cy="2.93.3";let Jl="";typeof Deno<"u"?Jl="deno":typeof document<"u"?Jl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jl="react-native":Jl="node";const Ty={"X-Client-Info":`supabase-js-${Jl}/${Cy}`},Ny={headers:Ty},Iy={schema:"public"},Oy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ry={};function oo(o){"@babel/helpers - typeof";return oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},oo(o)}function Dy(o,r){if(oo(o)!="object"||!o)return o;var l=o[Symbol.toPrimitive];if(l!==void 0){var d=l.call(o,r);if(oo(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}function My(o){var r=Dy(o,"string");return oo(r)=="symbol"?r:r+""}function By(o,r,l){return(r=My(r))in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function Eg(o,r){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(o);r&&(d=d.filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable})),l.push.apply(l,d)}return l}function ln(o){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?Eg(Object(l),!0).forEach(function(d){By(o,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):Eg(Object(l)).forEach(function(d){Object.defineProperty(o,d,Object.getOwnPropertyDescriptor(l,d))})}return o}const ky=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Ly=()=>Headers,jy=(o,r,l)=>{const d=ky(l),p=Ly();return async(g,E)=>{var S;const _=(S=await r())!==null&&S!==void 0?S:o;let v=new p(E?.headers);return v.has("apikey")||v.set("apikey",o),v.has("Authorization")||v.set("Authorization",`Bearer ${_}`),d(g,ln(ln({},E),{},{headers:v}))}};function Uy(o){return o.endsWith("/")?o:o+"/"}function zy(o,r){var l,d;const{db:p,auth:g,realtime:E,global:S}=o,{db:_,auth:v,realtime:N,global:I}=r,B={db:ln(ln({},_),p),auth:ln(ln({},v),g),realtime:ln(ln({},N),E),storage:{},global:ln(ln(ln({},I),S),{},{headers:ln(ln({},(l=I?.headers)!==null&&l!==void 0?l:{}),(d=S?.headers)!==null&&d!==void 0?d:{})}),accessToken:async()=>""};return o.accessToken?B.accessToken=o.accessToken:delete B.accessToken,B}function Py(o){const r=o?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Uy(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Fy=class extends _y{constructor(o){super(o)}},Hy=class{constructor(o,r,l){var d,p;this.supabaseUrl=o,this.supabaseKey=r;const g=Py(o);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const E=`sb-${g.hostname.split(".")[0]}-auth-token`,S={db:Iy,realtime:Ry,auth:ln(ln({},Oy),{},{storageKey:E}),global:Ny},_=zy(l??{},S);if(this.storageKey=(d=_.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(p=_.global.headers)!==null&&p!==void 0?p:{},_.accessToken)this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(N,I)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(I)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=_.auth)!==null&&v!==void 0?v:{},this.headers,_.global.fetch)}this.fetch=jy(r,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(ln({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(N=>this.realtime.setAuth(N)).catch(N=>console.warn("Failed to set initial Realtime auth token:",N)),this.rest=new Cp(new URL("rest/v1",g).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new wx(this.storageUrl.href,this.headers,this.fetch,l?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new bp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(o){return this.rest.from(o)}schema(o){return this.rest.schema(o)}rpc(o,r={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(o,r,l)}channel(o,r={config:{}}){return this.realtime.channel(o,r)}getChannels(){return this.realtime.getChannels()}removeChannel(o){return this.realtime.removeChannel(o)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var o=this,r,l;if(o.accessToken)return await o.accessToken();const{data:d}=await o.auth.getSession();return(r=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&r!==void 0?r:o.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:o,persistSession:r,detectSessionInUrl:l,storage:d,userStorage:p,storageKey:g,flowType:E,lock:S,debug:_,throwOnError:v},N,I){const B={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fy({url:this.authUrl.href,headers:ln(ln({},B),N),storageKey:g,autoRefreshToken:o,persistSession:r,detectSessionInUrl:l,storage:d,userStorage:p,flowType:E,lock:S,debug:_,throwOnError:v,fetch:I,hasCustomAuthorizationHeader:Object.keys(this.headers).some(L=>L.toLowerCase()==="authorization")})}_initRealtimeClient(o){return new Vp(this.realtimeUrl.href,ln(ln({},o),{},{params:ln(ln({},{apikey:this.supabaseKey}),o?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,r)=>{this._handleTokenChanged(o,"CLIENT",r?.access_token)})}_handleTokenChanged(o,r,l){(o==="TOKEN_REFRESHED"||o==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):o==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Vy=(o,r,l)=>new Hy(o,r,l);function Gy(){if(typeof window<"u")return!1;const o=globalThis.process;if(!o)return!1;const r=o.version;if(r==null)return!1;const l=r.match(/^v(\d+)\./);return l?parseInt(l[1],10)<=18:!1}Gy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qy="https://fjfeecztgyqjgpobyoem.supabase.co",Yy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqZmVlY3p0Z3lxamdwb2J5b2VtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4NDc0MDksImV4cCI6MjA4NTQyMzQwOX0.9MY34pcJGIlIs0e24xzbYUWfpr7GeG3-BLIcGtq0XL0",Ge=Vy(qy,Yy),E2=ue.createContext();function Xy({children:o}){const[r,l]=ue.useState(null),[d,p]=ue.useState(!0);ue.useEffect(()=>{const I=localStorage.getItem("app_user");if(I)try{l(JSON.parse(I))}catch(B){console.error("Invalid session data",B),localStorage.removeItem("app_user")}p(!1)},[]);const g=async(I,B)=>{try{if(!Ge)throw new Error("Supabase not connected");const{data:L,error:U}=await Ge.from("app_users").select("*").eq("pin",I).single();if(U||!L)throw new Error("Invalid PIN");const z={id:L.id,username:L.username,role:L.role,full_name:L.full_name};return l(z),B?localStorage.setItem("app_user",JSON.stringify(z)):localStorage.removeItem("app_user"),await Ge.from("login_logs").insert({user_id:L.id,full_name:L.full_name,role:L.role}),{success:!0}}catch(L){return{success:!1,error:L.message}}},E=()=>{l(null),localStorage.removeItem("app_user")},S=r&&(r.role==="SUPER_ADMIN"||r.role==="ADMIN"||r.role==="TEACHER"||r.role==="ASSISTANT_TEACHER"),_=r&&(r.role==="SUPER_ADMIN"||r.role==="ADMIN"),v=r&&(r.role==="SUPER_ADMIN"||r.role==="ADMIN"||r.role==="TEACHER"),N={user:r,loading:d,login:g,logout:E,permissions:{canEditStudents:S,canDeleteStudents:_,canUnlockAttendance:v}};return b.jsx(E2.Provider,{value:N,children:!d&&o})}function dr(){return ue.useContext(E2)}function Wy(){let o=localStorage.getItem("virtual_device_id");return o||(o="dev_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),localStorage.setItem("virtual_device_id",o)),o}function Ky({onFinish:o}){ue.useEffect(()=>{const d=setTimeout(o,2e3);return(async()=>{try{const g=Wy(),E=navigator.userAgent;Ge&&await Ge.from("device_logs").insert([{device_id:g,user_agent:E}])}catch(g){console.warn("Logging failed:",g)}})(),()=>clearTimeout(d)},[o]);const[r,l]=ue.useState(!1);return ue.useEffect(()=>{const d=setTimeout(()=>l(!0),5e3);return()=>clearTimeout(d)},[]),b.jsx("div",{className:"splash-screen",children:b.jsxs("div",{className:"splash-content",children:[b.jsx("img",{src:"/kids-church-app/newlogo.png",alt:"Logo",className:"splash-logo",style:{width:"120px",height:"120px",borderRadius:"20px",marginBottom:"16px",objectFit:"cover"}}),b.jsx("h1",{className:"splash-title",children:"CityPraise"}),b.jsx("p",{className:"splash-text",children:"Connect"}),r&&b.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},style:{marginTop:"32px",padding:"8px 16px",background:"transparent",border:"1px solid #fff",color:"#fff",borderRadius:"8px",cursor:"pointer",opacity:.7},children:"Tap to Reset App"})]})})}const A2=(...o)=>o.filter((r,l,d)=>!!r&&r.trim()!==""&&d.indexOf(r)===l).join(" ").trim();const Zy=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Qy=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,d)=>d?d.toUpperCase():l.toLowerCase());const Ag=o=>{const r=Qy(o);return r.charAt(0).toUpperCase()+r.slice(1)};var Jy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $y=o=>{for(const r in o)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};const ew=ue.forwardRef(({color:o="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:p="",children:g,iconNode:E,...S},_)=>ue.createElement("svg",{ref:_,...Jy,width:r,height:r,stroke:o,strokeWidth:d?Number(l)*24/Number(r):l,className:A2("lucide",p),...!g&&!$y(S)&&{"aria-hidden":"true"},...S},[...E.map(([v,N])=>ue.createElement(v,N)),...Array.isArray(g)?g:[g]]));const pt=(o,r)=>{const l=ue.forwardRef(({className:d,...p},g)=>ue.createElement(ew,{ref:g,iconNode:r,className:A2(`lucide-${Zy(Ag(o))}`,`lucide-${o}`,d),...p}));return l.displayName=Ag(o),l};const tw=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],nw=pt("activity",tw);const iw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],In=pt("arrow-left",iw);const rw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$l=pt("arrow-right",rw);const aw=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],S2=pt("arrow-up-down",aw);const sw=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],lw=pt("award",sw);const ow=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],co=pt("book-open",ow);const cw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],uw=pt("calendar",cw);const hw=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],dw=pt("chart-no-axes-column",hw);const fw=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fo=pt("circle-check-big",fw);const gw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mw=pt("circle-question-mark",gw);const pw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],_2=pt("clipboard-list",pw);const xw=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yw=pt("clock",xw);const ww=[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],Md=pt("contact",ww);const vw=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],bw=pt("flame",vw);const Ew=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Aw=pt("gift",Ew);const Sw=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],_w=pt("heart-handshake",Sw);const Cw=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],C2=pt("history",Cw);const Tw=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Nw=pt("key-round",Tw);const Iw=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Ow=pt("layout-grid",Iw);const Rw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],T2=pt("lock-open",Rw);const Dw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Nd=pt("lock",Dw);const Mw=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Bd=pt("log-out",Mw);const Bw=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],kd=pt("message-square",Bw);const kw=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],N2=pt("pen-line",kw);const Lw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ld=pt("plus",Lw);const jw=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],I2=pt("qr-code",jw);const Uw=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Id=pt("scan",Uw);const zw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],go=pt("search",zw);const Pw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],mo=pt("shield",Pw);const Fw=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],O2=pt("star",Fw);const Hw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jd=pt("trash-2",Hw);const Vw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ud=pt("triangle-alert",Vw);const Gw=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],R2=pt("trophy",Gw);const qw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qc=pt("user",qw);const Yw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],el=pt("users",Yw);function Xw(){const{login:o,loading:r}=dr(),[l,d]=ue.useState(null),[p,g]=ue.useState(""),[E,S]=ue.useState(""),[_,v]=ue.useState(!1),[N,I]=ue.useState(!1),B=Y=>{p.length<6&&g(ee=>ee+Y),S("")},L=()=>g(Y=>Y.slice(0,-1)),U=()=>g(""),z=async()=>{if(!p)return;v(!0),S("");const Y=await o(p,N);Y.success||(S(Y.error||"Invalid PIN"),g("")),v(!1)};return b.jsx("div",{className:"page fade-in",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"#F3F4F6"},children:b.jsxs("div",{className:"card",style:{padding:"32px",width:"100%",maxWidth:"400px",textAlign:"center"},children:[b.jsx("img",{src:"/kids-church-app/newlogo.png",alt:"Logo",style:{width:"80px",height:"80px",borderRadius:"16px",marginBottom:"8px",objectFit:"cover"}}),b.jsx("h2",{style:{marginBottom:"24px",color:"#1F2937"},children:"Login"}),b.jsxs("div",{style:{marginBottom:"24px"},children:[b.jsx("div",{style:{background:"#F9FAFB",border:"2px solid #E5E7EB",borderRadius:"12px",padding:"16px",fontSize:"24px",letterSpacing:"8px",fontWeight:"bold",minHeight:"64px",display:"flex",alignItems:"center",justifyContent:"center",color:"#374151"},children:p?"*".repeat(p.length):b.jsx("span",{style:{color:"#9CA3AF",fontSize:"16px",letterSpacing:"normal",fontWeight:"normal"},children:"Enter PIN"})}),E&&b.jsxs("div",{style:{color:"#DC2626",fontSize:"14px",marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[b.jsx(Ud,{size:14})," ",E]})]}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"24px"},children:[[1,2,3,4,5,6,7,8,9].map(Y=>b.jsx("button",{onClick:()=>B(Y),className:"btn secondary",style:{fontSize:"20px",padding:"16px"},children:Y},Y)),b.jsx("button",{onClick:U,className:"btn secondary",style:{fontSize:"14px",padding:"16px",color:"#EF4444"},children:"C"}),b.jsx("button",{onClick:()=>B(0),className:"btn secondary",style:{fontSize:"20px",padding:"16px"},children:"0"}),b.jsx("button",{onClick:L,className:"btn secondary",style:{fontSize:"14px",padding:"16px"},children:""})]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:[b.jsx("input",{type:"checkbox",id:"remember",checked:N,onChange:Y=>I(Y.target.checked),style:{width:"18px",height:"18px"}}),b.jsx("label",{htmlFor:"remember",style:{fontSize:"14px",color:"#4B5563",cursor:"pointer"},children:"Keep me signed in"})]}),b.jsxs("button",{className:"btn full-width",onClick:z,disabled:_||p.length<4,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[_?"Verifying...":"Login"," ",b.jsx($l,{size:20})]})]})})}var De;(function(o){o[o.QR_CODE=0]="QR_CODE",o[o.AZTEC=1]="AZTEC",o[o.CODABAR=2]="CODABAR",o[o.CODE_39=3]="CODE_39",o[o.CODE_93=4]="CODE_93",o[o.CODE_128=5]="CODE_128",o[o.DATA_MATRIX=6]="DATA_MATRIX",o[o.MAXICODE=7]="MAXICODE",o[o.ITF=8]="ITF",o[o.EAN_13=9]="EAN_13",o[o.EAN_8=10]="EAN_8",o[o.PDF_417=11]="PDF_417",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(De||(De={}));var Sg=new Map([[De.QR_CODE,"QR_CODE"],[De.AZTEC,"AZTEC"],[De.CODABAR,"CODABAR"],[De.CODE_39,"CODE_39"],[De.CODE_93,"CODE_93"],[De.CODE_128,"CODE_128"],[De.DATA_MATRIX,"DATA_MATRIX"],[De.MAXICODE,"MAXICODE"],[De.ITF,"ITF"],[De.EAN_13,"EAN_13"],[De.EAN_8,"EAN_8"],[De.PDF_417,"PDF_417"],[De.RSS_14,"RSS_14"],[De.RSS_EXPANDED,"RSS_EXPANDED"],[De.UPC_A,"UPC_A"],[De.UPC_E,"UPC_E"],[De.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),_g;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.URL=1]="URL"})(_g||(_g={}));function Ww(o){return Object.values(De).includes(o)}var Sa;(function(o){o[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Sa||(Sa={}));var Ji=(function(){function o(){}return o.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",o.SCAN_DEFAULT_FPS=2,o.DEFAULT_DISABLE_FLIP=!1,o.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,o.DEFAULT_SUPPORTED_SCAN_TYPE=[Sa.SCAN_TYPE_CAMERA,Sa.SCAN_TYPE_FILE],o})(),D2=(function(){function o(r,l){this.format=r,this.formatName=l}return o.prototype.toString=function(){return this.formatName},o.create=function(r){if(!Sg.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new o(r,Sg.get(r))},o})(),Cg=(function(){function o(){}return o.createFromText=function(r){var l={text:r};return{decodedText:r,result:l}},o.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},o})(),Od;(function(o){o[o.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",o[o.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",o[o.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Od||(Od={}));var M2=(function(){function o(){}return o.createFrom=function(r){return{errorMessage:r,type:Od.UNKWOWN_ERROR}},o})(),B2=(function(){function o(r){this.verbose=r}return o.prototype.log=function(r){this.verbose&&console.log(r)},o.prototype.warn=function(r){this.verbose&&console.warn(r)},o.prototype.logError=function(r,l){(this.verbose||l===!0)&&console.error(r)},o.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},o})();function hr(o){return typeof o>"u"||o===null}function Kw(o,r,l){return o>l?l:o<r?r:o}var Js=(function(){function o(){}return o.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},o.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},o.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},o.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},o.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},o.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},o.scannerPaused=function(){return"Scanner paused"},o})(),Bt=(function(){function o(){}return o.scanningStatus=function(){return"Scanning"},o.idleStatus=function(){return"Idle"},o.errorStatus=function(){return"Error"},o.permissionStatus=function(){return"Permission"},o.noCameraFoundErrorStatus=function(){return"No Cameras"},o.lastMatch=function(r){return"Last Match: ".concat(r)},o.codeScannerTitle=function(){return"Code Scanner"},o.cameraPermissionTitle=function(){return"Request Camera Permissions"},o.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},o.noCameraFound=function(){return"No camera found"},o.scanButtonStopScanningText=function(){return"Stop Scanning"},o.scanButtonStartScanningText=function(){return"Start Scanning"},o.torchOnButton=function(){return"Switch On Torch"},o.torchOffButton=function(){return"Switch Off Torch"},o.torchOnFailedMessage=function(){return"Failed to turn on torch"},o.torchOffFailedMessage=function(){return"Failed to turn off torch"},o.scanButtonScanningStarting=function(){return"Launching Camera..."},o.textIfCameraScanSelected=function(){return"Scan an Image File"},o.textIfFileScanSelected=function(){return"Scan using camera directly"},o.selectCamera=function(){return"Select Camera"},o.fileSelectionChooseImage=function(){return"Choose Image"},o.fileSelectionChooseAnother=function(){return"Choose Another"},o.fileSelectionNoImageSelected=function(){return"No image choosen"},o.anonymousCameraPrefix=function(){return"Anonymous Camera"},o.dragAndDropMessage=function(){return"Or drop an image to scan"},o.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},o.zoom=function(){return"zoom"},o.loadingImage=function(){return"Loading image..."},o.cameraScanAltText=function(){return"Camera based scan"},o.fileScanAltText=function(){return"Fule based scan"},o})(),Tg=(function(){function o(){}return o.poweredBy=function(){return"Powered by "},o.reportIssues=function(){return"Report issues"},o})(),k2=(function(){function o(){}return o.isMediaStreamConstraintsValid=function(r,l){if(typeof r!="object"){var d=typeof r;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(d,"."),!0),!1}for(var p=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(p),E=Object.keys(r),S=0,_=E;S<_.length;S++){var v=_[S];if(g.has(v))return l.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},o})(),eo={exports:{}},Zw=eo.exports,Ng;function Qw(){return Ng||(Ng=1,(function(o,r){(function(l,d){d(r)})(Zw,(function(l){function d(O){return O==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,t){O.__proto__=t}||function(O,t){for(var i in t)t.hasOwnProperty(i)&&(O[i]=t[i])};function g(O,t){p(O,t);function i(){this.constructor=O}O.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function E(O,t){var i=Object.setPrototypeOf;i?i(O,t):O.__proto__=t}function S(O,t){t===void 0&&(t=O.constructor);var i=Error.captureStackTrace;i&&i(O,t)}var _=(function(O){g(t,O);function t(i){var a=this.constructor,c=O.call(this,i)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),E(c,a.prototype),S(c),c}return t})(Error);class v extends _{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class N extends v{}N.kind="ArgumentException";class I extends v{}I.kind="IllegalArgumentException";class B{constructor(t){if(this.binarizer=t,t===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,a,c){const u=this.binarizer.getLuminanceSource().crop(t,i,a,c);return new B(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new B(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new B(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class L extends v{static getChecksumInstance(){return new L}}L.kind="ChecksumException";class U{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class z{static arraycopy(t,i,a,c,u){for(;u--;)a[c++]=t[i++]}static currentTimeMillis(){return Date.now()}}class Y extends v{}Y.kind="IndexOutOfBoundsException";class ee extends Y{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}ee.kind="ArrayIndexOutOfBoundsException";class ie{static fill(t,i){for(let a=0,c=t.length;a<c;a++)t[a]=i}static fillWithin(t,i,a,c){ie.rangeCheck(t.length,i,a);for(let u=i;u<a;u++)t[u]=c}static rangeCheck(t,i,a){if(i>a)throw new I("fromIndex("+i+") > toIndex("+a+")");if(i<0)throw new ee(i);if(a>t)throw new ee(a)}static asList(...t){return t}static create(t,i,a){return Array.from({length:t}).map(u=>Array.from({length:i}).fill(a))}static createInt32Array(t,i,a){return Array.from({length:t}).map(u=>Int32Array.from({length:i}).fill(a))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let a=0,c=t.length;a<c;a++)if(t[a]!==i[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const a of t)i=31*i+a;return i}static fillUint8Array(t,i){for(let a=0;a!==t.length;a++)t[a]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const a=new Uint8Array(i);return a.set(t),a}return t.slice(0,i)}static copyOfRange(t,i,a){const c=a-i,u=new Int32Array(c);return z.arraycopy(t,i,u,0,c),u}static binarySearch(t,i,a){a===void 0&&(a=ie.numberComparator);let c=0,u=t.length-1;for(;c<=u;){const f=u+c>>1,m=a(i,t[f]);if(m>0)c=f+1;else if(m<0)u=f-1;else return f}return-c-1}static numberComparator(t,i){return t-i}}class K{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let a=31;return i=t<<16,i!==0&&(a-=16,t=i),i=t<<8,i!==0&&(a-=8,t=i),i=t<<4,i!==0&&(a-=4,t=i),i=t<<2,i!==0&&(a-=2,t=i),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=ce.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=ce.makeArray(t);z.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const a=this.bits;let c=Math.floor(t/32),u=a[c];u&=~((1<<(t&31))-1);const f=a.length;for(;u===0;){if(++c===f)return i;u=a[c]}const m=c*32+K.numberOfTrailingZeros(u);return m>i?i:m}getNextUnset(t){const i=this.size;if(t>=i)return i;const a=this.bits;let c=Math.floor(t/32),u=~a[c];u&=~((1<<(t&31))-1);const f=a.length;for(;u===0;){if(++c===f)return i;u=~a[c]}const m=c*32+K.numberOfTrailingZeros(u);return m>i?i:m}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new I;if(i===t)return;i--;const a=Math.floor(t/32),c=Math.floor(i/32),u=this.bits;for(let f=a;f<=c;f++){const m=f>a?0:t&31,A=(2<<(f<c?31:i&31))-(1<<m);u[f]|=A}}clear(){const t=this.bits.length,i=this.bits;for(let a=0;a<t;a++)i[a]=0}isRange(t,i,a){if(i<t||t<0||i>this.size)throw new I;if(i===t)return!0;i--;const c=Math.floor(t/32),u=Math.floor(i/32),f=this.bits;for(let m=c;m<=u;m++){const y=m>c?0:t&31,C=(2<<(m<u?31:i&31))-(1<<y)&4294967295;if((f[m]&C)!==(a?C:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let a=i;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let a=0;a<i;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new I("Sizes don't match");const i=this.bits;for(let a=0,c=i.length;a<c;a++)i[a]^=t.bits[a]}toBytes(t,i,a,c){for(let u=0;u<c;u++){let f=0;for(let m=0;m<8;m++)this.get(t)&&(f|=1<<7-m),t++;i[a+u]=f}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),a=i+1,c=this.bits;for(let u=0;u<a;u++){let f=c[u];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,t[i-u]=f}if(this.size!==a*32){const u=a*32-this.size;let f=t[0]>>>u;for(let m=1;m<a;m++){const y=t[m];f|=y<<32-u,t[m-1]=f,f=y>>>u}t[a-1]=f}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof ce))return!1;const i=t;return this.size===i.size&&ie.equals(this.bits,i.bits)}hashCode(){return 31*this.size+ie.hashCode(this.bits)}toString(){let t="";for(let i=0,a=this.size;i<a;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new ce(this.size,this.bits.slice())}}var Ie;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ie||(Ie={}));var be=Ie;class W extends v{static getFormatInstance(){return new W}}W.kind="FormatException";var he;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(he||(he={}));class oe{constructor(t,i,a,...c){this.valueIdentifier=t,this.name=a,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=c,oe.VALUE_IDENTIFIER_TO_ECI.set(t,this),oe.NAME_TO_ECI.set(a,this);const u=this.values;for(let f=0,m=u.length;f!==m;f++){const y=u[f];oe.VALUES_TO_ECI.set(y,this)}for(const f of c)oe.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new W("incorect value");const i=oe.VALUES_TO_ECI.get(t);if(i===void 0)throw new W("incorect value");return i}static getCharacterSetECIByName(t){const i=oe.NAME_TO_ECI.get(t);if(i===void 0)throw new W("incorect value");return i}equals(t){if(!(t instanceof oe))return!1;const i=t;return this.getName()===i.getName()}}oe.VALUE_IDENTIFIER_TO_ECI=new Map,oe.VALUES_TO_ECI=new Map,oe.NAME_TO_ECI=new Map,oe.Cp437=new oe(he.Cp437,Int32Array.from([0,2]),"Cp437"),oe.ISO8859_1=new oe(he.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),oe.ISO8859_2=new oe(he.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),oe.ISO8859_3=new oe(he.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),oe.ISO8859_4=new oe(he.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),oe.ISO8859_5=new oe(he.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),oe.ISO8859_6=new oe(he.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),oe.ISO8859_7=new oe(he.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),oe.ISO8859_8=new oe(he.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),oe.ISO8859_9=new oe(he.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),oe.ISO8859_10=new oe(he.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),oe.ISO8859_11=new oe(he.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),oe.ISO8859_13=new oe(he.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),oe.ISO8859_14=new oe(he.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),oe.ISO8859_15=new oe(he.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),oe.ISO8859_16=new oe(he.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),oe.SJIS=new oe(he.SJIS,20,"SJIS","Shift_JIS"),oe.Cp1250=new oe(he.Cp1250,21,"Cp1250","windows-1250"),oe.Cp1251=new oe(he.Cp1251,22,"Cp1251","windows-1251"),oe.Cp1252=new oe(he.Cp1252,23,"Cp1252","windows-1252"),oe.Cp1256=new oe(he.Cp1256,24,"Cp1256","windows-1256"),oe.UnicodeBigUnmarked=new oe(he.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),oe.UTF8=new oe(he.UTF8,26,"UTF8","UTF-8"),oe.ASCII=new oe(he.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),oe.Big5=new oe(he.Big5,28,"Big5"),oe.GB18030=new oe(he.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),oe.EUC_KR=new oe(he.EUC_KR,30,"EUC_KR","EUC-KR");class wt extends v{}wt.kind="UnsupportedOperationException";class Ke{static decode(t,i){const a=this.encodingName(i);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!Ke.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const a=this.encodingName(i);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof oe?t:oe.getCharacterSetECIByName(t)}static decodeFallback(t,i){const a=this.encodingCharacterSet(i);if(Ke.isDecodeFallbackSupported(a)){let c="";for(let u=0,f=t.length;u<f;u++){let m=t[u].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(a.equals(oe.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new wt(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(oe.UTF8)||t.equals(oe.ISO8859_1)||t.equals(oe.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class _e{static castAsNonUtf8Char(t,i=null){const a=i?i.getName():this.ISO88591;return Ke.decode(new Uint8Array([t]),a)}static guessEncoding(t,i){if(i!=null&&i.get(be.CHARACTER_SET)!==void 0)return i.get(be.CHARACTER_SET).toString();const a=t.length;let c=!0,u=!0,f=!0,m=0,y=0,A=0,C=0,R=0,D=0,j=0,F=0,V=0,X=0,re=0;const Ae=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let Ee=0;Ee<a&&(c||u||f);Ee++){const we=t[Ee]&255;f&&(m>0?(we&128)===0?f=!1:m--:(we&128)!==0&&((we&64)===0?f=!1:(m++,(we&32)===0?y++:(m++,(we&16)===0?A++:(m++,(we&8)===0?C++:f=!1))))),c&&(we>127&&we<160?c=!1:we>159&&(we<192||we===215||we===247)&&re++),u&&(R>0?we<64||we===127||we>252?u=!1:R--:we===128||we===160||we>239?u=!1:we>160&&we<224?(D++,F=0,j++,j>V&&(V=j)):we>127?(R++,j=0,F++,F>X&&(X=F)):(j=0,F=0))}return f&&m>0&&(f=!1),u&&R>0&&(u=!1),f&&(Ae||y+A+C>0)?_e.UTF8:u&&(_e.ASSUME_SHIFT_JIS||V>=3||X>=3)?_e.SHIFT_JIS:c&&u?V===2&&D===2||re*10>=a?_e.SHIFT_JIS:_e.ISO88591:c?_e.ISO88591:u?_e.SHIFT_JIS:f?_e.UTF8:_e.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let a=-1;function c(f,m,y,A,C,R){if(f==="%%")return"%";if(i[++a]===void 0)return;f=A?parseInt(A.substr(1)):void 0;let D=C?parseInt(C.substr(1)):void 0,j;switch(R){case"s":j=i[a];break;case"c":j=i[a][0];break;case"f":j=parseFloat(i[a]).toFixed(f);break;case"p":j=parseFloat(i[a]).toPrecision(f);break;case"e":j=parseFloat(i[a]).toExponential(f);break;case"x":j=parseInt(i[a]).toString(D||16);break;case"d":j=parseFloat(parseInt(i[a],D||10).toPrecision(f)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(D);let F=parseInt(y),V=y&&y[0]+""=="0"?"0":" ";for(;j.length<F;)j=m!==void 0?j+V:V+j;return j}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,c)}static getBytes(t,i){return Ke.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}_e.SHIFT_JIS=oe.SJIS.getName(),_e.GB2312="GB2312",_e.ISO88591=oe.ISO8859_1.getName(),_e.EUC_JP="EUC_JP",_e.UTF8=oe.UTF8.getName(),_e.PLATFORM_DEFAULT_ENCODING=_e.UTF8,_e.ASSUME_SHIFT_JIS=!1;class ve{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=_e.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,a){for(let c=i;i<i+a;c++)this.append(t[c]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class Ne{constructor(t,i,a,c){if(this.width=t,this.height=i,this.rowSize=a,this.bits=c,i==null&&(i=t),this.height=i,t<1||i<1)throw new I("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,a=t[0].length,c=new Ne(a,i);for(let u=0;u<i;u++){const f=t[u];for(let m=0;m<a;m++)f[m]&&c.set(m,u)}return c}static parseFromString(t,i,a){if(t===null)throw new I("stringRepresentation cannot be null");const c=new Array(t.length);let u=0,f=0,m=-1,y=0,A=0;for(;A<t.length;)if(t.charAt(A)===`
`||t.charAt(A)==="\r"){if(u>f){if(m===-1)m=u-f;else if(u-f!==m)throw new I("row lengths do not match");f=u,y++}A++}else if(t.substring(A,A+i.length)===i)A+=i.length,c[u]=!0,u++;else if(t.substring(A,A+a.length)===a)A+=a.length,c[u]=!1,u++;else throw new I("illegal character encountered: "+t.substring(A));if(u>f){if(m===-1)m=u-f;else if(u-f!==m)throw new I("row lengths do not match");y++}const C=new Ne(m,y);for(let R=0;R<u;R++)c[R]&&C.set(Math.floor(R%m),Math.floor(R/m));return C}get(t,i){const a=i*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new I("input matrix dimensions do not match");const i=new ce(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,f=this.height;u<f;u++){const m=u*a,y=t.getRow(u,i).getBitArray();for(let A=0;A<a;A++)c[m+A]^=y[A]}}clear(){const t=this.bits,i=t.length;for(let a=0;a<i;a++)t[a]=0}setRegion(t,i,a,c){if(i<0||t<0)throw new I("Left and top must be nonnegative");if(c<1||a<1)throw new I("Height and width must be at least 1");const u=t+a,f=i+c;if(f>this.height||u>this.width)throw new I("The region must fit inside the matrix");const m=this.rowSize,y=this.bits;for(let A=i;A<f;A++){const C=A*m;for(let R=t;R<u;R++)y[C+Math.floor(R/32)]|=1<<(R&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new ce(this.width):i.clear();const a=this.rowSize,c=this.bits,u=t*a;for(let f=0;f<a;f++)i.setBulk(f*32,c[u+f]);return i}setRow(t,i){z.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let a=new ce(t),c=new ce(t);for(let u=0,f=Math.floor((i+1)/2);u<f;u++)a=this.getRow(u,a),c=this.getRow(i-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(i-1-u,a)}getEnclosingRectangle(){const t=this.width,i=this.height,a=this.rowSize,c=this.bits;let u=t,f=i,m=-1,y=-1;for(let A=0;A<i;A++)for(let C=0;C<a;C++){const R=c[A*a+C];if(R!==0){if(A<f&&(f=A),A>y&&(y=A),C*32<u){let D=0;for(;(R<<31-D&4294967295)===0;)D++;C*32+D<u&&(u=C*32+D)}if(C*32+31>m){let D=31;for(;!(R>>>D);)D--;C*32+D>m&&(m=C*32+D)}}}return m<u||y<f?null:Int32Array.from([u,f,m-u+1,y-f+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let a=0;for(;a<i.length&&i[a]===0;)a++;if(a===i.length)return null;const c=a/t;let u=a%t*32;const f=i[a];let m=0;for(;(f<<31-m&4294967295)===0;)m++;return u+=m,Int32Array.from([u,c])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let a=i.length-1;for(;a>=0&&i[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/t);let u=Math.floor(a%t)*32;const f=i[a];let m=31;for(;!(f>>>m);)m--;return u+=m,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Ne))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&ie.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+ie.hashCode(this.bits),t}toString(t="X ",i="  ",a=`
`){return this.buildToString(t,i,a)}buildToString(t,i,a){let c=new ve;for(let u=0,f=this.height;u<f;u++){for(let m=0,y=this.width;m<y;m++)c.append(this.get(m,u)?t:i);c.append(a)}return c.toString()}clone(){return new Ne(this.width,this.height,this.rowSize,this.bits.slice())}}class J extends v{static getNotFoundInstance(){return new J}}J.kind="NotFoundException";class te extends U{constructor(t){super(t),this.luminances=te.EMPTY,this.buckets=new Int32Array(te.LUMINANCE_BUCKETS)}getBlackRow(t,i){const a=this.getLuminanceSource(),c=a.getWidth();i==null||i.getSize()<c?i=new ce(c):i.clear(),this.initArrays(c);const u=a.getRow(t,this.luminances),f=this.buckets;for(let y=0;y<c;y++)f[(u[y]&255)>>te.LUMINANCE_SHIFT]++;const m=te.estimateBlackPoint(f);if(c<3)for(let y=0;y<c;y++)(u[y]&255)<m&&i.set(y);else{let y=u[0]&255,A=u[1]&255;for(let C=1;C<c-1;C++){const R=u[C+1]&255;(A*4-y-R)/2<m&&i.set(C),y=A,A=R}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight(),c=new Ne(i,a);this.initArrays(i);const u=this.buckets;for(let y=1;y<5;y++){const A=Math.floor(a*y/5),C=t.getRow(A,this.luminances),R=Math.floor(i*4/5);for(let D=Math.floor(i/5);D<R;D++){const j=C[D]&255;u[j>>te.LUMINANCE_SHIFT]++}}const f=te.estimateBlackPoint(u),m=t.getMatrix();for(let y=0;y<a;y++){const A=y*i;for(let C=0;C<i;C++)(m[A+C]&255)<f&&c.set(C,y)}return c}createBinarizer(t){return new te(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let a=0;a<te.LUMINANCE_BUCKETS;a++)i[a]=0}static estimateBlackPoint(t){const i=t.length;let a=0,c=0,u=0;for(let C=0;C<i;C++)t[C]>u&&(c=C,u=t[C]),t[C]>a&&(a=t[C]);let f=0,m=0;for(let C=0;C<i;C++){const R=C-c,D=t[C]*R*R;D>m&&(f=C,m=D)}if(c>f){const C=c;c=f,f=C}if(f-c<=i/16)throw new J;let y=f-1,A=-1;for(let C=f-1;C>c;C--){const R=C-c,D=R*R*(f-C)*(a-t[C]);D>A&&(y=C,A=D)}return y<<te.LUMINANCE_SHIFT}}te.LUMINANCE_BITS=5,te.LUMINANCE_SHIFT=8-te.LUMINANCE_BITS,te.LUMINANCE_BUCKETS=1<<te.LUMINANCE_BITS,te.EMPTY=Uint8ClampedArray.from([0]);class fe extends te{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight();if(i>=fe.MINIMUM_DIMENSION&&a>=fe.MINIMUM_DIMENSION){const c=t.getMatrix();let u=i>>fe.BLOCK_SIZE_POWER;(i&fe.BLOCK_SIZE_MASK)!==0&&u++;let f=a>>fe.BLOCK_SIZE_POWER;(a&fe.BLOCK_SIZE_MASK)!==0&&f++;const m=fe.calculateBlackPoints(c,u,f,i,a),y=new Ne(i,a);fe.calculateThresholdForBlock(c,u,f,i,a,m,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new fe(t)}static calculateThresholdForBlock(t,i,a,c,u,f,m){const y=u-fe.BLOCK_SIZE,A=c-fe.BLOCK_SIZE;for(let C=0;C<a;C++){let R=C<<fe.BLOCK_SIZE_POWER;R>y&&(R=y);const D=fe.cap(C,2,a-3);for(let j=0;j<i;j++){let F=j<<fe.BLOCK_SIZE_POWER;F>A&&(F=A);const V=fe.cap(j,2,i-3);let X=0;for(let Ae=-2;Ae<=2;Ae++){const Ee=f[D+Ae];X+=Ee[V-2]+Ee[V-1]+Ee[V]+Ee[V+1]+Ee[V+2]}const re=X/25;fe.thresholdBlock(t,F,R,re,c,m)}}}static cap(t,i,a){return t<i?i:t>a?a:t}static thresholdBlock(t,i,a,c,u,f){for(let m=0,y=a*u+i;m<fe.BLOCK_SIZE;m++,y+=u)for(let A=0;A<fe.BLOCK_SIZE;A++)(t[y+A]&255)<=c&&f.set(i+A,a+m)}static calculateBlackPoints(t,i,a,c,u){const f=u-fe.BLOCK_SIZE,m=c-fe.BLOCK_SIZE,y=new Array(a);for(let A=0;A<a;A++){y[A]=new Int32Array(i);let C=A<<fe.BLOCK_SIZE_POWER;C>f&&(C=f);for(let R=0;R<i;R++){let D=R<<fe.BLOCK_SIZE_POWER;D>m&&(D=m);let j=0,F=255,V=0;for(let re=0,Ae=C*c+D;re<fe.BLOCK_SIZE;re++,Ae+=c){for(let Ee=0;Ee<fe.BLOCK_SIZE;Ee++){const we=t[Ae+Ee]&255;j+=we,we<F&&(F=we),we>V&&(V=we)}if(V-F>fe.MIN_DYNAMIC_RANGE)for(re++,Ae+=c;re<fe.BLOCK_SIZE;re++,Ae+=c)for(let Ee=0;Ee<fe.BLOCK_SIZE;Ee++)j+=t[Ae+Ee]&255}let X=j>>fe.BLOCK_SIZE_POWER*2;if(V-F<=fe.MIN_DYNAMIC_RANGE&&(X=F/2,A>0&&R>0)){const re=(y[A-1][R]+2*y[A][R-1]+y[A-1][R-1])/4;F<re&&(X=re)}y[A][R]=X}}return y}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class Ce{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,a,c){throw new wt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new wt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new wt("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new ve;for(let a=0;a<this.height;a++){const c=this.getRow(a,t);for(let u=0;u<this.width;u++){const f=c[u]&255;let m;f<64?m="#":f<128?m="+":f<192?m=".":m=" ",i.append(m)}i.append(`
`)}return i.toString()}}class Re extends Ce{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const a=this.delegate.getRow(t,i),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(i);for(let c=0;c<i;c++)a[c]=255-(t[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,a,c){return new Re(this.delegate.crop(t,i,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Re(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Re(this.delegate.rotateCounterClockwise45())}}class Le extends Ce{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=Le.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return Le.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,a){const c=new Uint8ClampedArray(i*a);for(let u=0,f=0,m=t.length;u<m;u+=4,f++){let y;if(t[u+3]===0)y=255;else{const C=t[u],R=t[u+1],D=t[u+2];y=306*C+601*R+117*D+512>>10}c[f]=y}return c}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const a=this.getWidth(),c=t*a;return i===null?i=this.buffer.slice(c,c+a):(i.length<a&&(i=new Uint8ClampedArray(a)),i.set(this.buffer.slice(c,c+a))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,a,c){return super.crop(t,i,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),a=i.getContext("2d"),c=t*Le.DEGREE_TO_RADIANS,u=this.canvas.width,f=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*f),y=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*f);return i.width=m,i.height=y,a.translate(m/2,y/2),a.rotate(c),a.drawImage(this.canvas,u/-2,f/-2),this.buffer=Le.makeBufferFromCanvasImageData(i),this}invert(){return new Re(this)}}Le.DEGREE_TO_RADIANS=Math.PI/180;class H{constructor(t,i,a){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var le=(globalThis||Bc||self||window||void 0)&&(globalThis||Bc||self||window||void 0).__awaiter||function(O,t,i,a){function c(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function m(C){try{A(a.next(C))}catch(R){f(R)}}function y(C){try{A(a.throw(C))}catch(R){f(R)}}function A(C){C.done?u(C.value):c(C.value).then(m,y)}A((a=a.apply(O,t||[])).next())})};class Te{constructor(t,i=500,a){this.reader=t,this.timeBetweenScansMillis=i,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const a of t){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,f=a.label||`Video device ${i.length+1}`,m=a.groupId,y={deviceId:u,label:f,kind:c,groupId:m};i.push(y)}return i})}getVideoInputDevices(){return le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new H(i.deviceId,i.label))})}findDeviceById(t){return le(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return le(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,i)})}decodeOnceFromConstraints(t,i){return le(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,i)})}decodeOnceFromStream(t,i){return le(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,i,a){return le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,a)})}decodeFromVideoDevice(t,i,a){return le(this,void 0,void 0,function*(){let c;t?c={deviceId:{exact:t}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,i,a)})}decodeFromConstraints(t,i,a){return le(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(c,i,a)})}decodeFromStream(t,i,a){return le(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return le(this,void 0,void 0,function*(){const a=this.prepareVideoElement(i);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((i,a)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return le(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const a=document.getElementById(t);if(!a)throw new N(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==i.toLowerCase())throw new N(`element with id '${t}' must be an ${i} element`);return a}decodeFromImage(t,i){if(!t&&!i)throw new N("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new N("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,a){if(t===void 0&&i===void 0)throw new N("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new N("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let a;return this.isImageLoaded(i)?a=this.decodeOnce(i,!1,!0):a=this._decodeOnLoadImage(i),a}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,i)}_decodeFromVideoElementSetup(t){if(!t)throw new N("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const a=this._decodeOnLoadImage(i);return i.src=t,a}decodeFromVideoUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElement(i);return i.src=t,a}decodeFromVideoUrlContinuously(t,i){if(!t)throw new N("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,i);return a.src=t,c}_decodeOnLoadImage(t){return new Promise((i,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,f)=>{if(this._stopAsyncDecode){f(new J("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(t);u(m)}catch(m){const y=i&&m instanceof J,C=(m instanceof L||m instanceof W)&&a;if(y||C)return setTimeout(c,this._timeBetweenDecodingAttempts,u,f);f(m)}};return new Promise((u,f)=>c(u,f))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(t);i(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){i(null,c);const u=c instanceof L||c instanceof W,f=c instanceof J;(u||f)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,a){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,a=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),a=new Le(i),c=new fe(a);return new B(c)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let a,c;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,c=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,c=t.naturalHeight||t.height)),i.style.width=a+"px",i.style.height=c+"px",i.width=a,i.height=c,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class ge{constructor(t,i,a=i==null?0:8*i.length,c,u,f=z.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=f,this.text=t,this.rawBytes=i,a==null?this.numBits=i==null?0:8*i.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,f==null?this.timestamp=z.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(i.length+t.length);z.arraycopy(i,0,a,0,i.length),z.arraycopy(t,0,a,i.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ke;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ke||(ke={}));var pe=ke,Ye;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ye||(Ye={}));var tt=Ye;class St{constructor(t,i,a,c,u=-1,f=-1){this.rawBytes=t,this.text=i,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=f,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Vn{exp(t){return this.expTable[t]}log(t){if(t===0)throw new I;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class on{constructor(t,i){if(i.length===0)throw new I;this.field=t;const a=i.length;if(a>1&&i[0]===0){let c=1;for(;c<a&&i[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),z.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let a;if(t===1){a=0;for(let f=0,m=i.length;f!==m;f++){const y=i[f];a=Vn.addOrSubtract(a,y)}return a}a=i[0];const c=i.length,u=this.field;for(let f=1;f<c;f++)a=Vn.addOrSubtract(u.multiply(t,a),i[f]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){const f=i;i=a,a=f}let c=new Int32Array(a.length);const u=a.length-i.length;z.arraycopy(a,0,c,0,u);for(let f=u;f<a.length;f++)c[f]=Vn.addOrSubtract(i[f-u],a[f]);return new on(this.field,c)}multiply(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,a=i.length,c=t.coefficients,u=c.length,f=new Int32Array(a+u-1),m=this.field;for(let y=0;y<a;y++){const A=i[y];for(let C=0;C<u;C++)f[y+C]=Vn.addOrSubtract(f[y+C],m.multiply(A,c[C]))}return new on(m,f)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,a=this.field,c=new Int32Array(i),u=this.coefficients;for(let f=0;f<i;f++)c[f]=a.multiply(u[f],t);return new on(a,c)}multiplyByMonomial(t,i){if(t<0)throw new I;if(i===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+t),f=this.field;for(let m=0;m<c;m++)u[m]=f.multiply(a[m],i);return new on(f,u)}divide(t){if(!this.field.equals(t.field))throw new I("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new I("Divide by 0");const i=this.field;let a=i.getZero(),c=this;const u=t.getCoefficient(t.getDegree()),f=i.inverse(u);for(;c.getDegree()>=t.getDegree()&&!c.isZero();){const m=c.getDegree()-t.getDegree(),y=i.multiply(c.getCoefficient(c.getDegree()),f),A=t.multiplyByMonomial(m,y),C=i.buildMonomial(m,y);a=a.addOrSubtract(C),c=c.addOrSubtract(A)}return[a,c]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),i===0||a!==1){const c=this.field.log(a);c===0?t+="1":c===1?t+="a":(t+="a^",t+=c)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class En extends v{}En.kind="ArithmeticException";class Je extends Vn{constructor(t,i,a){super(),this.primitive=t,this.size=i,this.generatorBase=a;const c=new Int32Array(i);let u=1;for(let m=0;m<i;m++)c[m]=u,u*=2,u>=i&&(u^=t,u&=i-1);this.expTable=c;const f=new Int32Array(i);for(let m=0;m<i-1;m++)f[c[m]]=m;this.logTable=f,this.zero=new on(this,Int32Array.from([0])),this.one=new on(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new I;if(i===0)return this.zero;const a=new Int32Array(t+1);return a[0]=i,new on(this,a)}inverse(t){if(t===0)throw new En;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Je.AZTEC_DATA_12=new Je(4201,4096,1),Je.AZTEC_DATA_10=new Je(1033,1024,1),Je.AZTEC_DATA_6=new Je(67,64,1),Je.AZTEC_PARAM=new Je(19,16,1),Je.QR_CODE_FIELD_256=new Je(285,256,0),Je.DATA_MATRIX_FIELD_256=new Je(301,256,1),Je.AZTEC_DATA_8=Je.DATA_MATRIX_FIELD_256,Je.MAXICODE_FIELD_64=Je.AZTEC_DATA_6;class Gn extends v{}Gn.kind="ReedSolomonException";class Fn extends v{}Fn.kind="IllegalStateException";class Ci{constructor(t){this.field=t}decode(t,i){const a=this.field,c=new on(a,t),u=new Int32Array(i);let f=!0;for(let j=0;j<i;j++){const F=c.evaluateAt(a.exp(j+a.getGeneratorBase()));u[u.length-1-j]=F,F!==0&&(f=!1)}if(f)return;const m=new on(a,u),y=this.runEuclideanAlgorithm(a.buildMonomial(i,1),m,i),A=y[0],C=y[1],R=this.findErrorLocations(A),D=this.findErrorMagnitudes(C,R);for(let j=0;j<R.length;j++){const F=t.length-1-a.log(R[j]);if(F<0)throw new Gn("Bad error location");t[F]=Je.addOrSubtract(t[F],D[j])}}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){const j=t;t=i,i=j}const c=this.field;let u=t,f=i,m=c.getZero(),y=c.getOne();for(;f.getDegree()>=(a/2|0);){let j=u,F=m;if(u=f,m=y,u.isZero())throw new Gn("r_{i-1} was zero");f=j;let V=c.getZero();const X=u.getCoefficient(u.getDegree()),re=c.inverse(X);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){const Ae=f.getDegree()-u.getDegree(),Ee=c.multiply(f.getCoefficient(f.getDegree()),re);V=V.addOrSubtract(c.buildMonomial(Ae,Ee)),f=f.addOrSubtract(u.multiplyByMonomial(Ae,Ee))}if(y=V.multiply(m).addOrSubtract(F),f.getDegree()>=u.getDegree())throw new Fn("Division algorithm failed to reduce polynomial?")}const A=y.getCoefficient(0);if(A===0)throw new Gn("sigmaTilde(0) was zero");const C=c.inverse(A),R=y.multiplyScalar(C),D=f.multiplyScalar(C);return[R,D]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(i);let c=0;const u=this.field;for(let f=1;f<u.getSize()&&c<i;f++)t.evaluateAt(f)===0&&(a[c]=u.inverse(f),c++);if(c!==i)throw new Gn("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,i){const a=i.length,c=new Int32Array(a),u=this.field;for(let f=0;f<a;f++){const m=u.inverse(i[f]);let y=1;for(let A=0;A<a;A++)if(f!==A){const C=u.multiply(i[A],m),R=(C&1)===0?C|1:C&-2;y=u.multiply(y,R)}c[f]=u.multiply(t.evaluateAt(m),u.inverse(y)),u.getGeneratorBase()!==0&&(c[f]=u.multiply(c[f],m))}return c}}var gn;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(gn||(gn={}));class vt{decode(t){this.ddata=t;let i=t.getBits(),a=this.extractBits(i),c=this.correctBits(a),u=vt.convertBoolArrayToByteArray(c),f=vt.getEncodedData(c),m=new St(u,f,null,null);return m.setNumBits(c.length),m}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,a=gn.UPPER,c=gn.UPPER,u="",f=0;for(;f<i;)if(c===gn.BINARY){if(i-f<5)break;let m=vt.readCode(t,f,5);if(f+=5,m===0){if(i-f<11)break;m=vt.readCode(t,f,11)+31,f+=11}for(let y=0;y<m;y++){if(i-f<8){f=i;break}const A=vt.readCode(t,f,8);u+=_e.castAsNonUtf8Char(A),f+=8}c=a}else{let m=c===gn.DIGIT?4:5;if(i-f<m)break;let y=vt.readCode(t,f,m);f+=m;let A=vt.getCharacter(c,y);A.startsWith("CTRL_")?(a=c,c=vt.getTable(A.charAt(5)),A.charAt(6)==="L"&&(a=c)):(u+=A,c=a)}return u}static getTable(t){switch(t){case"L":return gn.LOWER;case"P":return gn.PUNCT;case"M":return gn.MIXED;case"D":return gn.DIGIT;case"B":return gn.BINARY;default:return gn.UPPER}}static getCharacter(t,i){switch(t){case gn.UPPER:return vt.UPPER_TABLE[i];case gn.LOWER:return vt.LOWER_TABLE[i];case gn.MIXED:return vt.MIXED_TABLE[i];case gn.PUNCT:return vt.PUNCT_TABLE[i];case gn.DIGIT:return vt.DIGIT_TABLE[i];default:throw new Fn("Bad table")}}correctBits(t){let i,a;this.ddata.getNbLayers()<=2?(a=6,i=Je.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,i=Je.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,i=Je.AZTEC_DATA_10):(a=12,i=Je.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=t.length/a;if(u<c)throw new W;let f=t.length%a,m=new Int32Array(u);for(let D=0;D<u;D++,f+=a)m[D]=vt.readCode(t,f,a);try{new Ci(i).decode(m,u-c)}catch(D){throw new W(D)}let y=(1<<a)-1,A=0;for(let D=0;D<c;D++){let j=m[D];if(j===0||j===y)throw new W;(j===1||j===y-1)&&A++}let C=new Array(c*a-A),R=0;for(let D=0;D<c;D++){let j=m[D];if(j===1||j===y-1)C.fill(j>1,R,R+a-1),R+=a-1;else for(let F=a-1;F>=0;--F)C[R++]=(j&1<<F)!==0}return C}extractBits(t){let i=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(i?11:14)+a*4,u=new Int32Array(c),f=new Array(this.totalBitsInLayer(a,i));if(i)for(let m=0;m<u.length;m++)u[m]=m;else{let m=c+1+2*K.truncDivision(K.truncDivision(c,2)-1,15),y=c/2,A=K.truncDivision(m,2);for(let C=0;C<y;C++){let R=C+K.truncDivision(C,15);u[y-C-1]=A-R-1,u[y+C]=A+R+1}}for(let m=0,y=0;m<a;m++){let A=(a-m)*4+(i?9:12),C=m*2,R=c-1-C;for(let D=0;D<A;D++){let j=D*2;for(let F=0;F<2;F++)f[y+j+F]=t.get(u[C+F],u[C+D]),f[y+2*A+j+F]=t.get(u[C+D],u[R-F]),f[y+4*A+j+F]=t.get(u[R-F],u[R-D]),f[y+6*A+j+F]=t.get(u[R-D],u[C+F])}y+=A*8}return f}static readCode(t,i,a){let c=0;for(let u=i;u<i+a;u++)c<<=1,t[u]&&(c|=1);return c}static readByte(t,i){let a=t.length-i;return a>=8?vt.readCode(t,i,8):vt.readCode(t,i,a)<<8-a}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let a=0;a<i.length;a++)i[a]=vt.readByte(t,8*a);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class st{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,a,c){const u=t-a,f=i-c;return Math.sqrt(u*u+f*f)}static sum(t){let i=0;for(let a=0,c=t.length;a!==c;a++){const u=t[a];i+=u}return i}}class Ur{static floatToIntBits(t){return t}}Ur.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Me{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Me){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Ur.floatToIntBits(this.x)+Ur.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),c=this.distance(t[0],t[2]);let u,f,m;if(a>=i&&a>=c?(f=t[0],u=t[1],m=t[2]):c>=a&&c>=i?(f=t[1],u=t[0],m=t[2]):(f=t[2],u=t[0],m=t[1]),this.crossProductZ(u,f,m)<0){const y=u;u=m,m=y}t[0]=u,t[1]=f,t[2]=m}static distance(t,i){return st.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,a){const c=i.x,u=i.y;return(a.x-c)*(t.y-u)-(a.y-u)*(t.x-c)}}class ns{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class po extends ns{constructor(t,i,a,c,u){super(t,i),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Jt{constructor(t,i,a,c){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Jt.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),c==null&&(c=t.getHeight()/2|0);const u=i/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}detect(){let t=this.leftInit,i=this.rightInit,a=this.upInit,c=this.downInit,u=!1,f=!0,m=!1,y=!1,A=!1,C=!1,R=!1;const D=this.width,j=this.height;for(;f;){f=!1;let F=!0;for(;(F||!y)&&i<D;)F=this.containsBlackPoint(a,c,i,!1),F?(i++,f=!0,y=!0):y||i++;if(i>=D){u=!0;break}let V=!0;for(;(V||!A)&&c<j;)V=this.containsBlackPoint(t,i,c,!0),V?(c++,f=!0,A=!0):A||c++;if(c>=j){u=!0;break}let X=!0;for(;(X||!C)&&t>=0;)X=this.containsBlackPoint(a,c,t,!1),X?(t--,f=!0,C=!0):C||t--;if(t<0){u=!0;break}let re=!0;for(;(re||!R)&&a>=0;)re=this.containsBlackPoint(t,i,a,!0),re?(a--,f=!0,R=!0):R||a--;if(a<0){u=!0;break}f&&(m=!0)}if(!u&&m){const F=i-t;let V=null;for(let Ee=1;V===null&&Ee<F;Ee++)V=this.getBlackPointOnSegment(t,c-Ee,t+Ee,c);if(V==null)throw new J;let X=null;for(let Ee=1;X===null&&Ee<F;Ee++)X=this.getBlackPointOnSegment(t,a+Ee,t+Ee,a);if(X==null)throw new J;let re=null;for(let Ee=1;re===null&&Ee<F;Ee++)re=this.getBlackPointOnSegment(i,a+Ee,i-Ee,a);if(re==null)throw new J;let Ae=null;for(let Ee=1;Ae===null&&Ee<F;Ee++)Ae=this.getBlackPointOnSegment(i,c-Ee,i-Ee,c);if(Ae==null)throw new J;return this.centerEdges(Ae,V,re,X)}else throw new J}getBlackPointOnSegment(t,i,a,c){const u=st.round(st.distance(t,i,a,c)),f=(a-t)/u,m=(c-i)/u,y=this.image;for(let A=0;A<u;A++){const C=st.round(t+A*f),R=st.round(i+A*m);if(y.get(C,R))return new Me(C,R)}return null}centerEdges(t,i,a,c){const u=t.getX(),f=t.getY(),m=i.getX(),y=i.getY(),A=a.getX(),C=a.getY(),R=c.getX(),D=c.getY(),j=Jt.CORR;return u<this.width/2?[new Me(R-j,D+j),new Me(m+j,y+j),new Me(A-j,C-j),new Me(u+j,f-j)]:[new Me(R+j,D+j),new Me(m+j,y-j),new Me(A-j,C+j),new Me(u-j,f-j)]}containsBlackPoint(t,i,a,c){const u=this.image;if(c){for(let f=t;f<=i;f++)if(u.get(f,a))return!0}else for(let f=t;f<=i;f++)if(u.get(a,f))return!0;return!1}}Jt.INIT_SIZE=10,Jt.CORR=1;class nl{static checkAndNudgePoints(t,i){const a=t.getWidth(),c=t.getHeight();let u=!0;for(let f=0;f<i.length&&u;f+=2){const m=Math.floor(i[f]),y=Math.floor(i[f+1]);if(m<-1||m>a||y<-1||y>c)throw new J;u=!1,m===-1?(i[f]=0,u=!0):m===a&&(i[f]=a-1,u=!0),y===-1?(i[f+1]=0,u=!0):y===c&&(i[f+1]=c-1,u=!0)}u=!0;for(let f=i.length-2;f>=0&&u;f-=2){const m=Math.floor(i[f]),y=Math.floor(i[f+1]);if(m<-1||m>a||y<-1||y>c)throw new J;u=!1,m===-1?(i[f]=0,u=!0):m===a&&(i[f]=a-1,u=!0),y===-1?(i[f+1]=0,u=!0):y===c&&(i[f+1]=c-1,u=!0)}}}class Jn{constructor(t,i,a,c,u,f,m,y,A){this.a11=t,this.a21=i,this.a31=a,this.a12=c,this.a22=u,this.a32=f,this.a13=m,this.a23=y,this.a33=A}static quadrilateralToQuadrilateral(t,i,a,c,u,f,m,y,A,C,R,D,j,F,V,X){const re=Jn.quadrilateralToSquare(t,i,a,c,u,f,m,y);return Jn.squareToQuadrilateral(A,C,R,D,j,F,V,X).times(re)}transformPoints(t){const i=t.length,a=this.a11,c=this.a12,u=this.a13,f=this.a21,m=this.a22,y=this.a23,A=this.a31,C=this.a32,R=this.a33;for(let D=0;D<i;D+=2){const j=t[D],F=t[D+1],V=u*j+y*F+R;t[D]=(a*j+f*F+A)/V,t[D+1]=(c*j+m*F+C)/V}}transformPointsWithValues(t,i){const a=this.a11,c=this.a12,u=this.a13,f=this.a21,m=this.a22,y=this.a23,A=this.a31,C=this.a32,R=this.a33,D=t.length;for(let j=0;j<D;j++){const F=t[j],V=i[j],X=u*F+y*V+R;t[j]=(a*F+f*V+A)/X,i[j]=(c*F+m*V+C)/X}}static squareToQuadrilateral(t,i,a,c,u,f,m,y){const A=t-a+u-m,C=i-c+f-y;if(A===0&&C===0)return new Jn(a-t,u-a,t,c-i,f-c,i,0,0,1);{const R=a-u,D=m-u,j=c-f,F=y-f,V=R*F-D*j,X=(A*F-D*C)/V,re=(R*C-A*j)/V;return new Jn(a-t+X*a,m-t+re*m,t,c-i+X*c,y-i+re*y,i,X,re,1)}}static quadrilateralToSquare(t,i,a,c,u,f,m,y){return Jn.squareToQuadrilateral(t,i,a,c,u,f,m,y).buildAdjoint()}buildAdjoint(){return new Jn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Jn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class il extends nl{sampleGrid(t,i,a,c,u,f,m,y,A,C,R,D,j,F,V,X,re,Ae,Ee){const we=Jn.quadrilateralToQuadrilateral(c,u,f,m,y,A,C,R,D,j,F,V,X,re,Ae,Ee);return this.sampleGridWithTransform(t,i,a,we)}sampleGridWithTransform(t,i,a,c){if(i<=0||a<=0)throw new J;const u=new Ne(i,a),f=new Float32Array(2*i);for(let m=0;m<a;m++){const y=f.length,A=m+.5;for(let C=0;C<y;C+=2)f[C]=C/2+.5,f[C+1]=A;c.transformPoints(f),nl.checkAndNudgePoints(t,f);try{for(let C=0;C<y;C+=2)t.get(Math.floor(f[C]),Math.floor(f[C+1]))&&u.set(C/2,m)}catch{throw new J}}return u}}class oi{static setGridSampler(t){oi.gridSampler=t}static getInstance(){return oi.gridSampler}}oi.gridSampler=new il;class Dn{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class rl{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),a=this.getBullsEyeCorners(i);if(t){let f=a[0];a[0]=a[2],a[2]=f}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new po(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new J;let i=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(a,i);let c=0;for(let f=0;f<4;f++){let m=a[(this.shift+f)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,i){let a=0;t.forEach((c,u,f)=>{let m=(c>>i-2<<1)+(c&1);a=(a<<3)+m}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(K.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new J}getCorrectedParameterData(t,i){let a,c;i?(a=7,c=2):(a=10,c=4);let u=a-c,f=new Int32Array(a);for(let y=a-1;y>=0;--y)f[y]=t&15,t>>=4;try{new Ci(Je.AZTEC_PARAM).decode(f,u)}catch{throw new J}let m=0;for(let y=0;y<c;y++)m=(m<<4)+f[y];return m}getBullsEyeCorners(t){let i=t,a=t,c=t,u=t,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let R=this.getFirstDifferent(i,f,1,-1),D=this.getFirstDifferent(a,f,1,1),j=this.getFirstDifferent(c,f,-1,1),F=this.getFirstDifferent(u,f,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(F,R)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(R,D,j,F))break}i=R,a=D,c=j,u=F,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;let m=new Me(i.getX()+.5,i.getY()-.5),y=new Me(a.getX()+.5,a.getY()+.5),A=new Me(c.getX()-.5,c.getY()+.5),C=new Me(u.getX()-.5,u.getY()-.5);return this.expandSquare([m,y,A,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,a,c;try{let m=new Jt(this.image).detect();t=m[0],i=m[1],a=m[2],c=m[3]}catch{let y=this.image.getWidth()/2,A=this.image.getHeight()/2;t=this.getFirstDifferent(new Dn(y+7,A-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Dn(y+7,A+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Dn(y-7,A+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Dn(y-7,A-7),!1,-1,-1).toResultPoint()}let u=st.round((t.getX()+c.getX()+i.getX()+a.getX())/4),f=st.round((t.getY()+c.getY()+i.getY()+a.getY())/4);try{let m=new Jt(this.image,15,u,f).detect();t=m[0],i=m[1],a=m[2],c=m[3]}catch{t=this.getFirstDifferent(new Dn(u+7,f-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Dn(u+7,f+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Dn(u-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Dn(u-7,f-7),!1,-1,-1).toResultPoint()}return u=st.round((t.getX()+c.getX()+i.getX()+a.getX())/4),f=st.round((t.getY()+c.getY()+i.getY()+a.getY())/4),new Dn(u,f)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,a,c,u){let f=oi.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,A=m/2+this.nbCenterLayers;return f.sampleGrid(t,m,m,y,y,A,y,A,A,y,A,i.getX(),i.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(t,i,a){let c=0,u=this.distanceResultPoint(t,i),f=u/a,m=t.getX(),y=t.getY(),A=f*(i.getX()-t.getX())/u,C=f*(i.getY()-t.getY())/u;for(let R=0;R<a;R++)this.image.get(st.round(m+R*A),st.round(y+R*C))&&(c|=1<<a-R-1);return c}isWhiteOrBlackRectangle(t,i,a,c){let u=3;t=new Dn(t.getX()-u,t.getY()+u),i=new Dn(i.getX()-u,i.getY()-u),a=new Dn(a.getX()+u,a.getY()-u),c=new Dn(c.getX()+u,c.getY()+u);let f=this.getColor(c,t);if(f===0)return!1;let m=this.getColor(t,i);return m!==f||(m=this.getColor(i,a),m!==f)?!1:(m=this.getColor(a,c),m===f)}getColor(t,i){let a=this.distancePoint(t,i),c=(i.getX()-t.getX())/a,u=(i.getY()-t.getY())/a,f=0,m=t.getX(),y=t.getY(),A=this.image.get(t.getX(),t.getY()),C=Math.ceil(a);for(let D=0;D<C;D++)m+=c,y+=u,this.image.get(st.round(m),st.round(y))!==A&&f++;let R=f/a;return R>.1&&R<.9?0:R<=.1===A?1:-1}getFirstDifferent(t,i,a,c){let u=t.getX()+a,f=t.getY()+c;for(;this.isValid(u,f)&&this.image.get(u,f)===i;)u+=a,f+=c;for(u-=a,f-=c;this.isValid(u,f)&&this.image.get(u,f)===i;)u+=a;for(u-=a;this.isValid(u,f)&&this.image.get(u,f)===i;)f+=c;return f-=c,new Dn(u,f)}expandSquare(t,i,a){let c=a/(2*i),u=t[0].getX()-t[2].getX(),f=t[0].getY()-t[2].getY(),m=(t[0].getX()+t[2].getX())/2,y=(t[0].getY()+t[2].getY())/2,A=new Me(m+c*u,y+c*f),C=new Me(m-c*u,y-c*f);u=t[1].getX()-t[3].getX(),f=t[1].getY()-t[3].getY(),m=(t[1].getX()+t[3].getX())/2,y=(t[1].getY()+t[3].getY())/2;let R=new Me(m+c*u,y+c*f),D=new Me(m-c*u,y-c*f);return[A,R,C,D]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=st.round(t.getX()),a=st.round(t.getY());return this.isValid(i,a)}distancePoint(t,i){return st.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return st.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class is{decode(t,i=null){let a=null,c=new rl(t.getBlackMatrix()),u=null,f=null;try{let C=c.detectMirror(!1);u=C.getPoints(),this.reportFoundResultPoints(i,u),f=new vt().decode(C)}catch(C){a=C}if(f==null)try{let C=c.detectMirror(!0);u=C.getPoints(),this.reportFoundResultPoints(i,u),f=new vt().decode(C)}catch(C){throw a??C}let m=new ge(f.getText(),f.getRawBytes(),f.getNumBits(),u,pe.AZTEC,z.currentTimeMillis()),y=f.getByteSegments();y!=null&&m.putMetadata(tt.BYTE_SEGMENTS,y);let A=f.getECLevel();return A!=null&&m.putMetadata(tt.ERROR_CORRECTION_LEVEL,A),m}reportFoundResultPoints(t,i){if(t!=null){let a=t.get(be.NEED_RESULT_POINT_CALLBACK);a!=null&&i.forEach((c,u,f)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Jc extends Te{constructor(t=500){super(new is,t)}}class Vt{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(be.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),f=this.doDecode(u,i),m=f.getResultMetadata();let y=270;m!==null&&m.get(tt.ORIENTATION)===!0&&(y=y+m.get(tt.ORIENTATION)%360),f.putMetadata(tt.ORIENTATION,y);const A=f.getResultPoints();if(A!==null){const C=u.getHeight();for(let R=0;R<A.length;R++)A[R]=new Me(C-A[R].getY()-1,A[R].getX())}return f}else throw new J}}reset(){}doDecode(t,i){const a=t.getWidth(),c=t.getHeight();let u=new ce(a);const f=i&&i.get(be.TRY_HARDER)===!0,m=Math.max(1,c>>(f?8:5));let y;f?y=c:y=15;const A=Math.trunc(c/2);for(let C=0;C<y;C++){const R=Math.trunc((C+1)/2),D=(C&1)===0,j=A+m*(D?R:-R);if(j<0||j>=c)break;try{u=t.getBlackRow(j,u)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(u.reverse(),i&&i.get(be.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;i.forEach((X,re)=>V.set(re,X)),V.delete(be.NEED_RESULT_POINT_CALLBACK),i=V}try{const V=this.decodeRow(j,u,i);if(F===1){V.putMetadata(tt.ORIENTATION,180);const X=V.getResultPoints();X!==null&&(X[0]=new Me(a-X[0].getX()-1,X[0].getY()),X[1]=new Me(a-X[1].getX()-1,X[1].getY()))}return V}catch{}}}throw new J}static recordPattern(t,i,a){const c=a.length;for(let A=0;A<c;A++)a[A]=0;const u=t.getSize();if(i>=u)throw new J;let f=!t.get(i),m=0,y=i;for(;y<u;){if(t.get(y)!==f)a[m]++;else{if(++m===c)break;a[m]=1,f=!f}y++}if(!(m===c||m===c-1&&y===u))throw new J}static recordPatternInReverse(t,i,a){let c=a.length,u=t.get(i);for(;i>0&&c>=0;)t.get(--i)!==u&&(c--,u=!u);if(c>=0)throw new J;Vt.recordPattern(t,i+1,a)}static patternMatchVariance(t,i,a){const c=t.length;let u=0,f=0;for(let A=0;A<c;A++)u+=t[A],f+=i[A];if(u<f)return Number.POSITIVE_INFINITY;const m=u/f;a*=m;let y=0;for(let A=0;A<c;A++){const C=t[A],R=i[A]*m,D=C>R?C-R:R-C;if(D>a)return Number.POSITIVE_INFINITY;y+=D}return y/u}}class Se extends Vt{static findStartPattern(t){const i=t.getSize(),a=t.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),f=a,m=!1;const y=6;for(let A=a;A<i;A++)if(t.get(A)!==m)u[c]++;else{if(c===y-1){let C=Se.MAX_AVG_VARIANCE,R=-1;for(let D=Se.CODE_START_A;D<=Se.CODE_START_C;D++){const j=Vt.patternMatchVariance(u,Se.CODE_PATTERNS[D],Se.MAX_INDIVIDUAL_VARIANCE);j<C&&(C=j,R=D)}if(R>=0&&t.isRange(Math.max(0,f-(A-f)/2),f,!1))return Int32Array.from([f,A,R]);f+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,m=!m}throw new J}static decodeCode(t,i,a){Vt.recordPattern(t,a,i);let c=Se.MAX_AVG_VARIANCE,u=-1;for(let f=0;f<Se.CODE_PATTERNS.length;f++){const m=Se.CODE_PATTERNS[f],y=this.patternMatchVariance(i,m,Se.MAX_INDIVIDUAL_VARIANCE);y<c&&(c=y,u=f)}if(u>=0)return u;throw new J}decodeRow(t,i,a){const c=a&&a.get(be.ASSUME_GS1)===!0,u=Se.findStartPattern(i),f=u[2];let m=0;const y=new Uint8Array(20);y[m++]=f;let A;switch(f){case Se.CODE_START_A:A=Se.CODE_CODE_A;break;case Se.CODE_START_B:A=Se.CODE_CODE_B;break;case Se.CODE_START_C:A=Se.CODE_CODE_C;break;default:throw new W}let C=!1,R=!1,D="",j=u[0],F=u[1];const V=Int32Array.from([0,0,0,0,0,0]);let X=0,re=0,Ae=f,Ee=0,we=!0,at=!1,Qe=!1;for(;!C;){const wr=R;switch(R=!1,X=re,re=Se.decodeCode(i,V,F),y[m++]=re,re!==Se.CODE_STOP&&(we=!0),re!==Se.CODE_STOP&&(Ee++,Ae+=Ee*re),j=F,F+=V.reduce((Ro,pl)=>Ro+pl,0),re){case Se.CODE_START_A:case Se.CODE_START_B:case Se.CODE_START_C:throw new W}switch(A){case Se.CODE_CODE_A:if(re<64)Qe===at?D+=String.fromCharCode(32+re):D+=String.fromCharCode(32+re+128),Qe=!1;else if(re<96)Qe===at?D+=String.fromCharCode(re-64):D+=String.fromCharCode(re+64),Qe=!1;else switch(re!==Se.CODE_STOP&&(we=!1),re){case Se.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_A:!at&&Qe?(at=!0,Qe=!1):at&&Qe?(at=!1,Qe=!1):Qe=!0;break;case Se.CODE_SHIFT:R=!0,A=Se.CODE_CODE_B;break;case Se.CODE_CODE_B:A=Se.CODE_CODE_B;break;case Se.CODE_CODE_C:A=Se.CODE_CODE_C;break;case Se.CODE_STOP:C=!0;break}break;case Se.CODE_CODE_B:if(re<96)Qe===at?D+=String.fromCharCode(32+re):D+=String.fromCharCode(32+re+128),Qe=!1;else switch(re!==Se.CODE_STOP&&(we=!1),re){case Se.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_B:!at&&Qe?(at=!0,Qe=!1):at&&Qe?(at=!1,Qe=!1):Qe=!0;break;case Se.CODE_SHIFT:R=!0,A=Se.CODE_CODE_A;break;case Se.CODE_CODE_A:A=Se.CODE_CODE_A;break;case Se.CODE_CODE_C:A=Se.CODE_CODE_C;break;case Se.CODE_STOP:C=!0;break}break;case Se.CODE_CODE_C:if(re<100)re<10&&(D+="0"),D+=re;else switch(re!==Se.CODE_STOP&&(we=!1),re){case Se.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case Se.CODE_CODE_A:A=Se.CODE_CODE_A;break;case Se.CODE_CODE_B:A=Se.CODE_CODE_B;break;case Se.CODE_STOP:C=!0;break}break}wr&&(A=A===Se.CODE_CODE_A?Se.CODE_CODE_B:Se.CODE_CODE_A)}const nn=F-j;if(F=i.getNextUnset(F),!i.isRange(F,Math.min(i.getSize(),F+(F-j)/2),!1))throw new J;if(Ae-=Ee*X,Ae%103!==X)throw new L;const ni=D.length;if(ni===0)throw new J;ni>0&&we&&(A===Se.CODE_CODE_C?D=D.substring(0,ni-2):D=D.substring(0,ni-1));const Bn=(u[1]+u[0])/2,Ot=j+nn/2,Cn=y.length,Zn=new Uint8Array(Cn);for(let wr=0;wr<Cn;wr++)Zn[wr]=y[wr];const Jr=[new Me(Bn,t),new Me(Ot,t)];return new ge(D,Zn,0,Jr,pe.CODE_128,new Date().getTime())}}Se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Se.MAX_AVG_VARIANCE=.25,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.CODE_SHIFT=98,Se.CODE_CODE_C=99,Se.CODE_CODE_B=100,Se.CODE_CODE_A=101,Se.CODE_FNC_1=102,Se.CODE_FNC_2=97,Se.CODE_FNC_3=96,Se.CODE_FNC_4_A=101,Se.CODE_FNC_4_B=100,Se.CODE_START_A=103,Se.CODE_START_B=104,Se.CODE_START_C=105,Se.CODE_STOP=106;class kt extends Vt{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=kt.findAsteriskPattern(i,c),f=i.getNextSet(u[1]),m=i.getSize(),y,A;do{kt.recordPattern(i,f,c);let V=kt.toNarrowWidePattern(c);if(V<0)throw new J;y=kt.patternToChar(V),this.decodeRowResult+=y,A=f;for(let X of c)f+=X;f=i.getNextSet(f)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let V of c)C+=V;let R=f-A-C;if(f!==m&&R*2<C)throw new J;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,X=0;for(let re=0;re<V;re++)X+=kt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(re));if(this.decodeRowResult.charAt(V)!==kt.ALPHABET_STRING.charAt(X%43))throw new L;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new J;let D;this.extendedMode?D=kt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let j=(u[1]+u[0])/2,F=A+C/2;return new ge(D,null,0,[new Me(j,t),new Me(F,t)],pe.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let a=t.getSize(),c=t.getNextSet(0),u=0,f=c,m=!1,y=i.length;for(let A=c;A<a;A++)if(t.get(A)!==m)i[u]++;else{if(u===y-1){if(this.toNarrowWidePattern(i)===kt.ASTERISK_ENCODING&&t.isRange(Math.max(0,f-Math.floor((A-f)/2)),f,!1))return[f,A];f+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,m=!m}throw new J}static toNarrowWidePattern(t){let i=t.length,a=0,c;do{let u=2147483647;for(let y of t)y<u&&y>a&&(u=y);a=u,c=0;let f=0,m=0;for(let y=0;y<i;y++){let A=t[y];A>a&&(m|=1<<i-1-y,c++,f+=A)}if(c===3){for(let y=0;y<i&&c>0;y++){let A=t[y];if(A>a&&(c--,A*2>=f))return-1}return m}}while(c>3);return-1}static patternToChar(t){for(let i=0;i<kt.CHARACTER_ENCODINGS.length;i++)if(kt.CHARACTER_ENCODINGS[i]===t)return kt.ALPHABET_STRING.charAt(i);if(t===kt.ASTERISK_ENCODING)return"*";throw new J}static decodeExtended(t){let i=t.length,a="";for(let c=0;c<i;c++){let u=t.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let f=t.charAt(c+1),m="\0";switch(u){case"+":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)+32);else throw new W;break;case"$":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)-64);else throw new W;break;case"%":if(f>="A"&&f<="E")m=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")m=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")m=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")m="\0";else if(f==="V")m="@";else if(f==="W")m="`";else if(f==="X"||f==="Y"||f==="Z")m="";else throw new W;break;case"/":if(f>="A"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")m=":";else throw new W;break}a+=m,c++}else a+=u}return a}}kt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",kt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],kt.ASTERISK_ENCODING=148;class nt extends Vt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,a){let c=this.decodeStart(i),u=this.decodeEnd(i),f=new ve;nt.decodeMiddle(i,c[1],u[0],f);let m=f.toString(),y=null;a!=null&&(y=a.get(be.ALLOWED_LENGTHS)),y==null&&(y=nt.DEFAULT_ALLOWED_LENGTHS);let A=m.length,C=!1,R=0;for(let F of y){if(A===F){C=!0;break}F>R&&(R=F)}if(!C&&A>R&&(C=!0),!C)throw new W;const D=[new Me(c[1],t),new Me(u[0],t)];return new ge(m,null,0,D,pe.ITF,new Date().getTime())}static decodeMiddle(t,i,a,c){let u=new Int32Array(10),f=new Int32Array(5),m=new Int32Array(5);for(u.fill(0),f.fill(0),m.fill(0);i<a;){Vt.recordPattern(t,i,u);for(let A=0;A<5;A++){let C=2*A;f[A]=u[C],m[A]=u[C+1]}let y=nt.decodeDigit(f);c.append(y.toString()),y=this.decodeDigit(m),c.append(y.toString()),u.forEach(function(A){i+=A})}}decodeStart(t){let i=nt.skipWhiteSpace(t),a=nt.findGuardPattern(t,i,nt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,i){let a=this.narrowLineWidth*10;a=a<i?a:i;for(let c=i-1;a>0&&c>=0&&!t.get(c);c--)a--;if(a!==0)throw new J}static skipWhiteSpace(t){const i=t.getSize(),a=t.getNextSet(0);if(a===i)throw new J;return a}decodeEnd(t){t.reverse();try{let i=nt.skipWhiteSpace(t),a;try{a=nt.findGuardPattern(t,i,nt.END_PATTERN_REVERSED[0])}catch(u){u instanceof J&&(a=nt.findGuardPattern(t,i,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let c=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-c,a}finally{t.reverse()}}static findGuardPattern(t,i,a){let c=a.length,u=new Int32Array(c),f=t.getSize(),m=!1,y=0,A=i;u.fill(0);for(let C=i;C<f;C++)if(t.get(C)!==m)u[y]++;else{if(y===c-1){if(Vt.patternMatchVariance(u,a,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[A,C];A+=u[0]+u[1],z.arraycopy(u,2,u,0,y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,m=!m}throw new J}static decodeDigit(t){let i=nt.MAX_AVG_VARIANCE,a=-1,c=nt.PATTERNS.length;for(let u=0;u<c;u++){let f=nt.PATTERNS[u],m=Vt.patternMatchVariance(t,f,nt.MAX_INDIVIDUAL_VARIANCE);m<i?(i=m,a=u):m===i&&(a=-1)}if(a>=0)return a%10;throw new J}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Kt extends Vt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),a=Kt.findGuardPattern(t,c,!1,this.START_END_PATTERN,u);let f=a[0];c=a[1];let m=f-(c-f);m>=0&&(i=t.isRange(m,f,!1))}return a}static checkChecksum(t){return Kt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return Kt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let c=i-1;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new W;a+=u}a*=3;for(let c=i-2;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new W;a+=u}return(1e3-a)%10}static decodeEnd(t,i){return Kt.findGuardPattern(t,i,!1,Kt.START_END_PATTERN,new Int32Array(Kt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,a,c){return this.findGuardPattern(t,i,a,c,new Int32Array(c.length))}static findGuardPattern(t,i,a,c,u){let f=t.getSize();i=a?t.getNextUnset(i):t.getNextSet(i);let m=0,y=i,A=c.length,C=a;for(let R=i;R<f;R++)if(t.get(R)!==C)u[m]++;else{if(m===A-1){if(Vt.patternMatchVariance(u,c,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return Int32Array.from([y,R]);y+=u[0]+u[1];let D=u.slice(2,u.length-1);for(let j=0;j<m-1;j++)u[j]=D[j];u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,C=!C}throw new J}static decodeDigit(t,i,a,c){this.recordPattern(t,a,i);let u=this.MAX_AVG_VARIANCE,f=-1,m=c.length;for(let y=0;y<m;y++){let A=c[y],C=Vt.patternMatchVariance(i,A,Kt.MAX_INDIVIDUAL_VARIANCE);C<u&&(u=C,f=y)}if(f>=0)return f;throw new J}}Kt.MAX_AVG_VARIANCE=.48,Kt.MAX_INDIVIDUAL_VARIANCE=.7,Kt.START_END_PATTERN=Int32Array.from([1,1,1]),Kt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Kt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _a{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,a,c),f=c.toString(),m=_a.parseExtensionString(f),y=[new Me((a[0]+a[1])/2,t),new Me(u,t)],A=new ge(f,null,0,y,pe.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&A.putAllMetadata(m),A}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),f=i[1],m=0;for(let A=0;A<5&&f<u;A++){let C=Kt.decodeDigit(t,c,f,Kt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)f+=R;C>=10&&(m|=1<<4-A),A!==4&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(a.length!==5)throw new J;let y=this.determineCheckDigit(m);if(_a.extensionChecksum(a.toString())!==y)throw new J;return f}static extensionChecksum(t){let i=t.length,a=0;for(let c=i-2;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;a*=3;for(let c=i-1;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new J}static parseExtensionString(t){if(t.length!==5)return null;let i=_a.parseExtension5String(t);return i==null?null:new Map([[tt.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let a=parseInt(t.substring(1)),c=(a/100).toString(),u=a%100,f=u<10?"0"+u:u.toString();return i+c+"."+f}}class al{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,a,c),f=c.toString(),m=al.parseExtensionString(f),y=[new Me((a[0]+a[1])/2,t),new Me(u,t)],A=new ge(f,null,0,y,pe.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&A.putAllMetadata(m),A}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),f=i[1],m=0;for(let y=0;y<2&&f<u;y++){let A=Kt.decodeDigit(t,c,f,Kt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let C of c)f+=C;A>=10&&(m|=1<<1-y),y!==1&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(a.length!==2)throw new J;if(parseInt(a.toString())%4!==m)throw new J;return f}static parseExtensionString(t){return t.length!==2?null:new Map([[tt.ISSUE_NUMBER,parseInt(t)]])}}class Ca{static decodeRow(t,i,a){let c=Kt.findGuardPattern(i,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new _a().decodeRow(t,i,c)}catch{return new al().decodeRow(t,i,c)}}}Ca.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends Kt{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=ht.L_PATTERNS[t-10],a=new Int32Array(i.length);for(let c=0;c<i.length;c++)a[c]=i[i.length-c-1];ht.L_AND_G_PATTERNS[t]=a}}decodeRow(t,i,a){let c=ht.findStartGuardPattern(i),u=a==null?null:a.get(be.NEED_RESULT_POINT_CALLBACK);if(u!=null){const we=new Me((c[0]+c[1])/2,t);u.foundPossibleResultPoint(we)}let f=this.decodeMiddle(i,c,this.decodeRowStringBuffer),m=f.rowOffset,y=f.resultString;if(u!=null){const we=new Me(m,t);u.foundPossibleResultPoint(we)}let A=this.decodeEnd(i,m);if(u!=null){const we=new Me((A[0]+A[1])/2,t);u.foundPossibleResultPoint(we)}let C=A[1],R=C+(C-A[0]);if(R>=i.getSize()||!i.isRange(C,R,!1))throw new J;let D=y.toString();if(D.length<8)throw new W;if(!ht.checkChecksum(D))throw new L;let j=(c[1]+c[0])/2,F=(A[1]+A[0])/2,V=this.getBarcodeFormat(),X=[new Me(j,t),new Me(F,t)],re=new ge(D,null,0,X,V,new Date().getTime()),Ae=0;try{let we=Ca.decodeRow(t,i,A[1]);re.putMetadata(tt.UPC_EAN_EXTENSION,we.getText()),re.putAllMetadata(we.getResultMetadata()),re.addResultPoints(we.getResultPoints()),Ae=we.getText().length}catch{}let Ee=a==null?null:a.get(be.ALLOWED_EAN_EXTENSIONS);if(Ee!=null){let we=!1;for(let at in Ee)if(Ae.toString()===at){we=!0;break}if(!we)throw new J}return re}decodeEnd(t,i){return ht.findGuardPattern(t,i,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return ht.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return ht.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let c=i-1;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new W;a+=u}a*=3;for(let c=i-2;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new W;a+=u}return(1e3-a)%10}}class Ti extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),f=i[1],m=0;for(let A=0;A<6&&f<u;A++){let C=ht.decodeDigit(t,c,f,ht.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)f+=R;C>=10&&(m|=1<<5-A)}a=Ti.determineFirstDigit(a,m),f=ht.findGuardPattern(t,f,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&f<u;A++){let C=ht.decodeDigit(t,c,f,ht.L_PATTERNS);a+=String.fromCharCode(48+C);for(let R of c)f+=R}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return pe.EAN_13}static determineFirstDigit(t,i){for(let a=0;a<10;a++)if(i===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new J}}Ti.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class $i extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),f=i[1];for(let y=0;y<4&&f<u;y++){let A=ht.decodeDigit(t,c,f,ht.L_PATTERNS);a+=String.fromCharCode(48+A);for(let C of c)f+=C}f=ht.findGuardPattern(t,f,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<u;y++){let A=ht.decodeDigit(t,c,f,ht.L_PATTERNS);a+=String.fromCharCode(48+A);for(let C of c)f+=C}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return pe.EAN_8}}class Ta extends ht{constructor(){super(...arguments),this.ean13Reader=new Ti}getBarcodeFormat(){return pe.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,a))}decodeMiddle(t,i,a){return this.ean13Reader.decodeMiddle(t,i,a)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let a=new ge(i.substring(1),null,null,t.getResultPoints(),pe.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new J}reset(){this.ean13Reader.reset()}}class Mn extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,a){const c=this.decodeMiddleCounters.map(A=>A);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=t.getSize();let f=i[1],m=0;for(let A=0;A<6&&f<u;A++){const C=Mn.decodeDigit(t,c,f,Mn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)f+=R;C>=10&&(m|=1<<5-A)}let y=Mn.determineNumSysAndCheckDigit(a,m);return{rowOffset:f,resultString:y}}decodeEnd(t,i){return Mn.findGuardPatternWithoutCounters(t,i,!0,Mn.MIDDLE_END_PATTERN)}checkChecksum(t){return ht.checkChecksum(Mn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),f=String.fromCharCode(48+c);return u+t+f}throw J.getNotFoundInstance()}getBarcodeFormat(){return pe.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new ve;a.append(t.charAt(0));let c=i[5];switch(c){case 0:case 1:case 2:a.appendChars(i,0,2),a.append(c),a.append("0000"),a.appendChars(i,2,3);break;case 3:a.appendChars(i,0,3),a.append("00000"),a.appendChars(i,3,2);break;case 4:a.appendChars(i,0,4),a.append("00000"),a.append(i[4]);break;default:a.appendChars(i,0,5),a.append("0000"),a.append(c);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}Mn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Mn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class sl extends Vt{constructor(t){super();let i=t==null?null:t.get(be.POSSIBLE_FORMATS),a=[];d(i)?(a.push(new Ti),a.push(new Ta),a.push(new $i),a.push(new Mn)):(i.indexOf(pe.EAN_13)>-1&&a.push(new Ti),i.indexOf(pe.UPC_A)>-1&&a.push(new Ta),i.indexOf(pe.EAN_8)>-1&&a.push(new $i),i.indexOf(pe.UPC_E)>-1&&a.push(new Mn)),this.readers=a}decodeRow(t,i,a){for(let c of this.readers)try{const u=c.decodeRow(t,i,a),f=u.getBarcodeFormat()===pe.EAN_13&&u.getText().charAt(0)==="0",m=a==null?null:a.get(be.POSSIBLE_FORMATS),y=m==null||m.includes(pe.UPC_A);if(f&&y){const A=u.getRawBytes(),C=new ge(u.getText().substring(1),A,A?A.length:null,u.getResultPoints(),pe.UPC_A);return C.putAllMetadata(u.getResultMetadata()),C}return u}catch{}throw new J}reset(){for(let t of this.readers)t.reset()}}class An extends Vt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let a=0;a<i.length;a++)if(Vt.patternMatchVariance(t,i[a],An.MAX_INDIVIDUAL_VARIANCE)<An.MAX_AVG_VARIANCE)return a;throw new J}static count(t){return st.sum(new Int32Array(t))}static increment(t,i){let a=0,c=i[0];for(let u=1;u<t.length;u++)i[u]>c&&(c=i[u],a=u);t[a]++}static decrement(t,i){let a=0,c=i[0];for(let u=1;u<t.length;u++)i[u]<c&&(c=i[u],a=u);t[a]--}static isFinderPattern(t){let i=t[0]+t[1],a=i+t[2]+t[3],c=i/a;if(c>=An.MIN_FINDER_PATTERN_RATIO&&c<=An.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let m of t)m>f&&(f=m),m<u&&(u=m);return f<10*u}return!1}}An.MAX_AVG_VARIANCE=.2,An.MAX_INDIVIDUAL_VARIANCE=.45,An.MIN_FINDER_PATTERN_RATIO=9.5/12,An.MAX_FINDER_PATTERN_RATIO=12.5/14;class er{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof er))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class tr{constructor(t,i,a,c,u){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Me(a,u)),this.resultPoints.push(new Me(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof tr))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class Ni{constructor(){}static getRSSvalue(t,i,a){let c=0;for(let y of t)c+=y;let u=0,f=0,m=t.length;for(let y=0;y<m-1;y++){let A;for(A=1,f|=1<<y;A<t[y];A++,f&=~(1<<y)){let C=Ni.combins(c-A-1,m-y-2);if(a&&f===0&&c-A-(m-y-1)>=m-y-1&&(C-=Ni.combins(c-A-(m-y),m-y-2)),m-y-1>1){let R=0;for(let D=c-A-(m-y-2);D>i;D--)R+=Ni.combins(c-A-D-1,m-y-3);C-=R*(m-1-y)}else c-A>i&&C--;u+=C}c-=A}return u}static combins(t,i){let a,c;t-i>i?(c=i,a=t-i):(c=t-i,a=i);let u=1,f=1;for(let m=t;m>a;m--)u*=m,f<=c&&(u/=f,f++);for(;f<=c;)u/=f,f++;return u}}class xo{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let a=12*i,c=new ce(a),u=0,m=t[0].getRightChar().getValue();for(let y=11;y>=0;--y)(m&1<<y)!=0&&c.set(u),u++;for(let y=1;y<t.length;++y){let A=t[y],C=A.getLeftChar().getValue();for(let R=11;R>=0;--R)(C&1<<R)!=0&&c.set(u),u++;if(A.getRightChar()!=null){let R=A.getRightChar().getValue();for(let D=11;D>=0;--D)(R&1<<D)!=0&&c.set(u),u++}}return c}}class nr{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rs{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class On extends rs{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===On.FNC1}}On.FNC1="$";class Pi extends rs{constructor(t,i,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class qn extends rs{constructor(t,i,a){if(super(t),i<0||i>10||a<0||a>10)throw new W;this.firstDigit=i,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===qn.FNC1}isSecondDigitFNC1(){return this.secondDigit===qn.FNC1}isAnyFNC1(){return this.firstDigit===qn.FNC1||this.secondDigit===qn.FNC1}}qn.FNC1=10;class Oe{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new J;let i=t.substring(0,2);for(let u of Oe.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(2,u[2],t):Oe.processFixedAI(2,u[1],t);if(t.length<3)throw new J;let a=t.substring(0,3);for(let u of Oe.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(3,u[2],t):Oe.processFixedAI(3,u[1],t);for(let u of Oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(4,u[2],t):Oe.processFixedAI(4,u[1],t);if(t.length<4)throw new J;let c=t.substring(0,4);for(let u of Oe.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(4,u[2],t):Oe.processFixedAI(4,u[1],t);throw new J}static processFixedAI(t,i,a){if(a.length<t)throw new J;let c=a.substring(0,t);if(a.length<t+i)throw new J;let u=a.substring(t,t+i),f=a.substring(t+i),m="("+c+")"+u,y=Oe.parseFieldsInGeneralPurpose(f);return y==null?m:m+y}static processVariableAI(t,i,a){let c=a.substring(0,t),u;a.length<t+i?u=a.length:u=t+i;let f=a.substring(t,u),m=a.substring(u),y="("+c+")"+f,A=Oe.parseFieldsInGeneralPurpose(m);return A==null?y:y+A}}Oe.VARIABLE_LENGTH=[],Oe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Oe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Oe.VARIABLE_LENGTH,20],["22",Oe.VARIABLE_LENGTH,29],["30",Oe.VARIABLE_LENGTH,8],["37",Oe.VARIABLE_LENGTH,8],["90",Oe.VARIABLE_LENGTH,30],["91",Oe.VARIABLE_LENGTH,30],["92",Oe.VARIABLE_LENGTH,30],["93",Oe.VARIABLE_LENGTH,30],["94",Oe.VARIABLE_LENGTH,30],["95",Oe.VARIABLE_LENGTH,30],["96",Oe.VARIABLE_LENGTH,30],["97",Oe.VARIABLE_LENGTH,3],["98",Oe.VARIABLE_LENGTH,30],["99",Oe.VARIABLE_LENGTH,30]],Oe.THREE_DIGIT_DATA_LENGTH=[["240",Oe.VARIABLE_LENGTH,30],["241",Oe.VARIABLE_LENGTH,30],["242",Oe.VARIABLE_LENGTH,6],["250",Oe.VARIABLE_LENGTH,30],["251",Oe.VARIABLE_LENGTH,30],["253",Oe.VARIABLE_LENGTH,17],["254",Oe.VARIABLE_LENGTH,20],["400",Oe.VARIABLE_LENGTH,30],["401",Oe.VARIABLE_LENGTH,30],["402",17],["403",Oe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Oe.VARIABLE_LENGTH,20],["421",Oe.VARIABLE_LENGTH,15],["422",3],["423",Oe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Oe.VARIABLE_LENGTH,15],["391",Oe.VARIABLE_LENGTH,18],["392",Oe.VARIABLE_LENGTH,15],["393",Oe.VARIABLE_LENGTH,18],["703",Oe.VARIABLE_LENGTH,30]],Oe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Oe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Oe.VARIABLE_LENGTH,20],["8003",Oe.VARIABLE_LENGTH,30],["8004",Oe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Oe.VARIABLE_LENGTH,30],["8008",Oe.VARIABLE_LENGTH,12],["8018",18],["8020",Oe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Oe.VARIABLE_LENGTH,70],["8200",Oe.VARIABLE_LENGTH,70]];class Yn{constructor(t){this.buffer=new ve,this.information=t}decodeAllCodes(t,i){let a=i,c=null;do{let u=this.decodeGeneralPurposeField(a,c),f=Oe.parseFieldsInGeneralPurpose(u.getNewString());if(f!=null&&t.append(f),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new qn(this.information.getSize(),qn.FNC1,qn.FNC1):new qn(this.information.getSize(),u-1,qn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),a=(i-8)/11,c=(i-8)%11;return new qn(t+7,a,c)}extractNumericValueFromBitArray(t,i){return Yn.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,a){let c=0;for(let u=0;u<a;++u)t.get(i+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Pi(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Pi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let a=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Pi(this.current.getPosition(),this.buffer.toString()):i=new Pi(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new nr(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Pi(this.current.getPosition(),this.buffer.toString());return new nr(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new nr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Pi(this.current.getPosition(),this.buffer.toString());return new nr(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new nr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Pi(this.current.getPosition(),this.buffer.toString());return new nr(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new nr(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(t,8);return c>=232&&c<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new On(t+5,On.FNC1);if(i>=5&&i<15)return new On(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new On(t+7,""+(a+1));if(a>=90&&a<116)return new On(t+7,""+(a+7));let c=this.extractNumericValueFromBitArray(t,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new W}return new On(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new On(t+5,On.FNC1);if(i>=5&&i<15)return new On(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new On(t+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Fn("Decoding invalid alphanumeric value: "+a)}return new On(t+6,c)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class cn{constructor(t){this.information=t,this.generalDecoder=new Yn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Rt extends cn{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,a)}encodeCompressedGtinWithoutAI(t,i,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*c,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}Rt.appendCheckDigit(t,a)}static appendCheckDigit(t,i){let a=0;for(let c=0;c<13;c++){let u=t.charAt(c+i).charCodeAt(0)-48;a+=(c&1)===0?3*u:u}a=10-a%10,a===10&&(a=0),t.append(a)}}Rt.GTIN_SIZE=40;class ci extends Rt{constructor(t){super(t)}parseInformation(){let t=new ve;t.append("(01)");let i=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(ci.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,ci.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,ci.HEADER_SIZE+44)}}ci.HEADER_SIZE=4;class zr extends cn{constructor(t){super(t)}parseInformation(){let t=new ve;return this.getGeneralDecoder().decodeAllCodes(t,zr.HEADER_SIZE)}}zr.HEADER_SIZE=5;class as extends Rt{constructor(t){super(t)}encodeCompressedWeight(t,i,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,a);this.addWeightCode(t,c);let u=this.checkWeight(c),f=1e5;for(let m=0;m<5;++m)u/f===0&&t.append("0"),f/=10;t.append(u)}}class Ii extends as{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Ii.HEADER_SIZE+as.GTIN_SIZE+Ii.WEIGHT_SIZE)throw new J;let t=new ve;return this.encodeCompressedGtin(t,Ii.HEADER_SIZE),this.encodeCompressedWeight(t,Ii.HEADER_SIZE+as.GTIN_SIZE,Ii.WEIGHT_SIZE),t.toString()}}Ii.HEADER_SIZE=5,Ii.WEIGHT_SIZE=15;class yo extends Ii{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class Na extends Ii{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class $n extends Rt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<$n.HEADER_SIZE+Rt.GTIN_SIZE)throw new J;let t=new ve;this.encodeCompressedGtin(t,$n.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Rt.GTIN_SIZE,$n.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField($n.HEADER_SIZE+Rt.GTIN_SIZE+$n.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}$n.HEADER_SIZE=8,$n.LAST_DIGIT_SIZE=2;class en extends Rt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<en.HEADER_SIZE+Rt.GTIN_SIZE)throw new J;let t=new ve;this.encodeCompressedGtin(t,en.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+Rt.GTIN_SIZE,en.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+Rt.GTIN_SIZE+en.LAST_DIGIT_SIZE,en.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(en.HEADER_SIZE+Rt.GTIN_SIZE+en.LAST_DIGIT_SIZE+en.FIRST_THREE_DIGITS_SIZE,null);return t.append(c.getNewString()),t.toString()}}en.HEADER_SIZE=8,en.LAST_DIGIT_SIZE=2,en.FIRST_THREE_DIGITS_SIZE=10;class _t extends as{constructor(t,i,a){super(t),this.dateCode=a,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=_t.HEADER_SIZE+_t.GTIN_SIZE+_t.WEIGHT_SIZE+_t.DATE_SIZE)throw new J;let t=new ve;return this.encodeCompressedGtin(t,_t.HEADER_SIZE),this.encodeCompressedWeight(t,_t.HEADER_SIZE+_t.GTIN_SIZE,_t.WEIGHT_SIZE),this.encodeCompressedDate(t,_t.HEADER_SIZE+_t.GTIN_SIZE+_t.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,_t.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let f=a;f/10==0&&t.append("0"),t.append(f),u/10==0&&t.append("0"),t.append(u),c/10==0&&t.append("0"),t.append(c)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}_t.HEADER_SIZE=8,_t.WEIGHT_SIZE=20,_t.DATE_SIZE=16;function Pr(O){try{if(O.get(1))return new ci(O);if(!O.get(2))return new zr(O);switch(Yn.extractNumericValueFromBitArray(O,1,4)){case 4:return new yo(O);case 5:return new Na(O)}switch(Yn.extractNumericValueFromBitArray(O,1,5)){case 12:return new $n(O);case 13:return new en(O)}switch(Yn.extractNumericValueFromBitArray(O,1,7)){case 56:return new _t(O,"310","11");case 57:return new _t(O,"320","11");case 58:return new _t(O,"310","13");case 59:return new _t(O,"320","13");case 60:return new _t(O,"310","15");case 61:return new _t(O,"320","15");case 62:return new _t(O,"310","17");case 63:return new _t(O,"320","17")}}catch(t){throw console.log(t),new Fn("unknown decoder: "+O)}}class Xn{constructor(t,i,a,c){this.leftchar=t,this.rightchar=i,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof Xn?Xn.equalsOrNull(t.leftchar,i.leftchar)&&Xn.equalsOrNull(t.rightchar,i.rightchar)&&Xn.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:Xn.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class tn{constructor(t,i,a){this.pairs=t,this.rowNumber=i,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof tn?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let a;return t.forEach((c,u)=>{i.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(a=!0)})}),a}}class ye extends An{constructor(t){super(...arguments),this.pairs=new Array(ye.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,a){this.pairs.length=0,this.startFromEven=!1;try{return ye.constructResult(this.decodeRow2pairs(t,i))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,ye.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(u){if(u instanceof J){if(!this.pairs.length)throw new J;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(t,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new J}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let a=i;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let f of t)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!ye.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(c);try{return this.checkRows(u,a+1)}catch(f){this.verbose&&console.log(f)}}throw new J}static isValidSequence(t){for(let i of ye.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let a=!0;for(let c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!=i[c]){a=!1;break}if(a)return!0}return!1}storeRow(t,i){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let f=this.rows[a];if(f.getRowNumber()>t){u=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),a++}u||c||ye.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new tn(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let a of i)if(a.getPairs().length!==t.length){for(let c of a.getPairs())for(let u of t)if(Xn.equals(c,u))break}}static isPartialRow(t,i){for(let a of i){let c=!0;for(let u of t){let f=!1;for(let m of a.getPairs())if(u.equals(m)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=xo.buildBitArray(t),c=Pr(i).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),f=t[t.length-1].getFinderPattern().getResultPoints(),m=[u[0],u[1],f[0],f[1]];return new ge(c,null,null,m,pe.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let m=1;m<this.pairs.size();++m){let y=this.pairs.get(m);c+=y.getLeftChar().getChecksumPortion(),u++;let A=y.getRightChar();A!=null&&(c+=A.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==i.getValue()}static getNextSecondBar(t,i){let a;return t.get(i)?(a=t.getNextUnset(i),a=t.getNextSet(a)):(a=t.getNextSet(i),a=t.getNextUnset(a)),a}retrieveNextPair(t,i,a){let c=i.length%2==0;this.startFromEven&&(c=!c);let u,f=!0,m=-1;do this.findNextPair(t,i,m),u=this.parseFoundFinderPattern(t,a,c),u==null?m=ye.getNextSecondBar(t,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(t,u,c,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new J;let A;try{A=this.decodeDataCharacter(t,u,c,!1)}catch(C){A=null,this.verbose&&console.log(C)}return new Xn(y,A,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),f;a>=0?f=a:this.isEmptyPair(i)?f=0:f=i[i.length-1].getFinderPattern().getStartEnd()[1];let m=i.length%2!=0;this.startFromEven&&(m=!m);let y=!1;for(;f<u&&(y=!t.get(f),!!y);)f++;let A=0,C=f;for(let R=f;R<u;R++)if(t.get(R)!=y)c[A]++;else{if(A==3){if(m&&ye.reverseCounters(c),ye.isFinderPattern(c)){this.startEnd[0]=C,this.startEnd[1]=R;return}m&&ye.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,A--}else A++;c[A]=1,y=!y}throw new J}static reverseCounters(t){let i=t.length;for(let a=0;a<i/2;++a){let c=t[a];t[a]=t[i-a-1],t[i-a-1]=c}}parseFoundFinderPattern(t,i,a){let c,u,f;if(a){let A=this.startEnd[0]-1;for(;A>=0&&!t.get(A);)A--;A++,c=this.startEnd[0]-A,u=A,f=this.startEnd[1]}else u=this.startEnd[0],f=t.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let m=this.getDecodeFinderCounters();z.arraycopy(m,0,m,1,m.length-1),m[0]=c;let y;try{y=this.parseFinderValue(m,ye.FINDER_PATTERNS)}catch{return null}return new tr(y,[u,f],u,f,i)}decodeDataCharacter(t,i,a,c){let u=this.getDataCharacterCounters();for(let Ot=0;Ot<u.length;Ot++)u[Ot]=0;if(c)ye.recordPatternInReverse(t,i.getStartEnd()[0],u);else{ye.recordPattern(t,i.getStartEnd()[1],u);for(let Ot=0,Cn=u.length-1;Ot<Cn;Ot++,Cn--){let Zn=u[Ot];u[Ot]=u[Cn],u[Cn]=Zn}}let f=17,m=st.sum(new Int32Array(u))/f,y=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new J;let A=this.getOddCounts(),C=this.getEvenCounts(),R=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Ot=0;Ot<u.length;Ot++){let Cn=1*u[Ot]/m,Zn=Cn+.5;if(Zn<1){if(Cn<.3)throw new J;Zn=1}else if(Zn>8){if(Cn>8.7)throw new J;Zn=8}let Jr=Ot/2;(Ot&1)==0?(A[Jr]=Zn,R[Jr]=Cn-Zn):(C[Jr]=Zn,D[Jr]=Cn-Zn)}this.adjustOddEvenCounts(f);let j=4*i.getValue()+(a?0:2)+(c?0:1)-1,F=0,V=0;for(let Ot=A.length-1;Ot>=0;Ot--){if(ye.isNotA1left(i,a,c)){let Cn=ye.WEIGHTS[j][2*Ot];V+=A[Ot]*Cn}F+=A[Ot]}let X=0;for(let Ot=C.length-1;Ot>=0;Ot--)if(ye.isNotA1left(i,a,c)){let Cn=ye.WEIGHTS[j][2*Ot+1];X+=C[Ot]*Cn}let re=V+X;if((F&1)!=0||F>13||F<4)throw new J;let Ae=(13-F)/2,Ee=ye.SYMBOL_WIDEST[Ae],we=9-Ee,at=Ni.getRSSvalue(A,Ee,!0),Qe=Ni.getRSSvalue(C,we,!1),nn=ye.EVEN_TOTAL_SUBSET[Ae],ni=ye.GSUM[Ae],Bn=at*nn+Qe+ni;return new er(Bn,re)}static isNotA1left(t,i,a){return!(t.getValue()==0&&i&&a)}adjustOddEvenCounts(t){let i=st.sum(new Int32Array(this.getOddCounts())),a=st.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);let f=!1,m=!1;a>13?m=!0:a<4&&(f=!0);let y=i+a-t,A=(i&1)==1,C=(a&1)==0;if(y==1)if(A){if(C)throw new J;u=!0}else{if(!C)throw new J;m=!0}else if(y==-1)if(A){if(C)throw new J;c=!0}else{if(!C)throw new J;f=!0}else if(y==0){if(A){if(!C)throw new J;i<a?(c=!0,m=!0):(u=!0,f=!0)}else if(C)throw new J}else throw new J;if(c){if(u)throw new J;ye.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ye.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new J;ye.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&ye.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ye.SYMBOL_WIDEST=[7,5,4,3,1],ye.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ye.GSUM=[0,348,1388,2948,3988],ye.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ye.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ye.FINDER_PAT_A=0,ye.FINDER_PAT_B=1,ye.FINDER_PAT_C=2,ye.FINDER_PAT_D=3,ye.FINDER_PAT_E=4,ye.FINDER_PAT_F=5,ye.FINDER_PATTERN_SEQUENCES=[[ye.FINDER_PAT_A,ye.FINDER_PAT_A],[ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B],[ye.FINDER_PAT_A,ye.FINDER_PAT_C,ye.FINDER_PAT_B,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_C],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F]],ye.MAX_PAIRS=11;class wo extends er{constructor(t,i,a){super(t,i),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Nt extends An{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,a){const c=this.decodePair(i,!1,t,a);Nt.addOrTally(this.possibleLeftPairs,c),i.reverse();let u=this.decodePair(i,!0,t,a);Nt.addOrTally(this.possibleRightPairs,u),i.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Nt.checkChecksum(f,m))return Nt.constructResult(f,m)}throw new J}static addOrTally(t,i){if(i==null)return;let a=!1;for(let c of t)if(c.getValue()===i.getValue()){c.incrementCount(),a=!0;break}a||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let a=4537077*t.getValue()+i.getValue(),c=new String(a).toString(),u=new ve;for(let A=13-c.length;A>0;A--)u.append("0");u.append(c);let f=0;for(let A=0;A<13;A++){let C=u.charAt(A).charCodeAt(0)-48;f+=(A&1)===0?3*C:C}f=10-f%10,f===10&&(f=0),u.append(f.toString());let m=t.getFinderPattern().getResultPoints(),y=i.getFinderPattern().getResultPoints();return new ge(u.toString(),null,0,[m[0],m[1],y[0],y[1]],pe.RSS_14,new Date().getTime())}static checkChecksum(t,i){let a=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,c=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(t,i,a,c){try{let u=this.findFinderPattern(t,i),f=this.parseFoundFinderPattern(t,a,i,u),m=c==null?null:c.get(be.NEED_RESULT_POINT_CALLBACK);if(m!=null){let C=(u[0]+u[1])/2;i&&(C=t.getSize()-1-C),m.foundPossibleResultPoint(new Me(C,a))}let y=this.decodeDataCharacter(t,f,!0),A=this.decodeDataCharacter(t,f,!1);return new wo(1597*y.getValue()+A.getValue(),y.getChecksumPortion()+4*A.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(t,i,a){let c=this.getDataCharacterCounters();for(let X=0;X<c.length;X++)c[X]=0;if(a)Vt.recordPatternInReverse(t,i.getStartEnd()[0],c);else{Vt.recordPattern(t,i.getStartEnd()[1]+1,c);for(let X=0,re=c.length-1;X<re;X++,re--){let Ae=c[X];c[X]=c[re],c[re]=Ae}}let u=a?16:15,f=st.sum(new Int32Array(c))/u,m=this.getOddCounts(),y=this.getEvenCounts(),A=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let X=0;X<c.length;X++){let re=c[X]/f,Ae=Math.floor(re+.5);Ae<1?Ae=1:Ae>8&&(Ae=8);let Ee=Math.floor(X/2);(X&1)===0?(m[Ee]=Ae,A[Ee]=re-Ae):(y[Ee]=Ae,C[Ee]=re-Ae)}this.adjustOddEvenCounts(a,u);let R=0,D=0;for(let X=m.length-1;X>=0;X--)D*=9,D+=m[X],R+=m[X];let j=0,F=0;for(let X=y.length-1;X>=0;X--)j*=9,j+=y[X],F+=y[X];let V=D+3*j;if(a){if((R&1)!==0||R>12||R<4)throw new J;let X=(12-R)/2,re=Nt.OUTSIDE_ODD_WIDEST[X],Ae=9-re,Ee=Ni.getRSSvalue(m,re,!1),we=Ni.getRSSvalue(y,Ae,!0),at=Nt.OUTSIDE_EVEN_TOTAL_SUBSET[X],Qe=Nt.OUTSIDE_GSUM[X];return new er(Ee*at+we+Qe,V)}else{if((F&1)!==0||F>10||F<4)throw new J;let X=(10-F)/2,re=Nt.INSIDE_ODD_WIDEST[X],Ae=9-re,Ee=Ni.getRSSvalue(m,re,!0),we=Ni.getRSSvalue(y,Ae,!1),at=Nt.INSIDE_ODD_TOTAL_SUBSET[X],Qe=Nt.INSIDE_GSUM[X];return new er(we*at+Ee+Qe,V)}}findFinderPattern(t,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),u=!1,f=0;for(;f<c&&(u=!t.get(f),i!==u);)f++;let m=0,y=f;for(let A=f;A<c;A++)if(t.get(A)!==u)a[m]++;else{if(m===3){if(An.isFinderPattern(a))return[y,A];y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,u=!u}throw new J}parseFoundFinderPattern(t,i,a,c){let u=t.get(c[0]),f=c[0]-1;for(;f>=0&&u!==t.get(f);)f--;f++;const m=c[0]-f,y=this.getDecodeFinderCounters(),A=new Int32Array(y.length);z.arraycopy(y,0,A,1,y.length-1),A[0]=m;const C=this.parseFinderValue(A,Nt.FINDER_PATTERNS);let R=f,D=c[1];return a&&(R=t.getSize()-1-R,D=t.getSize()-1-D),new tr(C,[f,c[1]],R,D,i)}adjustOddEvenCounts(t,i){let a=st.sum(new Int32Array(this.getOddCounts())),c=st.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1,m=!1,y=!1;t?(a>12?f=!0:a<4&&(u=!0),c>12?y=!0:c<4&&(m=!0)):(a>11?f=!0:a<5&&(u=!0),c>10?y=!0:c<4&&(m=!0));let A=a+c-i,C=(a&1)===(t?1:0),R=(c&1)===1;if(A===1)if(C){if(R)throw new J;f=!0}else{if(!R)throw new J;y=!0}else if(A===-1)if(C){if(R)throw new J;u=!0}else{if(!R)throw new J;m=!0}else if(A===0){if(C){if(!R)throw new J;a<c?(u=!0,y=!0):(f=!0,m=!0)}else if(R)throw new J}else throw new J;if(u){if(f)throw new J;An.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&An.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new J;An.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&An.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Nt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Nt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Nt.OUTSIDE_GSUM=[0,161,961,2015,2715],Nt.INSIDE_GSUM=[0,336,1036,1516],Nt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Nt.INSIDE_ODD_WIDEST=[2,4,6,8],Nt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ui extends Vt{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const a=t?t.get(be.POSSIBLE_FORMATS):null,c=t&&t.get(be.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(pe.EAN_13)||a.includes(pe.UPC_A)||a.includes(pe.EAN_8)||a.includes(pe.UPC_E))&&this.readers.push(new sl(t)),a.includes(pe.CODE_39)&&this.readers.push(new kt(c)),a.includes(pe.CODE_128)&&this.readers.push(new Se),a.includes(pe.ITF)&&this.readers.push(new nt),a.includes(pe.RSS_14)&&this.readers.push(new Nt),a.includes(pe.RSS_EXPANDED)&&this.readers.push(new ye(this.verbose))):(this.readers.push(new sl(t)),this.readers.push(new kt),this.readers.push(new sl(t)),this.readers.push(new Se),this.readers.push(new nt),this.readers.push(new Nt),this.readers.push(new ye(this.verbose)))}decodeRow(t,i,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(t,i,a)}catch{}throw new J}reset(){this.readers.forEach(t=>t.reset())}}class $c extends Te{constructor(t=500,i){super(new ui(i),t,i)}}class yt{constructor(t,i,a){this.ecCodewords=t,this.ecBlocks=[i],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class xt{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ot{constructor(t,i,a,c,u,f){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=f;let m=0;const y=f.getECCodewords(),A=f.getECBlocks();for(let C of A)m+=C.getCount()*(C.getDataCodewords()+y);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new W;for(let a of ot.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===i)return a;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new ot(1,10,10,8,8,new yt(5,new xt(1,3))),new ot(2,12,12,10,10,new yt(7,new xt(1,5))),new ot(3,14,14,12,12,new yt(10,new xt(1,8))),new ot(4,16,16,14,14,new yt(12,new xt(1,12))),new ot(5,18,18,16,16,new yt(14,new xt(1,18))),new ot(6,20,20,18,18,new yt(18,new xt(1,22))),new ot(7,22,22,20,20,new yt(20,new xt(1,30))),new ot(8,24,24,22,22,new yt(24,new xt(1,36))),new ot(9,26,26,24,24,new yt(28,new xt(1,44))),new ot(10,32,32,14,14,new yt(36,new xt(1,62))),new ot(11,36,36,16,16,new yt(42,new xt(1,86))),new ot(12,40,40,18,18,new yt(48,new xt(1,114))),new ot(13,44,44,20,20,new yt(56,new xt(1,144))),new ot(14,48,48,22,22,new yt(68,new xt(1,174))),new ot(15,52,52,24,24,new yt(42,new xt(2,102))),new ot(16,64,64,14,14,new yt(56,new xt(2,140))),new ot(17,72,72,16,16,new yt(36,new xt(4,92))),new ot(18,80,80,18,18,new yt(48,new xt(4,114))),new ot(19,88,88,20,20,new yt(56,new xt(4,144))),new ot(20,96,96,22,22,new yt(68,new xt(4,174))),new ot(21,104,104,24,24,new yt(56,new xt(6,136))),new ot(22,120,120,18,18,new yt(68,new xt(6,175))),new ot(23,132,132,20,20,new yt(62,new xt(8,163))),new ot(24,144,144,22,22,new yt(62,new xt(8,156),new xt(2,155))),new ot(25,8,18,6,16,new yt(7,new xt(1,5))),new ot(26,8,32,6,14,new yt(11,new xt(1,10))),new ot(27,12,26,10,24,new yt(14,new xt(1,16))),new ot(28,12,36,10,16,new yt(18,new xt(1,22))),new ot(29,16,36,14,16,new yt(24,new xt(1,32))),new ot(30,16,48,14,22,new yt(28,new xt(1,49)))]}}ot.VERSIONS=ot.buildVersions();class Fr{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new W;this.version=Fr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),a=t.getWidth();return ot.getVersionForDimensions(i,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let m=!1,y=!1,A=!1,C=!1;do if(a===u&&c===0&&!m)t[i++]=this.readCorner1(u,f)&255,a-=2,c+=2,m=!0;else if(a===u-2&&c===0&&(f&3)!==0&&!y)t[i++]=this.readCorner2(u,f)&255,a-=2,c+=2,y=!0;else if(a===u+4&&c===2&&(f&7)===0&&!A)t[i++]=this.readCorner3(u,f)&255,a-=2,c+=2,A=!0;else if(a===u-2&&c===0&&(f&7)===4&&!C)t[i++]=this.readCorner4(u,f)&255,a-=2,c+=2,C=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(t[i++]=this.readUtah(a,c,u,f)&255),a-=2,c+=2;while(a>=0&&c<f);a+=1,c+=3;do a>=0&&c<f&&!this.readMappingMatrix.get(c,a)&&(t[i++]=this.readUtah(a,c,u,f)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<f);if(i!==this.version.getTotalCodewords())throw new W;return t}readModule(t,i,a,c){return t<0&&(t+=a,i+=4-(a+4&7)),i<0&&(i+=c,t+=4-(c+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,a,c){let u=0;return this.readModule(t-2,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t-2,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i,a,c)&&(u|=1),u<<=1,this.readModule(t,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t,i,a,c)&&(u|=1),u}readCorner1(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,1,t,i)&&(a|=1),a<<=1,this.readModule(t-1,2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}readCorner2(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-4,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner3(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-3,t,i)&&(a|=1),a<<=1,this.readModule(1,i-2,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner4(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new I("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),f=i/c|0,m=a/u|0,y=f*c,A=m*u,C=new Ne(A,y);for(let R=0;R<f;++R){const D=R*c;for(let j=0;j<m;++j){const F=j*u;for(let V=0;V<c;++V){const X=R*(c+2)+1+V,re=D+V;for(let Ae=0;Ae<u;++Ae){const Ee=j*(u+2)+1+Ae;if(t.get(Ee,X)){const we=F+Ae;C.set(we,re)}}}}}return C}}class Hr{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const a=i.getECBlocks();let c=0;const u=a.getECBlocks();for(let V of u)c+=V.getCount();const f=new Array(c);let m=0;for(let V of u)for(let X=0;X<V.getCount();X++){const re=V.getDataCodewords(),Ae=a.getECCodewords()+re;f[m++]=new Hr(re,new Uint8Array(Ae))}const A=f[0].codewords.length-a.getECCodewords(),C=A-1;let R=0;for(let V=0;V<C;V++)for(let X=0;X<m;X++)f[X].codewords[V]=t[R++];const D=i.getVersionNumber()===24,j=D?8:m;for(let V=0;V<j;V++)f[V].codewords[A-1]=t[R++];const F=f[0].codewords.length;for(let V=A;V<F;V++)for(let X=0;X<m;X++){const re=D?(X+8)%m:X,Ae=D&&re>7?V-1:V;f[re].codewords[Ae]=t[R++]}if(R!==t.length)throw new I;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hi{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new I(""+t);let i=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const f=8-a,m=t<f?t:f,y=f-m,A=255>>8-m<<y;i=(u[c]&A)>>y,t-=m,a+=m,a===8&&(a=0,c++)}if(t>0){for(;t>=8;)i=i<<8|u[c]&255,c++,t-=8;if(t>0){const f=8-t,m=255>>f<<f;i=i<<t|(u[c]&m)>>f,a+=t}}return this.bitOffset=a,this.byteOffset=c,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var bt;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(bt||(bt={}));class Fi{static decode(t){const i=new hi(t),a=new ve,c=new ve,u=new Array;let f=bt.ASCII_ENCODE;do if(f===bt.ASCII_ENCODE)f=this.decodeAsciiSegment(i,a,c);else{switch(f){case bt.C40_ENCODE:this.decodeC40Segment(i,a);break;case bt.TEXT_ENCODE:this.decodeTextSegment(i,a);break;case bt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,a);break;case bt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,a);break;case bt.BASE256_ENCODE:this.decodeBase256Segment(i,a,u);break;default:throw new W}f=bt.ASCII_ENCODE}while(f!==bt.PAD_ENCODE&&i.available()>0);return c.length()>0&&a.append(c.toString()),new St(t,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,i,a){let c=!1;do{let u=t.readBits(8);if(u===0)throw new W;if(u<=128)return c&&(u+=128),i.append(String.fromCharCode(u-1)),bt.ASCII_ENCODE;if(u===129)return bt.PAD_ENCODE;if(u<=229){const f=u-130;f<10&&i.append("0"),i.append(""+f)}else switch(u){case 230:return bt.C40_ENCODE;case 231:return bt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:i.append("[)>05"),a.insert(0,"");break;case 237:i.append("[)>06"),a.insert(0,"");break;case 238:return bt.ANSIX12_ENCODE;case 239:return bt.TEXT_ENCODE;case 240:return bt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new W;break}}while(t.available()>0);return bt.ASCII_ENCODE}static decodeC40Segment(t,i){let a=!1;const c=[];let u=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),c);for(let m=0;m<3;m++){const y=c[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else throw new W;break;case 1:a?(i.append(String.fromCharCode(y+128)),a=!1):i.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else switch(y){case 27:i.append("");break;case 30:a=!0;break;default:throw new W}u=0;break;case 3:a?(i.append(String.fromCharCode(y+224)),a=!1):i.append(String.fromCharCode(y+96)),u=0;break;default:throw new W}}}while(t.available()>0)}static decodeTextSegment(t,i){let a=!1,c=[],u=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),c);for(let m=0;m<3;m++){const y=c[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else throw new W;break;case 1:a?(i.append(String.fromCharCode(y+128)),a=!1):i.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else switch(y){case 27:i.append("");break;case 30:a=!0;break;default:throw new W}u=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A),u=0}else throw new W;break;default:throw new W}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const a=[];do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),a);for(let u=0;u<3;u++){const f=a[u];switch(f){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(f<14)i.append(String.fromCharCode(f+44));else if(f<40)i.append(String.fromCharCode(f+51));else throw new W;break}}}while(t.available()>0)}static parseTwoBytes(t,i,a){let c=(t<<8)+i-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let c=t.readBits(6);if(c===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}(c&32)===0&&(c|=64),i.append(String.fromCharCode(c))}}while(t.available()>0)}static decodeBase256Segment(t,i,a){let c=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),c++);let f;if(u===0?f=t.available()/8|0:u<250?f=u:f=250*(u-249)+this.unrandomize255State(t.readBits(8),c++),f<0)throw new W;const m=new Uint8Array(f);for(let y=0;y<f;y++){if(t.available()<8)throw new W;m[y]=this.unrandomize255State(t.readBits(8),c++)}a.push(m);try{i.append(Ke.decode(m,_e.ISO88591))}catch(y){throw new Fn("Platform does not support required encoding: "+y.message)}}static unrandomize255State(t,i){const a=149*i%255+1,c=t-a;return c>=0?c:c+256}}Fi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Fi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Fi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Fi.TEXT_SHIFT2_SET_CHARS=Fi.C40_SHIFT2_SET_CHARS,Fi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class eu{constructor(){this.rsDecoder=new Ci(Je.DATA_MATRIX_FIELD_256)}decode(t){const i=new Fr(t),a=i.getVersion(),c=i.readCodewords(),u=Hr.getDataBlocks(c,a);let f=0;for(let A of u)f+=A.getNumDataCodewords();const m=new Uint8Array(f),y=u.length;for(let A=0;A<y;A++){const C=u[A],R=C.getCodewords(),D=C.getNumDataCodewords();this.correctErrors(R,D);for(let j=0;j<D;j++)m[j*y+A]=R[j]}return Fi.decode(m)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new L}for(let c=0;c<i;c++)t[c]=a[c]}}class qt{constructor(t){this.image=t,this.rectangleDetector=new Jt(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new J;i=this.shiftToModuleCenter(i);const a=i[0],c=i[1],u=i[2],f=i[3];let m=this.transitionsBetween(a,f)+1,y=this.transitionsBetween(u,f)+1;(m&1)===1&&(m+=1),(y&1)===1&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));let A=qt.sampleGrid(this.image,a,c,u,f,m,y);return new ns(A,[a,c,u,f])}static shiftPoint(t,i,a){let c=(i.getX()-t.getX())/(a+1),u=(i.getY()-t.getY())/(a+1);return new Me(t.getX()+c,t.getY()+u)}static moveAway(t,i,a){let c=t.getX(),u=t.getY();return c<i?c-=1:c+=1,u<a?u-=1:u+=1,new Me(c,u)}detectSolid1(t){let i=t[0],a=t[1],c=t[3],u=t[2],f=this.transitionsBetween(i,a),m=this.transitionsBetween(a,c),y=this.transitionsBetween(c,u),A=this.transitionsBetween(u,i),C=f,R=[u,i,a,c];return C>m&&(C=m,R[0]=i,R[1]=a,R[2]=c,R[3]=u),C>y&&(C=y,R[0]=a,R[1]=c,R[2]=u,R[3]=i),C>A&&(R[0]=c,R[1]=u,R[2]=i,R[3]=a),R}detectSolid2(t){let i=t[0],a=t[1],c=t[2],u=t[3],f=this.transitionsBetween(i,u),m=qt.shiftPoint(a,c,(f+1)*4),y=qt.shiftPoint(c,a,(f+1)*4),A=this.transitionsBetween(m,i),C=this.transitionsBetween(y,u);return A<C?(t[0]=i,t[1]=a,t[2]=c,t[3]=u):(t[0]=a,t[1]=c,t[2]=u,t[3]=i),t}correctTopRight(t){let i=t[0],a=t[1],c=t[2],u=t[3],f=this.transitionsBetween(i,u),m=this.transitionsBetween(a,u),y=qt.shiftPoint(i,a,(m+1)*4),A=qt.shiftPoint(c,a,(f+1)*4);f=this.transitionsBetween(y,u),m=this.transitionsBetween(A,u);let C=new Me(u.getX()+(c.getX()-a.getX())/(f+1),u.getY()+(c.getY()-a.getY())/(f+1)),R=new Me(u.getX()+(i.getX()-a.getX())/(m+1),u.getY()+(i.getY()-a.getY())/(m+1));if(!this.isValid(C))return this.isValid(R)?R:null;if(!this.isValid(R))return C;let D=this.transitionsBetween(y,C)+this.transitionsBetween(A,C),j=this.transitionsBetween(y,R)+this.transitionsBetween(A,R);return D>j?C:R}shiftToModuleCenter(t){let i=t[0],a=t[1],c=t[2],u=t[3],f=this.transitionsBetween(i,u)+1,m=this.transitionsBetween(c,u)+1,y=qt.shiftPoint(i,a,m*4),A=qt.shiftPoint(c,a,f*4);f=this.transitionsBetween(y,u)+1,m=this.transitionsBetween(A,u)+1,(f&1)===1&&(f+=1),(m&1)===1&&(m+=1);let C=(i.getX()+a.getX()+c.getX()+u.getX())/4,R=(i.getY()+a.getY()+c.getY()+u.getY())/4;i=qt.moveAway(i,C,R),a=qt.moveAway(a,C,R),c=qt.moveAway(c,C,R),u=qt.moveAway(u,C,R);let D,j;return y=qt.shiftPoint(i,a,m*4),y=qt.shiftPoint(y,u,f*4),D=qt.shiftPoint(a,i,m*4),D=qt.shiftPoint(D,c,f*4),A=qt.shiftPoint(c,u,m*4),A=qt.shiftPoint(A,a,f*4),j=qt.shiftPoint(u,c,m*4),j=qt.shiftPoint(j,i,f*4),[y,D,A,j]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,a,c,u,f,m){return oi.getInstance().sampleGrid(t,f,m,.5,.5,f-.5,.5,f-.5,m-.5,.5,m-.5,i.getX(),i.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(t,i){let a=Math.trunc(t.getX()),c=Math.trunc(t.getY()),u=Math.trunc(i.getX()),f=Math.trunc(i.getY()),m=Math.abs(f-c)>Math.abs(u-a);if(m){let V=a;a=c,c=V,V=u,u=f,f=V}let y=Math.abs(u-a),A=Math.abs(f-c),C=-y/2,R=c<f?1:-1,D=a<u?1:-1,j=0,F=this.image.get(m?c:a,m?a:c);for(let V=a,X=c;V!==u;V+=D){let re=this.image.get(m?X:V,m?V:X);if(re!==F&&(j++,F=re),C+=A,C>0){if(X===f)break;X+=R,C-=y}}return j}}class Hi{constructor(){this.decoder=new eu}decode(t,i=null){let a,c;if(i!=null&&i.has(be.PURE_BARCODE)){const A=Hi.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(A),c=Hi.NO_POINTS}else{const A=new qt(t.getBlackMatrix()).detect();a=this.decoder.decode(A.getBits()),c=A.getPoints()}const u=a.getRawBytes(),f=new ge(a.getText(),u,8*u.length,c,pe.DATA_MATRIX,z.currentTimeMillis()),m=a.getByteSegments();m!=null&&f.putMetadata(tt.BYTE_SEGMENTS,m);const y=a.getECLevel();return y!=null&&f.putMetadata(tt.ERROR_CORRECTION_LEVEL,y),f}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i==null||a==null)throw new J;const c=this.moduleSize(i,t);let u=i[1];const f=a[1];let m=i[0];const A=(a[0]-m+1)/c,C=(f-u+1)/c;if(A<=0||C<=0)throw new J;const R=c/2;u+=R,m+=R;const D=new Ne(A,C);for(let j=0;j<C;j++){const F=u+j*c;for(let V=0;V<A;V++)t.get(m+V*c,F)&&D.set(V,j)}return D}static moduleSize(t,i){const a=i.getWidth();let c=t[0];const u=t[1];for(;c<a&&i.get(c,u);)c++;if(c===a)throw new J;const f=c-t[0];if(f===0)throw new J;return f}}Hi.NO_POINTS=[];class ss extends Te{constructor(t=500){super(new Hi,t)}}var Vr;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(Vr||(Vr={}));class lt{constructor(t,i,a){this.value=t,this.stringValue=i,this.bits=a,lt.FOR_BITS.set(a,this),lt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return lt.L;case"M":return lt.M;case"Q":return lt.Q;case"H":return lt.H;default:throw new N(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof lt))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=lt.FOR_BITS.size)throw new I;return lt.FOR_BITS.get(t)}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.L=new lt(Vr.L,"L",1),lt.M=new lt(Vr.M,"M",0),lt.Q=new lt(Vr.Q,"Q",3),lt.H=new lt(Vr.H,"H",2);class mn{constructor(t){this.errorCorrectionLevel=lt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return K.bitCount(t^i)}static decodeFormatInformation(t,i){const a=mn.doDecodeFormatInformation(t,i);return a!==null?a:mn.doDecodeFormatInformation(t^mn.FORMAT_INFO_MASK_QR,i^mn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of mn.FORMAT_INFO_DECODE_LOOKUP){const f=u[0];if(f===t||f===i)return new mn(u[1]);let m=mn.numBitsDiffering(t,f);m<a&&(c=u[1],a=m),t!==i&&(m=mn.numBitsDiffering(i,f),m<a&&(c=u[1],a=m))}return a<=3?new mn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof mn))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}mn.FORMAT_INFO_MASK_QR=21522,mn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Z{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const a of i)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class je{constructor(t,i,...a){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();for(const m of f)c+=m.getCount()*(m.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new W;try{return this.getVersionForNumber((t-17)/4)}catch{throw new W}}static getVersionForNumber(t){if(t<1||t>40)throw new I;return je.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<je.VERSION_DECODE_INFO.length;c++){const u=je.VERSION_DECODE_INFO[c];if(u===t)return je.getVersionForNumber(c+7);const f=mn.numBitsDiffering(t,u);f<i&&(a=c+7,i=f)}return i<=3?je.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new Ne(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let f=0;f<a;f++)c===0&&(f===0||f===a-1)||c===a-1&&f===0||i.setRegion(this.alignmentPatternCenters[f]-2,u,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}je.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),je.VERSIONS=[new je(1,new Int32Array(0),new Z(7,new k(1,19)),new Z(10,new k(1,16)),new Z(13,new k(1,13)),new Z(17,new k(1,9))),new je(2,Int32Array.from([6,18]),new Z(10,new k(1,34)),new Z(16,new k(1,28)),new Z(22,new k(1,22)),new Z(28,new k(1,16))),new je(3,Int32Array.from([6,22]),new Z(15,new k(1,55)),new Z(26,new k(1,44)),new Z(18,new k(2,17)),new Z(22,new k(2,13))),new je(4,Int32Array.from([6,26]),new Z(20,new k(1,80)),new Z(18,new k(2,32)),new Z(26,new k(2,24)),new Z(16,new k(4,9))),new je(5,Int32Array.from([6,30]),new Z(26,new k(1,108)),new Z(24,new k(2,43)),new Z(18,new k(2,15),new k(2,16)),new Z(22,new k(2,11),new k(2,12))),new je(6,Int32Array.from([6,34]),new Z(18,new k(2,68)),new Z(16,new k(4,27)),new Z(24,new k(4,19)),new Z(28,new k(4,15))),new je(7,Int32Array.from([6,22,38]),new Z(20,new k(2,78)),new Z(18,new k(4,31)),new Z(18,new k(2,14),new k(4,15)),new Z(26,new k(4,13),new k(1,14))),new je(8,Int32Array.from([6,24,42]),new Z(24,new k(2,97)),new Z(22,new k(2,38),new k(2,39)),new Z(22,new k(4,18),new k(2,19)),new Z(26,new k(4,14),new k(2,15))),new je(9,Int32Array.from([6,26,46]),new Z(30,new k(2,116)),new Z(22,new k(3,36),new k(2,37)),new Z(20,new k(4,16),new k(4,17)),new Z(24,new k(4,12),new k(4,13))),new je(10,Int32Array.from([6,28,50]),new Z(18,new k(2,68),new k(2,69)),new Z(26,new k(4,43),new k(1,44)),new Z(24,new k(6,19),new k(2,20)),new Z(28,new k(6,15),new k(2,16))),new je(11,Int32Array.from([6,30,54]),new Z(20,new k(4,81)),new Z(30,new k(1,50),new k(4,51)),new Z(28,new k(4,22),new k(4,23)),new Z(24,new k(3,12),new k(8,13))),new je(12,Int32Array.from([6,32,58]),new Z(24,new k(2,92),new k(2,93)),new Z(22,new k(6,36),new k(2,37)),new Z(26,new k(4,20),new k(6,21)),new Z(28,new k(7,14),new k(4,15))),new je(13,Int32Array.from([6,34,62]),new Z(26,new k(4,107)),new Z(22,new k(8,37),new k(1,38)),new Z(24,new k(8,20),new k(4,21)),new Z(22,new k(12,11),new k(4,12))),new je(14,Int32Array.from([6,26,46,66]),new Z(30,new k(3,115),new k(1,116)),new Z(24,new k(4,40),new k(5,41)),new Z(20,new k(11,16),new k(5,17)),new Z(24,new k(11,12),new k(5,13))),new je(15,Int32Array.from([6,26,48,70]),new Z(22,new k(5,87),new k(1,88)),new Z(24,new k(5,41),new k(5,42)),new Z(30,new k(5,24),new k(7,25)),new Z(24,new k(11,12),new k(7,13))),new je(16,Int32Array.from([6,26,50,74]),new Z(24,new k(5,98),new k(1,99)),new Z(28,new k(7,45),new k(3,46)),new Z(24,new k(15,19),new k(2,20)),new Z(30,new k(3,15),new k(13,16))),new je(17,Int32Array.from([6,30,54,78]),new Z(28,new k(1,107),new k(5,108)),new Z(28,new k(10,46),new k(1,47)),new Z(28,new k(1,22),new k(15,23)),new Z(28,new k(2,14),new k(17,15))),new je(18,Int32Array.from([6,30,56,82]),new Z(30,new k(5,120),new k(1,121)),new Z(26,new k(9,43),new k(4,44)),new Z(28,new k(17,22),new k(1,23)),new Z(28,new k(2,14),new k(19,15))),new je(19,Int32Array.from([6,30,58,86]),new Z(28,new k(3,113),new k(4,114)),new Z(26,new k(3,44),new k(11,45)),new Z(26,new k(17,21),new k(4,22)),new Z(26,new k(9,13),new k(16,14))),new je(20,Int32Array.from([6,34,62,90]),new Z(28,new k(3,107),new k(5,108)),new Z(26,new k(3,41),new k(13,42)),new Z(30,new k(15,24),new k(5,25)),new Z(28,new k(15,15),new k(10,16))),new je(21,Int32Array.from([6,28,50,72,94]),new Z(28,new k(4,116),new k(4,117)),new Z(26,new k(17,42)),new Z(28,new k(17,22),new k(6,23)),new Z(30,new k(19,16),new k(6,17))),new je(22,Int32Array.from([6,26,50,74,98]),new Z(28,new k(2,111),new k(7,112)),new Z(28,new k(17,46)),new Z(30,new k(7,24),new k(16,25)),new Z(24,new k(34,13))),new je(23,Int32Array.from([6,30,54,78,102]),new Z(30,new k(4,121),new k(5,122)),new Z(28,new k(4,47),new k(14,48)),new Z(30,new k(11,24),new k(14,25)),new Z(30,new k(16,15),new k(14,16))),new je(24,Int32Array.from([6,28,54,80,106]),new Z(30,new k(6,117),new k(4,118)),new Z(28,new k(6,45),new k(14,46)),new Z(30,new k(11,24),new k(16,25)),new Z(30,new k(30,16),new k(2,17))),new je(25,Int32Array.from([6,32,58,84,110]),new Z(26,new k(8,106),new k(4,107)),new Z(28,new k(8,47),new k(13,48)),new Z(30,new k(7,24),new k(22,25)),new Z(30,new k(22,15),new k(13,16))),new je(26,Int32Array.from([6,30,58,86,114]),new Z(28,new k(10,114),new k(2,115)),new Z(28,new k(19,46),new k(4,47)),new Z(28,new k(28,22),new k(6,23)),new Z(30,new k(33,16),new k(4,17))),new je(27,Int32Array.from([6,34,62,90,118]),new Z(30,new k(8,122),new k(4,123)),new Z(28,new k(22,45),new k(3,46)),new Z(30,new k(8,23),new k(26,24)),new Z(30,new k(12,15),new k(28,16))),new je(28,Int32Array.from([6,26,50,74,98,122]),new Z(30,new k(3,117),new k(10,118)),new Z(28,new k(3,45),new k(23,46)),new Z(30,new k(4,24),new k(31,25)),new Z(30,new k(11,15),new k(31,16))),new je(29,Int32Array.from([6,30,54,78,102,126]),new Z(30,new k(7,116),new k(7,117)),new Z(28,new k(21,45),new k(7,46)),new Z(30,new k(1,23),new k(37,24)),new Z(30,new k(19,15),new k(26,16))),new je(30,Int32Array.from([6,26,52,78,104,130]),new Z(30,new k(5,115),new k(10,116)),new Z(28,new k(19,47),new k(10,48)),new Z(30,new k(15,24),new k(25,25)),new Z(30,new k(23,15),new k(25,16))),new je(31,Int32Array.from([6,30,56,82,108,134]),new Z(30,new k(13,115),new k(3,116)),new Z(28,new k(2,46),new k(29,47)),new Z(30,new k(42,24),new k(1,25)),new Z(30,new k(23,15),new k(28,16))),new je(32,Int32Array.from([6,34,60,86,112,138]),new Z(30,new k(17,115)),new Z(28,new k(10,46),new k(23,47)),new Z(30,new k(10,24),new k(35,25)),new Z(30,new k(19,15),new k(35,16))),new je(33,Int32Array.from([6,30,58,86,114,142]),new Z(30,new k(17,115),new k(1,116)),new Z(28,new k(14,46),new k(21,47)),new Z(30,new k(29,24),new k(19,25)),new Z(30,new k(11,15),new k(46,16))),new je(34,Int32Array.from([6,34,62,90,118,146]),new Z(30,new k(13,115),new k(6,116)),new Z(28,new k(14,46),new k(23,47)),new Z(30,new k(44,24),new k(7,25)),new Z(30,new k(59,16),new k(1,17))),new je(35,Int32Array.from([6,30,54,78,102,126,150]),new Z(30,new k(12,121),new k(7,122)),new Z(28,new k(12,47),new k(26,48)),new Z(30,new k(39,24),new k(14,25)),new Z(30,new k(22,15),new k(41,16))),new je(36,Int32Array.from([6,24,50,76,102,128,154]),new Z(30,new k(6,121),new k(14,122)),new Z(28,new k(6,47),new k(34,48)),new Z(30,new k(46,24),new k(10,25)),new Z(30,new k(2,15),new k(64,16))),new je(37,Int32Array.from([6,28,54,80,106,132,158]),new Z(30,new k(17,122),new k(4,123)),new Z(28,new k(29,46),new k(14,47)),new Z(30,new k(49,24),new k(10,25)),new Z(30,new k(24,15),new k(46,16))),new je(38,Int32Array.from([6,32,58,84,110,136,162]),new Z(30,new k(4,122),new k(18,123)),new Z(28,new k(13,46),new k(32,47)),new Z(30,new k(48,24),new k(14,25)),new Z(30,new k(42,15),new k(32,16))),new je(39,Int32Array.from([6,26,54,82,110,138,166]),new Z(30,new k(20,117),new k(4,118)),new Z(28,new k(40,47),new k(7,48)),new Z(30,new k(43,24),new k(22,25)),new Z(30,new k(10,15),new k(67,16))),new je(40,Int32Array.from([6,30,58,86,114,142,170]),new Z(30,new k(19,118),new k(6,119)),new Z(28,new k(18,47),new k(31,48)),new Z(30,new k(34,24),new k(34,25)),new Z(30,new k(20,15),new k(61,16)))];var un;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(un||(un={}));class Wn{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let a=0;a<i;a++)for(let c=0;c<i;c++)this.isMasked(a,c)&&t.flip(c,a)}}Wn.values=new Map([[un.DATA_MASK_000,new Wn(un.DATA_MASK_000,(O,t)=>(O+t&1)===0)],[un.DATA_MASK_001,new Wn(un.DATA_MASK_001,(O,t)=>(O&1)===0)],[un.DATA_MASK_010,new Wn(un.DATA_MASK_010,(O,t)=>t%3===0)],[un.DATA_MASK_011,new Wn(un.DATA_MASK_011,(O,t)=>(O+t)%3===0)],[un.DATA_MASK_100,new Wn(un.DATA_MASK_100,(O,t)=>(Math.floor(O/2)+Math.floor(t/3)&1)===0)],[un.DATA_MASK_101,new Wn(un.DATA_MASK_101,(O,t)=>O*t%6===0)],[un.DATA_MASK_110,new Wn(un.DATA_MASK_110,(O,t)=>O*t%6<3)],[un.DATA_MASK_111,new Wn(un.DATA_MASK_111,(O,t)=>(O+t+O*t%3&1)===0)]]);class Gr{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new W;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const i=this.bitMatrix.getHeight();let a=0;const c=i-7;for(let u=i-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=i-8;u<i;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=mn.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return je.getVersionForNumber(i);let a=0;const c=t-11;for(let f=5;f>=0;f--)for(let m=t-9;m>=c;m--)a=this.copyBit(m,f,a);let u=je.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;a=0;for(let f=5;f>=0;f--)for(let m=t-9;m>=c;m--)a=this.copyBit(f,m,a);if(u=je.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new W}copyBit(t,i,a){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),a=Wn.values.get(t.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=i.buildFunctionPattern();let f=!0;const m=new Uint8Array(i.getTotalCodewords());let y=0,A=0,C=0;for(let R=c-1;R>0;R-=2){R===6&&R--;for(let D=0;D<c;D++){const j=f?c-1-D:D;for(let F=0;F<2;F++)u.get(R-F,j)||(C++,A<<=1,this.bitMatrix.get(R-F,j)&&(A|=1),C===8&&(m[y++]=A,C=0,A=0))}f=!f}if(y!==i.getTotalCodewords())throw new W;return m}remask(){if(this.parsedFormatInfo===null)return;const t=Wn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,a=t.getWidth();i<a;i++)for(let c=i+1,u=t.getHeight();c<u;c++)t.get(i,c)!==t.get(c,i)&&(t.flip(c,i),t.flip(i,c))}}class ll{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,a){if(t.length!==i.getTotalCodewords())throw new I;const c=i.getECBlocksForLevel(a);let u=0;const f=c.getECBlocks();for(const F of f)u+=F.getCount();const m=new Array(u);let y=0;for(const F of f)for(let V=0;V<F.getCount();V++){const X=F.getDataCodewords(),re=c.getECCodewordsPerBlock()+X;m[y++]=new ll(X,new Uint8Array(re))}const A=m[0].codewords.length;let C=m.length-1;for(;C>=0&&m[C].codewords.length!==A;)C--;C++;const R=A-c.getECCodewordsPerBlock();let D=0;for(let F=0;F<R;F++)for(let V=0;V<y;V++)m[V].codewords[F]=t[D++];for(let F=C;F<y;F++)m[F].codewords[R]=t[D++];const j=m[0].codewords.length;for(let F=R;F<j;F++)for(let V=0;V<y;V++){const X=V<C?F:F+1;m[V].codewords[X]=t[D++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Kn;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(Kn||(Kn={}));class Pe{constructor(t,i,a,c){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=a,this.bits=c,Pe.FOR_BITS.set(c,this),Pe.FOR_VALUE.set(t,this)}static forBits(t){const i=Pe.FOR_BITS.get(t);if(i===void 0)throw new I;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let a;return i<=9?a=0:i<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Pe))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}Pe.FOR_BITS=new Map,Pe.FOR_VALUE=new Map,Pe.TERMINATOR=new Pe(Kn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Pe.NUMERIC=new Pe(Kn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Pe.ALPHANUMERIC=new Pe(Kn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Pe.STRUCTURED_APPEND=new Pe(Kn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Pe.BYTE=new Pe(Kn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Pe.ECI=new Pe(Kn.ECI,"ECI",Int32Array.from([0,0,0]),7),Pe.KANJI=new Pe(Kn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Pe.FNC1_FIRST_POSITION=new Pe(Kn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Pe.FNC1_SECOND_POSITION=new Pe(Kn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Pe.HANZI=new Pe(Kn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class zt{static decode(t,i,a,c){const u=new hi(t);let f=new ve;const m=new Array;let y=-1,A=-1;try{let C=null,R=!1,D;do{if(u.available()<4)D=Pe.TERMINATOR;else{const j=u.readBits(4);D=Pe.forBits(j)}switch(D){case Pe.TERMINATOR:break;case Pe.FNC1_FIRST_POSITION:case Pe.FNC1_SECOND_POSITION:R=!0;break;case Pe.STRUCTURED_APPEND:if(u.available()<16)throw new W;y=u.readBits(8),A=u.readBits(8);break;case Pe.ECI:const j=zt.parseECIValue(u);if(C=oe.getCharacterSetECIByValue(j),C===null)throw new W;break;case Pe.HANZI:const F=u.readBits(4),V=u.readBits(D.getCharacterCountBits(i));F===zt.GB2312_SUBSET&&zt.decodeHanziSegment(u,f,V);break;default:const X=u.readBits(D.getCharacterCountBits(i));switch(D){case Pe.NUMERIC:zt.decodeNumericSegment(u,f,X);break;case Pe.ALPHANUMERIC:zt.decodeAlphanumericSegment(u,f,X,R);break;case Pe.BYTE:zt.decodeByteSegment(u,f,X,C,m,c);break;case Pe.KANJI:zt.decodeKanjiSegment(u,f,X);break;default:throw new W}break}}while(D!==Pe.TERMINATOR)}catch{throw new W}return new St(t,f.toString(),m.length===0?null:m,a===null?null:a.toString(),y,A)}static decodeHanziSegment(t,i,a){if(a*13>t.available())throw new W;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const f=t.readBits(13);let m=f/96<<8&4294967295|f%96;m<959?m+=41377:m+=42657,c[u]=m>>8&255,c[u+1]=m&255,u+=2,a--}try{i.append(Ke.decode(c,_e.GB2312))}catch(f){throw new W(f)}}static decodeKanjiSegment(t,i,a){if(a*13>t.available())throw new W;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const f=t.readBits(13);let m=f/192<<8&4294967295|f%192;m<7936?m+=33088:m+=49472,c[u]=m>>8,c[u+1]=m,u+=2,a--}try{i.append(Ke.decode(c,_e.SHIFT_JIS))}catch(f){throw new W(f)}}static decodeByteSegment(t,i,a,c,u,f){if(8*a>t.available())throw new W;const m=new Uint8Array(a);for(let A=0;A<a;A++)m[A]=t.readBits(8);let y;c===null?y=_e.guessEncoding(m,f):y=c.getName();try{i.append(Ke.decode(m,y))}catch(A){throw new W(A)}u.push(m)}static toAlphaNumericChar(t){if(t>=zt.ALPHANUMERIC_CHARS.length)throw new W;return zt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,a,c){const u=i.length();for(;a>1;){if(t.available()<11)throw new W;const f=t.readBits(11);i.append(zt.toAlphaNumericChar(Math.floor(f/45))),i.append(zt.toAlphaNumericChar(f%45)),a-=2}if(a===1){if(t.available()<6)throw new W;i.append(zt.toAlphaNumericChar(t.readBits(6)))}if(c)for(let f=u;f<i.length();f++)i.charAt(f)==="%"&&(f<i.length()-1&&i.charAt(f+1)==="%"?i.deleteCharAt(f+1):i.setCharAt(f,""))}static decodeNumericSegment(t,i,a){for(;a>=3;){if(t.available()<10)throw new W;const c=t.readBits(10);if(c>=1e3)throw new W;i.append(zt.toAlphaNumericChar(Math.floor(c/100))),i.append(zt.toAlphaNumericChar(Math.floor(c/10)%10)),i.append(zt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(t.available()<7)throw new W;const c=t.readBits(7);if(c>=100)throw new W;i.append(zt.toAlphaNumericChar(Math.floor(c/10))),i.append(zt.toAlphaNumericChar(c%10))}else if(a===1){if(t.available()<4)throw new W;const c=t.readBits(4);if(c>=10)throw new W;i.append(zt.toAlphaNumericChar(c))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const a=t.readBits(8);return(i&63)<<8&4294967295|a}if((i&224)===192){const a=t.readBits(16);return(i&31)<<16&4294967295|a}throw new W}}zt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",zt.GB2312_SUBSET=1;class vo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class tu{constructor(){this.rsDecoder=new Ci(Je.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(Ne.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const a=new Gr(t);let c=null;try{return this.decodeBitMatrixParser(a,i)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,i);return u.setOther(new vo(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(t,i){const a=t.readVersion(),c=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),f=ll.getDataBlocks(u,a,c);let m=0;for(const C of f)m+=C.getNumDataCodewords();const y=new Uint8Array(m);let A=0;for(const C of f){const R=C.getCodewords(),D=C.getNumDataCodewords();this.correctErrors(R,D);for(let j=0;j<D;j++)y[A++]=R[j]}return zt.decode(y,a,c,i)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new L}for(let c=0;c<i;c++)t[c]=a[c]}}class qr extends Me{constructor(t,i,a){super(t,i),this.estimatedModuleSize=a}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const c=(this.getX()+i)/2,u=(this.getY()+t)/2,f=(this.estimatedModuleSize+a)/2;return new qr(c,u,f)}}class ei{constructor(t,i,a,c,u,f,m){this.image=t,this.startX=i,this.startY=a,this.width=c,this.height=u,this.moduleSize=f,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,a=this.width,c=t+a,u=this.startY+i/2,f=new Int32Array(3),m=this.image;for(let y=0;y<i;y++){const A=u+((y&1)===0?Math.floor((y+1)/2):-Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let C=t;for(;C<c&&!m.get(C,A);)C++;let R=0;for(;C<c;){if(m.get(C,A))if(R===1)f[1]++;else if(R===2){if(this.foundPatternCross(f)){const D=this.handlePossibleCenter(f,A,C);if(D!==null)return D}f[0]=f[2],f[1]=1,f[2]=0,R=1}else f[++R]++;else R===1&&R++,f[R]++;C++}if(this.foundPatternCross(f)){const D=this.handlePossibleCenter(f,A,c);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,a=i/2;for(let c=0;c<3;c++)if(Math.abs(i-t[c])>=a)return!1;return!0}crossCheckVertical(t,i,a,c){const u=this.image,f=u.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let y=t;for(;y>=0&&u.get(i,y)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&!u.get(i,y)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<f&&u.get(i,y)&&m[1]<=a;)m[1]++,y++;if(y===f||m[1]>a)return NaN;for(;y<f&&!u.get(i,y)&&m[2]<=a;)m[2]++,y++;if(m[2]>a)return NaN;const A=m[0]+m[1]+m[2];return 5*Math.abs(A-c)>=2*c?NaN:this.foundPatternCross(m)?ei.centerFromEnd(m,y):NaN}handlePossibleCenter(t,i,a){const c=t[0]+t[1]+t[2],u=ei.centerFromEnd(t,a),f=this.crossCheckVertical(i,u,2*t[1],c);if(!isNaN(f)){const m=(t[0]+t[1]+t[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(m,f,u))return A.combineEstimate(f,u,m);const y=new qr(u,f,m);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Ia extends Me{constructor(t,i,a,c){super(t,i),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const c=this.count+1,u=(this.count*this.getX()+i)/c,f=(this.count*this.getY()+t)/c,m=(this.count*this.estimatedModuleSize+a)/c;return new Ia(u,f,m,c)}}class ol{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Yt{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(be.TRY_HARDER)!==void 0,a=t!=null&&t.get(be.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),f=c.getWidth();let m=Math.floor(3*u/(4*Yt.MAX_MODULES));(m<Yt.MIN_SKIP||i)&&(m=Yt.MIN_SKIP);let y=!1;const A=new Int32Array(5);for(let R=m-1;R<u&&!y;R+=m){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let D=0;for(let j=0;j<f;j++)if(c.get(j,R))(D&1)===1&&D++,A[D]++;else if((D&1)===0)if(D===4)if(Yt.foundPatternCross(A)){if(this.handlePossibleCenter(A,R,j,a)===!0)if(m=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>A[2]&&(R+=V-A[2]-m,j=f-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,D=3;continue}D=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,D=3;else A[++D]++;else A[D]++;Yt.foundPatternCross(A)&&this.handlePossibleCenter(A,R,f,a)===!0&&(m=A[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Me.orderBestPatterns(C),new ol(C)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let u=0;u<5;u++){const f=t[u];if(f===0)return!1;i+=f}if(i<7)return!1;const a=i/7,c=a/2;return Math.abs(a-t[0])<c&&Math.abs(a-t[1])<c&&Math.abs(3*a-t[2])<3*c&&Math.abs(a-t[3])<c&&Math.abs(a-t[4])<c}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,a,c){const u=this.getCrossCheckStateCount();let f=0;const m=this.image;for(;t>=f&&i>=f&&m.get(i-f,t-f);)u[2]++,f++;if(t<f||i<f)return!1;for(;t>=f&&i>=f&&!m.get(i-f,t-f)&&u[1]<=a;)u[1]++,f++;if(t<f||i<f||u[1]>a)return!1;for(;t>=f&&i>=f&&m.get(i-f,t-f)&&u[0]<=a;)u[0]++,f++;if(u[0]>a)return!1;const y=m.getHeight(),A=m.getWidth();for(f=1;t+f<y&&i+f<A&&m.get(i+f,t+f);)u[2]++,f++;if(t+f>=y||i+f>=A)return!1;for(;t+f<y&&i+f<A&&!m.get(i+f,t+f)&&u[3]<a;)u[3]++,f++;if(t+f>=y||i+f>=A||u[3]>=a)return!1;for(;t+f<y&&i+f<A&&m.get(i+f,t+f)&&u[4]<a;)u[4]++,f++;if(u[4]>=a)return!1;const C=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(C-c)<2*c&&Yt.foundPatternCross(u)}crossCheckVertical(t,i,a,c){const u=this.image,f=u.getHeight(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(i,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(i,y)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&u.get(i,y)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<f&&u.get(i,y);)m[2]++,y++;if(y===f)return NaN;for(;y<f&&!u.get(i,y)&&m[3]<a;)m[3]++,y++;if(y===f||m[3]>=a)return NaN;for(;y<f&&u.get(i,y)&&m[4]<a;)m[4]++,y++;if(m[4]>=a)return NaN;const A=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(A-c)>=2*c?NaN:Yt.foundPatternCross(m)?Yt.centerFromEnd(m,y):NaN}crossCheckHorizontal(t,i,a,c){const u=this.image,f=u.getWidth(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(y,i);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(y,i)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&u.get(y,i)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<f&&u.get(y,i);)m[2]++,y++;if(y===f)return NaN;for(;y<f&&!u.get(y,i)&&m[3]<a;)m[3]++,y++;if(y===f||m[3]>=a)return NaN;for(;y<f&&u.get(y,i)&&m[4]<a;)m[4]++,y++;if(m[4]>=a)return NaN;const A=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(A-c)>=c?NaN:Yt.foundPatternCross(m)?Yt.centerFromEnd(m,y):NaN}handlePossibleCenter(t,i,a,c){const u=t[0]+t[1]+t[2]+t[3]+t[4];let f=Yt.centerFromEnd(t,a),m=this.crossCheckVertical(i,Math.floor(f),t[2],u);if(!isNaN(m)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(m),t[2],u),!isNaN(f)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(f),t[2],u)))){const y=u/7;let A=!1;const C=this.possibleCenters;for(let R=0,D=C.length;R<D;R++){const j=C[R];if(j.aboutEquals(y,m,f)){C[R]=j.combineEstimate(m,f,y),A=!0;break}}if(!A){const R=new Ia(f,m,y);C.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const a of this.possibleCenters)if(a.getCount()>=Yt.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const a=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Yt.CENTER_QUORUM&&(t++,i+=f.getEstimatedModuleSize());if(t<3)return!1;const c=i/a;let u=0;for(const f of this.possibleCenters)u+=Math.abs(f.getEstimatedModuleSize()-c);return u<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new J;const i=this.possibleCenters;let a;if(t>3){let c=0,u=0;for(const y of this.possibleCenters){const A=y.getEstimatedModuleSize();c+=A,u+=A*A}a=c/t;let f=Math.sqrt(u/t-a*a);i.sort((y,A)=>{const C=Math.abs(A.getEstimatedModuleSize()-a),R=Math.abs(y.getEstimatedModuleSize()-a);return C<R?-1:C>R?1:0});const m=Math.max(.2*a,f);for(let y=0;y<i.length&&i.length>3;y++){const A=i[y];Math.abs(A.getEstimatedModuleSize()-a)>m&&(i.splice(y,1),y--)}}if(i.length>3){let c=0;for(const u of i)c+=u.getEstimatedModuleSize();a=c/i.length,i.sort((u,f)=>{if(f.getCount()===u.getCount()){const m=Math.abs(f.getEstimatedModuleSize()-a),y=Math.abs(u.getEstimatedModuleSize()-a);return m<y?1:m>y?-1:0}else return f.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Yt.CENTER_QUORUM=2,Yt.MIN_SKIP=3,Yt.MAX_MODULES=57;class Oi{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(be.NEED_RESULT_POINT_CALLBACK);const a=new Yt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const i=t.getTopLeft(),a=t.getTopRight(),c=t.getBottomLeft(),u=this.calculateModuleSize(i,a,c);if(u<1)throw new J("No pattern found in proccess finder.");const f=Oi.computeDimension(i,a,c,u),m=je.getProvisionalVersionForDimension(f),y=m.getDimensionForVersion()-7;let A=null;if(m.getAlignmentPatternCenters().length>0){const j=a.getX()-i.getX()+c.getX(),F=a.getY()-i.getY()+c.getY(),V=1-3/y,X=Math.floor(i.getX()+V*(j-i.getX())),re=Math.floor(i.getY()+V*(F-i.getY()));for(let Ae=4;Ae<=16;Ae<<=1)try{A=this.findAlignmentInRegion(u,X,re,Ae);break}catch(Ee){if(!(Ee instanceof J))throw Ee}}const C=Oi.createTransform(i,a,c,A,f),R=Oi.sampleGrid(this.image,C,f);let D;return A===null?D=[c,i,a]:D=[c,i,a,A],new ns(R,D)}static createTransform(t,i,a,c,u){const f=u-3.5;let m,y,A,C;return c!==null?(m=c.getX(),y=c.getY(),A=f-3,C=A):(m=i.getX()-t.getX()+a.getX(),y=i.getY()-t.getY()+a.getY(),A=f,C=f),Jn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,A,C,3.5,f,t.getX(),t.getY(),i.getX(),i.getY(),m,y,a.getX(),a.getY())}static sampleGrid(t,i,a){return oi.getInstance().sampleGridWithTransform(t,a,a,i)}static computeDimension(t,i,a,c){const u=st.round(Me.distance(t,i)/c),f=st.round(Me.distance(t,a)/c);let m=Math.floor((u+f)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new J("Dimensions could be not found.")}return m}calculateModuleSize(t,i,a){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,i){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,a,c){let u=this.sizeOfBlackWhiteBlackRun(t,i,a,c),f=1,m=t-(a-t);m<0?(f=t/(t-m),m=0):m>=this.image.getWidth()&&(f=(this.image.getWidth()-1-t)/(m-t),m=this.image.getWidth()-1);let y=Math.floor(i-(c-i)*f);return f=1,y<0?(f=i/(i-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-i)/(y-i),y=this.image.getHeight()-1),m=Math.floor(t+(m-t)*f),u+=this.sizeOfBlackWhiteBlackRun(t,i,m,y),u-1}sizeOfBlackWhiteBlackRun(t,i,a,c){const u=Math.abs(c-i)>Math.abs(a-t);if(u){let j=t;t=i,i=j,j=a,a=c,c=j}const f=Math.abs(a-t),m=Math.abs(c-i);let y=-f/2;const A=t<a?1:-1,C=i<c?1:-1;let R=0;const D=a+A;for(let j=t,F=i;j!==D;j+=A){const V=u?F:j,X=u?j:F;if(R===1===this.image.get(V,X)){if(R===2)return st.distance(j,F,t,i);R++}if(y+=m,y>0){if(F===c)break;F+=C,y-=f}}return R===2?st.distance(a+A,c,t,i):NaN}findAlignmentInRegion(t,i,a,c){const u=Math.floor(c*t),f=Math.max(0,i-u),m=Math.min(this.image.getWidth()-1,i+u);if(m-f<t*3)throw new J("Alignment top exceeds estimated module size.");const y=Math.max(0,a-u),A=Math.min(this.image.getHeight()-1,a+u);if(A-y<t*3)throw new J("Alignment bottom exceeds estimated module size.");return new ei(this.image,f,y,m-f,A-y,t,this.resultPointCallback).find()}}class Vi{constructor(){this.decoder=new tu}getDecoder(){return this.decoder}decode(t,i){let a,c;if(i!=null&&i.get(be.PURE_BARCODE)!==void 0){const y=Vi.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(y,i),c=Vi.NO_POINTS}else{const y=new Oi(t.getBlackMatrix()).detect(i);a=this.decoder.decodeBitMatrix(y.getBits(),i),c=y.getPoints()}a.getOther()instanceof vo&&a.getOther().applyMirroredCorrection(c);const u=new ge(a.getText(),a.getRawBytes(),void 0,c,pe.QR_CODE,void 0),f=a.getByteSegments();f!==null&&u.putMetadata(tt.BYTE_SEGMENTS,f);const m=a.getECLevel();return m!==null&&u.putMetadata(tt.ERROR_CORRECTION_LEVEL,m),a.hasStructuredAppend()&&(u.putMetadata(tt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(tt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i===null||a===null)throw new J;const c=this.moduleSize(i,t);let u=i[1],f=a[1],m=i[0],y=a[0];if(m>=y||u>=f)throw new J;if(f-u!==y-m&&(y=m+(f-u),y>=t.getWidth()))throw new J;const A=Math.round((y-m+1)/c),C=Math.round((f-u+1)/c);if(A<=0||C<=0)throw new J;if(C!==A)throw new J;const R=Math.floor(c/2);u+=R,m+=R;const D=m+Math.floor((A-1)*c)-y;if(D>0){if(D>R)throw new J;m-=D}const j=u+Math.floor((C-1)*c)-f;if(j>0){if(j>R)throw new J;u-=j}const F=new Ne(A,C);for(let V=0;V<C;V++){const X=u+Math.floor(V*c);for(let re=0;re<A;re++)t.get(m+Math.floor(re*c),X)&&F.set(re,V)}return F}static moduleSize(t,i){const a=i.getHeight(),c=i.getWidth();let u=t[0],f=t[1],m=!0,y=0;for(;u<c&&f<a;){if(m!==i.get(u,f)){if(++y===5)break;m=!m}u++,f++}if(u===c||f===a)throw new J;return(u-t[0])/7}}Vi.NO_POINTS=new Array;class He{PDF417Common(){}static getBitCountSum(t){return st.sum(t)}static toIntArray(t){if(t==null||!t.length)return He.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let a=0;for(const c of t)i[a++]=c;return i}static getCodeword(t){const i=ie.binarySearch(He.SYMBOL_TABLE,t&262143);return i<0?-1:(He.CODEWORD_TABLE[i]-1)%He.NUMBER_OF_CODEWORDS}}He.NUMBER_OF_CODEWORDS=929,He.MAX_CODEWORDS_IN_BARCODE=He.NUMBER_OF_CODEWORDS-1,He.MIN_ROWS_IN_BARCODE=3,He.MAX_ROWS_IN_BARCODE=90,He.MODULES_IN_CODEWORD=17,He.MODULES_IN_STOP_PATTERN=18,He.BARS_IN_MODULE=8,He.EMPTY_INT_ARRAY=new Int32Array([]),He.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),He.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class bo{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Ze{static detectMultiple(t,i,a){let c=t.getBlackMatrix(),u=Ze.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=Ze.detect(a,c)),new bo(c,u)}static detect(t,i){const a=new Array;let c=0,u=0,f=!1;for(;c<i.getHeight();){const m=Ze.findVertices(i,c,u);if(m[0]==null&&m[3]==null){if(!f)break;f=!1,u=0;for(const y of a)y[1]!=null&&(c=Math.trunc(Math.max(c,y[1].getY()))),y[3]!=null&&(c=Math.max(c,Math.trunc(y[3].getY())));c+=Ze.ROW_STEP;continue}if(f=!0,a.push(m),!t)break;m[2]!=null?(u=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(u=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return a}static findVertices(t,i,a){const c=t.getHeight(),u=t.getWidth(),f=new Array(8);return Ze.copyToResult(f,Ze.findRowsWithPattern(t,c,u,i,a,Ze.START_PATTERN),Ze.INDEXES_START_PATTERN),f[4]!=null&&(a=Math.trunc(f[4].getX()),i=Math.trunc(f[4].getY())),Ze.copyToResult(f,Ze.findRowsWithPattern(t,c,u,i,a,Ze.STOP_PATTERN),Ze.INDEXES_STOP_PATTERN),f}static copyToResult(t,i,a){for(let c=0;c<a.length;c++)t[a[c]]=i[c]}static findRowsWithPattern(t,i,a,c,u,f){const m=new Array(4);let y=!1;const A=new Int32Array(f.length);for(;c<i;c+=Ze.ROW_STEP){let R=Ze.findGuardPattern(t,u,c,a,!1,f,A);if(R!=null){for(;c>0;){const D=Ze.findGuardPattern(t,u,--c,a,!1,f,A);if(D!=null)R=D;else{c++;break}}m[0]=new Me(R[0],c),m[1]=new Me(R[1],c),y=!0;break}}let C=c+1;if(y){let R=0,D=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;C<i;C++){const j=Ze.findGuardPattern(t,D[0],C,a,!1,f,A);if(j!=null&&Math.abs(D[0]-j[0])<Ze.MAX_PATTERN_DRIFT&&Math.abs(D[1]-j[1])<Ze.MAX_PATTERN_DRIFT)D=j,R=0;else{if(R>Ze.SKIPPED_ROW_COUNT_MAX)break;R++}}C-=R+1,m[2]=new Me(D[0],C),m[3]=new Me(D[1],C)}return C-c<Ze.BARCODE_MIN_HEIGHT&&ie.fill(m,null),m}static findGuardPattern(t,i,a,c,u,f,m){ie.fillWithin(m,0,m.length,0);let y=i,A=0;for(;t.get(y,a)&&y>0&&A++<Ze.MAX_PIXEL_DRIFT;)y--;let C=y,R=0,D=f.length;for(let j=u;C<c;C++)if(t.get(C,a)!==j)m[R]++;else{if(R===D-1){if(Ze.patternMatchVariance(m,f,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return new Int32Array([y,C]);y+=m[0]+m[1],z.arraycopy(m,2,m,0,R-1),m[R-1]=0,m[R]=0,R--}else R++;m[R]=1,j=!j}return R===D-1&&Ze.patternMatchVariance(m,f,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE?new Int32Array([y,C-1]):null}static patternMatchVariance(t,i,a){let c=t.length,u=0,f=0;for(let A=0;A<c;A++)u+=t[A],f+=i[A];if(u<f)return 1/0;let m=u/f;a*=m;let y=0;for(let A=0;A<c;A++){let C=t[A],R=i[A]*m,D=C>R?C-R:R-C;if(D>a)return 1/0;y+=D}return y/u}}Ze.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ze.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ze.MAX_AVG_VARIANCE=.42,Ze.MAX_INDIVIDUAL_VARIANCE=.8,Ze.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ze.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ze.MAX_PIXEL_DRIFT=3,Ze.MAX_PATTERN_DRIFT=5,Ze.SKIPPED_ROW_COUNT_MAX=25,Ze.ROW_STEP=5,Ze.BARCODE_MIN_HEIGHT=10;class Pt{constructor(t,i){if(i.length===0)throw new I;this.field=t;let a=i.length;if(a>1&&i[0]===0){let c=1;for(;c<a&&i[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),z.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let i=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)i=this.field.add(this.field.multiply(t,i),this.coefficients[c]);return i}add(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){let f=i;i=a,a=f}let c=new Int32Array(a.length),u=a.length-i.length;z.arraycopy(a,0,c,0,u);for(let f=u;f<a.length;f++)c[f]=this.field.add(i[f-u],a[f]);return new Pt(this.field,c)}subtract(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Pt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Pt(this.field,new Int32Array([0]));let i=this.coefficients,a=i.length,c=t.coefficients,u=c.length,f=new Int32Array(a+u-1);for(let m=0;m<a;m++){let y=i[m];for(let A=0;A<u;A++)f[m+A]=this.field.add(f[m+A],this.field.multiply(y,c[A]))}return new Pt(this.field,f)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let a=0;a<t;a++)i[a]=this.field.subtract(0,this.coefficients[a]);return new Pt(this.field,i)}multiplyScalar(t){if(t===0)return new Pt(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,a=new Int32Array(i);for(let c=0;c<i;c++)a[c]=this.field.multiply(this.coefficients[c],t);return new Pt(this.field,a)}multiplyByMonomial(t,i){if(t<0)throw new I;if(i===0)return new Pt(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+t);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],i);return new Pt(this.field,c)}toString(){let t=new ve;for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(i===0||a!==1)&&t.append(a),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class cl{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new I;return this.logTable[t]}inverse(t){if(t===0)throw new En;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class fr extends cl{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let c=0;c<t;c++)this.expTable[c]=a,a=a*i%t;for(let c=0;c<t-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Pt(this,new Int32Array([0])),this.one=new Pt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new I;if(i===0)return this.zero;let a=new Int32Array(t+1);return a[0]=i,new Pt(this,a)}}fr.PDF417_GF=new fr(He.NUMBER_OF_CODEWORDS,3);class Gi{constructor(){this.field=fr.PDF417_GF}decode(t,i,a){let c=new Pt(this.field,t),u=new Int32Array(i),f=!1;for(let F=i;F>0;F--){let V=c.evaluateAt(this.field.exp(F));u[i-F]=V,V!==0&&(f=!0)}if(!f)return 0;let m=this.field.getOne();if(a!=null)for(const F of a){let V=this.field.exp(t.length-1-F),X=new Pt(this.field,new Int32Array([this.field.subtract(0,V),1]));m=m.multiply(X)}let y=new Pt(this.field,u),A=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),y,i),C=A[0],R=A[1],D=this.findErrorLocations(C),j=this.findErrorMagnitudes(R,C,D);for(let F=0;F<D.length;F++){let V=t.length-1-this.field.log(D[F]);if(V<0)throw L.getChecksumInstance();t[V]=this.field.subtract(t[V],j[F])}return D.length}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){let D=t;t=i,i=D}let c=t,u=i,f=this.field.getZero(),m=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let D=c,j=f;if(c=u,f=m,c.isZero())throw L.getChecksumInstance();u=D;let F=this.field.getZero(),V=c.getCoefficient(c.getDegree()),X=this.field.inverse(V);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let re=u.getDegree()-c.getDegree(),Ae=this.field.multiply(u.getCoefficient(u.getDegree()),X);F=F.add(this.field.buildMonomial(re,Ae)),u=u.subtract(c.multiplyByMonomial(re,Ae))}m=F.multiply(f).subtract(j).negative()}let y=m.getCoefficient(0);if(y===0)throw L.getChecksumInstance();let A=this.field.inverse(y),C=m.multiply(A),R=u.multiply(A);return[C,R]}findErrorLocations(t){let i=t.getDegree(),a=new Int32Array(i),c=0;for(let u=1;u<this.field.getSize()&&c<i;u++)t.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==i)throw L.getChecksumInstance();return a}findErrorMagnitudes(t,i,a){let c=i.getDegree(),u=new Int32Array(c);for(let A=1;A<=c;A++)u[c-A]=this.field.multiply(A,i.getCoefficient(A));let f=new Pt(this.field,u),m=a.length,y=new Int32Array(m);for(let A=0;A<m;A++){let C=this.field.inverse(a[A]),R=this.field.subtract(0,t.evaluateAt(C)),D=this.field.inverse(f.evaluateAt(C));y[A]=this.field.multiply(R,D)}return y}}class qi{constructor(t,i,a,c,u){t instanceof qi?this.constructor_2(t):this.constructor_1(t,i,a,c,u)}constructor_1(t,i,a,c,u){const f=i==null||a==null,m=c==null||u==null;if(f&&m)throw new J;f?(i=new Me(0,c.getY()),a=new Me(0,u.getY())):m&&(c=new Me(t.getWidth()-1,i.getY()),u=new Me(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=i,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new qi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,a){let c=this.topLeft,u=this.bottomLeft,f=this.topRight,m=this.bottomRight;if(t>0){let y=a?this.topLeft:this.topRight,A=Math.trunc(y.getY()-t);A<0&&(A=0);let C=new Me(y.getX(),A);a?c=C:f=C}if(i>0){let y=a?this.bottomLeft:this.bottomRight,A=Math.trunc(y.getY()+i);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let C=new Me(y.getX(),A);a?u=C:m=C}return new qi(this.image,c,u,f,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ls{constructor(t,i,a,c){this.columnCount=t,this.errorCorrectionLevel=c,this.rowCountUpperPart=i,this.rowCountLowerPart=a,this.rowCount=i+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Yr{constructor(){this.buffer=""}static form(t,i){let a=-1;function c(f,m,y,A,C,R){if(f==="%%")return"%";if(i[++a]===void 0)return;f=A?parseInt(A.substr(1)):void 0;let D=C?parseInt(C.substr(1)):void 0,j;switch(R){case"s":j=i[a];break;case"c":j=i[a][0];break;case"f":j=parseFloat(i[a]).toFixed(f);break;case"p":j=parseFloat(i[a]).toPrecision(f);break;case"e":j=parseFloat(i[a]).toExponential(f);break;case"x":j=parseInt(i[a]).toString(D||16);break;case"d":j=parseFloat(parseInt(i[a],D||10).toPrecision(f)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(D);let F=parseInt(y),V=y&&y[0]+""=="0"?"0":" ";for(;j.length<F;)j=m!==void 0?j+V:V+j;return j}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,c)}format(t,...i){this.buffer+=Yr.form(t,i)}toString(){return this.buffer}}class ir{constructor(t){this.boundingBox=new qi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let a=1;a<ir.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(t)-a;if(c>=0&&(i=this.codewords[c],i!=null)||(c=this.imageRowToCodewordIndex(t)+a,c<this.codewords.length&&(i=this.codewords[c],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Yr;let i=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}return t.toString()}}ir.MAX_NEARBY_DISTANCE=5;class rr{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>t?(t=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===t&&i.push(u.getKey())}return He.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class ul extends ir{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=-1,A=1,C=0;for(let R=f;R<m;R++){if(i[R]==null)continue;let D=i[R],j=D.getRowNumber()-y;if(j===0)C++;else if(j===1)A=Math.max(A,C),C=1,y=D.getRowNumber();else if(j<0||D.getRowNumber()>=t.getRowCount()||j>R)i[R]=null;else{let F;A>2?F=(A-2)*j:F=j;let V=F>=R;for(let X=1;X<=F&&!V;X++)V=i[R-X]!=null;V?i[R]=null:(y=D.getRowNumber(),C=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=i.length)continue;i[c]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),y=-1;for(let A=u;A<f;A++){if(m[A]==null)continue;let C=m[A];C.setRowNumberAsRowIndicatorColumn();let R=C.getRowNumber()-y;R===0||(R===1?y=C.getRowNumber():C.getRowNumber()>=t.getRowCount()?m[A]=null:y=C.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new rr,a=new rr,c=new rr,u=new rr;for(let m of t){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let y=m.getValue()%30,A=m.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:a.setValue(y*3+1);break;case 1:u.setValue(y/3),c.setValue(y%3);break;case 2:i.setValue(y+1);break}}if(i.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<He.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>He.MAX_ROWS_IN_BARCODE)return null;let f=new ls(i.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,f),f}removeIncorrectCodewords(t,i){for(let a=0;a<t.length;a++){let c=t[a];if(t[a]==null)continue;let u=c.getValue()%30,f=c.getRowNumber();if(f>i.getRowCount()){t[a]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(t[a]=null);break;case 2:u+1!==i.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class pn{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=He.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let a=this.detectionResultColumns[i].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(i,c,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&i[a]!=null&&t[a].getRowNumber()===i[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(t[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let c=i[a].getRowNumber(),u=0;for(let f=this.barcodeColumnCount+1;f>0&&u<this.ADJUST_ROW_NUMBER_SKIP;f--){let m=this.detectionResultColumns[f].getCodewords()[a];m!=null&&(u=pn.adjustRowNumberIfValid(c,u,m),m.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let c=i[a].getRowNumber(),u=0;for(let f=1;f<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;f++){let m=this.detectionResultColumns[f].getCodewords()[a];m!=null&&(u=pn.adjustRowNumberIfValid(c,u,m),m.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,a){if(!this.detectionResultColumns[t-1])return;let c=a[i],u=this.detectionResultColumns[t-1].getCodewords(),f=u;this.detectionResultColumns[t+1]!=null&&(f=this.detectionResultColumns[t+1].getCodewords());let m=new Array(14);m[2]=u[i],m[3]=f[i],i>0&&(m[0]=a[i-1],m[4]=u[i-1],m[5]=f[i-1]),i>1&&(m[8]=a[i-2],m[10]=u[i-2],m[11]=f[i-2]),i<a.length-1&&(m[1]=a[i+1],m[6]=u[i+1],m[7]=f[i+1]),i<a.length-2&&(m[9]=a[i+2],m[12]=u[i+2],m[13]=f[i+2]);for(let y of m)if(pn.adjustRowNumber(c,y))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Yr;for(let a=0;a<t.getCodewords().length;a++){i.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class di{constructor(t,i,a,c){this.rowNumber=di.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==di.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}di.BARCODE_ROW_UNKNOWN=-1;class Sn{static initialize(){for(let t=0;t<He.SYMBOL_TABLE.length;t++){let i=He.SYMBOL_TABLE[t],a=i&1;for(let c=0;c<He.BARS_IN_MODULE;c++){let u=0;for(;(i&1)===a;)u+=1,i>>=1;a=i&1,Sn.RATIOS_TABLE[t]||(Sn.RATIOS_TABLE[t]=new Array(He.BARS_IN_MODULE)),Sn.RATIOS_TABLE[t][He.BARS_IN_MODULE-c-1]=Math.fround(u/He.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=Sn.getDecodedCodewordValue(Sn.sampleBitCounts(t));return i!==-1?i:Sn.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=st.sum(t),a=new Int32Array(He.BARS_IN_MODULE),c=0,u=0;for(let f=0;f<He.MODULES_IN_CODEWORD;f++){let m=i/(2*He.MODULES_IN_CODEWORD)+f*i/He.MODULES_IN_CODEWORD;u+t[c]<=m&&(u+=t[c],c++),a[c]++}return a}static getDecodedCodewordValue(t){let i=Sn.getBitValue(t);return He.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let a=0;a<t.length;a++)for(let c=0;c<t[a];c++)i=i<<1|(a%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=st.sum(t),a=new Array(He.BARS_IN_MODULE);if(i>1)for(let f=0;f<a.length;f++)a[f]=Math.fround(t[f]/i);let c=Ur.MAX_VALUE,u=-1;this.bSymbolTableReady||Sn.initialize();for(let f=0;f<Sn.RATIOS_TABLE.length;f++){let m=0,y=Sn.RATIOS_TABLE[f];for(let A=0;A<He.BARS_IN_MODULE;A++){let C=Math.fround(y[A]-a[A]);if(m+=Math.fround(C*C),m>=c)break}m<c&&(c=m,u=He.SYMBOL_TABLE[f])}return u}}Sn.bSymbolTableReady=!1,Sn.RATIOS_TABLE=new Array(He.SYMBOL_TABLE.length).map(O=>new Array(He.BARS_IN_MODULE));class Xr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Eo{static parseLong(t,i=void 0){return parseInt(t,i)}}class os extends v{}os.kind="NullPointerException";class hl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,a){if(t==null)throw new os;if(i<0||i>t.length||a<0||i+a>t.length||i+a<0)throw new Y;if(a===0)return;for(let c=0;c<a;c++)this.write(t[i+c])}flush(){}close(){}}class Oa extends v{}class cs extends hl{constructor(t=32){if(super(),this.count=0,t<0)throw new I("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Oa;a=K.MAX_VALUE}this.buf=ie.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,a){if(i<0||i>t.length||a<0||i+a-t.length>0)throw new Y;this.ensureCapacity(this.count+a),z.arraycopy(t,i,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ie.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Ct;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ct||(Ct={}));function Ao(){if(typeof window<"u")return window.BigInt||null;if(typeof Bc<"u")return Bc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let us;function ar(O){if(typeof us>"u"&&(us=Ao()),us===null)throw new Error("BigInt is not supported!");return us(O)}function dl(){let O=[];O[0]=ar(1);let t=ar(900);O[1]=t;for(let i=2;i<16;i++)O[i]=O[i-1]*t;return O}class ae{static decode(t,i){let a=new ve(""),c=oe.ISO8859_1;a.enableDecoding(c);let u=1,f=t[u++],m=new Xr;for(;u<t[0];){switch(f){case ae.TEXT_COMPACTION_MODE_LATCH:u=ae.textCompaction(t,u,a);break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:u=ae.byteCompaction(f,t,c,u,a);break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[u++]);break;case ae.NUMERIC_COMPACTION_MODE_LATCH:u=ae.numericCompaction(t,u,a);break;case ae.ECI_CHARSET:oe.getCharacterSetECIByValue(t[u++]);break;case ae.ECI_GENERAL_PURPOSE:u+=2;break;case ae.ECI_USER_DEFINED:u++;break;case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=ae.decodeMacroBlock(t,u,m);break;case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:throw new W;default:u--,u=ae.textCompaction(t,u,a);break}if(u<t.length)f=t[u++];else throw W.getFormatInstance()}if(a.length()===0)throw W.getFormatInstance();let y=new St(null,a.toString(),null,i);return y.setOther(m),y}static decodeMacroBlock(t,i,a){if(i+ae.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw W.getFormatInstance();let c=new Int32Array(ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<ae.NUMBER_OF_SEQUENCE_CODEWORDS;m++,i++)c[m]=t[i];a.setSegmentIndex(K.parseInt(ae.decodeBase900toBase10(c,ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ve;i=ae.textCompaction(t,i,u),a.setFileId(u.toString());let f=-1;for(t[i]===ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=i+1);i<t[0];)switch(t[i]){case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new ve;i=ae.textCompaction(t,i+1,m),a.setFileName(m.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new ve;i=ae.textCompaction(t,i+1,y),a.setSender(y.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new ve;i=ae.textCompaction(t,i+1,A),a.setAddressee(A.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new ve;i=ae.numericCompaction(t,i+1,C),a.setSegmentCount(K.parseInt(C.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let R=new ve;i=ae.numericCompaction(t,i+1,R),a.setTimestamp(Eo.parseLong(R.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new ve;i=ae.numericCompaction(t,i+1,D),a.setChecksum(K.parseInt(D.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new ve;i=ae.numericCompaction(t,i+1,j),a.setFileSize(Eo.parseLong(j.toString()));break;default:throw W.getFormatInstance()}break;case ae.MACRO_PDF417_TERMINATOR:i++,a.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(f!==-1){let m=i-f;a.isLastSegment()&&m--,a.setOptionalData(ie.copyOfRange(t,f,f+m))}return i}static textCompaction(t,i,a){let c=new Int32Array((t[0]-i)*2),u=new Int32Array((t[0]-i)*2),f=0,m=!1;for(;i<t[0]&&!m;){let y=t[i++];if(y<ae.TEXT_COMPACTION_MODE_LATCH)c[f]=y/30,c[f+1]=y%30,f+=2;else switch(y){case ae.TEXT_COMPACTION_MODE_LATCH:c[f++]=ae.TEXT_COMPACTION_MODE_LATCH;break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:i--,m=!0;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=t[i++],u[f]=y,f++;break}}return ae.decodeTextCompaction(c,u,f,a),i}static decodeTextCompaction(t,i,a,c){let u=Ct.ALPHA,f=Ct.ALPHA,m=0;for(;m<a;){let y=t[m],A="";switch(u){case Ct.ALPHA:if(y<26)A=String.fromCharCode(65+y);else switch(y){case 26:A=" ";break;case ae.LL:u=Ct.LOWER;break;case ae.ML:u=Ct.MIXED;break;case ae.PS:f=u,u=Ct.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Ct.ALPHA;break}break;case Ct.LOWER:if(y<26)A=String.fromCharCode(97+y);else switch(y){case 26:A=" ";break;case ae.AS:f=u,u=Ct.ALPHA_SHIFT;break;case ae.ML:u=Ct.MIXED;break;case ae.PS:f=u,u=Ct.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Ct.ALPHA;break}break;case Ct.MIXED:if(y<ae.PL)A=ae.MIXED_CHARS[y];else switch(y){case ae.PL:u=Ct.PUNCT;break;case 26:A=" ";break;case ae.LL:u=Ct.LOWER;break;case ae.AL:u=Ct.ALPHA;break;case ae.PS:f=u,u=Ct.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Ct.ALPHA;break}break;case Ct.PUNCT:if(y<ae.PAL)A=ae.PUNCT_CHARS[y];else switch(y){case ae.PAL:u=Ct.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Ct.ALPHA;break}break;case Ct.ALPHA_SHIFT:if(u=f,y<26)A=String.fromCharCode(65+y);else switch(y){case 26:A=" ";break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Ct.ALPHA;break}break;case Ct.PUNCT_SHIFT:if(u=f,y<ae.PAL)A=ae.PUNCT_CHARS[y];else switch(y){case ae.PAL:u=Ct.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ae.TEXT_COMPACTION_MODE_LATCH:u=Ct.ALPHA;break}break}A!==""&&c.append(A),m++}}static byteCompaction(t,i,a,c,u){let f=new cs,m=0,y=0,A=!1;switch(t){case ae.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),R=i[c++];for(;c<i[0]&&!A;)switch(C[m++]=R,y=900*y+R,R=i[c++],R){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:c--,A=!0;break;default:if(m%5===0&&m>0){for(let D=0;D<6;++D)f.write(Number(ar(y)>>ar(8*(5-D))));y=0,m=0}break}c===i[0]&&R<ae.TEXT_COMPACTION_MODE_LATCH&&(C[m++]=R);for(let D=0;D<m;D++)f.write(C[D]);break;case ae.BYTE_COMPACTION_MODE_LATCH_6:for(;c<i[0]&&!A;){let D=i[c++];if(D<ae.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+D;else switch(D){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:c--,A=!0;break}if(m%5===0&&m>0){for(let j=0;j<6;++j)f.write(Number(ar(y)>>ar(8*(5-j))));y=0,m=0}}break}return u.append(Ke.decode(f.toByteArray(),a)),c}static numericCompaction(t,i,a){let c=0,u=!1,f=new Int32Array(ae.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!u;){let m=t[i++];if(i===t[0]&&(u=!0),m<ae.TEXT_COMPACTION_MODE_LATCH)f[c]=m,c++;else switch(m){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(c%ae.MAX_NUMERIC_CODEWORDS===0||m===ae.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(ae.decodeBase900toBase10(f,c)),c=0)}return i}static decodeBase900toBase10(t,i){let a=ar(0);for(let u=0;u<i;u++)a+=ae.EXP900[i-u-1]*ar(t[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new W;return c.substring(1)}}ae.TEXT_COMPACTION_MODE_LATCH=900,ae.BYTE_COMPACTION_MODE_LATCH=901,ae.NUMERIC_COMPACTION_MODE_LATCH=902,ae.BYTE_COMPACTION_MODE_LATCH_6=924,ae.ECI_USER_DEFINED=925,ae.ECI_GENERAL_PURPOSE=926,ae.ECI_CHARSET=927,ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ae.MACRO_PDF417_TERMINATOR=922,ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ae.MAX_NUMERIC_CODEWORDS=15,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ae.PL=25,ae.LL=27,ae.AS=27,ae.ML=28,ae.AL=28,ae.PS=29,ae.PAL=29,ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ae.EXP900=Ao()?dl():[],ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class it{constructor(){}static decode(t,i,a,c,u,f,m){let y=new qi(t,i,a,c,u),A=null,C=null,R;for(let F=!0;;F=!1){if(i!=null&&(A=it.getRowIndicatorColumn(t,y,i,!0,f,m)),c!=null&&(C=it.getRowIndicatorColumn(t,y,c,!1,f,m)),R=it.merge(A,C),R==null)throw J.getNotFoundInstance();let V=R.getBoundingBox();if(F&&V!=null&&(V.getMinY()<y.getMinY()||V.getMaxY()>y.getMaxY()))y=V;else break}R.setBoundingBox(y);let D=R.getBarcodeColumnCount()+1;R.setDetectionResultColumn(0,A),R.setDetectionResultColumn(D,C);let j=A!=null;for(let F=1;F<=D;F++){let V=j?F:D-F;if(R.getDetectionResultColumn(V)!==void 0)continue;let X;V===0||V===D?X=new ul(y,V===0):X=new ir(y),R.setDetectionResultColumn(V,X);let re=-1,Ae=re;for(let Ee=y.getMinY();Ee<=y.getMaxY();Ee++){if(re=it.getStartColumn(R,V,Ee,j),re<0||re>y.getMaxX()){if(Ae===-1)continue;re=Ae}let we=it.detectCodeword(t,y.getMinX(),y.getMaxX(),j,re,Ee,f,m);we!=null&&(X.setCodeword(Ee,we),Ae=re,f=Math.min(f,we.getWidth()),m=Math.max(m,we.getWidth()))}}return it.createDecoderResult(R)}static merge(t,i){if(t==null&&i==null)return null;let a=it.getBarcodeMetadata(t,i);if(a==null)return null;let c=qi.merge(it.adjustBoundingBox(t),it.adjustBoundingBox(i));return new pn(a,c)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let a=it.getMax(i),c=0;for(let m of i)if(c+=a-m,m>0)break;let u=t.getCodewords();for(let m=0;c>0&&u[m]==null;m++)c--;let f=0;for(let m=i.length-1;m>=0&&(f+=a-i[m],!(i[m]>0));m--);for(let m=u.length-1;f>0&&u[m]==null;m--)f--;return t.getBoundingBox().addMissingRows(c,f,t.isLeft())}static getMax(t){let i=-1;for(let a of t)i=Math.max(i,a);return i}static getBarcodeMetadata(t,i){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let c;return i==null||(c=i.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(t,i,a,c,u,f){let m=new ul(i,c);for(let y=0;y<2;y++){let A=y===0?1:-1,C=Math.trunc(Math.trunc(a.getX()));for(let R=Math.trunc(Math.trunc(a.getY()));R<=i.getMaxY()&&R>=i.getMinY();R+=A){let D=it.detectCodeword(t,0,t.getWidth(),c,C,R,u,f);D!=null&&(m.setCodeword(R,D),c?C=D.getStartX():C=D.getEndX())}}return m}static adjustCodewordCount(t,i){let a=i[0][1],c=a.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-it.getNumberOfECCodeWords(t.getBarcodeECLevel());if(c.length===0){if(u<1||u>He.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(t){let i=it.createBarcodeMatrix(t);it.adjustCodewordCount(t,i);let a=new Array,c=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],f=new Array;for(let y=0;y<t.getBarcodeRowCount();y++)for(let A=0;A<t.getBarcodeColumnCount();A++){let C=i[y][A+1].getValue(),R=y*t.getBarcodeColumnCount()+A;C.length===0?a.push(R):C.length===1?c[R]=C[0]:(f.push(R),u.push(C))}let m=new Array(u.length);for(let y=0;y<m.length;y++)m[y]=u[y];return it.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),c,He.toIntArray(a),He.toIntArray(f),m)}static createDecoderResultFromAmbiguousValues(t,i,a,c,u){let f=new Int32Array(c.length),m=100;for(;m-- >0;){for(let y=0;y<f.length;y++)i[c[y]]=u[y][f[y]];try{return it.decodeCodewords(i,t,a)}catch(y){if(!(y instanceof L))throw y}if(f.length===0)throw L.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<u[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw L.getChecksumInstance()}throw L.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let c=0;c<i.length;c++)for(let u=0;u<i[c].length;u++)i[c][u]=new rr;let a=0;for(let c of t.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=0){if(f>=i.length)continue;i[f][a].setValue(u.getValue())}}}a++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,a,c){let u=c?1:-1,f=null;if(it.isValidBarcodeColumn(t,i-u)&&(f=t.getDetectionResultColumn(i-u).getCodeword(a)),f!=null)return c?f.getEndX():f.getStartX();if(f=t.getDetectionResultColumn(i).getCodewordNearby(a),f!=null)return c?f.getStartX():f.getEndX();if(it.isValidBarcodeColumn(t,i-u)&&(f=t.getDetectionResultColumn(i-u).getCodewordNearby(a)),f!=null)return c?f.getEndX():f.getStartX();let m=0;for(;it.isValidBarcodeColumn(t,i-u);){i-=u;for(let y of t.getDetectionResultColumn(i).getCodewords())if(y!=null)return(c?y.getEndX():y.getStartX())+u*m*(y.getEndX()-y.getStartX());m++}return c?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,a,c,u,f,m,y){u=it.adjustCodewordStartColumn(t,i,a,c,u,f);let A=it.getModuleBitCount(t,i,a,c,u,f);if(A==null)return null;let C,R=st.sum(A);if(c)C=u+R;else{for(let F=0;F<A.length/2;F++){let V=A[F];A[F]=A[A.length-1-F],A[A.length-1-F]=V}C=u,u=C-R}if(!it.checkCodewordSkew(R,m,y))return null;let D=Sn.getDecodedValue(A),j=He.getCodeword(D);return j===-1?null:new di(u,C,it.getCodewordBucketNumber(D),j)}static getModuleBitCount(t,i,a,c,u,f){let m=u,y=new Int32Array(8),A=0,C=c?1:-1,R=c;for(;(c?m<a:m>=i)&&A<y.length;)t.get(m,f)===R?(y[A]++,m+=C):(A++,R=!R);return A===y.length||m===(c?a:i)&&A===y.length-1?y:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,a,c,u,f){let m=u,y=c?-1:1;for(let A=0;A<2;A++){for(;(c?m>=i:m<a)&&c===t.get(m,f);){if(Math.abs(u-m)>it.CODEWORD_SKEW_SIZE)return u;m+=y}y=-y,c=!c}return m}static checkCodewordSkew(t,i,a){return i-it.CODEWORD_SKEW_SIZE<=t&&t<=a+it.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,a){if(t.length===0)throw W.getFormatInstance();let c=1<<i+1,u=it.correctErrors(t,a,c);it.verifyCodewordCount(t,c);let f=ae.decode(t,""+i);return f.setErrorsCorrected(u),f.setErasures(a.length),f}static correctErrors(t,i,a){if(i!=null&&i.length>a/2+it.MAX_ERRORS||a<0||a>it.MAX_EC_CODEWORDS)throw L.getChecksumInstance();return it.errorCorrection.decode(t,a,i)}static verifyCodewordCount(t,i){if(t.length<4)throw W.getFormatInstance();let a=t[0];if(a>t.length)throw W.getFormatInstance();if(a===0)if(i<t.length)t[0]=t.length-i;else throw W.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),a=0,c=i.length-1;for(;!((t&1)!==a&&(a=t&1,c--,c<0));)i[c]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return it.getCodewordBucketNumber(it.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new Yr;for(let a=0;a<t.length;a++){i.format("Row %2d: ",a);for(let c=0;c<t[a].length;c++){let u=t[a][c];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}it.CODEWORD_SKEW_SIZE=2,it.MAX_ERRORS=3,it.MAX_EC_CODEWORDS=512,it.errorCorrection=new Gi;class _n{decode(t,i=null){let a=_n.decode(t,i,!1);if(a==null||a.length===0||a[0]==null)throw J.getNotFoundInstance();return a[0]}decodeMultiple(t,i=null){try{return _n.decode(t,i,!0)}catch(a){throw a instanceof W||a instanceof L?J.getNotFoundInstance():a}}static decode(t,i,a){const c=new Array,u=Ze.detectMultiple(t,i,a);for(const f of u.getPoints()){const m=it.decode(u.getBits(),f[4],f[5],f[6],f[7],_n.getMinCodewordWidth(f),_n.getMaxCodewordWidth(f)),y=new ge(m.getText(),m.getRawBytes(),void 0,f,pe.PDF_417);y.putMetadata(tt.ERROR_CORRECTION_LEVEL,m.getECLevel());const A=m.getOther();A!=null&&y.putMetadata(tt.PDF417_EXTRA_METADATA,A),c.push(y)}return c.map(f=>f)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?K.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(_n.getMaxWidth(t[0],t[4]),_n.getMaxWidth(t[6],t[2])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN),Math.max(_n.getMaxWidth(t[1],t[5]),_n.getMaxWidth(t[7],t[3])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(_n.getMinWidth(t[0],t[4]),_n.getMinWidth(t[6],t[2])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN),Math.min(_n.getMinWidth(t[1],t[5]),_n.getMinWidth(t[7],t[3])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN)))}reset(){}}class hs extends v{}hs.kind="ReaderException";class So{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!d(t)&&t.get(be.TRY_HARDER)===!0,a=d(t)?null:t.get(be.POSSIBLE_FORMATS),c=new Array;if(!d(a)){const u=a.some(f=>f===pe.UPC_A||f===pe.UPC_E||f===pe.EAN_13||f===pe.EAN_8||f===pe.CODABAR||f===pe.CODE_39||f===pe.CODE_93||f===pe.CODE_128||f===pe.ITF||f===pe.RSS_14||f===pe.RSS_EXPANDED);u&&!i&&c.push(new ui(t,this.verbose)),a.includes(pe.QR_CODE)&&c.push(new Vi),a.includes(pe.DATA_MATRIX)&&c.push(new Hi),a.includes(pe.AZTEC)&&c.push(new is),a.includes(pe.PDF_417)&&c.push(new _n),u&&i&&c.push(new ui(t,this.verbose))}c.length===0&&(i||c.push(new ui(t,this.verbose)),c.push(new Vi),c.push(new Hi),c.push(new is),c.push(new _n),i&&c.push(new ui(t,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new hs("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(a){if(a instanceof hs)continue}throw new J("No MultiFormat Readers were able to detect the code.")}}class _o extends Te{constructor(t=null,i=500){const a=new So;a.setHints(t),super(a,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class nu extends Te{constructor(t=500){super(new _n,t)}}class iu extends Te{constructor(t=500){super(new Vi,t)}}var fl;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(fl||(fl={}));var hn=fl;class Ra{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new on(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let a=i[i.length-1];const c=this.field;for(let u=i.length;u<=t;u++){const f=a.multiply(new on(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));i.push(f),a=f}}return i[t]}encode(t,i){if(i===0)throw new I("No error correction bytes");const a=t.length-i;if(a<=0)throw new I("No data bytes provided");const c=this.buildGenerator(i),u=new Int32Array(a);z.arraycopy(t,0,u,0,a);let f=new on(this.field,u);f=f.multiplyByMonomial(i,1);const y=f.divide(c)[1].getCoefficients(),A=i-y.length;for(let C=0;C<A;C++)t[a+C]=0;z.arraycopy(y,0,t,a+A,y.length)}}class Zt{constructor(){}static applyMaskPenaltyRule1(t){return Zt.applyMaskPenaltyRule1Internal(t,!0)+Zt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let f=0;f<u-1;f++){const m=a[f];for(let y=0;y<c-1;y++){const A=m[y];A===m[y+1]&&A===a[f+1][y]&&A===a[f+1][y+1]&&i++}}return Zt.N2*i}static applyMaskPenaltyRule3(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let f=0;f<u;f++)for(let m=0;m<c;m++){const y=a[f];m+6<c&&y[m]===1&&y[m+1]===0&&y[m+2]===1&&y[m+3]===1&&y[m+4]===1&&y[m+5]===0&&y[m+6]===1&&(Zt.isWhiteHorizontal(y,m-4,m)||Zt.isWhiteHorizontal(y,m+7,m+11))&&i++,f+6<u&&a[f][m]===1&&a[f+1][m]===0&&a[f+2][m]===1&&a[f+3][m]===1&&a[f+4][m]===1&&a[f+5][m]===0&&a[f+6][m]===1&&(Zt.isWhiteVertical(a,m,f-4,f)||Zt.isWhiteVertical(a,m,f+7,f+11))&&i++}return i*Zt.N3}static isWhiteHorizontal(t,i,a){i=Math.max(i,0),a=Math.min(a,t.length);for(let c=i;c<a;c++)if(t[c]===1)return!1;return!0}static isWhiteVertical(t,i,a,c){a=Math.max(a,0),c=Math.min(c,t.length);for(let u=a;u<c;u++)if(t[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let y=0;y<u;y++){const A=a[y];for(let C=0;C<c;C++)A[C]===1&&i++}const f=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-f)*10/f)*Zt.N4}static getDataMaskBit(t,i,a){let c,u;switch(t){case 0:c=a+i&1;break;case 1:c=a&1;break;case 2:c=i%3;break;case 3:c=(a+i)%3;break;case 4:c=Math.floor(a/2)+Math.floor(i/3)&1;break;case 5:u=a*i,c=(u&1)+u%3;break;case 6:u=a*i,c=(u&1)+u%3&1;break;case 7:u=a*i,c=u%3+(a+i&1)&1;break;default:throw new I("Invalid mask pattern: "+t)}return c===0}static applyMaskPenaltyRule1Internal(t,i){let a=0;const c=i?t.getHeight():t.getWidth(),u=i?t.getWidth():t.getHeight(),f=t.getArray();for(let m=0;m<c;m++){let y=0,A=-1;for(let C=0;C<u;C++){const R=i?f[m][C]:f[C][m];R===A?y++:(y>=5&&(a+=Zt.N1+(y-5)),y=1,A=R)}y>=5&&(a+=Zt.N1+(y-5))}return a}}Zt.N1=3,Zt.N2=3,Zt.N3=40,Zt.N4=10;class ds{constructor(t,i){this.width=t,this.height=i;const a=new Array(i);for(let c=0;c!==i;c++)a[c]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,a){this.bytes[i][t]=a}setBoolean(t,i,a){this.bytes[i][t]=a?1:0}clear(t){for(const i of this.bytes)ie.fill(i,t)}equals(t){if(!(t instanceof ds))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],f=i.bytes[a];for(let m=0,y=this.width;m<y;++m)if(u[m]!==f[m])return!1}return!0}toString(){const t=new ve;for(let i=0,a=this.height;i<a;++i){const c=this.bytes[i];for(let u=0,f=this.width;u<f;++u)switch(c[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class gr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new ve;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<gr.NUM_MASK_PATTERNS}}gr.NUM_MASK_PATTERNS=8;class It extends v{}It.kind="WriterException";class Ve{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,a,c,u){Ve.clearMatrix(u),Ve.embedBasicPatterns(a,u),Ve.embedTypeInfo(i,c,u),Ve.maybeEmbedVersionInfo(a,u),Ve.embedDataBits(t,c,u)}static embedBasicPatterns(t,i){Ve.embedPositionDetectionPatternsAndSeparators(i),Ve.embedDarkDotAtLeftBottomCorner(i),Ve.maybeEmbedPositionAdjustmentPatterns(t,i),Ve.embedTimingPatterns(i)}static embedTypeInfo(t,i,a){const c=new ce;Ve.makeTypeInfoBits(t,i,c);for(let u=0,f=c.getSize();u<f;++u){const m=c.get(c.getSize()-1-u),y=Ve.TYPE_INFO_COORDINATES[u],A=y[0],C=y[1];if(a.setBoolean(A,C,m),u<8){const R=a.getWidth()-u-1;a.setBoolean(R,8,m)}else{const D=a.getHeight()-7+(u-8);a.setBoolean(8,D,m)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const a=new ce;Ve.makeVersionInfoBits(t,a);let c=17;for(let u=0;u<6;++u)for(let f=0;f<3;++f){const m=a.get(c);c--,i.setBoolean(u,i.getHeight()-11+f,m),i.setBoolean(i.getHeight()-11+f,u,m)}}static embedDataBits(t,i,a){let c=0,u=-1,f=a.getWidth()-1,m=a.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);m>=0&&m<a.getHeight();){for(let y=0;y<2;++y){const A=f-y;if(!Ve.isEmpty(a.get(A,m)))continue;let C;c<t.getSize()?(C=t.get(c),++c):C=!1,i!==255&&Zt.getDataMaskBit(i,A,m)&&(C=!C),a.setBoolean(A,m,C)}m+=u}u=-u,m+=u,f-=2}if(c!==t.getSize())throw new It("Not all bits consumed: "+c+"/"+t.getSize())}static findMSBSet(t){return 32-K.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new I("0 polynomial");const a=Ve.findMSBSet(i);for(t<<=a-1;Ve.findMSBSet(t)>=a;)t^=i<<Ve.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,i,a){if(!gr.isValidMaskPattern(i))throw new It("Invalid mask pattern");const c=t.getBits()<<3|i;a.appendBits(c,5);const u=Ve.calculateBCHCode(c,Ve.TYPE_INFO_POLY);a.appendBits(u,10);const f=new ce;if(f.appendBits(Ve.TYPE_INFO_MASK_PATTERN,15),a.xor(f),a.getSize()!==15)throw new It("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const a=Ve.calculateBCHCode(t.getVersionNumber(),Ve.VERSION_INFO_POLY);if(i.appendBits(a,12),i.getSize()!==18)throw new It("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const a=(i+1)%2;Ve.isEmpty(t.get(i,6))&&t.setNumber(i,6,a),Ve.isEmpty(t.get(6,i))&&t.setNumber(6,i,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new It;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,a){for(let c=0;c<8;++c){if(!Ve.isEmpty(a.get(t+c,i)))throw new It;a.setNumber(t+c,i,0)}}static embedVerticalSeparationPattern(t,i,a){for(let c=0;c<7;++c){if(!Ve.isEmpty(a.get(t,i+c)))throw new It;a.setNumber(t,i+c,0)}}static embedPositionAdjustmentPattern(t,i,a){for(let c=0;c<5;++c){const u=Ve.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)a.setNumber(t+f,i+c,u[f])}}static embedPositionDetectionPattern(t,i,a){for(let c=0;c<7;++c){const u=Ve.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)a.setNumber(t+f,i+c,u[f])}}static embedPositionDetectionPatternsAndSeparators(t){const i=Ve.POSITION_DETECTION_PATTERN[0].length;Ve.embedPositionDetectionPattern(0,0,t),Ve.embedPositionDetectionPattern(t.getWidth()-i,0,t),Ve.embedPositionDetectionPattern(0,t.getWidth()-i,t);const a=8;Ve.embedHorizontalSeparationPattern(0,a-1,t),Ve.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),Ve.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const c=7;Ve.embedVerticalSeparationPattern(c,0,t),Ve.embedVerticalSeparationPattern(t.getHeight()-c-1,0,t),Ve.embedVerticalSeparationPattern(c,t.getHeight()-c,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,c=Ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,f=c.length;u!==f;u++){const m=c[u];if(m>=0)for(let y=0;y!==f;y++){const A=c[y];A>=0&&Ve.isEmpty(i.get(A,m))&&Ve.embedPositionAdjustmentPattern(A-2,m-2,i)}}}}Ve.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ve.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ve.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ve.VERSION_INFO_POLY=7973,Ve.TYPE_INFO_POLY=1335,Ve.TYPE_INFO_MASK_PATTERN=21522;class ru{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ft{constructor(){}static calculateMaskPenalty(t){return Zt.applyMaskPenaltyRule1(t)+Zt.applyMaskPenaltyRule2(t)+Zt.applyMaskPenaltyRule3(t)+Zt.applyMaskPenaltyRule4(t)}static encode(t,i,a=null){let c=Ft.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(hn.CHARACTER_SET)!==void 0;u&&(c=a.get(hn.CHARACTER_SET).toString());const f=this.chooseMode(t,c),m=new ce;if(f===Pe.BYTE&&(u||Ft.DEFAULT_BYTE_MODE_ENCODING!==c)){const Ee=oe.getCharacterSetECIByName(c);Ee!==void 0&&this.appendECI(Ee,m)}this.appendModeInfo(f,m);const y=new ce;this.appendBytes(t,f,y,c);let A;if(a!==null&&a.get(hn.QR_VERSION)!==void 0){const Ee=Number.parseInt(a.get(hn.QR_VERSION).toString(),10);A=je.getVersionForNumber(Ee);const we=this.calculateBitsNeeded(f,m,y,A);if(!this.willFit(we,A,i))throw new It("Data too big for requested version")}else A=this.recommendVersion(i,f,m,y);const C=new ce;C.appendBitArray(m);const R=f===Pe.BYTE?y.getSizeInBytes():t.length;this.appendLengthInfo(R,A,f,C),C.appendBitArray(y);const D=A.getECBlocksForLevel(i),j=A.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(j,C);const F=this.interleaveWithECBytes(C,A.getTotalCodewords(),j,D.getNumBlocks()),V=new gr;V.setECLevel(i),V.setMode(f),V.setVersion(A);const X=A.getDimensionForVersion(),re=new ds(X,X),Ae=this.chooseMaskPattern(F,i,A,re);return V.setMaskPattern(Ae),Ve.buildMatrix(F,i,A,Ae,re),V.setMatrix(re),V}static recommendVersion(t,i,a,c){const u=this.calculateBitsNeeded(i,a,c,je.getVersionForNumber(1)),f=this.chooseVersion(u,t),m=this.calculateBitsNeeded(i,a,c,f);return this.chooseVersion(m,t)}static calculateBitsNeeded(t,i,a,c){return i.getSize()+t.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(t){return t<Ft.ALPHANUMERIC_TABLE.length?Ft.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(oe.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return Pe.KANJI;let a=!1,c=!1;for(let u=0,f=t.length;u<f;++u){const m=t.charAt(u);if(Ft.isDigit(m))a=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return Pe.BYTE}return c?Pe.ALPHANUMERIC:a?Pe.NUMERIC:Pe.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=Ke.encode(t,oe.SJIS)}catch{return!1}const a=i.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=i[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,i,a,c){let u=Number.MAX_SAFE_INTEGER,f=-1;for(let m=0;m<gr.NUM_MASK_PATTERNS;m++){Ve.buildMatrix(t,i,a,m,c);let y=this.calculateMaskPenalty(c);y<u&&(u=y,f=m)}return f}static chooseVersion(t,i){for(let a=1;a<=40;a++){const c=je.getVersionForNumber(a);if(Ft.willFit(t,c,i))return c}throw new It("Data too big")}static willFit(t,i,a){const c=i.getTotalCodewords(),f=i.getECBlocksForLevel(a).getTotalECCodewords(),m=c-f,y=(t+7)/8;return m>=y}static terminateBits(t,i){const a=t*8;if(i.getSize()>a)throw new It("data bits cannot fit in the QR Code"+i.getSize()+" > "+a);for(let f=0;f<4&&i.getSize()<a;++f)i.appendBit(!1);const c=i.getSize()&7;if(c>0)for(let f=c;f<8;f++)i.appendBit(!1);const u=t-i.getSizeInBytes();for(let f=0;f<u;++f)i.appendBits((f&1)===0?236:17,8);if(i.getSize()!==a)throw new It("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,a,c,u,f){if(c>=a)throw new It("Block ID too large");const m=t%a,y=a-m,A=Math.floor(t/a),C=A+1,R=Math.floor(i/a),D=R+1,j=A-R,F=C-D;if(j!==F)throw new It("EC bytes mismatch");if(a!==y+m)throw new It("RS blocks mismatch");if(t!==(R+j)*y+(D+F)*m)throw new It("Total bytes mismatch");c<y?(u[0]=R,f[0]=j):(u[0]=D,f[0]=F)}static interleaveWithECBytes(t,i,a,c){if(t.getSizeInBytes()!==a)throw new It("Number of bits and data bytes does not match");let u=0,f=0,m=0;const y=new Array;for(let C=0;C<c;++C){const R=new Int32Array(1),D=new Int32Array(1);Ft.getNumDataBytesAndNumECBytesForBlockID(i,a,c,C,R,D);const j=R[0],F=new Uint8Array(j);t.toBytes(8*u,F,0,j);const V=Ft.generateECBytes(F,D[0]);y.push(new ru(F,V)),f=Math.max(f,j),m=Math.max(m,V.length),u+=R[0]}if(a!==u)throw new It("Data bytes does not match offset");const A=new ce;for(let C=0;C<f;++C)for(const R of y){const D=R.getDataBytes();C<D.length&&A.appendBits(D[C],8)}for(let C=0;C<m;++C)for(const R of y){const D=R.getErrorCorrectionBytes();C<D.length&&A.appendBits(D[C],8)}if(i!==A.getSizeInBytes())throw new It("Interleaving error: "+i+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(t,i){const a=t.length,c=new Int32Array(a+i);for(let f=0;f<a;f++)c[f]=t[f]&255;new Ra(Je.QR_CODE_FIELD_256).encode(c,i);const u=new Uint8Array(i);for(let f=0;f<i;f++)u[f]=c[a+f];return u}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,a,c){const u=a.getCharacterCountBits(i);if(t>=1<<u)throw new It(t+" is bigger than "+((1<<u)-1));c.appendBits(t,u)}static appendBytes(t,i,a,c){switch(i){case Pe.NUMERIC:Ft.appendNumericBytes(t,a);break;case Pe.ALPHANUMERIC:Ft.appendAlphanumericBytes(t,a);break;case Pe.BYTE:Ft.append8BitBytes(t,a,c);break;case Pe.KANJI:Ft.appendKanjiBytes(t,a);break;default:throw new It("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=Ft.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const a=t.length;let c=0;for(;c<a;){const u=Ft.getDigit(t.charAt(c));if(c+2<a){const f=Ft.getDigit(t.charAt(c+1)),m=Ft.getDigit(t.charAt(c+2));i.appendBits(u*100+f*10+m,10),c+=3}else if(c+1<a){const f=Ft.getDigit(t.charAt(c+1));i.appendBits(u*10+f,7),c+=2}else i.appendBits(u,4),c++}}static appendAlphanumericBytes(t,i){const a=t.length;let c=0;for(;c<a;){const u=Ft.getAlphanumericCode(t.charCodeAt(c));if(u===-1)throw new It;if(c+1<a){const f=Ft.getAlphanumericCode(t.charCodeAt(c+1));if(f===-1)throw new It;i.appendBits(u*45+f,11),c+=2}else i.appendBits(u,6),c++}}static append8BitBytes(t,i,a){let c;try{c=Ke.encode(t,a)}catch(u){throw new It(u)}for(let u=0,f=c.length;u!==f;u++){const m=c[u];i.appendBits(m,8)}}static appendKanjiBytes(t,i){let a;try{a=Ke.encode(t,oe.SJIS)}catch(u){throw new It(u)}const c=a.length;for(let u=0;u<c;u+=2){const f=a[u]&255,m=a[u+1]&255,y=f<<8&4294967295|m;let A=-1;if(y>=33088&&y<=40956?A=y-33088:y>=57408&&y<=60351&&(A=y-49472),A===-1)throw new It("Invalid byte sequence");const C=(A>>8)*192+(A&255);i.appendBits(C,13)}}static appendECI(t,i){i.appendBits(Pe.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}Ft.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ft.DEFAULT_BYTE_MODE_ENCODING=oe.UTF8.getName();class mr{write(t,i,a,c=null){if(t.length===0)throw new I("Found empty contents");if(i<0||a<0)throw new I("Requested dimensions are too small: "+i+"x"+a);let u=lt.L,f=mr.QUIET_ZONE_SIZE;c!==null&&(c.get(hn.ERROR_CORRECTION)!==void 0&&(u=lt.fromString(c.get(hn.ERROR_CORRECTION).toString())),c.get(hn.MARGIN)!==void 0&&(f=Number.parseInt(c.get(hn.MARGIN).toString(),10)));const m=Ft.encode(t,u,c);return this.renderResult(m,i,a,f)}writeToDom(t,i,a,c,u=null){typeof t=="string"&&(t=document.querySelector(t));const f=this.write(i,a,c,u);t&&t.appendChild(f)}renderResult(t,i,a,c){const u=t.getMatrix();if(u===null)throw new Fn;const f=u.getWidth(),m=u.getHeight(),y=f+c*2,A=m+c*2,C=Math.max(i,y),R=Math.max(a,A),D=Math.min(Math.floor(C/y),Math.floor(R/A)),j=Math.floor((C-f*D)/2),F=Math.floor((R-m*D)/2),V=this.createSVGElement(C,R);for(let X=0,re=F;X<m;X++,re+=D)for(let Ae=0,Ee=j;Ae<f;Ae++,Ee+=D)if(u.get(Ae,X)===1){const we=this.createSvgRectElement(Ee,re,D,D);V.appendChild(we)}return V}createSVGElement(t,i){const a=document.createElementNS(mr.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",i.toString()),a}createSvgRectElement(t,i,a,c){const u=document.createElementNS(mr.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}mr.QUIET_ZONE_SIZE=4,mr.SVG_NS="http://www.w3.org/2000/svg";class Wr{encode(t,i,a,c,u){if(t.length===0)throw new I("Found empty contents");if(i!==pe.QR_CODE)throw new I("Can only encode QR_CODE, but got "+i);if(a<0||c<0)throw new I(`Requested dimensions are too small: ${a}x${c}`);let f=lt.L,m=Wr.QUIET_ZONE_SIZE;u!==null&&(u.get(hn.ERROR_CORRECTION)!==void 0&&(f=lt.fromString(u.get(hn.ERROR_CORRECTION).toString())),u.get(hn.MARGIN)!==void 0&&(m=Number.parseInt(u.get(hn.MARGIN).toString(),10)));const y=Ft.encode(t,f,u);return Wr.renderResult(y,a,c,m)}static renderResult(t,i,a,c){const u=t.getMatrix();if(u===null)throw new Fn;const f=u.getWidth(),m=u.getHeight(),y=f+c*2,A=m+c*2,C=Math.max(i,y),R=Math.max(a,A),D=Math.min(Math.floor(C/y),Math.floor(R/A)),j=Math.floor((C-f*D)/2),F=Math.floor((R-m*D)/2),V=new Ne(C,R);for(let X=0,re=F;X<m;X++,re+=D)for(let Ae=0,Ee=j;Ae<f;Ae++,Ee+=D)u.get(Ae,X)===1&&V.setRegion(Ee,re,D,D);return V}}Wr.QUIET_ZONE_SIZE=4;class au{encode(t,i,a,c,u){let f;if(i===pe.QR_CODE)f=new Wr;else throw new I("No encoder available for format "+i);return f.encode(t,i,a,c,u)}}class Ri extends Ce{constructor(t,i,a,c,u,f,m,y){if(super(f,m),this.yuvData=t,this.dataWidth=i,this.dataHeight=a,this.left=c,this.top=u,c+f>i||u+m>a)throw new I("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(f,m)}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return z.arraycopy(this.yuvData,c,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const a=t*i,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return z.arraycopy(this.yuvData,u,c,0,a),c;for(let f=0;f<i;f++){const m=f*t;z.arraycopy(this.yuvData,u,c,m,t),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,i,a,c){return new Ri(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,a,c,!1)}renderThumbnail(){const t=this.getWidth()/Ri.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Ri.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*i),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let f=0;f<i;f++){const m=f*t;for(let y=0;y<t;y++){const A=c[u+y*Ri.THUMBNAIL_SCALE_FACTOR]&255;a[m+y]=4278190080|A*65793}u+=this.dataWidth*Ri.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Ri.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ri.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<i;c++,u+=this.dataWidth){const f=u+t/2;for(let m=u,y=u+t-1;m<f;m++,y--){const A=a[m];a[m]=a[y],a[y]=A}}}invert(){return new Re(this)}}Ri.THUMBNAIL_SCALE_FACTOR=2;class gl extends Ce{constructor(t,i,a,c,u,f,m){if(super(i,a),this.dataWidth=c,this.dataHeight=u,this.left=f,this.top=m,t.BYTES_PER_ELEMENT===4){const y=i*a,A=new Uint8ClampedArray(y);for(let C=0;C<y;C++){const R=t[C],D=R>>16&255,j=R>>7&510,F=R&255;A[C]=(D+j+F)/4&255}this.luminances=A}else this.luminances=t;if(c===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=a),f===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+a>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new I("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return z.arraycopy(this.luminances,c,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const a=t*i,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return z.arraycopy(this.luminances,u,c,0,a),c;for(let f=0;f<i;f++){const m=f*t;z.arraycopy(this.luminances,u,c,m,t),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,i,a,c){return new gl(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new Re(this)}}class Co extends oe{static forName(t){return this.getCharacterSetECIByName(t)}}class Da{}Da.ISO_8859_1=oe.ISO8859_1;class Kr{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class To{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class No{constructor(t){this.previous=t}getPrevious(){return this.previous}}class pr extends No{constructor(t,i,a){super(t),this.value=i,this.bitCount=a}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new pr(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new pr(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+K.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class fs extends pr{constructor(t,i,a){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=a}appendTo(t,i){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+a],8)}addBinaryShift(t,i){return new fs(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Io(O,t,i){return new fs(O,t,i)}function Zr(O,t,i){return new pr(O,t,i)}const Qr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],sr=0,gs=1,ti=2,ml=3,fi=4,Ma=new pr(null,0,0),xr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function su(O){for(let t of O)ie.fill(t,-1);return O[sr][fi]=0,O[gs][fi]=0,O[gs][sr]=28,O[ml][fi]=0,O[ti][fi]=0,O[ti][sr]=15,O}const Ba=su(ie.createInt32Array(6,6));class gi{constructor(t,i,a,c){this.token=t,this.mode=i,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let a=this.bitCount,c=this.token;if(t!==this.mode){let f=xr[this.mode][t];c=Zr(c,f&65535,f>>16),a+=f>>16}let u=t===ti?4:5;return c=Zr(c,i,u),new gi(c,t,0,a+u)}shiftAndAppend(t,i){let a=this.token,c=this.mode===ti?4:5;return a=Zr(a,Ba[this.mode][t],c),a=Zr(a,i,5),new gi(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(t){let i=this.token,a=this.mode,c=this.bitCount;if(this.mode===fi||this.mode===ti){let m=xr[a][sr];i=Zr(i,m&65535,m>>16),c+=m>>16,a=sr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new gi(i,a,this.binaryShiftByteCount+1,c+u);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(t+1)),f}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Io(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new gi(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(xr[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=gi.calculateBinaryShiftCost(t)-gi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let c=this.endBinaryShift(t.length).token;c!==null;c=c.getPrevious())i.unshift(c);let a=new ce;for(const c of i)c.appendTo(a,t);return a}toString(){return _e.format("%s bits=%d bytes=%d",Qr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}gi.INITIAL_STATE=new gi(Ma,sr,0,0);function Oo(O){const t=_e.getCharCode(" "),i=_e.getCharCode("."),a=_e.getCharCode(",");O[sr][t]=1;const c=_e.getCharCode("Z"),u=_e.getCharCode("A");for(let D=u;D<=c;D++)O[sr][D]=D-u+2;O[gs][t]=1;const f=_e.getCharCode("z"),m=_e.getCharCode("a");for(let D=m;D<=f;D++)O[gs][D]=D-m+2;O[ti][t]=1;const y=_e.getCharCode("9"),A=_e.getCharCode("0");for(let D=A;D<=y;D++)O[ti][D]=D-A+2;O[ti][a]=12,O[ti][i]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<C.length;D++)O[ml][_e.getCharCode(C[D])]=D;const R=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<R.length;D++)_e.getCharCode(R[D])>0&&(O[fi][_e.getCharCode(R[D])]=D);return O}const ka=Oo(ie.createInt32Array(5,256));class yr{constructor(t){this.text=t}encode(){const t=_e.getCharCode(" "),i=_e.getCharCode(`
`);let a=To.singletonList(gi.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let f,m=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case _e.getCharCode("\r"):f=m===i?2:0;break;case _e.getCharCode("."):f=m===t?3:0;break;case _e.getCharCode(","):f=m===t?4:0;break;case _e.getCharCode(":"):f=m===t?5:0;break;default:f=0}f>0?(a=yr.updateStateListForPair(a,u,f),u++):a=this.updateStateListForChar(a,u)}return To.min(a,(u,f)=>u.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const a=[];for(let c of t)this.updateStateForChar(c,i,a);return yr.simplifyStates(a)}updateStateForChar(t,i,a){let c=this.text[i]&255,u=ka[t.getMode()][c]>0,f=null;for(let m=0;m<=fi;m++){let y=ka[m][c];if(y>0){if(f==null&&(f=t.endBinaryShift(i)),!u||m===t.getMode()||m===ti){const A=f.latchAndAppend(m,y);a.push(A)}if(!u&&Ba[t.getMode()][m]>=0){const A=f.shiftAndAppend(m,y);a.push(A)}}}if(t.getBinaryShiftByteCount()>0||ka[t.getMode()][c]===0){let m=t.addBinaryShiftChar(i);a.push(m)}}static updateStateListForPair(t,i,a){const c=[];for(let u of t)this.updateStateForPair(u,i,a,c);return this.simplifyStates(c)}static updateStateForPair(t,i,a,c){let u=t.endBinaryShift(i);if(c.push(u.latchAndAppend(fi,a)),t.getMode()!==fi&&c.push(u.shiftAndAppend(fi,a)),a===3||a===4){let f=u.latchAndAppend(ti,16-a).latchAndAppend(ti,1);c.push(f)}if(t.getBinaryShiftByteCount()>0){let f=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);c.push(f)}}static simplifyStates(t){let i=[];for(const a of t){let c=!0;for(const u of i){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(i=i.filter(f=>f!==u))}c&&i.push(a)}return i}}class dt{constructor(){}static encodeBytes(t){return dt.encode(t,dt.DEFAULT_EC_PERCENT,dt.DEFAULT_AZTEC_LAYERS)}static encode(t,i,a){let c=new yr(t).encode(),u=K.truncDivision(c.getSize()*i,100)+11,f=c.getSize()+u,m,y,A,C,R;if(a!==dt.DEFAULT_AZTEC_LAYERS){if(m=a<0,y=Math.abs(a),y>(m?dt.MAX_NB_BITS_COMPACT:dt.MAX_NB_BITS))throw new I(_e.format("Illegal value %s for layers",a));A=dt.totalBitsInLayer(y,m),C=dt.WORD_SIZE[y];let we=A-A%C;if(R=dt.stuffBits(c,C),R.getSize()+u>we)throw new I("Data to large for user specified layer");if(m&&R.getSize()>C*64)throw new I("Data to large for user specified layer")}else{C=0,R=null;for(let we=0;;we++){if(we>dt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(m=we<=3,y=m?we+1:we,A=dt.totalBitsInLayer(y,m),f>A)continue;(R==null||C!==dt.WORD_SIZE[y])&&(C=dt.WORD_SIZE[y],R=dt.stuffBits(c,C));let at=A-A%C;if(!(m&&R.getSize()>C*64)&&R.getSize()+u<=at)break}}let D=dt.generateCheckWords(R,A,C),j=R.getSize()/C,F=dt.generateModeMessage(m,y,j),V=(m?11:14)+y*4,X=new Int32Array(V),re;if(m){re=V;for(let we=0;we<X.length;we++)X[we]=we}else{re=V+1+2*K.truncDivision(K.truncDivision(V,2)-1,15);let we=K.truncDivision(V,2),at=K.truncDivision(re,2);for(let Qe=0;Qe<we;Qe++){let nn=Qe+K.truncDivision(Qe,15);X[we-Qe-1]=at-nn-1,X[we+Qe]=at+nn+1}}let Ae=new Ne(re);for(let we=0,at=0;we<y;we++){let Qe=(y-we)*4+(m?9:12);for(let nn=0;nn<Qe;nn++){let ni=nn*2;for(let Bn=0;Bn<2;Bn++)D.get(at+ni+Bn)&&Ae.set(X[we*2+Bn],X[we*2+nn]),D.get(at+Qe*2+ni+Bn)&&Ae.set(X[we*2+nn],X[V-1-we*2-Bn]),D.get(at+Qe*4+ni+Bn)&&Ae.set(X[V-1-we*2-Bn],X[V-1-we*2-nn]),D.get(at+Qe*6+ni+Bn)&&Ae.set(X[V-1-we*2-nn],X[we*2+Bn])}at+=Qe*8}if(dt.drawModeMessage(Ae,m,re,F),m)dt.drawBullsEye(Ae,K.truncDivision(re,2),5);else{dt.drawBullsEye(Ae,K.truncDivision(re,2),7);for(let we=0,at=0;we<K.truncDivision(V,2)-1;we+=15,at+=16)for(let Qe=K.truncDivision(re,2)&1;Qe<re;Qe+=2)Ae.set(K.truncDivision(re,2)-at,Qe),Ae.set(K.truncDivision(re,2)+at,Qe),Ae.set(Qe,K.truncDivision(re,2)-at),Ae.set(Qe,K.truncDivision(re,2)+at)}let Ee=new Kr;return Ee.setCompact(m),Ee.setSize(re),Ee.setLayers(y),Ee.setCodeWords(j),Ee.setMatrix(Ae),Ee}static drawBullsEye(t,i,a){for(let c=0;c<a;c+=2)for(let u=i-c;u<=i+c;u++)t.set(u,i-c),t.set(u,i+c),t.set(i-c,u),t.set(i+c,u);t.set(i-a,i-a),t.set(i-a+1,i-a),t.set(i-a,i-a+1),t.set(i+a,i-a),t.set(i+a,i-a+1),t.set(i+a,i+a-1)}static generateModeMessage(t,i,a){let c=new ce;return t?(c.appendBits(i-1,2),c.appendBits(a-1,6),c=dt.generateCheckWords(c,28,4)):(c.appendBits(i-1,5),c.appendBits(a-1,11),c=dt.generateCheckWords(c,40,4)),c}static drawModeMessage(t,i,a,c){let u=K.truncDivision(a,2);if(i)for(let f=0;f<7;f++){let m=u-3+f;c.get(f)&&t.set(m,u-5),c.get(f+7)&&t.set(u+5,m),c.get(20-f)&&t.set(m,u+5),c.get(27-f)&&t.set(u-5,m)}else for(let f=0;f<10;f++){let m=u-5+f+K.truncDivision(f,5);c.get(f)&&t.set(m,u-7),c.get(f+10)&&t.set(u+7,m),c.get(29-f)&&t.set(m,u+7),c.get(39-f)&&t.set(u-7,m)}}static generateCheckWords(t,i,a){let c=t.getSize()/a,u=new Ra(dt.getGF(a)),f=K.truncDivision(i,a),m=dt.bitsToWords(t,a,f);u.encode(m,f-c);let y=i%a,A=new ce;A.appendBits(0,y);for(const C of Array.from(m))A.appendBits(C,a);return A}static bitsToWords(t,i,a){let c=new Int32Array(a),u,f;for(u=0,f=t.getSize()/i;u<f;u++){let m=0;for(let y=0;y<i;y++)m|=t.get(u*i+y)?1<<i-y-1:0;c[u]=m}return c}static getGF(t){switch(t){case 4:return Je.AZTEC_PARAM;case 6:return Je.AZTEC_DATA_6;case 8:return Je.AZTEC_DATA_8;case 10:return Je.AZTEC_DATA_10;case 12:return Je.AZTEC_DATA_12;default:throw new I("Unsupported word size "+t)}}static stuffBits(t,i){let a=new ce,c=t.getSize(),u=(1<<i)-2;for(let f=0;f<c;f+=i){let m=0;for(let y=0;y<i;y++)(f+y>=c||t.get(f+y))&&(m|=1<<i-1-y);(m&u)===u?(a.appendBits(m&u,i),f--):(m&u)===0?(a.appendBits(m|1,i),f--):a.appendBits(m,i)}return a}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}dt.DEFAULT_EC_PERCENT=33,dt.DEFAULT_AZTEC_LAYERS=0,dt.MAX_NB_BITS=32,dt.MAX_NB_BITS_COMPACT=4,dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class La{encode(t,i,a,c){return this.encodeWithHints(t,i,a,c,null)}encodeWithHints(t,i,a,c,u){let f=Da.ISO_8859_1,m=dt.DEFAULT_EC_PERCENT,y=dt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(hn.CHARACTER_SET)&&(f=Co.forName(u.get(hn.CHARACTER_SET).toString())),u.has(hn.ERROR_CORRECTION)&&(m=K.parseInt(u.get(hn.ERROR_CORRECTION).toString())),u.has(hn.AZTEC_LAYERS)&&(y=K.parseInt(u.get(hn.AZTEC_LAYERS).toString()))),La.encodeLayers(t,i,a,c,f,m,y)}static encodeLayers(t,i,a,c,u,f,m){if(i!==pe.AZTEC)throw new I("Can only encode AZTEC, but got "+i);let y=dt.encode(_e.getBytes(t,u),f,m);return La.renderResult(y,a,c)}static renderResult(t,i,a){let c=t.getMatrix();if(c==null)throw new Fn;let u=c.getWidth(),f=c.getHeight(),m=Math.max(i,u),y=Math.max(a,f),A=Math.min(m/u,y/f),C=(m-u*A)/2,R=(y-f*A)/2,D=new Ne(m,y);for(let j=0,F=R;j<f;j++,F+=A)for(let V=0,X=C;V<u;V++,X+=A)c.get(V,j)&&D.setRegion(X,F,A,A);return D}}l.AbstractExpandedDecoder=cn,l.ArgumentException=N,l.ArithmeticException=En,l.AztecCode=Kr,l.AztecCodeReader=is,l.AztecCodeWriter=La,l.AztecDecoder=vt,l.AztecDetector=rl,l.AztecDetectorResult=po,l.AztecEncoder=dt,l.AztecHighLevelEncoder=yr,l.AztecPoint=Dn,l.BarcodeFormat=pe,l.Binarizer=U,l.BinaryBitmap=B,l.BitArray=ce,l.BitMatrix=Ne,l.BitSource=hi,l.BrowserAztecCodeReader=Jc,l.BrowserBarcodeReader=$c,l.BrowserCodeReader=Te,l.BrowserDatamatrixCodeReader=ss,l.BrowserMultiFormatReader=_o,l.BrowserPDF417Reader=nu,l.BrowserQRCodeReader=iu,l.BrowserQRCodeSvgWriter=mr,l.CharacterSetECI=oe,l.ChecksumException=L,l.Code128Reader=Se,l.Code39Reader=kt,l.DataMatrixDecodedBitStreamParser=Fi,l.DataMatrixReader=Hi,l.DecodeHintType=be,l.DecoderResult=St,l.DefaultGridSampler=il,l.DetectorResult=ns,l.EAN13Reader=Ti,l.EncodeHintType=hn,l.Exception=v,l.FormatException=W,l.GenericGF=Je,l.GenericGFPoly=on,l.GlobalHistogramBinarizer=te,l.GridSampler=nl,l.GridSamplerInstance=oi,l.HTMLCanvasElementLuminanceSource=Le,l.HybridBinarizer=fe,l.ITFReader=nt,l.IllegalArgumentException=I,l.IllegalStateException=Fn,l.InvertedLuminanceSource=Re,l.LuminanceSource=Ce,l.MathUtils=st,l.MultiFormatOneDReader=ui,l.MultiFormatReader=So,l.MultiFormatWriter=au,l.NotFoundException=J,l.OneDReader=Vt,l.PDF417DecodedBitStreamParser=ae,l.PDF417DecoderErrorCorrection=Gi,l.PDF417Reader=_n,l.PDF417ResultMetadata=Xr,l.PerspectiveTransform=Jn,l.PlanarYUVLuminanceSource=Ri,l.QRCodeByteMatrix=ds,l.QRCodeDataMask=Wn,l.QRCodeDecodedBitStreamParser=zt,l.QRCodeDecoderErrorCorrectionLevel=lt,l.QRCodeDecoderFormatInformation=mn,l.QRCodeEncoder=Ft,l.QRCodeEncoderQRCode=gr,l.QRCodeMaskUtil=Zt,l.QRCodeMatrixUtil=Ve,l.QRCodeMode=Pe,l.QRCodeReader=Vi,l.QRCodeVersion=je,l.QRCodeWriter=Wr,l.RGBLuminanceSource=gl,l.RSS14Reader=Nt,l.RSSExpandedReader=ye,l.ReaderException=hs,l.ReedSolomonDecoder=Ci,l.ReedSolomonEncoder=Ra,l.ReedSolomonException=Gn,l.Result=ge,l.ResultMetadataType=tt,l.ResultPoint=Me,l.StringUtils=_e,l.UnsupportedOperationException=wt,l.VideoInputDevice=H,l.WhiteRectangleDetector=Jt,l.WriterException=It,l.ZXingArrays=ie,l.ZXingCharset=Co,l.ZXingInteger=K,l.ZXingStandardCharsets=Da,l.ZXingStringBuilder=ve,l.ZXingStringEncoding=Ke,l.ZXingSystem=z,l.createAbstractExpandedDecoder=Pr,Object.defineProperty(l,"__esModule",{value:!0})}))})(eo,eo.exports)),eo.exports}var $t=Qw();const Jw=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Ig=(function(){function o(r,l,d){if(this.formatMap=new Map([[De.QR_CODE,$t.BarcodeFormat.QR_CODE],[De.AZTEC,$t.BarcodeFormat.AZTEC],[De.CODABAR,$t.BarcodeFormat.CODABAR],[De.CODE_39,$t.BarcodeFormat.CODE_39],[De.CODE_93,$t.BarcodeFormat.CODE_93],[De.CODE_128,$t.BarcodeFormat.CODE_128],[De.DATA_MATRIX,$t.BarcodeFormat.DATA_MATRIX],[De.MAXICODE,$t.BarcodeFormat.MAXICODE],[De.ITF,$t.BarcodeFormat.ITF],[De.EAN_13,$t.BarcodeFormat.EAN_13],[De.EAN_8,$t.BarcodeFormat.EAN_8],[De.PDF_417,$t.BarcodeFormat.PDF_417],[De.RSS_14,$t.BarcodeFormat.RSS_14],[De.RSS_EXPANDED,$t.BarcodeFormat.RSS_EXPANDED],[De.UPC_A,$t.BarcodeFormat.UPC_A],[De.UPC_E,$t.BarcodeFormat.UPC_E],[De.UPC_EAN_EXTENSION,$t.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Jw)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=d;var p=this.createZXingFormats(r),g=new Map;g.set($t.DecodeHintType.POSSIBLE_FORMATS,p),g.set($t.DecodeHintType.TRY_HARDER,!1),this.hints=g}return o.prototype.decodeAsync=function(r){var l=this;return new Promise(function(d,p){try{d(l.decode(r))}catch(g){p(g)}})},o.prototype.decode=function(r){var l=new $t.MultiFormatReader(this.verbose,this.hints),d=new $t.HTMLCanvasElementLuminanceSource(r),p=new $t.BinaryBitmap(new $t.HybridBinarizer(d)),g=l.decode(p);return{text:g.text,format:D2.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},o.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,d,p){r.set(l,d)}),r},o.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},o.prototype.createZXingFormats=function(r){for(var l=[],d=0,p=r;d<p.length;d++){var g=p[d];this.formatMap.has(g)?l.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return l},o.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},o})(),$w=function(o,r,l,d){function p(g){return g instanceof l?g:new l(function(E){E(g)})}return new(l||(l=Promise))(function(g,E){function S(N){try{v(d.next(N))}catch(I){E(I)}}function _(N){try{v(d.throw(N))}catch(I){E(I)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((d=d.apply(o,r||[])).next())})},ev=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,p,g,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(v){return function(N){return _([v,N])}}function _(v){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,v[0]&&(l=0)),l;)try{if(d=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{d=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Og=(function(){function o(r,l,d){if(this.formatMap=new Map([[De.QR_CODE,"qr_code"],[De.AZTEC,"aztec"],[De.CODABAR,"codabar"],[De.CODE_39,"code_39"],[De.CODE_93,"code_93"],[De.CODE_128,"code_128"],[De.DATA_MATRIX,"data_matrix"],[De.ITF,"itf"],[De.EAN_13,"ean_13"],[De.EAN_8,"ean_8"],[De.PDF_417,"pdf417"],[De.UPC_A,"upc_a"],[De.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!o.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=d;var p=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(p),!this.detector)throw"BarcodeDetector detector not supported"}return o.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},o.prototype.decodeAsync=function(r){return $w(this,void 0,void 0,function(){var l,d;return ev(this,function(p){switch(p.label){case 0:return[4,this.detector.detect(r)];case 1:if(l=p.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return d=this.selectLargestBarcode(l),[2,{text:d.rawValue,format:D2.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}]}})})},o.prototype.selectLargestBarcode=function(r){for(var l=null,d=0,p=0,g=r;p<g.length;p++){var E=g[p],S=E.boundingBox.width*E.boundingBox.height;S>d&&(d=S,l=E)}if(!l)throw"No largest barcode found";return l},o.prototype.createBarcodeDetectorFormats=function(r){for(var l=[],d=0,p=r;d<p.length;d++){var g=p[d];this.formatMap.has(g)?l.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},o.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},o.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,d,p){r.set(l,d)}),r},o.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},o})(),Rg=function(o,r,l,d){function p(g){return g instanceof l?g:new l(function(E){E(g)})}return new(l||(l=Promise))(function(g,E){function S(N){try{v(d.next(N))}catch(I){E(I)}}function _(N){try{v(d.throw(N))}catch(I){E(I)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((d=d.apply(o,r||[])).next())})},Dg=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,p,g,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(v){return function(N){return _([v,N])}}function _(v){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,v[0]&&(l=0)),l;)try{if(d=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{d=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},tv=(function(){function o(r,l,d,p){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=d,l&&Og.isSupported()?(this.primaryDecoder=new Og(r,d,p),this.secondaryDecoder=new Ig(r,d,p)):this.primaryDecoder=new Ig(r,d,p)}return o.prototype.decodeAsync=function(r){return Rg(this,void 0,void 0,function(){var l;return Dg(this,function(d){switch(d.label){case 0:l=performance.now(),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,d.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},o.prototype.decodeRobustlyAsync=function(r){return Rg(this,void 0,void 0,function(){var l,d;return Dg(this,function(p){switch(p.label){case 0:l=performance.now(),p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,p.sent()];case 3:if(d=p.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw d;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},o.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},o.prototype.possiblyLogPerformance=function(r){if(this.verbose){var l=performance.now()-r;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},o.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,l=0,d=this.executionResults;l<d.length;l++){var p=d[l];r+=p}var g=r/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},o})(),zd=(function(){var o=function(r,l){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(d[g]=p[g])},o(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");o(r,l);function d(){this.constructor=r}r.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})(),qc=function(o,r,l,d){function p(g){return g instanceof l?g:new l(function(E){E(g)})}return new(l||(l=Promise))(function(g,E){function S(N){try{v(d.next(N))}catch(I){E(I)}}function _(N){try{v(d.throw(N))}catch(I){E(I)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((d=d.apply(o,r||[])).next())})},Yc=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,p,g,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(v){return function(N){return _([v,N])}}function _(v){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,v[0]&&(l=0)),l;)try{if(d=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{d=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},L2=(function(){function o(r,l){this.name=r,this.track=l}return o.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},o.prototype.apply=function(r){var l={};l[this.name]=r;var d={advanced:[l]};return this.track.applyConstraints(d)},o.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var l=r[this.name];return l}return null},o})(),nv=(function(o){zd(r,o);function r(l,d){return o.call(this,l,d)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(l){var d={};d[this.name]=l;var p={advanced:[d]};return this.track.applyConstraints(p)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),d=l[this.name];return{min:d.min,max:d.max,step:d.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(L2),iv=(function(o){zd(r,o);function r(l){return o.call(this,"zoom",l)||this}return r})(nv),rv=(function(o){zd(r,o);function r(l){return o.call(this,"torch",l)||this}return r})(L2),av=(function(){function o(r){this.track=r}return o.prototype.zoomFeature=function(){return new iv(this.track)},o.prototype.torchFeature=function(){return new rv(this.track)},o})(),sv=(function(){function o(r,l,d){this.isClosed=!1,this.parentElement=r,this.mediaStream=l,this.callbacks=d,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return o.prototype.createVideoElement=function(r){var l=document.createElement("video");return l.style.width="".concat(r,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},o.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var d=r.surface.clientWidth,p=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(d,p),r.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},o.create=function(r,l,d,p){return qc(this,void 0,void 0,function(){var g,E;return Yc(this,function(S){switch(S.label){case 0:return g=new o(r,l,p),d.aspectRatio?(E={aspectRatio:d.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:S.sent(),S.label=2;case 2:return g.setupSurface(),[2,g]}})})},o.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},o.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},o.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},o.prototype.resume=function(r){this.failIfClosed();var l=this,d=function(){setTimeout(r,200),l.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.play()},o.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},o.prototype.getSurface=function(){return this.failIfClosed(),this.surface},o.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},o.prototype.applyVideoConstraints=function(r){return qc(this,void 0,void 0,function(){return Yc(this,function(l){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},o.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(l,d){var p=r.mediaStream.getVideoTracks(),g=p.length,E=0;r.mediaStream.getVideoTracks().forEach(function(S){r.mediaStream.removeTrack(S),S.stop(),++E,E>=g&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),l())})})},o.prototype.getCapabilities=function(){return new av(this.getFirstTrackOrFail())},o})(),lv=(function(){function o(r){this.mediaStream=r}return o.prototype.render=function(r,l,d){return qc(this,void 0,void 0,function(){return Yc(this,function(p){return[2,sv.create(r,this.mediaStream,l,d)]})})},o.create=function(r){return qc(this,void 0,void 0,function(){var l,d;return Yc(this,function(p){switch(p.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return d=p.sent(),[2,new o(d)]}})})},o})(),Mg=function(o,r,l,d){function p(g){return g instanceof l?g:new l(function(E){E(g)})}return new(l||(l=Promise))(function(g,E){function S(N){try{v(d.next(N))}catch(I){E(I)}}function _(N){try{v(d.throw(N))}catch(I){E(I)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((d=d.apply(o,r||[])).next())})},Bg=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,p,g,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(v){return function(N){return _([v,N])}}function _(v){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,v[0]&&(l=0)),l;)try{if(d=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{d=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},ov=(function(){function o(){}return o.failIfNotSupported=function(){return Mg(this,void 0,void 0,function(){return Bg(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new o]})})},o.prototype.create=function(r){return Mg(this,void 0,void 0,function(){return Bg(this,function(l){return[2,lv.create(r)]})})},o})(),cv=function(o,r,l,d){function p(g){return g instanceof l?g:new l(function(E){E(g)})}return new(l||(l=Promise))(function(g,E){function S(N){try{v(d.next(N))}catch(I){E(I)}}function _(N){try{v(d.throw(N))}catch(I){E(I)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((d=d.apply(o,r||[])).next())})},uv=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,p,g,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(v){return function(N){return _([v,N])}}function _(v){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,v[0]&&(l=0)),l;)try{if(d=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{d=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},hv=(function(){function o(){}return o.retrieve=function(){if(navigator.mediaDevices)return o.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?o.getCamerasFromMediaStreamTrack():o.rejectWithError()},o.rejectWithError=function(){var r=Js.unableToQuerySupportedDevices();return o.isHttpsOrLocalhost()||(r=Js.insecureContextCameraQueryError()),Promise.reject(r)},o.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},o.getCamerasFromMediaDevices=function(){return cv(this,void 0,void 0,function(){var r,l,d,p,g,E,S;return uv(this,function(_){switch(_.label){case 0:return r=function(v){for(var N=v.getVideoTracks(),I=0,B=N;I<B.length;I++){var L=B[I];L.enabled=!1,L.stop(),v.removeTrack(L)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(d=_.sent(),p=[],g=0,E=d;g<E.length;g++)S=E[g],S.kind==="videoinput"&&p.push({id:S.deviceId,label:S.label});return r(l),[2,p]}})})},o.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,l){var d=function(g){for(var E=[],S=0,_=g;S<_.length;S++){var v=_[S];v.kind==="video"&&E.push({id:v.id,label:v.label})}r(E)},p=MediaStreamTrack;p.getSources(d)})},o})(),sn;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.NOT_STARTED=1]="NOT_STARTED",o[o.SCANNING=2]="SCANNING",o[o.PAUSED=3]="PAUSED"})(sn||(sn={}));var dv=(function(){function o(){this.state=sn.NOT_STARTED,this.onGoingTransactionNewState=sn.UNKNOWN}return o.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},o.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},o.prototype.execute=function(){if(this.onGoingTransactionNewState===sn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=sn.UNKNOWN,this.directTransition(r)},o.prototype.cancel=function(){if(this.onGoingTransactionNewState===sn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=sn.UNKNOWN},o.prototype.getState=function(){return this.state},o.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==sn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},o.prototype.validateTransition=function(r){switch(this.state){case sn.UNKNOWN:throw"Transition from unknown is not allowed";case sn.NOT_STARTED:this.failIfNewStateIs(r,[sn.PAUSED]);break;case sn.SCANNING:break;case sn.PAUSED:break}},o.prototype.failIfNewStateIs=function(r,l){for(var d=0,p=l;d<p.length;d++){var g=p[d];if(r===g)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},o})(),fv=(function(){function o(r){this.stateManager=r}return o.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},o.prototype.directTransition=function(r){this.stateManager.directTransition(r)},o.prototype.getState=function(){return this.stateManager.getState()},o.prototype.canScanFile=function(){return this.stateManager.getState()===sn.NOT_STARTED},o.prototype.isScanning=function(){return this.stateManager.getState()!==sn.NOT_STARTED},o.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===sn.SCANNING},o.prototype.isPaused=function(){return this.stateManager.getState()===sn.PAUSED},o})(),gv=(function(){function o(){}return o.create=function(){return new fv(new dv)},o})(),mv=(function(){var o=function(r,l){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(d[g]=p[g])},o(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");o(r,l);function d(){this.constructor=r}r.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})(),Ei=(function(o){mv(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(Ji),pv=(function(){function o(r,l){this.logger=l,this.fps=Ei.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=Ei.DEFAULT_DISABLE_FLIP}return o.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?k2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},o.prototype.isShadedBoxEnabled=function(){return!hr(this.qrbox)},o.create=function(r,l){return new o(r,l)},o})(),kg=(function(){function o(r,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var d;typeof l=="boolean"?this.verbose=l===!0:l&&(d=l,this.verbose=d.verbose===!0,d.experimentalFeatures),this.logger=new B2(this.verbose),this.qrcode=new tv(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(d),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=gv.create()}return o.prototype.start=function(r,l,d,p){var g=this;if(!r)throw"cameraIdOrConfig is required";if(!d||typeof d!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;p?E=p:E=this.verbose?this.logger.log:function(){};var S=pv.create(l,this.logger);this.clearElement();var _=!1;S.videoConstraints&&(S.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=_,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:Ei.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var I=this,B=this.stateManagerProxy.startTransition(sn.SCANNING);return new Promise(function(L,U){var z=v?S.videoConstraints:I.createVideoConstraints(r);if(!z){B.cancel(),U("videoConstraints should be defined");return}var Y={};(!v||S.aspectRatio)&&(Y.aspectRatio=S.aspectRatio);var ee={onRenderSurfaceReady:function(ie,K){I.setupUi(ie,K,S),I.isScanning=!0,I.foreverScan(S,d,E)}};ov.failIfNotSupported().then(function(ie){ie.create(z).then(function(K){return K.render(g.element,Y,ee).then(function(ce){I.renderedCamera=ce,B.execute(),L(null)}).catch(function(ce){B.cancel(),U(ce)})}).catch(function(K){B.cancel(),U(Js.errorGettingUserMedia(K))})}).catch(function(ie){B.cancel(),U(Js.cameraStreamingNotSupported())})})},o.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(sn.PAUSED),this.showPausedState(),(hr(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},o.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,l=function(){r.stateManagerProxy.directTransition(sn.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},o.prototype.getState=function(){return this.stateManagerProxy.getState()},o.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(sn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var d=function(){if(r.element){var g=document.getElementById(Ei.SHADED_REGION_ELEMENT_ID);g&&r.element.removeChild(g)}},p=this;return this.renderedCamera.close().then(function(){return p.renderedCamera=null,p.element&&(p.element.removeChild(p.canvasElement),p.canvasElement=null),d(),p.qrRegion&&(p.qrRegion=null),p.context&&(p.context=null),l.execute(),p.hidePausedState(),p.isScanning=!1,Promise.resolve()})},o.prototype.scanFile=function(r,l){return this.scanFileV2(r,l).then(function(d){return d.decodedText})},o.prototype.scanFileV2=function(r,l){var d=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hr(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(p,g){d.possiblyCloseLastScanImageFile(),d.clearElement(),d.lastScanImageFile=URL.createObjectURL(r);var E=new Image;E.onload=function(){var S=E.width,_=E.height,v=document.getElementById(d.elementId),N=v.clientWidth?v.clientWidth:Ei.DEFAULT_WIDTH,I=Math.max(v.clientHeight?v.clientHeight:_,Ei.FILE_SCAN_MIN_HEIGHT),B=d.computeCanvasDrawConfig(S,_,N,I);if(l){var L=d.createCanvasElement(N,I,"qr-canvas-visible");L.style.display="inline-block",v.appendChild(L);var U=L.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=N,U.canvas.height=I,U.drawImage(E,0,0,S,_,B.x,B.y,B.width,B.height)}var z=Ei.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(E.width,B.width),ee=Math.max(E.height,B.height),ie=Y+2*z,K=ee+2*z,ce=d.createCanvasElement(ie,K);v.appendChild(ce);var Ie=ce.getContext("2d");if(!Ie)throw"Unable to get 2d context from canvas";Ie.canvas.width=ie,Ie.canvas.height=K,Ie.drawImage(E,0,0,S,_,z,z,Y,ee);try{d.qrcode.decodeRobustlyAsync(ce).then(function(be){p(Cg.createFromQrcodeResult(be))}).catch(g)}catch(be){g("QR code parse error, error = ".concat(be))}},E.onerror=g,E.onabort=g,E.onstalled=g,E.onsuspend=g,E.src=URL.createObjectURL(r)})},o.prototype.clear=function(){this.clearElement()},o.getCameras=function(){return hv.retrieve()},o.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},o.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},o.prototype.applyVideoConstraints=function(r){if(r){if(!k2.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},o.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},o.prototype.getSupportedFormats=function(r){var l=[De.QR_CODE,De.AZTEC,De.CODABAR,De.CODE_39,De.CODE_93,De.CODE_128,De.DATA_MATRIX,De.MAXICODE,De.ITF,De.EAN_13,De.EAN_8,De.PDF_417,De.RSS_14,De.RSS_EXPANDED,De.UPC_A,De.UPC_E,De.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return l;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var d=[],p=0,g=r.formatsToSupport;p<g.length;p++){var E=g[p];Ww(E)?d.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(d.length===0)throw"None of formatsToSupport match supported values.";return d},o.prototype.getUseBarCodeDetectorIfSupported=function(r){if(hr(r))return!0;if(!hr(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(hr(r.experimentalFeatures))return!0;var l=r.experimentalFeatures;return hr(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},o.prototype.validateQrboxSize=function(r,l,d){var p=this,g=d.qrbox;this.validateQrboxConfig(g);var E=this.toQrdimensions(r,l,g),S=function(v){if(v<Ei.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ei.MIN_QR_BOX_SIZE,"px.")},_=function(v){return v>r&&(p.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=r),v};S(E.width),S(E.height),E.width=_(E.width)},o.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},o.prototype.toQrdimensions=function(r,l,d){if(typeof d=="number")return{width:d,height:d};if(typeof d=="function")try{return d(r,l)}catch(p){throw new Error("qrbox config was passed as a function but it failed with unknown error"+p)}return d},o.prototype.setupUi=function(r,l,d){d.isShadedBoxEnabled()&&this.validateQrboxSize(r,l,d);var p=hr(d.qrbox)?{width:r,height:l}:d.qrbox;this.validateQrboxConfig(p);var g=this.toQrdimensions(r,l,p);g.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=d.isShadedBoxEnabled()&&g.height<=l,S={x:0,y:0,width:r,height:l},_=E?this.getShadedRegionBounds(r,l,g):S,v=this.createCanvasElement(_.width,_.height),N={willReadFrequently:!0},I=v.getContext("2d",N);I.canvas.width=_.width,I.canvas.height=_.height,this.element.append(v),E&&this.possiblyInsertShadingElement(this.element,r,l,g),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=I,this.canvasElement=v},o.prototype.createScannerPausedUiElement=function(r){var l=document.createElement("div");l.innerText=Js.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",r.appendChild(l),this.scannerPausedUiElement=l},o.prototype.scanContext=function(r,l){var d=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(p){return r(p.text,Cg.createFromQrcodeResult(p)),d.possiblyUpdateShaders(!0),!0}).catch(function(p){d.possiblyUpdateShaders(!1);var g=Js.codeParseError(p);return l(g,M2.createFrom(g)),!1})},o.prototype.foreverScan=function(r,l,d){var p=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),E=g.videoWidth/g.clientWidth,S=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*E,v=this.qrRegion.height*S,N=this.qrRegion.x*E,I=this.qrRegion.y*S;this.context.drawImage(g,N,I,_,v,0,0,this.qrRegion.width,this.qrRegion.height);var B=function(){p.foreverScanTimeout=setTimeout(function(){p.foreverScan(r,l,d)},p.getTimeoutFps(r.fps))};this.scanContext(l,d).then(function(L){!L&&r.disableFlip!==!0?(p.context.translate(p.context.canvas.width,0),p.context.scale(-1,1),p.scanContext(l,d).finally(function(){B()})):B()}).catch(function(L){p.logger.logError("Error happend while scanning context",L),B()})}},o.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var l="facingMode",d="deviceId",p={user:!0,environment:!0},g="exact",E=function(U){if(U in p)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(U,"'")},S=Object.keys(r);if(S.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(S.length," keys");var _=Object.keys(r)[0];if(_!==l&&_!==d)throw"Only '".concat(l,"' and '").concat(d,"' ")+" are supported for 'cameraIdOrConfig'";if(_===l){var v=r.facingMode;if(typeof v=="string"){if(E(v))return{facingMode:v}}else if(typeof v=="object")if(g in v){if(E(v["".concat(g)]))return{facingMode:{exact:v["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var N=typeof v;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var I=r.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(g in I)return{deviceId:{exact:I["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var B=typeof I;throw"Invalid type of 'deviceId' = ".concat(B)}}}var L=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(L)},o.prototype.computeCanvasDrawConfig=function(r,l,d,p){if(r<=d&&l<=p){var g=(d-r)/2,E=(p-l)/2;return{x:g,y:E,width:r,height:l}}else{var S=r,_=l;return r>d&&(l=d/r*l,r=d),l>p&&(r=p/l*r,l=p),this.logger.log("Image downsampled from "+"".concat(S,"X").concat(_)+" to ".concat(r,"X").concat(l,".")),this.computeCanvasDrawConfig(r,l,d,p)}},o.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},o.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=r?Ei.BORDER_SHADER_MATCH_COLOR:Ei.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},o.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},o.prototype.createCanvasElement=function(r,l,d){var p=r,g=l,E=document.createElement("canvas");return E.style.width="".concat(p,"px"),E.style.height="".concat(g,"px"),E.style.display="none",E.id=hr(d)?"qr-canvas":d,E},o.prototype.getShadedRegionBounds=function(r,l,d){if(d.width>r||d.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-d.width)/2,y:(l-d.height)/2,width:d.width,height:d.height}},o.prototype.possiblyInsertShadingElement=function(r,l,d,p){if(!(l-p.width<1||d-p.height<1)){var g=document.createElement("div");g.style.position="absolute";var E=(l-p.width)/2,S=(d-p.height)/2;if(g.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Ei.SHADED_REGION_ELEMENT_ID),l-p.width<11||d-p.height<11)this.hasBorderShaders=!1;else{var _=5,v=40;this.insertShaderBorders(g,v,_,-_,null,0,!0),this.insertShaderBorders(g,v,_,-_,null,0,!1),this.insertShaderBorders(g,v,_,null,-_,0,!0),this.insertShaderBorders(g,v,_,null,-_,0,!1),this.insertShaderBorders(g,_,v+_,-_,null,-_,!0),this.insertShaderBorders(g,_,v+_,null,-_,-_,!0),this.insertShaderBorders(g,_,v+_,-_,null,-_,!1),this.insertShaderBorders(g,_,v+_,null,-_,-_,!1),this.hasBorderShaders=!0}r.append(g)}},o.prototype.insertShaderBorders=function(r,l,d,p,g,E,S){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=Ei.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(l,"px"),_.style.height="".concat(d,"px"),p!==null&&(_.style.top="".concat(p,"px")),g!==null&&(_.style.bottom="".concat(g,"px")),S?_.style.left="".concat(E,"px"):_.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),r.appendChild(_)},o.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},o.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},o.prototype.getTimeoutFps=function(r){return 1e3/r},o})(),Pd="data:image/svg+xml;base64,",xv=Pd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",yv=Pd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Lg=Pd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",wv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",jg=(function(){function o(){}return o.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},o})(),vv=(function(){function o(){this.data=jg.createDefault();var r=localStorage.getItem(o.LOCAL_STORAGE_KEY);r?this.data=JSON.parse(r):this.reset()}return o.prototype.hasCameraPermissions=function(){return this.data.hasPermission},o.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},o.prototype.setHasPermission=function(r){this.data.hasPermission=r,this.flush()},o.prototype.setLastUsedCameraId=function(r){this.data.lastUsedCameraId=r,this.flush()},o.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},o.prototype.reset=function(){this.data=jg.createDefault(),this.flush()},o.prototype.flush=function(){localStorage.setItem(o.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},o.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",o})(),bv=(function(){function o(){this.infoDiv=document.createElement("div")}return o.prototype.renderInto=function(r){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Tg.poweredBy();var l=document.createElement("a");l.innerText="ScanApp",l.href="https://scanapp.org",l.target="new",l.style.color="white",this.infoDiv.appendChild(l);var d=document.createElement("br"),p=document.createElement("br");this.infoDiv.appendChild(d),this.infoDiv.appendChild(p);var g=document.createElement("a");g.innerText=Tg.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),r.appendChild(this.infoDiv)},o.prototype.show=function(){this.infoDiv.style.display="block"},o.prototype.hide=function(){this.infoDiv.style.display="none"},o})(),Ev=(function(){function o(r,l){this.isShowingInfoIcon=!0,this.onTapIn=r,this.onTapOut=l,this.infoIcon=document.createElement("img")}return o.prototype.renderInto=function(r){var l=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Lg,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(d){return l.onHoverIn()},this.infoIcon.onmouseout=function(d){return l.onHoverOut()},this.infoIcon.onclick=function(d){return l.onClick()},r.appendChild(this.infoIcon)},o.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},o.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},o.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=wv,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Lg,this.infoIcon.style.opacity="0.6")},o})(),Av=(function(){function o(){var r=this;this.infoDiv=new bv,this.infoIcon=new Ev(function(){r.infoDiv.show()},function(){r.infoDiv.hide()})}return o.prototype.renderInto=function(r){this.infoDiv.renderInto(r),this.infoIcon.renderInto(r)},o})(),Sv=function(o,r,l,d){function p(g){return g instanceof l?g:new l(function(E){E(g)})}return new(l||(l=Promise))(function(g,E){function S(N){try{v(d.next(N))}catch(I){E(I)}}function _(N){try{v(d.throw(N))}catch(I){E(I)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((d=d.apply(o,r||[])).next())})},_v=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,p,g,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(v){return function(N){return _([v,N])}}function _(v){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,v[0]&&(l=0)),l;)try{if(d=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{d=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Ug=(function(){function o(){}return o.hasPermissions=function(){return Sv(this,void 0,void 0,function(){var r,l,d,p;return _v(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(r=g.sent(),l=0,d=r;l<d.length;l++)if(p=d[l],p.kind==="videoinput"&&p.label)return[2,!0];return[2,!1]}})})},o})(),ba=(function(){function o(r){this.supportedScanTypes=this.validateAndReturnScanTypes(r)}return o.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},o.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},o.prototype.isCameraScanRequired=function(){for(var r=0,l=this.supportedScanTypes;r<l.length;r++){var d=l[r];if(o.isCameraScanType(d))return!0}return!1},o.isCameraScanType=function(r){return r===Sa.SCAN_TYPE_CAMERA},o.isFileScanType=function(r){return r===Sa.SCAN_TYPE_FILE},o.prototype.validateAndReturnScanTypes=function(r){if(!r||r.length===0)return Ji.DEFAULT_SUPPORTED_SCAN_TYPE;var l=Ji.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(r.length>l)throw"Max ".concat(l," values expected for ")+"supportedScanTypes";for(var d=0,p=r;d<p.length;d++){var g=p[d];if(!Ji.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return r},o})(),_i=(function(){function o(){}return o.ALL_ELEMENT_CLASS="html5-qrcode-element",o.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",o.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",o.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",o.TORCH_BUTTON_ID="html5-qrcode-button-torch",o.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",o.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",o.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",o.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",o.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",o.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",o})(),Lr=(function(){function o(){}return o.createElement=function(r,l){var d=document.createElement(r);return d.id=l,d.classList.add(_i.ALL_ELEMENT_CLASS),r==="button"&&d.setAttribute("type","button"),d},o})(),j2=function(o,r,l,d){function p(g){return g instanceof l?g:new l(function(E){E(g)})}return new(l||(l=Promise))(function(g,E){function S(N){try{v(d.next(N))}catch(I){E(I)}}function _(N){try{v(d.throw(N))}catch(I){E(I)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((d=d.apply(o,r||[])).next())})},U2=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,p,g,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(v){return function(N){return _([v,N])}}function _(v){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,v[0]&&(l=0)),l;)try{if(d=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{d=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},zg=(function(){function o(r,l,d){this.isTorchOn=!1,this.torchCapability=r,this.buttonController=l,this.onTorchActionFailureCallback=d}return o.prototype.isTorchEnabled=function(){return this.isTorchOn},o.prototype.flipState=function(){return j2(this,void 0,void 0,function(){var r,l;return U2(this,function(d){switch(d.label){case 0:this.buttonController.disable(),r=!this.isTorchOn,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.torchCapability.apply(r)];case 2:return d.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),r),[3,4];case 3:return l=d.sent(),this.propagateFailure(r,l),this.buttonController.enable(),[3,4];case 4:return[2]}})})},o.prototype.updateUiBasedOnLatestSettings=function(r,l){r===l?(this.buttonController.setText(l?Bt.torchOffButton():Bt.torchOnButton()),this.isTorchOn=l):this.propagateFailure(l),this.buttonController.enable()},o.prototype.propagateFailure=function(r,l){var d=r?Bt.torchOnFailedMessage():Bt.torchOffFailedMessage();l&&(d+="; Error = "+l),this.onTorchActionFailureCallback(d)},o.prototype.reset=function(){this.isTorchOn=!1},o})(),Cv=(function(){function o(r,l){this.onTorchActionFailureCallback=l,this.torchButton=Lr.createElement("button",_i.TORCH_BUTTON_ID),this.torchController=new zg(r,this,l)}return o.prototype.render=function(r,l){var d=this;this.torchButton.innerText=Bt.torchOnButton(),this.torchButton.style.display=l.display,this.torchButton.style.marginLeft=l.marginLeft;var p=this;this.torchButton.addEventListener("click",function(g){return j2(d,void 0,void 0,function(){return U2(this,function(E){switch(E.label){case 0:return[4,p.torchController.flipState()];case 1:return E.sent(),p.torchController.isTorchEnabled()?(p.torchButton.classList.remove(_i.TORCH_BUTTON_CLASS_TORCH_OFF),p.torchButton.classList.add(_i.TORCH_BUTTON_CLASS_TORCH_ON)):(p.torchButton.classList.remove(_i.TORCH_BUTTON_CLASS_TORCH_ON),p.torchButton.classList.add(_i.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),r.appendChild(this.torchButton)},o.prototype.updateTorchCapability=function(r){this.torchController=new zg(r,this,this.onTorchActionFailureCallback)},o.prototype.getTorchButton=function(){return this.torchButton},o.prototype.hide=function(){this.torchButton.style.display="none"},o.prototype.show=function(){this.torchButton.style.display="inline-block"},o.prototype.disable=function(){this.torchButton.disabled=!0},o.prototype.enable=function(){this.torchButton.disabled=!1},o.prototype.setText=function(r){this.torchButton.innerText=r},o.prototype.reset=function(){this.torchButton.innerText=Bt.torchOnButton(),this.torchController.reset()},o.create=function(r,l,d,p){var g=new o(l,p);return g.render(r,d),g},o})(),Tv=(function(){function o(r,l,d){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=l?"block":"none",r.appendChild(this.fileBasedScanRegion);var p=document.createElement("label");p.setAttribute("for",this.getFileScanInputId()),p.style.display="inline-block",this.fileBasedScanRegion.appendChild(p),this.fileSelectionButton=Lr.createElement("button",_i.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(S){p.click()}),p.append(this.fileSelectionButton),this.fileScanInput=Lr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",p.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(S){if(!(S==null||S.target==null)){var _=S.target;if(!(_.files&&_.files.length===0)){var v=_.files,N=v[0],I=N.name;g.setImageNameToButton(I),d(N)}}});var E=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(E),this.fileBasedScanRegion.addEventListener("dragenter",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(S){S.stopPropagation(),S.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var _=S.dataTransfer;if(_){var v=_.files;if(!v||v.length===0)return;for(var N=!1,I=0;I<v.length;++I){var B=v.item(I);if(B){var L=/image.*/;if(B.type.match(L)){N=!0;var U=B.name;g.setImageNameToButton(U),d(B),E.innerText=Bt.dragAndDropMessage();break}}}N||(E.innerText=Bt.dragAndDropMessageOnlyImages())}})}return o.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},o.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},o.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},o.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},o.prototype.createFileBasedScanRegion=function(){var r=document.createElement("div");return r.style.textAlign="center",r.style.margin="auto",r.style.width="80%",r.style.maxWidth="600px",r.style.border=this.fileBasedScanRegionDefaultBorder(),r.style.padding="10px",r.style.marginBottom="10px",r},o.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},o.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},o.prototype.createDragAndDropMessage=function(){var r=document.createElement("div");return r.innerText=Bt.dragAndDropMessage(),r.style.fontWeight="400",r},o.prototype.setImageNameToButton=function(r){var l=20;if(r.length>l){var d=r.substring(0,8),p=r.length,g=r.substring(p-8,p);r="".concat(d,"....").concat(g)}var E=Bt.fileSelectionChooseAnother()+" - "+r;this.fileSelectionButton.innerText=E},o.prototype.setInitialValueToButton=function(){var r=Bt.fileSelectionChooseImage()+" - "+Bt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=r},o.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},o.create=function(r,l,d){var p=new o(r,l,d);return p},o})(),Nv=(function(){function o(r){this.selectElement=Lr.createElement("select",_i.CAMERA_SELECTION_SELECT_ID),this.cameras=r,this.options=[]}return o.prototype.render=function(r){var l=document.createElement("span");l.style.marginRight="10px";var d=this.cameras.length;if(d===0)throw new Error("No cameras found");if(d===1)l.style.display="none";else{var p=Bt.selectCamera();l.innerText="".concat(p," (").concat(this.cameras.length,")  ")}for(var g=1,E=0,S=this.cameras;E<S.length;E++){var _=S[E],v=_.id,N=_.label==null?v:_.label;(!N||N==="")&&(N=[Bt.anonymousCameraPrefix(),g++].join(" "));var I=document.createElement("option");I.value=v,I.innerText=N,this.options.push(I),this.selectElement.appendChild(I)}l.appendChild(this.selectElement),r.appendChild(l)},o.prototype.disable=function(){this.selectElement.disabled=!0},o.prototype.isDisabled=function(){return this.selectElement.disabled===!0},o.prototype.enable=function(){this.selectElement.disabled=!1},o.prototype.getValue=function(){return this.selectElement.value},o.prototype.hasValue=function(r){for(var l=0,d=this.options;l<d.length;l++){var p=d[l];if(p.value===r)return!0}return!1},o.prototype.setValue=function(r){if(!this.hasValue(r))throw new Error("".concat(r," is not present in the camera list."));this.selectElement.value=r},o.prototype.hasSingleItem=function(){return this.cameras.length===1},o.prototype.numCameras=function(){return this.cameras.length},o.create=function(r,l){var d=new o(l);return d.render(r),d},o})(),Iv=(function(){function o(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Lr.createElement("input",_i.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return o.prototype.render=function(r,l){this.zoomElementContainer.style.display=l?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",r.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var d=Bt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(d),this.rangeText.style.marginRight="10px";var p=this;this.rangeInput.addEventListener("input",function(){return p.onValueChange()}),this.rangeInput.addEventListener("change",function(){return p.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},o.prototype.onValueChange=function(){var r=Bt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},o.prototype.setValues=function(r,l,d,p){this.rangeInput.min=r.toString(),this.rangeInput.max=l.toString(),this.rangeInput.step=p.toString(),this.rangeInput.value=d.toString(),this.onValueChange()},o.prototype.show=function(){this.zoomElementContainer.style.display="block"},o.prototype.hide=function(){this.zoomElementContainer.style.display="none"},o.prototype.setOnCameraZoomValueChangeCallback=function(r){this.onChangeCallback=r},o.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},o.create=function(r,l){var d=new o;return d.render(r,l),d},o})(),Ai;(function(o){o[o.STATUS_DEFAULT=0]="STATUS_DEFAULT",o[o.STATUS_SUCCESS=1]="STATUS_SUCCESS",o[o.STATUS_WARNING=2]="STATUS_WARNING",o[o.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ai||(Ai={}));function Ov(o){return{fps:o.fps,qrbox:o.qrbox,aspectRatio:o.aspectRatio,disableFlip:o.disableFlip,videoConstraints:o.videoConstraints}}function Rv(o,r){return{formatsToSupport:o.formatsToSupport,useBarCodeDetectorIfSupported:o.useBarCodeDetectorIfSupported,experimentalFeatures:o.experimentalFeatures,verbose:r}}var Dv=(function(){function o(r,l,d){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=r,this.config=this.createConfig(l),this.verbose=d===!0,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.scanTypeSelector=new ba(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new B2(this.verbose),this.persistedDataManager=new vv,l.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return o.prototype.render=function(r,l){var d=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,E){if(r)r(g,E);else{if(d.lastMatchFound===g)return;d.lastMatchFound=g,d.setHeaderMessage(Bt.lastMatch(g),Ai.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,E){l&&l(g,E)};var p=document.getElementById(this.elementId);if(!p)throw"HTML Element with id=".concat(this.elementId," not found");p.innerHTML="",this.createBasicLayout(p),this.html5Qrcode=new kg(this.getScanRegionId(),Rv(this.config,this.verbose))},o.prototype.pause=function(r){(hr(r)||r!==!0)&&(r=!1),this.getHtml5QrcodeOrFail().pause(r)},o.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},o.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},o.prototype.clear=function(){var r=this,l=function(){var d=document.getElementById(r.elementId);d&&(d.innerHTML="",r.resetBasicLayout(d))};return this.html5Qrcode?new Promise(function(d,p){if(!r.html5Qrcode){d();return}r.html5Qrcode.isScanning?r.html5Qrcode.stop().then(function(g){if(!r.html5Qrcode){d();return}r.html5Qrcode.clear(),l(),d()}).catch(function(g){r.verbose&&r.logger.logError("Unable to stop qrcode scanner",g),p(g)}):(r.html5Qrcode.clear(),l(),d())}):Promise.resolve()},o.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},o.prototype.applyVideoConstraints=function(r){return this.getHtml5QrcodeOrFail().applyVideoConstraints(r)},o.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},o.prototype.createConfig=function(r){return r?(r.fps||(r.fps=Ji.SCAN_DEFAULT_FPS),r.rememberLastUsedCamera!==!Ji.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(r.rememberLastUsedCamera=Ji.DEFAULT_REMEMBER_LAST_CAMERA_USED),r.supportedScanTypes||(r.supportedScanTypes=Ji.DEFAULT_SUPPORTED_SCAN_TYPE),r):{fps:Ji.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ji.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ji.DEFAULT_SUPPORTED_SCAN_TYPE}},o.prototype.createBasicLayout=function(r){r.style.position="relative",r.style.padding="0px",r.style.border="1px solid silver",this.createHeader(r);var l=document.createElement("div"),d=this.getScanRegionId();l.id=d,l.style.width="100%",l.style.minHeight="100px",l.style.textAlign="center",r.appendChild(l),ba.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var p=document.createElement("div"),g=this.getDashboardId();p.id=g,p.style.width="100%",r.appendChild(p),this.setupInitialDashboard(p)},o.prototype.resetBasicLayout=function(r){r.style.border="none"},o.prototype.setupInitialDashboard=function(r){this.createSection(r),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},o.prototype.createHeader=function(r){var l=document.createElement("div");l.style.textAlign="left",l.style.margin="0px",r.appendChild(l);var d=new Av;d.renderInto(l);var p=document.createElement("div");p.id=this.getHeaderMessageContainerId(),p.style.display="none",p.style.textAlign="center",p.style.fontSize="14px",p.style.padding="2px 10px",p.style.margin="4px",p.style.borderTop="1px solid #f6f6f6",l.appendChild(p)},o.prototype.createSection=function(r){var l=document.createElement("div");l.id=this.getDashboardSectionId(),l.style.width="100%",l.style.padding="10px 0px 10px 0px",l.style.textAlign="left",r.appendChild(l)},o.prototype.createCameraListUi=function(r,l,d){var p=this;p.showHideScanTypeSwapLink(!1),p.setHeaderMessage(Bt.cameraPermissionRequesting());var g=function(){d||p.createPermissionButton(r,l)};kg.getCameras().then(function(E){p.persistedDataManager.setHasPermission(!0),p.showHideScanTypeSwapLink(!0),p.resetHeaderMessage(),E&&E.length>0?(r.removeChild(l),p.renderCameraSelection(E)):(p.setHeaderMessage(Bt.noCameraFound(),Ai.STATUS_WARNING),g())}).catch(function(E){p.persistedDataManager.setHasPermission(!1),d?d.disabled=!1:g(),p.setHeaderMessage(E,Ai.STATUS_WARNING),p.showHideScanTypeSwapLink(!0)})},o.prototype.createPermissionButton=function(r,l){var d=this,p=Lr.createElement("button",this.getCameraPermissionButtonId());p.innerText=Bt.cameraPermissionTitle(),p.addEventListener("click",function(){p.disabled=!0,d.createCameraListUi(r,l,p)}),l.appendChild(p)},o.prototype.createPermissionsUi=function(r,l){var d=this;if(ba.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Ug.hasPermissions().then(function(p){p?d.createCameraListUi(r,l):(d.persistedDataManager.setHasPermission(!1),d.createPermissionButton(r,l))}).catch(function(p){d.persistedDataManager.setHasPermission(!1),d.createPermissionButton(r,l)});return}this.createPermissionButton(r,l)},o.prototype.createSectionControlPanel=function(){var r=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");r.appendChild(l);var d=document.createElement("div");d.id=this.getDashboardSectionCameraScanRegionId(),d.style.display=ba.isCameraScanType(this.currentScanType)?"block":"none",l.appendChild(d);var p=document.createElement("div");p.style.textAlign="center",d.appendChild(p),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(d,p),this.renderFileScanUi(l)},o.prototype.renderFileScanUi=function(r){var l=ba.isFileScanType(this.currentScanType),d=this,p=function(g){if(!d.html5Qrcode)throw"html5Qrcode not defined";ba.isFileScanType(d.currentScanType)&&(d.setHeaderMessage(Bt.loadingImage()),d.html5Qrcode.scanFileV2(g,!0).then(function(E){d.resetHeaderMessage(),d.qrCodeSuccessCallback(E.decodedText,E)}).catch(function(E){d.setHeaderMessage(E,Ai.STATUS_WARNING),d.qrCodeErrorCallback(E,M2.createFrom(E))}))};this.fileSelectionUi=Tv.create(r,l,p)},o.prototype.renderCameraSelection=function(r){var l=this,d=this,p=document.getElementById(this.getDashboardSectionCameraScanRegionId());p.style.textAlign="center";var g=Iv.create(p,!1),E=function(z){var Y=z.zoomFeature();if(Y.isSupported()){g.setOnCameraZoomValueChangeCallback(function(ie){Y.apply(ie)});var ee=1;l.config.defaultZoomValueIfSupported&&(ee=l.config.defaultZoomValueIfSupported),ee=Kw(ee,Y.min(),Y.max()),g.setValues(Y.min(),Y.max(),ee,Y.step()),g.show()}},S=Nv.create(p,r),_=document.createElement("span"),v=Lr.createElement("button",_i.CAMERA_START_BUTTON_ID);v.innerText=Bt.scanButtonStartScanningText(),_.appendChild(v);var N=Lr.createElement("button",_i.CAMERA_STOP_BUTTON_ID);N.innerText=Bt.scanButtonStopScanningText(),N.style.display="none",N.disabled=!0,_.appendChild(N);var I,B=function(z){if(!z.torchFeature().isSupported()){I&&I.hide();return}I?I.updateTorchCapability(z.torchFeature()):I=Cv.create(_,z.torchFeature(),{display:"none",marginLeft:"5px"},function(Y){d.setHeaderMessage(Y,Ai.STATUS_WARNING)}),I.show()};p.appendChild(_);var L=function(z){z||(v.style.display="none"),v.innerText=Bt.scanButtonStartScanningText(),v.style.opacity="1",v.disabled=!1,z&&(v.style.display="inline-block")};if(v.addEventListener("click",function(z){v.innerText=Bt.scanButtonScanningStarting(),S.disable(),v.disabled=!0,v.style.opacity="0.5",l.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!1),d.resetHeaderMessage();var Y=S.getValue();d.persistedDataManager.setLastUsedCameraId(Y),d.html5Qrcode.start(Y,Ov(d.config),d.qrCodeSuccessCallback,d.qrCodeErrorCallback).then(function(ee){N.disabled=!1,N.style.display="inline-block",L(!1);var ie=d.html5Qrcode.getRunningTrackCameraCapabilities();l.config.showTorchButtonIfSupported===!0&&B(ie),l.config.showZoomSliderIfSupported===!0&&E(ie)}).catch(function(ee){d.showHideScanTypeSwapLink(!0),S.enable(),L(!0),d.setHeaderMessage(ee,Ai.STATUS_WARNING)})}),S.hasSingleItem()&&v.click(),N.addEventListener("click",function(z){if(!d.html5Qrcode)throw"html5Qrcode not defined";N.disabled=!0,d.html5Qrcode.stop().then(function(Y){l.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!0),S.enable(),v.disabled=!1,N.style.display="none",v.style.display="inline-block",I&&(I.reset(),I.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),d.insertCameraScanImageToScanRegion()}).catch(function(Y){N.disabled=!1,d.setHeaderMessage(Y,Ai.STATUS_WARNING)})}),d.persistedDataManager.getLastUsedCameraId()){var U=d.persistedDataManager.getLastUsedCameraId();S.hasValue(U)?(S.setValue(U),v.click()):d.persistedDataManager.resetLastUsedCameraId()}},o.prototype.createSectionSwap=function(){var r=this,l=Bt.textIfCameraScanSelected(),d=Bt.textIfFileScanSelected(),p=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var E=Lr.createElement("span",this.getDashboardSectionSwapLinkId());E.style.textDecoration="underline",E.style.cursor="pointer",E.innerText=ba.isCameraScanType(this.currentScanType)?l:d,E.addEventListener("click",function(){if(!r.sectionSwapAllowed){r.verbose&&r.logger.logError("Section swap called when not allowed");return}r.resetHeaderMessage(),r.fileSelectionUi.resetValue(),r.sectionSwapAllowed=!1,ba.isCameraScanType(r.currentScanType)?(r.clearScanRegion(),r.getCameraScanRegion().style.display="none",r.fileSelectionUi.show(),E.innerText=d,r.currentScanType=Sa.SCAN_TYPE_FILE,r.insertFileScanImageToScanRegion()):(r.clearScanRegion(),r.getCameraScanRegion().style.display="block",r.fileSelectionUi.hide(),E.innerText=l,r.currentScanType=Sa.SCAN_TYPE_CAMERA,r.insertCameraScanImageToScanRegion(),r.startCameraScanIfPermissionExistsOnSwap()),r.sectionSwapAllowed=!0}),g.appendChild(E),p.appendChild(g)},o.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var r=this,l=this;if(this.persistedDataManager.hasCameraPermissions()){Ug.hasPermissions().then(function(d){if(d){var p=document.getElementById(l.getCameraPermissionButtonId());if(!p)throw r.logger.logError("Permission button not found, fail;"),"Permission button not found";p.click()}else l.persistedDataManager.setHasPermission(!1)}).catch(function(d){l.persistedDataManager.setHasPermission(!1)});return}},o.prototype.resetHeaderMessage=function(){var r=document.getElementById(this.getHeaderMessageContainerId());r.style.display="none"},o.prototype.setHeaderMessage=function(r,l){l||(l=Ai.STATUS_DEFAULT);var d=this.getHeaderMessageDiv();switch(d.innerText=r,d.style.display="block",l){case Ai.STATUS_SUCCESS:d.style.background="rgba(106, 175, 80, 0.26)",d.style.color="#477735";break;case Ai.STATUS_WARNING:d.style.background="rgba(203, 36, 49, 0.14)",d.style.color="#cb2431";break;case Ai.STATUS_DEFAULT:default:d.style.background="rgba(0, 0, 0, 0)",d.style.color="rgb(17, 17, 17)";break}},o.prototype.showHideScanTypeSwapLink=function(r){this.scanTypeSelector.hasMoreThanOneScanType()&&(r!==!0&&(r=!1),this.sectionSwapAllowed=r,this.getDashboardSectionSwapLink().style.display=r?"inline-block":"none")},o.prototype.insertCameraScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){l.innerHTML="<br>",l.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(d){l.innerHTML="<br>",l.appendChild(r.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=xv,this.cameraScanImage.alt=Bt.cameraScanAltText()},o.prototype.insertFileScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.fileScanImage){l.innerHTML="<br>",l.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(d){l.innerHTML="<br>",l.appendChild(r.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=yv,this.fileScanImage.alt=Bt.fileScanAltText()},o.prototype.clearScanRegion=function(){var r=document.getElementById(this.getScanRegionId());r.innerHTML=""},o.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},o.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},o.prototype.getDashboardSectionSwapLinkId=function(){return _i.SCAN_TYPE_CHANGE_ANCHOR_ID},o.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},o.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},o.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},o.prototype.getCameraPermissionButtonId=function(){return _i.CAMERA_PERMISSION_BUTTON_ID},o.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},o.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},o.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},o})();function Mv(){const[o,r]=ue.useState([]),[l,d]=ue.useState(0);ue.useEffect(()=>{p()},[]);async function p(){try{if(!Ge)return;const{data:g,error:E}=await Ge.from("attendance").select("date").eq("status","PRESENT").order("date",{ascending:!0});if(E)throw E;const S={};g.forEach(B=>{S[B.date]=(S[B.date]||0)+1});const N=Object.keys(S).sort((B,L)=>new Date(B)-new Date(L)).slice(-5).map(B=>({date:B,count:S[B],label:new Date(B).toLocaleDateString(void 0,{month:"short",day:"numeric"})})),I=Math.max(...N.map(B=>B.count),1);r(N),d(I)}catch(g){console.error(g)}}return o.length===0?null:b.jsxs("div",{className:"chart-card fade-in",children:[b.jsxs("div",{className:"chart-header",children:[b.jsx(dw,{size:16}),b.jsx("span",{children:"Attendance Trend"})]}),b.jsx("div",{className:"chart-container",children:o.map(g=>b.jsxs("div",{className:"chart-bar-group",children:[b.jsx("span",{className:"chart-value",children:g.count}),b.jsx("div",{className:"chart-bar",style:{height:"100%"},children:b.jsx("div",{style:{height:`${g.count/l*100}%`,background:"var(--primary)",borderRadius:"6px 6px 0 0",width:"100%",position:"absolute",bottom:0,transition:"height 1s ease-out"}})}),b.jsx("span",{className:"chart-label",children:g.label})]},g.date))})]})}function Bv(){const[o,r]=ue.useState([]);ue.useEffect(()=>{l()},[]);async function l(){try{if(!Ge)return;const{data:d,error:p}=await Ge.from("students").select("*");if(p)throw p;const g=new Date().getMonth(),E=d.filter(S=>S.birthday?new Date(S.birthday).getMonth()===g:!1).sort((S,_)=>new Date(S.birthday).getDate()-new Date(_.birthday).getDate());r(E)}catch(d){console.error(d)}}return o.length===0?null:b.jsxs("div",{className:"birthday-card fade-in",children:[b.jsxs("div",{className:"birthday-header",children:[b.jsx(Aw,{size:18}),b.jsx("span",{children:"Birthdays this Month"})]}),b.jsx("div",{className:"birthday-list",children:o.map(d=>b.jsxs("div",{className:"birthday-item",children:[b.jsx("div",{className:"birthday-name",children:d.nickname||d.full_name.split(" ")[0]}),b.jsx("div",{className:"birthday-date",children:new Date(d.birthday).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]},d.id))})]})}function kv({student:o,onClose:r}){return b.jsx("div",{className:"modal-overlay fade-in",children:b.jsxs("div",{className:"modal-content",style:{textAlign:"center"},children:[b.jsx("div",{style:{background:"#ECFDF5",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:b.jsx(fo,{size:48,color:"#10B981"})}),b.jsx("h2",{children:"Welcome Back!"}),b.jsxs("p",{style:{fontSize:"18px",margin:"8px 0 24px"},children:[b.jsx("strong",{children:o.full_name})," is marked present."]}),b.jsx("button",{onClick:r,className:"btn full-width",style:{marginTop:"16px"},children:"OK, Next"})]})})}function Pg({onNavigate:o}){const{user:r,logout:l}=dr(),[d,p]=ue.useState(!1),[g,E]=ue.useState(null),S=r?.role==="SUPER_ADMIN";return ue.useEffect(()=>{if(d){const _=new Dv("reader",{fps:10,qrbox:250},!1);return _.render(async v=>{try{if(_.clear(),p(!1),!Ge)return;const{data:N,error:I}=await Ge.from("students").select("*").eq("id",v).single();if(I||!N){alert("Invalid QR Code or Student not found!");return}const L=(()=>{const z=new Date,Y=z.getFullYear(),ee=String(z.getMonth()+1).padStart(2,"0"),ie=String(z.getDate()).padStart(2,"0");return`${Y}-${ee}-${ie}`})(),{error:U}=await Ge.from("attendance").upsert({student_id:N.id,date:L,status:"PRESENT"},{onConflict:"student_id, date"});if(U)throw U;E(N)}catch(N){console.error(N),alert("Error marking attendance: "+N.message)}},v=>{}),()=>{try{_.clear()}catch{}}}},[d]),b.jsxs("div",{className:"page fade-in",children:[g&&b.jsx(kv,{student:g,onClose:()=>E(null)}),d&&b.jsx("div",{className:"modal-overlay",style:{zIndex:999},children:b.jsxs("div",{className:"modal-content",style:{padding:"20px",overflow:"hidden"},children:[b.jsx("button",{onClick:()=>p(!1),style:{position:"absolute",top:10,right:10,zIndex:1e3,background:"#F3F4F6",color:"#000",border:"none",borderRadius:"50%",width:32,height:32},children:"X"}),b.jsx("h3",{style:{marginBottom:"16px",textAlign:"center"},children:"Scan QR Code"}),b.jsx("div",{id:"reader",style:{width:"100%",borderRadius:"12px",overflow:"hidden"}}),b.jsx("p",{style:{textAlign:"center",color:"#6B7280",padding:"10px",fontSize:"13px"},children:"Point camera at Student QR"})]})}),b.jsxs("header",{className:"home-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px"},children:[b.jsxs("div",{children:[S&&b.jsxs("button",{onClick:()=>o("super-admin-dashboard"),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px",fontSize:"14px",fontWeight:"bold"},children:[b.jsx(Id,{size:16,style:{rotate:"180deg",display:"none"}}),"  Back to Hub"]}),b.jsxs("h1",{children:["Hello, ",r?.username||"User","!"]}),b.jsx("p",{style:{fontSize:"12px",opacity:.8},children:r?.full_name})]}),b.jsxs("div",{style:{display:"flex",gap:"8px"},children:[b.jsxs("button",{onClick:()=>p(!0),style:{background:"#10B981",border:"none",color:"#fff",padding:"8px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[b.jsx(Id,{size:20})," ",b.jsx("span",{style:{fontSize:"12px",fontWeight:"bold"},children:"SCAN"})]}),b.jsx("button",{onClick:()=>o("info"),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer"},children:b.jsx(mw,{size:28})}),b.jsx("button",{onClick:l,style:{background:"none",border:"none",color:"#EF4444",cursor:"pointer"},title:"Logout",children:b.jsx(Bd,{size:28})})]})]}),b.jsx(Mv,{}),b.jsx(Bv,{}),b.jsxs("div",{className:"menu-grid",children:[b.jsxs("button",{className:"menu-card primary",onClick:()=>o("attendance"),children:[b.jsx("div",{className:"icon-bg",children:b.jsx(el,{size:32})}),b.jsx("h3",{children:"Attendance"}),b.jsx("p",{children:"Mark students present"})]}),b.jsxs("button",{className:"menu-card secondary",onClick:()=>o("activity-log"),children:[b.jsx("div",{className:"icon-bg",children:b.jsx(nw,{size:32})}),b.jsx("h3",{children:"Activity Log"}),b.jsx("p",{children:"Notes & Verse History"})]}),b.jsxs("button",{className:"menu-card danger",onClick:()=>o("follow-up"),children:[b.jsx("div",{className:"icon-bg",children:b.jsx(Ud,{size:32})}),b.jsx("h3",{children:"Follow Up"}),b.jsx("p",{children:"Missed 3+ Sundays"})]}),b.jsxs("button",{className:"menu-card accent",onClick:()=>o("student-monitor"),children:[b.jsx("div",{className:"icon-bg",children:b.jsx(Qc,{size:32})}),b.jsx("h3",{children:"Profiles"}),b.jsx("p",{children:"Stats & History"})]}),b.jsxs("button",{className:"menu-card",onClick:()=>o("reports"),children:[b.jsx("div",{className:"icon-bg",style:{background:"#EDE9FE",color:"#7C3AED"},children:b.jsx(_2,{size:32})}),b.jsx("h3",{children:"Reports"}),b.jsx("p",{children:"Full History"})]}),b.jsxs("button",{className:"menu-card",onClick:()=>o("student-manager"),children:[b.jsx("div",{className:"icon-bg",style:{background:"#FFEDD5",color:"#C2410C"},children:b.jsx(Md,{size:32})}),b.jsx("h3",{children:"Manage"}),b.jsx("p",{children:"Add/Edit Students"})]}),(r.role==="SUPER_ADMIN"||r.role==="ADMIN")&&b.jsxs("button",{className:"menu-card",onClick:()=>o("kids-staff"),children:[b.jsx("div",{className:"icon-bg",style:{background:"#DBEAFE",color:"#2563EB"},children:b.jsx(mo,{size:32})}),b.jsx("h3",{children:"Kids Staff"}),b.jsx("p",{children:"Manage Teachers"})]})]})]})}function Fg({onNavigate:o}){const{user:r,logout:l}=dr();return b.jsxs("div",{className:"page fade-in",children:[b.jsxs("header",{className:"home-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px",borderBottom:"1px solid #E5E7EB",marginBottom:"24px"},children:[b.jsxs("div",{children:[b.jsx("h1",{style:{fontSize:"24px",color:"#111827"},children:"Super Admin Hub"}),b.jsxs("p",{style:{fontSize:"14px",color:"#6B7280"},children:["Welcome, ",r?.full_name]})]}),b.jsxs("button",{onClick:l,style:{background:"none",border:"none",color:"#EF4444",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",fontSize:"10px"},title:"Logout",children:[b.jsx(Bd,{size:24}),b.jsx("span",{children:"Logout"})]})]}),b.jsxs("div",{className:"menu-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px"},children:[b.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"10px",marginBottom:"5px",fontSize:"12px",fontWeight:"bold",color:"#9CA3AF",textTransform:"uppercase"},children:"Access Dashboards"}),b.jsxs("button",{className:"menu-card",onClick:()=>o("home"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",textAlign:"center",gap:"8px",background:"linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%)",border:"1px solid #BFDBFE"},children:[b.jsx("div",{className:"icon-bg",style:{background:"white",color:"#2563EB",marginBottom:"8px"},children:b.jsx(Ow,{size:32})}),b.jsxs("div",{children:[b.jsx("h3",{style:{fontSize:"16px",marginBottom:"2px",color:"#1E40AF"},children:"Kids Ministry"}),b.jsx("p",{style:{margin:0,fontSize:"11px",opacity:.8,color:"#1E3A8A"},children:"Open Kids Dashboard"})]})]}),b.jsxs("button",{className:"menu-card",onClick:()=>o("usher-dashboard"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",textAlign:"center",gap:"8px",background:"linear-gradient(135deg, #FDF2F8 0%, #FCE7F3 100%)",border:"1px solid #FBCFE8"},children:[b.jsx("div",{className:"icon-bg",style:{background:"white",color:"#BE185D",marginBottom:"8px"},children:b.jsx(el,{size:32})}),b.jsxs("div",{children:[b.jsx("h3",{style:{fontSize:"16px",marginBottom:"2px",color:"#9D174D"},children:"Usher Team"}),b.jsx("p",{style:{margin:0,fontSize:"11px",opacity:.8,color:"#831843"},children:"Open Usher Dashboard"})]})]}),b.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"20px",marginBottom:"5px",fontSize:"12px",fontWeight:"bold",color:"#9CA3AF",textTransform:"uppercase"},children:"Administration"}),b.jsxs("button",{className:"menu-card",onClick:()=>o("kids-staff"),style:{flexDirection:"row",alignItems:"center",padding:"16px",gap:"12px",background:"white",border:"1px solid #E5E7EB"},children:[b.jsx("div",{className:"icon-bg",style:{background:"#F3F4F6",color:"#4B5563",width:"40px",height:"40px"},children:b.jsx(mo,{size:20})}),b.jsxs("div",{style:{textAlign:"left",flex:1},children:[b.jsx("h3",{style:{fontSize:"14px",marginBottom:"2px"},children:"Kids Staff"}),b.jsx("p",{style:{margin:0,fontSize:"11px",color:"#6B7280"},children:"Manage Teachers"})]}),b.jsx($l,{size:16,color:"#9CA3AF"})]}),b.jsxs("button",{className:"menu-card",onClick:()=>o("usher-team"),style:{flexDirection:"row",alignItems:"center",padding:"16px",gap:"12px",background:"white",border:"1px solid #E5E7EB"},children:[b.jsx("div",{className:"icon-bg",style:{background:"#F3F4F6",color:"#4B5563",width:"40px",height:"40px"},children:b.jsx(Md,{size:20})}),b.jsxs("div",{style:{textAlign:"left",flex:1},children:[b.jsx("h3",{style:{fontSize:"14px",marginBottom:"2px"},children:"Usher Team"}),b.jsx("p",{style:{margin:0,fontSize:"11px",color:"#6B7280"},children:"Manage Ushers"})]}),b.jsx($l,{size:16,color:"#9CA3AF"})]}),b.jsxs("button",{className:"menu-card",onClick:()=>o("member-manager"),style:{flexDirection:"row",alignItems:"center",padding:"16px",gap:"12px",background:"white",border:"1px solid #E5E7EB",gridColumn:"1 / -1"},children:[b.jsx("div",{className:"icon-bg",style:{background:"#F3F4F6",color:"#4B5563",width:"40px",height:"40px"},children:b.jsx(el,{size:20})}),b.jsxs("div",{style:{textAlign:"left",flex:1},children:[b.jsx("h3",{style:{fontSize:"14px",marginBottom:"2px"},children:"Congregation"}),b.jsx("p",{style:{margin:0,fontSize:"11px",color:"#6B7280"},children:"Manage Members DB"})]}),b.jsx($l,{size:16,color:"#9CA3AF"})]}),b.jsxs("button",{className:"menu-card",onClick:()=>o("login-history"),style:{flexDirection:"row",alignItems:"center",padding:"16px",gap:"12px",background:"white",border:"1px solid #E5E7EB",gridColumn:"1 / -1"},children:[b.jsx("div",{className:"icon-bg",style:{background:"#FEF2F2",color:"#DC2626",width:"40px",height:"40px"},children:b.jsx(C2,{size:20})}),b.jsxs("div",{style:{textAlign:"left",flex:1},children:[b.jsx("h3",{style:{fontSize:"14px",marginBottom:"2px"},children:"System Logs"}),b.jsx("p",{style:{margin:0,fontSize:"11px",color:"#6B7280"},children:"View Login History"})]}),b.jsx($l,{size:16,color:"#9CA3AF"})]})]})]})}function Lv({visible:o,onSave:r,onCancel:l,initialValue:d}){const[p,g]=ue.useState("");return ue.useEffect(()=>{o&&g(d||"")},[o,d]),o?b.jsx("div",{className:"modal-overlay",onClick:l,children:b.jsxs("div",{className:"modal",onClick:E=>E.stopPropagation(),children:[b.jsx("h3",{style:{marginBottom:"12px"},children:"Add Note"}),b.jsx("textarea",{className:"input",rows:3,placeholder:"e.g. Sick, Brought Friend...",value:p,onChange:E=>g(E.target.value),autoFocus:!0}),b.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[b.jsx("button",{className:"btn",style:{flex:1,background:"#F3F4F6",color:"#333"},onClick:l,children:"Cancel"}),b.jsx("button",{className:"btn",style:{flex:1},onClick:()=>r(p),children:"Save"})]})]})}):null}function jv({onBack:o}){const{permissions:r}=dr(),[l,d]=ue.useState(""),[p,g]=ue.useState([]),[E,S]=ue.useState(!0),[_,v]=ue.useState(null),[N,I]=ue.useState({visible:!1,studentId:null,currentRemark:""}),[B,L]=ue.useState(()=>localStorage.getItem("attendance_locked")==="true"),U=()=>{if(!r.canUnlockAttendance){alert("Restricted: Only Admins/Teachers can change lock state.");return}const he=!B;L(he),localStorage.setItem("attendance_locked",he)};ue.useEffect(()=>{z()},[]);async function z(){try{if(S(!0),!Ge)return;const{data:he,error:oe}=await Ge.from("students").select("*").order("full_name");if(oe)throw oe;const Ke=(()=>{const Re=new Date,Le=Re.getFullYear(),H=String(Re.getMonth()+1).padStart(2,"0"),le=String(Re.getDate()).padStart(2,"0");return`${Le}-${H}-${le}`})(),{data:_e,error:ve}=await Ge.from("attendance").select("student_id, memory_verse, remarks").eq("date",Ke).eq("status","PRESENT");if(ve)throw ve;const Ne={};_e.forEach(Re=>{Ne[Re.student_id]={present:!0,memory_verse:Re.memory_verse,remarks:Re.remarks}});const{data:J,error:te}=await Ge.from("attendance").select("student_id").eq("status","PRESENT");if(te)throw te;const fe={};J.forEach(Re=>{fe[Re.student_id]=(fe[Re.student_id]||0)+1});const Ce=he.map(Re=>{const Le=Ne[Re.id]||{present:!1,memory_verse:!1,remarks:""};return{...Re,present:Le.present,memory_verse:Le.memory_verse,remarks:Le.remarks,visits:fe[Re.id]||0}});g(Ce)}catch(he){v(he.message)}finally{S(!1)}}const Y=async he=>{if(B||!Ge)return;const oe=!he.present;oe?he.visits+1:he.visits-1;const Ke=(()=>{const _e=new Date,ve=_e.getFullYear(),Ne=String(_e.getMonth()+1).padStart(2,"0"),J=String(_e.getDate()).padStart(2,"0");return`${ve}-${Ne}-${J}`})();g(_e=>_e.map(ve=>ve.id===he.id?{...ve,present:oe}:ve));try{oe?await Ge.from("attendance").insert({student_id:he.id,status:"PRESENT",date:Ke}):await Ge.from("attendance").delete().eq("student_id",he.id).eq("date",Ke),z()}catch{z()}},ee=async(he,oe)=>{if(oe.stopPropagation(),B)return;if(!he.present){alert("Mark them present first!");return}const wt=!he.memory_verse;g(ve=>ve.map(Ne=>Ne.id===he.id?{...Ne,memory_verse:wt}:Ne));const _e=(()=>{const ve=new Date,Ne=ve.getFullYear(),J=String(ve.getMonth()+1).padStart(2,"0"),te=String(ve.getDate()).padStart(2,"0");return`${Ne}-${J}-${te}`})();await Ge.from("attendance").update({memory_verse:wt}).eq("student_id",he.id).eq("date",_e)},ie=(he,oe)=>{if(oe.stopPropagation(),!B){if(!he.present){alert("Mark them present first!");return}I({visible:!0,studentId:he.id,currentRemark:he.remarks})}},K=async he=>{const wt=(()=>{const _e=new Date,ve=_e.getFullYear(),Ne=String(_e.getMonth()+1).padStart(2,"0"),J=String(_e.getDate()).padStart(2,"0");return`${ve}-${Ne}-${J}`})(),Ke=N.studentId;g(_e=>_e.map(ve=>ve.id===Ke?{...ve,remarks:he}:ve)),I({...N,visible:!1}),await Ge.from("attendance").update({remarks:he}).eq("student_id",Ke).eq("date",wt)},ce=p.filter(he=>he.full_name.toLowerCase().includes(l.toLowerCase())),Ie=ce.filter(he=>he.visits<3),be=ce.filter(he=>he.visits>=3),W=he=>b.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[b.jsxs("div",{className:"student-info",style:{flex:1},children:[b.jsxs("h3",{children:[he.full_name," ",he.nickname&&b.jsxs("span",{style:{color:"var(--primary)",fontWeight:"normal"},children:['"',he.nickname,'"']})]}),b.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[b.jsx("span",{children:he.grade_level||"No Grade"}),he.visits<3&&he.visits>0&&b.jsx("span",{className:`badge visit-${he.visits}`,children:he.visits===1?"1st VISIT":"2nd VISIT"}),he.visits===0&&b.jsx("span",{className:"badge visit-1",children:"NEW"})]})]}),b.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",opacity:B?.5:1},children:[he.present&&b.jsxs(b.Fragment,{children:[b.jsx("button",{className:`action-btn ${he.memory_verse?"active-verse":""}`,onClick:oe=>ee(he,oe),disabled:B,children:b.jsx(co,{size:16})}),b.jsx("button",{className:`action-btn ${he.remarks?"active-remark":""}`,onClick:oe=>ie(he,oe),disabled:B,children:b.jsx(kd,{size:16,fill:he.remarks?"currentColor":"none"})})]}),b.jsx("div",{className:`check-btn ${he.present?"active":""}`,onClick:oe=>{oe.stopPropagation(),Y(he)},style:{cursor:B?"not-allowed":"pointer"},children:B?b.jsx(Nd,{size:16,color:he.present?"white":"var(--text-muted)"}):b.jsx(fo,{size:24,fill:he.present?"white":"none",color:he.present?"white":"var(--border-color)"})})]})]},he.id);return b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsxs("div",{children:[b.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"Attendance"}),b.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:new Date().toDateString()})]}),b.jsxs("button",{onClick:U,style:{background:B?"#FEE2E2":"#F3F4F6",border:"none",padding:"8px",borderRadius:"8px",color:B?"#DC2626":"#6B7280",cursor:"not-allowed",display:"flex",alignItems:"center",gap:"4px"},children:[B?b.jsx(Nd,{size:20}):b.jsx(T2,{size:20}),b.jsx("span",{style:{fontSize:"12px",fontWeight:"600"},children:B?"LOCKED":"OPEN"})]})]}),_&&b.jsx("div",{className:"error-banner",children:_}),b.jsxs("div",{className:"search-bar",children:[b.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:l,onChange:he=>d(he.target.value)}),b.jsx(go,{size:20,className:"search-icon"})]}),b.jsx("div",{className:"student-list",children:E?b.jsx("div",{className:"empty-state",children:"Loading..."}):ce.length===0?b.jsx("div",{className:"empty-state",children:"No student found."}):b.jsxs(b.Fragment,{children:[Ie.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"section-header",children:["New Kids / Visitors (",Ie.length,")"]}),Ie.map(W)]}),be.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"section-header",children:["Regulars (",be.length,")"]}),be.map(W)]})]})}),b.jsx(Lv,{visible:N.visible,initialValue:N.currentRemark,onCancel:()=>I({...N,visible:!1}),onSave:K})]})}function Uv({onBack:o}){const[r,l]=ue.useState([]),[d,p]=ue.useState(!0);ue.useEffect(()=>{g()},[]);async function g(){try{p(!0);const{data:S,error:_}=await Ge.from("attendance").select("date, remarks, memory_verse, students (full_name, nickname)").or("memory_verse.eq.true,remarks.neq.null").order("date",{ascending:!1});if(_)throw _;const v={};S.forEach(N=>{v[N.date]||(v[N.date]={date:N.date,verses:[],remarks:[]}),N.memory_verse&&v[N.date].verses.push(N.students.nickname||N.students.full_name),N.remarks&&v[N.date].remarks.push({name:N.students.nickname||N.students.full_name,note:N.remarks})}),l(Object.values(v))}catch(S){console.error(S)}finally{p(!1)}}const E=S=>new Date(S).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"});return b.jsxs("div",{className:"page slide-in",style:{background:"#FAFAFA"},children:[b.jsxs("header",{className:"page-header",style:{background:"#fff",margin:0,padding:"20px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"Activity Log"})]}),b.jsx("div",{className:"timeline",children:d?b.jsx("div",{className:"empty-state",children:"Loading..."}):r.length===0?b.jsx("div",{className:"empty-state",children:"No activity yet."}):r.map(S=>b.jsxs("div",{className:"timeline-item",children:[b.jsx("div",{className:"timeline-dot"}),b.jsx("div",{className:"timeline-date",children:E(S.date)}),S.verses.length>0&&b.jsxs("div",{className:"timeline-card timeline-section",children:[b.jsxs("div",{className:"timeline-title",style:{color:"#D97706"},children:[b.jsx(co,{size:14})," Memory Verses (",S.verses.length,")"]}),b.jsx("p",{style:{fontSize:"14px",lineHeight:"1.4",color:"#374151"},children:S.verses.join(", ")})]}),S.remarks.length>0&&b.jsxs("div",{className:"timeline-card timeline-section",children:[b.jsxs("div",{className:"timeline-title",style:{color:"var(--primary)"},children:[b.jsx(kd,{size:14})," Remarks"]}),b.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:S.remarks.map((_,v)=>b.jsxs("div",{style:{fontSize:"13px"},children:[b.jsxs("span",{style:{fontWeight:"700",color:"#111827"},children:[_.name,":"]})," ",b.jsx("span",{style:{color:"#4B5563"},children:_.note})]},v))})]})]},S.date))})]})}function zv({onBack:o}){const[r,l]=ue.useState([]),[d,p]=ue.useState(!0),[g,E]=ue.useState([]);ue.useEffect(()=>{S()},[]);async function S(){try{p(!0);const{data:_,error:v}=await Ge.from("attendance").select("date").eq("status","PRESENT").order("date",{ascending:!1}),N={id:"demo-absent",full_name:"Sleeping Sam (Demo)",grade_level:"Grade 1",avatar_url:null,isDemo:!0};if(v)throw v;const I=[...new Set(_.map(ie=>ie.date))].slice(0,3);if(E(I),I.length<3){l([N]);return}const{data:B,error:L}=await Ge.from("attendance").select("student_id").in("date",I).eq("status","PRESENT");if(L)throw L;const U=new Set(B.map(ie=>ie.student_id)),{data:z,error:Y}=await Ge.from("students").select("*").order("full_name");if(Y)throw Y;const ee=z.filter(ie=>!U.has(ie.id));l([...ee,N])}catch(_){console.error(_)}finally{p(!1)}}return b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsxs("div",{children:[b.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"To Visit / Follow Up"}),b.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Missed the last 3 Sundays"})]})]}),g.length<3&&!d&&b.jsxs("div",{className:"error-banner",style:{background:"#FFF7ED",color:"#C2410C",borderColor:"#FFEDD5"},children:["Not enough history yet (",g.length,"/3 Sundays)."]}),b.jsx("div",{className:"student-list",children:d?b.jsx("div",{className:"empty-state",children:"Calculating..."}):r.length===0?b.jsxs("div",{className:"empty-state",children:[b.jsx(fo,{size:48,style:{marginBottom:"16px",color:"var(--success)"}}),b.jsx("p",{children:"Good news! Everyone has attended at least once recently."})]}):r.map(_=>b.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[b.jsxs("div",{className:"student-info",children:[b.jsx("h3",{children:_.full_name}),b.jsx("span",{style:{color:"#EF4444",fontWeight:"500"},children:"Missed 3 Consecutive"})]}),b.jsx("div",{style:{background:"#FEE2E2",padding:"8px",borderRadius:"50%",color:"#DC2626"},children:b.jsx(_w,{size:24})})]},_.id))})]})}var Xs={},sd={exports:{}},ld,Hg;function Pv(){if(Hg)return ld;Hg=1;var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ld=o,ld}var od,Vg;function Fv(){if(Vg)return od;Vg=1;var o=Pv();function r(){}function l(){}return l.resetWarningCache=r,od=function(){function d(E,S,_,v,N,I){if(I!==o){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}d.isRequired=d;function p(){return d}var g={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:p,element:d,elementType:d,instanceOf:p,node:d,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:l,resetWarningCache:r};return g.PropTypes=g,g},od}var Gg;function z2(){return Gg||(Gg=1,sd.exports=Fv()()),sd.exports}var cd,qg;function P2(){return qg||(qg=1,cd={L:1,M:0,Q:3,H:2}),cd}var ud,Yg;function F2(){return Yg||(Yg=1,ud={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),ud}var hd,Xg;function Hv(){if(Xg)return hd;Xg=1;var o=F2();function r(l){this.mode=o.MODE_8BIT_BYTE,this.data=l}return r.prototype={getLength:function(l){return this.data.length},write:function(l){for(var d=0;d<this.data.length;d++)l.put(this.data.charCodeAt(d),8)}},hd=r,hd}var dd,Wg;function Vv(){if(Wg)return dd;Wg=1;var o=P2();function r(l,d){this.totalCount=l,this.dataCount=d}return r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(l,d){var p=r.getRsBlockTable(l,d);if(p==null)throw new Error("bad rs block @ typeNumber:"+l+"/errorCorrectLevel:"+d);for(var g=p.length/3,E=new Array,S=0;S<g;S++)for(var _=p[S*3+0],v=p[S*3+1],N=p[S*3+2],I=0;I<_;I++)E.push(new r(v,N));return E},r.getRsBlockTable=function(l,d){switch(d){case o.L:return r.RS_BLOCK_TABLE[(l-1)*4+0];case o.M:return r.RS_BLOCK_TABLE[(l-1)*4+1];case o.Q:return r.RS_BLOCK_TABLE[(l-1)*4+2];case o.H:return r.RS_BLOCK_TABLE[(l-1)*4+3];default:return}},dd=r,dd}var fd,Kg;function Gv(){if(Kg)return fd;Kg=1;function o(){this.buffer=new Array,this.length=0}return o.prototype={get:function(r){var l=Math.floor(r/8);return(this.buffer[l]>>>7-r%8&1)==1},put:function(r,l){for(var d=0;d<l;d++)this.putBit((r>>>l-d-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(r){var l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),r&&(this.buffer[l]|=128>>>this.length%8),this.length++}},fd=o,fd}var gd,Zg;function H2(){if(Zg)return gd;Zg=1;for(var o={glog:function(l){if(l<1)throw new Error("glog("+l+")");return o.LOG_TABLE[l]},gexp:function(l){for(;l<0;)l+=255;for(;l>=256;)l-=255;return o.EXP_TABLE[l]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},r=0;r<8;r++)o.EXP_TABLE[r]=1<<r;for(var r=8;r<256;r++)o.EXP_TABLE[r]=o.EXP_TABLE[r-4]^o.EXP_TABLE[r-5]^o.EXP_TABLE[r-6]^o.EXP_TABLE[r-8];for(var r=0;r<255;r++)o.LOG_TABLE[o.EXP_TABLE[r]]=r;return gd=o,gd}var md,Qg;function V2(){if(Qg)return md;Qg=1;var o=H2();function r(l,d){if(l.length==null)throw new Error(l.length+"/"+d);for(var p=0;p<l.length&&l[p]==0;)p++;this.num=new Array(l.length-p+d);for(var g=0;g<l.length-p;g++)this.num[g]=l[g+p]}return r.prototype={get:function(l){return this.num[l]},getLength:function(){return this.num.length},multiply:function(l){for(var d=new Array(this.getLength()+l.getLength()-1),p=0;p<this.getLength();p++)for(var g=0;g<l.getLength();g++)d[p+g]^=o.gexp(o.glog(this.get(p))+o.glog(l.get(g)));return new r(d,0)},mod:function(l){if(this.getLength()-l.getLength()<0)return this;for(var d=o.glog(this.get(0))-o.glog(l.get(0)),p=new Array(this.getLength()),g=0;g<this.getLength();g++)p[g]=this.get(g);for(var g=0;g<l.getLength();g++)p[g]^=o.gexp(o.glog(l.get(g))+d);return new r(p,0).mod(l)}},md=r,md}var pd,Jg;function qv(){if(Jg)return pd;Jg=1;var o=F2(),r=V2(),l=H2(),d={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(g){for(var E=g<<10;p.getBCHDigit(E)-p.getBCHDigit(p.G15)>=0;)E^=p.G15<<p.getBCHDigit(E)-p.getBCHDigit(p.G15);return(g<<10|E)^p.G15_MASK},getBCHTypeNumber:function(g){for(var E=g<<12;p.getBCHDigit(E)-p.getBCHDigit(p.G18)>=0;)E^=p.G18<<p.getBCHDigit(E)-p.getBCHDigit(p.G18);return g<<12|E},getBCHDigit:function(g){for(var E=0;g!=0;)E++,g>>>=1;return E},getPatternPosition:function(g){return p.PATTERN_POSITION_TABLE[g-1]},getMask:function(g,E,S){switch(g){case d.PATTERN000:return(E+S)%2==0;case d.PATTERN001:return E%2==0;case d.PATTERN010:return S%3==0;case d.PATTERN011:return(E+S)%3==0;case d.PATTERN100:return(Math.floor(E/2)+Math.floor(S/3))%2==0;case d.PATTERN101:return E*S%2+E*S%3==0;case d.PATTERN110:return(E*S%2+E*S%3)%2==0;case d.PATTERN111:return(E*S%3+(E+S)%2)%2==0;default:throw new Error("bad maskPattern:"+g)}},getErrorCorrectPolynomial:function(g){for(var E=new r([1],0),S=0;S<g;S++)E=E.multiply(new r([1,l.gexp(S)],0));return E},getLengthInBits:function(g,E){if(1<=E&&E<10)switch(g){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:return 8;case o.MODE_KANJI:return 8;default:throw new Error("mode:"+g)}else if(E<27)switch(g){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+g)}else if(E<41)switch(g){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+g)}else throw new Error("type:"+E)},getLostPoint:function(g){for(var E=g.getModuleCount(),S=0,_=0;_<E;_++)for(var v=0;v<E;v++){for(var N=0,I=g.isDark(_,v),B=-1;B<=1;B++)if(!(_+B<0||E<=_+B))for(var L=-1;L<=1;L++)v+L<0||E<=v+L||B==0&&L==0||I==g.isDark(_+B,v+L)&&N++;N>5&&(S+=3+N-5)}for(var _=0;_<E-1;_++)for(var v=0;v<E-1;v++){var U=0;g.isDark(_,v)&&U++,g.isDark(_+1,v)&&U++,g.isDark(_,v+1)&&U++,g.isDark(_+1,v+1)&&U++,(U==0||U==4)&&(S+=3)}for(var _=0;_<E;_++)for(var v=0;v<E-6;v++)g.isDark(_,v)&&!g.isDark(_,v+1)&&g.isDark(_,v+2)&&g.isDark(_,v+3)&&g.isDark(_,v+4)&&!g.isDark(_,v+5)&&g.isDark(_,v+6)&&(S+=40);for(var v=0;v<E;v++)for(var _=0;_<E-6;_++)g.isDark(_,v)&&!g.isDark(_+1,v)&&g.isDark(_+2,v)&&g.isDark(_+3,v)&&g.isDark(_+4,v)&&!g.isDark(_+5,v)&&g.isDark(_+6,v)&&(S+=40);for(var z=0,v=0;v<E;v++)for(var _=0;_<E;_++)g.isDark(_,v)&&z++;var Y=Math.abs(100*z/E/E-50)/5;return S+=Y*10,S}};return pd=p,pd}var xd,$g;function Yv(){if($g)return xd;$g=1;var o=Hv(),r=Vv(),l=Gv(),d=qv(),p=V2();function g(S,_){this.typeNumber=S,this.errorCorrectLevel=_,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var E=g.prototype;return E.addData=function(S){var _=new o(S);this.dataList.push(_),this.dataCache=null},E.isDark=function(S,_){if(S<0||this.moduleCount<=S||_<0||this.moduleCount<=_)throw new Error(S+","+_);return this.modules[S][_]},E.getModuleCount=function(){return this.moduleCount},E.make=function(){if(this.typeNumber<1){var S=1;for(S=1;S<40;S++){for(var _=r.getRSBlocks(S,this.errorCorrectLevel),v=new l,N=0,I=0;I<_.length;I++)N+=_[I].dataCount;for(var I=0;I<this.dataList.length;I++){var B=this.dataList[I];v.put(B.mode,4),v.put(B.getLength(),d.getLengthInBits(B.mode,S)),B.write(v)}if(v.getLengthInBits()<=N*8)break}this.typeNumber=S}this.makeImpl(!1,this.getBestMaskPattern())},E.makeImpl=function(S,_){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++){this.modules[v]=new Array(this.moduleCount);for(var N=0;N<this.moduleCount;N++)this.modules[v][N]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(S,_),this.typeNumber>=7&&this.setupTypeNumber(S),this.dataCache==null&&(this.dataCache=g.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,_)},E.setupPositionProbePattern=function(S,_){for(var v=-1;v<=7;v++)if(!(S+v<=-1||this.moduleCount<=S+v))for(var N=-1;N<=7;N++)_+N<=-1||this.moduleCount<=_+N||(0<=v&&v<=6&&(N==0||N==6)||0<=N&&N<=6&&(v==0||v==6)||2<=v&&v<=4&&2<=N&&N<=4?this.modules[S+v][_+N]=!0:this.modules[S+v][_+N]=!1)},E.getBestMaskPattern=function(){for(var S=0,_=0,v=0;v<8;v++){this.makeImpl(!0,v);var N=d.getLostPoint(this);(v==0||S>N)&&(S=N,_=v)}return _},E.createMovieClip=function(S,_,v){var N=S.createEmptyMovieClip(_,v),I=1;this.make();for(var B=0;B<this.modules.length;B++)for(var L=B*I,U=0;U<this.modules[B].length;U++){var z=U*I,Y=this.modules[B][U];Y&&(N.beginFill(0,100),N.moveTo(z,L),N.lineTo(z+I,L),N.lineTo(z+I,L+I),N.lineTo(z,L+I),N.endFill())}return N},E.setupTimingPattern=function(){for(var S=8;S<this.moduleCount-8;S++)this.modules[S][6]==null&&(this.modules[S][6]=S%2==0);for(var _=8;_<this.moduleCount-8;_++)this.modules[6][_]==null&&(this.modules[6][_]=_%2==0)},E.setupPositionAdjustPattern=function(){for(var S=d.getPatternPosition(this.typeNumber),_=0;_<S.length;_++)for(var v=0;v<S.length;v++){var N=S[_],I=S[v];if(this.modules[N][I]==null)for(var B=-2;B<=2;B++)for(var L=-2;L<=2;L++)B==-2||B==2||L==-2||L==2||B==0&&L==0?this.modules[N+B][I+L]=!0:this.modules[N+B][I+L]=!1}},E.setupTypeNumber=function(S){for(var _=d.getBCHTypeNumber(this.typeNumber),v=0;v<18;v++){var N=!S&&(_>>v&1)==1;this.modules[Math.floor(v/3)][v%3+this.moduleCount-8-3]=N}for(var v=0;v<18;v++){var N=!S&&(_>>v&1)==1;this.modules[v%3+this.moduleCount-8-3][Math.floor(v/3)]=N}},E.setupTypeInfo=function(S,_){for(var v=this.errorCorrectLevel<<3|_,N=d.getBCHTypeInfo(v),I=0;I<15;I++){var B=!S&&(N>>I&1)==1;I<6?this.modules[I][8]=B:I<8?this.modules[I+1][8]=B:this.modules[this.moduleCount-15+I][8]=B}for(var I=0;I<15;I++){var B=!S&&(N>>I&1)==1;I<8?this.modules[8][this.moduleCount-I-1]=B:I<9?this.modules[8][15-I-1+1]=B:this.modules[8][15-I-1]=B}this.modules[this.moduleCount-8][8]=!S},E.mapData=function(S,_){for(var v=-1,N=this.moduleCount-1,I=7,B=0,L=this.moduleCount-1;L>0;L-=2)for(L==6&&L--;;){for(var U=0;U<2;U++)if(this.modules[N][L-U]==null){var z=!1;B<S.length&&(z=(S[B]>>>I&1)==1);var Y=d.getMask(_,N,L-U);Y&&(z=!z),this.modules[N][L-U]=z,I--,I==-1&&(B++,I=7)}if(N+=v,N<0||this.moduleCount<=N){N-=v,v=-v;break}}},g.PAD0=236,g.PAD1=17,g.createData=function(S,_,v){for(var N=r.getRSBlocks(S,_),I=new l,B=0;B<v.length;B++){var L=v[B];I.put(L.mode,4),I.put(L.getLength(),d.getLengthInBits(L.mode,S)),L.write(I)}for(var U=0,B=0;B<N.length;B++)U+=N[B].dataCount;if(I.getLengthInBits()>U*8)throw new Error("code length overflow. ("+I.getLengthInBits()+">"+U*8+")");for(I.getLengthInBits()+4<=U*8&&I.put(0,4);I.getLengthInBits()%8!=0;)I.putBit(!1);for(;!(I.getLengthInBits()>=U*8||(I.put(g.PAD0,8),I.getLengthInBits()>=U*8));)I.put(g.PAD1,8);return g.createBytes(I,N)},g.createBytes=function(S,_){for(var v=0,N=0,I=0,B=new Array(_.length),L=new Array(_.length),U=0;U<_.length;U++){var z=_[U].dataCount,Y=_[U].totalCount-z;N=Math.max(N,z),I=Math.max(I,Y),B[U]=new Array(z);for(var ee=0;ee<B[U].length;ee++)B[U][ee]=255&S.buffer[ee+v];v+=z;var ie=d.getErrorCorrectPolynomial(Y),K=new p(B[U],ie.getLength()-1),ce=K.mod(ie);L[U]=new Array(ie.getLength()-1);for(var ee=0;ee<L[U].length;ee++){var Ie=ee+ce.getLength()-L[U].length;L[U][ee]=Ie>=0?ce.get(Ie):0}}for(var be=0,ee=0;ee<_.length;ee++)be+=_[ee].totalCount;for(var W=new Array(be),he=0,ee=0;ee<N;ee++)for(var U=0;U<_.length;U++)ee<B[U].length&&(W[he++]=B[U][ee]);for(var ee=0;ee<I;ee++)for(var U=0;U<_.length;U++)ee<L[U].length&&(W[he++]=L[U][ee]);return W},xd=g,xd}var Fc={},e2;function Xv(){if(e2)return Fc;e2=1,Object.defineProperty(Fc,"__esModule",{value:!0});var o=Object.assign||function(v){for(var N=1;N<arguments.length;N++){var I=arguments[N];for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(v[B]=I[B])}return v},r=z2(),l=g(r),d=uo(),p=g(d);function g(v){return v&&v.__esModule?v:{default:v}}function E(v,N){var I={};for(var B in v)N.indexOf(B)>=0||Object.prototype.hasOwnProperty.call(v,B)&&(I[B]=v[B]);return I}var S={bgColor:l.default.oneOfType([l.default.object,l.default.string]).isRequired,bgD:l.default.string.isRequired,fgColor:l.default.oneOfType([l.default.object,l.default.string]).isRequired,fgD:l.default.string.isRequired,size:l.default.number.isRequired,title:l.default.string,viewBoxSize:l.default.number.isRequired,xmlns:l.default.string},_=(0,d.forwardRef)(function(v,N){var I=v.bgColor,B=v.bgD,L=v.fgD,U=v.fgColor,z=v.size,Y=v.title,ee=v.viewBoxSize,ie=v.xmlns,K=ie===void 0?"http://www.w3.org/2000/svg":ie,ce=E(v,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return p.default.createElement("svg",o({},ce,{height:z,ref:N,viewBox:"0 0 "+ee+" "+ee,width:z,xmlns:K}),Y?p.default.createElement("title",null,Y):null,p.default.createElement("path",{d:B,fill:I}),p.default.createElement("path",{d:L,fill:U}))});return _.displayName="QRCodeSvg",_.propTypes=S,Fc.default=_,Fc}var t2;function Wv(){if(t2)return Xs;t2=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.QRCode=void 0;var o=Object.assign||function(z){for(var Y=1;Y<arguments.length;Y++){var ee=arguments[Y];for(var ie in ee)Object.prototype.hasOwnProperty.call(ee,ie)&&(z[ie]=ee[ie])}return z},r=z2(),l=I(r),d=P2(),p=I(d),g=Yv(),E=I(g),S=uo(),_=I(S),v=Xv(),N=I(v);function I(z){return z&&z.__esModule?z:{default:z}}function B(z,Y){var ee={};for(var ie in z)Y.indexOf(ie)>=0||Object.prototype.hasOwnProperty.call(z,ie)&&(ee[ie]=z[ie]);return ee}var L={bgColor:l.default.oneOfType([l.default.object,l.default.string]),fgColor:l.default.oneOfType([l.default.object,l.default.string]),level:l.default.string,size:l.default.number,value:l.default.string.isRequired},U=(0,S.forwardRef)(function(z,Y){var ee=z.bgColor,ie=ee===void 0?"#FFFFFF":ee,K=z.fgColor,ce=K===void 0?"#000000":K,Ie=z.level,be=Ie===void 0?"L":Ie,W=z.size,he=W===void 0?256:W,oe=z.value,wt=B(z,["bgColor","fgColor","level","size","value"]),Ke=new E.default(-1,p.default[be]);Ke.addData(oe),Ke.make();var _e=Ke.modules;return _.default.createElement(N.default,o({},wt,{bgColor:ie,bgD:_e.map(function(ve,Ne){return ve.map(function(J,te){return J?"":"M "+te+" "+Ne+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ce,fgD:_e.map(function(ve,Ne){return ve.map(function(J,te){return J?"M "+te+" "+Ne+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:Y,size:he,viewBoxSize:_e.length}))});return Xs.QRCode=U,U.displayName="QRCode",U.propTypes=L,Xs.default=U,Xs}var Kv=Wv();const Zv=lp(Kv);function Qv({stats:o}){const r=(E,S,_,v)=>E>=v?"gold":E>=_?"silver":E>=S?"bronze":"locked",l=r(o.total,1,3,10),d=r(o.verses,1,5,10),p=r(o.streak,2,4,8),g=[{id:"attendance",title:l==="bronze"?"First Step":l==="silver"?"Regular":"Rising Star",desc:l==="gold"?"10+ Visits":"Attendance",icon:b.jsx(O2,{size:24,fill:l==="gold"?"#F59E0B":"currentColor",color:l==="gold"?"#D97706":l==="silver"?"#64748B":"#92400E"}),rank:l},{id:"verses",title:d==="bronze"?"Student":d==="silver"?"Scholar":"Bible Champ",desc:d==="gold"?"10 Verses":"Bible Verse",icon:b.jsx(lw,{size:24,fill:d==="gold"?"#F59E0B":"currentColor",color:d==="gold"?"#D97706":d==="silver"?"#64748B":"#92400E"}),rank:d},{id:"streak",title:p==="bronze"?"Warming Up":p==="silver"?"On Fire":"Unstoppable",desc:p==="gold"?"8 Weeks!":"Streak",icon:b.jsx(bw,{size:24,fill:p==="gold"?"#EF4444":"currentColor",color:p==="gold"?"#B91C1C":p==="silver"?"#64748B":"#92400E"}),rank:p}];return b.jsxs("div",{style:{padding:"0 20px 20px"},children:[b.jsxs("h3",{className:"section-header",style:{marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[b.jsx(R2,{size:18,color:"#D97706"})," Achievements"]}),b.jsx("div",{className:"trophy-grid",children:g.map((E,S)=>b.jsxs("div",{className:`trophy-card ${E.rank!=="locked"?"unlocked":""} rank-${E.rank}`,children:[b.jsx("span",{className:"trophy-icon",children:E.icon}),b.jsx("div",{className:"trophy-title",children:E.title}),b.jsx("div",{className:"trophy-desc",children:E.desc})]},S))})]})}function Jv({student:o,onBack:r}){const[l,d]=ue.useState([]),[p,g]=ue.useState({total:0,verses:0,streak:0}),[E,S]=ue.useState(!0);ue.useEffect(()=>{if(o.isDemo){S(!1),g(o.demoStats),d(o.demoHistory);return}_()},[o]);async function _(){try{S(!0);const{data:U,error:z}=await Ge.from("attendance").select("*").eq("student_id",o.id).eq("status","PRESENT").order("date",{ascending:!1});if(z)throw z;d(U);const Y=U.length,ee=U.filter(K=>K.memory_verse).length;let ie=0;U.length>0&&(ie=Math.min(Y,U.length)),g({total:Y,verses:ee,streak:ie})}catch(U){console.error(U)}finally{S(!1)}}const N=(()=>{const U=new Date,z=U.getFullYear(),Y=String(U.getMonth()+1).padStart(2,"0"),ee=String(U.getDate()).padStart(2,"0");return`${z}-${Y}-${ee}`})(),I=l.some(U=>U.date===N)||o.isDemo&&o.demoHistory.some(U=>U.date===N),[B,L]=ue.useState(!1);return b.jsxs("div",{className:"page slide-in",style:{padding:0,background:"#F9FAFB"},children:[B&&b.jsx("div",{className:"modal-overlay fade-in",onClick:()=>L(!1),children:b.jsxs("div",{className:"modal-content",style:{textAlign:"center"},onClick:U=>U.stopPropagation(),children:[b.jsx("h3",{children:"Student QR Code"}),b.jsx("p",{style:{marginBottom:"16px",color:"#6B7280"},children:"Scan to mark present"}),b.jsx("div",{style:{background:"#fff",padding:"16px",border:"2px solid #E5E7EB",borderRadius:"12px",display:"inline-block"},children:b.jsx(Zv,{value:o.id,size:200})}),b.jsx("h4",{style:{marginTop:"16px"},children:o.full_name}),b.jsx("br",{}),b.jsx("button",{className:"btn full-width",onClick:()=>L(!1),style:{marginTop:"16px"},children:"Close"})]})}),b.jsxs("div",{className:"profile-header",children:[b.jsx("button",{onClick:r,className:"back-btn",style:{position:"absolute",top:"20px",left:"20px"},children:b.jsx(In,{size:24})}),b.jsx("button",{onClick:()=>L(!0),style:{position:"absolute",top:"20px",right:"20px",background:"var(--primary)",border:"none",color:"#fff",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(79, 70, 229, 0.4)"},children:b.jsx(I2,{size:20})}),b.jsx("div",{className:`big-avatar ${I?"pulsing-border":""}`,style:I?{border:"4px solid #10B981",color:"#10B981",background:"#ECFDF5",borderRadius:"50%",overflow:"hidden"}:{borderRadius:"50%",overflow:"hidden"},children:o.avatar_url?b.jsx("img",{src:o.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):o.nickname?o.nickname[0]:o.full_name[0]}),b.jsx("h2",{className:"profile-name",children:o.full_name}),b.jsxs("div",{className:"profile-meta",children:[b.jsx("span",{children:o.grade_level||"No Grade"}),"  ",b.jsx("span",{children:o.gender||"Student"}),o.nickname&&b.jsxs("span",{children:[' "',o.nickname,'"']})]})]}),b.jsxs("div",{className:"stats-row",children:[b.jsxs("div",{className:"stat-card",children:[b.jsx("span",{className:"stat-val",children:p.total}),b.jsx("span",{className:"stat-label",children:"Attended"})]}),b.jsxs("div",{className:"stat-card",children:[b.jsx("span",{className:"stat-val",style:{color:"#D97706"},children:p.verses}),b.jsx("span",{className:"stat-label",children:"Verses"})]}),b.jsxs("div",{className:"stat-card",children:[b.jsx("span",{className:"stat-val",style:{color:"#EC4899"},children:p.streak}),b.jsx("span",{className:"stat-label",children:"Streak"})]})]}),b.jsx(Qv,{stats:p}),b.jsxs("div",{style:{padding:"0 20px 20px"},children:[b.jsx("h3",{className:"section-header",style:{marginBottom:"16px"},children:"Attendance History"}),E?b.jsx("div",{className:"empty-state",children:"Loading..."}):l.length===0?b.jsx("div",{className:"empty-state",children:"No attendance recorded."}):b.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map((U,z)=>b.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[b.jsx("div",{style:{background:"#EEF2FF",padding:"8px",borderRadius:"10px",color:"var(--primary)"},children:b.jsx(uw,{size:20})}),b.jsxs("div",{children:[b.jsx("div",{style:{fontWeight:"700",fontSize:"15px",color:"#1F2937"},children:new Date(U.date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}),U.remarks&&b.jsxs("div",{style:{fontSize:"13px",color:"#6B7280",marginTop:"2px"},children:['"',U.remarks,'"']})]})]}),U.memory_verse&&b.jsxs("div",{style:{background:"#FEF3C7",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",color:"#D97706",display:"flex",alignItems:"center",gap:"4px"},children:[b.jsx(co,{size:14})," Verse"]})]},U.id||z))})]})]})}function $v({onBack:o}){const[r,l]=ue.useState("list"),[d,p]=ue.useState(null),[g,E]=ue.useState([]),[S,_]=ue.useState(!0),[v,N]=ue.useState(""),[I,B]=ue.useState("alpha"),L={id:"demo-zion",full_name:"Zion Lion",nickname:"Zion",grade_level:"Grade 3",gender:"Male",isDemo:!0,demoStats:{total:15,verses:12,streak:5},demoHistory:[{date:(()=>{const ce=new Date,Ie=ce.getFullYear(),be=String(ce.getMonth()+1).padStart(2,"0"),W=String(ce.getDate()).padStart(2,"0");return`${Ie}-${be}-${W}`})(),memory_verse:!0,remarks:"Present today!"},{date:"2023-10-27",memory_verse:!0,remarks:"Led the prayer"},{date:"2023-10-20",memory_verse:!0,remarks:""},{date:"2023-10-13",memory_verse:!1,remarks:"Brought a friend"}]},[U,z]=ue.useState(new Set);ue.useEffect(()=>{Y(),ee()},[]);async function Y(){try{const{data:ce}=await Ge.from("students").select("*").order("full_name");E(ce)}catch{}finally{_(!1)}}async function ee(){try{const Ie=(()=>{const W=new Date,he=W.getFullYear(),oe=String(W.getMonth()+1).padStart(2,"0"),wt=String(W.getDate()).padStart(2,"0");return`${he}-${oe}-${wt}`})(),{data:be}=await Ge.from("attendance").select("student_id").eq("date",Ie).eq("status","PRESENT");be&&z(new Set(be.map(W=>W.student_id)))}catch(ce){console.error(ce)}}const K=[...g.filter(ce=>ce.full_name.toLowerCase().includes(v.toLowerCase()))].sort((ce,Ie)=>{if(I==="present"){const be=U.has(ce.id),W=U.has(Ie.id);if(be&&!W)return-1;if(!be&&W)return 1}return ce.full_name.localeCompare(Ie.full_name)});return r==="profile"&&d?b.jsx(Jv,{student:d,onBack:()=>{l("list"),p(null)}}):b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"Select Student"})]}),b.jsxs("button",{onClick:()=>B(ce=>ce==="alpha"?"present":"alpha"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"8px",border:"1px solid #E5E7EB",background:I==="present"?"#ECFDF5":"#fff",color:I==="present"?"#059669":"#374151",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:[b.jsx(S2,{size:16}),I==="present"?"Present First":"A-Z"]})]}),b.jsxs("div",{className:"search-bar",children:[b.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:v,onChange:ce=>N(ce.target.value)}),b.jsx(go,{size:20,className:"search-icon"})]}),b.jsxs("div",{className:"student-list",children:[b.jsxs("div",{className:"card student-card",onClick:()=>{p(L),l("profile")},style:{border:"2px dashed #D97706",background:"#FFFBEB"},children:[b.jsxs("div",{className:"student-info",children:[b.jsxs("h3",{children:[L.full_name," ",b.jsx("span",{className:"badge",style:{background:"#FCD34D",color:"#92400E"},children:"DEMO"})]}),b.jsx("span",{children:"Present Today!"})]}),b.jsx(O2,{size:20,fill:"#10B981",color:"#10B981"})]}),S?b.jsx("div",{className:"empty-state",children:"Loading..."}):K.map(ce=>{const Ie=U.has(ce.id);return b.jsxs("div",{className:"card student-card",onClick:()=>{p(ce),l("profile")},style:Ie?{borderLeft:"3px solid #10B981"}:{},children:[b.jsxs("div",{className:"student-info",children:[b.jsx("h3",{children:ce.full_name}),b.jsx("span",{style:Ie?{color:"#10B981",fontWeight:"bold"}:{},children:Ie?"Present":ce.nickname||"View Profile"})]}),b.jsx("div",{style:{color:Ie?"#10B981":"var(--border-color)"},children:b.jsx(Qc,{size:20,fill:Ie?"#ECFDF5":"none"})})]},ce.id)})]})]})}function eb({date:o,onBack:r}){const[l,d]=ue.useState([]),[p,g]=ue.useState(!0);ue.useEffect(()=>{E()},[o]);async function E(){try{g(!0);const{data:_,error:v}=await Ge.from("attendance").select("status, students (full_name, grade_level)").eq("date",o).eq("status","PRESENT");if(v)throw v;d(_)}catch(_){console.error(_)}finally{g(!1)}}const S=_=>new Date(_).toLocaleDateString(void 0,{dateStyle:"full"});return b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",children:[b.jsx("button",{onClick:r,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsxs("div",{children:[b.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"Present List"}),b.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:S(o)})]})]}),b.jsx("div",{className:"student-list",children:p?b.jsx("div",{className:"empty-state",children:"Loading..."}):l.length===0?b.jsx("div",{className:"empty-state",children:"No one marked present."}):l.map((_,v)=>b.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[b.jsxs("div",{className:"student-info",children:[b.jsx("h3",{children:_.students.full_name}),b.jsx("span",{children:_.students.grade_level||"No Grade"})]}),b.jsx("div",{className:"check-btn active",style:{width:"24px",height:"24px"},children:b.jsx(fo,{size:16,color:"white"})})]},v))})]})}function tb({onNavigate:o}){const[r,l]=ue.useState("list"),[d,p]=ue.useState(null),[g,E]=ue.useState([]),[S,_]=ue.useState(!0);ue.useEffect(()=>{v()},[]);async function v(){try{_(!0);const{data:I,error:B}=await Ge.from("attendance").select("date, status").eq("status","PRESENT").order("date",{ascending:!1});if(B)throw B;const L={};I.forEach(z=>{L[z.date]||(L[z.date]=0),L[z.date]++});const U=Object.keys(L).map(z=>({date:z,count:L[z]}));E(U)}catch(I){console.error(I)}finally{_(!1)}}const N=I=>{const B={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(I).toLocaleDateString(void 0,B)};return r==="detail"?b.jsx(eb,{date:d,onBack:()=>l("list")}):b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",children:[b.jsx("button",{onClick:()=>o("home"),className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"Reports"})]}),b.jsx("div",{className:"student-list",children:S?b.jsx("div",{className:"empty-state",children:"Loading reports..."}):g.length===0?b.jsx("div",{className:"empty-state",children:"No attendance records found."}):g.map(I=>b.jsxs("div",{className:"card student-card",onClick:()=>{p(I.date),l("detail")},children:[b.jsxs("div",{className:"student-info",children:[b.jsx("h3",{children:N(I.date)}),b.jsxs("span",{children:[I.count," Present"]})]}),b.jsx("div",{style:{color:"var(--primary)"},children:b.jsx(In,{size:20,style:{transform:"rotate(180deg)"}})})]},I.date))})]})}function nb({onBack:o}){return b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"Guidelines"})]}),b.jsxs("div",{style:{padding:"0 8px"},children:[b.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid var(--primary)"},children:[b.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[b.jsx(el,{size:20,color:"var(--primary)"})," New vs Regulars"]}),b.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:[b.jsx("strong",{children:"New Kids:"})," Any child who has visited less than 3 times. They get a special badge so you can welcome them!",b.jsx("br",{}),b.jsx("br",{}),b.jsx("strong",{children:"Regulars:"}),' Once a child visits for the 3rd time, they automatically become a "Regular".']})]}),b.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #D97706"},children:[b.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#D97706"},children:[b.jsx(co,{size:20})," Bible Verse & Notes"]}),b.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["When marking attendance, tap the details:",b.jsx("br",{}),b.jsx("br",{}),b.jsxs("strong",{style:{color:"#D97706"},children:[b.jsx(co,{size:14,style:{display:"inline",marginRight:4}})," Bible Icon:"]})," Click this if the student can recite the Memory Verse for the day.",b.jsx("br",{}),b.jsx("br",{}),b.jsxs("strong",{style:{color:"var(--primary)"},children:[b.jsx(kd,{size:14,style:{display:"inline",marginRight:4}})," Note Icon:"]}),' Use this to add remarks (e.g. "Sick", "Fetched by Lola").']})]}),b.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #10B981"},children:[b.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#10B981"},children:[b.jsx(Id,{size:20})," Smart Check-in"]}),b.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:[b.jsx("strong",{children:"Teachers:"})," Tap the green ",b.jsx("span",{style:{fontWeight:"bold",color:"#10B981"},children:"SCAN"})," button on the Home Page and point at a student's QR.",b.jsx("br",{}),b.jsx("br",{}),b.jsx("strong",{children:"Students:"})," Go to your Profile and tap the ",b.jsx(I2,{size:14,style:{display:"inline",verticalAlign:"middle"}})," icon to see your code."]})]}),b.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #8B5CF6"},children:[b.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#8B5CF6"},children:[b.jsx(S2,{size:20})," List Sorting"]}),b.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["In the Student List, tap the ",b.jsx("strong",{children:"Sort Button"})," (top right) to toggle:",b.jsx("br",{}),"1. ",b.jsx("strong",{children:"Present First"})," (Green checks at top)",b.jsx("br",{}),"2. ",b.jsx("strong",{children:"A-Z"})," (Alphabetical)"]})]}),b.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #F59E0B"},children:[b.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#F59E0B"},children:[b.jsx(R2,{size:20})," Achievements"]}),b.jsxs("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:[b.jsxs("p",{style:{marginBottom:"12px"},children:["Every medal has 3 Levels: ",b.jsx("strong",{children:"Bronze"}),", ",b.jsx("strong",{children:"Silver"}),", and ",b.jsx("strong",{children:"Gold"}),"."]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("strong",{children:" Attendance"}),b.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[b.jsx("li",{children:"1st Visit: First Step"}),b.jsx("li",{children:"3 Visits: Regular"}),b.jsxs("li",{children:["10 Visits: ",b.jsx("strong",{children:"Rising Star"})," (Gold)"]})]})]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("strong",{children:" Bible Verses"}),b.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[b.jsx("li",{children:"1 Verse: Student"}),b.jsx("li",{children:"5 Verses: Scholar"}),b.jsxs("li",{children:["10 Verses: ",b.jsx("strong",{children:"Bible Champ"})," (Gold)"]})]})]}),b.jsxs("div",{style:{marginBottom:"8px"},children:[b.jsx("strong",{children:" Weekly Streak"}),b.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[b.jsx("li",{children:"2 Weeks: Warming Up"}),b.jsx("li",{children:"4 Weeks: On Fire"}),b.jsxs("li",{children:["8 Weeks: ",b.jsx("strong",{children:"Unstoppable"})," (Gold)"]})]})]})]})]}),b.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #DC2626"},children:[b.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#DC2626"},children:[b.jsx(Ud,{size:20})," Follow Up"]}),b.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["The app monitors attendance automatically.",b.jsx("br",{}),b.jsx("br",{}),"If a student is ",b.jsx("strong",{children:"absent for 3 consecutive Sundays"}),' (based on the last 3 recorded dates), they will appear in the "Follow Up" list so you can visit them.']})]})]})]})}function n2({onBack:o,onComplete:r,initialData:l,canDelete:d}){const[p,g]=ue.useState(l?.full_name||""),[E,S]=ue.useState(l?.grade_level||""),[_,v]=ue.useState(l?.parent_name||""),[N,I]=ue.useState(l?.contact_number||""),[B,L]=ue.useState(l?.nickname||""),[U,z]=ue.useState(l?.gender||"Male"),[Y,ee]=ue.useState(l?.birthday||""),[ie,K]=ue.useState(l?.allergies||""),[ce,Ie]=ue.useState(l?.first_visit_date||new Date().toISOString().split("T")[0]),[be,W]=ue.useState(!1),he=!!l,[oe,wt]=ue.useState(l?.avatar_url||""),[Ke,_e]=ue.useState(!1),Ne=(Ce=>{if(!Ce)return"";const Re=new Date(Ce),Le=new Date;let H=Le.getFullYear()-Re.getFullYear();const le=Le.getMonth()-Re.getMonth();return(le<0||le===0&&Le.getDate()<Re.getDate())&&H--,H})(Y),J=async Ce=>{try{_e(!0);const Re=Ce.target.files[0];if(!Re)return;const Le=document.createElement("img"),H=document.createElement("canvas"),le=new FileReader;le.onload=function(Te){Le.onload=function(){let pe=Le.width,Ye=Le.height;pe>Ye?pe>300&&(Ye*=300/pe,pe=300):Ye>300&&(pe*=300/Ye,Ye=300),H.width=pe,H.height=Ye,H.getContext("2d").drawImage(Le,0,0,pe,Ye),H.toBlob(async St=>{const Vn=`${Date.now()}-${Math.floor(Math.random()*1e3)}.jpg`,{data:on,error:En}=await Ge.storage.from("avatars").upload(Vn,St,{contentType:"image/jpeg",upsert:!1});if(En)throw En;const Je=Ge.storage.from("avatars").getPublicUrl(Vn).data.publicUrl;wt(Je),_e(!1)},"image/jpeg",.8)},Le.src=Te.target.result},le.readAsDataURL(Re)}catch(Re){alert("Error uploading: "+Re.message),_e(!1)}},te=async Ce=>{if(Ce.preventDefault(),!p.trim())return;W(!0);const Re={full_name:p,grade_level:E,parent_name:_,contact_number:N,gender:U,nickname:B,birthday:Y||null,allergies:ie||null,first_visit_date:ce,avatar_url:oe};try{if(he){const{error:Le}=await Ge.from("students").update(Re).eq("id",l.id);if(Le)throw Le}else{const{error:Le}=await Ge.from("students").insert([Re]);if(Le)throw Le}r()}catch(Le){console.error(Le),alert("Error saving: "+(Le.message||"Unknown error"))}finally{W(!1)}},fe=async()=>{if(confirm("Are you sure you want to delete this student?")){W(!0);try{const{error:Ce}=await Ge.from("students").delete().eq("id",l.id);if(Ce)throw Ce;r()}catch(Ce){alert(Ce.message)}finally{W(!1)}}};return b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:he?"Edit Student":"Register Student"})]}),b.jsxs("form",{onSubmit:te,className:"student-form",children:[b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px"},children:[b.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#F3F4F6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",border:"3px solid #fff",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:oe?b.jsx("img",{src:oe,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):b.jsx(Qc,{size:48,color:"#9CA3AF"})}),b.jsxs("div",{className:"file-upload-btn",children:[b.jsx("label",{htmlFor:"avatar-upload",className:"btn secondary",style:{fontSize:"12px",padding:"6px 12px",cursor:"pointer"},children:Ke?"Compressing...":oe?"Change Photo":"Upload Photo"}),b.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:J,style:{display:"none"},disabled:Ke})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Full Name"}),b.jsx("input",{type:"text",className:"input",placeholder:"e.g. Timothy Santos",value:p,onChange:Ce=>g(Ce.target.value),autoFocus:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Nickname (Optional)"}),b.jsx("input",{type:"text",className:"input",placeholder:"e.g. Tim",value:B,onChange:Ce=>L(Ce.target.value)})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Gender"}),b.jsxs("div",{className:"gender-select",children:[b.jsx("div",{className:`gender-option ${U==="Male"?"selected":""}`,onClick:()=>z("Male"),children:"Male"}),b.jsx("div",{className:`gender-option ${U==="Female"?"selected":""}`,onClick:()=>z("Female"),children:"Female"})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Birthday (Optional)"}),b.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[b.jsx("input",{type:"date",className:"input",value:Y,onChange:Ce=>ee(Ce.target.value),style:{flex:1}}),Ne!==""&&b.jsxs("div",{style:{background:"#EFF6FF",color:"#2563EB",padding:"8px 12px",borderRadius:"8px",fontWeight:"bold",fontSize:"14px",whiteSpace:"nowrap"},children:[Ne," yrs old"]})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"First Day of Visit"}),b.jsx("input",{type:"date",className:"input",value:ce,onChange:Ce=>Ie(Ce.target.value)})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Allergies / Medical Notes"}),b.jsx("textarea",{className:"input",placeholder:"e.g. Peanuts, Asthma, etc.",value:ie,onChange:Ce=>K(Ce.target.value),rows:3,style:{resize:"vertical"}})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Grade Level"}),b.jsx("input",{type:"text",className:"input",placeholder:"e.g. Grade 1",value:E,onChange:Ce=>S(Ce.target.value)})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Parent Name (Optional)"}),b.jsx("input",{type:"text",className:"input",placeholder:"e.g. Mom/Dad Name",value:_,onChange:Ce=>v(Ce.target.value)})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Contact No. (Optional)"}),b.jsx("input",{type:"text",className:"input",placeholder:"0912...",value:N,onChange:Ce=>I(Ce.target.value)})]}),b.jsx("button",{type:"submit",className:"btn full-width",disabled:be,children:be?"Saving...":he?"Update Changes":"Save Student"}),he&&d&&b.jsxs("button",{type:"button",onClick:fe,className:"btn full-width",style:{background:"#FEE2E2",color:"#DC2626",marginTop:"12px"},disabled:be,children:[b.jsx(jd,{size:20,style:{marginRight:"8px"}})," Delete Student"]})]})]})}function ib({onBack:o}){const{permissions:r}=dr(),[l,d]=ue.useState("list"),[p,g]=ue.useState(null),[E,S]=ue.useState([]),[_,v]=ue.useState(!0),[N,I]=ue.useState("");ue.useEffect(()=>{B()},[]);async function B(){try{v(!0);const{data:U,error:z}=await Ge.from("students").select("*").order("full_name");if(z)throw z;S(U)}catch(U){console.error(U)}finally{v(!1)}}const L=E.filter(U=>U.full_name.toLowerCase().includes(N.toLowerCase()));return r.canEditStudents?l==="add"?b.jsx(n2,{onBack:()=>d("list"),onComplete:()=>{d("list"),B()},initialData:null,canDelete:!1}):l==="edit"?b.jsx(n2,{onBack:()=>d("list"),onComplete:()=>{d("list"),B()},initialData:p,canDelete:r.canDeleteStudents}):b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"Manage Students"})]}),b.jsxs("button",{onClick:()=>d("add"),className:"btn",style:{padding:"8px 12px",fontSize:"14px"},children:[b.jsx(Ld,{size:18,style:{marginRight:"4px"}})," Add"]})]}),b.jsxs("div",{className:"search-bar",children:[b.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:N,onChange:U=>I(U.target.value)}),b.jsx(go,{size:20,className:"search-icon"})]}),b.jsx("div",{className:"student-list",children:_?b.jsx("div",{className:"empty-state",children:"Loading..."}):L.length===0?b.jsx("div",{className:"empty-state",children:"No students found."}):L.map(U=>b.jsxs("div",{className:"card student-card",onClick:()=>{g(U),d("edit")},children:[b.jsxs("div",{className:"student-info",children:[b.jsxs("h3",{children:[U.full_name," ",U.nickname&&b.jsxs("span",{style:{color:"var(--primary)",fontWeight:"normal"},children:['"',U.nickname,'"']})]}),b.jsx("span",{children:U.grade_level||"No Grade"})]}),b.jsx("div",{style:{color:"var(--primary)"},children:b.jsx(N2,{size:20})})]},U.id))})]}):b.jsxs("div",{className:"page slide-in",children:[b.jsx("header",{className:"page-header",children:b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})})}),b.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:[b.jsx("h3",{children:"Access Denied"}),b.jsx("p",{children:"Client Access Only. Please see an Admin."})]})]})}function i2({onBack:o,initialTab:r="KIDS",lockedTab:l=null}){const{user:d}=dr(),[p,g]=ue.useState([]),[E,S]=ue.useState(!0),[_,v]=ue.useState(null),[N,I]=ue.useState(l||r),[B,L]=ue.useState(!1),[U,z]=ue.useState(""),[Y,ee]=ue.useState(""),[ie,K]=ue.useState((l||r)==="USHERS"?"USHER":"TEACHER"),[ce,Ie]=ue.useState("");ue.useEffect(()=>{K(N==="USHERS"?"USHER":"TEACHER")},[N]),ue.useEffect(()=>{I(l||r)},[r,l]),ue.useEffect(()=>{be()},[]);async function be(){try{S(!0);const{data:ve,error:Ne}=await Ge.from("app_users").select("*").order("created_at");if(Ne)throw Ne;g(ve)}catch(ve){v(ve.message)}finally{S(!1)}}const W=async ve=>{if(ve.preventDefault(),!(!U||!Y||!ce)){if(Y.length<4){alert("PIN must be at least 4 digits");return}try{const{error:Ne}=await Ge.from("app_users").insert([{full_name:U,username:ce,pin:Y,role:ie}]);if(Ne)throw Ne;L(!1),z(""),ee(""),Ie(""),be()}catch(Ne){alert(Ne.message)}}},he=async ve=>{if(confirm("Are you sure you want to delete this user?"))try{if(ve===d.id){alert("You cannot delete yourself!");return}const{error:Ne}=await Ge.from("app_users").delete().eq("id",ve);if(Ne)throw Ne;be()}catch(Ne){alert(Ne.message)}};if(!(d?.role==="SUPER_ADMIN"||d?.role==="ADMIN"||d?.role==="USHER_ADMIN"))return b.jsxs("div",{className:"page slide-in",children:[b.jsx("header",{className:"page-header",children:b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})})}),b.jsxs("div",{className:"empty-state",children:[b.jsx(mo,{size:48,color:"#DC2626"}),b.jsx("h3",{children:"Access Denied"}),b.jsx("p",{children:"Only Admins can manage users."})]})]});const wt=p.filter(ve=>{let Ne=!1;return N==="KIDS"?Ne=["ADMIN","TEACHER","ASSISTANT_TEACHER","SUPER_ADMIN"].includes(ve.role):N==="USHERS"&&(Ne=["USHER_ADMIN","USHER","SUPER_ADMIN"].includes(ve.role)),d.role==="SUPER_ADMIN"?Ne:d.role==="ADMIN"?Ne&&ve.role!=="SUPER_ADMIN":d.role==="USHER_ADMIN"?Ne&&(ve.role==="USHER"||ve.id===d.id):!1}),Ke=async ve=>{const Ne=prompt("Enter new 4-6 digit PIN for this user:");if(Ne){if(Ne.length<4){alert("PIN must be at least 4 digits");return}try{const{error:J}=await Ge.from("app_users").update({pin:Ne}).eq("id",ve);if(J)throw J;alert("PIN updated successfully."),be()}catch(J){alert(J.message)}}},_e=()=>l==="USHERS"||N==="USHERS"?b.jsxs(b.Fragment,{children:[b.jsx("option",{value:"USHER",children:"Usher (Service Attendance)"}),b.jsx("option",{value:"USHER_ADMIN",children:"Usher Admin (Manage Ushers)"})]}):b.jsxs(b.Fragment,{children:[b.jsx("option",{value:"TEACHER",children:"Teacher (Kids)"}),b.jsx("option",{value:"ASSISTANT_TEACHER",children:"Assistant (Kids)"}),(d.role==="SUPER_ADMIN"||d.role==="ADMIN")&&b.jsx("option",{value:"ADMIN",children:"Admin (Kids Manager)"})]});return b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"Manage Users"})]}),b.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.role==="SUPER_ADMIN"&&b.jsxs("button",{onClick:()=>onNavigate("login-history"),className:"btn secondary",style:{padding:"8px 12px",fontSize:"14px",display:"flex",alignItems:"center",gap:"4px"},children:[b.jsx(C2,{size:18})," Login Logs"]}),!B&&b.jsxs("button",{onClick:()=>L(!0),className:"btn",style:{padding:"8px 12px",fontSize:"14px"},children:[b.jsx(Ld,{size:18,style:{marginRight:"4px"}})," Add User"]})]})]}),!l&&b.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"1px solid #E5E7EB"},children:[b.jsx("button",{onClick:()=>{I("KIDS"),K("TEACHER")},style:{padding:"10px 20px",border:"none",background:"none",cursor:"pointer",borderBottom:N==="KIDS"?"2px solid var(--primary)":"none",fontWeight:N==="KIDS"?"bold":"normal",color:N==="KIDS"?"var(--primary)":"#6B7280"},children:"Kids Ministry"}),b.jsx("button",{onClick:()=>{I("USHERS"),K("USHER")},style:{padding:"10px 20px",border:"none",background:"none",cursor:"pointer",borderBottom:N==="USHERS"?"2px solid var(--primary)":"none",fontWeight:N==="USHERS"?"bold":"normal",color:N==="USHERS"?"var(--primary)":"#6B7280"},children:"Ushering Team"})]}),B&&b.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"24px",border:"2px solid var(--primary)"},children:[b.jsx("h3",{style:{marginBottom:"16px"},children:"Add New Staff"}),b.jsxs("form",{onSubmit:W,children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Full Name"}),b.jsx("input",{type:"text",className:"input",placeholder:"e.g. John Doe",value:U,onChange:ve=>z(ve.target.value),required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Username (Unique ID)"}),b.jsx("input",{type:"text",className:"input",placeholder:"e.g. john",value:ce,onChange:ve=>Ie(ve.target.value),required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"PIN Code"}),b.jsx("input",{type:"tel",className:"input",placeholder:"e.g. 1234",value:Y,onChange:ve=>ee(ve.target.value),maxLength:6,required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Role"}),b.jsx("select",{className:"input",value:ie,onChange:ve=>K(ve.target.value),children:_e()})]}),b.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[b.jsx("button",{type:"button",className:"btn secondary",onClick:()=>L(!1),style:{flex:1},children:"Cancel"}),b.jsx("button",{type:"submit",className:"btn",style:{flex:1},children:"Create User"})]})]})]}),b.jsx("div",{className:"student-list",children:E?b.jsx("div",{className:"empty-state",children:"Loading..."}):wt.map(ve=>b.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[b.jsxs("div",{className:"student-info",children:[b.jsxs("h3",{children:[ve.full_name," ",b.jsxs("span",{style:{fontSize:"12px",color:"#666",fontWeight:"normal"},children:["(",ve.username,")"]})]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[b.jsx("span",{className:`badge ${ve.role==="ADMIN"||ve.role==="USHER_ADMIN"?"visit-3":"visit-1"}`,style:{fontSize:"10px"},children:ve.role}),b.jsxs("span",{style:{fontSize:"12px",color:"#9CA3AF"},children:["PIN: ",ve.pin]})]})]}),ve.username!=="admin"&&ve.id!==d.id&&b.jsxs("div",{style:{display:"flex",gap:"8px"},children:[(d.role==="SUPER_ADMIN"||d.role==="ADMIN"&&ve.role!=="SUPER_ADMIN")&&b.jsx("button",{onClick:()=>Ke(ve.id),style:{background:"none",border:"none",color:"#F59E0B",cursor:"pointer"},title:"Reset PIN",children:b.jsx(Nw,{size:20})}),b.jsx("button",{onClick:()=>he(ve.id),style:{background:"none",border:"none",color:"#DC2626",cursor:"pointer"},children:b.jsx(jd,{size:20})})]})]},ve.id))})]})}function r2({onNavigate:o}){const{user:r,logout:l}=dr();return b.jsxs("div",{className:"page fade-in",children:[b.jsxs("header",{className:"home-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px",borderBottom:"1px solid #E5E7EB",marginBottom:"24px"},children:[b.jsxs("div",{children:[r?.role==="SUPER_ADMIN"&&b.jsx("button",{onClick:()=>o("super-admin-dashboard"),style:{background:"none",border:"none",color:"#6B7280",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px",fontSize:"14px",fontWeight:"bold"},children:" Back to Hub"}),b.jsx("h1",{style:{fontSize:"24px",color:"#111827"},children:"Usher Team"}),b.jsxs("p",{style:{fontSize:"14px",color:"#6B7280"},children:[r?.full_name," (",r?.role,")"]})]}),b.jsxs("button",{onClick:l,style:{background:"none",border:"none",color:"#EF4444",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",fontSize:"10px"},title:"Logout",children:[b.jsx(Bd,{size:24}),b.jsx("span",{children:"Logout"})]})]}),b.jsxs("div",{className:"menu-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px"},children:[b.jsxs("button",{className:"menu-card primary",onClick:()=>o("service-attendance"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[b.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#059669",marginBottom:"8px"},children:b.jsx(el,{size:40})}),b.jsxs("div",{children:[b.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Service Attendance"}),b.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Check-in Members"})]})]}),b.jsxs("button",{className:"menu-card",onClick:()=>o("member-manager"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[b.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#C2410C",marginBottom:"8px"},children:b.jsx(Md,{size:40})}),b.jsxs("div",{children:[b.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Member Directory"}),b.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Add or Edit Profiles"})]})]}),b.jsxs("button",{className:"menu-card",onClick:()=>o("member-reports"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[b.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#7C3AED",marginBottom:"8px"},children:b.jsx(_2,{size:40})}),b.jsxs("div",{children:[b.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Reports & Export"}),b.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"View History"})]})]}),r?.role==="USHER_ADMIN"&&b.jsxs("button",{className:"menu-card",onClick:()=>o("usher-team"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[b.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#2563EB",marginBottom:"8px"},children:b.jsx(mo,{size:40})}),b.jsxs("div",{children:[b.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Manage Ushers"}),b.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Admin Controls"})]})]})]})]})}function rb({onBack:o}){const[r,l]=ue.useState(""),[d,p]=ue.useState([]),[g,E]=ue.useState(!0),[S,_]=ue.useState(()=>{const z=new Date,Y=z.getFullYear(),ee=String(z.getMonth()+1).padStart(2,"0"),ie=String(z.getDate()).padStart(2,"0");return`${Y}-${ee}-${ie}`}),[v,N]=ue.useState(!0);ue.useEffect(()=>{I()},[S]);async function I(){try{E(!0);const{data:z,error:Y}=await Ge.from("members").select("*").order("full_name");if(Y)throw Y;const{data:ee,error:ie}=await Ge.from("member_attendance").select("member_id, status").eq("date",S).eq("service_type","MORNING_SERVICE").eq("status","PRESENT");if(ie)throw ie;const K=new Set(ee.map(Ie=>Ie.member_id)),ce=z.map(Ie=>({...Ie,present:K.has(Ie.id)}));p(ce)}catch(z){console.error(z)}finally{E(!1)}}const B=async z=>{const Y=!z.present;p(ee=>ee.map(ie=>ie.id===z.id?{...ie,present:Y}:ie));try{Y?await Ge.from("member_attendance").insert({member_id:z.id,date:S,service_type:"MORNING_SERVICE",status:"PRESENT"}):await Ge.from("member_attendance").delete().eq("member_id",z.id).eq("date",S).eq("service_type","MORNING_SERVICE")}catch(ee){console.error(ee),p(ie=>ie.map(K=>K.id===z.id?{...K,present:!Y}:K)),alert("Error updating attendance")}},L=d.filter(z=>z.full_name.toLowerCase().includes(r.toLowerCase())),U=d.filter(z=>z.present).length;return b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",style:{flexDirection:"column",alignItems:"stretch",gap:"16px"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"Attendance"})]}),b.jsxs("div",{style:{background:"#ECFDF5",color:"#059669",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"6px"},children:[b.jsx(el,{size:16})," ",U," Present"]})]}),b.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"0 0"},children:b.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:v?"transparent":"#fff",borderRadius:"8px",padding:"4px"},children:v?b.jsxs("h3",{style:{margin:0,fontSize:"18px",display:"flex",alignItems:"center",gap:"8px"},children:[new Date(S).toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric",year:"numeric"}),b.jsx("button",{onClick:()=>N(!1),style:{background:"none",border:"none",cursor:"pointer",color:"#6B7280"},children:b.jsx(Nd,{size:16})})]}):b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"date",className:"input",value:S,onChange:z=>_(z.target.value),autoFocus:!0}),b.jsx("button",{onClick:()=>N(!0),className:"btn primary",style:{padding:"8px"},children:b.jsx(T2,{size:18})})]})})})]}),b.jsxs("div",{className:"search-bar",children:[b.jsx("input",{type:"text",placeholder:"Search member...",className:"input search-input",value:r,onChange:z=>l(z.target.value)}),b.jsx(go,{size:20,className:"search-icon"})]}),b.jsx("div",{className:"student-list",children:g?b.jsx("p",{children:"Loading..."}):L.length===0?b.jsx("p",{className:"empty-state",children:"No members found."}):L.map(z=>b.jsxs("div",{className:"student-card",children:[b.jsx("div",{className:"student-info",children:b.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[z.full_name,b.jsx("span",{className:`badge ${z.age_group==="YOUTH"?"visit-2":z.age_group==="SENIOR"?"visit-3":"visit-1"}`,style:{fontSize:"10px",marginTop:0},children:z.age_group})]})}),b.jsx("div",{className:`check-btn ${z.present?"active":""}`,onClick:()=>B(z),style:{cursor:"pointer"},children:b.jsx(fo,{size:24,fill:z.present?"white":"none",color:z.present?"white":"var(--border-color)"})})]},z.id))})]})}function ab({onBack:o}){const{user:r}=dr(),[l,d]=ue.useState([]),[p,g]=ue.useState(!0),[E,S]=ue.useState(null);ue.useEffect(()=>{_()},[]);async function _(){try{g(!0),S(null);const{data:v,error:N}=await Ge.from("login_logs").select("*").order("login_at",{ascending:!1}).limit(100);if(N)throw N;d(v)}catch(v){console.error(v),S(v.message),d([])}finally{g(!1)}}return r?.role!=="SUPER_ADMIN"?b.jsxs("div",{className:"page slide-in",children:[b.jsx("header",{className:"page-header",children:b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})})}),b.jsxs("div",{className:"empty-state",children:[b.jsx(mo,{size:48,color:"#DC2626"}),b.jsx("h3",{children:"Access Denied"}),b.jsx("p",{children:"Only the Super Admin can view login logs."})]})]}):b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"System Login History"})]}),b.jsxs("div",{className:"student-list",style:{marginTop:"20px"},children:[E&&b.jsxs("div",{style:{padding:"16px",background:"#FEF2F2",border:"1px solid #FCA5A5",color:"#B91C1C",borderRadius:"8px",marginBottom:"16px"},children:[b.jsx("strong",{children:"Error loading logs:"}),b.jsx("br",{}),E]}),p?b.jsx("div",{className:"empty-state",children:"Loading logs..."}):l.length===0&&!E?b.jsx("div",{className:"empty-state",children:"No logins recorded yet."}):l.map(v=>b.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("div",{children:[b.jsx("h3",{style:{margin:0,fontSize:"16px",color:"#111827"},children:v.full_name}),b.jsx("span",{className:`badge ${v.role==="SUPER_ADMIN"?"visit-3":v.role==="ADMIN"?"visit-2":"visit-1"}`,style:{fontSize:"10px",marginTop:"4px"},children:v.role})]}),b.jsxs("div",{style:{textAlign:"right",fontSize:"12px",color:"#6B7280"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"4px",marginBottom:"4px"},children:[b.jsx(yw,{size:14}),new Date(v.login_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),b.jsx("div",{children:new Date(v.login_at).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]})]},v.id))]})]})}function a2({onBack:o,onComplete:r,initialData:l,canDelete:d}){const[p,g]=ue.useState(l?.full_name||""),[E,S]=ue.useState(l?.nickname||""),[_,v]=ue.useState(l?.gender||"Male"),[N,I]=ue.useState(l?.birthday||""),[B,L]=ue.useState(l?.civil_status||"Single"),[U,z]=ue.useState(l?.contact_number||""),[Y,ee]=ue.useState(l?.address||""),[ie,K]=ue.useState(l?.ministry||""),[ce,Ie]=ue.useState([]),[be,W]=ue.useState(l?.allergies||""),[he,oe]=ue.useState(l?.first_visit_date||new Date().toISOString().split("T")[0]),[wt,Ke]=ue.useState(!1),_e=!!l,[ve,Ne]=ue.useState(l?.avatar_url||""),[J,te]=ue.useState(!1),Ce=(ge=>{if(!ge)return"";const ke=new Date(ge),pe=new Date;let Ye=pe.getFullYear()-ke.getFullYear();const tt=pe.getMonth()-ke.getMonth();return(tt<0||tt===0&&pe.getDate()<ke.getDate())&&Ye--,Ye})(N);ue.useEffect(()=>{Re()},[]);async function Re(){const{data:ge}=await Ge.from("ministries").select("name").order("name");ge&&Ie(ge.map(ke=>ke.name))}const Le=async()=>{const ge=prompt("Enter new Ministry Name:");if(!ge)return;const{error:ke}=await Ge.from("ministries").insert({name:ge});ke?alert("Error adding ministry: "+ke.message):(Re(),K(ge))},H=async ge=>{try{te(!0);const ke=ge.target.files[0];if(!ke)return;const pe=document.createElement("img"),Ye=document.createElement("canvas"),tt=new FileReader;tt.onload=function(St){pe.onload=function(){let En=pe.width,Je=pe.height;En>Je?En>300&&(Je*=300/En,En=300):Je>300&&(En*=300/Je,Je=300),Ye.width=En,Ye.height=Je,Ye.getContext("2d").drawImage(pe,0,0,En,Je),Ye.toBlob(async Fn=>{const Ci=`member-${Date.now()}-${Math.floor(Math.random()*1e3)}.jpg`,{data:gn,error:vt}=await Ge.storage.from("avatars").upload(Ci,Fn,{contentType:"image/jpeg",upsert:!1});if(vt)throw vt;const st=Ge.storage.from("avatars").getPublicUrl(Ci).data.publicUrl;Ne(st),te(!1)},"image/jpeg",.8)},pe.src=St.target.result},tt.readAsDataURL(ke)}catch(ke){alert("Error uploading: "+ke.message),te(!1)}},le=async ge=>{if(ge.preventDefault(),!p.trim())return;Ke(!0);const ke={full_name:p,nickname:E,gender:_,birthday:N||null,civil_status:B,contact_number:U,address:Y,ministry:ie,allergies:be||null,first_visit_date:he,avatar_url:ve};try{if(_e){const{error:pe}=await Ge.from("members").update(ke).eq("id",l.id);if(pe)throw pe}else{const{error:pe}=await Ge.from("members").insert([ke]);if(pe)throw pe}r()}catch(pe){console.error(pe),alert("Error saving: "+(pe.message||"Unknown error"))}finally{Ke(!1)}},Te=async()=>{if(confirm("Are you sure you want to delete this member?")){Ke(!0);try{const{error:ge}=await Ge.from("members").delete().eq("id",l.id);if(ge)throw ge;r()}catch(ge){alert(ge.message)}finally{Ke(!1)}}};return b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:_e?"Edit Member":"Register Member"})]}),b.jsxs("form",{onSubmit:le,className:"student-form",children:[b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px"},children:[b.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#F3F4F6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",border:"3px solid #fff",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:ve?b.jsx("img",{src:ve,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):b.jsx(Qc,{size:48,color:"#9CA3AF"})}),b.jsxs("div",{className:"file-upload-btn",children:[b.jsx("label",{htmlFor:"avatar-upload",className:"btn secondary",style:{fontSize:"12px",padding:"6px 12px",cursor:"pointer"},children:J?"Compressing...":ve?"Change Photo":"Upload Photo"}),b.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:H,style:{display:"none"},disabled:J})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Full Name"}),b.jsx("input",{type:"text",className:"input",placeholder:"e.g. Juan Dela Cruz",value:p,onChange:ge=>g(ge.target.value),autoFocus:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Nickname (Optional)"}),b.jsx("input",{type:"text",className:"input",placeholder:"e.g. Johnny",value:E,onChange:ge=>S(ge.target.value)})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Gender"}),b.jsxs("div",{className:"gender-select",children:[b.jsx("div",{className:`gender-option ${_==="Male"?"selected":""}`,onClick:()=>v("Male"),children:"Male"}),b.jsx("div",{className:`gender-option ${_==="Female"?"selected":""}`,onClick:()=>v("Female"),children:"Female"})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Civil Status"}),b.jsxs("select",{className:"input",value:B,onChange:ge=>L(ge.target.value),children:[b.jsx("option",{value:"Single",children:"Single"}),b.jsx("option",{value:"Married",children:"Married"}),b.jsx("option",{value:"Widowed",children:"Widowed"}),b.jsx("option",{value:"Separated",children:"Separated"})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Birthday (Optional)"}),b.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[b.jsx("input",{type:"date",className:"input",value:N,onChange:ge=>I(ge.target.value),style:{flex:1}}),Ce!==""&&b.jsxs("div",{style:{background:"#EFF6FF",color:"#2563EB",padding:"8px 12px",borderRadius:"8px",fontWeight:"bold",fontSize:"14px",whiteSpace:"nowrap"},children:[Ce," yrs old"]})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Contact Number"}),b.jsx("input",{type:"text",className:"input",placeholder:"0912...",value:U,onChange:ge=>z(ge.target.value)})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Address"}),b.jsx("input",{type:"text",className:"input",placeholder:"Barangay, City...",value:Y,onChange:ge=>ee(ge.target.value)})]}),b.jsxs("div",{className:"form-group",children:[b.jsxs("label",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Ministry / Department",b.jsx("button",{type:"button",onClick:Le,style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"+ Add New"})]}),b.jsxs("select",{className:"input",value:ie,onChange:ge=>K(ge.target.value),children:[b.jsx("option",{value:"",children:"Select Ministry..."}),ce.map(ge=>b.jsx("option",{value:ge,children:ge},ge)),b.jsx("option",{value:"None",children:"None"})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"First Day of Visit"}),b.jsx("input",{type:"date",className:"input",value:he,onChange:ge=>oe(ge.target.value)})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Allergies / Medical Notes"}),b.jsx("textarea",{className:"input",placeholder:"e.g. Hypertension, etc.",value:be,onChange:ge=>W(ge.target.value),rows:3,style:{resize:"vertical"}})]}),b.jsx("button",{type:"submit",className:"btn full-width",disabled:wt,children:wt?"Saving...":_e?"Update Changes":"Save Member"}),_e&&d&&b.jsxs("button",{type:"button",onClick:Te,className:"btn full-width",style:{background:"#FEE2E2",color:"#DC2626",marginTop:"12px"},disabled:wt,children:[b.jsx(jd,{size:20,style:{marginRight:"8px"}})," Delete Member"]})]})]})}function sb({onBack:o}){const{permissions:r}=dr(),[l,d]=ue.useState("list"),[p,g]=ue.useState(null),[E,S]=ue.useState([]),[_,v]=ue.useState(!0),[N,I]=ue.useState("");ue.useEffect(()=>{B()},[]);async function B(){try{v(!0);const{data:U,error:z}=await Ge.from("members").select("*").order("full_name");if(z)throw z;S(U)}catch(U){console.error(U)}finally{v(!1)}}const L=E.filter(U=>U.full_name.toLowerCase().includes(N.toLowerCase()));return r.canEditStudents||r.isUsher,!r.canEditStudents&&r.role,l==="add"?b.jsx(a2,{onBack:()=>d("list"),onComplete:()=>{d("list"),B()},initialData:null,canDelete:!1}):l==="edit"?b.jsx(a2,{onBack:()=>d("list"),onComplete:()=>{d("list"),B()},initialData:p,canDelete:r.canDeleteStudents}):b.jsxs("div",{className:"page slide-in",children:[b.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[b.jsx("button",{onClick:o,className:"back-btn",children:b.jsx(In,{size:24})}),b.jsx("h2",{children:"Congregation"})]}),b.jsxs("button",{onClick:()=>d("add"),className:"btn",style:{padding:"8px 12px",fontSize:"14px"},children:[b.jsx(Ld,{size:18,style:{marginRight:"4px"}})," Add"]})]}),b.jsxs("div",{className:"search-bar",children:[b.jsx("input",{type:"text",placeholder:"Search member...",className:"input search-input",value:N,onChange:U=>I(U.target.value)}),b.jsx(go,{size:20,className:"search-icon"})]}),b.jsx("div",{className:"student-list",children:_?b.jsx("div",{className:"empty-state",children:"Loading..."}):L.length===0?b.jsx("div",{className:"empty-state",children:"No members found."}):L.map(U=>b.jsxs("div",{className:"card student-card",onClick:()=>{g(U),d("edit")},children:[b.jsxs("div",{className:"student-info",children:[b.jsxs("h3",{children:[U.full_name," ",U.nickname&&b.jsxs("span",{style:{color:"var(--primary)",fontWeight:"normal"},children:['"',U.nickname,'"']})]}),b.jsxs("div",{style:{display:"flex",gap:"8px",fontSize:"12px",color:"#666"},children:[U.ministry&&b.jsx("span",{children:U.ministry}),U.ministry&&b.jsx("span",{children:""}),b.jsx("span",{children:U.civil_status})]})]}),b.jsx("div",{style:{color:"var(--primary)"},children:b.jsx(N2,{size:20})})]},U.id))})]})}class lb extends ue.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,l){console.error("Uncaught error:",r,l),(r.toString().includes("user")||r.toString().includes("Auth"))&&localStorage.removeItem("app_user")}render(){return this.state.hasError?b.jsxs("div",{style:{padding:"40px",color:"#DC2626",fontFamily:"system-ui",textAlign:"center"},children:[b.jsx("h1",{children:"Something went wrong."}),b.jsx("p",{style:{background:"#FEE2E2",padding:"10px",borderRadius:"8px",display:"inline-block"},children:this.state.error?.toString()}),b.jsx("br",{}),b.jsx("br",{}),b.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},style:{padding:"12px 24px",background:"#DC2626",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"Reset & Reload App"})]}):this.props.children}}function ob(){const{user:o,loading:r}=dr(),[l,d]=ue.useState(!0),[p,g]=ue.useState("home");ue.useEffect(()=>{},[r]);const E=ue.useCallback(()=>{d(!1)},[]);if(l)return b.jsx(Ky,{onFinish:E});if(!o)return b.jsx(Xw,{});const S=o.role==="USHER"||o.role==="USHER_ADMIN",_=o.role==="SUPER_ADMIN";if(p==="home"){if(_)return b.jsx(Fg,{onNavigate:g});if(S)return b.jsx(r2,{onNavigate:g})}switch(p){case"home":return b.jsx(Pg,{onNavigate:g});case"super-admin-dashboard":return b.jsx(Fg,{onNavigate:g});case"usher-dashboard":return b.jsx(r2,{onNavigate:g});case"attendance":return b.jsx(jv,{onBack:()=>g("home")});case"activity-log":return b.jsx(Uv,{onBack:()=>g("home")});case"follow-up":return b.jsx(zv,{onBack:()=>g("home")});case"student-monitor":return b.jsx($v,{onBack:()=>g("home")});case"reports":return b.jsx(tb,{onNavigate:g});case"info":return b.jsx(nb,{onBack:()=>g("home")});case"student-manager":return b.jsx(ib,{onBack:()=>g("home")});case"user-manager":case"kids-staff":return b.jsx(i2,{onBack:()=>g("home"),initialTab:"KIDS",lockedTab:"KIDS"},"kids-mgr");case"usher-team":return b.jsx(i2,{onBack:()=>g("home"),initialTab:"USHERS",lockedTab:"USHERS"},"usher-mgr");case"login-history":return b.jsx(ab,{onBack:()=>g("user-manager")});case"service-attendance":return b.jsx(rb,{onBack:()=>g("home")});case"member-manager":return b.jsx(sb,{onBack:()=>g("home")});case"member-reports":return b.jsxs("div",{style:{padding:20},children:["Member Reports (Coming Soon) ",b.jsx("button",{onClick:()=>g("home"),children:"Back"})]});default:return b.jsx(Pg,{onNavigate:g})}}function cb(){return b.jsx(lb,{children:b.jsx(Xy,{children:b.jsx(ob,{})})})}xp.createRoot(document.getElementById("root")).render(b.jsx(ue.StrictMode,{children:b.jsx(cb,{})}));

(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const g of p)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function l(p){const g={};return p.integrity&&(g.integrity=p.integrity),p.referrerPolicy&&(g.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?g.credentials="include":p.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function f(p){if(p.ep)return;p.ep=!0;const g=l(p);fetch(p.href,g)}})();var Dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tp(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Yh={exports:{}},Wl={};var z1;function np(){if(z1)return Wl;z1=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function l(f,p,g){var b=null;if(g!==void 0&&(b=""+g),p.key!==void 0&&(b=""+p.key),"key"in p){g={};for(var S in p)S!=="key"&&(g[S]=p[S])}else g=p;return p=g.ref,{$$typeof:o,type:f,key:b,ref:p!==void 0?p:null,props:g}}return Wl.Fragment=r,Wl.jsx=l,Wl.jsxs=l,Wl}var P1;function ip(){return P1||(P1=1,Yh.exports=np()),Yh.exports}var E=ip(),qh={exports:{}},Ke={};var F1;function rp(){if(F1)return Ke;F1=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),b=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),B=Symbol.iterator;function j(H){return H===null||typeof H!="object"?null:(H=B&&H[B]||H["@@iterator"],typeof H=="function"?H:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,q={};function $(H,ne,Se){this.props=H,this.context=ne,this.refs=q,this.updater=Se||U}$.prototype.isReactComponent={},$.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},$.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function se(){}se.prototype=$.prototype;function Q(H,ne,Se){this.props=H,this.context=ne,this.refs=q,this.updater=Se||U}var ue=Q.prototype=new se;ue.constructor=Q,z(ue,$.prototype),ue.isPureReactComponent=!0;var Ne=Array.isArray;function ve(){}var W={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function re(H,ne,Se){var Te=Se.ref;return{$$typeof:o,type:H,key:ne,ref:Te!==void 0?Te:null,props:Se}}function At(H,ne){return re(H.type,ne,H.props)}function We(H){return typeof H=="object"&&H!==null&&H.$$typeof===o}function _e(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Se){return ne[Se]})}var De=/\/+/g;function He(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?_e(""+H.key):ne.toString(36)}function ae(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(ve,ve):(H.status="pending",H.then(function(ne){H.status==="pending"&&(H.status="fulfilled",H.value=ne)},function(ne){H.status==="pending"&&(H.status="rejected",H.reason=ne)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function te(H,ne,Se,Te,Ye){var ye=typeof H;(ye==="undefined"||ye==="boolean")&&(H=null);var Je=!1;if(H===null)Je=!0;else switch(ye){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(H.$$typeof){case o:case r:Je=!0;break;case N:return Je=H._init,te(Je(H._payload),ne,Se,Te,Ye)}}if(Je)return Ye=Ye(H),Je=Te===""?"."+He(H,0):Te,Ne(Ye)?(Se="",Je!=null&&(Se=Je.replace(De,"$&/")+"/"),te(Ye,ne,Se,"",function(Vn){return Vn})):Ye!=null&&(We(Ye)&&(Ye=At(Ye,Se+(Ye.key==null||H&&H.key===Ye.key?"":(""+Ye.key).replace(De,"$&/")+"/")+Je)),ne.push(Ye)),1;Je=0;var $e=Te===""?".":Te+":";if(Ne(H))for(var st=0;st<H.length;st++)Te=H[st],ye=$e+He(Te,st),Je+=te(Te,ne,Se,ye,Ye);else if(st=j(H),typeof st=="function")for(H=st.call(H),st=0;!(Te=H.next()).done;)Te=Te.value,ye=$e+He(Te,st++),Je+=te(Te,ne,Se,ye,Ye);else if(ye==="object"){if(typeof H.then=="function")return te(ae(H),ne,Se,Te,Ye);throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Je}function fe(H,ne,Se){if(H==null)return H;var Te=[],Ye=0;return te(H,Te,"","",function(ye){return ne.call(Se,ye,Ye++)}),Te}function Ce(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(Se){(H._status===0||H._status===-1)&&(H._status=1,H._result=Se)},function(Se){(H._status===0||H._status===-1)&&(H._status=2,H._result=Se)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var Re=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Ee={map:fe,forEach:function(H,ne,Se){fe(H,function(){ne.apply(this,arguments)},Se)},count:function(H){var ne=0;return fe(H,function(){ne++}),ne},toArray:function(H){return fe(H,function(ne){return ne})||[]},only:function(H){if(!We(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ke.Activity=O,Ke.Children=Ee,Ke.Component=$,Ke.Fragment=l,Ke.Profiler=p,Ke.PureComponent=Q,Ke.StrictMode=f,Ke.Suspense=_,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(H){return W.H.useMemoCache(H)}},Ke.cache=function(H){return function(){return H.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(H,ne,Se){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Te=z({},H.props),Ye=H.key;if(ne!=null)for(ye in ne.key!==void 0&&(Ye=""+ne.key),ne)!ee.call(ne,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ne.ref===void 0||(Te[ye]=ne[ye]);var ye=arguments.length-2;if(ye===1)Te.children=Se;else if(1<ye){for(var Je=Array(ye),$e=0;$e<ye;$e++)Je[$e]=arguments[$e+2];Te.children=Je}return re(H.type,Ye,Te)},Ke.createContext=function(H){return H={$$typeof:b,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:g,_context:H},H},Ke.createElement=function(H,ne,Se){var Te,Ye={},ye=null;if(ne!=null)for(Te in ne.key!==void 0&&(ye=""+ne.key),ne)ee.call(ne,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Ye[Te]=ne[Te]);var Je=arguments.length-2;if(Je===1)Ye.children=Se;else if(1<Je){for(var $e=Array(Je),st=0;st<Je;st++)$e[st]=arguments[st+2];Ye.children=$e}if(H&&H.defaultProps)for(Te in Je=H.defaultProps,Je)Ye[Te]===void 0&&(Ye[Te]=Je[Te]);return re(H,ye,Ye)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(H){return{$$typeof:S,render:H}},Ke.isValidElement=We,Ke.lazy=function(H){return{$$typeof:N,_payload:{_status:-1,_result:H},_init:Ce}},Ke.memo=function(H,ne){return{$$typeof:v,type:H,compare:ne===void 0?null:ne}},Ke.startTransition=function(H){var ne=W.T,Se={};W.T=Se;try{var Te=H(),Ye=W.S;Ye!==null&&Ye(Se,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(ve,Re)}catch(ye){Re(ye)}finally{ne!==null&&Se.types!==null&&(ne.types=Se.types),W.T=ne}},Ke.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ke.use=function(H){return W.H.use(H)},Ke.useActionState=function(H,ne,Se){return W.H.useActionState(H,ne,Se)},Ke.useCallback=function(H,ne){return W.H.useCallback(H,ne)},Ke.useContext=function(H){return W.H.useContext(H)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(H,ne){return W.H.useDeferredValue(H,ne)},Ke.useEffect=function(H,ne){return W.H.useEffect(H,ne)},Ke.useEffectEvent=function(H){return W.H.useEffectEvent(H)},Ke.useId=function(){return W.H.useId()},Ke.useImperativeHandle=function(H,ne,Se){return W.H.useImperativeHandle(H,ne,Se)},Ke.useInsertionEffect=function(H,ne){return W.H.useInsertionEffect(H,ne)},Ke.useLayoutEffect=function(H,ne){return W.H.useLayoutEffect(H,ne)},Ke.useMemo=function(H,ne){return W.H.useMemo(H,ne)},Ke.useOptimistic=function(H,ne){return W.H.useOptimistic(H,ne)},Ke.useReducer=function(H,ne,Se){return W.H.useReducer(H,ne,Se)},Ke.useRef=function(H){return W.H.useRef(H)},Ke.useState=function(H){return W.H.useState(H)},Ke.useSyncExternalStore=function(H,ne,Se){return W.H.useSyncExternalStore(H,ne,Se)},Ke.useTransition=function(){return W.H.useTransition()},Ke.version="19.2.4",Ke}var H1;function co(){return H1||(H1=1,qh.exports=rp()),qh.exports}var de=co(),Xh={exports:{}},Zl={},Wh={exports:{}},Zh={};var V1;function ap(){return V1||(V1=1,(function(o){function r(te,fe){var Ce=te.length;te.push(fe);e:for(;0<Ce;){var Re=Ce-1>>>1,Ee=te[Re];if(0<p(Ee,fe))te[Re]=fe,te[Ce]=Ee,Ce=Re;else break e}}function l(te){return te.length===0?null:te[0]}function f(te){if(te.length===0)return null;var fe=te[0],Ce=te.pop();if(Ce!==fe){te[0]=Ce;e:for(var Re=0,Ee=te.length,H=Ee>>>1;Re<H;){var ne=2*(Re+1)-1,Se=te[ne],Te=ne+1,Ye=te[Te];if(0>p(Se,Ce))Te<Ee&&0>p(Ye,Se)?(te[Re]=Ye,te[Te]=Ce,Re=Te):(te[Re]=Se,te[ne]=Ce,Re=ne);else if(Te<Ee&&0>p(Ye,Ce))te[Re]=Ye,te[Te]=Ce,Re=Te;else break e}}return fe}function p(te,fe){var Ce=te.sortIndex-fe.sortIndex;return Ce!==0?Ce:te.id-fe.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;o.unstable_now=function(){return g.now()}}else{var b=Date,S=b.now();o.unstable_now=function(){return b.now()-S}}var _=[],v=[],N=1,O=null,B=3,j=!1,U=!1,z=!1,q=!1,$=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ue(te){for(var fe=l(v);fe!==null;){if(fe.callback===null)f(v);else if(fe.startTime<=te)f(v),fe.sortIndex=fe.expirationTime,r(_,fe);else break;fe=l(v)}}function Ne(te){if(z=!1,ue(te),!U)if(l(_)!==null)U=!0,ve||(ve=!0,_e());else{var fe=l(v);fe!==null&&ae(Ne,fe.startTime-te)}}var ve=!1,W=-1,ee=5,re=-1;function At(){return q?!0:!(o.unstable_now()-re<ee)}function We(){if(q=!1,ve){var te=o.unstable_now();re=te;var fe=!0;try{e:{U=!1,z&&(z=!1,se(W),W=-1),j=!0;var Ce=B;try{t:{for(ue(te),O=l(_);O!==null&&!(O.expirationTime>te&&At());){var Re=O.callback;if(typeof Re=="function"){O.callback=null,B=O.priorityLevel;var Ee=Re(O.expirationTime<=te);if(te=o.unstable_now(),typeof Ee=="function"){O.callback=Ee,ue(te),fe=!0;break t}O===l(_)&&f(_),ue(te)}else f(_);O=l(_)}if(O!==null)fe=!0;else{var H=l(v);H!==null&&ae(Ne,H.startTime-te),fe=!1}}break e}finally{O=null,B=Ce,j=!1}fe=void 0}}finally{fe?_e():ve=!1}}}var _e;if(typeof Q=="function")_e=function(){Q(We)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,He=De.port2;De.port1.onmessage=We,_e=function(){He.postMessage(null)}}else _e=function(){$(We,0)};function ae(te,fe){W=$(function(){te(o.unstable_now())},fe)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(te){te.callback=null},o.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<te?Math.floor(1e3/te):5},o.unstable_getCurrentPriorityLevel=function(){return B},o.unstable_next=function(te){switch(B){case 1:case 2:case 3:var fe=3;break;default:fe=B}var Ce=B;B=fe;try{return te()}finally{B=Ce}},o.unstable_requestPaint=function(){q=!0},o.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ce=B;B=te;try{return fe()}finally{B=Ce}},o.unstable_scheduleCallback=function(te,fe,Ce){var Re=o.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Re+Ce:Re):Ce=Re,te){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Ce+Ee,te={id:N++,callback:fe,priorityLevel:te,startTime:Ce,expirationTime:Ee,sortIndex:-1},Ce>Re?(te.sortIndex=Ce,r(v,te),l(_)===null&&te===l(v)&&(z?(se(W),W=-1):z=!0,ae(Ne,Ce-Re))):(te.sortIndex=Ee,r(_,te),U||j||(U=!0,ve||(ve=!0,_e()))),te},o.unstable_shouldYield=At,o.unstable_wrapCallback=function(te){var fe=B;return function(){var Ce=B;B=fe;try{return te.apply(this,arguments)}finally{B=Ce}}}})(Zh)),Zh}var G1;function sp(){return G1||(G1=1,Wh.exports=ap()),Wh.exports}var Qh={exports:{}},Hn={};var Y1;function lp(){if(Y1)return Hn;Y1=1;var o=co();function r(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)v+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var f={d:{f:l,r:function(){throw Error(r(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},p=Symbol.for("react.portal");function g(_,v,N){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:O==null?null:""+O,children:_,containerInfo:v,implementation:N}}var b=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,Hn.createPortal=function(_,v){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(r(299));return g(_,v,null,N)},Hn.flushSync=function(_){var v=b.T,N=f.p;try{if(b.T=null,f.p=2,_)return _()}finally{b.T=v,f.p=N,f.d.f()}},Hn.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,f.d.C(_,v))},Hn.prefetchDNS=function(_){typeof _=="string"&&f.d.D(_)},Hn.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var N=v.as,O=S(N,v.crossOrigin),B=typeof v.integrity=="string"?v.integrity:void 0,j=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;N==="style"?f.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:O,integrity:B,fetchPriority:j}):N==="script"&&f.d.X(_,{crossOrigin:O,integrity:B,fetchPriority:j,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Hn.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var N=S(v.as,v.crossOrigin);f.d.M(_,{crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&f.d.M(_)},Hn.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var N=v.as,O=S(N,v.crossOrigin);f.d.L(_,N,{crossOrigin:O,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Hn.preloadModule=function(_,v){if(typeof _=="string")if(v){var N=S(v.as,v.crossOrigin);f.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else f.d.m(_)},Hn.requestFormReset=function(_){f.d.r(_)},Hn.unstable_batchedUpdates=function(_,v){return _(v)},Hn.useFormState=function(_,v,N){return b.H.useFormState(_,v,N)},Hn.useFormStatus=function(){return b.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var q1;function op(){if(q1)return Qh.exports;q1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Qh.exports=lp(),Qh.exports}var X1;function cp(){if(X1)return Zl;X1=1;var o=sp(),r=co(),l=op();function f(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function b(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function S(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(g(e)!==e)throw Error(f(188))}function v(e){var n=e.alternate;if(!n){if(n=g(e),n===null)throw Error(f(188));return n!==e?null:e}for(var s=e,h=n;;){var x=s.return;if(x===null)break;var w=x.alternate;if(w===null){if(h=x.return,h!==null){s=h;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===s)return _(x),e;if(w===h)return _(x),n;w=w.sibling}throw Error(f(188))}if(s.return!==h.return)s=x,h=w;else{for(var T=!1,M=x.child;M;){if(M===s){T=!0,s=x,h=w;break}if(M===h){T=!0,h=x,s=w;break}M=M.sibling}if(!T){for(M=w.child;M;){if(M===s){T=!0,s=w,h=x;break}if(M===h){T=!0,h=w,s=x;break}M=M.sibling}if(!T)throw Error(f(189))}}if(s.alternate!==h)throw Error(f(190))}if(s.tag!==3)throw Error(f(188));return s.stateNode.current===s?e:n}function N(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=N(e),n!==null)return n;e=e.sibling}return null}var O=Object.assign,B=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),At=Symbol.for("react.memo_cache_sentinel"),We=Symbol.iterator;function _e(e){return e===null||typeof e!="object"?null:(e=We&&e[We]||e["@@iterator"],typeof e=="function"?e:null)}var De=Symbol.for("react.client.reference");function He(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===De?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case $:return"Profiler";case q:return"StrictMode";case Ne:return"Suspense";case ve:return"SuspenseList";case re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case Q:return e.displayName||"Context";case se:return(e._context.displayName||"Context")+".Consumer";case ue:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return n=e.displayName||null,n!==null?n:He(e.type)||"Memo";case ee:n=e._payload,e=e._init;try{return He(e(n))}catch{}}return null}var ae=Array.isArray,te=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},Re=[],Ee=-1;function H(e){return{current:e}}function ne(e){0>Ee||(e.current=Re[Ee],Re[Ee]=null,Ee--)}function Se(e,n){Ee++,Re[Ee]=e.current,e.current=n}var Te=H(null),Ye=H(null),ye=H(null),Je=H(null);function $e(e,n){switch(Se(ye,n),Se(Ye,e),Se(Te,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?o1(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=o1(n),e=c1(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ne(Te),Se(Te,e)}function st(){ne(Te),ne(Ye),ne(ye)}function Vn(e){e.memoizedState!==null&&Se(Je,e);var n=Te.current,s=c1(n,e.type);n!==s&&(Se(Ye,e),Se(Te,s))}function en(e){Ye.current===e&&(ne(Te),ne(Ye)),Je.current===e&&(ne(Je),Gl._currentValue=Ce)}var Kn,lt;function In(e){if(Kn===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Kn=n&&n[1]||"",lt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kn+e+lt}var Fn=!1;function hr(e,n){if(!e||Fn)return"";Fn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ce){var ie=ce}Reflect.construct(e,[],me)}else{try{me.call()}catch(ce){ie=ce}e.call(me.prototype)}}else{try{throw Error()}catch(ce){ie=ce}(me=e())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ce){if(ce&&ie&&typeof ce.stack=="string")return[ce.stack,ie.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),T=w[0],M=w[1];if(T&&M){var P=T.split(`
`),J=M.split(`
`);for(x=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;x<J.length&&!J[x].includes("DetermineComponentFrameRoot");)x++;if(h===P.length||x===J.length)for(h=P.length-1,x=J.length-1;1<=h&&0<=x&&P[h]!==J[x];)x--;for(;1<=h&&0<=x;h--,x--)if(P[h]!==J[x]){if(h!==1||x!==1)do if(h--,x--,0>x||P[h]!==J[x]){var he=`
`+P[h].replace(" at new "," at ");return e.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",e.displayName)),he}while(1<=h&&0<=x);break}}}finally{Fn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?In(s):""}function bn(e,n){switch(e.tag){case 26:case 27:case 5:return In(e.type);case 16:return In("Lazy");case 13:return e.child!==n&&n!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return hr(e.type,!1);case 11:return hr(e.type.render,!1);case 1:return hr(e.type,!0);case 31:return In("Activity");default:return""}}function It(e){try{var n="",s=null;do n+=bn(e,s),s=e,e=e.return;while(e);return n}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var ot=Object.prototype.hasOwnProperty,jr=o.unstable_scheduleCallback,Me=o.unstable_cancelCallback,ns=o.unstable_shouldYield,go=o.unstable_requestPaint,Jt=o.unstable_now,tl=o.unstable_getCurrentPriorityLevel,Jn=o.unstable_ImmediatePriority,nl=o.unstable_UserBlockingPriority,oi=o.unstable_NormalPriority,Rn=o.unstable_LowPriority,il=o.unstable_IdlePriority,is=o.log,Qc=o.unstable_setDisableYieldValue,Vt=null,Ae=null;function Lt(e){if(typeof is=="function"&&Qc(e),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(Vt,e)}catch{}}var tt=Math.clz32?Math.clz32:rl,Zt=Math.log,_a=Math.LN2;function rl(e){return e>>>=0,e===0?32:31-(Zt(e)/_a|0)|0}var Ca=256,ft=262144,Ci=4194304;function Ji(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ta(e,n,s){var h=e.pendingLanes;if(h===0)return 0;var x=0,w=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var M=h&134217727;return M!==0?(h=M&~w,h!==0?x=Ji(h):(T&=M,T!==0?x=Ji(T):s||(s=M&~e,s!==0&&(x=Ji(s))))):(M=h&~w,M!==0?x=Ji(M):T!==0?x=Ji(T):s||(s=h&~e,s!==0&&(x=Ji(s)))),x===0?0:n!==0&&n!==x&&(n&w)===0&&(w=x&-x,s=n&-n,w>=s||w===32&&(s&4194048)!==0)?n:x}function Dn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function al(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function An(){var e=Ci;return Ci<<=1,(Ci&62914560)===0&&(Ci=4194304),e}function $i(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function er(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ti(e,n,s,h,x,w){var T=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var M=e.entanglements,P=e.expirationTimes,J=e.hiddenUpdates;for(s=T&~s;0<s;){var he=31-tt(s),me=1<<he;M[he]=0,P[he]=-1;var ie=J[he];if(ie!==null)for(J[he]=null,he=0;he<ie.length;he++){var ce=ie[he];ce!==null&&(ce.lane&=-536870913)}s&=~me}h!==0&&mo(e,h,0),w!==0&&x===0&&e.tag!==0&&(e.suspendedLanes|=w&~(T&~n))}function mo(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-tt(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|s&261930}function tr(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var h=31-tt(s),x=1<<h;x&n|e[h]&n&&(e[h]|=n),s&=~x}}function rs(e,n){var s=n&-n;return s=(s&42)!==0?1:Nn(s),(s&(e.suspendedLanes|n))!==0?0:s}function Nn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function zi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gn(){var e=fe.p;return e!==0?e:(e=window.event,e===void 0?32:D1(e.type))}function Oe(e,n){var s=fe.p;try{return fe.p=e,n()}finally{fe.p=s}}var Yn=Math.random().toString(36).slice(2),cn="__reactFiber$"+Yn,Rt="__reactProps$"+Yn,ci="__reactContainer$"+Yn,Ur="__reactEvents$"+Yn,as="__reactListeners$"+Yn,Ni="__reactHandles$"+Yn,po="__reactResources$"+Yn,Na="__reactMarker$"+Yn;function $n(e){delete e[cn],delete e[Rt],delete e[Ur],delete e[as],delete e[Ni]}function tn(e){var n=e[cn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[ci]||s[cn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=p1(e);e!==null;){if(s=e[cn])return s;e=p1(e)}return n}e=s,s=e.parentNode}return null}function Et(e){if(e=e[cn]||e[ci]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function zr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(f(33))}function qn(e){var n=e[po];return n||(n=e[po]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function nn(e){e[Na]=!0}var pe=new Set,xo={};function Tt(e,n){ui(e,n),ui(e+"Capture",n)}function ui(e,n){for(xo[e]=n,e=0;e<n.length;e++)pe.add(n[e])}var Kc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yt={},xt={};function ct(e){return ot.call(xt,e)?!0:ot.call(yt,e)?!1:Kc.test(e)?xt[e]=!0:(yt[e]=!0,!1)}function Pr(e,n,s){if(ct(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function Fr(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function hi(e,n,s,h){if(h===null)e.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+h)}}function wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Jc(e,n,s){var h=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,w=h.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return x.call(this)},set:function(T){s=""+T,w.call(this,T)}}),Object.defineProperty(e,n,{enumerable:h.enumerable}),{getValue:function(){return s},setValue:function(T){s=""+T},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Yt(e){if(!e._valueTracker){var n=Pi(e)?"checked":"value";e._valueTracker=Jc(e,n,""+e[n])}}function Fi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),h="";return e&&(h=Pi(e)?e.checked?"true":"false":e.value),e=h,e!==s?(n.setValue(e),!0):!1}function ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Hr=/[\n"\\]/g;function at(e){return e.replace(Hr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function gn(e,n,s,h,x,w,T,M){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),n!=null?T==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+wt(n)):e.value!==""+wt(n)&&(e.value=""+wt(n)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),n!=null?L(e,T,wt(n)):s!=null?L(e,T,wt(s)):h!=null&&e.removeAttribute("value"),x==null&&w!=null&&(e.defaultChecked=!!w),x!=null&&(e.checked=x&&typeof x!="function"&&typeof x!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.name=""+wt(M):e.removeAttribute("name")}function Z(e,n,s,h,x,w,T,M){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),n!=null||s!=null){if(!(w!=="submit"&&w!=="reset"||n!=null)){Yt(e);return}s=s!=null?""+wt(s):"",n=n!=null?""+wt(n):s,M||n===e.value||(e.value=n),e.defaultValue=n}h=h??x,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=M?e.checked:!!h,e.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),Yt(e)}function L(e,n,s){n==="number"&&ss(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Le(e,n,s,h){if(e=e.options,n){n={};for(var x=0;x<s.length;x++)n["$"+s[x]]=!0;for(s=0;s<e.length;s++)x=n.hasOwnProperty("$"+e[s].value),e[s].selected!==x&&(e[s].selected=x),x&&h&&(e[s].defaultSelected=!0)}else{for(s=""+wt(s),n=null,x=0;x<e.length;x++){if(e[x].value===s){e[x].selected=!0,h&&(e[x].defaultSelected=!0);return}n!==null||e[x].disabled||(n=e[x])}n!==null&&(n.selected=!0)}}function un(e,n,s){if(n!=null&&(n=""+wt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+wt(s):""}function Xn(e,n,s,h){if(n==null){if(h!=null){if(s!=null)throw Error(f(92));if(ae(h)){if(1<h.length)throw Error(f(93));h=h[0]}s=h}s==null&&(s=""),n=s}s=wt(n),e.defaultValue=s,h=e.textContent,h===s&&h!==""&&h!==null&&(e.value=h),Yt(e)}function Vr(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var sl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wn(e,n,s){var h=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,s):typeof s!="number"||s===0||sl.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Ue(e,n,s){if(n!=null&&typeof n!="object")throw Error(f(62));if(e=e.style,s!=null){for(var h in s)!s.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var x in n)h=n[x],n.hasOwnProperty(x)&&s[x]!==h&&Wn(e,x,h)}else for(var w in n)n.hasOwnProperty(w)&&Wn(e,w,n[w])}function zt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$c=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gr(e){return $c.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ei(){}var Oa=null;function ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qt=null,Oi=null;function Hi(e){var n=Et(e);if(n&&(e=n.stateNode)){var s=e[Rt]||null;e:switch(e=n.stateNode,n.type){case"input":if(gn(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+at(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var h=s[n];if(h!==e&&h.form===e.form){var x=h[Rt]||null;if(!x)throw Error(f(90));gn(h,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(n=0;n<s.length;n++)h=s[n],h.form===e.form&&Fi(h)}break e;case"textarea":un(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Le(e,!!s.multiple,n,!1)}}}var Pe=!1;function wo(e,n,s){if(Pe)return e(n,s);Pe=!0;try{var h=e(n);return h}finally{if(Pe=!1,(qt!==null||Oi!==null)&&(uc(),qt&&(n=qt,e=Oi,Oi=qt=null,Hi(n),e)))for(n=0;n<e.length;n++)Hi(e[n])}}function Ze(e,n){var s=e.stateNode;if(s===null)return null;var h=s[Rt]||null;if(h===null)return null;s=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(f(231,n,typeof s));return s}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ol=!1;if(Pt)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){ol=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{ol=!1}var Vi=null,Gi=null,ls=null;function Yr(){if(ls)return ls;var e,n=Gi,s=n.length,h,x="value"in Vi?Vi.value:Vi.textContent,w=x.length;for(e=0;e<s&&n[e]===x[e];e++);var T=s-e;for(h=1;h<=T&&n[s-h]===x[w-h];h++);return ls=x.slice(e,1<h?1-h:void 0)}function nr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ir(){return!0}function cl(){return!1}function mn(e){function n(s,h,x,w,T){this._reactName=s,this._targetInst=x,this.type=h,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var M in e)e.hasOwnProperty(M)&&(s=e[M],this[M]=s?s(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ir:cl,this.isPropagationStopped=cl,this}return O(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),n}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},En=mn(fi),qr=O({},fi,{view:0,detail:0}),vo=mn(qr),os,ul,Ia,cs=O({},qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ra,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ia&&(Ia&&e.type==="mousemove"?(os=e.screenX-Ia.screenX,ul=e.screenY-Ia.screenY):ul=os=0,Ia=e),os)},movementY:function(e){return"movementY"in e?e.movementY:ul}}),St=mn(cs),bo=O({},cs,{dataTransfer:0}),us=mn(bo),rr=O({},qr,{relatedTarget:0}),hl=mn(rr),oe=O({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),nt=mn(oe),Sn=O({},fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hs=mn(Sn),Ao=O({},fi,{data:0}),Eo=mn(Ao),eu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=fl[e])?!!n[e]:!1}function Ra(){return hn}var Qt=O({},qr,{key:function(e){if(e.key){var n=eu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=nr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ra,charCode:function(e){return e.type==="keypress"?nr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fs=mn(Qt),dr=O({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nt=mn(dr),Fe=O({},qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ra}),nu=mn(Fe),Ft=O({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),gr=mn(Ft),Xr=O({},cs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iu=mn(Xr),Ii=O({},fi,{newState:0,oldState:0}),dl=mn(Ii),So=[9,13,27,32],Da=Pt&&"CompositionEvent"in window,Wr=null;Pt&&"documentMode"in document&&(Wr=document.documentMode);var _o=Pt&&"TextEvent"in window&&!Wr,Co=Pt&&(!Da||Wr&&8<Wr&&11>=Wr),mr=" ",ds=!1;function To(e,n){switch(e){case"keyup":return So.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function ar(e,n){switch(e){case"compositionend":return Zr(n);case"keypress":return n.which!==32?null:(ds=!0,mr);case"textInput":return e=n.data,e===mr&&ds?null:e;default:return null}}function gs(e,n){if(Qr)return e==="compositionend"||!Da&&To(e,n)?(e=Yr(),ls=Gi=Vi=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Co&&n.locale!=="ko"?null:n.data;default:return null}}var ti={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ti[e.type]:n==="textarea"}function di(e,n,s,h){qt?Oi?Oi.push(h):Oi=[h]:qt=h,n=xc(n,"onChange"),0<n.length&&(s=new En("onChange","change",null,s,h),e.push({event:s,listeners:n}))}var Ma=null,pr=null;function ru(e){n1(e,0)}function Ba(e){var n=zr(e);if(Fi(n))return e}function gi(e,n){if(e==="change")return n}var No=!1;if(Pt){var La;if(Pt){var xr="oninput"in document;if(!xr){var dt=document.createElement("div");dt.setAttribute("oninput","return;"),xr=typeof dt.oninput=="function"}La=xr}else La=!1;No=La&&(!document.documentMode||9<document.documentMode)}function ka(){Ma&&(Ma.detachEvent("onpropertychange",I),pr=Ma=null)}function I(e){if(e.propertyName==="value"&&Ba(pr)){var n=[];di(n,pr,e,ll(e)),wo(ru,n)}}function t(e,n,s){e==="focusin"?(ka(),Ma=n,pr=s,Ma.attachEvent("onpropertychange",I)):e==="focusout"&&ka()}function i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ba(pr)}function a(e,n){if(e==="click")return Ba(n)}function c(e,n){if(e==="input"||e==="change")return Ba(n)}function u(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var d=typeof Object.is=="function"?Object.is:u;function m(e,n){if(d(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),h=Object.keys(n);if(s.length!==h.length)return!1;for(h=0;h<s.length;h++){var x=s[h];if(!ot.call(n,x)||!d(e[x],n[x]))return!1}return!0}function y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A(e,n){var s=y(e);e=0;for(var h;s;){if(s.nodeType===3){if(h=e+s.textContent.length,e<=n&&h>=n)return{node:s,offset:n-e};e=h}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=y(s)}}function C(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?C(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function R(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ss(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ss(e.document)}return n}function D(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var k=Pt&&"documentMode"in document&&11>=document.documentMode,F=null,V=null,X=null,le=!1;function be(e,n,s){var h=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;le||F==null||F!==ss(h)||(h=F,"selectionStart"in h&&D(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),X&&m(X,h)||(X=h,h=xc(V,"onSelect"),0<h.length&&(n=new En("onSelect","select",null,n,s),e.push({event:n,listeners:h}),n.target=F)))}function we(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var xe={animationend:we("Animation","AnimationEnd"),animationiteration:we("Animation","AnimationIteration"),animationstart:we("Animation","AnimationStart"),transitionrun:we("Transition","TransitionRun"),transitionstart:we("Transition","TransitionStart"),transitioncancel:we("Transition","TransitionCancel"),transitionend:we("Transition","TransitionEnd")},rt={},Qe={};Pt&&(Qe=document.createElement("div").style,"AnimationEvent"in window||(delete xe.animationend.animation,delete xe.animationiteration.animation,delete xe.animationstart.animation),"TransitionEvent"in window||delete xe.transitionend.transition);function rn(e){if(rt[e])return rt[e];if(!xe[e])return e;var n=xe[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Qe)return rt[e]=n[s];return e}var ni=rn("animationend"),Mn=rn("animationiteration"),Ot=rn("animationstart"),_n=rn("transitionrun"),Zn=rn("transitionstart"),Kr=rn("transitioncancel"),yr=rn("transitionend"),Oo=new Map,ml="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ml.push("scrollEnd");function Yi(e,n){Oo.set(e,n),Tt(n,[e])}var Io=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ri=[],ms=0,au=0;function Ro(){for(var e=ms,n=au=ms=0;n<e;){var s=Ri[n];Ri[n++]=null;var h=Ri[n];Ri[n++]=null;var x=Ri[n];Ri[n++]=null;var w=Ri[n];if(Ri[n++]=null,h!==null&&x!==null){var T=h.pending;T===null?x.next=x:(x.next=T.next,T.next=x),h.pending=x}w!==0&&jf(s,x,w)}}function Do(e,n,s,h){Ri[ms++]=e,Ri[ms++]=n,Ri[ms++]=s,Ri[ms++]=h,au|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function su(e,n,s,h){return Do(e,n,s,h),Mo(e)}function ja(e,n){return Do(e,null,null,n),Mo(e)}function jf(e,n,s){e.lanes|=s;var h=e.alternate;h!==null&&(h.lanes|=s);for(var x=!1,w=e.return;w!==null;)w.childLanes|=s,h=w.alternate,h!==null&&(h.childLanes|=s),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(x=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,x&&n!==null&&(x=31-tt(s),e=w.hiddenUpdates,h=e[x],h===null?e[x]=[n]:h.push(n),n.lane=s|536870912),w):null}function Mo(e){if(50<jl)throw jl=0,mh=null,Error(f(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ps={};function U2(e,n,s,h){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(e,n,s,h){return new U2(e,n,s,h)}function lu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wr(e,n){var s=e.alternate;return s===null?(s=mi(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Uf(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Bo(e,n,s,h,x,w){var T=0;if(h=e,typeof e=="function")lu(e)&&(T=1);else if(typeof e=="string")T=Vm(e,s,Te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case re:return e=mi(31,s,n,x),e.elementType=re,e.lanes=w,e;case z:return Ua(s.children,x,w,n);case q:T=8,x|=24;break;case $:return e=mi(12,s,n,x|2),e.elementType=$,e.lanes=w,e;case Ne:return e=mi(13,s,n,x),e.elementType=Ne,e.lanes=w,e;case ve:return e=mi(19,s,n,x),e.elementType=ve,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:T=10;break e;case se:T=9;break e;case ue:T=11;break e;case W:T=14;break e;case ee:T=16,h=null;break e}T=29,s=Error(f(130,e===null?"null":typeof e,"")),h=null}return n=mi(T,s,n,x),n.elementType=e,n.type=h,n.lanes=w,n}function Ua(e,n,s,h){return e=mi(7,e,h,n),e.lanes=s,e}function ou(e,n,s){return e=mi(6,e,null,n),e.lanes=s,e}function zf(e){var n=mi(18,null,null,0);return n.stateNode=e,n}function cu(e,n,s){return n=mi(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Pf=new WeakMap;function Di(e,n){if(typeof e=="object"&&e!==null){var s=Pf.get(e);return s!==void 0?s:(n={value:e,source:n,stack:It(n)},Pf.set(e,n),n)}return{value:e,source:n,stack:It(n)}}var xs=[],ys=0,Lo=null,pl=0,Mi=[],Bi=0,Jr=null,sr=1,lr="";function vr(e,n){xs[ys++]=pl,xs[ys++]=Lo,Lo=e,pl=n}function Ff(e,n,s){Mi[Bi++]=sr,Mi[Bi++]=lr,Mi[Bi++]=Jr,Jr=e;var h=sr;e=lr;var x=32-tt(h)-1;h&=~(1<<x),s+=1;var w=32-tt(n)+x;if(30<w){var T=x-x%5;w=(h&(1<<T)-1).toString(32),h>>=T,x-=T,sr=1<<32-tt(n)+x|s<<x|h,lr=w+e}else sr=1<<w|s<<x|h,lr=e}function uu(e){e.return!==null&&(vr(e,1),Ff(e,1,0))}function hu(e){for(;e===Lo;)Lo=xs[--ys],xs[ys]=null,pl=xs[--ys],xs[ys]=null;for(;e===Jr;)Jr=Mi[--Bi],Mi[Bi]=null,lr=Mi[--Bi],Mi[Bi]=null,sr=Mi[--Bi],Mi[Bi]=null}function Hf(e,n){Mi[Bi++]=sr,Mi[Bi++]=lr,Mi[Bi++]=Jr,sr=n.id,lr=n.overflow,Jr=e}var Bn=null,Xt=null,pt=!1,$r=null,Li=!1,fu=Error(f(519));function ea(e){var n=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xl(Di(n,e)),fu}function Vf(e){var n=e.stateNode,s=e.type,h=e.memoizedProps;switch(n[cn]=e,n[Rt]=h,s){case"dialog":ht("cancel",n),ht("close",n);break;case"iframe":case"object":case"embed":ht("load",n);break;case"video":case"audio":for(s=0;s<zl.length;s++)ht(zl[s],n);break;case"source":ht("error",n);break;case"img":case"image":case"link":ht("error",n),ht("load",n);break;case"details":ht("toggle",n);break;case"input":ht("invalid",n),Z(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":ht("invalid",n);break;case"textarea":ht("invalid",n),Xn(n,h.value,h.defaultValue,h.children)}s=h.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||h.suppressHydrationWarning===!0||s1(n.textContent,s)?(h.popover!=null&&(ht("beforetoggle",n),ht("toggle",n)),h.onScroll!=null&&ht("scroll",n),h.onScrollEnd!=null&&ht("scrollend",n),h.onClick!=null&&(n.onclick=ei),n=!0):n=!1,n||ea(e,!0)}function Gf(e){for(Bn=e.return;Bn;)switch(Bn.tag){case 5:case 31:case 13:Li=!1;return;case 27:case 3:Li=!0;return;default:Bn=Bn.return}}function ws(e){if(e!==Bn)return!1;if(!pt)return Gf(e),pt=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Ih(e.type,e.memoizedProps)),s=!s),s&&Xt&&ea(e),Gf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Xt=m1(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Xt=m1(e)}else n===27?(n=Xt,ga(e.type)?(e=Lh,Lh=null,Xt=e):Xt=n):Xt=Bn?ji(e.stateNode.nextSibling):null;return!0}function za(){Xt=Bn=null,pt=!1}function du(){var e=$r;return e!==null&&(si===null?si=e:si.push.apply(si,e),$r=null),e}function xl(e){$r===null?$r=[e]:$r.push(e)}var gu=H(null),Pa=null,br=null;function ta(e,n,s){Se(gu,n._currentValue),n._currentValue=s}function Ar(e){e._currentValue=gu.current,ne(gu)}function mu(e,n,s){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===s)break;e=e.return}}function pu(e,n,s,h){var x=e.child;for(x!==null&&(x.return=e);x!==null;){var w=x.dependencies;if(w!==null){var T=x.child;w=w.firstContext;e:for(;w!==null;){var M=w;w=x;for(var P=0;P<n.length;P++)if(M.context===n[P]){w.lanes|=s,M=w.alternate,M!==null&&(M.lanes|=s),mu(w.return,s,e),h||(T=null);break e}w=M.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(f(341));T.lanes|=s,w=T.alternate,w!==null&&(w.lanes|=s),mu(T,s,e),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===e){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function vs(e,n,s,h){e=null;for(var x=n,w=!1;x!==null;){if(!w){if((x.flags&524288)!==0)w=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(f(387));if(T=T.memoizedProps,T!==null){var M=x.type;d(x.pendingProps.value,T.value)||(e!==null?e.push(M):e=[M])}}else if(x===Je.current){if(T=x.alternate,T===null)throw Error(f(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(e!==null?e.push(Gl):e=[Gl])}x=x.return}e!==null&&pu(n,e,s,h),n.flags|=262144}function ko(e){for(e=e.firstContext;e!==null;){if(!d(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fa(e){Pa=e,br=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ln(e){return Yf(Pa,e)}function jo(e,n){return Pa===null&&Fa(e),Yf(e,n)}function Yf(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},br===null){if(e===null)throw Error(f(308));br=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else br=br.next=n;return s}var z2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},P2=o.unstable_scheduleCallback,F2=o.unstable_NormalPriority,pn={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xu(){return{controller:new z2,data:new Map,refCount:0}}function yl(e){e.refCount--,e.refCount===0&&P2(F2,function(){e.controller.abort()})}var wl=null,yu=0,bs=0,As=null;function H2(e,n){if(wl===null){var s=wl=[];yu=0,bs=bh(),As={status:"pending",value:void 0,then:function(h){s.push(h)}}}return yu++,n.then(qf,qf),n}function qf(){if(--yu===0&&wl!==null){As!==null&&(As.status="fulfilled");var e=wl;wl=null,bs=0,As=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function V2(e,n){var s=[],h={status:"pending",value:null,reason:null,then:function(x){s.push(x)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var x=0;x<s.length;x++)(0,s[x])(n)},function(x){for(h.status="rejected",h.reason=x,x=0;x<s.length;x++)(0,s[x])(void 0)}),h}var Xf=te.S;te.S=function(e,n){I0=Jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&H2(e,n),Xf!==null&&Xf(e,n)};var Ha=H(null);function wu(){var e=Ha.current;return e!==null?e:Ht.pooledCache}function Uo(e,n){n===null?Se(Ha,Ha.current):Se(Ha,n.pool)}function Wf(){var e=wu();return e===null?null:{parent:pn._currentValue,pool:e}}var Es=Error(f(460)),vu=Error(f(474)),zo=Error(f(542)),Po={then:function(){}};function Zf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qf(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(ei,ei),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jf(e),e;default:if(typeof n.status=="string")n.then(ei,ei);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(f(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var x=n;x.status="fulfilled",x.value=h}},function(h){if(n.status==="pending"){var x=n;x.status="rejected",x.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jf(e),e}throw Ga=n,Es}}function Va(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Ga=s,Es):s}}var Ga=null;function Kf(){if(Ga===null)throw Error(f(459));var e=Ga;return Ga=null,e}function Jf(e){if(e===Es||e===zo)throw Error(f(483))}var Ss=null,vl=0;function Fo(e){var n=vl;return vl+=1,Ss===null&&(Ss=[]),Qf(Ss,e,n)}function bl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Ho(e,n){throw n.$$typeof===B?Error(f(525)):(e=Object.prototype.toString.call(n),Error(f(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function $f(e){function n(Y,G){if(e){var K=Y.deletions;K===null?(Y.deletions=[G],Y.flags|=16):K.push(G)}}function s(Y,G){if(!e)return null;for(;G!==null;)n(Y,G),G=G.sibling;return null}function h(Y){for(var G=new Map;Y!==null;)Y.key!==null?G.set(Y.key,Y):G.set(Y.index,Y),Y=Y.sibling;return G}function x(Y,G){return Y=wr(Y,G),Y.index=0,Y.sibling=null,Y}function w(Y,G,K){return Y.index=K,e?(K=Y.alternate,K!==null?(K=K.index,K<G?(Y.flags|=67108866,G):K):(Y.flags|=67108866,G)):(Y.flags|=1048576,G)}function T(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function M(Y,G,K,ge){return G===null||G.tag!==6?(G=ou(K,Y.mode,ge),G.return=Y,G):(G=x(G,K),G.return=Y,G)}function P(Y,G,K,ge){var ze=K.type;return ze===z?he(Y,G,K.props.children,ge,K.key):G!==null&&(G.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===ee&&Va(ze)===G.type)?(G=x(G,K.props),bl(G,K),G.return=Y,G):(G=Bo(K.type,K.key,K.props,null,Y.mode,ge),bl(G,K),G.return=Y,G)}function J(Y,G,K,ge){return G===null||G.tag!==4||G.stateNode.containerInfo!==K.containerInfo||G.stateNode.implementation!==K.implementation?(G=cu(K,Y.mode,ge),G.return=Y,G):(G=x(G,K.children||[]),G.return=Y,G)}function he(Y,G,K,ge,ze){return G===null||G.tag!==7?(G=Ua(K,Y.mode,ge,ze),G.return=Y,G):(G=x(G,K),G.return=Y,G)}function me(Y,G,K){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=ou(""+G,Y.mode,K),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case j:return K=Bo(G.type,G.key,G.props,null,Y.mode,K),bl(K,G),K.return=Y,K;case U:return G=cu(G,Y.mode,K),G.return=Y,G;case ee:return G=Va(G),me(Y,G,K)}if(ae(G)||_e(G))return G=Ua(G,Y.mode,K,null),G.return=Y,G;if(typeof G.then=="function")return me(Y,Fo(G),K);if(G.$$typeof===Q)return me(Y,jo(Y,G),K);Ho(Y,G)}return null}function ie(Y,G,K,ge){var ze=G!==null?G.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ze!==null?null:M(Y,G,""+K,ge);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case j:return K.key===ze?P(Y,G,K,ge):null;case U:return K.key===ze?J(Y,G,K,ge):null;case ee:return K=Va(K),ie(Y,G,K,ge)}if(ae(K)||_e(K))return ze!==null?null:he(Y,G,K,ge,null);if(typeof K.then=="function")return ie(Y,G,Fo(K),ge);if(K.$$typeof===Q)return ie(Y,G,jo(Y,K),ge);Ho(Y,K)}return null}function ce(Y,G,K,ge,ze){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Y=Y.get(K)||null,M(G,Y,""+ge,ze);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case j:return Y=Y.get(ge.key===null?K:ge.key)||null,P(G,Y,ge,ze);case U:return Y=Y.get(ge.key===null?K:ge.key)||null,J(G,Y,ge,ze);case ee:return ge=Va(ge),ce(Y,G,K,ge,ze)}if(ae(ge)||_e(ge))return Y=Y.get(K)||null,he(G,Y,ge,ze,null);if(typeof ge.then=="function")return ce(Y,G,K,Fo(ge),ze);if(ge.$$typeof===Q)return ce(Y,G,K,jo(G,ge),ze);Ho(G,ge)}return null}function Be(Y,G,K,ge){for(var ze=null,vt=null,ke=G,it=G=0,mt=null;ke!==null&&it<K.length;it++){ke.index>it?(mt=ke,ke=null):mt=ke.sibling;var bt=ie(Y,ke,K[it],ge);if(bt===null){ke===null&&(ke=mt);break}e&&ke&&bt.alternate===null&&n(Y,ke),G=w(bt,G,it),vt===null?ze=bt:vt.sibling=bt,vt=bt,ke=mt}if(it===K.length)return s(Y,ke),pt&&vr(Y,it),ze;if(ke===null){for(;it<K.length;it++)ke=me(Y,K[it],ge),ke!==null&&(G=w(ke,G,it),vt===null?ze=ke:vt.sibling=ke,vt=ke);return pt&&vr(Y,it),ze}for(ke=h(ke);it<K.length;it++)mt=ce(ke,Y,it,K[it],ge),mt!==null&&(e&&mt.alternate!==null&&ke.delete(mt.key===null?it:mt.key),G=w(mt,G,it),vt===null?ze=mt:vt.sibling=mt,vt=mt);return e&&ke.forEach(function(wa){return n(Y,wa)}),pt&&vr(Y,it),ze}function Ve(Y,G,K,ge){if(K==null)throw Error(f(151));for(var ze=null,vt=null,ke=G,it=G=0,mt=null,bt=K.next();ke!==null&&!bt.done;it++,bt=K.next()){ke.index>it?(mt=ke,ke=null):mt=ke.sibling;var wa=ie(Y,ke,bt.value,ge);if(wa===null){ke===null&&(ke=mt);break}e&&ke&&wa.alternate===null&&n(Y,ke),G=w(wa,G,it),vt===null?ze=wa:vt.sibling=wa,vt=wa,ke=mt}if(bt.done)return s(Y,ke),pt&&vr(Y,it),ze;if(ke===null){for(;!bt.done;it++,bt=K.next())bt=me(Y,bt.value,ge),bt!==null&&(G=w(bt,G,it),vt===null?ze=bt:vt.sibling=bt,vt=bt);return pt&&vr(Y,it),ze}for(ke=h(ke);!bt.done;it++,bt=K.next())bt=ce(ke,Y,it,bt.value,ge),bt!==null&&(e&&bt.alternate!==null&&ke.delete(bt.key===null?it:bt.key),G=w(bt,G,it),vt===null?ze=bt:vt.sibling=bt,vt=bt);return e&&ke.forEach(function(ep){return n(Y,ep)}),pt&&vr(Y,it),ze}function Ut(Y,G,K,ge){if(typeof K=="object"&&K!==null&&K.type===z&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case j:e:{for(var ze=K.key;G!==null;){if(G.key===ze){if(ze=K.type,ze===z){if(G.tag===7){s(Y,G.sibling),ge=x(G,K.props.children),ge.return=Y,Y=ge;break e}}else if(G.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===ee&&Va(ze)===G.type){s(Y,G.sibling),ge=x(G,K.props),bl(ge,K),ge.return=Y,Y=ge;break e}s(Y,G);break}else n(Y,G);G=G.sibling}K.type===z?(ge=Ua(K.props.children,Y.mode,ge,K.key),ge.return=Y,Y=ge):(ge=Bo(K.type,K.key,K.props,null,Y.mode,ge),bl(ge,K),ge.return=Y,Y=ge)}return T(Y);case U:e:{for(ze=K.key;G!==null;){if(G.key===ze)if(G.tag===4&&G.stateNode.containerInfo===K.containerInfo&&G.stateNode.implementation===K.implementation){s(Y,G.sibling),ge=x(G,K.children||[]),ge.return=Y,Y=ge;break e}else{s(Y,G);break}else n(Y,G);G=G.sibling}ge=cu(K,Y.mode,ge),ge.return=Y,Y=ge}return T(Y);case ee:return K=Va(K),Ut(Y,G,K,ge)}if(ae(K))return Be(Y,G,K,ge);if(_e(K)){if(ze=_e(K),typeof ze!="function")throw Error(f(150));return K=ze.call(K),Ve(Y,G,K,ge)}if(typeof K.then=="function")return Ut(Y,G,Fo(K),ge);if(K.$$typeof===Q)return Ut(Y,G,jo(Y,K),ge);Ho(Y,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,G!==null&&G.tag===6?(s(Y,G.sibling),ge=x(G,K),ge.return=Y,Y=ge):(s(Y,G),ge=ou(K,Y.mode,ge),ge.return=Y,Y=ge),T(Y)):s(Y,G)}return function(Y,G,K,ge){try{vl=0;var ze=Ut(Y,G,K,ge);return Ss=null,ze}catch(ke){if(ke===Es||ke===zo)throw ke;var vt=mi(29,ke,null,Y.mode);return vt.lanes=ge,vt.return=Y,vt}}}var Ya=$f(!0),ed=$f(!1),na=!1;function bu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Au(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ra(e,n,s){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(_t&2)!==0){var x=h.pending;return x===null?n.next=n:(n.next=x.next,x.next=n),h.pending=n,n=Mo(e),jf(e,null,s),n}return Do(e,h,n,s),Mo(e)}function Al(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,tr(e,s)}}function Eu(e,n){var s=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,s===h)){var x=null,w=null;if(s=s.firstBaseUpdate,s!==null){do{var T={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};w===null?x=w=T:w=w.next=T,s=s.next}while(s!==null);w===null?x=w=n:w=w.next=n}else x=w=n;s={baseState:h.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var Su=!1;function El(){if(Su){var e=As;if(e!==null)throw e}}function Sl(e,n,s,h){Su=!1;var x=e.updateQueue;na=!1;var w=x.firstBaseUpdate,T=x.lastBaseUpdate,M=x.shared.pending;if(M!==null){x.shared.pending=null;var P=M,J=P.next;P.next=null,T===null?w=J:T.next=J,T=P;var he=e.alternate;he!==null&&(he=he.updateQueue,M=he.lastBaseUpdate,M!==T&&(M===null?he.firstBaseUpdate=J:M.next=J,he.lastBaseUpdate=P))}if(w!==null){var me=x.baseState;T=0,he=J=P=null,M=w;do{var ie=M.lane&-536870913,ce=ie!==M.lane;if(ce?(gt&ie)===ie:(h&ie)===ie){ie!==0&&ie===bs&&(Su=!0),he!==null&&(he=he.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Be=e,Ve=M;ie=n;var Ut=s;switch(Ve.tag){case 1:if(Be=Ve.payload,typeof Be=="function"){me=Be.call(Ut,me,ie);break e}me=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ve.payload,ie=typeof Be=="function"?Be.call(Ut,me,ie):Be,ie==null)break e;me=O({},me,ie);break e;case 2:na=!0}}ie=M.callback,ie!==null&&(e.flags|=64,ce&&(e.flags|=8192),ce=x.callbacks,ce===null?x.callbacks=[ie]:ce.push(ie))}else ce={lane:ie,tag:M.tag,payload:M.payload,callback:M.callback,next:null},he===null?(J=he=ce,P=me):he=he.next=ce,T|=ie;if(M=M.next,M===null){if(M=x.shared.pending,M===null)break;ce=M,M=ce.next,ce.next=null,x.lastBaseUpdate=ce,x.shared.pending=null}}while(!0);he===null&&(P=me),x.baseState=P,x.firstBaseUpdate=J,x.lastBaseUpdate=he,w===null&&(x.shared.lanes=0),ca|=T,e.lanes=T,e.memoizedState=me}}function td(e,n){if(typeof e!="function")throw Error(f(191,e));e.call(n)}function nd(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)td(s[e],n)}var _s=H(null),Vo=H(0);function id(e,n){e=Rr,Se(Vo,e),Se(_s,n),Rr=e|n.baseLanes}function _u(){Se(Vo,Rr),Se(_s,_s.current)}function Cu(){Rr=Vo.current,ne(_s),ne(Vo)}var pi=H(null),ki=null;function aa(e){var n=e.alternate;Se(fn,fn.current&1),Se(pi,e),ki===null&&(n===null||_s.current!==null||n.memoizedState!==null)&&(ki=e)}function Tu(e){Se(fn,fn.current),Se(pi,e),ki===null&&(ki=e)}function rd(e){e.tag===22?(Se(fn,fn.current),Se(pi,e),ki===null&&(ki=e)):sa()}function sa(){Se(fn,fn.current),Se(pi,pi.current)}function xi(e){ne(pi),ki===e&&(ki=null),ne(fn)}var fn=H(0);function Go(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Mh(s)||Bh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Er=0,et=null,kt=null,xn=null,Yo=!1,Cs=!1,qa=!1,qo=0,_l=0,Ts=null,G2=0;function an(){throw Error(f(321))}function Nu(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!d(e[s],n[s]))return!1;return!0}function Ou(e,n,s,h,x,w){return Er=w,et=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,te.H=e===null||e.memoizedState===null?Fd:Gu,qa=!1,w=s(h,x),qa=!1,Cs&&(w=sd(n,s,h,x)),ad(e),w}function ad(e){te.H=Nl;var n=kt!==null&&kt.next!==null;if(Er=0,xn=kt=et=null,Yo=!1,_l=0,Ts=null,n)throw Error(f(300));e===null||yn||(e=e.dependencies,e!==null&&ko(e)&&(yn=!0))}function sd(e,n,s,h){et=e;var x=0;do{if(Cs&&(Ts=null),_l=0,Cs=!1,25<=x)throw Error(f(301));if(x+=1,xn=kt=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}te.H=Hd,w=n(s,h)}while(Cs);return w}function Y2(){var e=te.H,n=e.useState()[0];return n=typeof n.then=="function"?Cl(n):n,e=e.useState()[0],(kt!==null?kt.memoizedState:null)!==e&&(et.flags|=1024),n}function Iu(){var e=qo!==0;return qo=0,e}function Ru(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function Du(e){if(Yo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Yo=!1}Er=0,xn=kt=et=null,Cs=!1,_l=qo=0,Ts=null}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?et.memoizedState=xn=e:xn=xn.next=e,xn}function dn(){if(kt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var n=xn===null?et.memoizedState:xn.next;if(n!==null)xn=n,kt=e;else{if(e===null)throw et.alternate===null?Error(f(467)):Error(f(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},xn===null?et.memoizedState=xn=e:xn=xn.next=e}return xn}function Xo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cl(e){var n=_l;return _l+=1,Ts===null&&(Ts=[]),e=Qf(Ts,e,n),n=et,(xn===null?n.memoizedState:xn.next)===null&&(n=n.alternate,te.H=n===null||n.memoizedState===null?Fd:Gu),e}function Wo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Cl(e);if(e.$$typeof===Q)return Ln(e)}throw Error(f(438,String(e)))}function Mu(e){var n=null,s=et.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var h=et.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(x){return x.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Xo(),et.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),h=0;h<e;h++)s[h]=At;return n.index++,s}function Sr(e,n){return typeof n=="function"?n(e):n}function Zo(e){var n=dn();return Bu(n,kt,e)}function Bu(e,n,s){var h=e.queue;if(h===null)throw Error(f(311));h.lastRenderedReducer=s;var x=e.baseQueue,w=h.pending;if(w!==null){if(x!==null){var T=x.next;x.next=w.next,w.next=T}n.baseQueue=x=w,h.pending=null}if(w=e.baseState,x===null)e.memoizedState=w;else{n=x.next;var M=T=null,P=null,J=n,he=!1;do{var me=J.lane&-536870913;if(me!==J.lane?(gt&me)===me:(Er&me)===me){var ie=J.revertLane;if(ie===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),me===bs&&(he=!0);else if((Er&ie)===ie){J=J.next,ie===bs&&(he=!0);continue}else me={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},P===null?(M=P=me,T=w):P=P.next=me,et.lanes|=ie,ca|=ie;me=J.action,qa&&s(w,me),w=J.hasEagerState?J.eagerState:s(w,me)}else ie={lane:me,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},P===null?(M=P=ie,T=w):P=P.next=ie,et.lanes|=me,ca|=me;J=J.next}while(J!==null&&J!==n);if(P===null?T=w:P.next=M,!d(w,e.memoizedState)&&(yn=!0,he&&(s=As,s!==null)))throw s;e.memoizedState=w,e.baseState=T,e.baseQueue=P,h.lastRenderedState=w}return x===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function Lu(e){var n=dn(),s=n.queue;if(s===null)throw Error(f(311));s.lastRenderedReducer=e;var h=s.dispatch,x=s.pending,w=n.memoizedState;if(x!==null){s.pending=null;var T=x=x.next;do w=e(w,T.action),T=T.next;while(T!==x);d(w,n.memoizedState)||(yn=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),s.lastRenderedState=w}return[w,h]}function ld(e,n,s){var h=et,x=dn(),w=pt;if(w){if(s===void 0)throw Error(f(407));s=s()}else s=n();var T=!d((kt||x).memoizedState,s);if(T&&(x.memoizedState=s,yn=!0),x=x.queue,Uu(ud.bind(null,h,x,e),[e]),x.getSnapshot!==n||T||xn!==null&&xn.memoizedState.tag&1){if(h.flags|=2048,Ns(9,{destroy:void 0},cd.bind(null,h,x,s,n),null),Ht===null)throw Error(f(349));w||(Er&127)!==0||od(h,n,s)}return s}function od(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=et.updateQueue,n===null?(n=Xo(),et.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function cd(e,n,s,h){n.value=s,n.getSnapshot=h,hd(n)&&fd(e)}function ud(e,n,s){return s(function(){hd(n)&&fd(e)})}function hd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!d(e,s)}catch{return!0}}function fd(e){var n=ja(e,2);n!==null&&li(n,e,2)}function ku(e){var n=Qn();if(typeof e=="function"){var s=e;if(e=s(),qa){Lt(!0);try{s()}finally{Lt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:e},n}function dd(e,n,s,h){return e.baseState=s,Bu(e,kt,typeof h=="function"?h:Sr)}function q2(e,n,s,h,x){if(Jo(e))throw Error(f(485));if(e=n.action,e!==null){var w={payload:x,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){w.listeners.push(T)}};te.T!==null?s(!0):w.isTransition=!1,h(w),s=n.pending,s===null?(w.next=n.pending=w,gd(n,w)):(w.next=s.next,n.pending=s.next=w)}}function gd(e,n){var s=n.action,h=n.payload,x=e.state;if(n.isTransition){var w=te.T,T={};te.T=T;try{var M=s(x,h),P=te.S;P!==null&&P(T,M),md(e,n,M)}catch(J){ju(e,n,J)}finally{w!==null&&T.types!==null&&(w.types=T.types),te.T=w}}else try{w=s(x,h),md(e,n,w)}catch(J){ju(e,n,J)}}function md(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(h){pd(e,n,h)},function(h){return ju(e,n,h)}):pd(e,n,s)}function pd(e,n,s){n.status="fulfilled",n.value=s,xd(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,gd(e,s)))}function ju(e,n,s){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=s,xd(n),n=n.next;while(n!==h)}e.action=null}function xd(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function yd(e,n){return n}function wd(e,n){if(pt){var s=Ht.formState;if(s!==null){e:{var h=et;if(pt){if(Xt){t:{for(var x=Xt,w=Li;x.nodeType!==8;){if(!w){x=null;break t}if(x=ji(x.nextSibling),x===null){x=null;break t}}w=x.data,x=w==="F!"||w==="F"?x:null}if(x){Xt=ji(x.nextSibling),h=x.data==="F!";break e}}ea(h)}h=!1}h&&(n=s[0])}}return s=Qn(),s.memoizedState=s.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yd,lastRenderedState:n},s.queue=h,s=Ud.bind(null,et,h),h.dispatch=s,h=ku(!1),w=Vu.bind(null,et,!1,h.queue),h=Qn(),x={state:n,dispatch:null,action:e,pending:null},h.queue=x,s=q2.bind(null,et,x,w,s),x.dispatch=s,h.memoizedState=e,[n,s,!1]}function vd(e){var n=dn();return bd(n,kt,e)}function bd(e,n,s){if(n=Bu(e,n,yd)[0],e=Zo(Sr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=Cl(n)}catch(T){throw T===Es?zo:T}else h=n;n=dn();var x=n.queue,w=x.dispatch;return s!==n.memoizedState&&(et.flags|=2048,Ns(9,{destroy:void 0},X2.bind(null,x,s),null)),[h,w,e]}function X2(e,n){e.action=n}function Ad(e){var n=dn(),s=kt;if(s!==null)return bd(n,s,e);dn(),n=n.memoizedState,s=dn();var h=s.queue.dispatch;return s.memoizedState=e,[n,h,!1]}function Ns(e,n,s,h){return e={tag:e,create:s,deps:h,inst:n,next:null},n=et.updateQueue,n===null&&(n=Xo(),et.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(h=s.next,s.next=e,e.next=h,n.lastEffect=e),e}function Ed(){return dn().memoizedState}function Qo(e,n,s,h){var x=Qn();et.flags|=e,x.memoizedState=Ns(1|n,{destroy:void 0},s,h===void 0?null:h)}function Ko(e,n,s,h){var x=dn();h=h===void 0?null:h;var w=x.memoizedState.inst;kt!==null&&h!==null&&Nu(h,kt.memoizedState.deps)?x.memoizedState=Ns(n,w,s,h):(et.flags|=e,x.memoizedState=Ns(1|n,w,s,h))}function Sd(e,n){Qo(8390656,8,e,n)}function Uu(e,n){Ko(2048,8,e,n)}function W2(e){et.flags|=4;var n=et.updateQueue;if(n===null)n=Xo(),et.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function _d(e){var n=dn().memoizedState;return W2({ref:n,nextImpl:e}),function(){if((_t&2)!==0)throw Error(f(440));return n.impl.apply(void 0,arguments)}}function Cd(e,n){return Ko(4,2,e,n)}function Td(e,n){return Ko(4,4,e,n)}function Nd(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Od(e,n,s){s=s!=null?s.concat([e]):null,Ko(4,4,Nd.bind(null,n,e),s)}function zu(){}function Id(e,n){var s=dn();n=n===void 0?null:n;var h=s.memoizedState;return n!==null&&Nu(n,h[1])?h[0]:(s.memoizedState=[e,n],e)}function Rd(e,n){var s=dn();n=n===void 0?null:n;var h=s.memoizedState;if(n!==null&&Nu(n,h[1]))return h[0];if(h=e(),qa){Lt(!0);try{e()}finally{Lt(!1)}}return s.memoizedState=[h,n],h}function Pu(e,n,s){return s===void 0||(Er&1073741824)!==0&&(gt&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=D0(),et.lanes|=e,ca|=e,s)}function Dd(e,n,s,h){return d(s,n)?s:_s.current!==null?(e=Pu(e,s,h),d(e,n)||(yn=!0),e):(Er&42)===0||(Er&1073741824)!==0&&(gt&261930)===0?(yn=!0,e.memoizedState=s):(e=D0(),et.lanes|=e,ca|=e,n)}function Md(e,n,s,h,x){var w=fe.p;fe.p=w!==0&&8>w?w:8;var T=te.T,M={};te.T=M,Vu(e,!1,n,s);try{var P=x(),J=te.S;if(J!==null&&J(M,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var he=V2(P,h);Tl(e,n,he,vi(e))}else Tl(e,n,h,vi(e))}catch(me){Tl(e,n,{then:function(){},status:"rejected",reason:me},vi())}finally{fe.p=w,T!==null&&M.types!==null&&(T.types=M.types),te.T=T}}function Z2(){}function Fu(e,n,s,h){if(e.tag!==5)throw Error(f(476));var x=Bd(e).queue;Md(e,x,n,Ce,s===null?Z2:function(){return Ld(e),s(h)})}function Bd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:Ce},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Ld(e){var n=Bd(e);n.next===null&&(n=e.alternate.memoizedState),Tl(e,n.next.queue,{},vi())}function Hu(){return Ln(Gl)}function kd(){return dn().memoizedState}function jd(){return dn().memoizedState}function Q2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=vi();e=ia(s);var h=ra(n,e,s);h!==null&&(li(h,n,s),Al(h,n,s)),n={cache:xu()},e.payload=n;return}n=n.return}}function K2(e,n,s){var h=vi();s={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Jo(e)?zd(n,s):(s=su(e,n,s,h),s!==null&&(li(s,e,h),Pd(s,n,h)))}function Ud(e,n,s){var h=vi();Tl(e,n,s,h)}function Tl(e,n,s,h){var x={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))zd(n,x);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=n.lastRenderedReducer,w!==null))try{var T=n.lastRenderedState,M=w(T,s);if(x.hasEagerState=!0,x.eagerState=M,d(M,T))return Do(e,n,x,0),Ht===null&&Ro(),!1}catch{}if(s=su(e,n,x,h),s!==null)return li(s,e,h),Pd(s,n,h),!0}return!1}function Vu(e,n,s,h){if(h={lane:2,revertLane:bh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Jo(e)){if(n)throw Error(f(479))}else n=su(e,s,h,2),n!==null&&li(n,e,2)}function Jo(e){var n=e.alternate;return e===et||n!==null&&n===et}function zd(e,n){Cs=Yo=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Pd(e,n,s){if((s&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,tr(e,s)}}var Nl={readContext:Ln,use:Wo,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};Nl.useEffectEvent=an;var Fd={readContext:Ln,use:Wo,useCallback:function(e,n){return Qn().memoizedState=[e,n===void 0?null:n],e},useContext:Ln,useEffect:Sd,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Qo(4194308,4,Nd.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Qo(4194308,4,e,n)},useInsertionEffect:function(e,n){Qo(4,2,e,n)},useMemo:function(e,n){var s=Qn();n=n===void 0?null:n;var h=e();if(qa){Lt(!0);try{e()}finally{Lt(!1)}}return s.memoizedState=[h,n],h},useReducer:function(e,n,s){var h=Qn();if(s!==void 0){var x=s(n);if(qa){Lt(!0);try{s(n)}finally{Lt(!1)}}}else x=n;return h.memoizedState=h.baseState=x,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:x},h.queue=e,e=e.dispatch=K2.bind(null,et,e),[h.memoizedState,e]},useRef:function(e){var n=Qn();return e={current:e},n.memoizedState=e},useState:function(e){e=ku(e);var n=e.queue,s=Ud.bind(null,et,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:zu,useDeferredValue:function(e,n){var s=Qn();return Pu(s,e,n)},useTransition:function(){var e=ku(!1);return e=Md.bind(null,et,e.queue,!0,!1),Qn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var h=et,x=Qn();if(pt){if(s===void 0)throw Error(f(407));s=s()}else{if(s=n(),Ht===null)throw Error(f(349));(gt&127)!==0||od(h,n,s)}x.memoizedState=s;var w={value:s,getSnapshot:n};return x.queue=w,Sd(ud.bind(null,h,w,e),[e]),h.flags|=2048,Ns(9,{destroy:void 0},cd.bind(null,h,w,s,n),null),s},useId:function(){var e=Qn(),n=Ht.identifierPrefix;if(pt){var s=lr,h=sr;s=(h&~(1<<32-tt(h)-1)).toString(32)+s,n="_"+n+"R_"+s,s=qo++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=G2++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Hu,useFormState:wd,useActionState:wd,useOptimistic:function(e){var n=Qn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Vu.bind(null,et,!0,s),s.dispatch=n,[e,n]},useMemoCache:Mu,useCacheRefresh:function(){return Qn().memoizedState=Q2.bind(null,et)},useEffectEvent:function(e){var n=Qn(),s={impl:e};return n.memoizedState=s,function(){if((_t&2)!==0)throw Error(f(440));return s.impl.apply(void 0,arguments)}}},Gu={readContext:Ln,use:Wo,useCallback:Id,useContext:Ln,useEffect:Uu,useImperativeHandle:Od,useInsertionEffect:Cd,useLayoutEffect:Td,useMemo:Rd,useReducer:Zo,useRef:Ed,useState:function(){return Zo(Sr)},useDebugValue:zu,useDeferredValue:function(e,n){var s=dn();return Dd(s,kt.memoizedState,e,n)},useTransition:function(){var e=Zo(Sr)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:Cl(e),n]},useSyncExternalStore:ld,useId:kd,useHostTransitionStatus:Hu,useFormState:vd,useActionState:vd,useOptimistic:function(e,n){var s=dn();return dd(s,kt,e,n)},useMemoCache:Mu,useCacheRefresh:jd};Gu.useEffectEvent=_d;var Hd={readContext:Ln,use:Wo,useCallback:Id,useContext:Ln,useEffect:Uu,useImperativeHandle:Od,useInsertionEffect:Cd,useLayoutEffect:Td,useMemo:Rd,useReducer:Lu,useRef:Ed,useState:function(){return Lu(Sr)},useDebugValue:zu,useDeferredValue:function(e,n){var s=dn();return kt===null?Pu(s,e,n):Dd(s,kt.memoizedState,e,n)},useTransition:function(){var e=Lu(Sr)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:Cl(e),n]},useSyncExternalStore:ld,useId:kd,useHostTransitionStatus:Hu,useFormState:Ad,useActionState:Ad,useOptimistic:function(e,n){var s=dn();return kt!==null?dd(s,kt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:jd};Hd.useEffectEvent=_d;function Yu(e,n,s,h){n=e.memoizedState,s=s(h,n),s=s==null?n:O({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var qu={enqueueSetState:function(e,n,s){e=e._reactInternals;var h=vi(),x=ia(h);x.payload=n,s!=null&&(x.callback=s),n=ra(e,x,h),n!==null&&(li(n,e,h),Al(n,e,h))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var h=vi(),x=ia(h);x.tag=1,x.payload=n,s!=null&&(x.callback=s),n=ra(e,x,h),n!==null&&(li(n,e,h),Al(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=vi(),h=ia(s);h.tag=2,n!=null&&(h.callback=n),n=ra(e,h,s),n!==null&&(li(n,e,s),Al(n,e,s))}};function Vd(e,n,s,h,x,w,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,w,T):n.prototype&&n.prototype.isPureReactComponent?!m(s,h)||!m(x,w):!0}function Gd(e,n,s,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,h),n.state!==e&&qu.enqueueReplaceState(n,n.state,null)}function Xa(e,n){var s=n;if("ref"in n){s={};for(var h in n)h!=="ref"&&(s[h]=n[h])}if(e=e.defaultProps){s===n&&(s=O({},s));for(var x in e)s[x]===void 0&&(s[x]=e[x])}return s}function Yd(e){Io(e)}function qd(e){console.error(e)}function Xd(e){Io(e)}function $o(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function Wd(e,n,s){try{var h=e.onCaughtError;h(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Xu(e,n,s){return s=ia(s),s.tag=3,s.payload={element:null},s.callback=function(){$o(e,n)},s}function Zd(e){return e=ia(e),e.tag=3,e}function Qd(e,n,s,h){var x=s.type.getDerivedStateFromError;if(typeof x=="function"){var w=h.value;e.payload=function(){return x(w)},e.callback=function(){Wd(n,s,h)}}var T=s.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){Wd(n,s,h),typeof x!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function J2(e,n,s,h,x){if(s.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=s.alternate,n!==null&&vs(n,s,x,!0),s=pi.current,s!==null){switch(s.tag){case 31:case 13:return ki===null?hc():s.alternate===null&&sn===0&&(sn=3),s.flags&=-257,s.flags|=65536,s.lanes=x,h===Po?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([h]):n.add(h),yh(e,h,x)),!1;case 22:return s.flags|=65536,h===Po?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([h]):s.add(h)),yh(e,h,x)),!1}throw Error(f(435,s.tag))}return yh(e,h,x),hc(),!1}if(pt)return n=pi.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=x,h!==fu&&(e=Error(f(422),{cause:h}),xl(Di(e,s)))):(h!==fu&&(n=Error(f(423),{cause:h}),xl(Di(n,s))),e=e.current.alternate,e.flags|=65536,x&=-x,e.lanes|=x,h=Di(h,s),x=Xu(e.stateNode,h,x),Eu(e,x),sn!==4&&(sn=2)),!1;var w=Error(f(520),{cause:h});if(w=Di(w,s),kl===null?kl=[w]:kl.push(w),sn!==4&&(sn=2),n===null)return!0;h=Di(h,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=x&-x,s.lanes|=e,e=Xu(s.stateNode,h,e),Eu(s,e),!1;case 1:if(n=s.type,w=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ua===null||!ua.has(w))))return s.flags|=65536,x&=-x,s.lanes|=x,x=Zd(x),Qd(x,e,s,h),Eu(s,x),!1}s=s.return}while(s!==null);return!1}var Wu=Error(f(461)),yn=!1;function kn(e,n,s,h){n.child=e===null?ed(n,null,s,h):Ya(n,e.child,s,h)}function Kd(e,n,s,h,x){s=s.render;var w=n.ref;if("ref"in h){var T={};for(var M in h)M!=="ref"&&(T[M]=h[M])}else T=h;return Fa(n),h=Ou(e,n,s,T,w,x),M=Iu(),e!==null&&!yn?(Ru(e,n,x),_r(e,n,x)):(pt&&M&&uu(n),n.flags|=1,kn(e,n,h,x),n.child)}function Jd(e,n,s,h,x){if(e===null){var w=s.type;return typeof w=="function"&&!lu(w)&&w.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=w,$d(e,n,w,h,x)):(e=Bo(s.type,null,h,n,n.mode,x),e.ref=n.ref,e.return=n,n.child=e)}if(w=e.child,!nh(e,x)){var T=w.memoizedProps;if(s=s.compare,s=s!==null?s:m,s(T,h)&&e.ref===n.ref)return _r(e,n,x)}return n.flags|=1,e=wr(w,h),e.ref=n.ref,e.return=n,n.child=e}function $d(e,n,s,h,x){if(e!==null){var w=e.memoizedProps;if(m(w,h)&&e.ref===n.ref)if(yn=!1,n.pendingProps=h=w,nh(e,x))(e.flags&131072)!==0&&(yn=!0);else return n.lanes=e.lanes,_r(e,n,x)}return Zu(e,n,s,h,x)}function e0(e,n,s,h){var x=h.children,w=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((n.flags&128)!==0){if(w=w!==null?w.baseLanes|s:s,e!==null){for(h=n.child=e.child,x=0;h!==null;)x=x|h.lanes|h.childLanes,h=h.sibling;h=x&~w}else h=0,n.child=null;return t0(e,n,w,s,h)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Uo(n,w!==null?w.cachePool:null),w!==null?id(n,w):_u(),rd(n);else return h=n.lanes=536870912,t0(e,n,w!==null?w.baseLanes|s:s,s,h)}else w!==null?(Uo(n,w.cachePool),id(n,w),sa(),n.memoizedState=null):(e!==null&&Uo(n,null),_u(),sa());return kn(e,n,x,s),n.child}function Ol(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function t0(e,n,s,h,x){var w=wu();return w=w===null?null:{parent:pn._currentValue,pool:w},n.memoizedState={baseLanes:s,cachePool:w},e!==null&&Uo(n,null),_u(),rd(n),e!==null&&vs(e,n,h,!0),n.childLanes=x,null}function ec(e,n){return n=nc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function n0(e,n,s){return Ya(n,e.child,null,s),e=ec(n,n.pendingProps),e.flags|=2,xi(n),n.memoizedState=null,e}function $2(e,n,s){var h=n.pendingProps,x=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(pt){if(h.mode==="hidden")return e=ec(n,h),n.lanes=536870912,Ol(null,e);if(Tu(n),(e=Xt)?(e=g1(e,Li),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Jr!==null?{id:sr,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},s=zf(e),s.return=n,n.child=s,Bn=n,Xt=null)):e=null,e===null)throw ea(n);return n.lanes=536870912,null}return ec(n,h)}var w=e.memoizedState;if(w!==null){var T=w.dehydrated;if(Tu(n),x)if(n.flags&256)n.flags&=-257,n=n0(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(f(558));else if(yn||vs(e,n,s,!1),x=(s&e.childLanes)!==0,yn||x){if(h=Ht,h!==null&&(T=rs(h,s),T!==0&&T!==w.retryLane))throw w.retryLane=T,ja(e,T),li(h,e,T),Wu;hc(),n=n0(e,n,s)}else e=w.treeContext,Xt=ji(T.nextSibling),Bn=n,pt=!0,$r=null,Li=!1,e!==null&&Hf(n,e),n=ec(n,h),n.flags|=4096;return n}return e=wr(e.child,{mode:h.mode,children:h.children}),e.ref=n.ref,n.child=e,e.return=n,e}function tc(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(f(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function Zu(e,n,s,h,x){return Fa(n),s=Ou(e,n,s,h,void 0,x),h=Iu(),e!==null&&!yn?(Ru(e,n,x),_r(e,n,x)):(pt&&h&&uu(n),n.flags|=1,kn(e,n,s,x),n.child)}function i0(e,n,s,h,x,w){return Fa(n),n.updateQueue=null,s=sd(n,h,s,x),ad(e),h=Iu(),e!==null&&!yn?(Ru(e,n,w),_r(e,n,w)):(pt&&h&&uu(n),n.flags|=1,kn(e,n,s,w),n.child)}function r0(e,n,s,h,x){if(Fa(n),n.stateNode===null){var w=ps,T=s.contextType;typeof T=="object"&&T!==null&&(w=Ln(T)),w=new s(h,w),n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=qu,n.stateNode=w,w._reactInternals=n,w=n.stateNode,w.props=h,w.state=n.memoizedState,w.refs={},bu(n),T=s.contextType,w.context=typeof T=="object"&&T!==null?Ln(T):ps,w.state=n.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Yu(n,s,T,h),w.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(T=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),T!==w.state&&qu.enqueueReplaceState(w,w.state,null),Sl(n,h,w,x),El(),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){w=n.stateNode;var M=n.memoizedProps,P=Xa(s,M);w.props=P;var J=w.context,he=s.contextType;T=ps,typeof he=="object"&&he!==null&&(T=Ln(he));var me=s.getDerivedStateFromProps;he=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function",M=n.pendingProps!==M,he||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M||J!==T)&&Gd(n,w,h,T),na=!1;var ie=n.memoizedState;w.state=ie,Sl(n,h,w,x),El(),J=n.memoizedState,M||ie!==J||na?(typeof me=="function"&&(Yu(n,s,me,h),J=n.memoizedState),(P=na||Vd(n,s,P,h,ie,J,T))?(he||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=J),w.props=h,w.state=J,w.context=T,h=P):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{w=n.stateNode,Au(e,n),T=n.memoizedProps,he=Xa(s,T),w.props=he,me=n.pendingProps,ie=w.context,J=s.contextType,P=ps,typeof J=="object"&&J!==null&&(P=Ln(J)),M=s.getDerivedStateFromProps,(J=typeof M=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==me||ie!==P)&&Gd(n,w,h,P),na=!1,ie=n.memoizedState,w.state=ie,Sl(n,h,w,x),El();var ce=n.memoizedState;T!==me||ie!==ce||na||e!==null&&e.dependencies!==null&&ko(e.dependencies)?(typeof M=="function"&&(Yu(n,s,M,h),ce=n.memoizedState),(he=na||Vd(n,s,he,h,ie,ce,P)||e!==null&&e.dependencies!==null&&ko(e.dependencies))?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ce,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ce,P)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===e.memoizedProps&&ie===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&ie===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=ce),w.props=h,w.state=ce,w.context=P,h=he):(typeof w.componentDidUpdate!="function"||T===e.memoizedProps&&ie===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&ie===e.memoizedState||(n.flags|=1024),h=!1)}return w=h,tc(e,n),h=(n.flags&128)!==0,w||h?(w=n.stateNode,s=h&&typeof s.getDerivedStateFromError!="function"?null:w.render(),n.flags|=1,e!==null&&h?(n.child=Ya(n,e.child,null,x),n.child=Ya(n,null,s,x)):kn(e,n,s,x),n.memoizedState=w.state,e=n.child):e=_r(e,n,x),e}function a0(e,n,s,h){return za(),n.flags|=256,kn(e,n,s,h),n.child}var Qu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ku(e){return{baseLanes:e,cachePool:Wf()}}function Ju(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=wi),e}function s0(e,n,s){var h=n.pendingProps,x=!1,w=(n.flags&128)!==0,T;if((T=w)||(T=e!==null&&e.memoizedState===null?!1:(fn.current&2)!==0),T&&(x=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,e===null){if(pt){if(x?aa(n):sa(),(e=Xt)?(e=g1(e,Li),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Jr!==null?{id:sr,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},s=zf(e),s.return=n,n.child=s,Bn=n,Xt=null)):e=null,e===null)throw ea(n);return Bh(e)?n.lanes=32:n.lanes=536870912,null}var M=h.children;return h=h.fallback,x?(sa(),x=n.mode,M=nc({mode:"hidden",children:M},x),h=Ua(h,x,s,null),M.return=n,h.return=n,M.sibling=h,n.child=M,h=n.child,h.memoizedState=Ku(s),h.childLanes=Ju(e,T,s),n.memoizedState=Qu,Ol(null,h)):(aa(n),$u(n,M))}var P=e.memoizedState;if(P!==null&&(M=P.dehydrated,M!==null)){if(w)n.flags&256?(aa(n),n.flags&=-257,n=eh(e,n,s)):n.memoizedState!==null?(sa(),n.child=e.child,n.flags|=128,n=null):(sa(),M=h.fallback,x=n.mode,h=nc({mode:"visible",children:h.children},x),M=Ua(M,x,s,null),M.flags|=2,h.return=n,M.return=n,h.sibling=M,n.child=h,Ya(n,e.child,null,s),h=n.child,h.memoizedState=Ku(s),h.childLanes=Ju(e,T,s),n.memoizedState=Qu,n=Ol(null,h));else if(aa(n),Bh(M)){if(T=M.nextSibling&&M.nextSibling.dataset,T)var J=T.dgst;T=J,h=Error(f(419)),h.stack="",h.digest=T,xl({value:h,source:null,stack:null}),n=eh(e,n,s)}else if(yn||vs(e,n,s,!1),T=(s&e.childLanes)!==0,yn||T){if(T=Ht,T!==null&&(h=rs(T,s),h!==0&&h!==P.retryLane))throw P.retryLane=h,ja(e,h),li(T,e,h),Wu;Mh(M)||hc(),n=eh(e,n,s)}else Mh(M)?(n.flags|=192,n.child=e.child,n=null):(e=P.treeContext,Xt=ji(M.nextSibling),Bn=n,pt=!0,$r=null,Li=!1,e!==null&&Hf(n,e),n=$u(n,h.children),n.flags|=4096);return n}return x?(sa(),M=h.fallback,x=n.mode,P=e.child,J=P.sibling,h=wr(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&65011712,J!==null?M=wr(J,M):(M=Ua(M,x,s,null),M.flags|=2),M.return=n,h.return=n,h.sibling=M,n.child=h,Ol(null,h),h=n.child,M=e.child.memoizedState,M===null?M=Ku(s):(x=M.cachePool,x!==null?(P=pn._currentValue,x=x.parent!==P?{parent:P,pool:P}:x):x=Wf(),M={baseLanes:M.baseLanes|s,cachePool:x}),h.memoizedState=M,h.childLanes=Ju(e,T,s),n.memoizedState=Qu,Ol(e.child,h)):(aa(n),s=e.child,e=s.sibling,s=wr(s,{mode:"visible",children:h.children}),s.return=n,s.sibling=null,e!==null&&(T=n.deletions,T===null?(n.deletions=[e],n.flags|=16):T.push(e)),n.child=s,n.memoizedState=null,s)}function $u(e,n){return n=nc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function nc(e,n){return e=mi(22,e,null,n),e.lanes=0,e}function eh(e,n,s){return Ya(n,e.child,null,s),e=$u(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function l0(e,n,s){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),mu(e.return,n,s)}function th(e,n,s,h,x,w){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:s,tailMode:x,treeForkCount:w}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=s,T.tailMode=x,T.treeForkCount=w)}function o0(e,n,s){var h=n.pendingProps,x=h.revealOrder,w=h.tail;h=h.children;var T=fn.current,M=(T&2)!==0;if(M?(T=T&1|2,n.flags|=128):T&=1,Se(fn,T),kn(e,n,h,s),h=pt?pl:0,!M&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&l0(e,s,n);else if(e.tag===19)l0(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(x){case"forwards":for(s=n.child,x=null;s!==null;)e=s.alternate,e!==null&&Go(e)===null&&(x=s),s=s.sibling;s=x,s===null?(x=n.child,n.child=null):(x=s.sibling,s.sibling=null),th(n,!1,x,s,w,h);break;case"backwards":case"unstable_legacy-backwards":for(s=null,x=n.child,n.child=null;x!==null;){if(e=x.alternate,e!==null&&Go(e)===null){n.child=x;break}e=x.sibling,x.sibling=s,s=x,x=e}th(n,!0,s,null,w,h);break;case"together":th(n,!1,null,null,void 0,h);break;default:n.memoizedState=null}return n.child}function _r(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ca|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(vs(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(f(153));if(n.child!==null){for(e=n.child,s=wr(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=wr(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function nh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ko(e)))}function em(e,n,s){switch(n.tag){case 3:$e(n,n.stateNode.containerInfo),ta(n,pn,e.memoizedState.cache),za();break;case 27:case 5:Vn(n);break;case 4:$e(n,n.stateNode.containerInfo);break;case 10:ta(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Tu(n),null;break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(aa(n),n.flags|=128,null):(s&n.child.childLanes)!==0?s0(e,n,s):(aa(n),e=_r(e,n,s),e!==null?e.sibling:null);aa(n);break;case 19:var x=(e.flags&128)!==0;if(h=(s&n.childLanes)!==0,h||(vs(e,n,s,!1),h=(s&n.childLanes)!==0),x){if(h)return o0(e,n,s);n.flags|=128}if(x=n.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Se(fn,fn.current),h)break;return null;case 22:return n.lanes=0,e0(e,n,s,n.pendingProps);case 24:ta(n,pn,e.memoizedState.cache)}return _r(e,n,s)}function c0(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)yn=!0;else{if(!nh(e,s)&&(n.flags&128)===0)return yn=!1,em(e,n,s);yn=(e.flags&131072)!==0}else yn=!1,pt&&(n.flags&1048576)!==0&&Ff(n,pl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var h=n.pendingProps;if(e=Va(n.elementType),n.type=e,typeof e=="function")lu(e)?(h=Xa(e,h),n.tag=1,n=r0(null,n,e,h,s)):(n.tag=0,n=Zu(null,n,e,h,s));else{if(e!=null){var x=e.$$typeof;if(x===ue){n.tag=11,n=Kd(null,n,e,h,s);break e}else if(x===W){n.tag=14,n=Jd(null,n,e,h,s);break e}}throw n=He(e)||e,Error(f(306,n,""))}}return n;case 0:return Zu(e,n,n.type,n.pendingProps,s);case 1:return h=n.type,x=Xa(h,n.pendingProps),r0(e,n,h,x,s);case 3:e:{if($e(n,n.stateNode.containerInfo),e===null)throw Error(f(387));h=n.pendingProps;var w=n.memoizedState;x=w.element,Au(e,n),Sl(n,h,null,s);var T=n.memoizedState;if(h=T.cache,ta(n,pn,h),h!==w.cache&&pu(n,[pn],s,!0),El(),h=T.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=w,n.memoizedState=w,n.flags&256){n=a0(e,n,h,s);break e}else if(h!==x){x=Di(Error(f(424)),n),xl(x),n=a0(e,n,h,s);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Xt=ji(e.firstChild),Bn=n,pt=!0,$r=null,Li=!0,s=ed(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(za(),h===x){n=_r(e,n,s);break e}kn(e,n,h,s)}n=n.child}return n;case 26:return tc(e,n),e===null?(s=v1(n.type,null,n.pendingProps,null))?n.memoizedState=s:pt||(s=n.type,e=n.pendingProps,h=yc(ye.current).createElement(s),h[cn]=n,h[Rt]=e,jn(h,s,e),nn(h),n.stateNode=h):n.memoizedState=v1(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Vn(n),e===null&&pt&&(h=n.stateNode=x1(n.type,n.pendingProps,ye.current),Bn=n,Li=!0,x=Xt,ga(n.type)?(Lh=x,Xt=ji(h.firstChild)):Xt=x),kn(e,n,n.pendingProps.children,s),tc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&pt&&((x=h=Xt)&&(h=Im(h,n.type,n.pendingProps,Li),h!==null?(n.stateNode=h,Bn=n,Xt=ji(h.firstChild),Li=!1,x=!0):x=!1),x||ea(n)),Vn(n),x=n.type,w=n.pendingProps,T=e!==null?e.memoizedProps:null,h=w.children,Ih(x,w)?h=null:T!==null&&Ih(x,T)&&(n.flags|=32),n.memoizedState!==null&&(x=Ou(e,n,Y2,null,null,s),Gl._currentValue=x),tc(e,n),kn(e,n,h,s),n.child;case 6:return e===null&&pt&&((e=s=Xt)&&(s=Rm(s,n.pendingProps,Li),s!==null?(n.stateNode=s,Bn=n,Xt=null,e=!0):e=!1),e||ea(n)),null;case 13:return s0(e,n,s);case 4:return $e(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Ya(n,null,h,s):kn(e,n,h,s),n.child;case 11:return Kd(e,n,n.type,n.pendingProps,s);case 7:return kn(e,n,n.pendingProps,s),n.child;case 8:return kn(e,n,n.pendingProps.children,s),n.child;case 12:return kn(e,n,n.pendingProps.children,s),n.child;case 10:return h=n.pendingProps,ta(n,n.type,h.value),kn(e,n,h.children,s),n.child;case 9:return x=n.type._context,h=n.pendingProps.children,Fa(n),x=Ln(x),h=h(x),n.flags|=1,kn(e,n,h,s),n.child;case 14:return Jd(e,n,n.type,n.pendingProps,s);case 15:return $d(e,n,n.type,n.pendingProps,s);case 19:return o0(e,n,s);case 31:return $2(e,n,s);case 22:return e0(e,n,s,n.pendingProps);case 24:return Fa(n),h=Ln(pn),e===null?(x=wu(),x===null&&(x=Ht,w=xu(),x.pooledCache=w,w.refCount++,w!==null&&(x.pooledCacheLanes|=s),x=w),n.memoizedState={parent:h,cache:x},bu(n),ta(n,pn,x)):((e.lanes&s)!==0&&(Au(e,n),Sl(n,null,null,s),El()),x=e.memoizedState,w=n.memoizedState,x.parent!==h?(x={parent:h,cache:h},n.memoizedState=x,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=x),ta(n,pn,h)):(h=w.cache,ta(n,pn,h),h!==x.cache&&pu(n,[pn],s,!0))),kn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(f(156,n.tag))}function Cr(e){e.flags|=4}function ih(e,n,s,h,x){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(x&335544128)===x)if(e.stateNode.complete)e.flags|=8192;else if(k0())e.flags|=8192;else throw Ga=Po,vu}else e.flags&=-16777217}function u0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_1(n))if(k0())e.flags|=8192;else throw Ga=Po,vu}function ic(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?An():536870912,e.lanes|=n,Ds|=n)}function Il(e,n){if(!pt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Wt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,h=0;if(n)for(var x=e.child;x!==null;)s|=x.lanes|x.childLanes,h|=x.subtreeFlags&65011712,h|=x.flags&65011712,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)s|=x.lanes|x.childLanes,h|=x.subtreeFlags,h|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=h,e.childLanes=s,n}function tm(e,n,s){var h=n.pendingProps;switch(hu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(n),null;case 1:return Wt(n),null;case 3:return s=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),Ar(pn),st(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ws(n)?Cr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,du())),Wt(n),null;case 26:var x=n.type,w=n.memoizedState;return e===null?(Cr(n),w!==null?(Wt(n),u0(n,w)):(Wt(n),ih(n,x,null,h,s))):w?w!==e.memoizedState?(Cr(n),Wt(n),u0(n,w)):(Wt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==h&&Cr(n),Wt(n),ih(n,x,e,h,s)),null;case 27:if(en(n),s=ye.current,x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Cr(n);else{if(!h){if(n.stateNode===null)throw Error(f(166));return Wt(n),null}e=Te.current,ws(n)?Vf(n):(e=x1(x,h,s),n.stateNode=e,Cr(n))}return Wt(n),null;case 5:if(en(n),x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Cr(n);else{if(!h){if(n.stateNode===null)throw Error(f(166));return Wt(n),null}if(w=Te.current,ws(n))Vf(n);else{var T=yc(ye.current);switch(w){case 1:w=T.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:w=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":w=T.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":w=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":w=T.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?T.createElement(x,{is:h.is}):T.createElement(x)}}w[cn]=n,w[Rt]=h;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)w.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=w;e:switch(jn(w,x,h),x){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Cr(n)}}return Wt(n),ih(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&Cr(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(f(166));if(e=ye.current,ws(n)){if(e=n.stateNode,s=n.memoizedProps,h=null,x=Bn,x!==null)switch(x.tag){case 27:case 5:h=x.memoizedProps}e[cn]=n,e=!!(e.nodeValue===s||h!==null&&h.suppressHydrationWarning===!0||s1(e.nodeValue,s)),e||ea(n,!0)}else e=yc(e).createTextNode(h),e[cn]=n,n.stateNode=e}return Wt(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(h=ws(n),s!==null){if(e===null){if(!h)throw Error(f(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(557));e[cn]=n}else za(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Wt(n),e=!1}else s=du(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(xi(n),n):(xi(n),null);if((n.flags&128)!==0)throw Error(f(558))}return Wt(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(x=ws(n),h!==null&&h.dehydrated!==null){if(e===null){if(!x)throw Error(f(318));if(x=n.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(f(317));x[cn]=n}else za(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Wt(n),x=!1}else x=du(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=x),x=!0;if(!x)return n.flags&256?(xi(n),n):(xi(n),null)}return xi(n),(n.flags&128)!==0?(n.lanes=s,n):(s=h!==null,e=e!==null&&e.memoizedState!==null,s&&(h=n.child,x=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(x=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==x&&(h.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),ic(n,n.updateQueue),Wt(n),null);case 4:return st(),e===null&&_h(n.stateNode.containerInfo),Wt(n),null;case 10:return Ar(n.type),Wt(n),null;case 19:if(ne(fn),h=n.memoizedState,h===null)return Wt(n),null;if(x=(n.flags&128)!==0,w=h.rendering,w===null)if(x)Il(h,!1);else{if(sn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(w=Go(e),w!==null){for(n.flags|=128,Il(h,!1),e=w.updateQueue,n.updateQueue=e,ic(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)Uf(s,e),s=s.sibling;return Se(fn,fn.current&1|2),pt&&vr(n,h.treeForkCount),n.child}e=e.sibling}h.tail!==null&&Jt()>oc&&(n.flags|=128,x=!0,Il(h,!1),n.lanes=4194304)}else{if(!x)if(e=Go(w),e!==null){if(n.flags|=128,x=!0,e=e.updateQueue,n.updateQueue=e,ic(n,e),Il(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!pt)return Wt(n),null}else 2*Jt()-h.renderingStartTime>oc&&s!==536870912&&(n.flags|=128,x=!0,Il(h,!1),n.lanes=4194304);h.isBackwards?(w.sibling=n.child,n.child=w):(e=h.last,e!==null?e.sibling=w:n.child=w,h.last=w)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=Jt(),e.sibling=null,s=fn.current,Se(fn,x?s&1|2:s&1),pt&&vr(n,h.treeForkCount),e):(Wt(n),null);case 22:case 23:return xi(n),Cu(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(s&536870912)!==0&&(n.flags&128)===0&&(Wt(n),n.subtreeFlags&6&&(n.flags|=8192)):Wt(n),s=n.updateQueue,s!==null&&ic(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==s&&(n.flags|=2048),e!==null&&ne(Ha),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Ar(pn),Wt(n),null;case 25:return null;case 30:return null}throw Error(f(156,n.tag))}function nm(e,n){switch(hu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ar(pn),st(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return en(n),null;case 31:if(n.memoizedState!==null){if(xi(n),n.alternate===null)throw Error(f(340));za()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(xi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(f(340));za()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ne(fn),null;case 4:return st(),null;case 10:return Ar(n.type),null;case 22:case 23:return xi(n),Cu(),e!==null&&ne(Ha),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ar(pn),null;case 25:return null;default:return null}}function h0(e,n){switch(hu(n),n.tag){case 3:Ar(pn),st();break;case 26:case 27:case 5:en(n);break;case 4:st();break;case 31:n.memoizedState!==null&&xi(n);break;case 13:xi(n);break;case 19:ne(fn);break;case 10:Ar(n.type);break;case 22:case 23:xi(n),Cu(),e!==null&&ne(Ha);break;case 24:Ar(pn)}}function Rl(e,n){try{var s=n.updateQueue,h=s!==null?s.lastEffect:null;if(h!==null){var x=h.next;s=x;do{if((s.tag&e)===e){h=void 0;var w=s.create,T=s.inst;h=w(),T.destroy=h}s=s.next}while(s!==x)}}catch(M){Mt(n,n.return,M)}}function la(e,n,s){try{var h=n.updateQueue,x=h!==null?h.lastEffect:null;if(x!==null){var w=x.next;h=w;do{if((h.tag&e)===e){var T=h.inst,M=T.destroy;if(M!==void 0){T.destroy=void 0,x=n;var P=s,J=M;try{J()}catch(he){Mt(x,P,he)}}}h=h.next}while(h!==w)}}catch(he){Mt(n,n.return,he)}}function f0(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{nd(n,s)}catch(h){Mt(e,e.return,h)}}}function d0(e,n,s){s.props=Xa(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(h){Mt(e,n,h)}}function Dl(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof s=="function"?e.refCleanup=s(h):s.current=h}}catch(x){Mt(e,n,x)}}function or(e,n){var s=e.ref,h=e.refCleanup;if(s!==null)if(typeof h=="function")try{h()}catch(x){Mt(e,n,x)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(x){Mt(e,n,x)}else s.current=null}function g0(e){var n=e.type,s=e.memoizedProps,h=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&h.focus();break e;case"img":s.src?h.src=s.src:s.srcSet&&(h.srcset=s.srcSet)}}catch(x){Mt(e,e.return,x)}}function rh(e,n,s){try{var h=e.stateNode;Sm(h,e.type,s,n),h[Rt]=n}catch(x){Mt(e,e.return,x)}}function m0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ga(e.type)||e.tag===4}function ah(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||m0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ga(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sh(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=ei));else if(h!==4&&(h===27&&ga(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(sh(e,n,s),e=e.sibling;e!==null;)sh(e,n,s),e=e.sibling}function rc(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(h!==4&&(h===27&&ga(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(rc(e,n,s),e=e.sibling;e!==null;)rc(e,n,s),e=e.sibling}function p0(e){var n=e.stateNode,s=e.memoizedProps;try{for(var h=e.type,x=n.attributes;x.length;)n.removeAttributeNode(x[0]);jn(n,h,s),n[cn]=e,n[Rt]=s}catch(w){Mt(e,e.return,w)}}var Tr=!1,wn=!1,lh=!1,x0=typeof WeakSet=="function"?WeakSet:Set,On=null;function im(e,n){if(e=e.containerInfo,Nh=_c,e=R(e),D(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var h=s.getSelection&&s.getSelection();if(h&&h.rangeCount!==0){s=h.anchorNode;var x=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{s.nodeType,w.nodeType}catch{s=null;break e}var T=0,M=-1,P=-1,J=0,he=0,me=e,ie=null;t:for(;;){for(var ce;me!==s||x!==0&&me.nodeType!==3||(M=T+x),me!==w||h!==0&&me.nodeType!==3||(P=T+h),me.nodeType===3&&(T+=me.nodeValue.length),(ce=me.firstChild)!==null;)ie=me,me=ce;for(;;){if(me===e)break t;if(ie===s&&++J===x&&(M=T),ie===w&&++he===h&&(P=T),(ce=me.nextSibling)!==null)break;me=ie,ie=me.parentNode}me=ce}s=M===-1||P===-1?null:{start:M,end:P}}else s=null}s=s||{start:0,end:0}}else s=null;for(Oh={focusedElem:e,selectionRange:s},_c=!1,On=n;On!==null;)if(n=On,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,On=e;else for(;On!==null;){switch(n=On,w=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)x=e[s],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,s=n,x=w.memoizedProps,w=w.memoizedState,h=s.stateNode;try{var Be=Xa(s.type,x);e=h.getSnapshotBeforeUpdate(Be,w),h.__reactInternalSnapshotBeforeUpdate=e}catch(Ve){Mt(s,s.return,Ve)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)Dh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(f(163))}if(e=n.sibling,e!==null){e.return=n.return,On=e;break}On=n.return}}function y0(e,n,s){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Or(e,s),h&4&&Rl(5,s);break;case 1:if(Or(e,s),h&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(T){Mt(s,s.return,T)}else{var x=Xa(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(x,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Mt(s,s.return,T)}}h&64&&f0(s),h&512&&Dl(s,s.return);break;case 3:if(Or(e,s),h&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{nd(e,n)}catch(T){Mt(s,s.return,T)}}break;case 27:n===null&&h&4&&p0(s);case 26:case 5:Or(e,s),n===null&&h&4&&g0(s),h&512&&Dl(s,s.return);break;case 12:Or(e,s);break;case 31:Or(e,s),h&4&&b0(e,s);break;case 13:Or(e,s),h&4&&A0(e,s),h&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=fm.bind(null,s),Dm(e,s))));break;case 22:if(h=s.memoizedState!==null||Tr,!h){n=n!==null&&n.memoizedState!==null||wn,x=Tr;var w=wn;Tr=h,(wn=n)&&!w?Ir(e,s,(s.subtreeFlags&8772)!==0):Or(e,s),Tr=x,wn=w}break;case 30:break;default:Or(e,s)}}function w0(e){var n=e.alternate;n!==null&&(e.alternate=null,w0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&$n(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Kt=null,ii=!1;function Nr(e,n,s){for(s=s.child;s!==null;)v0(e,n,s),s=s.sibling}function v0(e,n,s){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(Vt,s)}catch{}switch(s.tag){case 26:wn||or(s,n),Nr(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:wn||or(s,n);var h=Kt,x=ii;ga(s.type)&&(Kt=s.stateNode,ii=!1),Nr(e,n,s),Fl(s.stateNode),Kt=h,ii=x;break;case 5:wn||or(s,n);case 6:if(h=Kt,x=ii,Kt=null,Nr(e,n,s),Kt=h,ii=x,Kt!==null)if(ii)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(s.stateNode)}catch(w){Mt(s,n,w)}else try{Kt.removeChild(s.stateNode)}catch(w){Mt(s,n,w)}break;case 18:Kt!==null&&(ii?(e=Kt,f1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Ps(e)):f1(Kt,s.stateNode));break;case 4:h=Kt,x=ii,Kt=s.stateNode.containerInfo,ii=!0,Nr(e,n,s),Kt=h,ii=x;break;case 0:case 11:case 14:case 15:la(2,s,n),wn||la(4,s,n),Nr(e,n,s);break;case 1:wn||(or(s,n),h=s.stateNode,typeof h.componentWillUnmount=="function"&&d0(s,n,h)),Nr(e,n,s);break;case 21:Nr(e,n,s);break;case 22:wn=(h=wn)||s.memoizedState!==null,Nr(e,n,s),wn=h;break;default:Nr(e,n,s)}}function b0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(s){Mt(n,n.return,s)}}}function A0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(s){Mt(n,n.return,s)}}function rm(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new x0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new x0),n;default:throw Error(f(435,e.tag))}}function ac(e,n){var s=rm(e);n.forEach(function(h){if(!s.has(h)){s.add(h);var x=dm.bind(null,e,h);h.then(x,x)}})}function ri(e,n){var s=n.deletions;if(s!==null)for(var h=0;h<s.length;h++){var x=s[h],w=e,T=n,M=T;e:for(;M!==null;){switch(M.tag){case 27:if(ga(M.type)){Kt=M.stateNode,ii=!1;break e}break;case 5:Kt=M.stateNode,ii=!1;break e;case 3:case 4:Kt=M.stateNode.containerInfo,ii=!0;break e}M=M.return}if(Kt===null)throw Error(f(160));v0(w,T,x),Kt=null,ii=!1,w=x.alternate,w!==null&&(w.return=null),x.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)E0(n,e),n=n.sibling}var qi=null;function E0(e,n){var s=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ri(n,e),ai(e),h&4&&(la(3,e,e.return),Rl(3,e),la(5,e,e.return));break;case 1:ri(n,e),ai(e),h&512&&(wn||s===null||or(s,s.return)),h&64&&Tr&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?h:s.concat(h))));break;case 26:var x=qi;if(ri(n,e),ai(e),h&512&&(wn||s===null||or(s,s.return)),h&4){var w=s!==null?s.memoizedState:null;if(h=e.memoizedState,s===null)if(h===null)if(e.stateNode===null){e:{h=e.type,s=e.memoizedProps,x=x.ownerDocument||x;t:switch(h){case"title":w=x.getElementsByTagName("title")[0],(!w||w[Na]||w[cn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=x.createElement(h),x.head.insertBefore(w,x.querySelector("head > title"))),jn(w,h,s),w[cn]=e,nn(w),h=w;break e;case"link":var T=E1("link","href",x).get(h+(s.href||""));if(T){for(var M=0;M<T.length;M++)if(w=T[M],w.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&w.getAttribute("rel")===(s.rel==null?null:s.rel)&&w.getAttribute("title")===(s.title==null?null:s.title)&&w.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){T.splice(M,1);break t}}w=x.createElement(h),jn(w,h,s),x.head.appendChild(w);break;case"meta":if(T=E1("meta","content",x).get(h+(s.content||""))){for(M=0;M<T.length;M++)if(w=T[M],w.getAttribute("content")===(s.content==null?null:""+s.content)&&w.getAttribute("name")===(s.name==null?null:s.name)&&w.getAttribute("property")===(s.property==null?null:s.property)&&w.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&w.getAttribute("charset")===(s.charSet==null?null:s.charSet)){T.splice(M,1);break t}}w=x.createElement(h),jn(w,h,s),x.head.appendChild(w);break;default:throw Error(f(468,h))}w[cn]=e,nn(w),h=w}e.stateNode=h}else S1(x,e.type,e.stateNode);else e.stateNode=A1(x,h,e.memoizedProps);else w!==h?(w===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):w.count--,h===null?S1(x,e.type,e.stateNode):A1(x,h,e.memoizedProps)):h===null&&e.stateNode!==null&&rh(e,e.memoizedProps,s.memoizedProps)}break;case 27:ri(n,e),ai(e),h&512&&(wn||s===null||or(s,s.return)),s!==null&&h&4&&rh(e,e.memoizedProps,s.memoizedProps);break;case 5:if(ri(n,e),ai(e),h&512&&(wn||s===null||or(s,s.return)),e.flags&32){x=e.stateNode;try{Vr(x,"")}catch(Be){Mt(e,e.return,Be)}}h&4&&e.stateNode!=null&&(x=e.memoizedProps,rh(e,x,s!==null?s.memoizedProps:x)),h&1024&&(lh=!0);break;case 6:if(ri(n,e),ai(e),h&4){if(e.stateNode===null)throw Error(f(162));h=e.memoizedProps,s=e.stateNode;try{s.nodeValue=h}catch(Be){Mt(e,e.return,Be)}}break;case 3:if(bc=null,x=qi,qi=wc(n.containerInfo),ri(n,e),qi=x,ai(e),h&4&&s!==null&&s.memoizedState.isDehydrated)try{Ps(n.containerInfo)}catch(Be){Mt(e,e.return,Be)}lh&&(lh=!1,S0(e));break;case 4:h=qi,qi=wc(e.stateNode.containerInfo),ri(n,e),ai(e),qi=h;break;case 12:ri(n,e),ai(e);break;case 31:ri(n,e),ai(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,ac(e,h)));break;case 13:ri(n,e),ai(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(lc=Jt()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,ac(e,h)));break;case 22:x=e.memoizedState!==null;var P=s!==null&&s.memoizedState!==null,J=Tr,he=wn;if(Tr=J||x,wn=he||P,ri(n,e),wn=he,Tr=J,ai(e),h&8192)e:for(n=e.stateNode,n._visibility=x?n._visibility&-2:n._visibility|1,x&&(s===null||P||Tr||wn||Wa(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){P=s=n;try{if(w=P.stateNode,x)T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{M=P.stateNode;var me=P.memoizedProps.style,ie=me!=null&&me.hasOwnProperty("display")?me.display:null;M.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Be){Mt(P,P.return,Be)}}}else if(n.tag===6){if(s===null){P=n;try{P.stateNode.nodeValue=x?"":P.memoizedProps}catch(Be){Mt(P,P.return,Be)}}}else if(n.tag===18){if(s===null){P=n;try{var ce=P.stateNode;x?d1(ce,!0):d1(P.stateNode,!1)}catch(Be){Mt(P,P.return,Be)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(s=h.retryQueue,s!==null&&(h.retryQueue=null,ac(e,s))));break;case 19:ri(n,e),ai(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,ac(e,h)));break;case 30:break;case 21:break;default:ri(n,e),ai(e)}}function ai(e){var n=e.flags;if(n&2){try{for(var s,h=e.return;h!==null;){if(m0(h)){s=h;break}h=h.return}if(s==null)throw Error(f(160));switch(s.tag){case 27:var x=s.stateNode,w=ah(e);rc(e,w,x);break;case 5:var T=s.stateNode;s.flags&32&&(Vr(T,""),s.flags&=-33);var M=ah(e);rc(e,M,T);break;case 3:case 4:var P=s.stateNode.containerInfo,J=ah(e);sh(e,J,P);break;default:throw Error(f(161))}}catch(he){Mt(e,e.return,he)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function S0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;S0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Or(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)y0(e,n.alternate,n),n=n.sibling}function Wa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:la(4,n,n.return),Wa(n);break;case 1:or(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&d0(n,n.return,s),Wa(n);break;case 27:Fl(n.stateNode);case 26:case 5:or(n,n.return),Wa(n);break;case 22:n.memoizedState===null&&Wa(n);break;case 30:Wa(n);break;default:Wa(n)}e=e.sibling}}function Ir(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,x=e,w=n,T=w.flags;switch(w.tag){case 0:case 11:case 15:Ir(x,w,s),Rl(4,w);break;case 1:if(Ir(x,w,s),h=w,x=h.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(J){Mt(h,h.return,J)}if(h=w,x=h.updateQueue,x!==null){var M=h.stateNode;try{var P=x.shared.hiddenCallbacks;if(P!==null)for(x.shared.hiddenCallbacks=null,x=0;x<P.length;x++)td(P[x],M)}catch(J){Mt(h,h.return,J)}}s&&T&64&&f0(w),Dl(w,w.return);break;case 27:p0(w);case 26:case 5:Ir(x,w,s),s&&h===null&&T&4&&g0(w),Dl(w,w.return);break;case 12:Ir(x,w,s);break;case 31:Ir(x,w,s),s&&T&4&&b0(x,w);break;case 13:Ir(x,w,s),s&&T&4&&A0(x,w);break;case 22:w.memoizedState===null&&Ir(x,w,s),Dl(w,w.return);break;case 30:break;default:Ir(x,w,s)}n=n.sibling}}function oh(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&yl(s))}function ch(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&yl(e))}function Xi(e,n,s,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_0(e,n,s,h),n=n.sibling}function _0(e,n,s,h){var x=n.flags;switch(n.tag){case 0:case 11:case 15:Xi(e,n,s,h),x&2048&&Rl(9,n);break;case 1:Xi(e,n,s,h);break;case 3:Xi(e,n,s,h),x&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&yl(e)));break;case 12:if(x&2048){Xi(e,n,s,h),e=n.stateNode;try{var w=n.memoizedProps,T=w.id,M=w.onPostCommit;typeof M=="function"&&M(T,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(P){Mt(n,n.return,P)}}else Xi(e,n,s,h);break;case 31:Xi(e,n,s,h);break;case 13:Xi(e,n,s,h);break;case 23:break;case 22:w=n.stateNode,T=n.alternate,n.memoizedState!==null?w._visibility&2?Xi(e,n,s,h):Ml(e,n):w._visibility&2?Xi(e,n,s,h):(w._visibility|=2,Os(e,n,s,h,(n.subtreeFlags&10256)!==0||!1)),x&2048&&oh(T,n);break;case 24:Xi(e,n,s,h),x&2048&&ch(n.alternate,n);break;default:Xi(e,n,s,h)}}function Os(e,n,s,h,x){for(x=x&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var w=e,T=n,M=s,P=h,J=T.flags;switch(T.tag){case 0:case 11:case 15:Os(w,T,M,P,x),Rl(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?Os(w,T,M,P,x):Ml(w,T):(he._visibility|=2,Os(w,T,M,P,x)),x&&J&2048&&oh(T.alternate,T);break;case 24:Os(w,T,M,P,x),x&&J&2048&&ch(T.alternate,T);break;default:Os(w,T,M,P,x)}n=n.sibling}}function Ml(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,h=n,x=h.flags;switch(h.tag){case 22:Ml(s,h),x&2048&&oh(h.alternate,h);break;case 24:Ml(s,h),x&2048&&ch(h.alternate,h);break;default:Ml(s,h)}n=n.sibling}}var Bl=8192;function Is(e,n,s){if(e.subtreeFlags&Bl)for(e=e.child;e!==null;)C0(e,n,s),e=e.sibling}function C0(e,n,s){switch(e.tag){case 26:Is(e,n,s),e.flags&Bl&&e.memoizedState!==null&&Gm(s,qi,e.memoizedState,e.memoizedProps);break;case 5:Is(e,n,s);break;case 3:case 4:var h=qi;qi=wc(e.stateNode.containerInfo),Is(e,n,s),qi=h;break;case 22:e.memoizedState===null&&(h=e.alternate,h!==null&&h.memoizedState!==null?(h=Bl,Bl=16777216,Is(e,n,s),Bl=h):Is(e,n,s));break;default:Is(e,n,s)}}function T0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ll(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];On=h,O0(h,e)}T0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)N0(e),e=e.sibling}function N0(e){switch(e.tag){case 0:case 11:case 15:Ll(e),e.flags&2048&&la(9,e,e.return);break;case 3:Ll(e);break;case 12:Ll(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,sc(e)):Ll(e);break;default:Ll(e)}}function sc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];On=h,O0(h,e)}T0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:la(8,n,n.return),sc(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,sc(n));break;default:sc(n)}e=e.sibling}}function O0(e,n){for(;On!==null;){var s=On;switch(s.tag){case 0:case 11:case 15:la(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var h=s.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:yl(s.memoizedState.cache)}if(h=s.child,h!==null)h.return=s,On=h;else e:for(s=e;On!==null;){h=On;var x=h.sibling,w=h.return;if(w0(h),h===s){On=null;break e}if(x!==null){x.return=w,On=x;break e}On=w}}}var am={getCacheForType:function(e){var n=Ln(pn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Ln(pn).controller.signal}},sm=typeof WeakMap=="function"?WeakMap:Map,_t=0,Ht=null,ut=null,gt=0,Dt=0,yi=null,oa=!1,Rs=!1,uh=!1,Rr=0,sn=0,ca=0,Za=0,hh=0,wi=0,Ds=0,kl=null,si=null,fh=!1,lc=0,I0=0,oc=1/0,cc=null,ua=null,Cn=0,ha=null,Ms=null,Dr=0,dh=0,gh=null,R0=null,jl=0,mh=null;function vi(){return(_t&2)!==0&&gt!==0?gt&-gt:te.T!==null?bh():Gn()}function D0(){if(wi===0)if((gt&536870912)===0||pt){var e=ft;ft<<=1,(ft&3932160)===0&&(ft=262144),wi=e}else wi=536870912;return e=pi.current,e!==null&&(e.flags|=32),wi}function li(e,n,s){(e===Ht&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)&&(Bs(e,0),fa(e,gt,wi,!1)),er(e,s),((_t&2)===0||e!==Ht)&&(e===Ht&&((_t&2)===0&&(Za|=s),sn===4&&fa(e,gt,wi,!1)),cr(e))}function M0(e,n,s){if((_t&6)!==0)throw Error(f(327));var h=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Dn(e,n),x=h?cm(e,n):xh(e,n,!0),w=h;do{if(x===0){Rs&&!h&&fa(e,n,0,!1);break}else{if(s=e.current.alternate,w&&!lm(s)){x=xh(e,n,!1),w=!1;continue}if(x===2){if(w=n,e.errorRecoveryDisabledLanes&w)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var M=e;x=kl;var P=M.current.memoizedState.isDehydrated;if(P&&(Bs(M,T).flags|=256),T=xh(M,T,!1),T!==2){if(uh&&!P){M.errorRecoveryDisabledLanes|=w,Za|=w,x=4;break e}w=si,si=x,w!==null&&(si===null?si=w:si.push.apply(si,w))}x=T}if(w=!1,x!==2)continue}}if(x===1){Bs(e,0),fa(e,n,0,!0);break}e:{switch(h=e,w=x,w){case 0:case 1:throw Error(f(345));case 4:if((n&4194048)!==n)break;case 6:fa(h,n,wi,!oa);break e;case 2:si=null;break;case 3:case 5:break;default:throw Error(f(329))}if((n&62914560)===n&&(x=lc+300-Jt(),10<x)){if(fa(h,n,wi,!oa),Ta(h,0,!0)!==0)break e;Dr=n,h.timeoutHandle=u1(B0.bind(null,h,s,si,cc,fh,n,wi,Za,Ds,oa,w,"Throttled",-0,0),x);break e}B0(h,s,si,cc,fh,n,wi,Za,Ds,oa,w,null,-0,0)}}break}while(!0);cr(e)}function B0(e,n,s,h,x,w,T,M,P,J,he,me,ie,ce){if(e.timeoutHandle=-1,me=n.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},C0(n,w,me);var Be=(w&62914560)===w?lc-Jt():(w&4194048)===w?I0-Jt():0;if(Be=Ym(me,Be),Be!==null){Dr=w,e.cancelPendingCommit=Be(H0.bind(null,e,n,w,s,h,x,T,M,P,he,me,null,ie,ce)),fa(e,w,T,!J);return}}H0(e,n,w,s,h,x,T,M,P)}function lm(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var h=0;h<s.length;h++){var x=s[h],w=x.getSnapshot;x=x.value;try{if(!d(w(),x))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fa(e,n,s,h){n&=~hh,n&=~Za,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var x=n;0<x;){var w=31-tt(x),T=1<<w;h[w]=-1,x&=~T}s!==0&&mo(e,s,n)}function uc(){return(_t&6)===0?(Ul(0),!1):!0}function ph(){if(ut!==null){if(Dt===0)var e=ut.return;else e=ut,br=Pa=null,Du(e),Ss=null,vl=0,e=ut;for(;e!==null;)h0(e.alternate,e),e=e.return;ut=null}}function Bs(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Tm(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Dr=0,ph(),Ht=e,ut=s=wr(e.current,null),gt=n,Dt=0,yi=null,oa=!1,Rs=Dn(e,n),uh=!1,Ds=wi=hh=Za=ca=sn=0,si=kl=null,fh=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var x=31-tt(h),w=1<<x;n|=e[x],h&=~w}return Rr=n,Ro(),s}function L0(e,n){et=null,te.H=Nl,n===Es||n===zo?(n=Kf(),Dt=3):n===vu?(n=Kf(),Dt=4):Dt=n===Wu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,yi=n,ut===null&&(sn=1,$o(e,Di(n,e.current)))}function k0(){var e=pi.current;return e===null?!0:(gt&4194048)===gt?ki===null:(gt&62914560)===gt||(gt&536870912)!==0?e===ki:!1}function j0(){var e=te.H;return te.H=Nl,e===null?Nl:e}function U0(){var e=te.A;return te.A=am,e}function hc(){sn=4,oa||(gt&4194048)!==gt&&pi.current!==null||(Rs=!0),(ca&134217727)===0&&(Za&134217727)===0||Ht===null||fa(Ht,gt,wi,!1)}function xh(e,n,s){var h=_t;_t|=2;var x=j0(),w=U0();(Ht!==e||gt!==n)&&(cc=null,Bs(e,n)),n=!1;var T=sn;e:do try{if(Dt!==0&&ut!==null){var M=ut,P=yi;switch(Dt){case 8:ph(),T=6;break e;case 3:case 2:case 9:case 6:pi.current===null&&(n=!0);var J=Dt;if(Dt=0,yi=null,Ls(e,M,P,J),s&&Rs){T=0;break e}break;default:J=Dt,Dt=0,yi=null,Ls(e,M,P,J)}}om(),T=sn;break}catch(he){L0(e,he)}while(!0);return n&&e.shellSuspendCounter++,br=Pa=null,_t=h,te.H=x,te.A=w,ut===null&&(Ht=null,gt=0,Ro()),T}function om(){for(;ut!==null;)z0(ut)}function cm(e,n){var s=_t;_t|=2;var h=j0(),x=U0();Ht!==e||gt!==n?(cc=null,oc=Jt()+500,Bs(e,n)):Rs=Dn(e,n);e:do try{if(Dt!==0&&ut!==null){n=ut;var w=yi;t:switch(Dt){case 1:Dt=0,yi=null,Ls(e,n,w,1);break;case 2:case 9:if(Zf(w)){Dt=0,yi=null,P0(n);break}n=function(){Dt!==2&&Dt!==9||Ht!==e||(Dt=7),cr(e)},w.then(n,n);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:Zf(w)?(Dt=0,yi=null,P0(n)):(Dt=0,yi=null,Ls(e,n,w,7));break;case 5:var T=null;switch(ut.tag){case 26:T=ut.memoizedState;case 5:case 27:var M=ut;if(T?_1(T):M.stateNode.complete){Dt=0,yi=null;var P=M.sibling;if(P!==null)ut=P;else{var J=M.return;J!==null?(ut=J,fc(J)):ut=null}break t}}Dt=0,yi=null,Ls(e,n,w,5);break;case 6:Dt=0,yi=null,Ls(e,n,w,6);break;case 8:ph(),sn=6;break e;default:throw Error(f(462))}}um();break}catch(he){L0(e,he)}while(!0);return br=Pa=null,te.H=h,te.A=x,_t=s,ut!==null?0:(Ht=null,gt=0,Ro(),sn)}function um(){for(;ut!==null&&!ns();)z0(ut)}function z0(e){var n=c0(e.alternate,e,Rr);e.memoizedProps=e.pendingProps,n===null?fc(e):ut=n}function P0(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=i0(s,n,n.pendingProps,n.type,void 0,gt);break;case 11:n=i0(s,n,n.pendingProps,n.type.render,n.ref,gt);break;case 5:Du(n);default:h0(s,n),n=ut=Uf(n,Rr),n=c0(s,n,Rr)}e.memoizedProps=e.pendingProps,n===null?fc(e):ut=n}function Ls(e,n,s,h){br=Pa=null,Du(n),Ss=null,vl=0;var x=n.return;try{if(J2(e,x,n,s,gt)){sn=1,$o(e,Di(s,e.current)),ut=null;return}}catch(w){if(x!==null)throw ut=x,w;sn=1,$o(e,Di(s,e.current)),ut=null;return}n.flags&32768?(pt||h===1?e=!0:Rs||(gt&536870912)!==0?e=!1:(oa=e=!0,(h===2||h===9||h===3||h===6)&&(h=pi.current,h!==null&&h.tag===13&&(h.flags|=16384))),F0(n,e)):fc(n)}function fc(e){var n=e;do{if((n.flags&32768)!==0){F0(n,oa);return}e=n.return;var s=tm(n.alternate,n,Rr);if(s!==null){ut=s;return}if(n=n.sibling,n!==null){ut=n;return}ut=n=e}while(n!==null);sn===0&&(sn=5)}function F0(e,n){do{var s=nm(e.alternate,e);if(s!==null){s.flags&=32767,ut=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){ut=e;return}ut=e=s}while(e!==null);sn=6,ut=null}function H0(e,n,s,h,x,w,T,M,P){e.cancelPendingCommit=null;do dc();while(Cn!==0);if((_t&6)!==0)throw Error(f(327));if(n!==null){if(n===e.current)throw Error(f(177));if(w=n.lanes|n.childLanes,w|=au,Ti(e,s,w,T,M,P),e===Ht&&(ut=Ht=null,gt=0),Ms=n,ha=e,Dr=s,dh=w,gh=x,R0=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,gm(oi,function(){return X0(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=te.T,te.T=null,x=fe.p,fe.p=2,T=_t,_t|=4;try{im(e,n,s)}finally{_t=T,fe.p=x,te.T=h}}Cn=1,V0(),G0(),Y0()}}function V0(){if(Cn===1){Cn=0;var e=ha,n=Ms,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=te.T,te.T=null;var h=fe.p;fe.p=2;var x=_t;_t|=4;try{E0(n,e);var w=Oh,T=R(e.containerInfo),M=w.focusedElem,P=w.selectionRange;if(T!==M&&M&&M.ownerDocument&&C(M.ownerDocument.documentElement,M)){if(P!==null&&D(M)){var J=P.start,he=P.end;if(he===void 0&&(he=J),"selectionStart"in M)M.selectionStart=J,M.selectionEnd=Math.min(he,M.value.length);else{var me=M.ownerDocument||document,ie=me&&me.defaultView||window;if(ie.getSelection){var ce=ie.getSelection(),Be=M.textContent.length,Ve=Math.min(P.start,Be),Ut=P.end===void 0?Ve:Math.min(P.end,Be);!ce.extend&&Ve>Ut&&(T=Ut,Ut=Ve,Ve=T);var Y=A(M,Ve),G=A(M,Ut);if(Y&&G&&(ce.rangeCount!==1||ce.anchorNode!==Y.node||ce.anchorOffset!==Y.offset||ce.focusNode!==G.node||ce.focusOffset!==G.offset)){var K=me.createRange();K.setStart(Y.node,Y.offset),ce.removeAllRanges(),Ve>Ut?(ce.addRange(K),ce.extend(G.node,G.offset)):(K.setEnd(G.node,G.offset),ce.addRange(K))}}}}for(me=[],ce=M;ce=ce.parentNode;)ce.nodeType===1&&me.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<me.length;M++){var ge=me[M];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}_c=!!Nh,Oh=Nh=null}finally{_t=x,fe.p=h,te.T=s}}e.current=n,Cn=2}}function G0(){if(Cn===2){Cn=0;var e=ha,n=Ms,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=te.T,te.T=null;var h=fe.p;fe.p=2;var x=_t;_t|=4;try{y0(e,n.alternate,n)}finally{_t=x,fe.p=h,te.T=s}}Cn=3}}function Y0(){if(Cn===4||Cn===3){Cn=0,go();var e=ha,n=Ms,s=Dr,h=R0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Cn=5:(Cn=0,Ms=ha=null,q0(e,e.pendingLanes));var x=e.pendingLanes;if(x===0&&(ua=null),zi(s),n=n.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(Vt,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=te.T,x=fe.p,fe.p=2,te.T=null;try{for(var w=e.onRecoverableError,T=0;T<h.length;T++){var M=h[T];w(M.value,{componentStack:M.stack})}}finally{te.T=n,fe.p=x}}(Dr&3)!==0&&dc(),cr(e),x=e.pendingLanes,(s&261930)!==0&&(x&42)!==0?e===mh?jl++:(jl=0,mh=e):jl=0,Ul(0)}}function q0(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,yl(n)))}function dc(){return V0(),G0(),Y0(),X0()}function X0(){if(Cn!==5)return!1;var e=ha,n=dh;dh=0;var s=zi(Dr),h=te.T,x=fe.p;try{fe.p=32>s?32:s,te.T=null,s=gh,gh=null;var w=ha,T=Dr;if(Cn=0,Ms=ha=null,Dr=0,(_t&6)!==0)throw Error(f(331));var M=_t;if(_t|=4,N0(w.current),_0(w,w.current,T,s),_t=M,Ul(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(Vt,w)}catch{}return!0}finally{fe.p=x,te.T=h,q0(e,n)}}function W0(e,n,s){n=Di(s,n),n=Xu(e.stateNode,n,2),e=ra(e,n,2),e!==null&&(er(e,2),cr(e))}function Mt(e,n,s){if(e.tag===3)W0(e,e,s);else for(;n!==null;){if(n.tag===3){W0(n,e,s);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ua===null||!ua.has(h))){e=Di(s,e),s=Zd(2),h=ra(n,s,2),h!==null&&(Qd(s,h,n,e),er(h,2),cr(h));break}}n=n.return}}function yh(e,n,s){var h=e.pingCache;if(h===null){h=e.pingCache=new sm;var x=new Set;h.set(n,x)}else x=h.get(n),x===void 0&&(x=new Set,h.set(n,x));x.has(s)||(uh=!0,x.add(s),e=hm.bind(null,e,n,s),n.then(e,e))}function hm(e,n,s){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ht===e&&(gt&s)===s&&(sn===4||sn===3&&(gt&62914560)===gt&&300>Jt()-lc?(_t&2)===0&&Bs(e,0):hh|=s,Ds===gt&&(Ds=0)),cr(e)}function Z0(e,n){n===0&&(n=An()),e=ja(e,n),e!==null&&(er(e,n),cr(e))}function fm(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Z0(e,s)}function dm(e,n){var s=0;switch(e.tag){case 31:case 13:var h=e.stateNode,x=e.memoizedState;x!==null&&(s=x.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(f(314))}h!==null&&h.delete(n),Z0(e,s)}function gm(e,n){return jr(e,n)}var gc=null,ks=null,wh=!1,mc=!1,vh=!1,da=0;function cr(e){e!==ks&&e.next===null&&(ks===null?gc=ks=e:ks=ks.next=e),mc=!0,wh||(wh=!0,pm())}function Ul(e,n){if(!vh&&mc){vh=!0;do for(var s=!1,h=gc;h!==null;){if(e!==0){var x=h.pendingLanes;if(x===0)var w=0;else{var T=h.suspendedLanes,M=h.pingedLanes;w=(1<<31-tt(42|e)+1)-1,w&=x&~(T&~M),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(s=!0,$0(h,w))}else w=gt,w=Ta(h,h===Ht?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Dn(h,w)||(s=!0,$0(h,w));h=h.next}while(s);vh=!1}}function mm(){Q0()}function Q0(){mc=wh=!1;var e=0;da!==0&&Cm()&&(e=da);for(var n=Jt(),s=null,h=gc;h!==null;){var x=h.next,w=K0(h,n);w===0?(h.next=null,s===null?gc=x:s.next=x,x===null&&(ks=s)):(s=h,(e!==0||(w&3)!==0)&&(mc=!0)),h=x}Cn!==0&&Cn!==5||Ul(e),da!==0&&(da=0)}function K0(e,n){for(var s=e.suspendedLanes,h=e.pingedLanes,x=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var T=31-tt(w),M=1<<T,P=x[T];P===-1?((M&s)===0||(M&h)!==0)&&(x[T]=al(M,n)):P<=n&&(e.expiredLanes|=M),w&=~M}if(n=Ht,s=gt,s=Ta(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,s===0||e===n&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&Me(h),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Dn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(h!==null&&Me(h),zi(s)){case 2:case 8:s=nl;break;case 32:s=oi;break;case 268435456:s=il;break;default:s=oi}return h=J0.bind(null,e),s=jr(s,h),e.callbackPriority=n,e.callbackNode=s,n}return h!==null&&h!==null&&Me(h),e.callbackPriority=2,e.callbackNode=null,2}function J0(e,n){if(Cn!==0&&Cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(dc()&&e.callbackNode!==s)return null;var h=gt;return h=Ta(e,e===Ht?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(M0(e,h,n),K0(e,Jt()),e.callbackNode!=null&&e.callbackNode===s?J0.bind(null,e):null)}function $0(e,n){if(dc())return null;M0(e,n,!0)}function pm(){Nm(function(){(_t&6)!==0?jr(Jn,mm):Q0()})}function bh(){if(da===0){var e=bs;e===0&&(e=Ca,Ca<<=1,(Ca&261888)===0&&(Ca=256)),da=e}return da}function e1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Gr(""+e)}function t1(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function xm(e,n,s,h,x){if(n==="submit"&&s&&s.stateNode===x){var w=e1((x[Rt]||null).action),T=h.submitter;T&&(n=(n=T[Rt]||null)?e1(n.formAction):T.getAttribute("formAction"),n!==null&&(w=n,T=null));var M=new En("action","action",null,h,x);e.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(da!==0){var P=T?t1(x,T):new FormData(x);Fu(s,{pending:!0,data:P,method:x.method,action:w},null,P)}}else typeof w=="function"&&(M.preventDefault(),P=T?t1(x,T):new FormData(x),Fu(s,{pending:!0,data:P,method:x.method,action:w},w,P))},currentTarget:x}]})}}for(var Ah=0;Ah<ml.length;Ah++){var Eh=ml[Ah],ym=Eh.toLowerCase(),wm=Eh[0].toUpperCase()+Eh.slice(1);Yi(ym,"on"+wm)}Yi(ni,"onAnimationEnd"),Yi(Mn,"onAnimationIteration"),Yi(Ot,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(_n,"onTransitionRun"),Yi(Zn,"onTransitionStart"),Yi(Kr,"onTransitionCancel"),Yi(yr,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),Tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function n1(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var h=e[s],x=h.event;h=h.listeners;e:{var w=void 0;if(n)for(var T=h.length-1;0<=T;T--){var M=h[T],P=M.instance,J=M.currentTarget;if(M=M.listener,P!==w&&x.isPropagationStopped())break e;w=M,x.currentTarget=J;try{w(x)}catch(he){Io(he)}x.currentTarget=null,w=P}else for(T=0;T<h.length;T++){if(M=h[T],P=M.instance,J=M.currentTarget,M=M.listener,P!==w&&x.isPropagationStopped())break e;w=M,x.currentTarget=J;try{w(x)}catch(he){Io(he)}x.currentTarget=null,w=P}}}}function ht(e,n){var s=n[Ur];s===void 0&&(s=n[Ur]=new Set);var h=e+"__bubble";s.has(h)||(i1(n,e,2,!1),s.add(h))}function Sh(e,n,s){var h=0;n&&(h|=4),i1(s,e,h,n)}var pc="_reactListening"+Math.random().toString(36).slice(2);function _h(e){if(!e[pc]){e[pc]=!0,pe.forEach(function(s){s!=="selectionchange"&&(vm.has(s)||Sh(s,!1,e),Sh(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[pc]||(n[pc]=!0,Sh("selectionchange",!1,n))}}function i1(e,n,s,h){switch(D1(n)){case 2:var x=Wm;break;case 8:x=Zm;break;default:x=Ph}s=x.bind(null,n,s,e),x=void 0,!ol||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(x=!0),h?x!==void 0?e.addEventListener(n,s,{capture:!0,passive:x}):e.addEventListener(n,s,!0):x!==void 0?e.addEventListener(n,s,{passive:x}):e.addEventListener(n,s,!1)}function Ch(e,n,s,h,x){var w=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var M=h.stateNode.containerInfo;if(M===x)break;if(T===4)for(T=h.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;M!==null;){if(T=tn(M),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){h=w=T;continue e}M=M.parentNode}}h=h.return}wo(function(){var J=w,he=ll(s),me=[];e:{var ie=Oo.get(e);if(ie!==void 0){var ce=En,Be=e;switch(e){case"keypress":if(nr(s)===0)break e;case"keydown":case"keyup":ce=fs;break;case"focusin":Be="focus",ce=hl;break;case"focusout":Be="blur",ce=hl;break;case"beforeblur":case"afterblur":ce=hl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=St;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=us;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=nu;break;case ni:case Mn:case Ot:ce=nt;break;case yr:ce=gr;break;case"scroll":case"scrollend":ce=vo;break;case"wheel":ce=iu;break;case"copy":case"cut":case"paste":ce=hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Nt;break;case"toggle":case"beforetoggle":ce=dl}var Ve=(n&4)!==0,Ut=!Ve&&(e==="scroll"||e==="scrollend"),Y=Ve?ie!==null?ie+"Capture":null:ie;Ve=[];for(var G=J,K;G!==null;){var ge=G;if(K=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||K===null||Y===null||(ge=Ze(G,Y),ge!=null&&Ve.push(Pl(G,ge,K))),Ut)break;G=G.return}0<Ve.length&&(ie=new ce(ie,Be,null,s,he),me.push({event:ie,listeners:Ve}))}}if((n&7)===0){e:{if(ie=e==="mouseover"||e==="pointerover",ce=e==="mouseout"||e==="pointerout",ie&&s!==Oa&&(Be=s.relatedTarget||s.fromElement)&&(tn(Be)||Be[ci]))break e;if((ce||ie)&&(ie=he.window===he?he:(ie=he.ownerDocument)?ie.defaultView||ie.parentWindow:window,ce?(Be=s.relatedTarget||s.toElement,ce=J,Be=Be?tn(Be):null,Be!==null&&(Ut=g(Be),Ve=Be.tag,Be!==Ut||Ve!==5&&Ve!==27&&Ve!==6)&&(Be=null)):(ce=null,Be=J),ce!==Be)){if(Ve=St,ge="onMouseLeave",Y="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(Ve=Nt,ge="onPointerLeave",Y="onPointerEnter",G="pointer"),Ut=ce==null?ie:zr(ce),K=Be==null?ie:zr(Be),ie=new Ve(ge,G+"leave",ce,s,he),ie.target=Ut,ie.relatedTarget=K,ge=null,tn(he)===J&&(Ve=new Ve(Y,G+"enter",Be,s,he),Ve.target=K,Ve.relatedTarget=Ut,ge=Ve),Ut=ge,ce&&Be)t:{for(Ve=bm,Y=ce,G=Be,K=0,ge=Y;ge;ge=Ve(ge))K++;ge=0;for(var ze=G;ze;ze=Ve(ze))ge++;for(;0<K-ge;)Y=Ve(Y),K--;for(;0<ge-K;)G=Ve(G),ge--;for(;K--;){if(Y===G||G!==null&&Y===G.alternate){Ve=Y;break t}Y=Ve(Y),G=Ve(G)}Ve=null}else Ve=null;ce!==null&&r1(me,ie,ce,Ve,!1),Be!==null&&Ut!==null&&r1(me,Ut,Be,Ve,!0)}}e:{if(ie=J?zr(J):window,ce=ie.nodeName&&ie.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ie.type==="file")var vt=gi;else if(gl(ie))if(No)vt=c;else{vt=i;var ke=t}else ce=ie.nodeName,!ce||ce.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?J&&zt(J.elementType)&&(vt=gi):vt=a;if(vt&&(vt=vt(e,J))){di(me,vt,s,he);break e}ke&&ke(e,ie,J),e==="focusout"&&J&&ie.type==="number"&&J.memoizedProps.value!=null&&L(ie,"number",ie.value)}switch(ke=J?zr(J):window,e){case"focusin":(gl(ke)||ke.contentEditable==="true")&&(F=ke,V=J,X=null);break;case"focusout":X=V=F=null;break;case"mousedown":le=!0;break;case"contextmenu":case"mouseup":case"dragend":le=!1,be(me,s,he);break;case"selectionchange":if(k)break;case"keydown":case"keyup":be(me,s,he)}var it;if(Da)e:{switch(e){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else Qr?To(e,s)&&(mt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(mt="onCompositionStart");mt&&(Co&&s.locale!=="ko"&&(Qr||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Qr&&(it=Yr()):(Vi=he,Gi="value"in Vi?Vi.value:Vi.textContent,Qr=!0)),ke=xc(J,mt),0<ke.length&&(mt=new Eo(mt,e,null,s,he),me.push({event:mt,listeners:ke}),it?mt.data=it:(it=Zr(s),it!==null&&(mt.data=it)))),(it=_o?ar(e,s):gs(e,s))&&(mt=xc(J,"onBeforeInput"),0<mt.length&&(ke=new Eo("onBeforeInput","beforeinput",null,s,he),me.push({event:ke,listeners:mt}),ke.data=it)),xm(me,e,J,s,he)}n1(me,n)})}function Pl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function xc(e,n){for(var s=n+"Capture",h=[];e!==null;){var x=e,w=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||w===null||(x=Ze(e,s),x!=null&&h.unshift(Pl(e,x,w)),x=Ze(e,n),x!=null&&h.push(Pl(e,x,w))),e.tag===3)return h;e=e.return}return[]}function bm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function r1(e,n,s,h,x){for(var w=n._reactName,T=[];s!==null&&s!==h;){var M=s,P=M.alternate,J=M.stateNode;if(M=M.tag,P!==null&&P===h)break;M!==5&&M!==26&&M!==27||J===null||(P=J,x?(J=Ze(s,w),J!=null&&T.unshift(Pl(s,J,P))):x||(J=Ze(s,w),J!=null&&T.push(Pl(s,J,P)))),s=s.return}T.length!==0&&e.push({event:n,listeners:T})}var Am=/\r\n?/g,Em=/\u0000|\uFFFD/g;function a1(e){return(typeof e=="string"?e:""+e).replace(Am,`
`).replace(Em,"")}function s1(e,n){return n=a1(n),a1(e)===n}function jt(e,n,s,h,x,w){switch(s){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||Vr(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&Vr(e,""+h);break;case"className":Fr(e,"class",h);break;case"tabIndex":Fr(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Fr(e,s,h);break;case"style":Ue(e,h,w);break;case"data":if(n!=="object"){Fr(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=Gr(""+h),e.setAttribute(s,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(s==="formAction"?(n!=="input"&&jt(e,n,"name",x.name,x,null),jt(e,n,"formEncType",x.formEncType,x,null),jt(e,n,"formMethod",x.formMethod,x,null),jt(e,n,"formTarget",x.formTarget,x,null)):(jt(e,n,"encType",x.encType,x,null),jt(e,n,"method",x.method,x,null),jt(e,n,"target",x.target,x,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=Gr(""+h),e.setAttribute(s,h);break;case"onClick":h!=null&&(e.onclick=ei);break;case"onScroll":h!=null&&ht("scroll",e);break;case"onScrollEnd":h!=null&&ht("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(f(61));if(s=h.__html,s!=null){if(x.children!=null)throw Error(f(60));e.innerHTML=s}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}s=Gr(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""+h):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":h===!0?e.setAttribute(s,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,h):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(s,h):e.removeAttribute(s);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(s):e.setAttribute(s,h);break;case"popover":ht("beforetoggle",e),ht("toggle",e),Pr(e,"popover",h);break;case"xlinkActuate":hi(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":hi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":hi(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":hi(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":hi(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":hi(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":hi(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":hi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":hi(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Pr(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=yo.get(s)||s,Pr(e,s,h))}}function Th(e,n,s,h,x,w){switch(s){case"style":Ue(e,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(f(61));if(s=h.__html,s!=null){if(x.children!=null)throw Error(f(60));e.innerHTML=s}}break;case"children":typeof h=="string"?Vr(e,h):(typeof h=="number"||typeof h=="bigint")&&Vr(e,""+h);break;case"onScroll":h!=null&&ht("scroll",e);break;case"onScrollEnd":h!=null&&ht("scrollend",e);break;case"onClick":h!=null&&(e.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(x=s.endsWith("Capture"),n=s.slice(2,x?s.length-7:void 0),w=e[Rt]||null,w=w!=null?w[s]:null,typeof w=="function"&&e.removeEventListener(n,w,x),typeof h=="function")){typeof w!="function"&&w!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,h,x);break e}s in e?e[s]=h:h===!0?e.setAttribute(s,""):Pr(e,s,h)}}}function jn(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",e),ht("load",e);var h=!1,x=!1,w;for(w in s)if(s.hasOwnProperty(w)){var T=s[w];if(T!=null)switch(w){case"src":h=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,n));default:jt(e,n,w,T,s,null)}}x&&jt(e,n,"srcSet",s.srcSet,s,null),h&&jt(e,n,"src",s.src,s,null);return;case"input":ht("invalid",e);var M=w=T=x=null,P=null,J=null;for(h in s)if(s.hasOwnProperty(h)){var he=s[h];if(he!=null)switch(h){case"name":x=he;break;case"type":T=he;break;case"checked":P=he;break;case"defaultChecked":J=he;break;case"value":w=he;break;case"defaultValue":M=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(f(137,n));break;default:jt(e,n,h,he,s,null)}}Z(e,w,M,P,J,T,x,!1);return;case"select":ht("invalid",e),h=T=w=null;for(x in s)if(s.hasOwnProperty(x)&&(M=s[x],M!=null))switch(x){case"value":w=M;break;case"defaultValue":T=M;break;case"multiple":h=M;default:jt(e,n,x,M,s,null)}n=w,s=T,e.multiple=!!h,n!=null?Le(e,!!h,n,!1):s!=null&&Le(e,!!h,s,!0);return;case"textarea":ht("invalid",e),w=x=h=null;for(T in s)if(s.hasOwnProperty(T)&&(M=s[T],M!=null))switch(T){case"value":h=M;break;case"defaultValue":x=M;break;case"children":w=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(f(91));break;default:jt(e,n,T,M,s,null)}Xn(e,h,x,w);return;case"option":for(P in s)s.hasOwnProperty(P)&&(h=s[P],h!=null)&&(P==="selected"?e.selected=h&&typeof h!="function"&&typeof h!="symbol":jt(e,n,P,h,s,null));return;case"dialog":ht("beforetoggle",e),ht("toggle",e),ht("cancel",e),ht("close",e);break;case"iframe":case"object":ht("load",e);break;case"video":case"audio":for(h=0;h<zl.length;h++)ht(zl[h],e);break;case"image":ht("error",e),ht("load",e);break;case"details":ht("toggle",e);break;case"embed":case"source":case"link":ht("error",e),ht("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in s)if(s.hasOwnProperty(J)&&(h=s[J],h!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,n));default:jt(e,n,J,h,s,null)}return;default:if(zt(n)){for(he in s)s.hasOwnProperty(he)&&(h=s[he],h!==void 0&&Th(e,n,he,h,s,void 0));return}}for(M in s)s.hasOwnProperty(M)&&(h=s[M],h!=null&&jt(e,n,M,h,s,null))}function Sm(e,n,s,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,w=null,T=null,M=null,P=null,J=null,he=null;for(ce in s){var me=s[ce];if(s.hasOwnProperty(ce)&&me!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":P=me;default:h.hasOwnProperty(ce)||jt(e,n,ce,null,h,me)}}for(var ie in h){var ce=h[ie];if(me=s[ie],h.hasOwnProperty(ie)&&(ce!=null||me!=null))switch(ie){case"type":w=ce;break;case"name":x=ce;break;case"checked":J=ce;break;case"defaultChecked":he=ce;break;case"value":T=ce;break;case"defaultValue":M=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(f(137,n));break;default:ce!==me&&jt(e,n,ie,ce,h,me)}}gn(e,T,M,P,J,he,w,x);return;case"select":ce=T=M=ie=null;for(w in s)if(P=s[w],s.hasOwnProperty(w)&&P!=null)switch(w){case"value":break;case"multiple":ce=P;default:h.hasOwnProperty(w)||jt(e,n,w,null,h,P)}for(x in h)if(w=h[x],P=s[x],h.hasOwnProperty(x)&&(w!=null||P!=null))switch(x){case"value":ie=w;break;case"defaultValue":M=w;break;case"multiple":T=w;default:w!==P&&jt(e,n,x,w,h,P)}n=M,s=T,h=ce,ie!=null?Le(e,!!s,ie,!1):!!h!=!!s&&(n!=null?Le(e,!!s,n,!0):Le(e,!!s,s?[]:"",!1));return;case"textarea":ce=ie=null;for(M in s)if(x=s[M],s.hasOwnProperty(M)&&x!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:jt(e,n,M,null,h,x)}for(T in h)if(x=h[T],w=s[T],h.hasOwnProperty(T)&&(x!=null||w!=null))switch(T){case"value":ie=x;break;case"defaultValue":ce=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(f(91));break;default:x!==w&&jt(e,n,T,x,h,w)}un(e,ie,ce);return;case"option":for(var Be in s)ie=s[Be],s.hasOwnProperty(Be)&&ie!=null&&!h.hasOwnProperty(Be)&&(Be==="selected"?e.selected=!1:jt(e,n,Be,null,h,ie));for(P in h)ie=h[P],ce=s[P],h.hasOwnProperty(P)&&ie!==ce&&(ie!=null||ce!=null)&&(P==="selected"?e.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":jt(e,n,P,ie,h,ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in s)ie=s[Ve],s.hasOwnProperty(Ve)&&ie!=null&&!h.hasOwnProperty(Ve)&&jt(e,n,Ve,null,h,ie);for(J in h)if(ie=h[J],ce=s[J],h.hasOwnProperty(J)&&ie!==ce&&(ie!=null||ce!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(f(137,n));break;default:jt(e,n,J,ie,h,ce)}return;default:if(zt(n)){for(var Ut in s)ie=s[Ut],s.hasOwnProperty(Ut)&&ie!==void 0&&!h.hasOwnProperty(Ut)&&Th(e,n,Ut,void 0,h,ie);for(he in h)ie=h[he],ce=s[he],!h.hasOwnProperty(he)||ie===ce||ie===void 0&&ce===void 0||Th(e,n,he,ie,h,ce);return}}for(var Y in s)ie=s[Y],s.hasOwnProperty(Y)&&ie!=null&&!h.hasOwnProperty(Y)&&jt(e,n,Y,null,h,ie);for(me in h)ie=h[me],ce=s[me],!h.hasOwnProperty(me)||ie===ce||ie==null&&ce==null||jt(e,n,me,ie,h,ce)}function l1(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _m(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),h=0;h<s.length;h++){var x=s[h],w=x.transferSize,T=x.initiatorType,M=x.duration;if(w&&M&&l1(T)){for(T=0,M=x.responseEnd,h+=1;h<s.length;h++){var P=s[h],J=P.startTime;if(J>M)break;var he=P.transferSize,me=P.initiatorType;he&&l1(me)&&(P=P.responseEnd,T+=he*(P<M?1:(M-J)/(P-J)))}if(--h,n+=8*(w+T)/(x.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Nh=null,Oh=null;function yc(e){return e.nodeType===9?e:e.ownerDocument}function o1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c1(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ih(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Rh=null;function Cm(){var e=window.event;return e&&e.type==="popstate"?e===Rh?!1:(Rh=e,!0):(Rh=null,!1)}var u1=typeof setTimeout=="function"?setTimeout:void 0,Tm=typeof clearTimeout=="function"?clearTimeout:void 0,h1=typeof Promise=="function"?Promise:void 0,Nm=typeof queueMicrotask=="function"?queueMicrotask:typeof h1<"u"?function(e){return h1.resolve(null).then(e).catch(Om)}:u1;function Om(e){setTimeout(function(){throw e})}function ga(e){return e==="head"}function f1(e,n){var s=n,h=0;do{var x=s.nextSibling;if(e.removeChild(s),x&&x.nodeType===8)if(s=x.data,s==="/$"||s==="/&"){if(h===0){e.removeChild(x),Ps(n);return}h--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")h++;else if(s==="html")Fl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Fl(s);for(var w=s.firstChild;w;){var T=w.nextSibling,M=w.nodeName;w[Na]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=T}}else s==="body"&&Fl(e.ownerDocument.body);s=x}while(s);Ps(n)}function d1(e,n){var s=e;e=0;do{var h=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=h}while(s)}function Dh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Dh(s),$n(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Im(e,n,s,h){for(;e.nodeType===1;){var x=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[Na])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==x.rel||e.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||e.getAttribute("title")!==(x.title==null?null:x.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(x.src==null?null:x.src)||e.getAttribute("type")!==(x.type==null?null:x.type)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var w=x.name==null?null:""+x.name;if(x.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=ji(e.nextSibling),e===null)break}return null}function Rm(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ji(e.nextSibling),e===null))return null;return e}function g1(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ji(e.nextSibling),e===null))return null;return e}function Mh(e){return e.data==="$?"||e.data==="$~"}function Bh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Dm(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var h=function(){n(),s.removeEventListener("DOMContentLoaded",h)};s.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function ji(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Lh=null;function m1(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return ji(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function p1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function x1(e,n,s){switch(n=yc(s),e){case"html":if(e=n.documentElement,!e)throw Error(f(452));return e;case"head":if(e=n.head,!e)throw Error(f(453));return e;case"body":if(e=n.body,!e)throw Error(f(454));return e;default:throw Error(f(451))}}function Fl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);$n(e)}var Ui=new Map,y1=new Set;function wc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Mr=fe.d;fe.d={f:Mm,r:Bm,D:Lm,C:km,L:jm,m:Um,X:Pm,S:zm,M:Fm};function Mm(){var e=Mr.f(),n=uc();return e||n}function Bm(e){var n=Et(e);n!==null&&n.tag===5&&n.type==="form"?Ld(n):Mr.r(e)}var js=typeof document>"u"?null:document;function w1(e,n,s){var h=js;if(h&&typeof n=="string"&&n){var x=at(n);x='link[rel="'+e+'"][href="'+x+'"]',typeof s=="string"&&(x+='[crossorigin="'+s+'"]'),y1.has(x)||(y1.add(x),e={rel:e,crossOrigin:s,href:n},h.querySelector(x)===null&&(n=h.createElement("link"),jn(n,"link",e),nn(n),h.head.appendChild(n)))}}function Lm(e){Mr.D(e),w1("dns-prefetch",e,null)}function km(e,n){Mr.C(e,n),w1("preconnect",e,n)}function jm(e,n,s){Mr.L(e,n,s);var h=js;if(h&&e&&n){var x='link[rel="preload"][as="'+at(n)+'"]';n==="image"&&s&&s.imageSrcSet?(x+='[imagesrcset="'+at(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(x+='[imagesizes="'+at(s.imageSizes)+'"]')):x+='[href="'+at(e)+'"]';var w=x;switch(n){case"style":w=Us(e);break;case"script":w=zs(e)}Ui.has(w)||(e=O({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Ui.set(w,e),h.querySelector(x)!==null||n==="style"&&h.querySelector(Hl(w))||n==="script"&&h.querySelector(Vl(w))||(n=h.createElement("link"),jn(n,"link",e),nn(n),h.head.appendChild(n)))}}function Um(e,n){Mr.m(e,n);var s=js;if(s&&e){var h=n&&typeof n.as=="string"?n.as:"script",x='link[rel="modulepreload"][as="'+at(h)+'"][href="'+at(e)+'"]',w=x;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=zs(e)}if(!Ui.has(w)&&(e=O({rel:"modulepreload",href:e},n),Ui.set(w,e),s.querySelector(x)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Vl(w)))return}h=s.createElement("link"),jn(h,"link",e),nn(h),s.head.appendChild(h)}}}function zm(e,n,s){Mr.S(e,n,s);var h=js;if(h&&e){var x=qn(h).hoistableStyles,w=Us(e);n=n||"default";var T=x.get(w);if(!T){var M={loading:0,preload:null};if(T=h.querySelector(Hl(w)))M.loading=5;else{e=O({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Ui.get(w))&&kh(e,s);var P=T=h.createElement("link");nn(P),jn(P,"link",e),P._p=new Promise(function(J,he){P.onload=J,P.onerror=he}),P.addEventListener("load",function(){M.loading|=1}),P.addEventListener("error",function(){M.loading|=2}),M.loading|=4,vc(T,n,h)}T={type:"stylesheet",instance:T,count:1,state:M},x.set(w,T)}}}function Pm(e,n){Mr.X(e,n);var s=js;if(s&&e){var h=qn(s).hoistableScripts,x=zs(e),w=h.get(x);w||(w=s.querySelector(Vl(x)),w||(e=O({src:e,async:!0},n),(n=Ui.get(x))&&jh(e,n),w=s.createElement("script"),nn(w),jn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(x,w))}}function Fm(e,n){Mr.M(e,n);var s=js;if(s&&e){var h=qn(s).hoistableScripts,x=zs(e),w=h.get(x);w||(w=s.querySelector(Vl(x)),w||(e=O({src:e,async:!0,type:"module"},n),(n=Ui.get(x))&&jh(e,n),w=s.createElement("script"),nn(w),jn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(x,w))}}function v1(e,n,s,h){var x=(x=ye.current)?wc(x):null;if(!x)throw Error(f(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Us(s.href),s=qn(x).hoistableStyles,h=s.get(n),h||(h={type:"style",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Us(s.href);var w=qn(x).hoistableStyles,T=w.get(e);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,T),(w=x.querySelector(Hl(e)))&&!w._p&&(T.instance=w,T.state.loading=5),Ui.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Ui.set(e,s),w||Hm(x,e,s,T.state))),n&&h===null)throw Error(f(528,""));return T}if(n&&h!==null)throw Error(f(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=zs(s),s=qn(x).hoistableScripts,h=s.get(n),h||(h={type:"script",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,e))}}function Us(e){return'href="'+at(e)+'"'}function Hl(e){return'link[rel="stylesheet"]['+e+"]"}function b1(e){return O({},e,{"data-precedence":e.precedence,precedence:null})}function Hm(e,n,s,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),jn(n,"link",s),nn(n),e.head.appendChild(n))}function zs(e){return'[src="'+at(e)+'"]'}function Vl(e){return"script[async]"+e}function A1(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+at(s.href)+'"]');if(h)return n.instance=h,nn(h),h;var x=O({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),nn(h),jn(h,"style",x),vc(h,s.precedence,e),n.instance=h;case"stylesheet":x=Us(s.href);var w=e.querySelector(Hl(x));if(w)return n.state.loading|=4,n.instance=w,nn(w),w;h=b1(s),(x=Ui.get(x))&&kh(h,x),w=(e.ownerDocument||e).createElement("link"),nn(w);var T=w;return T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),jn(w,"link",h),n.state.loading|=4,vc(w,s.precedence,e),n.instance=w;case"script":return w=zs(s.src),(x=e.querySelector(Vl(w)))?(n.instance=x,nn(x),x):(h=s,(x=Ui.get(w))&&(h=O({},s),jh(h,x)),e=e.ownerDocument||e,x=e.createElement("script"),nn(x),jn(x,"link",h),e.head.appendChild(x),n.instance=x);case"void":return null;default:throw Error(f(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,vc(h,s.precedence,e));return n.instance}function vc(e,n,s){for(var h=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=h.length?h[h.length-1]:null,w=x,T=0;T<h.length;T++){var M=h[T];if(M.dataset.precedence===n)w=M;else if(w!==x)break}w?w.parentNode.insertBefore(e,w.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function kh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function jh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var bc=null;function E1(e,n,s){if(bc===null){var h=new Map,x=bc=new Map;x.set(s,h)}else x=bc,h=x.get(s),h||(h=new Map,x.set(s,h));if(h.has(e))return h;for(h.set(e,null),s=s.getElementsByTagName(e),x=0;x<s.length;x++){var w=s[x];if(!(w[Na]||w[cn]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var T=w.getAttribute(n)||"";T=e+T;var M=h.get(T);M?M.push(w):h.set(T,[w])}}return h}function S1(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function Vm(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function _1(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Gm(e,n,s,h){if(s.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var x=Us(h.href),w=n.querySelector(Hl(x));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Ac.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=w,nn(w);return}w=n.ownerDocument||n,h=b1(h),(x=Ui.get(x))&&kh(h,x),w=w.createElement("link"),nn(w);var T=w;T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),jn(w,"link",h),s.instance=w}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Ac.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var Uh=0;function Ym(e,n){return e.stylesheets&&e.count===0&&Sc(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var h=setTimeout(function(){if(e.stylesheets&&Sc(e,e.stylesheets),e.unsuspend){var w=e.unsuspend;e.unsuspend=null,w()}},6e4+n);0<e.imgBytes&&Uh===0&&(Uh=62500*_m());var x=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Sc(e,e.stylesheets),e.unsuspend)){var w=e.unsuspend;e.unsuspend=null,w()}},(e.imgBytes>Uh?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(h),clearTimeout(x)}}:null}function Ac(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ec=null;function Sc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ec=new Map,n.forEach(qm,e),Ec=null,Ac.call(e))}function qm(e,n){if(!(n.state.loading&4)){var s=Ec.get(e);if(s)var h=s.get(null);else{s=new Map,Ec.set(e,s);for(var x=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<x.length;w++){var T=x[w];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(s.set(T.dataset.precedence,T),h=T)}h&&s.set(null,h)}x=n.instance,T=x.getAttribute("data-precedence"),w=s.get(T)||h,w===h&&s.set(null,x),s.set(T,x),this.count++,h=Ac.bind(this),x.addEventListener("load",h),x.addEventListener("error",h),w?w.parentNode.insertBefore(x,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(x,e.firstChild)),n.state.loading|=4}}var Gl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function Xm(e,n,s,h,x,w,T,M,P){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.hiddenUpdates=$i(null),this.identifierPrefix=h,this.onUncaughtError=x,this.onCaughtError=w,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function C1(e,n,s,h,x,w,T,M,P,J,he,me){return e=new Xm(e,n,s,T,P,J,he,me,M),n=1,w===!0&&(n|=24),w=mi(3,null,null,n),e.current=w,w.stateNode=e,n=xu(),n.refCount++,e.pooledCache=n,n.refCount++,w.memoizedState={element:h,isDehydrated:s,cache:n},bu(w),e}function T1(e){return e?(e=ps,e):ps}function N1(e,n,s,h,x,w){x=T1(x),h.context===null?h.context=x:h.pendingContext=x,h=ia(n),h.payload={element:s},w=w===void 0?null:w,w!==null&&(h.callback=w),s=ra(e,h,n),s!==null&&(li(s,e,n),Al(s,e,n))}function O1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function zh(e,n){O1(e,n),(e=e.alternate)&&O1(e,n)}function I1(e){if(e.tag===13||e.tag===31){var n=ja(e,67108864);n!==null&&li(n,e,67108864),zh(e,67108864)}}function R1(e){if(e.tag===13||e.tag===31){var n=vi();n=Nn(n);var s=ja(e,n);s!==null&&li(s,e,n),zh(e,n)}}var _c=!0;function Wm(e,n,s,h){var x=te.T;te.T=null;var w=fe.p;try{fe.p=2,Ph(e,n,s,h)}finally{fe.p=w,te.T=x}}function Zm(e,n,s,h){var x=te.T;te.T=null;var w=fe.p;try{fe.p=8,Ph(e,n,s,h)}finally{fe.p=w,te.T=x}}function Ph(e,n,s,h){if(_c){var x=Fh(h);if(x===null)Ch(e,n,h,Cc,s),M1(e,h);else if(Km(x,e,n,s,h))h.stopPropagation();else if(M1(e,h),n&4&&-1<Qm.indexOf(e)){for(;x!==null;){var w=Et(x);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var T=Ji(w.pendingLanes);if(T!==0){var M=w;for(M.pendingLanes|=2,M.entangledLanes|=2;T;){var P=1<<31-tt(T);M.entanglements[1]|=P,T&=~P}cr(w),(_t&6)===0&&(oc=Jt()+500,Ul(0))}}break;case 31:case 13:M=ja(w,2),M!==null&&li(M,w,2),uc(),zh(w,2)}if(w=Fh(h),w===null&&Ch(e,n,h,Cc,s),w===x)break;x=w}x!==null&&h.stopPropagation()}else Ch(e,n,h,null,s)}}function Fh(e){return e=ll(e),Hh(e)}var Cc=null;function Hh(e){if(Cc=null,e=tn(e),e!==null){var n=g(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=b(n),e!==null)return e;e=null}else if(s===31){if(e=S(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Cc=e,null}function D1(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tl()){case Jn:return 2;case nl:return 8;case oi:case Rn:return 32;case il:return 268435456;default:return 32}default:return 32}}var Vh=!1,ma=null,pa=null,xa=null,Yl=new Map,ql=new Map,ya=[],Qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M1(e,n){switch(e){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Yl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(n.pointerId)}}function Xl(e,n,s,h,x,w){return e===null||e.nativeEvent!==w?(e={blockedOn:n,domEventName:s,eventSystemFlags:h,nativeEvent:w,targetContainers:[x]},n!==null&&(n=Et(n),n!==null&&I1(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,x!==null&&n.indexOf(x)===-1&&n.push(x),e)}function Km(e,n,s,h,x){switch(n){case"focusin":return ma=Xl(ma,e,n,s,h,x),!0;case"dragenter":return pa=Xl(pa,e,n,s,h,x),!0;case"mouseover":return xa=Xl(xa,e,n,s,h,x),!0;case"pointerover":var w=x.pointerId;return Yl.set(w,Xl(Yl.get(w)||null,e,n,s,h,x)),!0;case"gotpointercapture":return w=x.pointerId,ql.set(w,Xl(ql.get(w)||null,e,n,s,h,x)),!0}return!1}function B1(e){var n=tn(e.target);if(n!==null){var s=g(n);if(s!==null){if(n=s.tag,n===13){if(n=b(s),n!==null){e.blockedOn=n,Oe(e.priority,function(){R1(s)});return}}else if(n===31){if(n=S(s),n!==null){e.blockedOn=n,Oe(e.priority,function(){R1(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Fh(e.nativeEvent);if(s===null){s=e.nativeEvent;var h=new s.constructor(s.type,s);Oa=h,s.target.dispatchEvent(h),Oa=null}else return n=Et(s),n!==null&&I1(n),e.blockedOn=s,!1;n.shift()}return!0}function L1(e,n,s){Tc(e)&&s.delete(n)}function Jm(){Vh=!1,ma!==null&&Tc(ma)&&(ma=null),pa!==null&&Tc(pa)&&(pa=null),xa!==null&&Tc(xa)&&(xa=null),Yl.forEach(L1),ql.forEach(L1)}function Nc(e,n){e.blockedOn===n&&(e.blockedOn=null,Vh||(Vh=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Jm)))}var Oc=null;function k1(e){Oc!==e&&(Oc=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Oc===e&&(Oc=null);for(var n=0;n<e.length;n+=3){var s=e[n],h=e[n+1],x=e[n+2];if(typeof h!="function"){if(Hh(h||s)===null)continue;break}var w=Et(s);w!==null&&(e.splice(n,3),n-=3,Fu(w,{pending:!0,data:x,method:s.method,action:h},h,x))}}))}function Ps(e){function n(P){return Nc(P,e)}ma!==null&&Nc(ma,e),pa!==null&&Nc(pa,e),xa!==null&&Nc(xa,e),Yl.forEach(n),ql.forEach(n);for(var s=0;s<ya.length;s++){var h=ya[s];h.blockedOn===e&&(h.blockedOn=null)}for(;0<ya.length&&(s=ya[0],s.blockedOn===null);)B1(s),s.blockedOn===null&&ya.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(h=0;h<s.length;h+=3){var x=s[h],w=s[h+1],T=x[Rt]||null;if(typeof w=="function")T||k1(s);else if(T){var M=null;if(w&&w.hasAttribute("formAction")){if(x=w,T=w[Rt]||null)M=T.formAction;else if(Hh(x)!==null)continue}else M=T.action;typeof M=="function"?s[h+1]=M:(s.splice(h,3),h-=3),k1(s)}}}function j1(){function e(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(T){return x=T})},focusReset:"manual",scroll:"manual"})}function n(){x!==null&&(x(),x=null),h||setTimeout(s,20)}function s(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,x=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){h=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),x!==null&&(x(),x=null)}}}function Gh(e){this._internalRoot=e}Ic.prototype.render=Gh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(f(409));var s=n.current,h=vi();N1(s,h,e,n,null,null)},Ic.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;N1(e.current,2,null,e,null,null),uc(),n[ci]=null}};function Ic(e){this._internalRoot=e}Ic.prototype.unstable_scheduleHydration=function(e){if(e){var n=Gn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<ya.length&&n!==0&&n<ya[s].priority;s++);ya.splice(s,0,e),s===0&&B1(e)}};var U1=r.version;if(U1!=="19.2.4")throw Error(f(527,U1,"19.2.4"));fe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(f(188)):(e=Object.keys(e).join(","),Error(f(268,e)));return e=v(n),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var $m={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rc.isDisabled&&Rc.supportsFiber)try{Vt=Rc.inject($m),Ae=Rc}catch{}}return Zl.createRoot=function(e,n){if(!p(e))throw Error(f(299));var s=!1,h="",x=Yd,w=qd,T=Xd;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=C1(e,1,!1,null,null,s,h,null,x,w,T,j1),e[ci]=n.current,_h(e),new Gh(n)},Zl.hydrateRoot=function(e,n,s){if(!p(e))throw Error(f(299));var h=!1,x="",w=Yd,T=qd,M=Xd,P=null;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(x=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(M=s.onRecoverableError),s.formState!==void 0&&(P=s.formState)),n=C1(e,1,!0,n,s??null,h,x,P,w,T,M,j1),n.context=T1(null),s=n.current,h=vi(),h=Nn(h),x=ia(h),x.callback=null,ra(s,x,h),s=h,n.current.lanes=s,er(n,s),cr(n),e[ci]=n.current,_h(e),new Ic(n)},Zl.version="19.2.4",Zl}var W1;function up(){if(W1)return Xh.exports;W1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Xh.exports=cp(),Xh.exports}var hp=up();function Yc(o,r){var l={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&r.indexOf(f)<0&&(l[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,f=Object.getOwnPropertySymbols(o);p<f.length;p++)r.indexOf(f[p])<0&&Object.prototype.propertyIsEnumerable.call(o,f[p])&&(l[f[p]]=o[f[p]]);return l}function fp(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})}const dp=o=>o?(...r)=>o(...r):(...r)=>fetch(...r);class Nf extends Error{constructor(r,l="FunctionsError",f){super(r),this.name=l,this.context=f}}class gp extends Nf{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Z1 extends Nf{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Q1 extends Nf{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var xf;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(xf||(xf={}));class mp{constructor(r,{headers:l={},customFetch:f,region:p=xf.Any}={}){this.url=r,this.headers=l,this.region=p,this.fetch=dp(f)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return fp(this,arguments,void 0,function*(l,f={}){var p;let g,b;try{const{headers:S,method:_,body:v,signal:N,timeout:O}=f;let B={},{region:j}=f;j||(j=this.region);const U=new URL(`${this.url}/${l}`);j&&j!=="any"&&(B["x-region"]=j,U.searchParams.set("forceFunctionRegion",j));let z;v&&(S&&!Object.prototype.hasOwnProperty.call(S,"Content-Type")||!S)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(B["Content-Type"]="application/octet-stream",z=v):typeof v=="string"?(B["Content-Type"]="text/plain",z=v):typeof FormData<"u"&&v instanceof FormData?z=v:(B["Content-Type"]="application/json",z=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?z=JSON.stringify(v):z=v;let q=N;O&&(b=new AbortController,g=setTimeout(()=>b.abort(),O),N?(q=b.signal,N.addEventListener("abort",()=>b.abort())):q=b.signal);const $=yield this.fetch(U.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},B),this.headers),S),body:z,signal:q}).catch(Ne=>{throw new gp(Ne)}),se=$.headers.get("x-relay-error");if(se&&se==="true")throw new Z1($);if(!$.ok)throw new Q1($);let Q=((p=$.headers.get("Content-Type"))!==null&&p!==void 0?p:"text/plain").split(";")[0].trim(),ue;return Q==="application/json"?ue=yield $.json():Q==="application/octet-stream"||Q==="application/pdf"?ue=yield $.blob():Q==="text/event-stream"?ue=$:Q==="multipart/form-data"?ue=yield $.formData():ue=yield $.text(),{data:ue,error:null,response:$}}catch(S){return{data:null,error:S,response:S instanceof Q1||S instanceof Z1?S.context:void 0}}finally{g&&clearTimeout(g)}})}}var pp=class extends Error{constructor(o){super(o.message),this.name="PostgrestError",this.details=o.details,this.hint=o.hint,this.code=o.code}},xp=class{constructor(o){var r,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(r=o.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,r){return this.headers=new Headers(this.headers),this.headers.set(o,r),this}then(o,r){var l=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let p=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{let b=null,S=null,_=null,v=g.status,N=g.statusText;if(g.ok){var O,B;if(l.method!=="HEAD"){var j;const $=await g.text();$===""||(l.headers.get("Accept")==="text/csv"||l.headers.get("Accept")&&(!((j=l.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?S=$:S=JSON.parse($))}const z=(O=l.headers.get("Prefer"))===null||O===void 0?void 0:O.match(/count=(exact|planned|estimated)/),q=(B=g.headers.get("content-range"))===null||B===void 0?void 0:B.split("/");z&&q&&q.length>1&&(_=parseInt(q[1])),l.isMaybeSingle&&l.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,v=406,N="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{var U;const z=await g.text();try{b=JSON.parse(z),Array.isArray(b)&&g.status===404&&(S=[],b=null,v=200,N="OK")}catch{g.status===404&&z===""?(v=204,N="No Content"):b={message:z}}if(b&&l.isMaybeSingle&&(!(b==null||(U=b.details)===null||U===void 0)&&U.includes("0 rows"))&&(b=null,v=200,N="OK"),b&&l.shouldThrowOnError)throw new pp(b)}return{error:b,data:S,count:_,status:v,statusText:N}});return this.shouldThrowOnError||(p=p.catch(g=>{var b;let S="";const _=g?.cause;if(_){var v,N,O,B;const U=(v=_?.message)!==null&&v!==void 0?v:"",z=(N=_?.code)!==null&&N!==void 0?N:"";S=`${(O=g?.name)!==null&&O!==void 0?O:"FetchError"}: ${g?.message}`,S+=`

Caused by: ${(B=_?.name)!==null&&B!==void 0?B:"Error"}: ${U}`,z&&(S+=` (${z})`),_?.stack&&(S+=`
${_.stack}`)}else{var j;S=(j=g?.stack)!==null&&j!==void 0?j:""}return{error:{message:`${(b=g?.name)!==null&&b!==void 0?b:"FetchError"}: ${g?.message}`,details:S,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(o,r)}returns(){return this}overrideTypes(){return this}},yp=class extends xp{select(o){let r=!1;const l=(o??"*").split("").map(f=>/\s/.test(f)&&!r?"":(f==='"'&&(r=!r),f)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:r=!0,nullsFirst:l,foreignTable:f,referencedTable:p=f}={}){const g=p?`${p}.order`:"order",b=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${b?`${b},`:""}${o}.${r?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:r,referencedTable:l=r}={}){const f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,r,{foreignTable:l,referencedTable:f=l}={}){const p=typeof f>"u"?"offset":`${f}.offset`,g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(g,`${r-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:r=!1,settings:l=!1,buffers:f=!1,wal:p=!1,format:g="text"}={}){var b;const S=[o?"analyze":null,r?"verbose":null,l?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${_}"; options=${S};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};const K1=new RegExp("[,()]");var Ws=class extends yp{eq(o,r){return this.url.searchParams.append(o,`eq.${r}`),this}neq(o,r){return this.url.searchParams.append(o,`neq.${r}`),this}gt(o,r){return this.url.searchParams.append(o,`gt.${r}`),this}gte(o,r){return this.url.searchParams.append(o,`gte.${r}`),this}lt(o,r){return this.url.searchParams.append(o,`lt.${r}`),this}lte(o,r){return this.url.searchParams.append(o,`lte.${r}`),this}like(o,r){return this.url.searchParams.append(o,`like.${r}`),this}likeAllOf(o,r){return this.url.searchParams.append(o,`like(all).{${r.join(",")}}`),this}likeAnyOf(o,r){return this.url.searchParams.append(o,`like(any).{${r.join(",")}}`),this}ilike(o,r){return this.url.searchParams.append(o,`ilike.${r}`),this}ilikeAllOf(o,r){return this.url.searchParams.append(o,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(o,r){return this.url.searchParams.append(o,`ilike(any).{${r.join(",")}}`),this}regexMatch(o,r){return this.url.searchParams.append(o,`match.${r}`),this}regexIMatch(o,r){return this.url.searchParams.append(o,`imatch.${r}`),this}is(o,r){return this.url.searchParams.append(o,`is.${r}`),this}isDistinct(o,r){return this.url.searchParams.append(o,`isdistinct.${r}`),this}in(o,r){const l=Array.from(new Set(r)).map(f=>typeof f=="string"&&K1.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}notIn(o,r){const l=Array.from(new Set(r)).map(f=>typeof f=="string"&&K1.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`not.in.(${l})`),this}contains(o,r){return typeof r=="string"?this.url.searchParams.append(o,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(o,`cs.{${r.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(r)}`),this}containedBy(o,r){return typeof r=="string"?this.url.searchParams.append(o,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(o,`cd.{${r.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(r)}`),this}rangeGt(o,r){return this.url.searchParams.append(o,`sr.${r}`),this}rangeGte(o,r){return this.url.searchParams.append(o,`nxl.${r}`),this}rangeLt(o,r){return this.url.searchParams.append(o,`sl.${r}`),this}rangeLte(o,r){return this.url.searchParams.append(o,`nxr.${r}`),this}rangeAdjacent(o,r){return this.url.searchParams.append(o,`adj.${r}`),this}overlaps(o,r){return typeof r=="string"?this.url.searchParams.append(o,`ov.${r}`):this.url.searchParams.append(o,`ov.{${r.join(",")}}`),this}textSearch(o,r,{config:l,type:f}={}){let p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");const g=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${p}fts${g}.${r}`),this}match(o){return Object.entries(o).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(o,r,l){return this.url.searchParams.append(o,`not.${r}.${l}`),this}or(o,{foreignTable:r,referencedTable:l=r}={}){const f=l?`${l}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,r,l){return this.url.searchParams.append(o,`${r}.${l}`),this}},wp=class{constructor(o,{headers:r={},schema:l,fetch:f}){this.url=o,this.headers=new Headers(r),this.schema=l,this.fetch=f}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(o,r){const{head:l=!1,count:f}=r??{},p=l?"HEAD":"GET";let g=!1;const b=(o??"*").split("").map(v=>/\s/.test(v)&&!g?"":(v==='"'&&(g=!g),v)).join(""),{url:S,headers:_}=this.cloneRequestState();return S.searchParams.set("select",b),f&&_.append("Prefer",`count=${f}`),new Ws({method:p,url:S,headers:_,schema:this.schema,fetch:this.fetch})}insert(o,{count:r,defaultToNull:l=!0}={}){var f;const p="POST",{url:g,headers:b}=this.cloneRequestState();if(r&&b.append("Prefer",`count=${r}`),l||b.append("Prefer","missing=default"),Array.isArray(o)){const S=o.reduce((_,v)=>_.concat(Object.keys(v)),[]);if(S.length>0){const _=[...new Set(S)].map(v=>`"${v}"`);g.searchParams.set("columns",_.join(","))}}return new Ws({method:p,url:g,headers:b,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:r,ignoreDuplicates:l=!1,count:f,defaultToNull:p=!0}={}){var g;const b="POST",{url:S,headers:_}=this.cloneRequestState();if(_.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),r!==void 0&&S.searchParams.set("on_conflict",r),f&&_.append("Prefer",`count=${f}`),p||_.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((N,O)=>N.concat(Object.keys(O)),[]);if(v.length>0){const N=[...new Set(v)].map(O=>`"${O}"`);S.searchParams.set("columns",N.join(","))}}return new Ws({method:b,url:S,headers:_,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:r}={}){var l;const f="PATCH",{url:p,headers:g}=this.cloneRequestState();return r&&g.append("Prefer",`count=${r}`),new Ws({method:f,url:p,headers:g,schema:this.schema,body:o,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:o}={}){var r;const l="DELETE",{url:f,headers:p}=this.cloneRequestState();return o&&p.append("Prefer",`count=${o}`),new Ws({method:l,url:f,headers:p,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},vp=class $g{constructor(r,{headers:l={},schema:f,fetch:p}={}){this.url=r,this.headers=new Headers(l),this.schemaName=f,this.fetch=p}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new wp(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new $g(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,l={},{head:f=!1,get:p=!1,count:g}={}){var b;let S;const _=new URL(`${this.url}/rpc/${r}`);let v;const N=j=>j!==null&&typeof j=="object"&&(!Array.isArray(j)||j.some(N)),O=f&&Object.values(l).some(N);O?(S="POST",v=l):f||p?(S=f?"HEAD":"GET",Object.entries(l).filter(([j,U])=>U!==void 0).map(([j,U])=>[j,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([j,U])=>{_.searchParams.append(j,U)})):(S="POST",v=l);const B=new Headers(this.headers);return O?B.set("Prefer",g?`count=${g},return=minimal`:"return=minimal"):g&&B.set("Prefer",`count=${g}`),new Ws({method:S,url:_,headers:B,schema:this.schemaName,body:v,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};class bp{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const l=globalThis.process;if(l){const f=l.versions;if(f&&f.node){const p=f.node,g=parseInt(p.replace(/^v/,"").split(".")[0]);return g>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${g} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${g} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let l=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(l+=`

Suggested solution: ${r.workaround}`),new Error(l)}static createWebSocket(r,l){const f=this.getWebSocketConstructor();return new f(r,l)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Ap="2.93.3",Ep=`realtime-js/${Ap}`,Sp="1.0.0",e2="2.0.0",J1=e2,yf=1e4,_p=1e3,Cp=100;var ba;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(ba||(ba={}));var Tn;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Tn||(Tn={}));var Qi;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Qi||(Qi={}));var wf;(function(o){o.websocket="websocket"})(wf||(wf={}));var $a;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})($a||($a={}));class Tp{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,l){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return l(this._binaryEncodeUserBroadcastPush(r));let f=[r.join_ref,r.ref,r.topic,r.event,r.payload];return l(JSON.stringify(f))}_binaryEncodeUserBroadcastPush(r){var l;return this._isArrayBuffer((l=r.payload)===null||l===void 0?void 0:l.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var l,f;const p=(f=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&f!==void 0?f:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,p)}_encodeJsonUserBroadcastPush(r){var l,f;const p=(f=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&f!==void 0?f:{},b=new TextEncoder().encode(JSON.stringify(p)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,b)}_encodeUserBroadcastPush(r,l,f){var p,g;const b=r.topic,S=(p=r.ref)!==null&&p!==void 0?p:"",_=(g=r.join_ref)!==null&&g!==void 0?g:"",v=r.payload.event,N=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},O=Object.keys(N).length===0?"":JSON.stringify(N);if(_.length>255)throw new Error(`joinRef length ${_.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`ref length ${S.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`topic length ${b.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(O.length>255)throw new Error(`metadata length ${O.length} exceeds maximum of 255`);const B=this.USER_BROADCAST_PUSH_META_LENGTH+_.length+S.length+b.length+v.length+O.length,j=new ArrayBuffer(this.HEADER_LENGTH+B);let U=new DataView(j),z=0;U.setUint8(z++,this.KINDS.userBroadcastPush),U.setUint8(z++,_.length),U.setUint8(z++,S.length),U.setUint8(z++,b.length),U.setUint8(z++,v.length),U.setUint8(z++,O.length),U.setUint8(z++,l),Array.from(_,$=>U.setUint8(z++,$.charCodeAt(0))),Array.from(S,$=>U.setUint8(z++,$.charCodeAt(0))),Array.from(b,$=>U.setUint8(z++,$.charCodeAt(0))),Array.from(v,$=>U.setUint8(z++,$.charCodeAt(0))),Array.from(O,$=>U.setUint8(z++,$.charCodeAt(0)));var q=new Uint8Array(j.byteLength+f.byteLength);return q.set(new Uint8Array(j),0),q.set(new Uint8Array(f),j.byteLength),q.buffer}decode(r,l){if(this._isArrayBuffer(r)){let f=this._binaryDecode(r);return l(f)}if(typeof r=="string"){const f=JSON.parse(r),[p,g,b,S,_]=f;return l({join_ref:p,ref:g,topic:b,event:S,payload:_})}return l({})}_binaryDecode(r){const l=new DataView(r),f=l.getUint8(0),p=new TextDecoder;if(f===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,l,p)}_decodeUserBroadcast(r,l,f){const p=l.getUint8(1),g=l.getUint8(2),b=l.getUint8(3),S=l.getUint8(4);let _=this.HEADER_LENGTH+4;const v=f.decode(r.slice(_,_+p));_=_+p;const N=f.decode(r.slice(_,_+g));_=_+g;const O=f.decode(r.slice(_,_+b));_=_+b;const B=r.slice(_,r.byteLength),j=S===this.JSON_ENCODING?JSON.parse(f.decode(B)):B,U={type:this.BROADCAST_EVENT,event:N,payload:j};return b>0&&(U.meta=JSON.parse(O)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:U}}_isArrayBuffer(r){var l;return r instanceof ArrayBuffer||((l=r?.constructor)===null||l===void 0?void 0:l.name)==="ArrayBuffer"}_pick(r,l){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([f])=>l.includes(f)))}}class t2{constructor(r,l){this.callback=r,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gt;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Gt||(Gt={}));const $1=(o,r,l={})=>{var f;const p=(f=l.skipTypes)!==null&&f!==void 0?f:[];return r?Object.keys(r).reduce((g,b)=>(g[b]=Np(b,o,r,p),g),{}):{}},Np=(o,r,l,f)=>{const p=r.find(S=>S.name===o),g=p?.type,b=l[o];return g&&!f.includes(g)?n2(g,b):vf(b)},n2=(o,r)=>{if(o.charAt(0)==="_"){const l=o.slice(1,o.length);return Dp(r,l)}switch(o){case Gt.bool:return Op(r);case Gt.float4:case Gt.float8:case Gt.int2:case Gt.int4:case Gt.int8:case Gt.numeric:case Gt.oid:return Ip(r);case Gt.json:case Gt.jsonb:return Rp(r);case Gt.timestamp:return Mp(r);case Gt.abstime:case Gt.date:case Gt.daterange:case Gt.int4range:case Gt.int8range:case Gt.money:case Gt.reltime:case Gt.text:case Gt.time:case Gt.timestamptz:case Gt.timetz:case Gt.tsrange:case Gt.tstzrange:return vf(r);default:return vf(r)}},vf=o=>o,Op=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Ip=o=>{if(typeof o=="string"){const r=parseFloat(o);if(!Number.isNaN(r))return r}return o},Rp=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch{return o}return o},Dp=(o,r)=>{if(typeof o!="string")return o;const l=o.length-1,f=o[l];if(o[0]==="{"&&f==="}"){let g;const b=o.slice(1,l);try{g=JSON.parse("["+b+"]")}catch{g=b?b.split(","):[]}return g.map(S=>n2(r,S))}return o},Mp=o=>typeof o=="string"?o.replace(" ","T"):o,i2=o=>{const r=new URL(o);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Kh{constructor(r,l,f={},p=yf){this.channel=r,this.event=l,this.payload=f,this.timeout=p,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,l){var f;return this._hasReceived(r)&&l((f=this.receivedResp)===null||f===void 0?void 0:f.response),this.recHooks.push({status:r,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:l}){this.recHooks.filter(f=>f.status===r).forEach(f=>f.callback(l))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var eg;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(eg||(eg={}));class $l{constructor(r,l){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const f=l?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(f.state,{},p=>{const{onJoin:g,onLeave:b,onSync:S}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$l.syncState(this.state,p,g,b),this.pendingDiffs.forEach(_=>{this.state=$l.syncDiff(this.state,_,g,b)}),this.pendingDiffs=[],S()}),this.channel._on(f.diff,{},p=>{const{onJoin:g,onLeave:b,onSync:S}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(p):(this.state=$l.syncDiff(this.state,p,g,b),S())}),this.onJoin((p,g,b)=>{this.channel._trigger("presence",{event:"join",key:p,currentPresences:g,newPresences:b})}),this.onLeave((p,g,b)=>{this.channel._trigger("presence",{event:"leave",key:p,currentPresences:g,leftPresences:b})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,l,f,p){const g=this.cloneDeep(r),b=this.transformState(l),S={},_={};return this.map(g,(v,N)=>{b[v]||(_[v]=N)}),this.map(b,(v,N)=>{const O=g[v];if(O){const B=N.map(q=>q.presence_ref),j=O.map(q=>q.presence_ref),U=N.filter(q=>j.indexOf(q.presence_ref)<0),z=O.filter(q=>B.indexOf(q.presence_ref)<0);U.length>0&&(S[v]=U),z.length>0&&(_[v]=z)}else S[v]=N}),this.syncDiff(g,{joins:S,leaves:_},f,p)}static syncDiff(r,l,f,p){const{joins:g,leaves:b}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return f||(f=()=>{}),p||(p=()=>{}),this.map(g,(S,_)=>{var v;const N=(v=r[S])!==null&&v!==void 0?v:[];if(r[S]=this.cloneDeep(_),N.length>0){const O=r[S].map(j=>j.presence_ref),B=N.filter(j=>O.indexOf(j.presence_ref)<0);r[S].unshift(...B)}f(S,N,_)}),this.map(b,(S,_)=>{let v=r[S];if(!v)return;const N=_.map(O=>O.presence_ref);v=v.filter(O=>N.indexOf(O.presence_ref)<0),r[S]=v,p(S,v,_),v.length===0&&delete r[S]}),r}static map(r,l){return Object.getOwnPropertyNames(r).map(f=>l(f,r[f]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((l,f)=>{const p=r[f];return"metas"in p?l[f]=p.metas.map(g=>(g.presence_ref=g.phx_ref,delete g.phx_ref,delete g.phx_ref_prev,g)):l[f]=p,l},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tg;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(tg||(tg={}));var eo;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(eo||(eo={}));var Br;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Br||(Br={}));class Ks{constructor(r,l={config:{}},f){var p,g;if(this.topic=r,this.params=l,this.socket=f,this.bindings={},this.state=Tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Kh(this,Qi.join,this.params,this.timeout),this.rejoinTimer=new t2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(b=>b.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tn.closed,this.socket._remove(this)}),this._onError(b=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,b),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",b=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,b),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qi.reply,{},(b,S)=>{this._trigger(this._replyEventName(S),b)}),this.presence=new $l(this),this.broadcastEndpointURL=i2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((g=(p=this.params.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,l=this.timeout){var f,p,g;if(this.socket.isConnected()||this.socket.connect(),this.state==Tn.closed){const{config:{broadcast:b,presence:S,private:_}}=this.params,v=(p=(f=this.bindings.postgres_changes)===null||f===void 0?void 0:f.map(j=>j.filter))!==null&&p!==void 0?p:[],N=!!this.bindings[eo.PRESENCE]&&this.bindings[eo.PRESENCE].length>0||((g=this.params.config.presence)===null||g===void 0?void 0:g.enabled)===!0,O={},B={broadcast:b,presence:Object.assign(Object.assign({},S),{enabled:N}),postgres_changes:v,private:_};this.socket.accessTokenValue&&(O.access_token=this.socket.accessTokenValue),this._onError(j=>r?.(Br.CHANNEL_ERROR,j)),this._onClose(()=>r?.(Br.CLOSED)),this.updateJoinPayload(Object.assign({config:B},O)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:j})=>{var U;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){r?.(Br.SUBSCRIBED);return}else{const z=this.bindings.postgres_changes,q=(U=z?.length)!==null&&U!==void 0?U:0,$=[];for(let se=0;se<q;se++){const Q=z[se],{filter:{event:ue,schema:Ne,table:ve,filter:W}}=Q,ee=j&&j[se];if(ee&&ee.event===ue&&Ks.isFilterValueEqual(ee.schema,Ne)&&Ks.isFilterValueEqual(ee.table,ve)&&Ks.isFilterValueEqual(ee.filter,W))$.push(Object.assign(Object.assign({},Q),{id:ee.id}));else{this.unsubscribe(),this.state=Tn.errored,r?.(Br.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,r&&r(Br.SUBSCRIBED);return}}).receive("error",j=>{this.state=Tn.errored,r?.(Br.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{r?.(Br.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,l={}){return await this.send({type:"presence",event:"track",payload:r},l.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,l,f){return this.state===Tn.joined&&r===eo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,l,f)}async httpSend(r,l,f={}){var p;if(l==null)return Promise.reject("Payload is required for httpSend()");const g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const b={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:l,private:this.private}]})},S=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(p=f.timeout)!==null&&p!==void 0?p:this.timeout);if(S.status===202)return{success:!0};let _=S.statusText;try{const v=await S.json();_=v.error||v.message||_}catch{}return Promise.reject(new Error(_))}async send(r,l={}){var f,p;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:g,payload:b}=r,S={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(S.Authorization=`Bearer ${this.socket.accessTokenValue}`);const _={method:"POST",headers:S,body:JSON.stringify({messages:[{topic:this.subTopic,event:g,payload:b,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(f=l.timeout)!==null&&f!==void 0?f:this.timeout);return await((p=v.body)===null||p===void 0?void 0:p.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(g=>{var b,S,_;const v=this._push(r.type,r,l.timeout||this.timeout);r.type==="broadcast"&&!(!((_=(S=(b=this.params)===null||b===void 0?void 0:b.config)===null||S===void 0?void 0:S.broadcast)===null||_===void 0)&&_.ack)&&g("ok"),v.receive("ok",()=>g("ok")),v.receive("error",()=>g("error")),v.receive("timeout",()=>g("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Tn.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qi.close,"leave",this._joinRef())};this.joinPush.destroy();let f=null;return new Promise(p=>{f=new Kh(this,Qi.leave,{},r),f.receive("ok",()=>{l(),p("ok")}).receive("timeout",()=>{l(),p("timed out")}).receive("error",()=>{p("error")}),f.send(),this._canPush()||f.trigger("ok",{})}).finally(()=>{f?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tn.closed,this.bindings={}}async _fetchWithTimeout(r,l,f){const p=new AbortController,g=setTimeout(()=>p.abort(),f),b=await this.socket.fetch(r,Object.assign(Object.assign({},l),{signal:p.signal}));return clearTimeout(g),b}_push(r,l,f=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let p=new Kh(this,r,l,f);return this._canPush()?p.send():this._addToPushBuffer(p),p}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Cp){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(r,l,f){return l}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,l,f){var p,g;const b=r.toLocaleLowerCase(),{close:S,error:_,leave:v,join:N}=Qi;if(f&&[S,_,v,N].indexOf(b)>=0&&f!==this._joinRef())return;let B=this._onMessage(b,l,f);if(l&&!B)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(b)?(p=this.bindings.postgres_changes)===null||p===void 0||p.filter(j=>{var U,z,q;return((U=j.filter)===null||U===void 0?void 0:U.event)==="*"||((q=(z=j.filter)===null||z===void 0?void 0:z.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===b}).map(j=>j.callback(B,f)):(g=this.bindings[b])===null||g===void 0||g.filter(j=>{var U,z,q,$,se,Q;if(["broadcast","presence","postgres_changes"].includes(b))if("id"in j){const ue=j.id,Ne=(U=j.filter)===null||U===void 0?void 0:U.event;return ue&&((z=l.ids)===null||z===void 0?void 0:z.includes(ue))&&(Ne==="*"||Ne?.toLocaleLowerCase()===((q=l.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const ue=(se=($=j?.filter)===null||$===void 0?void 0:$.event)===null||se===void 0?void 0:se.toLocaleLowerCase();return ue==="*"||ue===((Q=l?.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===b}).map(j=>{if(typeof B=="object"&&"ids"in B){const U=B.data,{schema:z,table:q,commit_timestamp:$,type:se,errors:Q}=U;B=Object.assign(Object.assign({},{schema:z,table:q,commit_timestamp:$,eventType:se,new:{},old:{},errors:Q}),this._getPayloadRecords(U))}j.callback(B,f)})}_isClosed(){return this.state===Tn.closed}_isJoined(){return this.state===Tn.joined}_isJoining(){return this.state===Tn.joining}_isLeaving(){return this.state===Tn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,l,f){const p=r.toLocaleLowerCase(),g={type:p,filter:l,callback:f};return this.bindings[p]?this.bindings[p].push(g):this.bindings[p]=[g],this}_off(r,l){const f=r.toLocaleLowerCase();return this.bindings[f]&&(this.bindings[f]=this.bindings[f].filter(p=>{var g;return!(((g=p.type)===null||g===void 0?void 0:g.toLocaleLowerCase())===f&&Ks.isEqual(p.filter,l))})),this}static isEqual(r,l){if(Object.keys(r).length!==Object.keys(l).length)return!1;for(const f in r)if(r[f]!==l[f])return!1;return!0}static isFilterValueEqual(r,l){return(r??void 0)===(l??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Qi.close,{},r)}_onError(r){this._on(Qi.error,{},l=>r(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const l={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(l.new=$1(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(l.old=$1(r.columns,r.old_record)),l}}const Jh=()=>{},Mc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bp=[1e3,2e3,5e3,1e4],Lp=1e4,kp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jp{constructor(r,l){var f;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yf,this.transport=null,this.heartbeatIntervalMs=Mc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jh,this.ref=0,this.reconnectTimer=null,this.vsn=J1,this.logger=Jh,this.conn=null,this.sendBuffer=[],this.serializer=new Tp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=p=>p?(...g)=>p(...g):(...g)=>fetch(...g),!(!((f=l?.params)===null||f===void 0)&&f.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${r}/${wf.websocket}`,this.httpEndpoint=i2(r),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bp.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const l=r.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const f=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(f),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,l??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const l=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const r=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,l,f){this.logger(r,l,f)}connectionState(){switch(this.conn&&this.conn.readyState){case ba.connecting:return $a.Connecting;case ba.open:return $a.Open;case ba.closing:return $a.Closing;default:return $a.Closed}}isConnected(){return this.connectionState()===$a.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,l={config:{}}){const f=`realtime:${r}`,p=this.getChannels().find(g=>g.topic===f);if(p)return p;{const g=new Ks(`realtime:${r}`,l,this);return this.channels.push(g),g}}push(r){const{topic:l,event:f,payload:p,ref:g}=r,b=()=>{this.encode(r,S=>{var _;(_=this.conn)===null||_===void 0||_.send(S)})};this.log("push",`${l} ${f} (${g})`,p),this.isConnected()?b():this.sendBuffer.push(b)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(_p,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},Mc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let l=this.channels.find(f=>f.topic===r&&(f._isJoined()||f._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${r}"`),l.unsubscribe())}_remove(r){this.channels=this.channels.filter(l=>l.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply"&&l.ref&&l.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error",v)}catch(N){this.log("error","error in heartbeat callback",N)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:f,event:p,payload:g,ref:b}=l,S=b?`(${b})`:"",_=g.status||"";this.log("receive",`${_} ${f} ${p} ${S}`.trim(),g),this.channels.filter(v=>v._isMember(f)).forEach(v=>v._trigger(p,g,b)),this._triggerStateCallbacks("message",l)})}_clearTimer(r){var l;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===ba.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ba.open||this.conn.readyState===ba.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(l=>{this.log("error","error waiting for auth on connect",l),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this._terminateWorker()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var l;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r);try{this.heartbeatCallback("error")}catch(l){this.log("error","error in heartbeat callback",l)}}_triggerChanError(){this.channels.forEach(r=>r._trigger(Qi.error))}_appendParams(r,l){if(Object.keys(l).length===0)return r;const f=r.match(/\?/)?"&":"?",p=new URLSearchParams(l);return`${r}${f}${p}`}_workerObjectUrl(r){let l;if(r)l=r;else{const f=new Blob([kp],{type:"application/javascript"});l=URL.createObjectURL(f)}return l}_setConnectionState(r,l=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(r=null){let l,f=!1;if(r)l=r,f=!0;else if(this.accessToken)try{l=await this.accessToken()}catch(p){this.log("error","Error fetching access token from callback",p),l=this.accessTokenValue}else l=this.accessTokenValue;f?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(p=>{const g={access_token:l,version:Ep};l&&p.updateJoinPayload(g),p.joinedOnce&&p._isJoined()&&p._push(Qi.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(l=>{this.log("error",`Error setting auth in ${r}`,l)})}_triggerStateCallbacks(r,l){try{this.stateChangeCallbacks[r].forEach(f=>{try{f(l)}catch(p){this.log("error",`error in ${r} callback`,p)}})}catch(f){this.log("error",`error triggering ${r} callbacks`,f)}}_setupReconnectionTimer(){this.reconnectTimer=new t2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var l,f,p,g,b,S,_,v,N,O,B,j;switch(this.transport=(l=r?.transport)!==null&&l!==void 0?l:null,this.timeout=(f=r?.timeout)!==null&&f!==void 0?f:yf,this.heartbeatIntervalMs=(p=r?.heartbeatIntervalMs)!==null&&p!==void 0?p:Mc.HEARTBEAT_INTERVAL,this.worker=(g=r?.worker)!==null&&g!==void 0?g:!1,this.accessToken=(b=r?.accessToken)!==null&&b!==void 0?b:null,this.heartbeatCallback=(S=r?.heartbeatCallback)!==null&&S!==void 0?S:Jh,this.vsn=(_=r?.vsn)!==null&&_!==void 0?_:J1,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=r?.reconnectAfterMs)!==null&&v!==void 0?v:(U=>Bp[U-1]||Lp),this.vsn){case Sp:this.encode=(N=r?.encode)!==null&&N!==void 0?N:((U,z)=>z(JSON.stringify(U))),this.decode=(O=r?.decode)!==null&&O!==void 0?O:((U,z)=>z(JSON.parse(U)));break;case e2:this.encode=(B=r?.encode)!==null&&B!==void 0?B:this.serializer.encode.bind(this.serializer),this.decode=(j=r?.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var to=class extends Error{constructor(o,r){super(o),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Up(o,r,l){const f=new URL(r,o);if(l)for(const[p,g]of Object.entries(l))g!==void 0&&f.searchParams.set(p,g);return f.toString()}async function zp(o){return!o||o.type==="none"?{}:o.type==="bearer"?{Authorization:`Bearer ${o.token}`}:o.type==="header"?{[o.name]:o.value}:o.type==="custom"?await o.getHeaders():{}}function Pp(o){const r=o.fetchImpl??globalThis.fetch;return{async request({method:l,path:f,query:p,body:g,headers:b}){const S=Up(o.baseUrl,f,p),_=await zp(o.auth),v=await r(S,{method:l,headers:{...g?{"Content-Type":"application/json"}:{},..._,...b},body:g?JSON.stringify(g):void 0}),N=await v.text(),O=(v.headers.get("content-type")||"").includes("application/json"),B=O&&N?JSON.parse(N):N;if(!v.ok){const j=O?B:void 0,U=j?.error;throw new to(U?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:U?.type,icebergCode:U?.code,details:j})}return{status:v.status,headers:v.headers,data:B}}}}function Bc(o){return o.join("")}var Fp=class{constructor(o,r=""){this.client=o,this.prefix=r}async listNamespaces(o){const r=o?{parent:Bc(o.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(f=>({namespace:f}))}async createNamespace(o,r){const l={namespace:o.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:l})).data}async dropNamespace(o){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bc(o.namespace)}`})}async loadNamespaceMetadata(o){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bc(o.namespace)}`})).data.properties}}async namespaceExists(o){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bc(o.namespace)}`}),!0}catch(r){if(r instanceof to&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(o,r){try{return await this.createNamespace(o,r)}catch(l){if(l instanceof to&&l.status===409)return;throw l}}};function Fs(o){return o.join("")}var Hp=class{constructor(o,r="",l){this.client=o,this.prefix=r,this.accessDelegation=l}async listTables(o){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables`})).data.identifiers}async createTable(o,r){const l={};return this.accessDelegation&&(l["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables`,body:r,headers:l})).data.metadata}async updateTable(o,r){const l=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,body:r});return{"metadata-location":l.data["metadata-location"],metadata:l.data.metadata}}async dropTable(o,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(o){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,headers:r})).data.metadata}async tableExists(o){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,headers:r}),!0}catch(l){if(l instanceof to&&l.status===404)return!1;throw l}}async createTableIfNotExists(o,r){try{return await this.createTable(o,r)}catch(l){if(l instanceof to&&l.status===409)return await this.loadTable({namespace:o.namespace,name:r.name});throw l}}},Vp=class{constructor(o){let r="v1";o.catalogName&&(r+=`/${o.catalogName}`);const l=o.baseUrl.endsWith("/")?o.baseUrl:`${o.baseUrl}/`;this.client=Pp({baseUrl:l,auth:o.auth,fetchImpl:o.fetch}),this.accessDelegation=o.accessDelegation?.join(","),this.namespaceOps=new Fp(this.client,r),this.tableOps=new Hp(this.client,r,this.accessDelegation)}async listNamespaces(o){return this.namespaceOps.listNamespaces(o)}async createNamespace(o,r){return this.namespaceOps.createNamespace(o,r)}async dropNamespace(o){await this.namespaceOps.dropNamespace(o)}async loadNamespaceMetadata(o){return this.namespaceOps.loadNamespaceMetadata(o)}async listTables(o){return this.tableOps.listTables(o)}async createTable(o,r){return this.tableOps.createTable(o,r)}async updateTable(o,r){return this.tableOps.updateTable(o,r)}async dropTable(o,r){await this.tableOps.dropTable(o,r)}async loadTable(o){return this.tableOps.loadTable(o)}async namespaceExists(o){return this.namespaceOps.namespaceExists(o)}async tableExists(o){return this.tableOps.tableExists(o)}async createNamespaceIfNotExists(o,r){return this.namespaceOps.createNamespaceIfNotExists(o,r)}async createTableIfNotExists(o,r){return this.tableOps.createTableIfNotExists(o,r)}},qc=class extends Error{constructor(o,r="storage",l,f){super(o),this.__isStorageError=!0,this.namespace=r,this.name=r==="vectors"?"StorageVectorsError":"StorageError",this.status=l,this.statusCode=f}};function Xc(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}var Lc=class extends qc{constructor(o,r,l,f="storage"){super(o,f,r,l),this.name=f==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},r2=class extends qc{constructor(o,r,l="storage"){super(o,l),this.name=l==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=r}};const Gp=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Yp=o=>{if(typeof o!="object"||o===null)return!1;const r=Object.getPrototypeOf(o);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},bf=o=>{if(Array.isArray(o))return o.map(l=>bf(l));if(typeof o=="function"||o!==Object(o))return o;const r={};return Object.entries(o).forEach(([l,f])=>{const p=l.replace(/([-_][a-z])/gi,g=>g.toUpperCase().replace(/[-_]/g,""));r[p]=bf(f)}),r},qp=o=>!o||typeof o!="string"||o.length===0||o.length>100||o.trim()!==o||o.includes("/")||o.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(o);function no(o){"@babel/helpers - typeof";return no=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},no(o)}function Xp(o,r){if(no(o)!="object"||!o)return o;var l=o[Symbol.toPrimitive];if(l!==void 0){var f=l.call(o,r);if(no(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}function Wp(o){var r=Xp(o,"string");return no(r)=="symbol"?r:r+""}function Zp(o,r,l){return(r=Wp(r))in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function ng(o,r){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);r&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable})),l.push.apply(l,f)}return l}function qe(o){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?ng(Object(l),!0).forEach(function(f){Zp(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):ng(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}const ig=o=>{var r;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(r=o.error)===null||r===void 0?void 0:r.message)||JSON.stringify(o)},Qp=async(o,r,l,f)=>{if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!l?.noResolveJson){const p=o,g=p.status||500;if(typeof p.json=="function")p.json().then(b=>{const S=b?.statusCode||b?.code||g+"";r(new Lc(ig(b),g,S,f))}).catch(()=>{if(f==="vectors"){const b=g+"";r(new Lc(p.statusText||`HTTP ${g} error`,g,b,f))}else{const b=g+"";r(new Lc(p.statusText||`HTTP ${g} error`,g,b,f))}});else{const b=g+"";r(new Lc(p.statusText||`HTTP ${g} error`,g,b,f))}}else r(new r2(ig(o),o,f))},Kp=(o,r,l,f)=>{const p={method:o,headers:r?.headers||{}};return o==="GET"||o==="HEAD"||!f?qe(qe({},p),l):(Yp(f)?(p.headers=qe({"Content-Type":"application/json"},r?.headers),p.body=JSON.stringify(f)):p.body=f,r?.duplex&&(p.duplex=r.duplex),qe(qe({},p),l))};async function Ql(o,r,l,f,p,g,b){return new Promise((S,_)=>{o(l,Kp(r,f,p,g)).then(v=>{if(!v.ok)throw v;if(f?.noResolveJson)return v;if(b==="vectors"){const N=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!N||!N.includes("application/json"))return{}}return v.json()}).then(v=>S(v)).catch(v=>Qp(v,_,f,b))})}function a2(o="storage"){return{get:async(r,l,f,p)=>Ql(r,"GET",l,f,p,void 0,o),post:async(r,l,f,p,g)=>Ql(r,"POST",l,p,g,f,o),put:async(r,l,f,p,g)=>Ql(r,"PUT",l,p,g,f,o),head:async(r,l,f,p)=>Ql(r,"HEAD",l,qe(qe({},f),{},{noResolveJson:!0}),p,void 0,o),remove:async(r,l,f,p,g)=>Ql(r,"DELETE",l,p,g,f,o)}}const Jp=a2("storage"),{get:io,post:Zi,put:Af,head:$p,remove:Of}=Jp,Si=a2("vectors");var el=class{constructor(o,r={},l,f="storage"){this.shouldThrowOnError=!1,this.url=o,this.headers=r,this.fetch=Gp(l),this.namespace=f}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(o){var r=this;try{return{data:await o(),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Xc(l))return{data:null,error:l};throw l}}},ex=class{constructor(o,r){this.downloadFn=o,this.shouldThrowOnError=r}then(o,r){return this.execute().then(o,r)}async execute(){var o=this;try{return{data:(await o.downloadFn()).body,error:null}}catch(r){if(o.shouldThrowOnError)throw r;if(Xc(r))return{data:null,error:r};throw r}}};let s2;s2=Symbol.toStringTag;var tx=class{constructor(o,r){this.downloadFn=o,this.shouldThrowOnError=r,this[s2]="BlobDownloadBuilder",this.promise=null}asStream(){return new ex(this.downloadFn,this.shouldThrowOnError)}then(o,r){return this.getPromise().then(o,r)}catch(o){return this.getPromise().catch(o)}finally(o){return this.getPromise().finally(o)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var o=this;try{return{data:await(await o.downloadFn()).blob(),error:null}}catch(r){if(o.shouldThrowOnError)throw r;if(Xc(r))return{data:null,error:r};throw r}}};const nx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ix=class extends el{constructor(o,r={},l,f){super(o,r,f,"storage"),this.bucketId=l}async uploadOrUpdate(o,r,l,f){var p=this;return p.handleOperation(async()=>{let g;const b=qe(qe({},rg),f);let S=qe(qe({},p.headers),o==="POST"&&{"x-upsert":String(b.upsert)});const _=b.metadata;typeof Blob<"u"&&l instanceof Blob?(g=new FormData,g.append("cacheControl",b.cacheControl),_&&g.append("metadata",p.encodeMetadata(_)),g.append("",l)):typeof FormData<"u"&&l instanceof FormData?(g=l,g.has("cacheControl")||g.append("cacheControl",b.cacheControl),_&&!g.has("metadata")&&g.append("metadata",p.encodeMetadata(_))):(g=l,S["cache-control"]=`max-age=${b.cacheControl}`,S["content-type"]=b.contentType,_&&(S["x-metadata"]=p.toBase64(p.encodeMetadata(_))),(typeof ReadableStream<"u"&&g instanceof ReadableStream||g&&typeof g=="object"&&"pipe"in g&&typeof g.pipe=="function")&&!b.duplex&&(b.duplex="half")),f?.headers&&(S=qe(qe({},S),f.headers));const v=p._removeEmptyFolders(r),N=p._getFinalPath(v),O=await(o=="PUT"?Af:Zi)(p.fetch,`${p.url}/object/${N}`,g,qe({headers:S},b?.duplex?{duplex:b.duplex}:{}));return{path:v,id:O.Id,fullPath:O.Key}})}async upload(o,r,l){return this.uploadOrUpdate("POST",o,r,l)}async uploadToSignedUrl(o,r,l,f){var p=this;const g=p._removeEmptyFolders(o),b=p._getFinalPath(g),S=new URL(p.url+`/object/upload/sign/${b}`);return S.searchParams.set("token",r),p.handleOperation(async()=>{let _;const v=qe({upsert:rg.upsert},f),N=qe(qe({},p.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&l instanceof Blob?(_=new FormData,_.append("cacheControl",v.cacheControl),_.append("",l)):typeof FormData<"u"&&l instanceof FormData?(_=l,_.append("cacheControl",v.cacheControl)):(_=l,N["cache-control"]=`max-age=${v.cacheControl}`,N["content-type"]=v.contentType),{path:g,fullPath:(await Af(p.fetch,S.toString(),_,{headers:N})).Key}})}async createSignedUploadUrl(o,r){var l=this;return l.handleOperation(async()=>{let f=l._getFinalPath(o);const p=qe({},l.headers);r?.upsert&&(p["x-upsert"]="true");const g=await Zi(l.fetch,`${l.url}/object/upload/sign/${f}`,{},{headers:p}),b=new URL(l.url+g.url),S=b.searchParams.get("token");if(!S)throw new qc("No token returned by API");return{signedUrl:b.toString(),path:o,token:S}})}async update(o,r,l){return this.uploadOrUpdate("PUT",o,r,l)}async move(o,r,l){var f=this;return f.handleOperation(async()=>await Zi(f.fetch,`${f.url}/object/move`,{bucketId:f.bucketId,sourceKey:o,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:f.headers}))}async copy(o,r,l){var f=this;return f.handleOperation(async()=>({path:(await Zi(f.fetch,`${f.url}/object/copy`,{bucketId:f.bucketId,sourceKey:o,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:f.headers})).Key}))}async createSignedUrl(o,r,l){var f=this;return f.handleOperation(async()=>{let p=f._getFinalPath(o),g=await Zi(f.fetch,`${f.url}/object/sign/${p}`,qe({expiresIn:r},l?.transform?{transform:l.transform}:{}),{headers:f.headers});const b=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{signedUrl:encodeURI(`${f.url}${g.signedURL}${b}`)}})}async createSignedUrls(o,r,l){var f=this;return f.handleOperation(async()=>{const p=await Zi(f.fetch,`${f.url}/object/sign/${f.bucketId}`,{expiresIn:r,paths:o},{headers:f.headers}),g=l?.download?`&download=${l.download===!0?"":l.download}`:"";return p.map(b=>qe(qe({},b),{},{signedUrl:b.signedURL?encodeURI(`${f.url}${b.signedURL}${g}`):null}))})}download(o,r){const l=typeof r?.transform<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString(r?.transform||{}),p=f?`?${f}`:"",g=this._getFinalPath(o),b=()=>io(this.fetch,`${this.url}/${l}/${g}${p}`,{headers:this.headers,noResolveJson:!0});return new tx(b,this.shouldThrowOnError)}async info(o){var r=this;const l=r._getFinalPath(o);return r.handleOperation(async()=>bf(await io(r.fetch,`${r.url}/object/info/${l}`,{headers:r.headers})))}async exists(o){var r=this;const l=r._getFinalPath(o);try{return await $p(r.fetch,`${r.url}/object/${l}`,{headers:r.headers}),{data:!0,error:null}}catch(f){if(r.shouldThrowOnError)throw f;if(Xc(f)&&f instanceof r2){const p=f.originalError;if([400,404].includes(p?.status))return{data:!1,error:f}}throw f}}getPublicUrl(o,r){const l=this._getFinalPath(o),f=[],p=r?.download?`download=${r.download===!0?"":r.download}`:"";p!==""&&f.push(p);const g=typeof r?.transform<"u"?"render/image":"object",b=this.transformOptsToQueryString(r?.transform||{});b!==""&&f.push(b);let S=f.join("&");return S!==""&&(S=`?${S}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${l}${S}`)}}}async remove(o){var r=this;return r.handleOperation(async()=>await Of(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:o},{headers:r.headers}))}async list(o,r,l){var f=this;return f.handleOperation(async()=>{const p=qe(qe(qe({},nx),r),{},{prefix:o||""});return await Zi(f.fetch,`${f.url}/object/list/${f.bucketId}`,p,{headers:f.headers},l)})}async listV2(o,r){var l=this;return l.handleOperation(async()=>{const f=qe({},o);return await Zi(l.fetch,`${l.url}/object/list-v2/${l.bucketId}`,f,{headers:l.headers},r)})}encodeMetadata(o){return JSON.stringify(o)}toBase64(o){return typeof Buffer<"u"?Buffer.from(o).toString("base64"):btoa(o)}_getFinalPath(o){return`${this.bucketId}/${o.replace(/^\/+/,"")}`}_removeEmptyFolders(o){return o.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(o){const r=[];return o.width&&r.push(`width=${o.width}`),o.height&&r.push(`height=${o.height}`),o.resize&&r.push(`resize=${o.resize}`),o.format&&r.push(`format=${o.format}`),o.quality&&r.push(`quality=${o.quality}`),r.join("&")}};const rx="2.93.3",uo={"X-Client-Info":`storage-js/${rx}`};var ax=class extends el{constructor(o,r={},l,f){const p=new URL(o);f?.useNewHostname&&/supabase\.(co|in|red)$/.test(p.hostname)&&!p.hostname.includes("storage.supabase.")&&(p.hostname=p.hostname.replace("supabase.","storage.supabase."));const g=p.href.replace(/\/$/,""),b=qe(qe({},uo),r);super(g,b,l,"storage")}async listBuckets(o){var r=this;return r.handleOperation(async()=>{const l=r.listBucketOptionsToQueryString(o);return await io(r.fetch,`${r.url}/bucket${l}`,{headers:r.headers})})}async getBucket(o){var r=this;return r.handleOperation(async()=>await io(r.fetch,`${r.url}/bucket/${o}`,{headers:r.headers}))}async createBucket(o,r={public:!1}){var l=this;return l.handleOperation(async()=>await Zi(l.fetch,`${l.url}/bucket`,{id:o,name:o,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async updateBucket(o,r){var l=this;return l.handleOperation(async()=>await Af(l.fetch,`${l.url}/bucket/${o}`,{id:o,name:o,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async emptyBucket(o){var r=this;return r.handleOperation(async()=>await Zi(r.fetch,`${r.url}/bucket/${o}/empty`,{},{headers:r.headers}))}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Of(r.fetch,`${r.url}/bucket/${o}`,{},{headers:r.headers}))}listBucketOptionsToQueryString(o){const r={};return o&&("limit"in o&&(r.limit=String(o.limit)),"offset"in o&&(r.offset=String(o.offset)),o.search&&(r.search=o.search),o.sortColumn&&(r.sortColumn=o.sortColumn),o.sortOrder&&(r.sortOrder=o.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},sx=class extends el{constructor(o,r={},l){const f=o.replace(/\/$/,""),p=qe(qe({},uo),r);super(f,p,l,"storage")}async createBucket(o){var r=this;return r.handleOperation(async()=>await Zi(r.fetch,`${r.url}/bucket`,{name:o},{headers:r.headers}))}async listBuckets(o){var r=this;return r.handleOperation(async()=>{const l=new URLSearchParams;o?.limit!==void 0&&l.set("limit",o.limit.toString()),o?.offset!==void 0&&l.set("offset",o.offset.toString()),o?.sortColumn&&l.set("sortColumn",o.sortColumn),o?.sortOrder&&l.set("sortOrder",o.sortOrder),o?.search&&l.set("search",o.search);const f=l.toString(),p=f?`${r.url}/bucket?${f}`:`${r.url}/bucket`;return await io(r.fetch,p,{headers:r.headers})})}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Of(r.fetch,`${r.url}/bucket/${o}`,{},{headers:r.headers}))}from(o){var r=this;if(!qp(o))throw new qc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const l=new Vp({baseUrl:this.url,catalogName:o,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),f=this.shouldThrowOnError;return new Proxy(l,{get(p,g){const b=p[g];return typeof b!="function"?b:async(...S)=>{try{return{data:await b.apply(p,S),error:null}}catch(_){if(f)throw _;return{data:null,error:_}}}}})}},lx=class extends el{constructor(o,r={},l){const f=o.replace(/\/$/,""),p=qe(qe({},uo),{},{"Content-Type":"application/json"},r);super(f,p,l,"vectors")}async createIndex(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/CreateIndex`,o,{headers:r.headers})||{})}async getIndex(o,r){var l=this;return l.handleOperation(async()=>await Si.post(l.fetch,`${l.url}/GetIndex`,{vectorBucketName:o,indexName:r},{headers:l.headers}))}async listIndexes(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/ListIndexes`,o,{headers:r.headers}))}async deleteIndex(o,r){var l=this;return l.handleOperation(async()=>await Si.post(l.fetch,`${l.url}/DeleteIndex`,{vectorBucketName:o,indexName:r},{headers:l.headers})||{})}},ox=class extends el{constructor(o,r={},l){const f=o.replace(/\/$/,""),p=qe(qe({},uo),{},{"Content-Type":"application/json"},r);super(f,p,l,"vectors")}async putVectors(o){var r=this;if(o.vectors.length<1||o.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/PutVectors`,o,{headers:r.headers})||{})}async getVectors(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/GetVectors`,o,{headers:r.headers}))}async listVectors(o){var r=this;if(o.segmentCount!==void 0){if(o.segmentCount<1||o.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(o.segmentIndex!==void 0&&(o.segmentIndex<0||o.segmentIndex>=o.segmentCount))throw new Error(`segmentIndex must be between 0 and ${o.segmentCount-1}`)}return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/ListVectors`,o,{headers:r.headers}))}async queryVectors(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/QueryVectors`,o,{headers:r.headers}))}async deleteVectors(o){var r=this;if(o.keys.length<1||o.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/DeleteVectors`,o,{headers:r.headers})||{})}},cx=class extends el{constructor(o,r={},l){const f=o.replace(/\/$/,""),p=qe(qe({},uo),{},{"Content-Type":"application/json"},r);super(f,p,l,"vectors")}async createBucket(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:o},{headers:r.headers})||{})}async getBucket(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:o},{headers:r.headers}))}async listBuckets(o={}){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/ListVectorBuckets`,o,{headers:r.headers}))}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Si.post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:o},{headers:r.headers})||{})}},ux=class extends cx{constructor(o,r={}){super(o,r.headers||{},r.fetch)}from(o){return new hx(this.url,this.headers,o,this.fetch)}async createBucket(o){var r=()=>super.createBucket,l=this;return r().call(l,o)}async getBucket(o){var r=()=>super.getBucket,l=this;return r().call(l,o)}async listBuckets(o={}){var r=()=>super.listBuckets,l=this;return r().call(l,o)}async deleteBucket(o){var r=()=>super.deleteBucket,l=this;return r().call(l,o)}},hx=class extends lx{constructor(o,r,l,f){super(o,r,f),this.vectorBucketName=l}async createIndex(o){var r=()=>super.createIndex,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName}))}async listIndexes(o={}){var r=()=>super.listIndexes,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName}))}async getIndex(o){var r=()=>super.getIndex,l=this;return r().call(l,l.vectorBucketName,o)}async deleteIndex(o){var r=()=>super.deleteIndex,l=this;return r().call(l,l.vectorBucketName,o)}index(o){return new fx(this.url,this.headers,this.vectorBucketName,o,this.fetch)}},fx=class extends ox{constructor(o,r,l,f,p){super(o,r,p),this.vectorBucketName=l,this.indexName=f}async putVectors(o){var r=()=>super.putVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async getVectors(o){var r=()=>super.getVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async listVectors(o={}){var r=()=>super.listVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async queryVectors(o){var r=()=>super.queryVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async deleteVectors(o){var r=()=>super.deleteVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}},dx=class extends ax{constructor(o,r={},l,f){super(o,r,l,f)}from(o){return new ix(this.url,this.headers,o,this.fetch)}get vectors(){return new ux(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sx(this.url+"/iceberg",this.headers,this.fetch)}};const l2="2.93.3",Zs=30*1e3,Ef=3,$h=Ef*Zs,gx="http://localhost:9999",mx="supabase.auth.token",px={"X-Client-Info":`gotrue-js/${l2}`},Sf="X-Supabase-Api-Version",o2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yx=600*1e3;class ro extends Error{constructor(r,l,f){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=f}}function je(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class wx extends ro{constructor(r,l,f){super(r,l,f),this.name="AuthApiError",this.status=l,this.code=f}}function vx(o){return je(o)&&o.name==="AuthApiError"}class es extends ro{constructor(r,l){super(r),this.name="AuthUnknownError",this.originalError=l}}class kr extends ro{constructor(r,l,f,p){super(r,f,p),this.name=l,this.status=f}}class bi extends kr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ef(o){return je(o)&&o.name==="AuthSessionMissingError"}class Hs extends kr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kc extends kr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class jc extends kr{constructor(r,l=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bx(o){return je(o)&&o.name==="AuthImplicitGrantRedirectError"}class ag extends kr{constructor(r,l=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ax extends kr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class _f extends kr{constructor(r,l){super(r,"AuthRetryableFetchError",l,void 0)}}function tf(o){return je(o)&&o.name==="AuthRetryableFetchError"}class sg extends kr{constructor(r,l,f){super(r,"AuthWeakPasswordError",l,"weak_password"),this.reasons=f}}class Cf extends kr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lg=` 	
\r=`.split(""),Ex=(()=>{const o=new Array(128);for(let r=0;r<o.length;r+=1)o[r]=-1;for(let r=0;r<lg.length;r+=1)o[lg[r].charCodeAt(0)]=-2;for(let r=0;r<Pc.length;r+=1)o[Pc[r].charCodeAt(0)]=r;return o})();function og(o,r,l){if(o!==null)for(r.queue=r.queue<<8|o,r.queuedBits+=8;r.queuedBits>=6;){const f=r.queue>>r.queuedBits-6&63;l(Pc[f]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const f=r.queue>>r.queuedBits-6&63;l(Pc[f]),r.queuedBits-=6}}function c2(o,r,l){const f=Ex[o];if(f>-1)for(r.queue=r.queue<<6|f,r.queuedBits+=6;r.queuedBits>=8;)l(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(f===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function cg(o){const r=[],l=b=>{r.push(String.fromCodePoint(b))},f={utf8seq:0,codepoint:0},p={queue:0,queuedBits:0},g=b=>{Cx(b,f,l)};for(let b=0;b<o.length;b+=1)c2(o.charCodeAt(b),p,g);return r.join("")}function Sx(o,r){if(o<=127){r(o);return}else if(o<=2047){r(192|o>>6),r(128|o&63);return}else if(o<=65535){r(224|o>>12),r(128|o>>6&63),r(128|o&63);return}else if(o<=1114111){r(240|o>>18),r(128|o>>12&63),r(128|o>>6&63),r(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function _x(o,r){for(let l=0;l<o.length;l+=1){let f=o.charCodeAt(l);if(f>55295&&f<=56319){const p=(f-55296)*1024&65535;f=(o.charCodeAt(l+1)-56320&65535|p)+65536,l+=1}Sx(f,r)}}function Cx(o,r,l){if(r.utf8seq===0){if(o<=127){l(o);return}for(let f=1;f<6;f+=1)if((o>>7-f&1)===0){r.utf8seq=f;break}if(r.utf8seq===2)r.codepoint=o&31;else if(r.utf8seq===3)r.codepoint=o&15;else if(r.utf8seq===4)r.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|o&63,r.utf8seq-=1,r.utf8seq===0&&l(r.codepoint)}}function $s(o){const r=[],l={queue:0,queuedBits:0},f=p=>{r.push(p)};for(let p=0;p<o.length;p+=1)c2(o.charCodeAt(p),l,f);return new Uint8Array(r)}function Tx(o){const r=[];return _x(o,l=>r.push(l)),new Uint8Array(r)}function ts(o){const r=[],l={queue:0,queuedBits:0},f=p=>{r.push(p)};return o.forEach(p=>og(p,l,f)),og(null,l,f),r.join("")}function Nx(o){return Math.round(Date.now()/1e3)+o}function Ox(){return Symbol("auth-callback")}const zn=()=>typeof window<"u"&&typeof document<"u",Qa={tested:!1,writable:!1},u2=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qa.tested)return Qa.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Qa.tested=!0,Qa.writable=!0}catch{Qa.tested=!0,Qa.writable=!1}return Qa.writable};function Ix(o){const r={},l=new URL(o);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((p,g)=>{r[g]=p})}catch{}return l.searchParams.forEach((f,p)=>{r[p]=f}),r}const h2=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Rx=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Qs=async(o,r,l)=>{await o.setItem(r,JSON.stringify(l))},Ka=async(o,r)=>{const l=await o.getItem(r);if(!l)return null;try{return JSON.parse(l)}catch{return l}},Un=async(o,r)=>{await o.removeItem(r)};class Wc{constructor(){this.promise=new Wc.promiseConstructor((r,l)=>{this.resolve=r,this.reject=l})}}Wc.promiseConstructor=Promise;function Uc(o){const r=o.split(".");if(r.length!==3)throw new Cf("Invalid JWT structure");for(let f=0;f<r.length;f++)if(!xx.test(r[f]))throw new Cf("JWT not in base64url format");return{header:JSON.parse(cg(r[0])),payload:JSON.parse(cg(r[1])),signature:$s(r[2]),raw:{header:r[0],payload:r[1]}}}async function Dx(o){return await new Promise(r=>{setTimeout(()=>r(null),o)})}function Mx(o,r){return new Promise((f,p)=>{(async()=>{for(let g=0;g<1/0;g++)try{const b=await o(g);if(!r(g,null,b)){f(b);return}}catch(b){if(!r(g,b)){p(b);return}}})()})}function Bx(o){return("0"+o.toString(16)).substr(-2)}function Lx(){const r=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",f=l.length;let p="";for(let g=0;g<56;g++)p+=l.charAt(Math.floor(Math.random()*f));return p}return crypto.getRandomValues(r),Array.from(r,Bx).join("")}async function kx(o){const l=new TextEncoder().encode(o),f=await crypto.subtle.digest("SHA-256",l),p=new Uint8Array(f);return Array.from(p).map(g=>String.fromCharCode(g)).join("")}async function jx(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const l=await kx(o);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vs(o,r,l=!1){const f=Lx();let p=f;l&&(p+="/PASSWORD_RECOVERY"),await Qs(o,`${r}-code-verifier`,p);const g=await jx(f);return[g,f===g?"plain":"s256"]}const Ux=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zx(o){const r=o.headers.get(Sf);if(!r||!r.match(Ux))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Px(o){if(!o)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(o<=r)throw new Error("JWT has expired")}function Fx(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gs(o){if(!Hx.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nf(){const o={};return new Proxy(o,{get:(r,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const f=l.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vx(o,r){return new Proxy(o,{get:(l,f,p)=>{if(f==="__isInsecureUserWarningProxy")return!0;if(typeof f=="symbol"){const g=f.toString();if(g==="Symbol(Symbol.toPrimitive)"||g==="Symbol(Symbol.toStringTag)"||g==="Symbol(util.inspect.custom)"||g==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,f,p)}return!r.value&&typeof f=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(l,f,p)}})}function ug(o){return JSON.parse(JSON.stringify(o))}const Ja=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Gx=[502,503,504];async function hg(o){var r;if(!Rx(o))throw new _f(Ja(o),0);if(Gx.includes(o.status))throw new _f(Ja(o),o.status);let l;try{l=await o.json()}catch(g){throw new es(Ja(g),g)}let f;const p=zx(o);if(p&&p.getTime()>=o2["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?f=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(f=l.error_code),f){if(f==="weak_password")throw new sg(Ja(l),o.status,((r=l.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(f==="session_not_found")throw new bi}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((g,b)=>g&&typeof b=="string",!0))throw new sg(Ja(l),o.status,l.weak_password.reasons);throw new wx(Ja(l),o.status||500,f)}const Yx=(o,r,l,f)=>{const p={method:o,headers:r?.headers||{}};return o==="GET"?p:(p.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),p.body=JSON.stringify(f),Object.assign(Object.assign({},p),l))};async function Ge(o,r,l,f){var p;const g=Object.assign({},f?.headers);g[Sf]||(g[Sf]=o2["2024-01-01"].name),f?.jwt&&(g.Authorization=`Bearer ${f.jwt}`);const b=(p=f?.query)!==null&&p!==void 0?p:{};f?.redirectTo&&(b.redirect_to=f.redirectTo);const S=Object.keys(b).length?"?"+new URLSearchParams(b).toString():"",_=await qx(o,r,l+S,{headers:g,noResolveJson:f?.noResolveJson},{},f?.body);return f?.xform?f?.xform(_):{data:Object.assign({},_),error:null}}async function qx(o,r,l,f,p,g){const b=Yx(r,f,p,g);let S;try{S=await o(l,Object.assign({},b))}catch(_){throw console.error(_),new _f(Ja(_),0)}if(S.ok||await hg(S),f?.noResolveJson)return S;try{return await S.json()}catch(_){await hg(_)}}function Wi(o){var r;let l=null;Zx(o)&&(l=Object.assign({},o),o.expires_at||(l.expires_at=Nx(o.expires_in)));const f=(r=o.user)!==null&&r!==void 0?r:o;return{data:{session:l,user:f},error:null}}function fg(o){const r=Wi(o);return!r.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((l,f)=>l&&typeof f=="string",!0)&&(r.data.weak_password=o.weak_password),r}function Aa(o){var r;return{data:{user:(r=o.user)!==null&&r!==void 0?r:o},error:null}}function Xx(o){return{data:o,error:null}}function Wx(o){const{action_link:r,email_otp:l,hashed_token:f,redirect_to:p,verification_type:g}=o,b=Yc(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),S={action_link:r,email_otp:l,hashed_token:f,redirect_to:p,verification_type:g},_=Object.assign({},b);return{data:{properties:S,user:_},error:null}}function dg(o){return o}function Zx(o){return o.access_token&&o.refresh_token&&o.expires_in}const rf=["global","local","others"];class Qx{constructor({url:r="",headers:l={},fetch:f}){this.url=r,this.headers=l,this.fetch=h2(f),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,l=rf[0]){if(rf.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rf.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(f){if(je(f))return{data:null,error:f};throw f}}async inviteUserByEmail(r,l={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:Aa})}catch(f){if(je(f))return{data:{user:null},error:f};throw f}}async generateLink(r){try{const{options:l}=r,f=Yc(r,["options"]),p=Object.assign(Object.assign({},f),l);return"newEmail"in f&&(p.new_email=f?.newEmail,delete p.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:p,headers:this.headers,xform:Wx,redirectTo:l?.redirectTo})}catch(l){if(je(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(r){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Aa})}catch(l){if(je(l))return{data:{user:null},error:l};throw l}}async listUsers(r){var l,f,p,g,b,S,_;try{const v={nextPage:null,lastPage:0,total:0},N=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(f=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&f!==void 0?f:"",per_page:(g=(p=r?.perPage)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""},xform:dg});if(N.error)throw N.error;const O=await N.json(),B=(b=N.headers.get("x-total-count"))!==null&&b!==void 0?b:0,j=(_=(S=N.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&_!==void 0?_:[];return j.length>0&&(j.forEach(U=>{const z=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(U.split(";")[1].split("=")[1]);v[`${q}Page`]=z}),v.total=parseInt(B)),{data:Object.assign(Object.assign({},O),v),error:null}}catch(v){if(je(v))return{data:{users:[]},error:v};throw v}}async getUserById(r){Gs(r);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Aa})}catch(l){if(je(l))return{data:{user:null},error:l};throw l}}async updateUserById(r,l){Gs(r);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:l,headers:this.headers,xform:Aa})}catch(f){if(je(f))return{data:{user:null},error:f};throw f}}async deleteUser(r,l=!1){Gs(r);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:l},xform:Aa})}catch(f){if(je(f))return{data:{user:null},error:f};throw f}}async _listFactors(r){Gs(r.userId);try{const{data:l,error:f}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:p=>({data:{factors:p},error:null})});return{data:l,error:f}}catch(l){if(je(l))return{data:null,error:l};throw l}}async _deleteFactor(r){Gs(r.userId),Gs(r.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(l){if(je(l))return{data:null,error:l};throw l}}async _listOAuthClients(r){var l,f,p,g,b,S,_;try{const v={nextPage:null,lastPage:0,total:0},N=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(f=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&f!==void 0?f:"",per_page:(g=(p=r?.perPage)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""},xform:dg});if(N.error)throw N.error;const O=await N.json(),B=(b=N.headers.get("x-total-count"))!==null&&b!==void 0?b:0,j=(_=(S=N.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&_!==void 0?_:[];return j.length>0&&(j.forEach(U=>{const z=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(U.split(";")[1].split("=")[1]);v[`${q}Page`]=z}),v.total=parseInt(B)),{data:Object.assign(Object.assign({},O),v),error:null}}catch(v){if(je(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(r){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(je(l))return{data:null,error:l};throw l}}async _getOAuthClient(r){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(je(l))return{data:null,error:l};throw l}}async _updateOAuthClient(r,l){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:l,headers:this.headers,xform:f=>({data:f,error:null})})}catch(f){if(je(f))return{data:null,error:f};throw f}}async _deleteOAuthClient(r){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(je(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(r){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(je(l))return{data:null,error:l};throw l}}}function gg(o={}){return{getItem:r=>o[r]||null,setItem:(r,l)=>{o[r]=l},removeItem:r=>{delete o[r]}}}const Ys={debug:!!(globalThis&&u2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class f2 extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Kx extends f2{}async function Jx(o,r,l){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,r);const f=new globalThis.AbortController;return r>0&&setTimeout(()=>{f.abort(),Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:f.signal},async p=>{if(p){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,p.name);try{return await l()}finally{Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,p.name)}}else{if(r===0)throw Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Kx(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Ys.debug)try{const g=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(g,null,"  "))}catch(g){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",g)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}function $x(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function d2(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function ey(o){return parseInt(o,16)}function ty(o){const r=new TextEncoder().encode(o);return"0x"+Array.from(r,f=>f.toString(16).padStart(2,"0")).join("")}function ny(o){var r;const{chainId:l,domain:f,expirationTime:p,issuedAt:g=new Date,nonce:b,notBefore:S,requestId:_,resources:v,scheme:N,uri:O,version:B}=o;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(b&&b.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${b}`);if(!O)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(B!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${B}`);if(!((r=o.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const j=d2(o.address),U=N?`${N}://${f}`:f,z=o.statement?`${o.statement}
`:"",q=`${U} wants you to sign in with your Ethereum account:
${j}

${z}`;let $=`URI: ${O}
Version: ${B}
Chain ID: ${l}${b?`
Nonce: ${b}`:""}
Issued At: ${g.toISOString()}`;if(p&&($+=`
Expiration Time: ${p.toISOString()}`),S&&($+=`
Not Before: ${S.toISOString()}`),_&&($+=`
Request ID: ${_}`),v){let se=`
Resources:`;for(const Q of v){if(!Q||typeof Q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Q}`);se+=`
- ${Q}`}$+=se}return`${q}
${$}`}class vn extends Error{constructor({message:r,code:l,cause:f,name:p}){var g;super(r,{cause:f}),this.__isWebAuthnError=!0,this.name=(g=p??(f instanceof Error?f.name:void 0))!==null&&g!==void 0?g:"Unknown Error",this.code=l}}class Fc extends vn{constructor(r,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:r}),this.name="WebAuthnUnknownError",this.originalError=l}}function iy({error:o,options:r}){var l,f,p;const{publicKey:g}=r;if(!g)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new vn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((l=g.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new vn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(r.mediation==="conditional"&&((f=g.authenticatorSelection)===null||f===void 0?void 0:f.userVerification)==="required")return new vn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((p=g.authenticatorSelection)===null||p===void 0?void 0:p.userVerification)==="required")return new vn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new vn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new vn({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return g.pubKeyCredParams.filter(S=>S.type==="public-key").length===0?new vn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new vn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const b=window.location.hostname;if(g2(b)){if(g.rp.id!==b)return new vn({message:`The RP ID "${g.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new vn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(g.user.id.byteLength<1||g.user.id.byteLength>64)return new vn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new vn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new vn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function ry({error:o,options:r}){const{publicKey:l}=r;if(!l)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new vn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new vn({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(g2(f)){if(l.rpId!==f)return new vn({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new vn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new vn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new vn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class ay{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const sy=new ay;function ly(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:r,user:l,excludeCredentials:f}=o,p=Yc(o,["challenge","user","excludeCredentials"]),g=$s(r).buffer,b=Object.assign(Object.assign({},l),{id:$s(l.id).buffer}),S=Object.assign(Object.assign({},p),{challenge:g,user:b});if(f&&f.length>0){S.excludeCredentials=new Array(f.length);for(let _=0;_<f.length;_++){const v=f[_];S.excludeCredentials[_]=Object.assign(Object.assign({},v),{id:$s(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return S}function oy(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:r,allowCredentials:l}=o,f=Yc(o,["challenge","allowCredentials"]),p=$s(r).buffer,g=Object.assign(Object.assign({},f),{challenge:p});if(l&&l.length>0){g.allowCredentials=new Array(l.length);for(let b=0;b<l.length;b++){const S=l[b];g.allowCredentials[b]=Object.assign(Object.assign({},S),{id:$s(S.id).buffer,type:S.type||"public-key",transports:S.transports})}}return g}function cy(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o;return{id:o.id,rawId:o.id,response:{attestationObject:ts(new Uint8Array(o.response.attestationObject)),clientDataJSON:ts(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function uy(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o,f=o.getClientExtensionResults(),p=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:ts(new Uint8Array(p.authenticatorData)),clientDataJSON:ts(new Uint8Array(p.clientDataJSON)),signature:ts(new Uint8Array(p.signature)),userHandle:p.userHandle?ts(new Uint8Array(p.userHandle)):void 0},type:"public-key",clientExtensionResults:f,authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function g2(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function mg(){var o,r;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function hy(o){try{const r=await navigator.credentials.create(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Fc("Browser returned unexpected credential type",r)}:{data:null,error:new Fc("Empty credential response",r)}}catch(r){return{data:null,error:iy({error:r,options:o})}}}async function fy(o){try{const r=await navigator.credentials.get(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Fc("Browser returned unexpected credential type",r)}:{data:null,error:new Fc("Empty credential response",r)}}catch(r){return{data:null,error:ry({error:r,options:o})}}}const dy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hc(...o){const r=p=>p!==null&&typeof p=="object"&&!Array.isArray(p),l=p=>p instanceof ArrayBuffer||ArrayBuffer.isView(p),f={};for(const p of o)if(p)for(const g in p){const b=p[g];if(b!==void 0)if(Array.isArray(b))f[g]=b;else if(l(b))f[g]=b;else if(r(b)){const S=f[g];r(S)?f[g]=Hc(S,b):f[g]=Hc(b)}else f[g]=b}return f}function my(o,r){return Hc(dy,o,r||{})}function py(o,r){return Hc(gy,o,r||{})}class xy{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:l,friendlyName:f,signal:p},g){var b;try{const{data:S,error:_}=await this.client.mfa.challenge({factorId:r,webauthn:l});if(!S)return{data:null,error:_};const v=p??sy.createNewAbortSignal();if(S.webauthn.type==="create"){const{user:N}=S.webauthn.credential_options.publicKey;if(!N.name){const O=f;if(O)N.name=`${N.id}:${O}`;else{const j=(await this.client.getUser()).data.user,U=((b=j?.user_metadata)===null||b===void 0?void 0:b.name)||j?.email||j?.id||"User";N.name=`${N.id}:${U}`}}N.displayName||(N.displayName=N.name)}switch(S.webauthn.type){case"create":{const N=my(S.webauthn.credential_options.publicKey,g?.create),{data:O,error:B}=await hy({publicKey:N,signal:v});return O?{data:{factorId:r,challengeId:S.id,webauthn:{type:S.webauthn.type,credential_response:O}},error:null}:{data:null,error:B}}case"request":{const N=py(S.webauthn.credential_options.publicKey,g?.request),{data:O,error:B}=await fy(Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:N,signal:v}));return O?{data:{factorId:r,challengeId:S.id,webauthn:{type:S.webauthn.type,credential_response:O}},error:null}:{data:null,error:B}}}}catch(S){return je(S)?{data:null,error:S}:{data:null,error:new es("Unexpected error in challenge",S)}}}async _verify({challengeId:r,factorId:l,webauthn:f}){return this.client.mfa.verify({factorId:l,challengeId:r,webauthn:f})}async _authenticate({factorId:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:f=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},g){if(!l)return{data:null,error:new ro("rpId is required for WebAuthn authentication")};try{if(!mg())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:b,error:S}=await this.challenge({factorId:r,webauthn:{rpId:l,rpOrigins:f},signal:p},{request:g});if(!b)return{data:null,error:S};const{webauthn:_}=b;return this._verify({factorId:r,challengeId:b.challengeId,webauthn:{type:_.type,rpId:l,rpOrigins:f,credential_response:_.credential_response}})}catch(b){return je(b)?{data:null,error:b}:{data:null,error:new es("Unexpected error in authenticate",b)}}}async _register({friendlyName:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:f=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},g){if(!l)return{data:null,error:new ro("rpId is required for WebAuthn registration")};try{if(!mg())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:b,error:S}=await this._enroll({friendlyName:r});if(!b)return await this.client.mfa.listFactors().then(N=>{var O;return(O=N.data)===null||O===void 0?void 0:O.all.find(B=>B.factor_type==="webauthn"&&B.friendly_name===r&&B.status!=="unverified")}).then(N=>N?this.client.mfa.unenroll({factorId:N?.id}):void 0),{data:null,error:S};const{data:_,error:v}=await this._challenge({factorId:b.id,friendlyName:b.friendly_name,webauthn:{rpId:l,rpOrigins:f},signal:p},{create:g});return _?this._verify({factorId:b.id,challengeId:_.challengeId,webauthn:{rpId:l,rpOrigins:f,type:_.webauthn.type,credential_response:_.webauthn.credential_response}}):{data:null,error:v}}catch(b){return je(b)?{data:null,error:b}:{data:null,error:new es("Unexpected error in register",b)}}}}$x();const yy={url:gx,storageKey:mx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:px,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function pg(o,r,l){return await l()}const qs={};class ao{get jwks(){var r,l;return(l=(r=qs[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(r){qs[this.storageKey]=Object.assign(Object.assign({},qs[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,l;return(l=(r=qs[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){qs[this.storageKey]=Object.assign(Object.assign({},qs[this.storageKey]),{cachedAt:r})}constructor(r){var l,f,p;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const g=Object.assign(Object.assign({},yy),r);if(this.storageKey=g.storageKey,this.instanceID=(l=ao.nextInstanceID[this.storageKey])!==null&&l!==void 0?l:0,ao.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.instanceID>0&&zn()){const b=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(b),this.logDebugMessages&&console.trace(b)}if(this.persistSession=g.persistSession,this.autoRefreshToken=g.autoRefreshToken,this.admin=new Qx({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=h2(g.fetch),this.lock=g.lock||pg,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,this.throwOnError=g.throwOnError,this.lockAcquireTimeout=g.lockAcquireTimeout,g.lock?this.lock=g.lock:this.persistSession&&zn()&&(!((f=globalThis?.navigator)===null||f===void 0)&&f.locks)?this.lock=Jx:this.lock=pg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:u2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gg(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=gg(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(b){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",b)}(p=this.broadcastChannel)===null||p===void 0||p.addEventListener("message",async b=>{this._debug("received broadcast notification from other tab or client",b);try{await this._notifyAllSubscribers(b.data.event,b.data.session,!1)}catch(S){this._debug("#broadcastChannel","error",S)}})}this.initialize().catch(b=>{this._debug("#initialize()","error",b)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${l2}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let l={},f="none";if(zn()&&(l=Ix(window.location.href),this._isImplicitGrantCallback(l)?f="implicit":await this._isPKCECallback(l)&&(f="pkce")),zn()&&this.detectSessionInUrl&&f!=="none"){const{data:p,error:g}=await this._getSessionFromURL(l,f);if(g){if(this._debug("#_initialize()","error detecting session from URL",g),bx(g)){const _=(r=g.details)===null||r===void 0?void 0:r.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:g}}return{error:g}}const{session:b,redirectType:S}=p;return this._debug("#_initialize()","detected session in URL",b,"redirect type",S),await this._saveSession(b),setTimeout(async()=>{S==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",b):await this._notifyAllSubscribers("SIGNED_IN",b)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return je(l)?this._returnResult({error:l}):this._returnResult({error:new es("Unexpected error during initialization",l)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var l,f,p;try{const g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(f=(l=r?.options)===null||l===void 0?void 0:l.data)!==null&&f!==void 0?f:{},gotrue_meta_security:{captcha_token:(p=r?.options)===null||p===void 0?void 0:p.captchaToken}},xform:Wi}),{data:b,error:S}=g;if(S||!b)return this._returnResult({data:{user:null,session:null},error:S});const _=b.session,v=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(g){if(je(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signUp(r){var l,f,p;try{let g;if("email"in r){const{email:N,password:O,options:B}=r;let j=null,U=null;this.flowType==="pkce"&&([j,U]=await Vs(this.storage,this.storageKey)),g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:B?.emailRedirectTo,body:{email:N,password:O,data:(l=B?.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:B?.captchaToken},code_challenge:j,code_challenge_method:U},xform:Wi})}else if("phone"in r){const{phone:N,password:O,options:B}=r;g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:N,password:O,data:(f=B?.data)!==null&&f!==void 0?f:{},channel:(p=B?.channel)!==null&&p!==void 0?p:"sms",gotrue_meta_security:{captcha_token:B?.captchaToken}},xform:Wi})}else throw new kc("You must provide either an email or phone number and a password");const{data:b,error:S}=g;if(S||!b)return await Un(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:S});const _=b.session,v=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(g){if(await Un(this.storage,`${this.storageKey}-code-verifier`),je(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithPassword(r){try{let l;if("email"in r){const{email:g,password:b,options:S}=r;l=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:g,password:b,gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:fg})}else if("phone"in r){const{phone:g,password:b,options:S}=r;l=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:g,password:b,gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:fg})}else throw new kc("You must provide either an email or phone number and a password");const{data:f,error:p}=l;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f||!f.session||!f.user){const g=new Hs;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign({user:f.user,session:f.session},f.weak_password?{weakPassword:f.weak_password}:null),error:p})}catch(l){if(je(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOAuth(r){var l,f,p,g;return await this._handleProviderSignIn(r.provider,{redirectTo:(l=r.options)===null||l===void 0?void 0:l.redirectTo,scopes:(f=r.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:(g=r.options)===null||g===void 0?void 0:g.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:l}=r;switch(l){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(r){var l,f,p,g,b,S,_,v,N,O,B;let j,U;if("message"in r)j=r.message,U=r.signature;else{const{chain:z,wallet:q,statement:$,options:se}=r;let Q;if(zn())if(typeof q=="object")Q=q;else{const re=window;if("ethereum"in re&&typeof re.ethereum=="object"&&"request"in re.ethereum&&typeof re.ethereum.request=="function")Q=re.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!se?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=q}const ue=new URL((l=se?.url)!==null&&l!==void 0?l:window.location.href),Ne=await Q.request({method:"eth_requestAccounts"}).then(re=>re).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ne||Ne.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ve=d2(Ne[0]);let W=(f=se?.signInWithEthereum)===null||f===void 0?void 0:f.chainId;if(!W){const re=await Q.request({method:"eth_chainId"});W=ey(re)}const ee={domain:ue.host,address:ve,statement:$,uri:ue.href,version:"1",chainId:W,nonce:(p=se?.signInWithEthereum)===null||p===void 0?void 0:p.nonce,issuedAt:(b=(g=se?.signInWithEthereum)===null||g===void 0?void 0:g.issuedAt)!==null&&b!==void 0?b:new Date,expirationTime:(S=se?.signInWithEthereum)===null||S===void 0?void 0:S.expirationTime,notBefore:(_=se?.signInWithEthereum)===null||_===void 0?void 0:_.notBefore,requestId:(v=se?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(N=se?.signInWithEthereum)===null||N===void 0?void 0:N.resources};j=ny(ee),U=await Q.request({method:"personal_sign",params:[ty(j),ve]})}try{const{data:z,error:q}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:U},!((O=r.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(B=r.options)===null||B===void 0?void 0:B.captchaToken}}:null),xform:Wi});if(q)throw q;if(!z||!z.session||!z.user){const $=new Hs;return this._returnResult({data:{user:null,session:null},error:$})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:q})}catch(z){if(je(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async signInWithSolana(r){var l,f,p,g,b,S,_,v,N,O,B,j;let U,z;if("message"in r)U=r.message,z=r.signature;else{const{chain:q,wallet:$,statement:se,options:Q}=r;let ue;if(zn())if(typeof $=="object")ue=$;else{const ve=window;if("solana"in ve&&typeof ve.solana=="object"&&("signIn"in ve.solana&&typeof ve.solana.signIn=="function"||"signMessage"in ve.solana&&typeof ve.solana.signMessage=="function"))ue=ve.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!Q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ue=$}const Ne=new URL((l=Q?.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in ue&&ue.signIn){const ve=await ue.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Q?.signInWithSolana),{version:"1",domain:Ne.host,uri:Ne.href}),se?{statement:se}:null));let W;if(Array.isArray(ve)&&ve[0]&&typeof ve[0]=="object")W=ve[0];else if(ve&&typeof ve=="object"&&"signedMessage"in ve&&"signature"in ve)W=ve;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)U=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),z=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ue)||typeof ue.signMessage!="function"||!("publicKey"in ue)||typeof ue!="object"||!ue.publicKey||!("toBase58"in ue.publicKey)||typeof ue.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${Ne.host} wants you to sign in with your Solana account:`,ue.publicKey.toBase58(),...se?["",se,""]:[""],"Version: 1",`URI: ${Ne.href}`,`Issued At: ${(p=(f=Q?.signInWithSolana)===null||f===void 0?void 0:f.issuedAt)!==null&&p!==void 0?p:new Date().toISOString()}`,...!((g=Q?.signInWithSolana)===null||g===void 0)&&g.notBefore?[`Not Before: ${Q.signInWithSolana.notBefore}`]:[],...!((b=Q?.signInWithSolana)===null||b===void 0)&&b.expirationTime?[`Expiration Time: ${Q.signInWithSolana.expirationTime}`]:[],...!((S=Q?.signInWithSolana)===null||S===void 0)&&S.chainId?[`Chain ID: ${Q.signInWithSolana.chainId}`]:[],...!((_=Q?.signInWithSolana)===null||_===void 0)&&_.nonce?[`Nonce: ${Q.signInWithSolana.nonce}`]:[],...!((v=Q?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${Q.signInWithSolana.requestId}`]:[],...!((O=(N=Q?.signInWithSolana)===null||N===void 0?void 0:N.resources)===null||O===void 0)&&O.length?["Resources",...Q.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const ve=await ue.signMessage(new TextEncoder().encode(U),"utf8");if(!ve||!(ve instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");z=ve}}try{const{data:q,error:$}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:ts(z)},!((B=r.options)===null||B===void 0)&&B.captchaToken?{gotrue_meta_security:{captcha_token:(j=r.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Wi});if($)throw $;if(!q||!q.session||!q.user){const se=new Hs;return this._returnResult({data:{user:null,session:null},error:se})}return q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),this._returnResult({data:Object.assign({},q),error:$})}catch(q){if(je(q))return this._returnResult({data:{user:null,session:null},error:q});throw q}}async _exchangeCodeForSession(r){const l=await Ka(this.storage,`${this.storageKey}-code-verifier`),[f,p]=(l??"").split("/");try{if(!f&&this.flowType==="pkce")throw new Ax;const{data:g,error:b}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:f},xform:Wi});if(await Un(this.storage,`${this.storageKey}-code-verifier`),b)throw b;if(!g||!g.session||!g.user){const S=new Hs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:S})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign(Object.assign({},g),{redirectType:p??null}),error:b})}catch(g){if(await Un(this.storage,`${this.storageKey}-code-verifier`),je(g))return this._returnResult({data:{user:null,session:null,redirectType:null},error:g});throw g}}async signInWithIdToken(r){try{const{options:l,provider:f,token:p,access_token:g,nonce:b}=r,S=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:f,id_token:p,access_token:g,nonce:b,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Wi}),{data:_,error:v}=S;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!_||!_.session||!_.user){const N=new Hs;return this._returnResult({data:{user:null,session:null},error:N})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:_,error:v})}catch(l){if(je(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOtp(r){var l,f,p,g,b;try{if("email"in r){const{email:S,options:_}=r;let v=null,N=null;this.flowType==="pkce"&&([v,N]=await Vs(this.storage,this.storageKey));const{error:O}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:S,data:(l=_?.data)!==null&&l!==void 0?l:{},create_user:(f=_?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:v,code_challenge_method:N},redirectTo:_?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:O})}if("phone"in r){const{phone:S,options:_}=r,{data:v,error:N}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:S,data:(p=_?.data)!==null&&p!==void 0?p:{},create_user:(g=_?.shouldCreateUser)!==null&&g!==void 0?g:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},channel:(b=_?.channel)!==null&&b!==void 0?b:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:N})}throw new kc("You must provide either an email or phone number.")}catch(S){if(await Un(this.storage,`${this.storageKey}-code-verifier`),je(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async verifyOtp(r){var l,f;try{let p,g;"options"in r&&(p=(l=r.options)===null||l===void 0?void 0:l.redirectTo,g=(f=r.options)===null||f===void 0?void 0:f.captchaToken);const{data:b,error:S}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:g}}),redirectTo:p,xform:Wi});if(S)throw S;if(!b)throw new Error("An error occurred on token verification.");const _=b.session,v=b.user;return _?.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(p){if(je(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSSO(r){var l,f,p,g,b;try{let S=null,_=null;this.flowType==="pkce"&&([S,_]=await Vs(this.storage,this.storageKey));const v=await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(f=(l=r.options)===null||l===void 0?void 0:l.redirectTo)!==null&&f!==void 0?f:void 0}),!((p=r?.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:S,code_challenge_method:_}),headers:this.headers,xform:Xx});return!((g=v.data)===null||g===void 0)&&g.url&&zn()&&!(!((b=r.options)===null||b===void 0)&&b.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(S){if(await Un(this.storage,`${this.storageKey}-code-verifier`),je(S))return this._returnResult({data:null,error:S});throw S}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:l},error:f}=r;if(f)throw f;if(!l)throw new bi;const{error:p}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return this._returnResult({data:{user:null,session:null},error:p})})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const l=`${this.url}/resend`;if("email"in r){const{email:f,type:p,options:g}=r,{error:b}=await Ge(this.fetch,"POST",l,{headers:this.headers,body:{email:f,type:p,gotrue_meta_security:{captcha_token:g?.captchaToken}},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}else if("phone"in r){const{phone:f,type:p,options:g}=r,{data:b,error:S}=await Ge(this.fetch,"POST",l,{headers:this.headers,body:{phone:f,type:p,gotrue_meta_security:{captcha_token:g?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:S})}throw new kc("You must provide either an email or phone number and a type")}catch(l){if(je(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async l=>l))}async _acquireLock(r,l){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const f=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),p=(async()=>(await f,await l()))();return this.pendingInLock.push((async()=>{try{await p}catch{}})()),p}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const f=l();for(this.pendingInLock.push((async()=>{try{await f}catch{}})()),await f;this.pendingInLock.length;){const p=[...this.pendingInLock];await Promise.all(p),this.pendingInLock.splice(0,p.length)}return await f}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await r(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const l=await Ka(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?r=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const f=r.expires_at?r.expires_at*1e3-Date.now()<$h:!1;if(this._debug("#__loadSession()",`session has${f?"":" not"} expired`,"expires_at",r.expires_at),!f){if(this.userStorage){const b=await Ka(this.userStorage,this.storageKey+"-user");b?.user?r.user=b.user:r.user=nf()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const b={value:this.suppressGetSessionWarning};r.user=Vx(r.user,b),b.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:p,error:g}=await this._callRefreshToken(r.refresh_token);return g?this._returnResult({data:{session:null},error:g}):this._returnResult({data:{session:p},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const l=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return l.data.user&&(this.suppressGetSessionWarning=!0),l}async _getUser(r){try{return r?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Aa}):await this._useSession(async l=>{var f,p,g;const{data:b,error:S}=l;if(S)throw S;return!(!((f=b.session)===null||f===void 0)&&f.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bi}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(g=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0,xform:Aa})})}catch(l){if(je(l))return ef(l)&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:l});throw l}}async updateUser(r,l={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,l))}async _updateUser(r,l={}){try{return await this._useSession(async f=>{const{data:p,error:g}=f;if(g)throw g;if(!p.session)throw new bi;const b=p.session;let S=null,_=null;this.flowType==="pkce"&&r.email!=null&&([S,_]=await Vs(this.storage,this.storageKey));const{data:v,error:N}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:S,code_challenge_method:_}),jwt:b.access_token,xform:Aa});if(N)throw N;return b.user=v.user,await this._saveSession(b),await this._notifyAllSubscribers("USER_UPDATED",b),this._returnResult({data:{user:b.user},error:null})})}catch(f){if(await Un(this.storage,`${this.storageKey}-code-verifier`),je(f))return this._returnResult({data:{user:null},error:f});throw f}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new bi;const l=Date.now()/1e3;let f=l,p=!0,g=null;const{payload:b}=Uc(r.access_token);if(b.exp&&(f=b.exp,p=f<=l),p){const{data:S,error:_}=await this._callRefreshToken(r.refresh_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!S)return{data:{user:null,session:null},error:null};g=S}else{const{data:S,error:_}=await this._getUser(r.access_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});g={access_token:r.access_token,refresh_token:r.refresh_token,user:S.user,token_type:"bearer",expires_in:f-l,expires_at:f},await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)}return this._returnResult({data:{user:g.user,session:g},error:null})}catch(l){if(je(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async l=>{var f;if(!r){const{data:b,error:S}=l;if(S)throw S;r=(f=b.session)!==null&&f!==void 0?f:void 0}if(!r?.refresh_token)throw new bi;const{data:p,error:g}=await this._callRefreshToken(r.refresh_token);return g?this._returnResult({data:{user:null,session:null},error:g}):p?this._returnResult({data:{user:p.user,session:p},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(l){if(je(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async _getSessionFromURL(r,l){try{if(!zn())throw new jc("No browser detected.");if(r.error||r.error_description||r.error_code)throw new jc(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new ag("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jc("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new ag("No code detected.");const{data:se,error:Q}=await this._exchangeCodeForSession(r.code);if(Q)throw Q;const ue=new URL(window.location.href);return ue.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ue.toString()),{data:{session:se.session,redirectType:null},error:null}}const{provider_token:f,provider_refresh_token:p,access_token:g,refresh_token:b,expires_in:S,expires_at:_,token_type:v}=r;if(!g||!S||!b||!v)throw new jc("No session defined in URL");const N=Math.round(Date.now()/1e3),O=parseInt(S);let B=N+O;_&&(B=parseInt(_));const j=B-N;j*1e3<=Zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${O}s`);const U=B-O;N-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,B,N):N-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,B,N);const{data:z,error:q}=await this._getUser(g);if(q)throw q;const $={provider_token:f,provider_refresh_token:p,access_token:g,expires_in:O,expires_at:B,refresh_token:b,token_type:v,user:z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:$,redirectType:r.type},error:null})}catch(f){if(je(f))return this._returnResult({data:{session:null,redirectType:null},error:f});throw f}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const l=await Ka(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&l)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async l=>{var f;const{data:p,error:g}=l;if(g&&!ef(g))return this._returnResult({error:g});const b=(f=p.session)===null||f===void 0?void 0:f.access_token;if(b){const{error:S}=await this.admin.signOut(b,r);if(S&&!(vx(S)&&(S.status===404||S.status===401||S.status===403)||ef(S)))return this._returnResult({error:S})}return r!=="others"&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const l=Ox(),f={id:l,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,f),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:f}}}async _emitInitialSession(r){return await this._useSession(async l=>{var f,p;try{const{data:{session:g},error:b}=l;if(b)throw b;await((f=this.stateChangeEmitters.get(r))===null||f===void 0?void 0:f.callback("INITIAL_SESSION",g)),this._debug("INITIAL_SESSION","callback id",r,"session",g)}catch(g){await((p=this.stateChangeEmitters.get(r))===null||p===void 0?void 0:p.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",g),console.error(g)}})}async resetPasswordForEmail(r,l={}){let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Vs(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:f,code_challenge_method:p,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(g){if(await Un(this.storage,`${this.storageKey}-code-verifier`),je(g))return this._returnResult({data:null,error:g});throw g}}async getUserIdentities(){var r;try{const{data:l,error:f}=await this.getUser();if(f)throw f;return this._returnResult({data:{identities:(r=l.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var l;try{const{data:f,error:p}=await this._useSession(async g=>{var b,S,_,v,N;const{data:O,error:B}=g;if(B)throw B;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(b=r.options)===null||b===void 0?void 0:b.redirectTo,scopes:(S=r.options)===null||S===void 0?void 0:S.scopes,queryParams:(_=r.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",j,{headers:this.headers,jwt:(N=(v=O.session)===null||v===void 0?void 0:v.access_token)!==null&&N!==void 0?N:void 0})});if(p)throw p;return zn()&&!(!((l=r.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f?.url),this._returnResult({data:{provider:r.provider,url:f?.url},error:null})}catch(f){if(je(f))return this._returnResult({data:{provider:r.provider,url:null},error:f});throw f}}async linkIdentityIdToken(r){return await this._useSession(async l=>{var f;try{const{error:p,data:{session:g}}=l;if(p)throw p;const{options:b,provider:S,token:_,access_token:v,nonce:N}=r,O=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(f=g?.access_token)!==null&&f!==void 0?f:void 0,body:{provider:S,id_token:_,access_token:v,nonce:N,link_identity:!0,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Wi}),{data:B,error:j}=O;return j?this._returnResult({data:{user:null,session:null},error:j}):!B||!B.session||!B.user?this._returnResult({data:{user:null,session:null},error:new Hs}):(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("USER_UPDATED",B.session)),this._returnResult({data:B,error:j}))}catch(p){if(await Un(this.storage,`${this.storageKey}-code-verifier`),je(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}})}async unlinkIdentity(r){try{return await this._useSession(async l=>{var f,p;const{data:g,error:b}=l;if(b)throw b;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(p=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})})}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}}async _refreshAccessToken(r){const l=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{const f=Date.now();return await Mx(async p=>(p>0&&await Dx(200*Math.pow(2,p-1)),this._debug(l,"refreshing attempt",p),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Wi})),(p,g)=>{const b=200*Math.pow(2,p);return g&&tf(g)&&Date.now()+b-f<Zs})}catch(f){if(this._debug(l,"error",f),je(f))return this._returnResult({data:{session:null,user:null},error:f});throw f}finally{this._debug(l,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,l){const f=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",l,"url",f),zn()&&!l.skipBrowserRedirect&&window.location.assign(f),{data:{provider:r,url:f},error:null}}async _recoverAndRefresh(){var r,l;const f="#_recoverAndRefresh()";this._debug(f,"begin");try{const p=await Ka(this.storage,this.storageKey);if(p&&this.userStorage){let b=await Ka(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:p.user},await Qs(this.userStorage,this.storageKey+"-user",b)),p.user=(r=b?.user)!==null&&r!==void 0?r:nf()}else if(p&&!p.user&&!p.user){const b=await Ka(this.storage,this.storageKey+"-user");b&&b?.user?(p.user=b.user,await Un(this.storage,this.storageKey+"-user"),await Qs(this.storage,this.storageKey,p)):p.user=nf()}if(this._debug(f,"session from storage",p),!this._isValidSession(p)){this._debug(f,"session is not valid"),p!==null&&await this._removeSession();return}const g=((l=p.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<$h;if(this._debug(f,`session has${g?"":" not"} expired with margin of ${$h}s`),g){if(this.autoRefreshToken&&p.refresh_token){const{error:b}=await this._callRefreshToken(p.refresh_token);b&&(console.error(b),tf(b)||(this._debug(f,"refresh failed with a non-retryable error, removing the session",b),await this._removeSession()))}}else if(p.user&&p.user.__isUserNotAvailableProxy===!0)try{const{data:b,error:S}=await this._getUser(p.access_token);!S&&b?.user?(p.user=b.user,await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)):this._debug(f,"could not get user data, skipping SIGNED_IN notification")}catch(b){console.error("Error getting user data:",b),this._debug(f,"error getting user data, skipping SIGNED_IN notification",b)}else await this._notifyAllSubscribers("SIGNED_IN",p)}catch(p){this._debug(f,"error",p),console.error(p);return}finally{this._debug(f,"end")}}async _callRefreshToken(r){var l,f;if(!r)throw new bi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const p=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(p,"begin");try{this.refreshingDeferred=new Wc;const{data:g,error:b}=await this._refreshAccessToken(r);if(b)throw b;if(!g.session)throw new bi;await this._saveSession(g.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",g.session);const S={data:g.session,error:null};return this.refreshingDeferred.resolve(S),S}catch(g){if(this._debug(p,"error",g),je(g)){const b={data:null,error:g};return tf(g)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(b),b}throw(f=this.refreshingDeferred)===null||f===void 0||f.reject(g),g}finally{this.refreshingDeferred=null,this._debug(p,"end")}}async _notifyAllSubscribers(r,l,f=!0){const p=`#_notifyAllSubscribers(${r})`;this._debug(p,"begin",l,`broadcast = ${f}`);try{this.broadcastChannel&&f&&this.broadcastChannel.postMessage({event:r,session:l});const g=[],b=Array.from(this.stateChangeEmitters.values()).map(async S=>{try{await S.callback(r,l)}catch(_){g.push(_)}});if(await Promise.all(b),g.length>0){for(let S=0;S<g.length;S+=1)console.error(g[S]);throw g[0]}}finally{this._debug(p,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Un(this.storage,`${this.storageKey}-code-verifier`);const l=Object.assign({},r),f=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!f&&l.user&&await Qs(this.userStorage,this.storageKey+"-user",{user:l.user});const p=Object.assign({},l);delete p.user;const g=ug(p);await Qs(this.storage,this.storageKey,g)}else{const p=ug(l);await Qs(this.storage,this.storageKey,p)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Un(this.storage,this.storageKey),await Un(this.storage,this.storageKey+"-code-verifier"),await Un(this.storage,this.storageKey+"-user"),this.userStorage&&await Un(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&zn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Zs);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const l=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=l,l&&typeof l=="object"&&typeof l.unref=="function"?l.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(l)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const l=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,l&&clearTimeout(l)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async l=>{const{data:{session:f}}=l;if(!f||!f.refresh_token||!f.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const p=Math.floor((f.expires_at*1e3-r)/Zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${p} ticks, a tick lasts ${Zs}ms, refresh threshold is ${Ef} ticks`),p<=Ef&&await this._callRefreshToken(f.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof f2)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(r){this._debug("#visibilityChangedCallback","error",r)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const l=`#_onVisibilityChanged(${r})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,l,f){const p=[`provider=${encodeURIComponent(l)}`];if(f?.redirectTo&&p.push(`redirect_to=${encodeURIComponent(f.redirectTo)}`),f?.scopes&&p.push(`scopes=${encodeURIComponent(f.scopes)}`),this.flowType==="pkce"){const[g,b]=await Vs(this.storage,this.storageKey),S=new URLSearchParams({code_challenge:`${encodeURIComponent(g)}`,code_challenge_method:`${encodeURIComponent(b)}`});p.push(S.toString())}if(f?.queryParams){const g=new URLSearchParams(f.queryParams);p.push(g.toString())}return f?.skipBrowserRedirect&&p.push(`skip_http_redirect=${f.skipBrowserRedirect}`),`${r}?${p.join("&")}`}async _unenroll(r){try{return await this._useSession(async l=>{var f;const{data:p,error:g}=l;return g?this._returnResult({data:null,error:g}):await Ge(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token})})}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}}async _enroll(r){try{return await this._useSession(async l=>{var f,p;const{data:g,error:b}=l;if(b)return this._returnResult({data:null,error:b});const S=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:_,error:v}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:S,headers:this.headers,jwt:(f=g?.session)===null||f===void 0?void 0:f.access_token});return v?this._returnResult({data:null,error:v}):(r.factorType==="totp"&&_.type==="totp"&&(!((p=_?.totp)===null||p===void 0)&&p.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),this._returnResult({data:_,error:null}))})}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var f;const{data:p,error:g}=l;if(g)return this._returnResult({data:null,error:g});const b=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?cy(r.webauthn.credential_response):uy(r.webauthn.credential_response)})}:{code:r.code}),{data:S,error:_}=await Ge(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:b,headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token});return _?this._returnResult({data:null,error:_}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+S.expires_in},S)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",S),this._returnResult({data:S,error:_}))})}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var f;const{data:p,error:g}=l;if(g)return this._returnResult({data:null,error:g});const b=await Ge(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token});if(b.error)return b;const{data:S}=b;if(S.type!=="webauthn")return{data:S,error:null};switch(S.webauthn.type){case"create":return{data:Object.assign(Object.assign({},S),{webauthn:Object.assign(Object.assign({},S.webauthn),{credential_options:Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:ly(S.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},S),{webauthn:Object.assign(Object.assign({},S.webauthn),{credential_options:Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:oy(S.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}})}async _challengeAndVerify(r){const{data:l,error:f}=await this._challenge({factorId:r.factorId});return f?this._returnResult({data:null,error:f}):await this._verify({factorId:r.factorId,challengeId:l.id,code:r.code})}async _listFactors(){var r;const{data:{user:l},error:f}=await this.getUser();if(f)return{data:null,error:f};const p={all:[],phone:[],totp:[],webauthn:[]};for(const g of(r=l?.factors)!==null&&r!==void 0?r:[])p.all.push(g),g.status==="verified"&&p[g.factor_type].push(g);return{data:p,error:null}}async _getAuthenticatorAssuranceLevel(r){var l,f,p,g;if(r)try{const{payload:j}=Uc(r);let U=null;j.aal&&(U=j.aal);let z=U;const{data:{user:q},error:$}=await this.getUser(r);if($)return this._returnResult({data:null,error:$});((f=(l=q?.factors)===null||l===void 0?void 0:l.filter(ue=>ue.status==="verified"))!==null&&f!==void 0?f:[]).length>0&&(z="aal2");const Q=j.amr||[];return{data:{currentLevel:U,nextLevel:z,currentAuthenticationMethods:Q},error:null}}catch(j){if(je(j))return this._returnResult({data:null,error:j});throw j}const{data:{session:b},error:S}=await this.getSession();if(S)return this._returnResult({data:null,error:S});if(!b)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:_}=Uc(b.access_token);let v=null;_.aal&&(v=_.aal);let N=v;((g=(p=b.user.factors)===null||p===void 0?void 0:p.filter(j=>j.status==="verified"))!==null&&g!==void 0?g:[]).length>0&&(N="aal2");const B=_.amr||[];return{data:{currentLevel:v,nextLevel:N,currentAuthenticationMethods:B},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async l=>{const{data:{session:f},error:p}=l;return p?this._returnResult({data:null,error:p}):f?await Ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:f.access_token,xform:g=>({data:g,error:null})}):this._returnResult({data:null,error:new bi})})}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}}async _approveAuthorization(r,l){try{return await this._useSession(async f=>{const{data:{session:p},error:g}=f;if(g)return this._returnResult({data:null,error:g});if(!p)return this._returnResult({data:null,error:new bi});const b=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"approve"},xform:S=>({data:S,error:null})});return b.data&&b.data.redirect_url&&zn()&&!l?.skipBrowserRedirect&&window.location.assign(b.data.redirect_url),b})}catch(f){if(je(f))return this._returnResult({data:null,error:f});throw f}}async _denyAuthorization(r,l){try{return await this._useSession(async f=>{const{data:{session:p},error:g}=f;if(g)return this._returnResult({data:null,error:g});if(!p)return this._returnResult({data:null,error:new bi});const b=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"deny"},xform:S=>({data:S,error:null})});return b.data&&b.data.redirect_url&&zn()&&!l?.skipBrowserRedirect&&window.location.assign(b.data.redirect_url),b})}catch(f){if(je(f))return this._returnResult({data:null,error:f});throw f}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:l},error:f}=r;return f?this._returnResult({data:null,error:f}):l?await Ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,xform:p=>({data:p,error:null})}):this._returnResult({data:null,error:new bi})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async l=>{const{data:{session:f},error:p}=l;return p?this._returnResult({data:null,error:p}):f?(await Ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:f.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new bi})})}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(r,l={keys:[]}){let f=l.keys.find(S=>S.kid===r);if(f)return f;const p=Date.now();if(f=this.jwks.keys.find(S=>S.kid===r),f&&this.jwks_cached_at+yx>p)return f;const{data:g,error:b}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(b)throw b;return!g.keys||g.keys.length===0||(this.jwks=g,this.jwks_cached_at=p,f=g.keys.find(S=>S.kid===r),!f)?null:f}async getClaims(r,l={}){try{let f=r;if(!f){const{data:j,error:U}=await this.getSession();if(U||!j.session)return this._returnResult({data:null,error:U});f=j.session.access_token}const{header:p,payload:g,signature:b,raw:{header:S,payload:_}}=Uc(f);l?.allowExpired||Px(g.exp);const v=!p.alg||p.alg.startsWith("HS")||!p.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(p.kid,l?.keys?{keys:l.keys}:l?.jwks);if(!v){const{error:j}=await this.getUser(f);if(j)throw j;return{data:{claims:g,header:p,signature:b},error:null}}const N=Fx(p.alg),O=await crypto.subtle.importKey("jwk",v,N,!0,["verify"]);if(!await crypto.subtle.verify(N,O,b,Tx(`${S}.${_}`)))throw new Cf("Invalid JWT signature");return{data:{claims:g,header:p,signature:b},error:null}}catch(f){if(je(f))return this._returnResult({data:null,error:f});throw f}}}ao.nextInstanceID={};const wy=ao,vy="2.93.3";let Kl="";typeof Deno<"u"?Kl="deno":typeof document<"u"?Kl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kl="react-native":Kl="node";const by={"X-Client-Info":`supabase-js-${Kl}/${vy}`},Ay={headers:by},Ey={schema:"public"},Sy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_y={};function so(o){"@babel/helpers - typeof";return so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},so(o)}function Cy(o,r){if(so(o)!="object"||!o)return o;var l=o[Symbol.toPrimitive];if(l!==void 0){var f=l.call(o,r);if(so(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}function Ty(o){var r=Cy(o,"string");return so(r)=="symbol"?r:r+""}function Ny(o,r,l){return(r=Ty(r))in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function xg(o,r){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);r&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable})),l.push.apply(l,f)}return l}function on(o){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?xg(Object(l),!0).forEach(function(f){Ny(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):xg(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}const Oy=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Iy=()=>Headers,Ry=(o,r,l)=>{const f=Oy(l),p=Iy();return async(g,b)=>{var S;const _=(S=await r())!==null&&S!==void 0?S:o;let v=new p(b?.headers);return v.has("apikey")||v.set("apikey",o),v.has("Authorization")||v.set("Authorization",`Bearer ${_}`),f(g,on(on({},b),{},{headers:v}))}};function Dy(o){return o.endsWith("/")?o:o+"/"}function My(o,r){var l,f;const{db:p,auth:g,realtime:b,global:S}=o,{db:_,auth:v,realtime:N,global:O}=r,B={db:on(on({},_),p),auth:on(on({},v),g),realtime:on(on({},N),b),storage:{},global:on(on(on({},O),S),{},{headers:on(on({},(l=O?.headers)!==null&&l!==void 0?l:{}),(f=S?.headers)!==null&&f!==void 0?f:{})}),accessToken:async()=>""};return o.accessToken?B.accessToken=o.accessToken:delete B.accessToken,B}function By(o){const r=o?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Dy(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ly=class extends wy{constructor(o){super(o)}},ky=class{constructor(o,r,l){var f,p;this.supabaseUrl=o,this.supabaseKey=r;const g=By(o);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const b=`sb-${g.hostname.split(".")[0]}-auth-token`,S={db:Ey,realtime:_y,auth:on(on({},Sy),{},{storageKey:b}),global:Ay},_=My(l??{},S);if(this.storageKey=(f=_.auth.storageKey)!==null&&f!==void 0?f:"",this.headers=(p=_.global.headers)!==null&&p!==void 0?p:{},_.accessToken)this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(N,O)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(O)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=_.auth)!==null&&v!==void 0?v:{},this.headers,_.global.fetch)}this.fetch=Ry(r,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(on({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(N=>this.realtime.setAuth(N)).catch(N=>console.warn("Failed to set initial Realtime auth token:",N)),this.rest=new vp(new URL("rest/v1",g).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new dx(this.storageUrl.href,this.headers,this.fetch,l?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new mp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(o){return this.rest.from(o)}schema(o){return this.rest.schema(o)}rpc(o,r={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(o,r,l)}channel(o,r={config:{}}){return this.realtime.channel(o,r)}getChannels(){return this.realtime.getChannels()}removeChannel(o){return this.realtime.removeChannel(o)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var o=this,r,l;if(o.accessToken)return await o.accessToken();const{data:f}=await o.auth.getSession();return(r=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&r!==void 0?r:o.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:o,persistSession:r,detectSessionInUrl:l,storage:f,userStorage:p,storageKey:g,flowType:b,lock:S,debug:_,throwOnError:v},N,O){const B={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ly({url:this.authUrl.href,headers:on(on({},B),N),storageKey:g,autoRefreshToken:o,persistSession:r,detectSessionInUrl:l,storage:f,userStorage:p,flowType:b,lock:S,debug:_,throwOnError:v,fetch:O,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(o){return new jp(this.realtimeUrl.href,on(on({},o),{},{params:on(on({},{apikey:this.supabaseKey}),o?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,r)=>{this._handleTokenChanged(o,"CLIENT",r?.access_token)})}_handleTokenChanged(o,r,l){(o==="TOKEN_REFRESHED"||o==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):o==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const jy=(o,r,l)=>new ky(o,r,l);function Uy(){if(typeof window<"u")return!1;const o=globalThis.process;if(!o)return!1;const r=o.version;if(r==null)return!1;const l=r.match(/^v(\d+)\./);return l?parseInt(l[1],10)<=18:!1}Uy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zy="https://fjfeecztgyqjgpobyoem.supabase.co",Py="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqZmVlY3p0Z3lxamdwb2J5b2VtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4NDc0MDksImV4cCI6MjA4NTQyMzQwOX0.9MY34pcJGIlIs0e24xzbYUWfpr7GeG3-BLIcGtq0XL0",Xe=jy(zy,Py),m2=de.createContext();function Fy({children:o}){const[r,l]=de.useState(null),[f,p]=de.useState(!0);de.useEffect(()=>{const O=localStorage.getItem("app_user");if(O)try{l(JSON.parse(O))}catch(B){console.error("Invalid session data",B),localStorage.removeItem("app_user")}p(!1)},[]);const g=async(O,B)=>{try{if(!Xe)throw new Error("Supabase not connected");const{data:j,error:U}=await Xe.from("app_users").select("*").eq("pin",O).single();if(U||!j)throw new Error("Invalid PIN");const z={id:j.id,username:j.username,role:j.role,full_name:j.full_name};return l(z),B?localStorage.setItem("app_user",JSON.stringify(z)):localStorage.removeItem("app_user"),{success:!0}}catch(j){return{success:!1,error:j.message}}},b=()=>{l(null),localStorage.removeItem("app_user")},S=r&&(r.role==="ADMIN"||r.role==="TEACHER"||r.role==="ASSISTANT_TEACHER"),_=r&&r.role==="ADMIN",v=r&&(r.role==="ADMIN"||r.role==="TEACHER"),N={user:r,loading:f,login:g,logout:b,permissions:{canEditStudents:S,canDeleteStudents:_,canUnlockAttendance:v}};return E.jsx(m2.Provider,{value:N,children:!f&&o})}function Sa(){return de.useContext(m2)}function Hy(){let o=localStorage.getItem("virtual_device_id");return o||(o="dev_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),localStorage.setItem("virtual_device_id",o)),o}function Vy({onFinish:o}){de.useEffect(()=>{const f=setTimeout(o,2e3);return(async()=>{try{const g=Hy(),b=navigator.userAgent;Xe&&await Xe.from("device_logs").insert([{device_id:g,user_agent:b}])}catch(g){console.warn("Logging failed:",g)}})(),()=>clearTimeout(f)},[o]);const[r,l]=de.useState(!1);return de.useEffect(()=>{const f=setTimeout(()=>l(!0),5e3);return()=>clearTimeout(f)},[]),E.jsx("div",{className:"splash-screen",children:E.jsxs("div",{className:"splash-content",children:[E.jsx("img",{src:"/kids-church-app/newlogo.png",alt:"Logo",className:"splash-logo",style:{width:"120px",height:"120px",borderRadius:"20px",marginBottom:"16px",objectFit:"cover"}}),E.jsx("h1",{className:"splash-title",children:"Kid's Church"}),E.jsx("p",{className:"splash-text",children:"Attendance"}),r&&E.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},style:{marginTop:"32px",padding:"8px 16px",background:"transparent",border:"1px solid #fff",color:"#fff",borderRadius:"8px",cursor:"pointer",opacity:.7},children:"Tap to Reset App"})]})})}const p2=(...o)=>o.filter((r,l,f)=>!!r&&r.trim()!==""&&f.indexOf(r)===l).join(" ").trim();const Gy=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Yy=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,f)=>f?f.toUpperCase():l.toLowerCase());const yg=o=>{const r=Yy(o);return r.charAt(0).toUpperCase()+r.slice(1)};var qy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Xy=o=>{for(const r in o)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};const Wy=de.forwardRef(({color:o="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:f,className:p="",children:g,iconNode:b,...S},_)=>de.createElement("svg",{ref:_,...qy,width:r,height:r,stroke:o,strokeWidth:f?Number(l)*24/Number(r):l,className:p2("lucide",p),...!g&&!Xy(S)&&{"aria-hidden":"true"},...S},[...b.map(([v,N])=>de.createElement(v,N)),...Array.isArray(g)?g:[g]]));const Ct=(o,r)=>{const l=de.forwardRef(({className:f,...p},g)=>de.createElement(Wy,{ref:g,iconNode:r,className:p2(`lucide-${Gy(yg(o))}`,`lucide-${o}`,f),...p}));return l.displayName=yg(o),l};const Zy=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Qy=Ct("activity",Zy);const Ky=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pn=Ct("arrow-left",Ky);const Jy=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$y=Ct("arrow-right",Jy);const ew=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],x2=Ct("arrow-up-down",ew);const tw=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],nw=Ct("award",tw);const iw=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],lo=Ct("book-open",iw);const rw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],aw=Ct("calendar",rw);const sw=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],lw=Ct("chart-no-axes-column",sw);const ow=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ho=Ct("circle-check-big",ow);const cw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uw=Ct("circle-question-mark",cw);const hw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],y2=Ct("clipboard-list",hw);const fw=[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],w2=Ct("contact",fw);const dw=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],gw=Ct("flame",dw);const mw=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],pw=Ct("gift",mw);const xw=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],yw=Ct("heart-handshake",xw);const ww=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],vw=Ct("lock-open",ww);const bw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wg=Ct("lock",bw);const Aw=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],v2=Ct("log-out",Aw);const Ew=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],If=Ct("message-square",Ew);const Sw=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],b2=Ct("pen-line",Sw);const _w=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Rf=Ct("plus",_w);const Cw=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],A2=Ct("qr-code",Cw);const Tw=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],E2=Ct("scan",Tw);const Nw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fo=Ct("search",Nw);const Ow=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Df=Ct("shield",Ow);const Iw=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],S2=Ct("star",Iw);const Rw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mf=Ct("trash-2",Rw);const Dw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bf=Ct("triangle-alert",Dw);const Mw=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],_2=Ct("trophy",Mw);const Bw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zc=Ct("user",Bw);const Lw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],oo=Ct("users",Lw);function kw(){const{login:o,loading:r}=Sa(),[l,f]=de.useState(null),[p,g]=de.useState(""),[b,S]=de.useState(""),[_,v]=de.useState(!1),[N,O]=de.useState(!1),B=q=>{p.length<6&&g($=>$+q),S("")},j=()=>g(q=>q.slice(0,-1)),U=()=>g(""),z=async()=>{if(!p)return;v(!0),S("");const q=await o(p,N);q.success||(S(q.error||"Invalid PIN"),g("")),v(!1)};return E.jsx("div",{className:"page fade-in",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"#F3F4F6"},children:E.jsxs("div",{className:"card",style:{padding:"32px",width:"100%",maxWidth:"400px",textAlign:"center"},children:[E.jsx("img",{src:"/kids-church-app/newlogo.png",alt:"Logo",style:{width:"80px",height:"80px",borderRadius:"16px",marginBottom:"8px",objectFit:"cover"}}),E.jsx("h2",{style:{marginBottom:"24px",color:"#1F2937"},children:"Login"}),E.jsxs("div",{style:{marginBottom:"24px"},children:[E.jsx("div",{style:{background:"#F9FAFB",border:"2px solid #E5E7EB",borderRadius:"12px",padding:"16px",fontSize:"24px",letterSpacing:"8px",fontWeight:"bold",minHeight:"64px",display:"flex",alignItems:"center",justifyContent:"center",color:"#374151"},children:p?"*".repeat(p.length):E.jsx("span",{style:{color:"#9CA3AF",fontSize:"16px",letterSpacing:"normal",fontWeight:"normal"},children:"Enter PIN"})}),b&&E.jsxs("div",{style:{color:"#DC2626",fontSize:"14px",marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[E.jsx(Bf,{size:14})," ",b]})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"24px"},children:[[1,2,3,4,5,6,7,8,9].map(q=>E.jsx("button",{onClick:()=>B(q),className:"btn secondary",style:{fontSize:"20px",padding:"16px"},children:q},q)),E.jsx("button",{onClick:U,className:"btn secondary",style:{fontSize:"14px",padding:"16px",color:"#EF4444"},children:"C"}),E.jsx("button",{onClick:()=>B(0),className:"btn secondary",style:{fontSize:"20px",padding:"16px"},children:"0"}),E.jsx("button",{onClick:j,className:"btn secondary",style:{fontSize:"14px",padding:"16px"},children:""})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:[E.jsx("input",{type:"checkbox",id:"remember",checked:N,onChange:q=>O(q.target.checked),style:{width:"18px",height:"18px"}}),E.jsx("label",{htmlFor:"remember",style:{fontSize:"14px",color:"#4B5563",cursor:"pointer"},children:"Keep me signed in"})]}),E.jsxs("button",{className:"btn full-width",onClick:z,disabled:_||p.length<4,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[_?"Verifying...":"Login"," ",E.jsx($y,{size:20})]}),E.jsx("p",{style:{marginTop:"24px",fontSize:"12px",color:"#9CA3AF"},children:"Default PINs: Admin 1234, Teacher 1111, Asst 2222"})]})})}var Ie;(function(o){o[o.QR_CODE=0]="QR_CODE",o[o.AZTEC=1]="AZTEC",o[o.CODABAR=2]="CODABAR",o[o.CODE_39=3]="CODE_39",o[o.CODE_93=4]="CODE_93",o[o.CODE_128=5]="CODE_128",o[o.DATA_MATRIX=6]="DATA_MATRIX",o[o.MAXICODE=7]="MAXICODE",o[o.ITF=8]="ITF",o[o.EAN_13=9]="EAN_13",o[o.EAN_8=10]="EAN_8",o[o.PDF_417=11]="PDF_417",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ie||(Ie={}));var vg=new Map([[Ie.QR_CODE,"QR_CODE"],[Ie.AZTEC,"AZTEC"],[Ie.CODABAR,"CODABAR"],[Ie.CODE_39,"CODE_39"],[Ie.CODE_93,"CODE_93"],[Ie.CODE_128,"CODE_128"],[Ie.DATA_MATRIX,"DATA_MATRIX"],[Ie.MAXICODE,"MAXICODE"],[Ie.ITF,"ITF"],[Ie.EAN_13,"EAN_13"],[Ie.EAN_8,"EAN_8"],[Ie.PDF_417,"PDF_417"],[Ie.RSS_14,"RSS_14"],[Ie.RSS_EXPANDED,"RSS_EXPANDED"],[Ie.UPC_A,"UPC_A"],[Ie.UPC_E,"UPC_E"],[Ie.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),bg;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.URL=1]="URL"})(bg||(bg={}));function jw(o){return Object.values(Ie).includes(o)}var Ea;(function(o){o[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ea||(Ea={}));var Ki=(function(){function o(){}return o.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",o.SCAN_DEFAULT_FPS=2,o.DEFAULT_DISABLE_FLIP=!1,o.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,o.DEFAULT_SUPPORTED_SCAN_TYPE=[Ea.SCAN_TYPE_CAMERA,Ea.SCAN_TYPE_FILE],o})(),C2=(function(){function o(r,l){this.format=r,this.formatName=l}return o.prototype.toString=function(){return this.formatName},o.create=function(r){if(!vg.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new o(r,vg.get(r))},o})(),Ag=(function(){function o(){}return o.createFromText=function(r){var l={text:r};return{decodedText:r,result:l}},o.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},o})(),Tf;(function(o){o[o.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",o[o.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",o[o.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Tf||(Tf={}));var T2=(function(){function o(){}return o.createFrom=function(r){return{errorMessage:r,type:Tf.UNKWOWN_ERROR}},o})(),N2=(function(){function o(r){this.verbose=r}return o.prototype.log=function(r){this.verbose&&console.log(r)},o.prototype.warn=function(r){this.verbose&&console.warn(r)},o.prototype.logError=function(r,l){(this.verbose||l===!0)&&console.error(r)},o.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},o})();function ur(o){return typeof o>"u"||o===null}function Uw(o,r,l){return o>l?l:o<r?r:o}var Js=(function(){function o(){}return o.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},o.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},o.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},o.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},o.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},o.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},o.scannerPaused=function(){return"Scanner paused"},o})(),Bt=(function(){function o(){}return o.scanningStatus=function(){return"Scanning"},o.idleStatus=function(){return"Idle"},o.errorStatus=function(){return"Error"},o.permissionStatus=function(){return"Permission"},o.noCameraFoundErrorStatus=function(){return"No Cameras"},o.lastMatch=function(r){return"Last Match: ".concat(r)},o.codeScannerTitle=function(){return"Code Scanner"},o.cameraPermissionTitle=function(){return"Request Camera Permissions"},o.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},o.noCameraFound=function(){return"No camera found"},o.scanButtonStopScanningText=function(){return"Stop Scanning"},o.scanButtonStartScanningText=function(){return"Start Scanning"},o.torchOnButton=function(){return"Switch On Torch"},o.torchOffButton=function(){return"Switch Off Torch"},o.torchOnFailedMessage=function(){return"Failed to turn on torch"},o.torchOffFailedMessage=function(){return"Failed to turn off torch"},o.scanButtonScanningStarting=function(){return"Launching Camera..."},o.textIfCameraScanSelected=function(){return"Scan an Image File"},o.textIfFileScanSelected=function(){return"Scan using camera directly"},o.selectCamera=function(){return"Select Camera"},o.fileSelectionChooseImage=function(){return"Choose Image"},o.fileSelectionChooseAnother=function(){return"Choose Another"},o.fileSelectionNoImageSelected=function(){return"No image choosen"},o.anonymousCameraPrefix=function(){return"Anonymous Camera"},o.dragAndDropMessage=function(){return"Or drop an image to scan"},o.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},o.zoom=function(){return"zoom"},o.loadingImage=function(){return"Loading image..."},o.cameraScanAltText=function(){return"Camera based scan"},o.fileScanAltText=function(){return"Fule based scan"},o})(),Eg=(function(){function o(){}return o.poweredBy=function(){return"Powered by "},o.reportIssues=function(){return"Report issues"},o})(),O2=(function(){function o(){}return o.isMediaStreamConstraintsValid=function(r,l){if(typeof r!="object"){var f=typeof r;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(f,"."),!0),!1}for(var p=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(p),b=Object.keys(r),S=0,_=b;S<_.length;S++){var v=_[S];if(g.has(v))return l.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},o})(),Jl={exports:{}},zw=Jl.exports,Sg;function Pw(){return Sg||(Sg=1,(function(o,r){(function(l,f){f(r)})(zw,(function(l){function f(I){return I==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,t){I.__proto__=t}||function(I,t){for(var i in t)t.hasOwnProperty(i)&&(I[i]=t[i])};function g(I,t){p(I,t);function i(){this.constructor=I}I.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function b(I,t){var i=Object.setPrototypeOf;i?i(I,t):I.__proto__=t}function S(I,t){t===void 0&&(t=I.constructor);var i=Error.captureStackTrace;i&&i(I,t)}var _=(function(I){g(t,I);function t(i){var a=this.constructor,c=I.call(this,i)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),b(c,a.prototype),S(c),c}return t})(Error);class v extends _{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class N extends v{}N.kind="ArgumentException";class O extends v{}O.kind="IllegalArgumentException";class B{constructor(t){if(this.binarizer=t,t===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,a,c){const u=this.binarizer.getLuminanceSource().crop(t,i,a,c);return new B(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new B(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new B(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends v{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class U{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class z{static arraycopy(t,i,a,c,u){for(;u--;)a[c++]=t[i++]}static currentTimeMillis(){return Date.now()}}class q extends v{}q.kind="IndexOutOfBoundsException";class $ extends q{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}$.kind="ArrayIndexOutOfBoundsException";class se{static fill(t,i){for(let a=0,c=t.length;a<c;a++)t[a]=i}static fillWithin(t,i,a,c){se.rangeCheck(t.length,i,a);for(let u=i;u<a;u++)t[u]=c}static rangeCheck(t,i,a){if(i>a)throw new O("fromIndex("+i+") > toIndex("+a+")");if(i<0)throw new $(i);if(a>t)throw new $(a)}static asList(...t){return t}static create(t,i,a){return Array.from({length:t}).map(u=>Array.from({length:i}).fill(a))}static createInt32Array(t,i,a){return Array.from({length:t}).map(u=>Int32Array.from({length:i}).fill(a))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let a=0,c=t.length;a<c;a++)if(t[a]!==i[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const a of t)i=31*i+a;return i}static fillUint8Array(t,i){for(let a=0;a!==t.length;a++)t[a]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const a=new Uint8Array(i);return a.set(t),a}return t.slice(0,i)}static copyOfRange(t,i,a){const c=a-i,u=new Int32Array(c);return z.arraycopy(t,i,u,0,c),u}static binarySearch(t,i,a){a===void 0&&(a=se.numberComparator);let c=0,u=t.length-1;for(;c<=u;){const d=u+c>>1,m=a(i,t[d]);if(m>0)c=d+1;else if(m<0)u=d-1;else return d}return-c-1}static numberComparator(t,i){return t-i}}class Q{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let a=31;return i=t<<16,i!==0&&(a-=16,t=i),i=t<<8,i!==0&&(a-=8,t=i),i=t<<4,i!==0&&(a-=4,t=i),i=t<<2,i!==0&&(a-=2,t=i),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}Q.MIN_VALUE_32_BITS=-2147483648,Q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ue{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=ue.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=ue.makeArray(t);z.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const a=this.bits;let c=Math.floor(t/32),u=a[c];u&=~((1<<(t&31))-1);const d=a.length;for(;u===0;){if(++c===d)return i;u=a[c]}const m=c*32+Q.numberOfTrailingZeros(u);return m>i?i:m}getNextUnset(t){const i=this.size;if(t>=i)return i;const a=this.bits;let c=Math.floor(t/32),u=~a[c];u&=~((1<<(t&31))-1);const d=a.length;for(;u===0;){if(++c===d)return i;u=~a[c]}const m=c*32+Q.numberOfTrailingZeros(u);return m>i?i:m}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new O;if(i===t)return;i--;const a=Math.floor(t/32),c=Math.floor(i/32),u=this.bits;for(let d=a;d<=c;d++){const m=d>a?0:t&31,A=(2<<(d<c?31:i&31))-(1<<m);u[d]|=A}}clear(){const t=this.bits.length,i=this.bits;for(let a=0;a<t;a++)i[a]=0}isRange(t,i,a){if(i<t||t<0||i>this.size)throw new O;if(i===t)return!0;i--;const c=Math.floor(t/32),u=Math.floor(i/32),d=this.bits;for(let m=c;m<=u;m++){const y=m>c?0:t&31,C=(2<<(m<u?31:i&31))-(1<<y)&4294967295;if((d[m]&C)!==(a?C:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let a=i;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let a=0;a<i;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new O("Sizes don't match");const i=this.bits;for(let a=0,c=i.length;a<c;a++)i[a]^=t.bits[a]}toBytes(t,i,a,c){for(let u=0;u<c;u++){let d=0;for(let m=0;m<8;m++)this.get(t)&&(d|=1<<7-m),t++;i[a+u]=d}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),a=i+1,c=this.bits;for(let u=0;u<a;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,t[i-u]=d}if(this.size!==a*32){const u=a*32-this.size;let d=t[0]>>>u;for(let m=1;m<a;m++){const y=t[m];d|=y<<32-u,t[m-1]=d,d=y>>>u}t[a-1]=d}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof ue))return!1;const i=t;return this.size===i.size&&se.equals(this.bits,i.bits)}hashCode(){return 31*this.size+se.hashCode(this.bits)}toString(){let t="";for(let i=0,a=this.size;i<a;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new ue(this.size,this.bits.slice())}}var Ne;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ne||(Ne={}));var ve=Ne;class W extends v{static getFormatInstance(){return new W}}W.kind="FormatException";var ee;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(ee||(ee={}));class re{constructor(t,i,a,...c){this.valueIdentifier=t,this.name=a,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=c,re.VALUE_IDENTIFIER_TO_ECI.set(t,this),re.NAME_TO_ECI.set(a,this);const u=this.values;for(let d=0,m=u.length;d!==m;d++){const y=u[d];re.VALUES_TO_ECI.set(y,this)}for(const d of c)re.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new W("incorect value");const i=re.VALUES_TO_ECI.get(t);if(i===void 0)throw new W("incorect value");return i}static getCharacterSetECIByName(t){const i=re.NAME_TO_ECI.get(t);if(i===void 0)throw new W("incorect value");return i}equals(t){if(!(t instanceof re))return!1;const i=t;return this.getName()===i.getName()}}re.VALUE_IDENTIFIER_TO_ECI=new Map,re.VALUES_TO_ECI=new Map,re.NAME_TO_ECI=new Map,re.Cp437=new re(ee.Cp437,Int32Array.from([0,2]),"Cp437"),re.ISO8859_1=new re(ee.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),re.ISO8859_2=new re(ee.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),re.ISO8859_3=new re(ee.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),re.ISO8859_4=new re(ee.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),re.ISO8859_5=new re(ee.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),re.ISO8859_6=new re(ee.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),re.ISO8859_7=new re(ee.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),re.ISO8859_8=new re(ee.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),re.ISO8859_9=new re(ee.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),re.ISO8859_10=new re(ee.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),re.ISO8859_11=new re(ee.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),re.ISO8859_13=new re(ee.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),re.ISO8859_14=new re(ee.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),re.ISO8859_15=new re(ee.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),re.ISO8859_16=new re(ee.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),re.SJIS=new re(ee.SJIS,20,"SJIS","Shift_JIS"),re.Cp1250=new re(ee.Cp1250,21,"Cp1250","windows-1250"),re.Cp1251=new re(ee.Cp1251,22,"Cp1251","windows-1251"),re.Cp1252=new re(ee.Cp1252,23,"Cp1252","windows-1252"),re.Cp1256=new re(ee.Cp1256,24,"Cp1256","windows-1256"),re.UnicodeBigUnmarked=new re(ee.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),re.UTF8=new re(ee.UTF8,26,"UTF8","UTF-8"),re.ASCII=new re(ee.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),re.Big5=new re(ee.Big5,28,"Big5"),re.GB18030=new re(ee.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),re.EUC_KR=new re(ee.EUC_KR,30,"EUC_KR","EUC-KR");class At extends v{}At.kind="UnsupportedOperationException";class We{static decode(t,i){const a=this.encodingName(i);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!We.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const a=this.encodingName(i);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof re?t:re.getCharacterSetECIByName(t)}static decodeFallback(t,i){const a=this.encodingCharacterSet(i);if(We.isDecodeFallbackSupported(a)){let c="";for(let u=0,d=t.length;u<d;u++){let m=t[u].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(a.equals(re.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new At(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(re.UTF8)||t.equals(re.ISO8859_1)||t.equals(re.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class _e{static castAsNonUtf8Char(t,i=null){const a=i?i.getName():this.ISO88591;return We.decode(new Uint8Array([t]),a)}static guessEncoding(t,i){if(i!=null&&i.get(ve.CHARACTER_SET)!==void 0)return i.get(ve.CHARACTER_SET).toString();const a=t.length;let c=!0,u=!0,d=!0,m=0,y=0,A=0,C=0,R=0,D=0,k=0,F=0,V=0,X=0,le=0;const be=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let we=0;we<a&&(c||u||d);we++){const xe=t[we]&255;d&&(m>0?(xe&128)===0?d=!1:m--:(xe&128)!==0&&((xe&64)===0?d=!1:(m++,(xe&32)===0?y++:(m++,(xe&16)===0?A++:(m++,(xe&8)===0?C++:d=!1))))),c&&(xe>127&&xe<160?c=!1:xe>159&&(xe<192||xe===215||xe===247)&&le++),u&&(R>0?xe<64||xe===127||xe>252?u=!1:R--:xe===128||xe===160||xe>239?u=!1:xe>160&&xe<224?(D++,F=0,k++,k>V&&(V=k)):xe>127?(R++,k=0,F++,F>X&&(X=F)):(k=0,F=0))}return d&&m>0&&(d=!1),u&&R>0&&(u=!1),d&&(be||y+A+C>0)?_e.UTF8:u&&(_e.ASSUME_SHIFT_JIS||V>=3||X>=3)?_e.SHIFT_JIS:c&&u?V===2&&D===2||le*10>=a?_e.SHIFT_JIS:_e.ISO88591:c?_e.ISO88591:u?_e.SHIFT_JIS:d?_e.UTF8:_e.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let a=-1;function c(d,m,y,A,C,R){if(d==="%%")return"%";if(i[++a]===void 0)return;d=A?parseInt(A.substr(1)):void 0;let D=C?parseInt(C.substr(1)):void 0,k;switch(R){case"s":k=i[a];break;case"c":k=i[a][0];break;case"f":k=parseFloat(i[a]).toFixed(d);break;case"p":k=parseFloat(i[a]).toPrecision(d);break;case"e":k=parseFloat(i[a]).toExponential(d);break;case"x":k=parseInt(i[a]).toString(D||16);break;case"d":k=parseFloat(parseInt(i[a],D||10).toPrecision(d)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(D);let F=parseInt(y),V=y&&y[0]+""=="0"?"0":" ";for(;k.length<F;)k=m!==void 0?k+V:V+k;return k}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,c)}static getBytes(t,i){return We.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}_e.SHIFT_JIS=re.SJIS.getName(),_e.GB2312="GB2312",_e.ISO88591=re.ISO8859_1.getName(),_e.EUC_JP="EUC_JP",_e.UTF8=re.UTF8.getName(),_e.PLATFORM_DEFAULT_ENCODING=_e.UTF8,_e.ASSUME_SHIFT_JIS=!1;class De{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=_e.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,a){for(let c=i;i<i+a;c++)this.append(t[c]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class He{constructor(t,i,a,c){if(this.width=t,this.height=i,this.rowSize=a,this.bits=c,i==null&&(i=t),this.height=i,t<1||i<1)throw new O("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,a=t[0].length,c=new He(a,i);for(let u=0;u<i;u++){const d=t[u];for(let m=0;m<a;m++)d[m]&&c.set(m,u)}return c}static parseFromString(t,i,a){if(t===null)throw new O("stringRepresentation cannot be null");const c=new Array(t.length);let u=0,d=0,m=-1,y=0,A=0;for(;A<t.length;)if(t.charAt(A)===`
`||t.charAt(A)==="\r"){if(u>d){if(m===-1)m=u-d;else if(u-d!==m)throw new O("row lengths do not match");d=u,y++}A++}else if(t.substring(A,A+i.length)===i)A+=i.length,c[u]=!0,u++;else if(t.substring(A,A+a.length)===a)A+=a.length,c[u]=!1,u++;else throw new O("illegal character encountered: "+t.substring(A));if(u>d){if(m===-1)m=u-d;else if(u-d!==m)throw new O("row lengths do not match");y++}const C=new He(m,y);for(let R=0;R<u;R++)c[R]&&C.set(Math.floor(R%m),Math.floor(R/m));return C}get(t,i){const a=i*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new O("input matrix dimensions do not match");const i=new ue(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const m=u*a,y=t.getRow(u,i).getBitArray();for(let A=0;A<a;A++)c[m+A]^=y[A]}}clear(){const t=this.bits,i=t.length;for(let a=0;a<i;a++)t[a]=0}setRegion(t,i,a,c){if(i<0||t<0)throw new O("Left and top must be nonnegative");if(c<1||a<1)throw new O("Height and width must be at least 1");const u=t+a,d=i+c;if(d>this.height||u>this.width)throw new O("The region must fit inside the matrix");const m=this.rowSize,y=this.bits;for(let A=i;A<d;A++){const C=A*m;for(let R=t;R<u;R++)y[C+Math.floor(R/32)]|=1<<(R&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new ue(this.width):i.clear();const a=this.rowSize,c=this.bits,u=t*a;for(let d=0;d<a;d++)i.setBulk(d*32,c[u+d]);return i}setRow(t,i){z.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let a=new ue(t),c=new ue(t);for(let u=0,d=Math.floor((i+1)/2);u<d;u++)a=this.getRow(u,a),c=this.getRow(i-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(i-1-u,a)}getEnclosingRectangle(){const t=this.width,i=this.height,a=this.rowSize,c=this.bits;let u=t,d=i,m=-1,y=-1;for(let A=0;A<i;A++)for(let C=0;C<a;C++){const R=c[A*a+C];if(R!==0){if(A<d&&(d=A),A>y&&(y=A),C*32<u){let D=0;for(;(R<<31-D&4294967295)===0;)D++;C*32+D<u&&(u=C*32+D)}if(C*32+31>m){let D=31;for(;!(R>>>D);)D--;C*32+D>m&&(m=C*32+D)}}}return m<u||y<d?null:Int32Array.from([u,d,m-u+1,y-d+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let a=0;for(;a<i.length&&i[a]===0;)a++;if(a===i.length)return null;const c=a/t;let u=a%t*32;const d=i[a];let m=0;for(;(d<<31-m&4294967295)===0;)m++;return u+=m,Int32Array.from([u,c])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let a=i.length-1;for(;a>=0&&i[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/t);let u=Math.floor(a%t)*32;const d=i[a];let m=31;for(;!(d>>>m);)m--;return u+=m,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof He))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&se.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+se.hashCode(this.bits),t}toString(t="X ",i="  ",a=`
`){return this.buildToString(t,i,a)}buildToString(t,i,a){let c=new De;for(let u=0,d=this.height;u<d;u++){for(let m=0,y=this.width;m<y;m++)c.append(this.get(m,u)?t:i);c.append(a)}return c.toString()}clone(){return new He(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends v{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class te extends U{constructor(t){super(t),this.luminances=te.EMPTY,this.buckets=new Int32Array(te.LUMINANCE_BUCKETS)}getBlackRow(t,i){const a=this.getLuminanceSource(),c=a.getWidth();i==null||i.getSize()<c?i=new ue(c):i.clear(),this.initArrays(c);const u=a.getRow(t,this.luminances),d=this.buckets;for(let y=0;y<c;y++)d[(u[y]&255)>>te.LUMINANCE_SHIFT]++;const m=te.estimateBlackPoint(d);if(c<3)for(let y=0;y<c;y++)(u[y]&255)<m&&i.set(y);else{let y=u[0]&255,A=u[1]&255;for(let C=1;C<c-1;C++){const R=u[C+1]&255;(A*4-y-R)/2<m&&i.set(C),y=A,A=R}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight(),c=new He(i,a);this.initArrays(i);const u=this.buckets;for(let y=1;y<5;y++){const A=Math.floor(a*y/5),C=t.getRow(A,this.luminances),R=Math.floor(i*4/5);for(let D=Math.floor(i/5);D<R;D++){const k=C[D]&255;u[k>>te.LUMINANCE_SHIFT]++}}const d=te.estimateBlackPoint(u),m=t.getMatrix();for(let y=0;y<a;y++){const A=y*i;for(let C=0;C<i;C++)(m[A+C]&255)<d&&c.set(C,y)}return c}createBinarizer(t){return new te(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let a=0;a<te.LUMINANCE_BUCKETS;a++)i[a]=0}static estimateBlackPoint(t){const i=t.length;let a=0,c=0,u=0;for(let C=0;C<i;C++)t[C]>u&&(c=C,u=t[C]),t[C]>a&&(a=t[C]);let d=0,m=0;for(let C=0;C<i;C++){const R=C-c,D=t[C]*R*R;D>m&&(d=C,m=D)}if(c>d){const C=c;c=d,d=C}if(d-c<=i/16)throw new ae;let y=d-1,A=-1;for(let C=d-1;C>c;C--){const R=C-c,D=R*R*(d-C)*(a-t[C]);D>A&&(y=C,A=D)}return y<<te.LUMINANCE_SHIFT}}te.LUMINANCE_BITS=5,te.LUMINANCE_SHIFT=8-te.LUMINANCE_BITS,te.LUMINANCE_BUCKETS=1<<te.LUMINANCE_BITS,te.EMPTY=Uint8ClampedArray.from([0]);class fe extends te{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight();if(i>=fe.MINIMUM_DIMENSION&&a>=fe.MINIMUM_DIMENSION){const c=t.getMatrix();let u=i>>fe.BLOCK_SIZE_POWER;(i&fe.BLOCK_SIZE_MASK)!==0&&u++;let d=a>>fe.BLOCK_SIZE_POWER;(a&fe.BLOCK_SIZE_MASK)!==0&&d++;const m=fe.calculateBlackPoints(c,u,d,i,a),y=new He(i,a);fe.calculateThresholdForBlock(c,u,d,i,a,m,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new fe(t)}static calculateThresholdForBlock(t,i,a,c,u,d,m){const y=u-fe.BLOCK_SIZE,A=c-fe.BLOCK_SIZE;for(let C=0;C<a;C++){let R=C<<fe.BLOCK_SIZE_POWER;R>y&&(R=y);const D=fe.cap(C,2,a-3);for(let k=0;k<i;k++){let F=k<<fe.BLOCK_SIZE_POWER;F>A&&(F=A);const V=fe.cap(k,2,i-3);let X=0;for(let be=-2;be<=2;be++){const we=d[D+be];X+=we[V-2]+we[V-1]+we[V]+we[V+1]+we[V+2]}const le=X/25;fe.thresholdBlock(t,F,R,le,c,m)}}}static cap(t,i,a){return t<i?i:t>a?a:t}static thresholdBlock(t,i,a,c,u,d){for(let m=0,y=a*u+i;m<fe.BLOCK_SIZE;m++,y+=u)for(let A=0;A<fe.BLOCK_SIZE;A++)(t[y+A]&255)<=c&&d.set(i+A,a+m)}static calculateBlackPoints(t,i,a,c,u){const d=u-fe.BLOCK_SIZE,m=c-fe.BLOCK_SIZE,y=new Array(a);for(let A=0;A<a;A++){y[A]=new Int32Array(i);let C=A<<fe.BLOCK_SIZE_POWER;C>d&&(C=d);for(let R=0;R<i;R++){let D=R<<fe.BLOCK_SIZE_POWER;D>m&&(D=m);let k=0,F=255,V=0;for(let le=0,be=C*c+D;le<fe.BLOCK_SIZE;le++,be+=c){for(let we=0;we<fe.BLOCK_SIZE;we++){const xe=t[be+we]&255;k+=xe,xe<F&&(F=xe),xe>V&&(V=xe)}if(V-F>fe.MIN_DYNAMIC_RANGE)for(le++,be+=c;le<fe.BLOCK_SIZE;le++,be+=c)for(let we=0;we<fe.BLOCK_SIZE;we++)k+=t[be+we]&255}let X=k>>fe.BLOCK_SIZE_POWER*2;if(V-F<=fe.MIN_DYNAMIC_RANGE&&(X=F/2,A>0&&R>0)){const le=(y[A-1][R]+2*y[A][R-1]+y[A-1][R-1])/4;F<le&&(X=le)}y[A][R]=X}}return y}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class Ce{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,a,c){throw new At("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new At("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new At("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new De;for(let a=0;a<this.height;a++){const c=this.getRow(a,t);for(let u=0;u<this.width;u++){const d=c[u]&255;let m;d<64?m="#":d<128?m="+":d<192?m=".":m=" ",i.append(m)}i.append(`
`)}return i.toString()}}class Re extends Ce{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const a=this.delegate.getRow(t,i),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(i);for(let c=0;c<i;c++)a[c]=255-(t[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,a,c){return new Re(this.delegate.crop(t,i,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Re(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Re(this.delegate.rotateCounterClockwise45())}}class Ee extends Ce{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=Ee.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return Ee.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,a){const c=new Uint8ClampedArray(i*a);for(let u=0,d=0,m=t.length;u<m;u+=4,d++){let y;if(t[u+3]===0)y=255;else{const C=t[u],R=t[u+1],D=t[u+2];y=306*C+601*R+117*D+512>>10}c[d]=y}return c}getRow(t,i){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const a=this.getWidth(),c=t*a;return i===null?i=this.buffer.slice(c,c+a):(i.length<a&&(i=new Uint8ClampedArray(a)),i.set(this.buffer.slice(c,c+a))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,a,c){return super.crop(t,i,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),a=i.getContext("2d"),c=t*Ee.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),y=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return i.width=m,i.height=y,a.translate(m/2,y/2),a.rotate(c),a.drawImage(this.canvas,u/-2,d/-2),this.buffer=Ee.makeBufferFromCanvasImageData(i),this}invert(){return new Re(this)}}Ee.DEGREE_TO_RADIANS=Math.PI/180;class H{constructor(t,i,a){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ne=(globalThis||Dc||self||window||void 0)&&(globalThis||Dc||self||window||void 0).__awaiter||function(I,t,i,a){function c(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function m(C){try{A(a.next(C))}catch(R){d(R)}}function y(C){try{A(a.throw(C))}catch(R){d(R)}}function A(C){C.done?u(C.value):c(C.value).then(m,y)}A((a=a.apply(I,t||[])).next())})};class Se{constructor(t,i=500,a){this.reader=t,this.timeBetweenScansMillis=i,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return ne(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const a of t){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,d=a.label||`Video device ${i.length+1}`,m=a.groupId,y={deviceId:u,label:d,kind:c,groupId:m};i.push(y)}return i})}getVideoInputDevices(){return ne(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new H(i.deviceId,i.label))})}findDeviceById(t){return ne(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return ne(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return ne(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,i)})}decodeOnceFromConstraints(t,i){return ne(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,i)})}decodeOnceFromStream(t,i){return ne(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,i,a){return ne(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,a)})}decodeFromVideoDevice(t,i,a){return ne(this,void 0,void 0,function*(){let c;t?c={deviceId:{exact:t}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,i,a)})}decodeFromConstraints(t,i,a){return ne(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(c,i,a)})}decodeFromStream(t,i,a){return ne(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return ne(this,void 0,void 0,function*(){const a=this.prepareVideoElement(i);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((i,a)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return ne(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const a=document.getElementById(t);if(!a)throw new N(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==i.toLowerCase())throw new N(`element with id '${t}' must be an ${i} element`);return a}decodeFromImage(t,i){if(!t&&!i)throw new N("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new N("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,a){if(t===void 0&&i===void 0)throw new N("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new N("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let a;return this.isImageLoaded(i)?a=this.decodeOnce(i,!1,!0):a=this._decodeOnLoadImage(i),a}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,i)}_decodeFromVideoElementSetup(t){if(!t)throw new N("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const a=this._decodeOnLoadImage(i);return i.src=t,a}decodeFromVideoUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElement(i);return i.src=t,a}decodeFromVideoUrlContinuously(t,i){if(!t)throw new N("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,i);return a.src=t,c}_decodeOnLoadImage(t){return new Promise((i,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return ne(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return ne(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(t);u(m)}catch(m){const y=i&&m instanceof ae,C=(m instanceof j||m instanceof W)&&a;if(y||C)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(m)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(t);i(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){i(null,c);const u=c instanceof j||c instanceof W,d=c instanceof ae;(u||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,a){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,a=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),a=new Ee(i),c=new fe(a);return new B(c)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let a,c;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,c=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,c=t.naturalHeight||t.height)),i.style.width=a+"px",i.style.height=c+"px",i.width=a,i.height=c,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Te{constructor(t,i,a=i==null?0:8*i.length,c,u,d=z.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=t,this.rawBytes=i,a==null?this.numBits=i==null?0:8*i.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=z.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(i.length+t.length);z.arraycopy(i,0,a,0,i.length),z.arraycopy(t,0,a,i.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ye;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var ye=Ye,Je;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Je||(Je={}));var $e=Je;class st{constructor(t,i,a,c,u=-1,d=-1){this.rawBytes=t,this.text=i,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Vn{exp(t){return this.expTable[t]}log(t){if(t===0)throw new O;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class en{constructor(t,i){if(i.length===0)throw new O;this.field=t;const a=i.length;if(a>1&&i[0]===0){let c=1;for(;c<a&&i[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),z.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let a;if(t===1){a=0;for(let d=0,m=i.length;d!==m;d++){const y=i[d];a=Vn.addOrSubtract(a,y)}return a}a=i[0];const c=i.length,u=this.field;for(let d=1;d<c;d++)a=Vn.addOrSubtract(u.multiply(t,a),i[d]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){const d=i;i=a,a=d}let c=new Int32Array(a.length);const u=a.length-i.length;z.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=Vn.addOrSubtract(i[d-u],a[d]);return new en(this.field,c)}multiply(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,a=i.length,c=t.coefficients,u=c.length,d=new Int32Array(a+u-1),m=this.field;for(let y=0;y<a;y++){const A=i[y];for(let C=0;C<u;C++)d[y+C]=Vn.addOrSubtract(d[y+C],m.multiply(A,c[C]))}return new en(m,d)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,a=this.field,c=new Int32Array(i),u=this.coefficients;for(let d=0;d<i;d++)c[d]=a.multiply(u[d],t);return new en(a,c)}multiplyByMonomial(t,i){if(t<0)throw new O;if(i===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+t),d=this.field;for(let m=0;m<c;m++)u[m]=d.multiply(a[m],i);return new en(d,u)}divide(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new O("Divide by 0");const i=this.field;let a=i.getZero(),c=this;const u=t.getCoefficient(t.getDegree()),d=i.inverse(u);for(;c.getDegree()>=t.getDegree()&&!c.isZero();){const m=c.getDegree()-t.getDegree(),y=i.multiply(c.getCoefficient(c.getDegree()),d),A=t.multiplyByMonomial(m,y),C=i.buildMonomial(m,y);a=a.addOrSubtract(C),c=c.addOrSubtract(A)}return[a,c]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),i===0||a!==1){const c=this.field.log(a);c===0?t+="1":c===1?t+="a":(t+="a^",t+=c)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class Kn extends v{}Kn.kind="ArithmeticException";class lt extends Vn{constructor(t,i,a){super(),this.primitive=t,this.size=i,this.generatorBase=a;const c=new Int32Array(i);let u=1;for(let m=0;m<i;m++)c[m]=u,u*=2,u>=i&&(u^=t,u&=i-1);this.expTable=c;const d=new Int32Array(i);for(let m=0;m<i-1;m++)d[c[m]]=m;this.logTable=d,this.zero=new en(this,Int32Array.from([0])),this.one=new en(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new O;if(i===0)return this.zero;const a=new Int32Array(t+1);return a[0]=i,new en(this,a)}inverse(t){if(t===0)throw new Kn;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Q.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}lt.AZTEC_DATA_12=new lt(4201,4096,1),lt.AZTEC_DATA_10=new lt(1033,1024,1),lt.AZTEC_DATA_6=new lt(67,64,1),lt.AZTEC_PARAM=new lt(19,16,1),lt.QR_CODE_FIELD_256=new lt(285,256,0),lt.DATA_MATRIX_FIELD_256=new lt(301,256,1),lt.AZTEC_DATA_8=lt.DATA_MATRIX_FIELD_256,lt.MAXICODE_FIELD_64=lt.AZTEC_DATA_6;class In extends v{}In.kind="ReedSolomonException";class Fn extends v{}Fn.kind="IllegalStateException";class hr{constructor(t){this.field=t}decode(t,i){const a=this.field,c=new en(a,t),u=new Int32Array(i);let d=!0;for(let k=0;k<i;k++){const F=c.evaluateAt(a.exp(k+a.getGeneratorBase()));u[u.length-1-k]=F,F!==0&&(d=!1)}if(d)return;const m=new en(a,u),y=this.runEuclideanAlgorithm(a.buildMonomial(i,1),m,i),A=y[0],C=y[1],R=this.findErrorLocations(A),D=this.findErrorMagnitudes(C,R);for(let k=0;k<R.length;k++){const F=t.length-1-a.log(R[k]);if(F<0)throw new In("Bad error location");t[F]=lt.addOrSubtract(t[F],D[k])}}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){const k=t;t=i,i=k}const c=this.field;let u=t,d=i,m=c.getZero(),y=c.getOne();for(;d.getDegree()>=(a/2|0);){let k=u,F=m;if(u=d,m=y,u.isZero())throw new In("r_{i-1} was zero");d=k;let V=c.getZero();const X=u.getCoefficient(u.getDegree()),le=c.inverse(X);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const be=d.getDegree()-u.getDegree(),we=c.multiply(d.getCoefficient(d.getDegree()),le);V=V.addOrSubtract(c.buildMonomial(be,we)),d=d.addOrSubtract(u.multiplyByMonomial(be,we))}if(y=V.multiply(m).addOrSubtract(F),d.getDegree()>=u.getDegree())throw new Fn("Division algorithm failed to reduce polynomial?")}const A=y.getCoefficient(0);if(A===0)throw new In("sigmaTilde(0) was zero");const C=c.inverse(A),R=y.multiplyScalar(C),D=d.multiplyScalar(C);return[R,D]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(i);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<i;d++)t.evaluateAt(d)===0&&(a[c]=u.inverse(d),c++);if(c!==i)throw new In("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,i){const a=i.length,c=new Int32Array(a),u=this.field;for(let d=0;d<a;d++){const m=u.inverse(i[d]);let y=1;for(let A=0;A<a;A++)if(d!==A){const C=u.multiply(i[A],m),R=(C&1)===0?C|1:C&-2;y=u.multiply(y,R)}c[d]=u.multiply(t.evaluateAt(m),u.inverse(y)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],m))}return c}}var bn;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(bn||(bn={}));class It{decode(t){this.ddata=t;let i=t.getBits(),a=this.extractBits(i),c=this.correctBits(a),u=It.convertBoolArrayToByteArray(c),d=It.getEncodedData(c),m=new st(u,d,null,null);return m.setNumBits(c.length),m}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,a=bn.UPPER,c=bn.UPPER,u="",d=0;for(;d<i;)if(c===bn.BINARY){if(i-d<5)break;let m=It.readCode(t,d,5);if(d+=5,m===0){if(i-d<11)break;m=It.readCode(t,d,11)+31,d+=11}for(let y=0;y<m;y++){if(i-d<8){d=i;break}const A=It.readCode(t,d,8);u+=_e.castAsNonUtf8Char(A),d+=8}c=a}else{let m=c===bn.DIGIT?4:5;if(i-d<m)break;let y=It.readCode(t,d,m);d+=m;let A=It.getCharacter(c,y);A.startsWith("CTRL_")?(a=c,c=It.getTable(A.charAt(5)),A.charAt(6)==="L"&&(a=c)):(u+=A,c=a)}return u}static getTable(t){switch(t){case"L":return bn.LOWER;case"P":return bn.PUNCT;case"M":return bn.MIXED;case"D":return bn.DIGIT;case"B":return bn.BINARY;default:return bn.UPPER}}static getCharacter(t,i){switch(t){case bn.UPPER:return It.UPPER_TABLE[i];case bn.LOWER:return It.LOWER_TABLE[i];case bn.MIXED:return It.MIXED_TABLE[i];case bn.PUNCT:return It.PUNCT_TABLE[i];case bn.DIGIT:return It.DIGIT_TABLE[i];default:throw new Fn("Bad table")}}correctBits(t){let i,a;this.ddata.getNbLayers()<=2?(a=6,i=lt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,i=lt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,i=lt.AZTEC_DATA_10):(a=12,i=lt.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=t.length/a;if(u<c)throw new W;let d=t.length%a,m=new Int32Array(u);for(let D=0;D<u;D++,d+=a)m[D]=It.readCode(t,d,a);try{new hr(i).decode(m,u-c)}catch(D){throw new W(D)}let y=(1<<a)-1,A=0;for(let D=0;D<c;D++){let k=m[D];if(k===0||k===y)throw new W;(k===1||k===y-1)&&A++}let C=new Array(c*a-A),R=0;for(let D=0;D<c;D++){let k=m[D];if(k===1||k===y-1)C.fill(k>1,R,R+a-1),R+=a-1;else for(let F=a-1;F>=0;--F)C[R++]=(k&1<<F)!==0}return C}extractBits(t){let i=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(i?11:14)+a*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,i));if(i)for(let m=0;m<u.length;m++)u[m]=m;else{let m=c+1+2*Q.truncDivision(Q.truncDivision(c,2)-1,15),y=c/2,A=Q.truncDivision(m,2);for(let C=0;C<y;C++){let R=C+Q.truncDivision(C,15);u[y-C-1]=A-R-1,u[y+C]=A+R+1}}for(let m=0,y=0;m<a;m++){let A=(a-m)*4+(i?9:12),C=m*2,R=c-1-C;for(let D=0;D<A;D++){let k=D*2;for(let F=0;F<2;F++)d[y+k+F]=t.get(u[C+F],u[C+D]),d[y+2*A+k+F]=t.get(u[C+D],u[R-F]),d[y+4*A+k+F]=t.get(u[R-F],u[R-D]),d[y+6*A+k+F]=t.get(u[R-D],u[C+F])}y+=A*8}return d}static readCode(t,i,a){let c=0;for(let u=i;u<i+a;u++)c<<=1,t[u]&&(c|=1);return c}static readByte(t,i){let a=t.length-i;return a>=8?It.readCode(t,i,8):It.readCode(t,i,a)<<8-a}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let a=0;a<i.length;a++)i[a]=It.readByte(t,8*a);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}It.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],It.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],It.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],It.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],It.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ot{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,a,c){const u=t-a,d=i-c;return Math.sqrt(u*u+d*d)}static sum(t){let i=0;for(let a=0,c=t.length;a!==c;a++){const u=t[a];i+=u}return i}}class jr{static floatToIntBits(t){return t}}jr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Me{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Me){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*jr.floatToIntBits(this.x)+jr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),c=this.distance(t[0],t[2]);let u,d,m;if(a>=i&&a>=c?(d=t[0],u=t[1],m=t[2]):c>=a&&c>=i?(d=t[1],u=t[0],m=t[2]):(d=t[2],u=t[0],m=t[1]),this.crossProductZ(u,d,m)<0){const y=u;u=m,m=y}t[0]=u,t[1]=d,t[2]=m}static distance(t,i){return ot.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,a){const c=i.x,u=i.y;return(a.x-c)*(t.y-u)-(a.y-u)*(t.x-c)}}class ns{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class go extends ns{constructor(t,i,a,c,u){super(t,i),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Jt{constructor(t,i,a,c){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Jt.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),c==null&&(c=t.getHeight()/2|0);const u=i/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let t=this.leftInit,i=this.rightInit,a=this.upInit,c=this.downInit,u=!1,d=!0,m=!1,y=!1,A=!1,C=!1,R=!1;const D=this.width,k=this.height;for(;d;){d=!1;let F=!0;for(;(F||!y)&&i<D;)F=this.containsBlackPoint(a,c,i,!1),F?(i++,d=!0,y=!0):y||i++;if(i>=D){u=!0;break}let V=!0;for(;(V||!A)&&c<k;)V=this.containsBlackPoint(t,i,c,!0),V?(c++,d=!0,A=!0):A||c++;if(c>=k){u=!0;break}let X=!0;for(;(X||!C)&&t>=0;)X=this.containsBlackPoint(a,c,t,!1),X?(t--,d=!0,C=!0):C||t--;if(t<0){u=!0;break}let le=!0;for(;(le||!R)&&a>=0;)le=this.containsBlackPoint(t,i,a,!0),le?(a--,d=!0,R=!0):R||a--;if(a<0){u=!0;break}d&&(m=!0)}if(!u&&m){const F=i-t;let V=null;for(let we=1;V===null&&we<F;we++)V=this.getBlackPointOnSegment(t,c-we,t+we,c);if(V==null)throw new ae;let X=null;for(let we=1;X===null&&we<F;we++)X=this.getBlackPointOnSegment(t,a+we,t+we,a);if(X==null)throw new ae;let le=null;for(let we=1;le===null&&we<F;we++)le=this.getBlackPointOnSegment(i,a+we,i-we,a);if(le==null)throw new ae;let be=null;for(let we=1;be===null&&we<F;we++)be=this.getBlackPointOnSegment(i,c-we,i-we,c);if(be==null)throw new ae;return this.centerEdges(be,V,le,X)}else throw new ae}getBlackPointOnSegment(t,i,a,c){const u=ot.round(ot.distance(t,i,a,c)),d=(a-t)/u,m=(c-i)/u,y=this.image;for(let A=0;A<u;A++){const C=ot.round(t+A*d),R=ot.round(i+A*m);if(y.get(C,R))return new Me(C,R)}return null}centerEdges(t,i,a,c){const u=t.getX(),d=t.getY(),m=i.getX(),y=i.getY(),A=a.getX(),C=a.getY(),R=c.getX(),D=c.getY(),k=Jt.CORR;return u<this.width/2?[new Me(R-k,D+k),new Me(m+k,y+k),new Me(A-k,C-k),new Me(u+k,d-k)]:[new Me(R+k,D+k),new Me(m+k,y-k),new Me(A-k,C+k),new Me(u-k,d-k)]}containsBlackPoint(t,i,a,c){const u=this.image;if(c){for(let d=t;d<=i;d++)if(u.get(d,a))return!0}else for(let d=t;d<=i;d++)if(u.get(a,d))return!0;return!1}}Jt.INIT_SIZE=10,Jt.CORR=1;class tl{static checkAndNudgePoints(t,i){const a=t.getWidth(),c=t.getHeight();let u=!0;for(let d=0;d<i.length&&u;d+=2){const m=Math.floor(i[d]),y=Math.floor(i[d+1]);if(m<-1||m>a||y<-1||y>c)throw new ae;u=!1,m===-1?(i[d]=0,u=!0):m===a&&(i[d]=a-1,u=!0),y===-1?(i[d+1]=0,u=!0):y===c&&(i[d+1]=c-1,u=!0)}u=!0;for(let d=i.length-2;d>=0&&u;d-=2){const m=Math.floor(i[d]),y=Math.floor(i[d+1]);if(m<-1||m>a||y<-1||y>c)throw new ae;u=!1,m===-1?(i[d]=0,u=!0):m===a&&(i[d]=a-1,u=!0),y===-1?(i[d+1]=0,u=!0):y===c&&(i[d+1]=c-1,u=!0)}}}class Jn{constructor(t,i,a,c,u,d,m,y,A){this.a11=t,this.a21=i,this.a31=a,this.a12=c,this.a22=u,this.a32=d,this.a13=m,this.a23=y,this.a33=A}static quadrilateralToQuadrilateral(t,i,a,c,u,d,m,y,A,C,R,D,k,F,V,X){const le=Jn.quadrilateralToSquare(t,i,a,c,u,d,m,y);return Jn.squareToQuadrilateral(A,C,R,D,k,F,V,X).times(le)}transformPoints(t){const i=t.length,a=this.a11,c=this.a12,u=this.a13,d=this.a21,m=this.a22,y=this.a23,A=this.a31,C=this.a32,R=this.a33;for(let D=0;D<i;D+=2){const k=t[D],F=t[D+1],V=u*k+y*F+R;t[D]=(a*k+d*F+A)/V,t[D+1]=(c*k+m*F+C)/V}}transformPointsWithValues(t,i){const a=this.a11,c=this.a12,u=this.a13,d=this.a21,m=this.a22,y=this.a23,A=this.a31,C=this.a32,R=this.a33,D=t.length;for(let k=0;k<D;k++){const F=t[k],V=i[k],X=u*F+y*V+R;t[k]=(a*F+d*V+A)/X,i[k]=(c*F+m*V+C)/X}}static squareToQuadrilateral(t,i,a,c,u,d,m,y){const A=t-a+u-m,C=i-c+d-y;if(A===0&&C===0)return new Jn(a-t,u-a,t,c-i,d-c,i,0,0,1);{const R=a-u,D=m-u,k=c-d,F=y-d,V=R*F-D*k,X=(A*F-D*C)/V,le=(R*C-A*k)/V;return new Jn(a-t+X*a,m-t+le*m,t,c-i+X*c,y-i+le*y,i,X,le,1)}}static quadrilateralToSquare(t,i,a,c,u,d,m,y){return Jn.squareToQuadrilateral(t,i,a,c,u,d,m,y).buildAdjoint()}buildAdjoint(){return new Jn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Jn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class nl extends tl{sampleGrid(t,i,a,c,u,d,m,y,A,C,R,D,k,F,V,X,le,be,we){const xe=Jn.quadrilateralToQuadrilateral(c,u,d,m,y,A,C,R,D,k,F,V,X,le,be,we);return this.sampleGridWithTransform(t,i,a,xe)}sampleGridWithTransform(t,i,a,c){if(i<=0||a<=0)throw new ae;const u=new He(i,a),d=new Float32Array(2*i);for(let m=0;m<a;m++){const y=d.length,A=m+.5;for(let C=0;C<y;C+=2)d[C]=C/2+.5,d[C+1]=A;c.transformPoints(d),tl.checkAndNudgePoints(t,d);try{for(let C=0;C<y;C+=2)t.get(Math.floor(d[C]),Math.floor(d[C+1]))&&u.set(C/2,m)}catch{throw new ae}}return u}}class oi{static setGridSampler(t){oi.gridSampler=t}static getInstance(){return oi.gridSampler}}oi.gridSampler=new nl;class Rn{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class il{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),a=this.getBullsEyeCorners(i);if(t){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new go(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ae;let i=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(a,i);let c=0;for(let d=0;d<4;d++){let m=a[(this.shift+d)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,i){let a=0;t.forEach((c,u,d)=>{let m=(c>>i-2<<1)+(c&1);a=(a<<3)+m}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(Q.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new ae}getCorrectedParameterData(t,i){let a,c;i?(a=7,c=2):(a=10,c=4);let u=a-c,d=new Int32Array(a);for(let y=a-1;y>=0;--y)d[y]=t&15,t>>=4;try{new hr(lt.AZTEC_PARAM).decode(d,u)}catch{throw new ae}let m=0;for(let y=0;y<c;y++)m=(m<<4)+d[y];return m}getBullsEyeCorners(t){let i=t,a=t,c=t,u=t,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let R=this.getFirstDifferent(i,d,1,-1),D=this.getFirstDifferent(a,d,1,1),k=this.getFirstDifferent(c,d,-1,1),F=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(F,R)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(R,D,k,F))break}i=R,a=D,c=k,u=F,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let m=new Me(i.getX()+.5,i.getY()-.5),y=new Me(a.getX()+.5,a.getY()+.5),A=new Me(c.getX()-.5,c.getY()+.5),C=new Me(u.getX()-.5,u.getY()-.5);return this.expandSquare([m,y,A,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,a,c;try{let m=new Jt(this.image).detect();t=m[0],i=m[1],a=m[2],c=m[3]}catch{let y=this.image.getWidth()/2,A=this.image.getHeight()/2;t=this.getFirstDifferent(new Rn(y+7,A-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Rn(y+7,A+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Rn(y-7,A+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Rn(y-7,A-7),!1,-1,-1).toResultPoint()}let u=ot.round((t.getX()+c.getX()+i.getX()+a.getX())/4),d=ot.round((t.getY()+c.getY()+i.getY()+a.getY())/4);try{let m=new Jt(this.image,15,u,d).detect();t=m[0],i=m[1],a=m[2],c=m[3]}catch{t=this.getFirstDifferent(new Rn(u+7,d-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Rn(u+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Rn(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Rn(u-7,d-7),!1,-1,-1).toResultPoint()}return u=ot.round((t.getX()+c.getX()+i.getX()+a.getX())/4),d=ot.round((t.getY()+c.getY()+i.getY()+a.getY())/4),new Rn(u,d)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,a,c,u){let d=oi.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,A=m/2+this.nbCenterLayers;return d.sampleGrid(t,m,m,y,y,A,y,A,A,y,A,i.getX(),i.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(t,i,a){let c=0,u=this.distanceResultPoint(t,i),d=u/a,m=t.getX(),y=t.getY(),A=d*(i.getX()-t.getX())/u,C=d*(i.getY()-t.getY())/u;for(let R=0;R<a;R++)this.image.get(ot.round(m+R*A),ot.round(y+R*C))&&(c|=1<<a-R-1);return c}isWhiteOrBlackRectangle(t,i,a,c){let u=3;t=new Rn(t.getX()-u,t.getY()+u),i=new Rn(i.getX()-u,i.getY()-u),a=new Rn(a.getX()+u,a.getY()-u),c=new Rn(c.getX()+u,c.getY()+u);let d=this.getColor(c,t);if(d===0)return!1;let m=this.getColor(t,i);return m!==d||(m=this.getColor(i,a),m!==d)?!1:(m=this.getColor(a,c),m===d)}getColor(t,i){let a=this.distancePoint(t,i),c=(i.getX()-t.getX())/a,u=(i.getY()-t.getY())/a,d=0,m=t.getX(),y=t.getY(),A=this.image.get(t.getX(),t.getY()),C=Math.ceil(a);for(let D=0;D<C;D++)m+=c,y+=u,this.image.get(ot.round(m),ot.round(y))!==A&&d++;let R=d/a;return R>.1&&R<.9?0:R<=.1===A?1:-1}getFirstDifferent(t,i,a,c){let u=t.getX()+a,d=t.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===i;)u+=a,d+=c;for(u-=a,d-=c;this.isValid(u,d)&&this.image.get(u,d)===i;)u+=a;for(u-=a;this.isValid(u,d)&&this.image.get(u,d)===i;)d+=c;return d-=c,new Rn(u,d)}expandSquare(t,i,a){let c=a/(2*i),u=t[0].getX()-t[2].getX(),d=t[0].getY()-t[2].getY(),m=(t[0].getX()+t[2].getX())/2,y=(t[0].getY()+t[2].getY())/2,A=new Me(m+c*u,y+c*d),C=new Me(m-c*u,y-c*d);u=t[1].getX()-t[3].getX(),d=t[1].getY()-t[3].getY(),m=(t[1].getX()+t[3].getX())/2,y=(t[1].getY()+t[3].getY())/2;let R=new Me(m+c*u,y+c*d),D=new Me(m-c*u,y-c*d);return[A,R,C,D]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=ot.round(t.getX()),a=ot.round(t.getY());return this.isValid(i,a)}distancePoint(t,i){return ot.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return ot.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Q.truncDivision(this.nbLayers-4,8)+1)+15}}class is{decode(t,i=null){let a=null,c=new il(t.getBlackMatrix()),u=null,d=null;try{let C=c.detectMirror(!1);u=C.getPoints(),this.reportFoundResultPoints(i,u),d=new It().decode(C)}catch(C){a=C}if(d==null)try{let C=c.detectMirror(!0);u=C.getPoints(),this.reportFoundResultPoints(i,u),d=new It().decode(C)}catch(C){throw a??C}let m=new Te(d.getText(),d.getRawBytes(),d.getNumBits(),u,ye.AZTEC,z.currentTimeMillis()),y=d.getByteSegments();y!=null&&m.putMetadata($e.BYTE_SEGMENTS,y);let A=d.getECLevel();return A!=null&&m.putMetadata($e.ERROR_CORRECTION_LEVEL,A),m}reportFoundResultPoints(t,i){if(t!=null){let a=t.get(ve.NEED_RESULT_POINT_CALLBACK);a!=null&&i.forEach((c,u,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Qc extends Se{constructor(t=500){super(new is,t)}}class Vt{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(ve.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),d=this.doDecode(u,i),m=d.getResultMetadata();let y=270;m!==null&&m.get($e.ORIENTATION)===!0&&(y=y+m.get($e.ORIENTATION)%360),d.putMetadata($e.ORIENTATION,y);const A=d.getResultPoints();if(A!==null){const C=u.getHeight();for(let R=0;R<A.length;R++)A[R]=new Me(C-A[R].getY()-1,A[R].getX())}return d}else throw new ae}}reset(){}doDecode(t,i){const a=t.getWidth(),c=t.getHeight();let u=new ue(a);const d=i&&i.get(ve.TRY_HARDER)===!0,m=Math.max(1,c>>(d?8:5));let y;d?y=c:y=15;const A=Math.trunc(c/2);for(let C=0;C<y;C++){const R=Math.trunc((C+1)/2),D=(C&1)===0,k=A+m*(D?R:-R);if(k<0||k>=c)break;try{u=t.getBlackRow(k,u)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(u.reverse(),i&&i.get(ve.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;i.forEach((X,le)=>V.set(le,X)),V.delete(ve.NEED_RESULT_POINT_CALLBACK),i=V}try{const V=this.decodeRow(k,u,i);if(F===1){V.putMetadata($e.ORIENTATION,180);const X=V.getResultPoints();X!==null&&(X[0]=new Me(a-X[0].getX()-1,X[0].getY()),X[1]=new Me(a-X[1].getX()-1,X[1].getY()))}return V}catch{}}}throw new ae}static recordPattern(t,i,a){const c=a.length;for(let A=0;A<c;A++)a[A]=0;const u=t.getSize();if(i>=u)throw new ae;let d=!t.get(i),m=0,y=i;for(;y<u;){if(t.get(y)!==d)a[m]++;else{if(++m===c)break;a[m]=1,d=!d}y++}if(!(m===c||m===c-1&&y===u))throw new ae}static recordPatternInReverse(t,i,a){let c=a.length,u=t.get(i);for(;i>0&&c>=0;)t.get(--i)!==u&&(c--,u=!u);if(c>=0)throw new ae;Vt.recordPattern(t,i+1,a)}static patternMatchVariance(t,i,a){const c=t.length;let u=0,d=0;for(let A=0;A<c;A++)u+=t[A],d+=i[A];if(u<d)return Number.POSITIVE_INFINITY;const m=u/d;a*=m;let y=0;for(let A=0;A<c;A++){const C=t[A],R=i[A]*m,D=C>R?C-R:R-C;if(D>a)return Number.POSITIVE_INFINITY;y+=D}return y/u}}class Ae extends Vt{static findStartPattern(t){const i=t.getSize(),a=t.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=a,m=!1;const y=6;for(let A=a;A<i;A++)if(t.get(A)!==m)u[c]++;else{if(c===y-1){let C=Ae.MAX_AVG_VARIANCE,R=-1;for(let D=Ae.CODE_START_A;D<=Ae.CODE_START_C;D++){const k=Vt.patternMatchVariance(u,Ae.CODE_PATTERNS[D],Ae.MAX_INDIVIDUAL_VARIANCE);k<C&&(C=k,R=D)}if(R>=0&&t.isRange(Math.max(0,d-(A-d)/2),d,!1))return Int32Array.from([d,A,R]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,m=!m}throw new ae}static decodeCode(t,i,a){Vt.recordPattern(t,a,i);let c=Ae.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<Ae.CODE_PATTERNS.length;d++){const m=Ae.CODE_PATTERNS[d],y=this.patternMatchVariance(i,m,Ae.MAX_INDIVIDUAL_VARIANCE);y<c&&(c=y,u=d)}if(u>=0)return u;throw new ae}decodeRow(t,i,a){const c=a&&a.get(ve.ASSUME_GS1)===!0,u=Ae.findStartPattern(i),d=u[2];let m=0;const y=new Uint8Array(20);y[m++]=d;let A;switch(d){case Ae.CODE_START_A:A=Ae.CODE_CODE_A;break;case Ae.CODE_START_B:A=Ae.CODE_CODE_B;break;case Ae.CODE_START_C:A=Ae.CODE_CODE_C;break;default:throw new W}let C=!1,R=!1,D="",k=u[0],F=u[1];const V=Int32Array.from([0,0,0,0,0,0]);let X=0,le=0,be=d,we=0,xe=!0,rt=!1,Qe=!1;for(;!C;){const yr=R;switch(R=!1,X=le,le=Ae.decodeCode(i,V,F),y[m++]=le,le!==Ae.CODE_STOP&&(xe=!0),le!==Ae.CODE_STOP&&(we++,be+=we*le),k=F,F+=V.reduce((Oo,ml)=>Oo+ml,0),le){case Ae.CODE_START_A:case Ae.CODE_START_B:case Ae.CODE_START_C:throw new W}switch(A){case Ae.CODE_CODE_A:if(le<64)Qe===rt?D+=String.fromCharCode(32+le):D+=String.fromCharCode(32+le+128),Qe=!1;else if(le<96)Qe===rt?D+=String.fromCharCode(le-64):D+=String.fromCharCode(le+64),Qe=!1;else switch(le!==Ae.CODE_STOP&&(xe=!1),le){case Ae.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_A:!rt&&Qe?(rt=!0,Qe=!1):rt&&Qe?(rt=!1,Qe=!1):Qe=!0;break;case Ae.CODE_SHIFT:R=!0,A=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_B:A=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_C:A=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:C=!0;break}break;case Ae.CODE_CODE_B:if(le<96)Qe===rt?D+=String.fromCharCode(32+le):D+=String.fromCharCode(32+le+128),Qe=!1;else switch(le!==Ae.CODE_STOP&&(xe=!1),le){case Ae.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_B:!rt&&Qe?(rt=!0,Qe=!1):rt&&Qe?(rt=!1,Qe=!1):Qe=!0;break;case Ae.CODE_SHIFT:R=!0,A=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_A:A=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_C:A=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:C=!0;break}break;case Ae.CODE_CODE_C:if(le<100)le<10&&(D+="0"),D+=le;else switch(le!==Ae.CODE_STOP&&(xe=!1),le){case Ae.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case Ae.CODE_CODE_A:A=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_B:A=Ae.CODE_CODE_B;break;case Ae.CODE_STOP:C=!0;break}break}yr&&(A=A===Ae.CODE_CODE_A?Ae.CODE_CODE_B:Ae.CODE_CODE_A)}const rn=F-k;if(F=i.getNextUnset(F),!i.isRange(F,Math.min(i.getSize(),F+(F-k)/2),!1))throw new ae;if(be-=we*X,be%103!==X)throw new j;const ni=D.length;if(ni===0)throw new ae;ni>0&&xe&&(A===Ae.CODE_CODE_C?D=D.substring(0,ni-2):D=D.substring(0,ni-1));const Mn=(u[1]+u[0])/2,Ot=k+rn/2,_n=y.length,Zn=new Uint8Array(_n);for(let yr=0;yr<_n;yr++)Zn[yr]=y[yr];const Kr=[new Me(Mn,t),new Me(Ot,t)];return new Te(D,Zn,0,Kr,ye.CODE_128,new Date().getTime())}}Ae.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ae.MAX_AVG_VARIANCE=.25,Ae.MAX_INDIVIDUAL_VARIANCE=.7,Ae.CODE_SHIFT=98,Ae.CODE_CODE_C=99,Ae.CODE_CODE_B=100,Ae.CODE_CODE_A=101,Ae.CODE_FNC_1=102,Ae.CODE_FNC_2=97,Ae.CODE_FNC_3=96,Ae.CODE_FNC_4_A=101,Ae.CODE_FNC_4_B=100,Ae.CODE_START_A=103,Ae.CODE_START_B=104,Ae.CODE_START_C=105,Ae.CODE_STOP=106;class Lt extends Vt{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Lt.findAsteriskPattern(i,c),d=i.getNextSet(u[1]),m=i.getSize(),y,A;do{Lt.recordPattern(i,d,c);let V=Lt.toNarrowWidePattern(c);if(V<0)throw new ae;y=Lt.patternToChar(V),this.decodeRowResult+=y,A=d;for(let X of c)d+=X;d=i.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let V of c)C+=V;let R=d-A-C;if(d!==m&&R*2<C)throw new ae;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,X=0;for(let le=0;le<V;le++)X+=Lt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(le));if(this.decodeRowResult.charAt(V)!==Lt.ALPHABET_STRING.charAt(X%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new ae;let D;this.extendedMode?D=Lt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let k=(u[1]+u[0])/2,F=A+C/2;return new Te(D,null,0,[new Me(k,t),new Me(F,t)],ye.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let a=t.getSize(),c=t.getNextSet(0),u=0,d=c,m=!1,y=i.length;for(let A=c;A<a;A++)if(t.get(A)!==m)i[u]++;else{if(u===y-1){if(this.toNarrowWidePattern(i)===Lt.ASTERISK_ENCODING&&t.isRange(Math.max(0,d-Math.floor((A-d)/2)),d,!1))return[d,A];d+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,m=!m}throw new ae}static toNarrowWidePattern(t){let i=t.length,a=0,c;do{let u=2147483647;for(let y of t)y<u&&y>a&&(u=y);a=u,c=0;let d=0,m=0;for(let y=0;y<i;y++){let A=t[y];A>a&&(m|=1<<i-1-y,c++,d+=A)}if(c===3){for(let y=0;y<i&&c>0;y++){let A=t[y];if(A>a&&(c--,A*2>=d))return-1}return m}}while(c>3);return-1}static patternToChar(t){for(let i=0;i<Lt.CHARACTER_ENCODINGS.length;i++)if(Lt.CHARACTER_ENCODINGS[i]===t)return Lt.ALPHABET_STRING.charAt(i);if(t===Lt.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(t){let i=t.length,a="";for(let c=0;c<i;c++){let u=t.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=t.charAt(c+1),m="\0";switch(u){case"+":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)+32);else throw new W;break;case"$":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)-64);else throw new W;break;case"%":if(d>="A"&&d<="E")m=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")m=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")m=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")m="\0";else if(d==="V")m="@";else if(d==="W")m="`";else if(d==="X"||d==="Y"||d==="Z")m="";else throw new W;break;case"/":if(d>="A"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")m=":";else throw new W;break}a+=m,c++}else a+=u}return a}}Lt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Lt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Lt.ASTERISK_ENCODING=148;class tt extends Vt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,a){let c=this.decodeStart(i),u=this.decodeEnd(i),d=new De;tt.decodeMiddle(i,c[1],u[0],d);let m=d.toString(),y=null;a!=null&&(y=a.get(ve.ALLOWED_LENGTHS)),y==null&&(y=tt.DEFAULT_ALLOWED_LENGTHS);let A=m.length,C=!1,R=0;for(let F of y){if(A===F){C=!0;break}F>R&&(R=F)}if(!C&&A>R&&(C=!0),!C)throw new W;const D=[new Me(c[1],t),new Me(u[0],t)];return new Te(m,null,0,D,ye.ITF,new Date().getTime())}static decodeMiddle(t,i,a,c){let u=new Int32Array(10),d=new Int32Array(5),m=new Int32Array(5);for(u.fill(0),d.fill(0),m.fill(0);i<a;){Vt.recordPattern(t,i,u);for(let A=0;A<5;A++){let C=2*A;d[A]=u[C],m[A]=u[C+1]}let y=tt.decodeDigit(d);c.append(y.toString()),y=this.decodeDigit(m),c.append(y.toString()),u.forEach(function(A){i+=A})}}decodeStart(t){let i=tt.skipWhiteSpace(t),a=tt.findGuardPattern(t,i,tt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,i){let a=this.narrowLineWidth*10;a=a<i?a:i;for(let c=i-1;a>0&&c>=0&&!t.get(c);c--)a--;if(a!==0)throw new ae}static skipWhiteSpace(t){const i=t.getSize(),a=t.getNextSet(0);if(a===i)throw new ae;return a}decodeEnd(t){t.reverse();try{let i=tt.skipWhiteSpace(t),a;try{a=tt.findGuardPattern(t,i,tt.END_PATTERN_REVERSED[0])}catch(u){u instanceof ae&&(a=tt.findGuardPattern(t,i,tt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let c=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-c,a}finally{t.reverse()}}static findGuardPattern(t,i,a){let c=a.length,u=new Int32Array(c),d=t.getSize(),m=!1,y=0,A=i;u.fill(0);for(let C=i;C<d;C++)if(t.get(C)!==m)u[y]++;else{if(y===c-1){if(Vt.patternMatchVariance(u,a,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return[A,C];A+=u[0]+u[1],z.arraycopy(u,2,u,0,y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,m=!m}throw new ae}static decodeDigit(t){let i=tt.MAX_AVG_VARIANCE,a=-1,c=tt.PATTERNS.length;for(let u=0;u<c;u++){let d=tt.PATTERNS[u],m=Vt.patternMatchVariance(t,d,tt.MAX_INDIVIDUAL_VARIANCE);m<i?(i=m,a=u):m===i&&(a=-1)}if(a>=0)return a%10;throw new ae}}tt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],tt.MAX_AVG_VARIANCE=.38,tt.MAX_INDIVIDUAL_VARIANCE=.5,tt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],tt.START_PATTERN=Int32Array.from([1,1,1,1]),tt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Zt extends Vt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),a=Zt.findGuardPattern(t,c,!1,this.START_END_PATTERN,u);let d=a[0];c=a[1];let m=d-(c-d);m>=0&&(i=t.isRange(m,d,!1))}return a}static checkChecksum(t){return Zt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return Zt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let c=i-1;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new W;a+=u}a*=3;for(let c=i-2;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new W;a+=u}return(1e3-a)%10}static decodeEnd(t,i){return Zt.findGuardPattern(t,i,!1,Zt.START_END_PATTERN,new Int32Array(Zt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,a,c){return this.findGuardPattern(t,i,a,c,new Int32Array(c.length))}static findGuardPattern(t,i,a,c,u){let d=t.getSize();i=a?t.getNextUnset(i):t.getNextSet(i);let m=0,y=i,A=c.length,C=a;for(let R=i;R<d;R++)if(t.get(R)!==C)u[m]++;else{if(m===A-1){if(Vt.patternMatchVariance(u,c,Zt.MAX_INDIVIDUAL_VARIANCE)<Zt.MAX_AVG_VARIANCE)return Int32Array.from([y,R]);y+=u[0]+u[1];let D=u.slice(2,u.length-1);for(let k=0;k<m-1;k++)u[k]=D[k];u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,C=!C}throw new ae}static decodeDigit(t,i,a,c){this.recordPattern(t,a,i);let u=this.MAX_AVG_VARIANCE,d=-1,m=c.length;for(let y=0;y<m;y++){let A=c[y],C=Vt.patternMatchVariance(i,A,Zt.MAX_INDIVIDUAL_VARIANCE);C<u&&(u=C,d=y)}if(d>=0)return d;throw new ae}}Zt.MAX_AVG_VARIANCE=.48,Zt.MAX_INDIVIDUAL_VARIANCE=.7,Zt.START_END_PATTERN=Int32Array.from([1,1,1]),Zt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Zt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _a{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,a,c),d=c.toString(),m=_a.parseExtensionString(d),y=[new Me((a[0]+a[1])/2,t),new Me(u,t)],A=new Te(d,null,0,y,ye.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&A.putAllMetadata(m),A}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=i[1],m=0;for(let A=0;A<5&&d<u;A++){let C=Zt.decodeDigit(t,c,d,Zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)d+=R;C>=10&&(m|=1<<4-A),A!==4&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==5)throw new ae;let y=this.determineCheckDigit(m);if(_a.extensionChecksum(a.toString())!==y)throw new ae;return d}static extensionChecksum(t){let i=t.length,a=0;for(let c=i-2;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;a*=3;for(let c=i-1;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new ae}static parseExtensionString(t){if(t.length!==5)return null;let i=_a.parseExtension5String(t);return i==null?null:new Map([[$e.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let a=parseInt(t.substring(1)),c=(a/100).toString(),u=a%100,d=u<10?"0"+u:u.toString();return i+c+"."+d}}class rl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,a,c),d=c.toString(),m=rl.parseExtensionString(d),y=[new Me((a[0]+a[1])/2,t),new Me(u,t)],A=new Te(d,null,0,y,ye.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&A.putAllMetadata(m),A}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=i[1],m=0;for(let y=0;y<2&&d<u;y++){let A=Zt.decodeDigit(t,c,d,Zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let C of c)d+=C;A>=10&&(m|=1<<1-y),y!==1&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==2)throw new ae;if(parseInt(a.toString())%4!==m)throw new ae;return d}static parseExtensionString(t){return t.length!==2?null:new Map([[$e.ISSUE_NUMBER,parseInt(t)]])}}class Ca{static decodeRow(t,i,a){let c=Zt.findGuardPattern(i,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new _a().decodeRow(t,i,c)}catch{return new rl().decodeRow(t,i,c)}}}Ca.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ft extends Zt{constructor(){super(),this.decodeRowStringBuffer="",ft.L_AND_G_PATTERNS=ft.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=ft.L_PATTERNS[t-10],a=new Int32Array(i.length);for(let c=0;c<i.length;c++)a[c]=i[i.length-c-1];ft.L_AND_G_PATTERNS[t]=a}}decodeRow(t,i,a){let c=ft.findStartGuardPattern(i),u=a==null?null:a.get(ve.NEED_RESULT_POINT_CALLBACK);if(u!=null){const xe=new Me((c[0]+c[1])/2,t);u.foundPossibleResultPoint(xe)}let d=this.decodeMiddle(i,c,this.decodeRowStringBuffer),m=d.rowOffset,y=d.resultString;if(u!=null){const xe=new Me(m,t);u.foundPossibleResultPoint(xe)}let A=this.decodeEnd(i,m);if(u!=null){const xe=new Me((A[0]+A[1])/2,t);u.foundPossibleResultPoint(xe)}let C=A[1],R=C+(C-A[0]);if(R>=i.getSize()||!i.isRange(C,R,!1))throw new ae;let D=y.toString();if(D.length<8)throw new W;if(!ft.checkChecksum(D))throw new j;let k=(c[1]+c[0])/2,F=(A[1]+A[0])/2,V=this.getBarcodeFormat(),X=[new Me(k,t),new Me(F,t)],le=new Te(D,null,0,X,V,new Date().getTime()),be=0;try{let xe=Ca.decodeRow(t,i,A[1]);le.putMetadata($e.UPC_EAN_EXTENSION,xe.getText()),le.putAllMetadata(xe.getResultMetadata()),le.addResultPoints(xe.getResultPoints()),be=xe.getText().length}catch{}let we=a==null?null:a.get(ve.ALLOWED_EAN_EXTENSIONS);if(we!=null){let xe=!1;for(let rt in we)if(be.toString()===rt){xe=!0;break}if(!xe)throw new ae}return le}decodeEnd(t,i){return ft.findGuardPattern(t,i,!1,ft.START_END_PATTERN,new Int32Array(ft.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return ft.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return ft.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let c=i-1;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new W;a+=u}a*=3;for(let c=i-2;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new W;a+=u}return(1e3-a)%10}}class Ci extends ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=i[1],m=0;for(let A=0;A<6&&d<u;A++){let C=ft.decodeDigit(t,c,d,ft.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)d+=R;C>=10&&(m|=1<<5-A)}a=Ci.determineFirstDigit(a,m),d=ft.findGuardPattern(t,d,!0,ft.MIDDLE_PATTERN,new Int32Array(ft.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&d<u;A++){let C=ft.decodeDigit(t,c,d,ft.L_PATTERNS);a+=String.fromCharCode(48+C);for(let R of c)d+=R}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ye.EAN_13}static determineFirstDigit(t,i){for(let a=0;a<10;a++)if(i===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new ae}}Ci.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ji extends ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=i[1];for(let y=0;y<4&&d<u;y++){let A=ft.decodeDigit(t,c,d,ft.L_PATTERNS);a+=String.fromCharCode(48+A);for(let C of c)d+=C}d=ft.findGuardPattern(t,d,!0,ft.MIDDLE_PATTERN,new Int32Array(ft.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&d<u;y++){let A=ft.decodeDigit(t,c,d,ft.L_PATTERNS);a+=String.fromCharCode(48+A);for(let C of c)d+=C}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ye.EAN_8}}class Ta extends ft{constructor(){super(...arguments),this.ean13Reader=new Ci}getBarcodeFormat(){return ye.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,a))}decodeMiddle(t,i,a){return this.ean13Reader.decodeMiddle(t,i,a)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let a=new Te(i.substring(1),null,null,t.getResultPoints(),ye.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new ae}reset(){this.ean13Reader.reset()}}class Dn extends ft{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,a){const c=this.decodeMiddleCounters.map(A=>A);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=t.getSize();let d=i[1],m=0;for(let A=0;A<6&&d<u;A++){const C=Dn.decodeDigit(t,c,d,Dn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)d+=R;C>=10&&(m|=1<<5-A)}let y=Dn.determineNumSysAndCheckDigit(a,m);return{rowOffset:d,resultString:y}}decodeEnd(t,i){return Dn.findGuardPatternWithoutCounters(t,i,!0,Dn.MIDDLE_END_PATTERN)}checkChecksum(t){return ft.checkChecksum(Dn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return u+t+d}throw ae.getNotFoundInstance()}getBarcodeFormat(){return ye.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new De;a.append(t.charAt(0));let c=i[5];switch(c){case 0:case 1:case 2:a.appendChars(i,0,2),a.append(c),a.append("0000"),a.appendChars(i,2,3);break;case 3:a.appendChars(i,0,3),a.append("00000"),a.appendChars(i,3,2);break;case 4:a.appendChars(i,0,4),a.append("00000"),a.append(i[4]);break;default:a.appendChars(i,0,5),a.append("0000"),a.append(c);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}Dn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class al extends Vt{constructor(t){super();let i=t==null?null:t.get(ve.POSSIBLE_FORMATS),a=[];f(i)?(a.push(new Ci),a.push(new Ta),a.push(new Ji),a.push(new Dn)):(i.indexOf(ye.EAN_13)>-1&&a.push(new Ci),i.indexOf(ye.UPC_A)>-1&&a.push(new Ta),i.indexOf(ye.EAN_8)>-1&&a.push(new Ji),i.indexOf(ye.UPC_E)>-1&&a.push(new Dn)),this.readers=a}decodeRow(t,i,a){for(let c of this.readers)try{const u=c.decodeRow(t,i,a),d=u.getBarcodeFormat()===ye.EAN_13&&u.getText().charAt(0)==="0",m=a==null?null:a.get(ve.POSSIBLE_FORMATS),y=m==null||m.includes(ye.UPC_A);if(d&&y){const A=u.getRawBytes(),C=new Te(u.getText().substring(1),A,A?A.length:null,u.getResultPoints(),ye.UPC_A);return C.putAllMetadata(u.getResultMetadata()),C}return u}catch{}throw new ae}reset(){for(let t of this.readers)t.reset()}}class An extends Vt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let a=0;a<i.length;a++)if(Vt.patternMatchVariance(t,i[a],An.MAX_INDIVIDUAL_VARIANCE)<An.MAX_AVG_VARIANCE)return a;throw new ae}static count(t){return ot.sum(new Int32Array(t))}static increment(t,i){let a=0,c=i[0];for(let u=1;u<t.length;u++)i[u]>c&&(c=i[u],a=u);t[a]++}static decrement(t,i){let a=0,c=i[0];for(let u=1;u<t.length;u++)i[u]<c&&(c=i[u],a=u);t[a]--}static isFinderPattern(t){let i=t[0]+t[1],a=i+t[2]+t[3],c=i/a;if(c>=An.MIN_FINDER_PATTERN_RATIO&&c<=An.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let m of t)m>d&&(d=m),m<u&&(u=m);return d<10*u}return!1}}An.MAX_AVG_VARIANCE=.2,An.MAX_INDIVIDUAL_VARIANCE=.45,An.MIN_FINDER_PATTERN_RATIO=9.5/12,An.MAX_FINDER_PATTERN_RATIO=12.5/14;class $i{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof $i))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class er{constructor(t,i,a,c,u){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Me(a,u)),this.resultPoints.push(new Me(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof er))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class Ti{constructor(){}static getRSSvalue(t,i,a){let c=0;for(let y of t)c+=y;let u=0,d=0,m=t.length;for(let y=0;y<m-1;y++){let A;for(A=1,d|=1<<y;A<t[y];A++,d&=~(1<<y)){let C=Ti.combins(c-A-1,m-y-2);if(a&&d===0&&c-A-(m-y-1)>=m-y-1&&(C-=Ti.combins(c-A-(m-y),m-y-2)),m-y-1>1){let R=0;for(let D=c-A-(m-y-2);D>i;D--)R+=Ti.combins(c-A-D-1,m-y-3);C-=R*(m-1-y)}else c-A>i&&C--;u+=C}c-=A}return u}static combins(t,i){let a,c;t-i>i?(c=i,a=t-i):(c=t-i,a=i);let u=1,d=1;for(let m=t;m>a;m--)u*=m,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class mo{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let a=12*i,c=new ue(a),u=0,m=t[0].getRightChar().getValue();for(let y=11;y>=0;--y)(m&1<<y)!=0&&c.set(u),u++;for(let y=1;y<t.length;++y){let A=t[y],C=A.getLeftChar().getValue();for(let R=11;R>=0;--R)(C&1<<R)!=0&&c.set(u),u++;if(A.getRightChar()!=null){let R=A.getRightChar().getValue();for(let D=11;D>=0;--D)(R&1<<D)!=0&&c.set(u),u++}}return c}}class tr{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rs{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Nn extends rs{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Nn.FNC1}}Nn.FNC1="$";class zi extends rs{constructor(t,i,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Gn extends rs{constructor(t,i,a){if(super(t),i<0||i>10||a<0||a>10)throw new W;this.firstDigit=i,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Gn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Gn.FNC1}isAnyFNC1(){return this.firstDigit===Gn.FNC1||this.secondDigit===Gn.FNC1}}Gn.FNC1=10;class Oe{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ae;let i=t.substring(0,2);for(let u of Oe.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(2,u[2],t):Oe.processFixedAI(2,u[1],t);if(t.length<3)throw new ae;let a=t.substring(0,3);for(let u of Oe.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(3,u[2],t):Oe.processFixedAI(3,u[1],t);for(let u of Oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(4,u[2],t):Oe.processFixedAI(4,u[1],t);if(t.length<4)throw new ae;let c=t.substring(0,4);for(let u of Oe.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(4,u[2],t):Oe.processFixedAI(4,u[1],t);throw new ae}static processFixedAI(t,i,a){if(a.length<t)throw new ae;let c=a.substring(0,t);if(a.length<t+i)throw new ae;let u=a.substring(t,t+i),d=a.substring(t+i),m="("+c+")"+u,y=Oe.parseFieldsInGeneralPurpose(d);return y==null?m:m+y}static processVariableAI(t,i,a){let c=a.substring(0,t),u;a.length<t+i?u=a.length:u=t+i;let d=a.substring(t,u),m=a.substring(u),y="("+c+")"+d,A=Oe.parseFieldsInGeneralPurpose(m);return A==null?y:y+A}}Oe.VARIABLE_LENGTH=[],Oe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Oe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Oe.VARIABLE_LENGTH,20],["22",Oe.VARIABLE_LENGTH,29],["30",Oe.VARIABLE_LENGTH,8],["37",Oe.VARIABLE_LENGTH,8],["90",Oe.VARIABLE_LENGTH,30],["91",Oe.VARIABLE_LENGTH,30],["92",Oe.VARIABLE_LENGTH,30],["93",Oe.VARIABLE_LENGTH,30],["94",Oe.VARIABLE_LENGTH,30],["95",Oe.VARIABLE_LENGTH,30],["96",Oe.VARIABLE_LENGTH,30],["97",Oe.VARIABLE_LENGTH,3],["98",Oe.VARIABLE_LENGTH,30],["99",Oe.VARIABLE_LENGTH,30]],Oe.THREE_DIGIT_DATA_LENGTH=[["240",Oe.VARIABLE_LENGTH,30],["241",Oe.VARIABLE_LENGTH,30],["242",Oe.VARIABLE_LENGTH,6],["250",Oe.VARIABLE_LENGTH,30],["251",Oe.VARIABLE_LENGTH,30],["253",Oe.VARIABLE_LENGTH,17],["254",Oe.VARIABLE_LENGTH,20],["400",Oe.VARIABLE_LENGTH,30],["401",Oe.VARIABLE_LENGTH,30],["402",17],["403",Oe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Oe.VARIABLE_LENGTH,20],["421",Oe.VARIABLE_LENGTH,15],["422",3],["423",Oe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Oe.VARIABLE_LENGTH,15],["391",Oe.VARIABLE_LENGTH,18],["392",Oe.VARIABLE_LENGTH,15],["393",Oe.VARIABLE_LENGTH,18],["703",Oe.VARIABLE_LENGTH,30]],Oe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Oe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Oe.VARIABLE_LENGTH,20],["8003",Oe.VARIABLE_LENGTH,30],["8004",Oe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Oe.VARIABLE_LENGTH,30],["8008",Oe.VARIABLE_LENGTH,12],["8018",18],["8020",Oe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Oe.VARIABLE_LENGTH,70],["8200",Oe.VARIABLE_LENGTH,70]];class Yn{constructor(t){this.buffer=new De,this.information=t}decodeAllCodes(t,i){let a=i,c=null;do{let u=this.decodeGeneralPurposeField(a,c),d=Oe.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&t.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new Gn(this.information.getSize(),Gn.FNC1,Gn.FNC1):new Gn(this.information.getSize(),u-1,Gn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),a=(i-8)/11,c=(i-8)%11;return new Gn(t+7,a,c)}extractNumericValueFromBitArray(t,i){return Yn.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,a){let c=0;for(let u=0;u<a;++u)t.get(i+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new zi(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new zi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let a=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new zi(this.current.getPosition(),this.buffer.toString()):i=new zi(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new tr(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new zi(this.current.getPosition(),this.buffer.toString());return new tr(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new tr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new zi(this.current.getPosition(),this.buffer.toString());return new tr(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new tr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new zi(this.current.getPosition(),this.buffer.toString());return new tr(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new tr(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(t,8);return c>=232&&c<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Nn(t+5,Nn.FNC1);if(i>=5&&i<15)return new Nn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new Nn(t+7,""+(a+1));if(a>=90&&a<116)return new Nn(t+7,""+(a+7));let c=this.extractNumericValueFromBitArray(t,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new W}return new Nn(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Nn(t+5,Nn.FNC1);if(i>=5&&i<15)return new Nn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new Nn(t+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Fn("Decoding invalid alphanumeric value: "+a)}return new Nn(t+6,c)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class cn{constructor(t){this.information=t,this.generalDecoder=new Yn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Rt extends cn{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,a)}encodeCompressedGtinWithoutAI(t,i,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*c,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}Rt.appendCheckDigit(t,a)}static appendCheckDigit(t,i){let a=0;for(let c=0;c<13;c++){let u=t.charAt(c+i).charCodeAt(0)-48;a+=(c&1)===0?3*u:u}a=10-a%10,a===10&&(a=0),t.append(a)}}Rt.GTIN_SIZE=40;class ci extends Rt{constructor(t){super(t)}parseInformation(){let t=new De;t.append("(01)");let i=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(ci.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,ci.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,ci.HEADER_SIZE+44)}}ci.HEADER_SIZE=4;class Ur extends cn{constructor(t){super(t)}parseInformation(){let t=new De;return this.getGeneralDecoder().decodeAllCodes(t,Ur.HEADER_SIZE)}}Ur.HEADER_SIZE=5;class as extends Rt{constructor(t){super(t)}encodeCompressedWeight(t,i,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,a);this.addWeightCode(t,c);let u=this.checkWeight(c),d=1e5;for(let m=0;m<5;++m)u/d===0&&t.append("0"),d/=10;t.append(u)}}class Ni extends as{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Ni.HEADER_SIZE+as.GTIN_SIZE+Ni.WEIGHT_SIZE)throw new ae;let t=new De;return this.encodeCompressedGtin(t,Ni.HEADER_SIZE),this.encodeCompressedWeight(t,Ni.HEADER_SIZE+as.GTIN_SIZE,Ni.WEIGHT_SIZE),t.toString()}}Ni.HEADER_SIZE=5,Ni.WEIGHT_SIZE=15;class po extends Ni{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class Na extends Ni{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class $n extends Rt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<$n.HEADER_SIZE+Rt.GTIN_SIZE)throw new ae;let t=new De;this.encodeCompressedGtin(t,$n.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Rt.GTIN_SIZE,$n.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField($n.HEADER_SIZE+Rt.GTIN_SIZE+$n.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}$n.HEADER_SIZE=8,$n.LAST_DIGIT_SIZE=2;class tn extends Rt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<tn.HEADER_SIZE+Rt.GTIN_SIZE)throw new ae;let t=new De;this.encodeCompressedGtin(t,tn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(tn.HEADER_SIZE+Rt.GTIN_SIZE,tn.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(tn.HEADER_SIZE+Rt.GTIN_SIZE+tn.LAST_DIGIT_SIZE,tn.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(tn.HEADER_SIZE+Rt.GTIN_SIZE+tn.LAST_DIGIT_SIZE+tn.FIRST_THREE_DIGITS_SIZE,null);return t.append(c.getNewString()),t.toString()}}tn.HEADER_SIZE=8,tn.LAST_DIGIT_SIZE=2,tn.FIRST_THREE_DIGITS_SIZE=10;class Et extends as{constructor(t,i,a){super(t),this.dateCode=a,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE+Et.DATE_SIZE)throw new ae;let t=new De;return this.encodeCompressedGtin(t,Et.HEADER_SIZE),this.encodeCompressedWeight(t,Et.HEADER_SIZE+Et.GTIN_SIZE,Et.WEIGHT_SIZE),this.encodeCompressedDate(t,Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Et.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let d=a;d/10==0&&t.append("0"),t.append(d),u/10==0&&t.append("0"),t.append(u),c/10==0&&t.append("0"),t.append(c)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}Et.HEADER_SIZE=8,Et.WEIGHT_SIZE=20,Et.DATE_SIZE=16;function zr(I){try{if(I.get(1))return new ci(I);if(!I.get(2))return new Ur(I);switch(Yn.extractNumericValueFromBitArray(I,1,4)){case 4:return new po(I);case 5:return new Na(I)}switch(Yn.extractNumericValueFromBitArray(I,1,5)){case 12:return new $n(I);case 13:return new tn(I)}switch(Yn.extractNumericValueFromBitArray(I,1,7)){case 56:return new Et(I,"310","11");case 57:return new Et(I,"320","11");case 58:return new Et(I,"310","13");case 59:return new Et(I,"320","13");case 60:return new Et(I,"310","15");case 61:return new Et(I,"320","15");case 62:return new Et(I,"310","17");case 63:return new Et(I,"320","17")}}catch(t){throw console.log(t),new Fn("unknown decoder: "+I)}}class qn{constructor(t,i,a,c){this.leftchar=t,this.rightchar=i,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof qn?qn.equalsOrNull(t.leftchar,i.leftchar)&&qn.equalsOrNull(t.rightchar,i.rightchar)&&qn.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:qn.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class nn{constructor(t,i,a){this.pairs=t,this.rowNumber=i,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof nn?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let a;return t.forEach((c,u)=>{i.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class pe extends An{constructor(t){super(...arguments),this.pairs=new Array(pe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,a){this.pairs.length=0,this.startFromEven=!1;try{return pe.constructResult(this.decodeRow2pairs(t,i))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,pe.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(u){if(u instanceof ae){if(!this.pairs.length)throw new ae;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(t,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new ae}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let a=i;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of t)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!pe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(c);try{return this.checkRows(u,a+1)}catch(d){this.verbose&&console.log(d)}}throw new ae}static isValidSequence(t){for(let i of pe.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let a=!0;for(let c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!=i[c]){a=!1;break}if(a)return!0}return!1}storeRow(t,i){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>t){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}u||c||pe.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new nn(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let a of i)if(a.getPairs().length!==t.length){for(let c of a.getPairs())for(let u of t)if(qn.equals(c,u))break}}static isPartialRow(t,i){for(let a of i){let c=!0;for(let u of t){let d=!1;for(let m of a.getPairs())if(u.equals(m)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=mo.buildBitArray(t),c=zr(i).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),d=t[t.length-1].getFinderPattern().getResultPoints(),m=[u[0],u[1],d[0],d[1]];return new Te(c,null,null,m,ye.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let m=1;m<this.pairs.size();++m){let y=this.pairs.get(m);c+=y.getLeftChar().getChecksumPortion(),u++;let A=y.getRightChar();A!=null&&(c+=A.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==i.getValue()}static getNextSecondBar(t,i){let a;return t.get(i)?(a=t.getNextUnset(i),a=t.getNextSet(a)):(a=t.getNextSet(i),a=t.getNextUnset(a)),a}retrieveNextPair(t,i,a){let c=i.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,m=-1;do this.findNextPair(t,i,m),u=this.parseFoundFinderPattern(t,a,c),u==null?m=pe.getNextSecondBar(t,this.startEnd[0]):d=!1;while(d);let y=this.decodeDataCharacter(t,u,c,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new ae;let A;try{A=this.decodeDataCharacter(t,u,c,!1)}catch(C){A=null,this.verbose&&console.log(C)}return new qn(y,A,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d;a>=0?d=a:this.isEmptyPair(i)?d=0:d=i[i.length-1].getFinderPattern().getStartEnd()[1];let m=i.length%2!=0;this.startFromEven&&(m=!m);let y=!1;for(;d<u&&(y=!t.get(d),!!y);)d++;let A=0,C=d;for(let R=d;R<u;R++)if(t.get(R)!=y)c[A]++;else{if(A==3){if(m&&pe.reverseCounters(c),pe.isFinderPattern(c)){this.startEnd[0]=C,this.startEnd[1]=R;return}m&&pe.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,A--}else A++;c[A]=1,y=!y}throw new ae}static reverseCounters(t){let i=t.length;for(let a=0;a<i/2;++a){let c=t[a];t[a]=t[i-a-1],t[i-a-1]=c}}parseFoundFinderPattern(t,i,a){let c,u,d;if(a){let A=this.startEnd[0]-1;for(;A>=0&&!t.get(A);)A--;A++,c=this.startEnd[0]-A,u=A,d=this.startEnd[1]}else u=this.startEnd[0],d=t.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let m=this.getDecodeFinderCounters();z.arraycopy(m,0,m,1,m.length-1),m[0]=c;let y;try{y=this.parseFinderValue(m,pe.FINDER_PATTERNS)}catch{return null}return new er(y,[u,d],u,d,i)}decodeDataCharacter(t,i,a,c){let u=this.getDataCharacterCounters();for(let Ot=0;Ot<u.length;Ot++)u[Ot]=0;if(c)pe.recordPatternInReverse(t,i.getStartEnd()[0],u);else{pe.recordPattern(t,i.getStartEnd()[1],u);for(let Ot=0,_n=u.length-1;Ot<_n;Ot++,_n--){let Zn=u[Ot];u[Ot]=u[_n],u[_n]=Zn}}let d=17,m=ot.sum(new Int32Array(u))/d,y=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new ae;let A=this.getOddCounts(),C=this.getEvenCounts(),R=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Ot=0;Ot<u.length;Ot++){let _n=1*u[Ot]/m,Zn=_n+.5;if(Zn<1){if(_n<.3)throw new ae;Zn=1}else if(Zn>8){if(_n>8.7)throw new ae;Zn=8}let Kr=Ot/2;(Ot&1)==0?(A[Kr]=Zn,R[Kr]=_n-Zn):(C[Kr]=Zn,D[Kr]=_n-Zn)}this.adjustOddEvenCounts(d);let k=4*i.getValue()+(a?0:2)+(c?0:1)-1,F=0,V=0;for(let Ot=A.length-1;Ot>=0;Ot--){if(pe.isNotA1left(i,a,c)){let _n=pe.WEIGHTS[k][2*Ot];V+=A[Ot]*_n}F+=A[Ot]}let X=0;for(let Ot=C.length-1;Ot>=0;Ot--)if(pe.isNotA1left(i,a,c)){let _n=pe.WEIGHTS[k][2*Ot+1];X+=C[Ot]*_n}let le=V+X;if((F&1)!=0||F>13||F<4)throw new ae;let be=(13-F)/2,we=pe.SYMBOL_WIDEST[be],xe=9-we,rt=Ti.getRSSvalue(A,we,!0),Qe=Ti.getRSSvalue(C,xe,!1),rn=pe.EVEN_TOTAL_SUBSET[be],ni=pe.GSUM[be],Mn=rt*rn+Qe+ni;return new $i(Mn,le)}static isNotA1left(t,i,a){return!(t.getValue()==0&&i&&a)}adjustOddEvenCounts(t){let i=ot.sum(new Int32Array(this.getOddCounts())),a=ot.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);let d=!1,m=!1;a>13?m=!0:a<4&&(d=!0);let y=i+a-t,A=(i&1)==1,C=(a&1)==0;if(y==1)if(A){if(C)throw new ae;u=!0}else{if(!C)throw new ae;m=!0}else if(y==-1)if(A){if(C)throw new ae;c=!0}else{if(!C)throw new ae;d=!0}else if(y==0){if(A){if(!C)throw new ae;i<a?(c=!0,m=!0):(u=!0,d=!0)}else if(C)throw new ae}else throw new ae;if(c){if(u)throw new ae;pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(m)throw new ae;pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pe.SYMBOL_WIDEST=[7,5,4,3,1],pe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],pe.GSUM=[0,348,1388,2948,3988],pe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],pe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],pe.FINDER_PAT_A=0,pe.FINDER_PAT_B=1,pe.FINDER_PAT_C=2,pe.FINDER_PAT_D=3,pe.FINDER_PAT_E=4,pe.FINDER_PAT_F=5,pe.FINDER_PATTERN_SEQUENCES=[[pe.FINDER_PAT_A,pe.FINDER_PAT_A],[pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B],[pe.FINDER_PAT_A,pe.FINDER_PAT_C,pe.FINDER_PAT_B,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_C],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F]],pe.MAX_PAIRS=11;class xo extends $i{constructor(t,i,a){super(t,i),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Tt extends An{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,a){const c=this.decodePair(i,!1,t,a);Tt.addOrTally(this.possibleLeftPairs,c),i.reverse();let u=this.decodePair(i,!0,t,a);Tt.addOrTally(this.possibleRightPairs,u),i.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Tt.checkChecksum(d,m))return Tt.constructResult(d,m)}throw new ae}static addOrTally(t,i){if(i==null)return;let a=!1;for(let c of t)if(c.getValue()===i.getValue()){c.incrementCount(),a=!0;break}a||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let a=4537077*t.getValue()+i.getValue(),c=new String(a).toString(),u=new De;for(let A=13-c.length;A>0;A--)u.append("0");u.append(c);let d=0;for(let A=0;A<13;A++){let C=u.charAt(A).charCodeAt(0)-48;d+=(A&1)===0?3*C:C}d=10-d%10,d===10&&(d=0),u.append(d.toString());let m=t.getFinderPattern().getResultPoints(),y=i.getFinderPattern().getResultPoints();return new Te(u.toString(),null,0,[m[0],m[1],y[0],y[1]],ye.RSS_14,new Date().getTime())}static checkChecksum(t,i){let a=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,c=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(t,i,a,c){try{let u=this.findFinderPattern(t,i),d=this.parseFoundFinderPattern(t,a,i,u),m=c==null?null:c.get(ve.NEED_RESULT_POINT_CALLBACK);if(m!=null){let C=(u[0]+u[1])/2;i&&(C=t.getSize()-1-C),m.foundPossibleResultPoint(new Me(C,a))}let y=this.decodeDataCharacter(t,d,!0),A=this.decodeDataCharacter(t,d,!1);return new xo(1597*y.getValue()+A.getValue(),y.getChecksumPortion()+4*A.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(t,i,a){let c=this.getDataCharacterCounters();for(let X=0;X<c.length;X++)c[X]=0;if(a)Vt.recordPatternInReverse(t,i.getStartEnd()[0],c);else{Vt.recordPattern(t,i.getStartEnd()[1]+1,c);for(let X=0,le=c.length-1;X<le;X++,le--){let be=c[X];c[X]=c[le],c[le]=be}}let u=a?16:15,d=ot.sum(new Int32Array(c))/u,m=this.getOddCounts(),y=this.getEvenCounts(),A=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let X=0;X<c.length;X++){let le=c[X]/d,be=Math.floor(le+.5);be<1?be=1:be>8&&(be=8);let we=Math.floor(X/2);(X&1)===0?(m[we]=be,A[we]=le-be):(y[we]=be,C[we]=le-be)}this.adjustOddEvenCounts(a,u);let R=0,D=0;for(let X=m.length-1;X>=0;X--)D*=9,D+=m[X],R+=m[X];let k=0,F=0;for(let X=y.length-1;X>=0;X--)k*=9,k+=y[X],F+=y[X];let V=D+3*k;if(a){if((R&1)!==0||R>12||R<4)throw new ae;let X=(12-R)/2,le=Tt.OUTSIDE_ODD_WIDEST[X],be=9-le,we=Ti.getRSSvalue(m,le,!1),xe=Ti.getRSSvalue(y,be,!0),rt=Tt.OUTSIDE_EVEN_TOTAL_SUBSET[X],Qe=Tt.OUTSIDE_GSUM[X];return new $i(we*rt+xe+Qe,V)}else{if((F&1)!==0||F>10||F<4)throw new ae;let X=(10-F)/2,le=Tt.INSIDE_ODD_WIDEST[X],be=9-le,we=Ti.getRSSvalue(m,le,!0),xe=Ti.getRSSvalue(y,be,!1),rt=Tt.INSIDE_ODD_TOTAL_SUBSET[X],Qe=Tt.INSIDE_GSUM[X];return new $i(xe*rt+we+Qe,V)}}findFinderPattern(t,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),u=!1,d=0;for(;d<c&&(u=!t.get(d),i!==u);)d++;let m=0,y=d;for(let A=d;A<c;A++)if(t.get(A)!==u)a[m]++;else{if(m===3){if(An.isFinderPattern(a))return[y,A];y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,u=!u}throw new ae}parseFoundFinderPattern(t,i,a,c){let u=t.get(c[0]),d=c[0]-1;for(;d>=0&&u!==t.get(d);)d--;d++;const m=c[0]-d,y=this.getDecodeFinderCounters(),A=new Int32Array(y.length);z.arraycopy(y,0,A,1,y.length-1),A[0]=m;const C=this.parseFinderValue(A,Tt.FINDER_PATTERNS);let R=d,D=c[1];return a&&(R=t.getSize()-1-R,D=t.getSize()-1-D),new er(C,[d,c[1]],R,D,i)}adjustOddEvenCounts(t,i){let a=ot.sum(new Int32Array(this.getOddCounts())),c=ot.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,m=!1,y=!1;t?(a>12?d=!0:a<4&&(u=!0),c>12?y=!0:c<4&&(m=!0)):(a>11?d=!0:a<5&&(u=!0),c>10?y=!0:c<4&&(m=!0));let A=a+c-i,C=(a&1)===(t?1:0),R=(c&1)===1;if(A===1)if(C){if(R)throw new ae;d=!0}else{if(!R)throw new ae;y=!0}else if(A===-1)if(C){if(R)throw new ae;u=!0}else{if(!R)throw new ae;m=!0}else if(A===0){if(C){if(!R)throw new ae;a<c?(u=!0,y=!0):(d=!0,m=!0)}else if(R)throw new ae}else throw new ae;if(u){if(d)throw new ae;An.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&An.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new ae;An.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&An.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Tt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Tt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Tt.OUTSIDE_GSUM=[0,161,961,2015,2715],Tt.INSIDE_GSUM=[0,336,1036,1516],Tt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Tt.INSIDE_ODD_WIDEST=[2,4,6,8],Tt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ui extends Vt{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const a=t?t.get(ve.POSSIBLE_FORMATS):null,c=t&&t.get(ve.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ye.EAN_13)||a.includes(ye.UPC_A)||a.includes(ye.EAN_8)||a.includes(ye.UPC_E))&&this.readers.push(new al(t)),a.includes(ye.CODE_39)&&this.readers.push(new Lt(c)),a.includes(ye.CODE_128)&&this.readers.push(new Ae),a.includes(ye.ITF)&&this.readers.push(new tt),a.includes(ye.RSS_14)&&this.readers.push(new Tt),a.includes(ye.RSS_EXPANDED)&&this.readers.push(new pe(this.verbose))):(this.readers.push(new al(t)),this.readers.push(new Lt),this.readers.push(new al(t)),this.readers.push(new Ae),this.readers.push(new tt),this.readers.push(new Tt),this.readers.push(new pe(this.verbose)))}decodeRow(t,i,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(t,i,a)}catch{}throw new ae}reset(){this.readers.forEach(t=>t.reset())}}class Kc extends Se{constructor(t=500,i){super(new ui(i),t,i)}}class yt{constructor(t,i,a){this.ecCodewords=t,this.ecBlocks=[i],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class xt{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ct{constructor(t,i,a,c,u,d){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let m=0;const y=d.getECCodewords(),A=d.getECBlocks();for(let C of A)m+=C.getCount()*(C.getDataCodewords()+y);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new W;for(let a of ct.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===i)return a;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new ct(1,10,10,8,8,new yt(5,new xt(1,3))),new ct(2,12,12,10,10,new yt(7,new xt(1,5))),new ct(3,14,14,12,12,new yt(10,new xt(1,8))),new ct(4,16,16,14,14,new yt(12,new xt(1,12))),new ct(5,18,18,16,16,new yt(14,new xt(1,18))),new ct(6,20,20,18,18,new yt(18,new xt(1,22))),new ct(7,22,22,20,20,new yt(20,new xt(1,30))),new ct(8,24,24,22,22,new yt(24,new xt(1,36))),new ct(9,26,26,24,24,new yt(28,new xt(1,44))),new ct(10,32,32,14,14,new yt(36,new xt(1,62))),new ct(11,36,36,16,16,new yt(42,new xt(1,86))),new ct(12,40,40,18,18,new yt(48,new xt(1,114))),new ct(13,44,44,20,20,new yt(56,new xt(1,144))),new ct(14,48,48,22,22,new yt(68,new xt(1,174))),new ct(15,52,52,24,24,new yt(42,new xt(2,102))),new ct(16,64,64,14,14,new yt(56,new xt(2,140))),new ct(17,72,72,16,16,new yt(36,new xt(4,92))),new ct(18,80,80,18,18,new yt(48,new xt(4,114))),new ct(19,88,88,20,20,new yt(56,new xt(4,144))),new ct(20,96,96,22,22,new yt(68,new xt(4,174))),new ct(21,104,104,24,24,new yt(56,new xt(6,136))),new ct(22,120,120,18,18,new yt(68,new xt(6,175))),new ct(23,132,132,20,20,new yt(62,new xt(8,163))),new ct(24,144,144,22,22,new yt(62,new xt(8,156),new xt(2,155))),new ct(25,8,18,6,16,new yt(7,new xt(1,5))),new ct(26,8,32,6,14,new yt(11,new xt(1,10))),new ct(27,12,26,10,24,new yt(14,new xt(1,16))),new ct(28,12,36,10,16,new yt(18,new xt(1,22))),new ct(29,16,36,14,16,new yt(24,new xt(1,32))),new ct(30,16,48,14,22,new yt(28,new xt(1,49)))]}}ct.VERSIONS=ct.buildVersions();class Pr{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new W;this.version=Pr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new He(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),a=t.getWidth();return ct.getVersionForDimensions(i,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let m=!1,y=!1,A=!1,C=!1;do if(a===u&&c===0&&!m)t[i++]=this.readCorner1(u,d)&255,a-=2,c+=2,m=!0;else if(a===u-2&&c===0&&(d&3)!==0&&!y)t[i++]=this.readCorner2(u,d)&255,a-=2,c+=2,y=!0;else if(a===u+4&&c===2&&(d&7)===0&&!A)t[i++]=this.readCorner3(u,d)&255,a-=2,c+=2,A=!0;else if(a===u-2&&c===0&&(d&7)===4&&!C)t[i++]=this.readCorner4(u,d)&255,a-=2,c+=2,C=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(t[i++]=this.readUtah(a,c,u,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(t[i++]=this.readUtah(a,c,u,d)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<d);if(i!==this.version.getTotalCodewords())throw new W;return t}readModule(t,i,a,c){return t<0&&(t+=a,i+=4-(a+4&7)),i<0&&(i+=c,t+=4-(c+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,a,c){let u=0;return this.readModule(t-2,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t-2,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i,a,c)&&(u|=1),u<<=1,this.readModule(t,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t,i,a,c)&&(u|=1),u}readCorner1(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,1,t,i)&&(a|=1),a<<=1,this.readModule(t-1,2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}readCorner2(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-4,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner3(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-3,t,i)&&(a|=1),a<<=1,this.readModule(1,i-2,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner4(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new O("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=i/c|0,m=a/u|0,y=d*c,A=m*u,C=new He(A,y);for(let R=0;R<d;++R){const D=R*c;for(let k=0;k<m;++k){const F=k*u;for(let V=0;V<c;++V){const X=R*(c+2)+1+V,le=D+V;for(let be=0;be<u;++be){const we=k*(u+2)+1+be;if(t.get(we,X)){const xe=F+be;C.set(xe,le)}}}}}return C}}class Fr{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const a=i.getECBlocks();let c=0;const u=a.getECBlocks();for(let V of u)c+=V.getCount();const d=new Array(c);let m=0;for(let V of u)for(let X=0;X<V.getCount();X++){const le=V.getDataCodewords(),be=a.getECCodewords()+le;d[m++]=new Fr(le,new Uint8Array(be))}const A=d[0].codewords.length-a.getECCodewords(),C=A-1;let R=0;for(let V=0;V<C;V++)for(let X=0;X<m;X++)d[X].codewords[V]=t[R++];const D=i.getVersionNumber()===24,k=D?8:m;for(let V=0;V<k;V++)d[V].codewords[A-1]=t[R++];const F=d[0].codewords.length;for(let V=A;V<F;V++)for(let X=0;X<m;X++){const le=D?(X+8)%m:X,be=D&&le>7?V-1:V;d[le].codewords[be]=t[R++]}if(R!==t.length)throw new O;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hi{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new O(""+t);let i=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const d=8-a,m=t<d?t:d,y=d-m,A=255>>8-m<<y;i=(u[c]&A)>>y,t-=m,a+=m,a===8&&(a=0,c++)}if(t>0){for(;t>=8;)i=i<<8|u[c]&255,c++,t-=8;if(t>0){const d=8-t,m=255>>d<<d;i=i<<t|(u[c]&m)>>d,a+=t}}return this.bitOffset=a,this.byteOffset=c,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var wt;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(wt||(wt={}));class Pi{static decode(t){const i=new hi(t),a=new De,c=new De,u=new Array;let d=wt.ASCII_ENCODE;do if(d===wt.ASCII_ENCODE)d=this.decodeAsciiSegment(i,a,c);else{switch(d){case wt.C40_ENCODE:this.decodeC40Segment(i,a);break;case wt.TEXT_ENCODE:this.decodeTextSegment(i,a);break;case wt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,a);break;case wt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,a);break;case wt.BASE256_ENCODE:this.decodeBase256Segment(i,a,u);break;default:throw new W}d=wt.ASCII_ENCODE}while(d!==wt.PAD_ENCODE&&i.available()>0);return c.length()>0&&a.append(c.toString()),new st(t,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,i,a){let c=!1;do{let u=t.readBits(8);if(u===0)throw new W;if(u<=128)return c&&(u+=128),i.append(String.fromCharCode(u-1)),wt.ASCII_ENCODE;if(u===129)return wt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&i.append("0"),i.append(""+d)}else switch(u){case 230:return wt.C40_ENCODE;case 231:return wt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:i.append("[)>05"),a.insert(0,"");break;case 237:i.append("[)>06"),a.insert(0,"");break;case 238:return wt.ANSIX12_ENCODE;case 239:return wt.TEXT_ENCODE;case 240:return wt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new W;break}}while(t.available()>0);return wt.ASCII_ENCODE}static decodeC40Segment(t,i){let a=!1;const c=[];let u=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),c);for(let m=0;m<3;m++){const y=c[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else throw new W;break;case 1:a?(i.append(String.fromCharCode(y+128)),a=!1):i.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else switch(y){case 27:i.append("");break;case 30:a=!0;break;default:throw new W}u=0;break;case 3:a?(i.append(String.fromCharCode(y+224)),a=!1):i.append(String.fromCharCode(y+96)),u=0;break;default:throw new W}}}while(t.available()>0)}static decodeTextSegment(t,i){let a=!1,c=[],u=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),c);for(let m=0;m<3;m++){const y=c[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else throw new W;break;case 1:a?(i.append(String.fromCharCode(y+128)),a=!1):i.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else switch(y){case 27:i.append("");break;case 30:a=!0;break;default:throw new W}u=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[y];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A),u=0}else throw new W;break;default:throw new W}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const a=[];do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),a);for(let u=0;u<3;u++){const d=a[u];switch(d){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(d<14)i.append(String.fromCharCode(d+44));else if(d<40)i.append(String.fromCharCode(d+51));else throw new W;break}}}while(t.available()>0)}static parseTwoBytes(t,i,a){let c=(t<<8)+i-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let c=t.readBits(6);if(c===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}(c&32)===0&&(c|=64),i.append(String.fromCharCode(c))}}while(t.available()>0)}static decodeBase256Segment(t,i,a){let c=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),c++);let d;if(u===0?d=t.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(t.readBits(8),c++),d<0)throw new W;const m=new Uint8Array(d);for(let y=0;y<d;y++){if(t.available()<8)throw new W;m[y]=this.unrandomize255State(t.readBits(8),c++)}a.push(m);try{i.append(We.decode(m,_e.ISO88591))}catch(y){throw new Fn("Platform does not support required encoding: "+y.message)}}static unrandomize255State(t,i){const a=149*i%255+1,c=t-a;return c>=0?c:c+256}}Pi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Pi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Pi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Pi.TEXT_SHIFT2_SET_CHARS=Pi.C40_SHIFT2_SET_CHARS,Pi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Jc{constructor(){this.rsDecoder=new hr(lt.DATA_MATRIX_FIELD_256)}decode(t){const i=new Pr(t),a=i.getVersion(),c=i.readCodewords(),u=Fr.getDataBlocks(c,a);let d=0;for(let A of u)d+=A.getNumDataCodewords();const m=new Uint8Array(d),y=u.length;for(let A=0;A<y;A++){const C=u[A],R=C.getCodewords(),D=C.getNumDataCodewords();this.correctErrors(R,D);for(let k=0;k<D;k++)m[k*y+A]=R[k]}return Pi.decode(m)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new j}for(let c=0;c<i;c++)t[c]=a[c]}}class Yt{constructor(t){this.image=t,this.rectangleDetector=new Jt(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new ae;i=this.shiftToModuleCenter(i);const a=i[0],c=i[1],u=i[2],d=i[3];let m=this.transitionsBetween(a,d)+1,y=this.transitionsBetween(u,d)+1;(m&1)===1&&(m+=1),(y&1)===1&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));let A=Yt.sampleGrid(this.image,a,c,u,d,m,y);return new ns(A,[a,c,u,d])}static shiftPoint(t,i,a){let c=(i.getX()-t.getX())/(a+1),u=(i.getY()-t.getY())/(a+1);return new Me(t.getX()+c,t.getY()+u)}static moveAway(t,i,a){let c=t.getX(),u=t.getY();return c<i?c-=1:c+=1,u<a?u-=1:u+=1,new Me(c,u)}detectSolid1(t){let i=t[0],a=t[1],c=t[3],u=t[2],d=this.transitionsBetween(i,a),m=this.transitionsBetween(a,c),y=this.transitionsBetween(c,u),A=this.transitionsBetween(u,i),C=d,R=[u,i,a,c];return C>m&&(C=m,R[0]=i,R[1]=a,R[2]=c,R[3]=u),C>y&&(C=y,R[0]=a,R[1]=c,R[2]=u,R[3]=i),C>A&&(R[0]=c,R[1]=u,R[2]=i,R[3]=a),R}detectSolid2(t){let i=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(i,u),m=Yt.shiftPoint(a,c,(d+1)*4),y=Yt.shiftPoint(c,a,(d+1)*4),A=this.transitionsBetween(m,i),C=this.transitionsBetween(y,u);return A<C?(t[0]=i,t[1]=a,t[2]=c,t[3]=u):(t[0]=a,t[1]=c,t[2]=u,t[3]=i),t}correctTopRight(t){let i=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(i,u),m=this.transitionsBetween(a,u),y=Yt.shiftPoint(i,a,(m+1)*4),A=Yt.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(y,u),m=this.transitionsBetween(A,u);let C=new Me(u.getX()+(c.getX()-a.getX())/(d+1),u.getY()+(c.getY()-a.getY())/(d+1)),R=new Me(u.getX()+(i.getX()-a.getX())/(m+1),u.getY()+(i.getY()-a.getY())/(m+1));if(!this.isValid(C))return this.isValid(R)?R:null;if(!this.isValid(R))return C;let D=this.transitionsBetween(y,C)+this.transitionsBetween(A,C),k=this.transitionsBetween(y,R)+this.transitionsBetween(A,R);return D>k?C:R}shiftToModuleCenter(t){let i=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(i,u)+1,m=this.transitionsBetween(c,u)+1,y=Yt.shiftPoint(i,a,m*4),A=Yt.shiftPoint(c,a,d*4);d=this.transitionsBetween(y,u)+1,m=this.transitionsBetween(A,u)+1,(d&1)===1&&(d+=1),(m&1)===1&&(m+=1);let C=(i.getX()+a.getX()+c.getX()+u.getX())/4,R=(i.getY()+a.getY()+c.getY()+u.getY())/4;i=Yt.moveAway(i,C,R),a=Yt.moveAway(a,C,R),c=Yt.moveAway(c,C,R),u=Yt.moveAway(u,C,R);let D,k;return y=Yt.shiftPoint(i,a,m*4),y=Yt.shiftPoint(y,u,d*4),D=Yt.shiftPoint(a,i,m*4),D=Yt.shiftPoint(D,c,d*4),A=Yt.shiftPoint(c,u,m*4),A=Yt.shiftPoint(A,a,d*4),k=Yt.shiftPoint(u,c,m*4),k=Yt.shiftPoint(k,i,d*4),[y,D,A,k]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,a,c,u,d,m){return oi.getInstance().sampleGrid(t,d,m,.5,.5,d-.5,.5,d-.5,m-.5,.5,m-.5,i.getX(),i.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(t,i){let a=Math.trunc(t.getX()),c=Math.trunc(t.getY()),u=Math.trunc(i.getX()),d=Math.trunc(i.getY()),m=Math.abs(d-c)>Math.abs(u-a);if(m){let V=a;a=c,c=V,V=u,u=d,d=V}let y=Math.abs(u-a),A=Math.abs(d-c),C=-y/2,R=c<d?1:-1,D=a<u?1:-1,k=0,F=this.image.get(m?c:a,m?a:c);for(let V=a,X=c;V!==u;V+=D){let le=this.image.get(m?X:V,m?V:X);if(le!==F&&(k++,F=le),C+=A,C>0){if(X===d)break;X+=R,C-=y}}return k}}class Fi{constructor(){this.decoder=new Jc}decode(t,i=null){let a,c;if(i!=null&&i.has(ve.PURE_BARCODE)){const A=Fi.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(A),c=Fi.NO_POINTS}else{const A=new Yt(t.getBlackMatrix()).detect();a=this.decoder.decode(A.getBits()),c=A.getPoints()}const u=a.getRawBytes(),d=new Te(a.getText(),u,8*u.length,c,ye.DATA_MATRIX,z.currentTimeMillis()),m=a.getByteSegments();m!=null&&d.putMetadata($e.BYTE_SEGMENTS,m);const y=a.getECLevel();return y!=null&&d.putMetadata($e.ERROR_CORRECTION_LEVEL,y),d}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i==null||a==null)throw new ae;const c=this.moduleSize(i,t);let u=i[1];const d=a[1];let m=i[0];const A=(a[0]-m+1)/c,C=(d-u+1)/c;if(A<=0||C<=0)throw new ae;const R=c/2;u+=R,m+=R;const D=new He(A,C);for(let k=0;k<C;k++){const F=u+k*c;for(let V=0;V<A;V++)t.get(m+V*c,F)&&D.set(V,k)}return D}static moduleSize(t,i){const a=i.getWidth();let c=t[0];const u=t[1];for(;c<a&&i.get(c,u);)c++;if(c===a)throw new ae;const d=c-t[0];if(d===0)throw new ae;return d}}Fi.NO_POINTS=[];class ss extends Se{constructor(t=500){super(new Fi,t)}}var Hr;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(Hr||(Hr={}));class at{constructor(t,i,a){this.value=t,this.stringValue=i,this.bits=a,at.FOR_BITS.set(a,this),at.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return at.L;case"M":return at.M;case"Q":return at.Q;case"H":return at.H;default:throw new N(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof at))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=at.FOR_BITS.size)throw new O;return at.FOR_BITS.get(t)}}at.FOR_BITS=new Map,at.FOR_VALUE=new Map,at.L=new at(Hr.L,"L",1),at.M=new at(Hr.M,"M",0),at.Q=new at(Hr.Q,"Q",3),at.H=new at(Hr.H,"H",2);class gn{constructor(t){this.errorCorrectionLevel=at.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return Q.bitCount(t^i)}static decodeFormatInformation(t,i){const a=gn.doDecodeFormatInformation(t,i);return a!==null?a:gn.doDecodeFormatInformation(t^gn.FORMAT_INFO_MASK_QR,i^gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of gn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===t||d===i)return new gn(u[1]);let m=gn.numBitsDiffering(t,d);m<a&&(c=u[1],a=m),t!==i&&(m=gn.numBitsDiffering(i,d),m<a&&(c=u[1],a=m))}return a<=3?new gn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof gn))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}gn.FORMAT_INFO_MASK_QR=21522,gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Z{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const a of i)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class L{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Le{constructor(t,i,...a){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const m of d)c+=m.getCount()*(m.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new W;try{return this.getVersionForNumber((t-17)/4)}catch{throw new W}}static getVersionForNumber(t){if(t<1||t>40)throw new O;return Le.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<Le.VERSION_DECODE_INFO.length;c++){const u=Le.VERSION_DECODE_INFO[c];if(u===t)return Le.getVersionForNumber(c+7);const d=gn.numBitsDiffering(t,u);d<i&&(a=c+7,i=d)}return i<=3?Le.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new He(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||i.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}Le.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Le.VERSIONS=[new Le(1,new Int32Array(0),new Z(7,new L(1,19)),new Z(10,new L(1,16)),new Z(13,new L(1,13)),new Z(17,new L(1,9))),new Le(2,Int32Array.from([6,18]),new Z(10,new L(1,34)),new Z(16,new L(1,28)),new Z(22,new L(1,22)),new Z(28,new L(1,16))),new Le(3,Int32Array.from([6,22]),new Z(15,new L(1,55)),new Z(26,new L(1,44)),new Z(18,new L(2,17)),new Z(22,new L(2,13))),new Le(4,Int32Array.from([6,26]),new Z(20,new L(1,80)),new Z(18,new L(2,32)),new Z(26,new L(2,24)),new Z(16,new L(4,9))),new Le(5,Int32Array.from([6,30]),new Z(26,new L(1,108)),new Z(24,new L(2,43)),new Z(18,new L(2,15),new L(2,16)),new Z(22,new L(2,11),new L(2,12))),new Le(6,Int32Array.from([6,34]),new Z(18,new L(2,68)),new Z(16,new L(4,27)),new Z(24,new L(4,19)),new Z(28,new L(4,15))),new Le(7,Int32Array.from([6,22,38]),new Z(20,new L(2,78)),new Z(18,new L(4,31)),new Z(18,new L(2,14),new L(4,15)),new Z(26,new L(4,13),new L(1,14))),new Le(8,Int32Array.from([6,24,42]),new Z(24,new L(2,97)),new Z(22,new L(2,38),new L(2,39)),new Z(22,new L(4,18),new L(2,19)),new Z(26,new L(4,14),new L(2,15))),new Le(9,Int32Array.from([6,26,46]),new Z(30,new L(2,116)),new Z(22,new L(3,36),new L(2,37)),new Z(20,new L(4,16),new L(4,17)),new Z(24,new L(4,12),new L(4,13))),new Le(10,Int32Array.from([6,28,50]),new Z(18,new L(2,68),new L(2,69)),new Z(26,new L(4,43),new L(1,44)),new Z(24,new L(6,19),new L(2,20)),new Z(28,new L(6,15),new L(2,16))),new Le(11,Int32Array.from([6,30,54]),new Z(20,new L(4,81)),new Z(30,new L(1,50),new L(4,51)),new Z(28,new L(4,22),new L(4,23)),new Z(24,new L(3,12),new L(8,13))),new Le(12,Int32Array.from([6,32,58]),new Z(24,new L(2,92),new L(2,93)),new Z(22,new L(6,36),new L(2,37)),new Z(26,new L(4,20),new L(6,21)),new Z(28,new L(7,14),new L(4,15))),new Le(13,Int32Array.from([6,34,62]),new Z(26,new L(4,107)),new Z(22,new L(8,37),new L(1,38)),new Z(24,new L(8,20),new L(4,21)),new Z(22,new L(12,11),new L(4,12))),new Le(14,Int32Array.from([6,26,46,66]),new Z(30,new L(3,115),new L(1,116)),new Z(24,new L(4,40),new L(5,41)),new Z(20,new L(11,16),new L(5,17)),new Z(24,new L(11,12),new L(5,13))),new Le(15,Int32Array.from([6,26,48,70]),new Z(22,new L(5,87),new L(1,88)),new Z(24,new L(5,41),new L(5,42)),new Z(30,new L(5,24),new L(7,25)),new Z(24,new L(11,12),new L(7,13))),new Le(16,Int32Array.from([6,26,50,74]),new Z(24,new L(5,98),new L(1,99)),new Z(28,new L(7,45),new L(3,46)),new Z(24,new L(15,19),new L(2,20)),new Z(30,new L(3,15),new L(13,16))),new Le(17,Int32Array.from([6,30,54,78]),new Z(28,new L(1,107),new L(5,108)),new Z(28,new L(10,46),new L(1,47)),new Z(28,new L(1,22),new L(15,23)),new Z(28,new L(2,14),new L(17,15))),new Le(18,Int32Array.from([6,30,56,82]),new Z(30,new L(5,120),new L(1,121)),new Z(26,new L(9,43),new L(4,44)),new Z(28,new L(17,22),new L(1,23)),new Z(28,new L(2,14),new L(19,15))),new Le(19,Int32Array.from([6,30,58,86]),new Z(28,new L(3,113),new L(4,114)),new Z(26,new L(3,44),new L(11,45)),new Z(26,new L(17,21),new L(4,22)),new Z(26,new L(9,13),new L(16,14))),new Le(20,Int32Array.from([6,34,62,90]),new Z(28,new L(3,107),new L(5,108)),new Z(26,new L(3,41),new L(13,42)),new Z(30,new L(15,24),new L(5,25)),new Z(28,new L(15,15),new L(10,16))),new Le(21,Int32Array.from([6,28,50,72,94]),new Z(28,new L(4,116),new L(4,117)),new Z(26,new L(17,42)),new Z(28,new L(17,22),new L(6,23)),new Z(30,new L(19,16),new L(6,17))),new Le(22,Int32Array.from([6,26,50,74,98]),new Z(28,new L(2,111),new L(7,112)),new Z(28,new L(17,46)),new Z(30,new L(7,24),new L(16,25)),new Z(24,new L(34,13))),new Le(23,Int32Array.from([6,30,54,78,102]),new Z(30,new L(4,121),new L(5,122)),new Z(28,new L(4,47),new L(14,48)),new Z(30,new L(11,24),new L(14,25)),new Z(30,new L(16,15),new L(14,16))),new Le(24,Int32Array.from([6,28,54,80,106]),new Z(30,new L(6,117),new L(4,118)),new Z(28,new L(6,45),new L(14,46)),new Z(30,new L(11,24),new L(16,25)),new Z(30,new L(30,16),new L(2,17))),new Le(25,Int32Array.from([6,32,58,84,110]),new Z(26,new L(8,106),new L(4,107)),new Z(28,new L(8,47),new L(13,48)),new Z(30,new L(7,24),new L(22,25)),new Z(30,new L(22,15),new L(13,16))),new Le(26,Int32Array.from([6,30,58,86,114]),new Z(28,new L(10,114),new L(2,115)),new Z(28,new L(19,46),new L(4,47)),new Z(28,new L(28,22),new L(6,23)),new Z(30,new L(33,16),new L(4,17))),new Le(27,Int32Array.from([6,34,62,90,118]),new Z(30,new L(8,122),new L(4,123)),new Z(28,new L(22,45),new L(3,46)),new Z(30,new L(8,23),new L(26,24)),new Z(30,new L(12,15),new L(28,16))),new Le(28,Int32Array.from([6,26,50,74,98,122]),new Z(30,new L(3,117),new L(10,118)),new Z(28,new L(3,45),new L(23,46)),new Z(30,new L(4,24),new L(31,25)),new Z(30,new L(11,15),new L(31,16))),new Le(29,Int32Array.from([6,30,54,78,102,126]),new Z(30,new L(7,116),new L(7,117)),new Z(28,new L(21,45),new L(7,46)),new Z(30,new L(1,23),new L(37,24)),new Z(30,new L(19,15),new L(26,16))),new Le(30,Int32Array.from([6,26,52,78,104,130]),new Z(30,new L(5,115),new L(10,116)),new Z(28,new L(19,47),new L(10,48)),new Z(30,new L(15,24),new L(25,25)),new Z(30,new L(23,15),new L(25,16))),new Le(31,Int32Array.from([6,30,56,82,108,134]),new Z(30,new L(13,115),new L(3,116)),new Z(28,new L(2,46),new L(29,47)),new Z(30,new L(42,24),new L(1,25)),new Z(30,new L(23,15),new L(28,16))),new Le(32,Int32Array.from([6,34,60,86,112,138]),new Z(30,new L(17,115)),new Z(28,new L(10,46),new L(23,47)),new Z(30,new L(10,24),new L(35,25)),new Z(30,new L(19,15),new L(35,16))),new Le(33,Int32Array.from([6,30,58,86,114,142]),new Z(30,new L(17,115),new L(1,116)),new Z(28,new L(14,46),new L(21,47)),new Z(30,new L(29,24),new L(19,25)),new Z(30,new L(11,15),new L(46,16))),new Le(34,Int32Array.from([6,34,62,90,118,146]),new Z(30,new L(13,115),new L(6,116)),new Z(28,new L(14,46),new L(23,47)),new Z(30,new L(44,24),new L(7,25)),new Z(30,new L(59,16),new L(1,17))),new Le(35,Int32Array.from([6,30,54,78,102,126,150]),new Z(30,new L(12,121),new L(7,122)),new Z(28,new L(12,47),new L(26,48)),new Z(30,new L(39,24),new L(14,25)),new Z(30,new L(22,15),new L(41,16))),new Le(36,Int32Array.from([6,24,50,76,102,128,154]),new Z(30,new L(6,121),new L(14,122)),new Z(28,new L(6,47),new L(34,48)),new Z(30,new L(46,24),new L(10,25)),new Z(30,new L(2,15),new L(64,16))),new Le(37,Int32Array.from([6,28,54,80,106,132,158]),new Z(30,new L(17,122),new L(4,123)),new Z(28,new L(29,46),new L(14,47)),new Z(30,new L(49,24),new L(10,25)),new Z(30,new L(24,15),new L(46,16))),new Le(38,Int32Array.from([6,32,58,84,110,136,162]),new Z(30,new L(4,122),new L(18,123)),new Z(28,new L(13,46),new L(32,47)),new Z(30,new L(48,24),new L(14,25)),new Z(30,new L(42,15),new L(32,16))),new Le(39,Int32Array.from([6,26,54,82,110,138,166]),new Z(30,new L(20,117),new L(4,118)),new Z(28,new L(40,47),new L(7,48)),new Z(30,new L(43,24),new L(22,25)),new Z(30,new L(10,15),new L(67,16))),new Le(40,Int32Array.from([6,30,58,86,114,142,170]),new Z(30,new L(19,118),new L(6,119)),new Z(28,new L(18,47),new L(31,48)),new Z(30,new L(34,24),new L(34,25)),new Z(30,new L(20,15),new L(61,16)))];var un;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(un||(un={}));class Xn{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let a=0;a<i;a++)for(let c=0;c<i;c++)this.isMasked(a,c)&&t.flip(c,a)}}Xn.values=new Map([[un.DATA_MASK_000,new Xn(un.DATA_MASK_000,(I,t)=>(I+t&1)===0)],[un.DATA_MASK_001,new Xn(un.DATA_MASK_001,(I,t)=>(I&1)===0)],[un.DATA_MASK_010,new Xn(un.DATA_MASK_010,(I,t)=>t%3===0)],[un.DATA_MASK_011,new Xn(un.DATA_MASK_011,(I,t)=>(I+t)%3===0)],[un.DATA_MASK_100,new Xn(un.DATA_MASK_100,(I,t)=>(Math.floor(I/2)+Math.floor(t/3)&1)===0)],[un.DATA_MASK_101,new Xn(un.DATA_MASK_101,(I,t)=>I*t%6===0)],[un.DATA_MASK_110,new Xn(un.DATA_MASK_110,(I,t)=>I*t%6<3)],[un.DATA_MASK_111,new Xn(un.DATA_MASK_111,(I,t)=>(I+t+I*t%3&1)===0)]]);class Vr{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new W;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const i=this.bitMatrix.getHeight();let a=0;const c=i-7;for(let u=i-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=i-8;u<i;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=gn.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return Le.getVersionForNumber(i);let a=0;const c=t-11;for(let d=5;d>=0;d--)for(let m=t-9;m>=c;m--)a=this.copyBit(m,d,a);let u=Le.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;a=0;for(let d=5;d>=0;d--)for(let m=t-9;m>=c;m--)a=this.copyBit(d,m,a);if(u=Le.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new W}copyBit(t,i,a){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),a=Xn.values.get(t.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=i.buildFunctionPattern();let d=!0;const m=new Uint8Array(i.getTotalCodewords());let y=0,A=0,C=0;for(let R=c-1;R>0;R-=2){R===6&&R--;for(let D=0;D<c;D++){const k=d?c-1-D:D;for(let F=0;F<2;F++)u.get(R-F,k)||(C++,A<<=1,this.bitMatrix.get(R-F,k)&&(A|=1),C===8&&(m[y++]=A,C=0,A=0))}d=!d}if(y!==i.getTotalCodewords())throw new W;return m}remask(){if(this.parsedFormatInfo===null)return;const t=Xn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,a=t.getWidth();i<a;i++)for(let c=i+1,u=t.getHeight();c<u;c++)t.get(i,c)!==t.get(c,i)&&(t.flip(c,i),t.flip(i,c))}}class sl{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,a){if(t.length!==i.getTotalCodewords())throw new O;const c=i.getECBlocksForLevel(a);let u=0;const d=c.getECBlocks();for(const F of d)u+=F.getCount();const m=new Array(u);let y=0;for(const F of d)for(let V=0;V<F.getCount();V++){const X=F.getDataCodewords(),le=c.getECCodewordsPerBlock()+X;m[y++]=new sl(X,new Uint8Array(le))}const A=m[0].codewords.length;let C=m.length-1;for(;C>=0&&m[C].codewords.length!==A;)C--;C++;const R=A-c.getECCodewordsPerBlock();let D=0;for(let F=0;F<R;F++)for(let V=0;V<y;V++)m[V].codewords[F]=t[D++];for(let F=C;F<y;F++)m[F].codewords[R]=t[D++];const k=m[0].codewords.length;for(let F=R;F<k;F++)for(let V=0;V<y;V++){const X=V<C?F:F+1;m[V].codewords[X]=t[D++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Wn;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(Wn||(Wn={}));class Ue{constructor(t,i,a,c){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=a,this.bits=c,Ue.FOR_BITS.set(c,this),Ue.FOR_VALUE.set(t,this)}static forBits(t){const i=Ue.FOR_BITS.get(t);if(i===void 0)throw new O;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let a;return i<=9?a=0:i<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Ue))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}Ue.FOR_BITS=new Map,Ue.FOR_VALUE=new Map,Ue.TERMINATOR=new Ue(Wn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ue.NUMERIC=new Ue(Wn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ue.ALPHANUMERIC=new Ue(Wn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ue.STRUCTURED_APPEND=new Ue(Wn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ue.BYTE=new Ue(Wn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ue.ECI=new Ue(Wn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ue.KANJI=new Ue(Wn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ue.FNC1_FIRST_POSITION=new Ue(Wn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ue.FNC1_SECOND_POSITION=new Ue(Wn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ue.HANZI=new Ue(Wn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class zt{static decode(t,i,a,c){const u=new hi(t);let d=new De;const m=new Array;let y=-1,A=-1;try{let C=null,R=!1,D;do{if(u.available()<4)D=Ue.TERMINATOR;else{const k=u.readBits(4);D=Ue.forBits(k)}switch(D){case Ue.TERMINATOR:break;case Ue.FNC1_FIRST_POSITION:case Ue.FNC1_SECOND_POSITION:R=!0;break;case Ue.STRUCTURED_APPEND:if(u.available()<16)throw new W;y=u.readBits(8),A=u.readBits(8);break;case Ue.ECI:const k=zt.parseECIValue(u);if(C=re.getCharacterSetECIByValue(k),C===null)throw new W;break;case Ue.HANZI:const F=u.readBits(4),V=u.readBits(D.getCharacterCountBits(i));F===zt.GB2312_SUBSET&&zt.decodeHanziSegment(u,d,V);break;default:const X=u.readBits(D.getCharacterCountBits(i));switch(D){case Ue.NUMERIC:zt.decodeNumericSegment(u,d,X);break;case Ue.ALPHANUMERIC:zt.decodeAlphanumericSegment(u,d,X,R);break;case Ue.BYTE:zt.decodeByteSegment(u,d,X,C,m,c);break;case Ue.KANJI:zt.decodeKanjiSegment(u,d,X);break;default:throw new W}break}}while(D!==Ue.TERMINATOR)}catch{throw new W}return new st(t,d.toString(),m.length===0?null:m,a===null?null:a.toString(),y,A)}static decodeHanziSegment(t,i,a){if(a*13>t.available())throw new W;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=t.readBits(13);let m=d/96<<8&4294967295|d%96;m<959?m+=41377:m+=42657,c[u]=m>>8&255,c[u+1]=m&255,u+=2,a--}try{i.append(We.decode(c,_e.GB2312))}catch(d){throw new W(d)}}static decodeKanjiSegment(t,i,a){if(a*13>t.available())throw new W;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=t.readBits(13);let m=d/192<<8&4294967295|d%192;m<7936?m+=33088:m+=49472,c[u]=m>>8,c[u+1]=m,u+=2,a--}try{i.append(We.decode(c,_e.SHIFT_JIS))}catch(d){throw new W(d)}}static decodeByteSegment(t,i,a,c,u,d){if(8*a>t.available())throw new W;const m=new Uint8Array(a);for(let A=0;A<a;A++)m[A]=t.readBits(8);let y;c===null?y=_e.guessEncoding(m,d):y=c.getName();try{i.append(We.decode(m,y))}catch(A){throw new W(A)}u.push(m)}static toAlphaNumericChar(t){if(t>=zt.ALPHANUMERIC_CHARS.length)throw new W;return zt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,a,c){const u=i.length();for(;a>1;){if(t.available()<11)throw new W;const d=t.readBits(11);i.append(zt.toAlphaNumericChar(Math.floor(d/45))),i.append(zt.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(t.available()<6)throw new W;i.append(zt.toAlphaNumericChar(t.readBits(6)))}if(c)for(let d=u;d<i.length();d++)i.charAt(d)==="%"&&(d<i.length()-1&&i.charAt(d+1)==="%"?i.deleteCharAt(d+1):i.setCharAt(d,""))}static decodeNumericSegment(t,i,a){for(;a>=3;){if(t.available()<10)throw new W;const c=t.readBits(10);if(c>=1e3)throw new W;i.append(zt.toAlphaNumericChar(Math.floor(c/100))),i.append(zt.toAlphaNumericChar(Math.floor(c/10)%10)),i.append(zt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(t.available()<7)throw new W;const c=t.readBits(7);if(c>=100)throw new W;i.append(zt.toAlphaNumericChar(Math.floor(c/10))),i.append(zt.toAlphaNumericChar(c%10))}else if(a===1){if(t.available()<4)throw new W;const c=t.readBits(4);if(c>=10)throw new W;i.append(zt.toAlphaNumericChar(c))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const a=t.readBits(8);return(i&63)<<8&4294967295|a}if((i&224)===192){const a=t.readBits(16);return(i&31)<<16&4294967295|a}throw new W}}zt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",zt.GB2312_SUBSET=1;class yo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class $c{constructor(){this.rsDecoder=new hr(lt.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(He.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const a=new Vr(t);let c=null;try{return this.decodeBitMatrixParser(a,i)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,i);return u.setOther(new yo(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(t,i){const a=t.readVersion(),c=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),d=sl.getDataBlocks(u,a,c);let m=0;for(const C of d)m+=C.getNumDataCodewords();const y=new Uint8Array(m);let A=0;for(const C of d){const R=C.getCodewords(),D=C.getNumDataCodewords();this.correctErrors(R,D);for(let k=0;k<D;k++)y[A++]=R[k]}return zt.decode(y,a,c,i)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new j}for(let c=0;c<i;c++)t[c]=a[c]}}class Gr extends Me{constructor(t,i,a){super(t,i),this.estimatedModuleSize=a}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const c=(this.getX()+i)/2,u=(this.getY()+t)/2,d=(this.estimatedModuleSize+a)/2;return new Gr(c,u,d)}}class ei{constructor(t,i,a,c,u,d,m){this.image=t,this.startX=i,this.startY=a,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,a=this.width,c=t+a,u=this.startY+i/2,d=new Int32Array(3),m=this.image;for(let y=0;y<i;y++){const A=u+((y&1)===0?Math.floor((y+1)/2):-Math.floor((y+1)/2));d[0]=0,d[1]=0,d[2]=0;let C=t;for(;C<c&&!m.get(C,A);)C++;let R=0;for(;C<c;){if(m.get(C,A))if(R===1)d[1]++;else if(R===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,A,C);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,R=1}else d[++R]++;else R===1&&R++,d[R]++;C++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,A,c);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,a=i/2;for(let c=0;c<3;c++)if(Math.abs(i-t[c])>=a)return!1;return!0}crossCheckVertical(t,i,a,c){const u=this.image,d=u.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let y=t;for(;y>=0&&u.get(i,y)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&!u.get(i,y)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(i,y)&&m[1]<=a;)m[1]++,y++;if(y===d||m[1]>a)return NaN;for(;y<d&&!u.get(i,y)&&m[2]<=a;)m[2]++,y++;if(m[2]>a)return NaN;const A=m[0]+m[1]+m[2];return 5*Math.abs(A-c)>=2*c?NaN:this.foundPatternCross(m)?ei.centerFromEnd(m,y):NaN}handlePossibleCenter(t,i,a){const c=t[0]+t[1]+t[2],u=ei.centerFromEnd(t,a),d=this.crossCheckVertical(i,u,2*t[1],c);if(!isNaN(d)){const m=(t[0]+t[1]+t[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(m,d,u))return A.combineEstimate(d,u,m);const y=new Gr(u,d,m);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Oa extends Me{constructor(t,i,a,c){super(t,i),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const c=this.count+1,u=(this.count*this.getX()+i)/c,d=(this.count*this.getY()+t)/c,m=(this.count*this.estimatedModuleSize+a)/c;return new Oa(u,d,m,c)}}class ll{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class qt{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(ve.TRY_HARDER)!==void 0,a=t!=null&&t.get(ve.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let m=Math.floor(3*u/(4*qt.MAX_MODULES));(m<qt.MIN_SKIP||i)&&(m=qt.MIN_SKIP);let y=!1;const A=new Int32Array(5);for(let R=m-1;R<u&&!y;R+=m){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let D=0;for(let k=0;k<d;k++)if(c.get(k,R))(D&1)===1&&D++,A[D]++;else if((D&1)===0)if(D===4)if(qt.foundPatternCross(A)){if(this.handlePossibleCenter(A,R,k,a)===!0)if(m=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>A[2]&&(R+=V-A[2]-m,k=d-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,D=3;continue}D=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,D=3;else A[++D]++;else A[D]++;qt.foundPatternCross(A)&&this.handlePossibleCenter(A,R,d,a)===!0&&(m=A[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Me.orderBestPatterns(C),new ll(C)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let u=0;u<5;u++){const d=t[u];if(d===0)return!1;i+=d}if(i<7)return!1;const a=i/7,c=a/2;return Math.abs(a-t[0])<c&&Math.abs(a-t[1])<c&&Math.abs(3*a-t[2])<3*c&&Math.abs(a-t[3])<c&&Math.abs(a-t[4])<c}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,a,c){const u=this.getCrossCheckStateCount();let d=0;const m=this.image;for(;t>=d&&i>=d&&m.get(i-d,t-d);)u[2]++,d++;if(t<d||i<d)return!1;for(;t>=d&&i>=d&&!m.get(i-d,t-d)&&u[1]<=a;)u[1]++,d++;if(t<d||i<d||u[1]>a)return!1;for(;t>=d&&i>=d&&m.get(i-d,t-d)&&u[0]<=a;)u[0]++,d++;if(u[0]>a)return!1;const y=m.getHeight(),A=m.getWidth();for(d=1;t+d<y&&i+d<A&&m.get(i+d,t+d);)u[2]++,d++;if(t+d>=y||i+d>=A)return!1;for(;t+d<y&&i+d<A&&!m.get(i+d,t+d)&&u[3]<a;)u[3]++,d++;if(t+d>=y||i+d>=A||u[3]>=a)return!1;for(;t+d<y&&i+d<A&&m.get(i+d,t+d)&&u[4]<a;)u[4]++,d++;if(u[4]>=a)return!1;const C=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(C-c)<2*c&&qt.foundPatternCross(u)}crossCheckVertical(t,i,a,c){const u=this.image,d=u.getHeight(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(i,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(i,y)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&u.get(i,y)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(i,y);)m[2]++,y++;if(y===d)return NaN;for(;y<d&&!u.get(i,y)&&m[3]<a;)m[3]++,y++;if(y===d||m[3]>=a)return NaN;for(;y<d&&u.get(i,y)&&m[4]<a;)m[4]++,y++;if(m[4]>=a)return NaN;const A=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(A-c)>=2*c?NaN:qt.foundPatternCross(m)?qt.centerFromEnd(m,y):NaN}crossCheckHorizontal(t,i,a,c){const u=this.image,d=u.getWidth(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(y,i);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(y,i)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&u.get(y,i)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(y,i);)m[2]++,y++;if(y===d)return NaN;for(;y<d&&!u.get(y,i)&&m[3]<a;)m[3]++,y++;if(y===d||m[3]>=a)return NaN;for(;y<d&&u.get(y,i)&&m[4]<a;)m[4]++,y++;if(m[4]>=a)return NaN;const A=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(A-c)>=c?NaN:qt.foundPatternCross(m)?qt.centerFromEnd(m,y):NaN}handlePossibleCenter(t,i,a,c){const u=t[0]+t[1]+t[2]+t[3]+t[4];let d=qt.centerFromEnd(t,a),m=this.crossCheckVertical(i,Math.floor(d),t[2],u);if(!isNaN(m)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(m),t[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(d),t[2],u)))){const y=u/7;let A=!1;const C=this.possibleCenters;for(let R=0,D=C.length;R<D;R++){const k=C[R];if(k.aboutEquals(y,m,d)){C[R]=k.combineEstimate(m,d,y),A=!0;break}}if(!A){const R=new Oa(d,m,y);C.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const a of this.possibleCenters)if(a.getCount()>=qt.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=qt.CENTER_QUORUM&&(t++,i+=d.getEstimatedModuleSize());if(t<3)return!1;const c=i/a;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ae;const i=this.possibleCenters;let a;if(t>3){let c=0,u=0;for(const y of this.possibleCenters){const A=y.getEstimatedModuleSize();c+=A,u+=A*A}a=c/t;let d=Math.sqrt(u/t-a*a);i.sort((y,A)=>{const C=Math.abs(A.getEstimatedModuleSize()-a),R=Math.abs(y.getEstimatedModuleSize()-a);return C<R?-1:C>R?1:0});const m=Math.max(.2*a,d);for(let y=0;y<i.length&&i.length>3;y++){const A=i[y];Math.abs(A.getEstimatedModuleSize()-a)>m&&(i.splice(y,1),y--)}}if(i.length>3){let c=0;for(const u of i)c+=u.getEstimatedModuleSize();a=c/i.length,i.sort((u,d)=>{if(d.getCount()===u.getCount()){const m=Math.abs(d.getEstimatedModuleSize()-a),y=Math.abs(u.getEstimatedModuleSize()-a);return m<y?1:m>y?-1:0}else return d.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}qt.CENTER_QUORUM=2,qt.MIN_SKIP=3,qt.MAX_MODULES=57;class Oi{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(ve.NEED_RESULT_POINT_CALLBACK);const a=new qt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const i=t.getTopLeft(),a=t.getTopRight(),c=t.getBottomLeft(),u=this.calculateModuleSize(i,a,c);if(u<1)throw new ae("No pattern found in proccess finder.");const d=Oi.computeDimension(i,a,c,u),m=Le.getProvisionalVersionForDimension(d),y=m.getDimensionForVersion()-7;let A=null;if(m.getAlignmentPatternCenters().length>0){const k=a.getX()-i.getX()+c.getX(),F=a.getY()-i.getY()+c.getY(),V=1-3/y,X=Math.floor(i.getX()+V*(k-i.getX())),le=Math.floor(i.getY()+V*(F-i.getY()));for(let be=4;be<=16;be<<=1)try{A=this.findAlignmentInRegion(u,X,le,be);break}catch(we){if(!(we instanceof ae))throw we}}const C=Oi.createTransform(i,a,c,A,d),R=Oi.sampleGrid(this.image,C,d);let D;return A===null?D=[c,i,a]:D=[c,i,a,A],new ns(R,D)}static createTransform(t,i,a,c,u){const d=u-3.5;let m,y,A,C;return c!==null?(m=c.getX(),y=c.getY(),A=d-3,C=A):(m=i.getX()-t.getX()+a.getX(),y=i.getY()-t.getY()+a.getY(),A=d,C=d),Jn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,A,C,3.5,d,t.getX(),t.getY(),i.getX(),i.getY(),m,y,a.getX(),a.getY())}static sampleGrid(t,i,a){return oi.getInstance().sampleGridWithTransform(t,a,a,i)}static computeDimension(t,i,a,c){const u=ot.round(Me.distance(t,i)/c),d=ot.round(Me.distance(t,a)/c);let m=Math.floor((u+d)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new ae("Dimensions could be not found.")}return m}calculateModuleSize(t,i,a){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,i){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,a,c){let u=this.sizeOfBlackWhiteBlackRun(t,i,a,c),d=1,m=t-(a-t);m<0?(d=t/(t-m),m=0):m>=this.image.getWidth()&&(d=(this.image.getWidth()-1-t)/(m-t),m=this.image.getWidth()-1);let y=Math.floor(i-(c-i)*d);return d=1,y<0?(d=i/(i-y),y=0):y>=this.image.getHeight()&&(d=(this.image.getHeight()-1-i)/(y-i),y=this.image.getHeight()-1),m=Math.floor(t+(m-t)*d),u+=this.sizeOfBlackWhiteBlackRun(t,i,m,y),u-1}sizeOfBlackWhiteBlackRun(t,i,a,c){const u=Math.abs(c-i)>Math.abs(a-t);if(u){let k=t;t=i,i=k,k=a,a=c,c=k}const d=Math.abs(a-t),m=Math.abs(c-i);let y=-d/2;const A=t<a?1:-1,C=i<c?1:-1;let R=0;const D=a+A;for(let k=t,F=i;k!==D;k+=A){const V=u?F:k,X=u?k:F;if(R===1===this.image.get(V,X)){if(R===2)return ot.distance(k,F,t,i);R++}if(y+=m,y>0){if(F===c)break;F+=C,y-=d}}return R===2?ot.distance(a+A,c,t,i):NaN}findAlignmentInRegion(t,i,a,c){const u=Math.floor(c*t),d=Math.max(0,i-u),m=Math.min(this.image.getWidth()-1,i+u);if(m-d<t*3)throw new ae("Alignment top exceeds estimated module size.");const y=Math.max(0,a-u),A=Math.min(this.image.getHeight()-1,a+u);if(A-y<t*3)throw new ae("Alignment bottom exceeds estimated module size.");return new ei(this.image,d,y,m-d,A-y,t,this.resultPointCallback).find()}}class Hi{constructor(){this.decoder=new $c}getDecoder(){return this.decoder}decode(t,i){let a,c;if(i!=null&&i.get(ve.PURE_BARCODE)!==void 0){const y=Hi.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(y,i),c=Hi.NO_POINTS}else{const y=new Oi(t.getBlackMatrix()).detect(i);a=this.decoder.decodeBitMatrix(y.getBits(),i),c=y.getPoints()}a.getOther()instanceof yo&&a.getOther().applyMirroredCorrection(c);const u=new Te(a.getText(),a.getRawBytes(),void 0,c,ye.QR_CODE,void 0),d=a.getByteSegments();d!==null&&u.putMetadata($e.BYTE_SEGMENTS,d);const m=a.getECLevel();return m!==null&&u.putMetadata($e.ERROR_CORRECTION_LEVEL,m),a.hasStructuredAppend()&&(u.putMetadata($e.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata($e.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i===null||a===null)throw new ae;const c=this.moduleSize(i,t);let u=i[1],d=a[1],m=i[0],y=a[0];if(m>=y||u>=d)throw new ae;if(d-u!==y-m&&(y=m+(d-u),y>=t.getWidth()))throw new ae;const A=Math.round((y-m+1)/c),C=Math.round((d-u+1)/c);if(A<=0||C<=0)throw new ae;if(C!==A)throw new ae;const R=Math.floor(c/2);u+=R,m+=R;const D=m+Math.floor((A-1)*c)-y;if(D>0){if(D>R)throw new ae;m-=D}const k=u+Math.floor((C-1)*c)-d;if(k>0){if(k>R)throw new ae;u-=k}const F=new He(A,C);for(let V=0;V<C;V++){const X=u+Math.floor(V*c);for(let le=0;le<A;le++)t.get(m+Math.floor(le*c),X)&&F.set(le,V)}return F}static moduleSize(t,i){const a=i.getHeight(),c=i.getWidth();let u=t[0],d=t[1],m=!0,y=0;for(;u<c&&d<a;){if(m!==i.get(u,d)){if(++y===5)break;m=!m}u++,d++}if(u===c||d===a)throw new ae;return(u-t[0])/7}}Hi.NO_POINTS=new Array;class Pe{PDF417Common(){}static getBitCountSum(t){return ot.sum(t)}static toIntArray(t){if(t==null||!t.length)return Pe.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let a=0;for(const c of t)i[a++]=c;return i}static getCodeword(t){const i=se.binarySearch(Pe.SYMBOL_TABLE,t&262143);return i<0?-1:(Pe.CODEWORD_TABLE[i]-1)%Pe.NUMBER_OF_CODEWORDS}}Pe.NUMBER_OF_CODEWORDS=929,Pe.MAX_CODEWORDS_IN_BARCODE=Pe.NUMBER_OF_CODEWORDS-1,Pe.MIN_ROWS_IN_BARCODE=3,Pe.MAX_ROWS_IN_BARCODE=90,Pe.MODULES_IN_CODEWORD=17,Pe.MODULES_IN_STOP_PATTERN=18,Pe.BARS_IN_MODULE=8,Pe.EMPTY_INT_ARRAY=new Int32Array([]),Pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class wo{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Ze{static detectMultiple(t,i,a){let c=t.getBlackMatrix(),u=Ze.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=Ze.detect(a,c)),new wo(c,u)}static detect(t,i){const a=new Array;let c=0,u=0,d=!1;for(;c<i.getHeight();){const m=Ze.findVertices(i,c,u);if(m[0]==null&&m[3]==null){if(!d)break;d=!1,u=0;for(const y of a)y[1]!=null&&(c=Math.trunc(Math.max(c,y[1].getY()))),y[3]!=null&&(c=Math.max(c,Math.trunc(y[3].getY())));c+=Ze.ROW_STEP;continue}if(d=!0,a.push(m),!t)break;m[2]!=null?(u=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(u=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return a}static findVertices(t,i,a){const c=t.getHeight(),u=t.getWidth(),d=new Array(8);return Ze.copyToResult(d,Ze.findRowsWithPattern(t,c,u,i,a,Ze.START_PATTERN),Ze.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),i=Math.trunc(d[4].getY())),Ze.copyToResult(d,Ze.findRowsWithPattern(t,c,u,i,a,Ze.STOP_PATTERN),Ze.INDEXES_STOP_PATTERN),d}static copyToResult(t,i,a){for(let c=0;c<a.length;c++)t[a[c]]=i[c]}static findRowsWithPattern(t,i,a,c,u,d){const m=new Array(4);let y=!1;const A=new Int32Array(d.length);for(;c<i;c+=Ze.ROW_STEP){let R=Ze.findGuardPattern(t,u,c,a,!1,d,A);if(R!=null){for(;c>0;){const D=Ze.findGuardPattern(t,u,--c,a,!1,d,A);if(D!=null)R=D;else{c++;break}}m[0]=new Me(R[0],c),m[1]=new Me(R[1],c),y=!0;break}}let C=c+1;if(y){let R=0,D=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;C<i;C++){const k=Ze.findGuardPattern(t,D[0],C,a,!1,d,A);if(k!=null&&Math.abs(D[0]-k[0])<Ze.MAX_PATTERN_DRIFT&&Math.abs(D[1]-k[1])<Ze.MAX_PATTERN_DRIFT)D=k,R=0;else{if(R>Ze.SKIPPED_ROW_COUNT_MAX)break;R++}}C-=R+1,m[2]=new Me(D[0],C),m[3]=new Me(D[1],C)}return C-c<Ze.BARCODE_MIN_HEIGHT&&se.fill(m,null),m}static findGuardPattern(t,i,a,c,u,d,m){se.fillWithin(m,0,m.length,0);let y=i,A=0;for(;t.get(y,a)&&y>0&&A++<Ze.MAX_PIXEL_DRIFT;)y--;let C=y,R=0,D=d.length;for(let k=u;C<c;C++)if(t.get(C,a)!==k)m[R]++;else{if(R===D-1){if(Ze.patternMatchVariance(m,d,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return new Int32Array([y,C]);y+=m[0]+m[1],z.arraycopy(m,2,m,0,R-1),m[R-1]=0,m[R]=0,R--}else R++;m[R]=1,k=!k}return R===D-1&&Ze.patternMatchVariance(m,d,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE?new Int32Array([y,C-1]):null}static patternMatchVariance(t,i,a){let c=t.length,u=0,d=0;for(let A=0;A<c;A++)u+=t[A],d+=i[A];if(u<d)return 1/0;let m=u/d;a*=m;let y=0;for(let A=0;A<c;A++){let C=t[A],R=i[A]*m,D=C>R?C-R:R-C;if(D>a)return 1/0;y+=D}return y/u}}Ze.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ze.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ze.MAX_AVG_VARIANCE=.42,Ze.MAX_INDIVIDUAL_VARIANCE=.8,Ze.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ze.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ze.MAX_PIXEL_DRIFT=3,Ze.MAX_PATTERN_DRIFT=5,Ze.SKIPPED_ROW_COUNT_MAX=25,Ze.ROW_STEP=5,Ze.BARCODE_MIN_HEIGHT=10;class Pt{constructor(t,i){if(i.length===0)throw new O;this.field=t;let a=i.length;if(a>1&&i[0]===0){let c=1;for(;c<a&&i[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),z.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let i=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)i=this.field.add(this.field.multiply(t,i),this.coefficients[c]);return i}add(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){let d=i;i=a,a=d}let c=new Int32Array(a.length),u=a.length-i.length;z.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=this.field.add(i[d-u],a[d]);return new Pt(this.field,c)}subtract(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Pt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Pt(this.field,new Int32Array([0]));let i=this.coefficients,a=i.length,c=t.coefficients,u=c.length,d=new Int32Array(a+u-1);for(let m=0;m<a;m++){let y=i[m];for(let A=0;A<u;A++)d[m+A]=this.field.add(d[m+A],this.field.multiply(y,c[A]))}return new Pt(this.field,d)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let a=0;a<t;a++)i[a]=this.field.subtract(0,this.coefficients[a]);return new Pt(this.field,i)}multiplyScalar(t){if(t===0)return new Pt(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,a=new Int32Array(i);for(let c=0;c<i;c++)a[c]=this.field.multiply(this.coefficients[c],t);return new Pt(this.field,a)}multiplyByMonomial(t,i){if(t<0)throw new O;if(i===0)return new Pt(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+t);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],i);return new Pt(this.field,c)}toString(){let t=new De;for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(i===0||a!==1)&&t.append(a),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class ol{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new O;return this.logTable[t]}inverse(t){if(t===0)throw new Kn;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class fr extends ol{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let c=0;c<t;c++)this.expTable[c]=a,a=a*i%t;for(let c=0;c<t-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Pt(this,new Int32Array([0])),this.one=new Pt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new O;if(i===0)return this.zero;let a=new Int32Array(t+1);return a[0]=i,new Pt(this,a)}}fr.PDF417_GF=new fr(Pe.NUMBER_OF_CODEWORDS,3);class Vi{constructor(){this.field=fr.PDF417_GF}decode(t,i,a){let c=new Pt(this.field,t),u=new Int32Array(i),d=!1;for(let F=i;F>0;F--){let V=c.evaluateAt(this.field.exp(F));u[i-F]=V,V!==0&&(d=!0)}if(!d)return 0;let m=this.field.getOne();if(a!=null)for(const F of a){let V=this.field.exp(t.length-1-F),X=new Pt(this.field,new Int32Array([this.field.subtract(0,V),1]));m=m.multiply(X)}let y=new Pt(this.field,u),A=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),y,i),C=A[0],R=A[1],D=this.findErrorLocations(C),k=this.findErrorMagnitudes(R,C,D);for(let F=0;F<D.length;F++){let V=t.length-1-this.field.log(D[F]);if(V<0)throw j.getChecksumInstance();t[V]=this.field.subtract(t[V],k[F])}return D.length}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){let D=t;t=i,i=D}let c=t,u=i,d=this.field.getZero(),m=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let D=c,k=d;if(c=u,d=m,c.isZero())throw j.getChecksumInstance();u=D;let F=this.field.getZero(),V=c.getCoefficient(c.getDegree()),X=this.field.inverse(V);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let le=u.getDegree()-c.getDegree(),be=this.field.multiply(u.getCoefficient(u.getDegree()),X);F=F.add(this.field.buildMonomial(le,be)),u=u.subtract(c.multiplyByMonomial(le,be))}m=F.multiply(d).subtract(k).negative()}let y=m.getCoefficient(0);if(y===0)throw j.getChecksumInstance();let A=this.field.inverse(y),C=m.multiply(A),R=u.multiply(A);return[C,R]}findErrorLocations(t){let i=t.getDegree(),a=new Int32Array(i),c=0;for(let u=1;u<this.field.getSize()&&c<i;u++)t.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==i)throw j.getChecksumInstance();return a}findErrorMagnitudes(t,i,a){let c=i.getDegree(),u=new Int32Array(c);for(let A=1;A<=c;A++)u[c-A]=this.field.multiply(A,i.getCoefficient(A));let d=new Pt(this.field,u),m=a.length,y=new Int32Array(m);for(let A=0;A<m;A++){let C=this.field.inverse(a[A]),R=this.field.subtract(0,t.evaluateAt(C)),D=this.field.inverse(d.evaluateAt(C));y[A]=this.field.multiply(R,D)}return y}}class Gi{constructor(t,i,a,c,u){t instanceof Gi?this.constructor_2(t):this.constructor_1(t,i,a,c,u)}constructor_1(t,i,a,c,u){const d=i==null||a==null,m=c==null||u==null;if(d&&m)throw new ae;d?(i=new Me(0,c.getY()),a=new Me(0,u.getY())):m&&(c=new Me(t.getWidth()-1,i.getY()),u=new Me(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=i,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new Gi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,a){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,m=this.bottomRight;if(t>0){let y=a?this.topLeft:this.topRight,A=Math.trunc(y.getY()-t);A<0&&(A=0);let C=new Me(y.getX(),A);a?c=C:d=C}if(i>0){let y=a?this.bottomLeft:this.bottomRight,A=Math.trunc(y.getY()+i);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let C=new Me(y.getX(),A);a?u=C:m=C}return new Gi(this.image,c,u,d,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ls{constructor(t,i,a,c){this.columnCount=t,this.errorCorrectionLevel=c,this.rowCountUpperPart=i,this.rowCountLowerPart=a,this.rowCount=i+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Yr{constructor(){this.buffer=""}static form(t,i){let a=-1;function c(d,m,y,A,C,R){if(d==="%%")return"%";if(i[++a]===void 0)return;d=A?parseInt(A.substr(1)):void 0;let D=C?parseInt(C.substr(1)):void 0,k;switch(R){case"s":k=i[a];break;case"c":k=i[a][0];break;case"f":k=parseFloat(i[a]).toFixed(d);break;case"p":k=parseFloat(i[a]).toPrecision(d);break;case"e":k=parseFloat(i[a]).toExponential(d);break;case"x":k=parseInt(i[a]).toString(D||16);break;case"d":k=parseFloat(parseInt(i[a],D||10).toPrecision(d)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(D);let F=parseInt(y),V=y&&y[0]+""=="0"?"0":" ";for(;k.length<F;)k=m!==void 0?k+V:V+k;return k}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,c)}format(t,...i){this.buffer+=Yr.form(t,i)}toString(){return this.buffer}}class nr{constructor(t){this.boundingBox=new Gi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let a=1;a<nr.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(t)-a;if(c>=0&&(i=this.codewords[c],i!=null)||(c=this.imageRowToCodewordIndex(t)+a,c<this.codewords.length&&(i=this.codewords[c],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Yr;let i=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}return t.toString()}}nr.MAX_NEARBY_DISTANCE=5;class ir{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>t?(t=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===t&&i.push(u.getKey())}return Pe.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class cl extends nr{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=-1,A=1,C=0;for(let R=d;R<m;R++){if(i[R]==null)continue;let D=i[R],k=D.getRowNumber()-y;if(k===0)C++;else if(k===1)A=Math.max(A,C),C=1,y=D.getRowNumber();else if(k<0||D.getRowNumber()>=t.getRowCount()||k>R)i[R]=null;else{let F;A>2?F=(A-2)*k:F=k;let V=F>=R;for(let X=1;X<=F&&!V;X++)V=i[R-X]!=null;V?i[R]=null:(y=D.getRowNumber(),C=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=i.length)continue;i[c]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),y=-1;for(let A=u;A<d;A++){if(m[A]==null)continue;let C=m[A];C.setRowNumberAsRowIndicatorColumn();let R=C.getRowNumber()-y;R===0||(R===1?y=C.getRowNumber():C.getRowNumber()>=t.getRowCount()?m[A]=null:y=C.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new ir,a=new ir,c=new ir,u=new ir;for(let m of t){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let y=m.getValue()%30,A=m.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:a.setValue(y*3+1);break;case 1:u.setValue(y/3),c.setValue(y%3);break;case 2:i.setValue(y+1);break}}if(i.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<Pe.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>Pe.MAX_ROWS_IN_BARCODE)return null;let d=new ls(i.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,d),d}removeIncorrectCodewords(t,i){for(let a=0;a<t.length;a++){let c=t[a];if(t[a]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>i.getRowCount()){t[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(t[a]=null);break;case 2:u+1!==i.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class mn{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Pe.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let a=this.detectionResultColumns[i].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(i,c,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&i[a]!=null&&t[a].getRowNumber()===i[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(t[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let c=i[a].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let m=this.detectionResultColumns[d].getCodewords()[a];m!=null&&(u=mn.adjustRowNumberIfValid(c,u,m),m.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let c=i[a].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let m=this.detectionResultColumns[d].getCodewords()[a];m!=null&&(u=mn.adjustRowNumberIfValid(c,u,m),m.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,a){if(!this.detectionResultColumns[t-1])return;let c=a[i],u=this.detectionResultColumns[t-1].getCodewords(),d=u;this.detectionResultColumns[t+1]!=null&&(d=this.detectionResultColumns[t+1].getCodewords());let m=new Array(14);m[2]=u[i],m[3]=d[i],i>0&&(m[0]=a[i-1],m[4]=u[i-1],m[5]=d[i-1]),i>1&&(m[8]=a[i-2],m[10]=u[i-2],m[11]=d[i-2]),i<a.length-1&&(m[1]=a[i+1],m[6]=u[i+1],m[7]=d[i+1]),i<a.length-2&&(m[9]=a[i+2],m[12]=u[i+2],m[13]=d[i+2]);for(let y of m)if(mn.adjustRowNumber(c,y))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Yr;for(let a=0;a<t.getCodewords().length;a++){i.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class fi{constructor(t,i,a,c){this.rowNumber=fi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==fi.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}fi.BARCODE_ROW_UNKNOWN=-1;class En{static initialize(){for(let t=0;t<Pe.SYMBOL_TABLE.length;t++){let i=Pe.SYMBOL_TABLE[t],a=i&1;for(let c=0;c<Pe.BARS_IN_MODULE;c++){let u=0;for(;(i&1)===a;)u+=1,i>>=1;a=i&1,En.RATIOS_TABLE[t]||(En.RATIOS_TABLE[t]=new Array(Pe.BARS_IN_MODULE)),En.RATIOS_TABLE[t][Pe.BARS_IN_MODULE-c-1]=Math.fround(u/Pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=En.getDecodedCodewordValue(En.sampleBitCounts(t));return i!==-1?i:En.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=ot.sum(t),a=new Int32Array(Pe.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<Pe.MODULES_IN_CODEWORD;d++){let m=i/(2*Pe.MODULES_IN_CODEWORD)+d*i/Pe.MODULES_IN_CODEWORD;u+t[c]<=m&&(u+=t[c],c++),a[c]++}return a}static getDecodedCodewordValue(t){let i=En.getBitValue(t);return Pe.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let a=0;a<t.length;a++)for(let c=0;c<t[a];c++)i=i<<1|(a%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=ot.sum(t),a=new Array(Pe.BARS_IN_MODULE);if(i>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(t[d]/i);let c=jr.MAX_VALUE,u=-1;this.bSymbolTableReady||En.initialize();for(let d=0;d<En.RATIOS_TABLE.length;d++){let m=0,y=En.RATIOS_TABLE[d];for(let A=0;A<Pe.BARS_IN_MODULE;A++){let C=Math.fround(y[A]-a[A]);if(m+=Math.fround(C*C),m>=c)break}m<c&&(c=m,u=Pe.SYMBOL_TABLE[d])}return u}}En.bSymbolTableReady=!1,En.RATIOS_TABLE=new Array(Pe.SYMBOL_TABLE.length).map(I=>new Array(Pe.BARS_IN_MODULE));class qr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class vo{static parseLong(t,i=void 0){return parseInt(t,i)}}class os extends v{}os.kind="NullPointerException";class ul{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,a){if(t==null)throw new os;if(i<0||i>t.length||a<0||i+a>t.length||i+a<0)throw new q;if(a===0)return;for(let c=0;c<a;c++)this.write(t[i+c])}flush(){}close(){}}class Ia extends v{}class cs extends ul{constructor(t=32){if(super(),this.count=0,t<0)throw new O("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Ia;a=Q.MAX_VALUE}this.buf=se.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,a){if(i<0||i>t.length||a<0||i+a-t.length>0)throw new q;this.ensureCapacity(this.count+a),z.arraycopy(t,i,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return se.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var St;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(St||(St={}));function bo(){if(typeof window<"u")return window.BigInt||null;if(typeof Dc<"u")return Dc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let us;function rr(I){if(typeof us>"u"&&(us=bo()),us===null)throw new Error("BigInt is not supported!");return us(I)}function hl(){let I=[];I[0]=rr(1);let t=rr(900);I[1]=t;for(let i=2;i<16;i++)I[i]=I[i-1]*t;return I}class oe{static decode(t,i){let a=new De(""),c=re.ISO8859_1;a.enableDecoding(c);let u=1,d=t[u++],m=new qr;for(;u<t[0];){switch(d){case oe.TEXT_COMPACTION_MODE_LATCH:u=oe.textCompaction(t,u,a);break;case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:u=oe.byteCompaction(d,t,c,u,a);break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[u++]);break;case oe.NUMERIC_COMPACTION_MODE_LATCH:u=oe.numericCompaction(t,u,a);break;case oe.ECI_CHARSET:re.getCharacterSetECIByValue(t[u++]);break;case oe.ECI_GENERAL_PURPOSE:u+=2;break;case oe.ECI_USER_DEFINED:u++;break;case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=oe.decodeMacroBlock(t,u,m);break;case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:throw new W;default:u--,u=oe.textCompaction(t,u,a);break}if(u<t.length)d=t[u++];else throw W.getFormatInstance()}if(a.length()===0)throw W.getFormatInstance();let y=new st(null,a.toString(),null,i);return y.setOther(m),y}static decodeMacroBlock(t,i,a){if(i+oe.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw W.getFormatInstance();let c=new Int32Array(oe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<oe.NUMBER_OF_SEQUENCE_CODEWORDS;m++,i++)c[m]=t[i];a.setSegmentIndex(Q.parseInt(oe.decodeBase900toBase10(c,oe.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new De;i=oe.textCompaction(t,i,u),a.setFileId(u.toString());let d=-1;for(t[i]===oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=i+1);i<t[0];)switch(t[i]){case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new De;i=oe.textCompaction(t,i+1,m),a.setFileName(m.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new De;i=oe.textCompaction(t,i+1,y),a.setSender(y.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new De;i=oe.textCompaction(t,i+1,A),a.setAddressee(A.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new De;i=oe.numericCompaction(t,i+1,C),a.setSegmentCount(Q.parseInt(C.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let R=new De;i=oe.numericCompaction(t,i+1,R),a.setTimestamp(vo.parseLong(R.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new De;i=oe.numericCompaction(t,i+1,D),a.setChecksum(Q.parseInt(D.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let k=new De;i=oe.numericCompaction(t,i+1,k),a.setFileSize(vo.parseLong(k.toString()));break;default:throw W.getFormatInstance()}break;case oe.MACRO_PDF417_TERMINATOR:i++,a.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(d!==-1){let m=i-d;a.isLastSegment()&&m--,a.setOptionalData(se.copyOfRange(t,d,d+m))}return i}static textCompaction(t,i,a){let c=new Int32Array((t[0]-i)*2),u=new Int32Array((t[0]-i)*2),d=0,m=!1;for(;i<t[0]&&!m;){let y=t[i++];if(y<oe.TEXT_COMPACTION_MODE_LATCH)c[d]=y/30,c[d+1]=y%30,d+=2;else switch(y){case oe.TEXT_COMPACTION_MODE_LATCH:c[d++]=oe.TEXT_COMPACTION_MODE_LATCH;break;case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:i--,m=!0;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=t[i++],u[d]=y,d++;break}}return oe.decodeTextCompaction(c,u,d,a),i}static decodeTextCompaction(t,i,a,c){let u=St.ALPHA,d=St.ALPHA,m=0;for(;m<a;){let y=t[m],A="";switch(u){case St.ALPHA:if(y<26)A=String.fromCharCode(65+y);else switch(y){case 26:A=" ";break;case oe.LL:u=St.LOWER;break;case oe.ML:u=St.MIXED;break;case oe.PS:d=u,u=St.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case oe.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.LOWER:if(y<26)A=String.fromCharCode(97+y);else switch(y){case 26:A=" ";break;case oe.AS:d=u,u=St.ALPHA_SHIFT;break;case oe.ML:u=St.MIXED;break;case oe.PS:d=u,u=St.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case oe.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.MIXED:if(y<oe.PL)A=oe.MIXED_CHARS[y];else switch(y){case oe.PL:u=St.PUNCT;break;case 26:A=" ";break;case oe.LL:u=St.LOWER;break;case oe.AL:u=St.ALPHA;break;case oe.PS:d=u,u=St.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case oe.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.PUNCT:if(y<oe.PAL)A=oe.PUNCT_CHARS[y];else switch(y){case oe.PAL:u=St.ALPHA;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case oe.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.ALPHA_SHIFT:if(u=d,y<26)A=String.fromCharCode(65+y);else switch(y){case 26:A=" ";break;case oe.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.PUNCT_SHIFT:if(u=d,y<oe.PAL)A=oe.PUNCT_CHARS[y];else switch(y){case oe.PAL:u=St.ALPHA;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case oe.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break}A!==""&&c.append(A),m++}}static byteCompaction(t,i,a,c,u){let d=new cs,m=0,y=0,A=!1;switch(t){case oe.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),R=i[c++];for(;c<i[0]&&!A;)switch(C[m++]=R,y=900*y+R,R=i[c++],R){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:c--,A=!0;break;default:if(m%5===0&&m>0){for(let D=0;D<6;++D)d.write(Number(rr(y)>>rr(8*(5-D))));y=0,m=0}break}c===i[0]&&R<oe.TEXT_COMPACTION_MODE_LATCH&&(C[m++]=R);for(let D=0;D<m;D++)d.write(C[D]);break;case oe.BYTE_COMPACTION_MODE_LATCH_6:for(;c<i[0]&&!A;){let D=i[c++];if(D<oe.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+D;else switch(D){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:c--,A=!0;break}if(m%5===0&&m>0){for(let k=0;k<6;++k)d.write(Number(rr(y)>>rr(8*(5-k))));y=0,m=0}}break}return u.append(We.decode(d.toByteArray(),a)),c}static numericCompaction(t,i,a){let c=0,u=!1,d=new Int32Array(oe.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!u;){let m=t[i++];if(i===t[0]&&(u=!0),m<oe.TEXT_COMPACTION_MODE_LATCH)d[c]=m,c++;else switch(m){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(c%oe.MAX_NUMERIC_CODEWORDS===0||m===oe.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(oe.decodeBase900toBase10(d,c)),c=0)}return i}static decodeBase900toBase10(t,i){let a=rr(0);for(let u=0;u<i;u++)a+=oe.EXP900[i-u-1]*rr(t[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new W;return c.substring(1)}}oe.TEXT_COMPACTION_MODE_LATCH=900,oe.BYTE_COMPACTION_MODE_LATCH=901,oe.NUMERIC_COMPACTION_MODE_LATCH=902,oe.BYTE_COMPACTION_MODE_LATCH_6=924,oe.ECI_USER_DEFINED=925,oe.ECI_GENERAL_PURPOSE=926,oe.ECI_CHARSET=927,oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,oe.MACRO_PDF417_TERMINATOR=922,oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,oe.MAX_NUMERIC_CODEWORDS=15,oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,oe.PL=25,oe.LL=27,oe.AS=27,oe.ML=28,oe.AL=28,oe.PS=29,oe.PAL=29,oe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,oe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",oe.EXP900=bo()?hl():[],oe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class nt{constructor(){}static decode(t,i,a,c,u,d,m){let y=new Gi(t,i,a,c,u),A=null,C=null,R;for(let F=!0;;F=!1){if(i!=null&&(A=nt.getRowIndicatorColumn(t,y,i,!0,d,m)),c!=null&&(C=nt.getRowIndicatorColumn(t,y,c,!1,d,m)),R=nt.merge(A,C),R==null)throw ae.getNotFoundInstance();let V=R.getBoundingBox();if(F&&V!=null&&(V.getMinY()<y.getMinY()||V.getMaxY()>y.getMaxY()))y=V;else break}R.setBoundingBox(y);let D=R.getBarcodeColumnCount()+1;R.setDetectionResultColumn(0,A),R.setDetectionResultColumn(D,C);let k=A!=null;for(let F=1;F<=D;F++){let V=k?F:D-F;if(R.getDetectionResultColumn(V)!==void 0)continue;let X;V===0||V===D?X=new cl(y,V===0):X=new nr(y),R.setDetectionResultColumn(V,X);let le=-1,be=le;for(let we=y.getMinY();we<=y.getMaxY();we++){if(le=nt.getStartColumn(R,V,we,k),le<0||le>y.getMaxX()){if(be===-1)continue;le=be}let xe=nt.detectCodeword(t,y.getMinX(),y.getMaxX(),k,le,we,d,m);xe!=null&&(X.setCodeword(we,xe),be=le,d=Math.min(d,xe.getWidth()),m=Math.max(m,xe.getWidth()))}}return nt.createDecoderResult(R)}static merge(t,i){if(t==null&&i==null)return null;let a=nt.getBarcodeMetadata(t,i);if(a==null)return null;let c=Gi.merge(nt.adjustBoundingBox(t),nt.adjustBoundingBox(i));return new mn(a,c)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let a=nt.getMax(i),c=0;for(let m of i)if(c+=a-m,m>0)break;let u=t.getCodewords();for(let m=0;c>0&&u[m]==null;m++)c--;let d=0;for(let m=i.length-1;m>=0&&(d+=a-i[m],!(i[m]>0));m--);for(let m=u.length-1;d>0&&u[m]==null;m--)d--;return t.getBoundingBox().addMissingRows(c,d,t.isLeft())}static getMax(t){let i=-1;for(let a of t)i=Math.max(i,a);return i}static getBarcodeMetadata(t,i){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let c;return i==null||(c=i.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(t,i,a,c,u,d){let m=new cl(i,c);for(let y=0;y<2;y++){let A=y===0?1:-1,C=Math.trunc(Math.trunc(a.getX()));for(let R=Math.trunc(Math.trunc(a.getY()));R<=i.getMaxY()&&R>=i.getMinY();R+=A){let D=nt.detectCodeword(t,0,t.getWidth(),c,C,R,u,d);D!=null&&(m.setCodeword(R,D),c?C=D.getStartX():C=D.getEndX())}}return m}static adjustCodewordCount(t,i){let a=i[0][1],c=a.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-nt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(c.length===0){if(u<1||u>Pe.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(t){let i=nt.createBarcodeMatrix(t);nt.adjustCodewordCount(t,i);let a=new Array,c=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],d=new Array;for(let y=0;y<t.getBarcodeRowCount();y++)for(let A=0;A<t.getBarcodeColumnCount();A++){let C=i[y][A+1].getValue(),R=y*t.getBarcodeColumnCount()+A;C.length===0?a.push(R):C.length===1?c[R]=C[0]:(d.push(R),u.push(C))}let m=new Array(u.length);for(let y=0;y<m.length;y++)m[y]=u[y];return nt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),c,Pe.toIntArray(a),Pe.toIntArray(d),m)}static createDecoderResultFromAmbiguousValues(t,i,a,c,u){let d=new Int32Array(c.length),m=100;for(;m-- >0;){for(let y=0;y<d.length;y++)i[c[y]]=u[y][d[y]];try{return nt.decodeCodewords(i,t,a)}catch(y){if(!(y instanceof j))throw y}if(d.length===0)throw j.getChecksumInstance();for(let y=0;y<d.length;y++)if(d[y]<u[y].length-1){d[y]++;break}else if(d[y]=0,y===d.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let c=0;c<i.length;c++)for(let u=0;u<i[c].length;u++)i[c][u]=new ir;let a=0;for(let c of t.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=i.length)continue;i[d][a].setValue(u.getValue())}}}a++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,a,c){let u=c?1:-1,d=null;if(nt.isValidBarcodeColumn(t,i-u)&&(d=t.getDetectionResultColumn(i-u).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=t.getDetectionResultColumn(i).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(nt.isValidBarcodeColumn(t,i-u)&&(d=t.getDetectionResultColumn(i-u).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let m=0;for(;nt.isValidBarcodeColumn(t,i-u);){i-=u;for(let y of t.getDetectionResultColumn(i).getCodewords())if(y!=null)return(c?y.getEndX():y.getStartX())+u*m*(y.getEndX()-y.getStartX());m++}return c?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,a,c,u,d,m,y){u=nt.adjustCodewordStartColumn(t,i,a,c,u,d);let A=nt.getModuleBitCount(t,i,a,c,u,d);if(A==null)return null;let C,R=ot.sum(A);if(c)C=u+R;else{for(let F=0;F<A.length/2;F++){let V=A[F];A[F]=A[A.length-1-F],A[A.length-1-F]=V}C=u,u=C-R}if(!nt.checkCodewordSkew(R,m,y))return null;let D=En.getDecodedValue(A),k=Pe.getCodeword(D);return k===-1?null:new fi(u,C,nt.getCodewordBucketNumber(D),k)}static getModuleBitCount(t,i,a,c,u,d){let m=u,y=new Int32Array(8),A=0,C=c?1:-1,R=c;for(;(c?m<a:m>=i)&&A<y.length;)t.get(m,d)===R?(y[A]++,m+=C):(A++,R=!R);return A===y.length||m===(c?a:i)&&A===y.length-1?y:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,a,c,u,d){let m=u,y=c?-1:1;for(let A=0;A<2;A++){for(;(c?m>=i:m<a)&&c===t.get(m,d);){if(Math.abs(u-m)>nt.CODEWORD_SKEW_SIZE)return u;m+=y}y=-y,c=!c}return m}static checkCodewordSkew(t,i,a){return i-nt.CODEWORD_SKEW_SIZE<=t&&t<=a+nt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,a){if(t.length===0)throw W.getFormatInstance();let c=1<<i+1,u=nt.correctErrors(t,a,c);nt.verifyCodewordCount(t,c);let d=oe.decode(t,""+i);return d.setErrorsCorrected(u),d.setErasures(a.length),d}static correctErrors(t,i,a){if(i!=null&&i.length>a/2+nt.MAX_ERRORS||a<0||a>nt.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return nt.errorCorrection.decode(t,a,i)}static verifyCodewordCount(t,i){if(t.length<4)throw W.getFormatInstance();let a=t[0];if(a>t.length)throw W.getFormatInstance();if(a===0)if(i<t.length)t[0]=t.length-i;else throw W.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),a=0,c=i.length-1;for(;!((t&1)!==a&&(a=t&1,c--,c<0));)i[c]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return nt.getCodewordBucketNumber(nt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new Yr;for(let a=0;a<t.length;a++){i.format("Row %2d: ",a);for(let c=0;c<t[a].length;c++){let u=t[a][c];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}nt.CODEWORD_SKEW_SIZE=2,nt.MAX_ERRORS=3,nt.MAX_EC_CODEWORDS=512,nt.errorCorrection=new Vi;class Sn{decode(t,i=null){let a=Sn.decode(t,i,!1);if(a==null||a.length===0||a[0]==null)throw ae.getNotFoundInstance();return a[0]}decodeMultiple(t,i=null){try{return Sn.decode(t,i,!0)}catch(a){throw a instanceof W||a instanceof j?ae.getNotFoundInstance():a}}static decode(t,i,a){const c=new Array,u=Ze.detectMultiple(t,i,a);for(const d of u.getPoints()){const m=nt.decode(u.getBits(),d[4],d[5],d[6],d[7],Sn.getMinCodewordWidth(d),Sn.getMaxCodewordWidth(d)),y=new Te(m.getText(),m.getRawBytes(),void 0,d,ye.PDF_417);y.putMetadata($e.ERROR_CORRECTION_LEVEL,m.getECLevel());const A=m.getOther();A!=null&&y.putMetadata($e.PDF417_EXTRA_METADATA,A),c.push(y)}return c.map(d=>d)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?Q.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Sn.getMaxWidth(t[0],t[4]),Sn.getMaxWidth(t[6],t[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.max(Sn.getMaxWidth(t[1],t[5]),Sn.getMaxWidth(t[7],t[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Sn.getMinWidth(t[0],t[4]),Sn.getMinWidth(t[6],t[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.min(Sn.getMinWidth(t[1],t[5]),Sn.getMinWidth(t[7],t[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class hs extends v{}hs.kind="ReaderException";class Ao{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!f(t)&&t.get(ve.TRY_HARDER)===!0,a=f(t)?null:t.get(ve.POSSIBLE_FORMATS),c=new Array;if(!f(a)){const u=a.some(d=>d===ye.UPC_A||d===ye.UPC_E||d===ye.EAN_13||d===ye.EAN_8||d===ye.CODABAR||d===ye.CODE_39||d===ye.CODE_93||d===ye.CODE_128||d===ye.ITF||d===ye.RSS_14||d===ye.RSS_EXPANDED);u&&!i&&c.push(new ui(t,this.verbose)),a.includes(ye.QR_CODE)&&c.push(new Hi),a.includes(ye.DATA_MATRIX)&&c.push(new Fi),a.includes(ye.AZTEC)&&c.push(new is),a.includes(ye.PDF_417)&&c.push(new Sn),u&&i&&c.push(new ui(t,this.verbose))}c.length===0&&(i||c.push(new ui(t,this.verbose)),c.push(new Hi),c.push(new Fi),c.push(new is),c.push(new Sn),i&&c.push(new ui(t,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new hs("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(a){if(a instanceof hs)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class Eo extends Se{constructor(t=null,i=500){const a=new Ao;a.setHints(t),super(a,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class eu extends Se{constructor(t=500){super(new Sn,t)}}class tu extends Se{constructor(t=500){super(new Hi,t)}}var fl;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(fl||(fl={}));var hn=fl;class Ra{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new en(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let a=i[i.length-1];const c=this.field;for(let u=i.length;u<=t;u++){const d=a.multiply(new en(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));i.push(d),a=d}}return i[t]}encode(t,i){if(i===0)throw new O("No error correction bytes");const a=t.length-i;if(a<=0)throw new O("No data bytes provided");const c=this.buildGenerator(i),u=new Int32Array(a);z.arraycopy(t,0,u,0,a);let d=new en(this.field,u);d=d.multiplyByMonomial(i,1);const y=d.divide(c)[1].getCoefficients(),A=i-y.length;for(let C=0;C<A;C++)t[a+C]=0;z.arraycopy(y,0,t,a+A,y.length)}}class Qt{constructor(){}static applyMaskPenaltyRule1(t){return Qt.applyMaskPenaltyRule1Internal(t,!0)+Qt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let d=0;d<u-1;d++){const m=a[d];for(let y=0;y<c-1;y++){const A=m[y];A===m[y+1]&&A===a[d+1][y]&&A===a[d+1][y+1]&&i++}}return Qt.N2*i}static applyMaskPenaltyRule3(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let d=0;d<u;d++)for(let m=0;m<c;m++){const y=a[d];m+6<c&&y[m]===1&&y[m+1]===0&&y[m+2]===1&&y[m+3]===1&&y[m+4]===1&&y[m+5]===0&&y[m+6]===1&&(Qt.isWhiteHorizontal(y,m-4,m)||Qt.isWhiteHorizontal(y,m+7,m+11))&&i++,d+6<u&&a[d][m]===1&&a[d+1][m]===0&&a[d+2][m]===1&&a[d+3][m]===1&&a[d+4][m]===1&&a[d+5][m]===0&&a[d+6][m]===1&&(Qt.isWhiteVertical(a,m,d-4,d)||Qt.isWhiteVertical(a,m,d+7,d+11))&&i++}return i*Qt.N3}static isWhiteHorizontal(t,i,a){i=Math.max(i,0),a=Math.min(a,t.length);for(let c=i;c<a;c++)if(t[c]===1)return!1;return!0}static isWhiteVertical(t,i,a,c){a=Math.max(a,0),c=Math.min(c,t.length);for(let u=a;u<c;u++)if(t[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let y=0;y<u;y++){const A=a[y];for(let C=0;C<c;C++)A[C]===1&&i++}const d=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-d)*10/d)*Qt.N4}static getDataMaskBit(t,i,a){let c,u;switch(t){case 0:c=a+i&1;break;case 1:c=a&1;break;case 2:c=i%3;break;case 3:c=(a+i)%3;break;case 4:c=Math.floor(a/2)+Math.floor(i/3)&1;break;case 5:u=a*i,c=(u&1)+u%3;break;case 6:u=a*i,c=(u&1)+u%3&1;break;case 7:u=a*i,c=u%3+(a+i&1)&1;break;default:throw new O("Invalid mask pattern: "+t)}return c===0}static applyMaskPenaltyRule1Internal(t,i){let a=0;const c=i?t.getHeight():t.getWidth(),u=i?t.getWidth():t.getHeight(),d=t.getArray();for(let m=0;m<c;m++){let y=0,A=-1;for(let C=0;C<u;C++){const R=i?d[m][C]:d[C][m];R===A?y++:(y>=5&&(a+=Qt.N1+(y-5)),y=1,A=R)}y>=5&&(a+=Qt.N1+(y-5))}return a}}Qt.N1=3,Qt.N2=3,Qt.N3=40,Qt.N4=10;class fs{constructor(t,i){this.width=t,this.height=i;const a=new Array(i);for(let c=0;c!==i;c++)a[c]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,a){this.bytes[i][t]=a}setBoolean(t,i,a){this.bytes[i][t]=a?1:0}clear(t){for(const i of this.bytes)se.fill(i,t)}equals(t){if(!(t instanceof fs))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],d=i.bytes[a];for(let m=0,y=this.width;m<y;++m)if(u[m]!==d[m])return!1}return!0}toString(){const t=new De;for(let i=0,a=this.height;i<a;++i){const c=this.bytes[i];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class dr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new De;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<dr.NUM_MASK_PATTERNS}}dr.NUM_MASK_PATTERNS=8;class Nt extends v{}Nt.kind="WriterException";class Fe{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,a,c,u){Fe.clearMatrix(u),Fe.embedBasicPatterns(a,u),Fe.embedTypeInfo(i,c,u),Fe.maybeEmbedVersionInfo(a,u),Fe.embedDataBits(t,c,u)}static embedBasicPatterns(t,i){Fe.embedPositionDetectionPatternsAndSeparators(i),Fe.embedDarkDotAtLeftBottomCorner(i),Fe.maybeEmbedPositionAdjustmentPatterns(t,i),Fe.embedTimingPatterns(i)}static embedTypeInfo(t,i,a){const c=new ue;Fe.makeTypeInfoBits(t,i,c);for(let u=0,d=c.getSize();u<d;++u){const m=c.get(c.getSize()-1-u),y=Fe.TYPE_INFO_COORDINATES[u],A=y[0],C=y[1];if(a.setBoolean(A,C,m),u<8){const R=a.getWidth()-u-1;a.setBoolean(R,8,m)}else{const D=a.getHeight()-7+(u-8);a.setBoolean(8,D,m)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const a=new ue;Fe.makeVersionInfoBits(t,a);let c=17;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const m=a.get(c);c--,i.setBoolean(u,i.getHeight()-11+d,m),i.setBoolean(i.getHeight()-11+d,u,m)}}static embedDataBits(t,i,a){let c=0,u=-1,d=a.getWidth()-1,m=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);m>=0&&m<a.getHeight();){for(let y=0;y<2;++y){const A=d-y;if(!Fe.isEmpty(a.get(A,m)))continue;let C;c<t.getSize()?(C=t.get(c),++c):C=!1,i!==255&&Qt.getDataMaskBit(i,A,m)&&(C=!C),a.setBoolean(A,m,C)}m+=u}u=-u,m+=u,d-=2}if(c!==t.getSize())throw new Nt("Not all bits consumed: "+c+"/"+t.getSize())}static findMSBSet(t){return 32-Q.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new O("0 polynomial");const a=Fe.findMSBSet(i);for(t<<=a-1;Fe.findMSBSet(t)>=a;)t^=i<<Fe.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,i,a){if(!dr.isValidMaskPattern(i))throw new Nt("Invalid mask pattern");const c=t.getBits()<<3|i;a.appendBits(c,5);const u=Fe.calculateBCHCode(c,Fe.TYPE_INFO_POLY);a.appendBits(u,10);const d=new ue;if(d.appendBits(Fe.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new Nt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const a=Fe.calculateBCHCode(t.getVersionNumber(),Fe.VERSION_INFO_POLY);if(i.appendBits(a,12),i.getSize()!==18)throw new Nt("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const a=(i+1)%2;Fe.isEmpty(t.get(i,6))&&t.setNumber(i,6,a),Fe.isEmpty(t.get(6,i))&&t.setNumber(6,i,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Nt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,a){for(let c=0;c<8;++c){if(!Fe.isEmpty(a.get(t+c,i)))throw new Nt;a.setNumber(t+c,i,0)}}static embedVerticalSeparationPattern(t,i,a){for(let c=0;c<7;++c){if(!Fe.isEmpty(a.get(t,i+c)))throw new Nt;a.setNumber(t,i+c,0)}}static embedPositionAdjustmentPattern(t,i,a){for(let c=0;c<5;++c){const u=Fe.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(t+d,i+c,u[d])}}static embedPositionDetectionPattern(t,i,a){for(let c=0;c<7;++c){const u=Fe.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(t+d,i+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(t){const i=Fe.POSITION_DETECTION_PATTERN[0].length;Fe.embedPositionDetectionPattern(0,0,t),Fe.embedPositionDetectionPattern(t.getWidth()-i,0,t),Fe.embedPositionDetectionPattern(0,t.getWidth()-i,t);const a=8;Fe.embedHorizontalSeparationPattern(0,a-1,t),Fe.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),Fe.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const c=7;Fe.embedVerticalSeparationPattern(c,0,t),Fe.embedVerticalSeparationPattern(t.getHeight()-c-1,0,t),Fe.embedVerticalSeparationPattern(c,t.getHeight()-c,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,c=Fe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,d=c.length;u!==d;u++){const m=c[u];if(m>=0)for(let y=0;y!==d;y++){const A=c[y];A>=0&&Fe.isEmpty(i.get(A,m))&&Fe.embedPositionAdjustmentPattern(A-2,m-2,i)}}}}Fe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Fe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Fe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Fe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Fe.VERSION_INFO_POLY=7973,Fe.TYPE_INFO_POLY=1335,Fe.TYPE_INFO_MASK_PATTERN=21522;class nu{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ft{constructor(){}static calculateMaskPenalty(t){return Qt.applyMaskPenaltyRule1(t)+Qt.applyMaskPenaltyRule2(t)+Qt.applyMaskPenaltyRule3(t)+Qt.applyMaskPenaltyRule4(t)}static encode(t,i,a=null){let c=Ft.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(hn.CHARACTER_SET)!==void 0;u&&(c=a.get(hn.CHARACTER_SET).toString());const d=this.chooseMode(t,c),m=new ue;if(d===Ue.BYTE&&(u||Ft.DEFAULT_BYTE_MODE_ENCODING!==c)){const we=re.getCharacterSetECIByName(c);we!==void 0&&this.appendECI(we,m)}this.appendModeInfo(d,m);const y=new ue;this.appendBytes(t,d,y,c);let A;if(a!==null&&a.get(hn.QR_VERSION)!==void 0){const we=Number.parseInt(a.get(hn.QR_VERSION).toString(),10);A=Le.getVersionForNumber(we);const xe=this.calculateBitsNeeded(d,m,y,A);if(!this.willFit(xe,A,i))throw new Nt("Data too big for requested version")}else A=this.recommendVersion(i,d,m,y);const C=new ue;C.appendBitArray(m);const R=d===Ue.BYTE?y.getSizeInBytes():t.length;this.appendLengthInfo(R,A,d,C),C.appendBitArray(y);const D=A.getECBlocksForLevel(i),k=A.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(k,C);const F=this.interleaveWithECBytes(C,A.getTotalCodewords(),k,D.getNumBlocks()),V=new dr;V.setECLevel(i),V.setMode(d),V.setVersion(A);const X=A.getDimensionForVersion(),le=new fs(X,X),be=this.chooseMaskPattern(F,i,A,le);return V.setMaskPattern(be),Fe.buildMatrix(F,i,A,be,le),V.setMatrix(le),V}static recommendVersion(t,i,a,c){const u=this.calculateBitsNeeded(i,a,c,Le.getVersionForNumber(1)),d=this.chooseVersion(u,t),m=this.calculateBitsNeeded(i,a,c,d);return this.chooseVersion(m,t)}static calculateBitsNeeded(t,i,a,c){return i.getSize()+t.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(t){return t<Ft.ALPHANUMERIC_TABLE.length?Ft.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(re.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return Ue.KANJI;let a=!1,c=!1;for(let u=0,d=t.length;u<d;++u){const m=t.charAt(u);if(Ft.isDigit(m))a=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return Ue.BYTE}return c?Ue.ALPHANUMERIC:a?Ue.NUMERIC:Ue.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=We.encode(t,re.SJIS)}catch{return!1}const a=i.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=i[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,i,a,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let m=0;m<dr.NUM_MASK_PATTERNS;m++){Fe.buildMatrix(t,i,a,m,c);let y=this.calculateMaskPenalty(c);y<u&&(u=y,d=m)}return d}static chooseVersion(t,i){for(let a=1;a<=40;a++){const c=Le.getVersionForNumber(a);if(Ft.willFit(t,c,i))return c}throw new Nt("Data too big")}static willFit(t,i,a){const c=i.getTotalCodewords(),d=i.getECBlocksForLevel(a).getTotalECCodewords(),m=c-d,y=(t+7)/8;return m>=y}static terminateBits(t,i){const a=t*8;if(i.getSize()>a)throw new Nt("data bits cannot fit in the QR Code"+i.getSize()+" > "+a);for(let d=0;d<4&&i.getSize()<a;++d)i.appendBit(!1);const c=i.getSize()&7;if(c>0)for(let d=c;d<8;d++)i.appendBit(!1);const u=t-i.getSizeInBytes();for(let d=0;d<u;++d)i.appendBits((d&1)===0?236:17,8);if(i.getSize()!==a)throw new Nt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,a,c,u,d){if(c>=a)throw new Nt("Block ID too large");const m=t%a,y=a-m,A=Math.floor(t/a),C=A+1,R=Math.floor(i/a),D=R+1,k=A-R,F=C-D;if(k!==F)throw new Nt("EC bytes mismatch");if(a!==y+m)throw new Nt("RS blocks mismatch");if(t!==(R+k)*y+(D+F)*m)throw new Nt("Total bytes mismatch");c<y?(u[0]=R,d[0]=k):(u[0]=D,d[0]=F)}static interleaveWithECBytes(t,i,a,c){if(t.getSizeInBytes()!==a)throw new Nt("Number of bits and data bytes does not match");let u=0,d=0,m=0;const y=new Array;for(let C=0;C<c;++C){const R=new Int32Array(1),D=new Int32Array(1);Ft.getNumDataBytesAndNumECBytesForBlockID(i,a,c,C,R,D);const k=R[0],F=new Uint8Array(k);t.toBytes(8*u,F,0,k);const V=Ft.generateECBytes(F,D[0]);y.push(new nu(F,V)),d=Math.max(d,k),m=Math.max(m,V.length),u+=R[0]}if(a!==u)throw new Nt("Data bytes does not match offset");const A=new ue;for(let C=0;C<d;++C)for(const R of y){const D=R.getDataBytes();C<D.length&&A.appendBits(D[C],8)}for(let C=0;C<m;++C)for(const R of y){const D=R.getErrorCorrectionBytes();C<D.length&&A.appendBits(D[C],8)}if(i!==A.getSizeInBytes())throw new Nt("Interleaving error: "+i+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(t,i){const a=t.length,c=new Int32Array(a+i);for(let d=0;d<a;d++)c[d]=t[d]&255;new Ra(lt.QR_CODE_FIELD_256).encode(c,i);const u=new Uint8Array(i);for(let d=0;d<i;d++)u[d]=c[a+d];return u}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,a,c){const u=a.getCharacterCountBits(i);if(t>=1<<u)throw new Nt(t+" is bigger than "+((1<<u)-1));c.appendBits(t,u)}static appendBytes(t,i,a,c){switch(i){case Ue.NUMERIC:Ft.appendNumericBytes(t,a);break;case Ue.ALPHANUMERIC:Ft.appendAlphanumericBytes(t,a);break;case Ue.BYTE:Ft.append8BitBytes(t,a,c);break;case Ue.KANJI:Ft.appendKanjiBytes(t,a);break;default:throw new Nt("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=Ft.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const a=t.length;let c=0;for(;c<a;){const u=Ft.getDigit(t.charAt(c));if(c+2<a){const d=Ft.getDigit(t.charAt(c+1)),m=Ft.getDigit(t.charAt(c+2));i.appendBits(u*100+d*10+m,10),c+=3}else if(c+1<a){const d=Ft.getDigit(t.charAt(c+1));i.appendBits(u*10+d,7),c+=2}else i.appendBits(u,4),c++}}static appendAlphanumericBytes(t,i){const a=t.length;let c=0;for(;c<a;){const u=Ft.getAlphanumericCode(t.charCodeAt(c));if(u===-1)throw new Nt;if(c+1<a){const d=Ft.getAlphanumericCode(t.charCodeAt(c+1));if(d===-1)throw new Nt;i.appendBits(u*45+d,11),c+=2}else i.appendBits(u,6),c++}}static append8BitBytes(t,i,a){let c;try{c=We.encode(t,a)}catch(u){throw new Nt(u)}for(let u=0,d=c.length;u!==d;u++){const m=c[u];i.appendBits(m,8)}}static appendKanjiBytes(t,i){let a;try{a=We.encode(t,re.SJIS)}catch(u){throw new Nt(u)}const c=a.length;for(let u=0;u<c;u+=2){const d=a[u]&255,m=a[u+1]&255,y=d<<8&4294967295|m;let A=-1;if(y>=33088&&y<=40956?A=y-33088:y>=57408&&y<=60351&&(A=y-49472),A===-1)throw new Nt("Invalid byte sequence");const C=(A>>8)*192+(A&255);i.appendBits(C,13)}}static appendECI(t,i){i.appendBits(Ue.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}Ft.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ft.DEFAULT_BYTE_MODE_ENCODING=re.UTF8.getName();class gr{write(t,i,a,c=null){if(t.length===0)throw new O("Found empty contents");if(i<0||a<0)throw new O("Requested dimensions are too small: "+i+"x"+a);let u=at.L,d=gr.QUIET_ZONE_SIZE;c!==null&&(c.get(hn.ERROR_CORRECTION)!==void 0&&(u=at.fromString(c.get(hn.ERROR_CORRECTION).toString())),c.get(hn.MARGIN)!==void 0&&(d=Number.parseInt(c.get(hn.MARGIN).toString(),10)));const m=Ft.encode(t,u,c);return this.renderResult(m,i,a,d)}writeToDom(t,i,a,c,u=null){typeof t=="string"&&(t=document.querySelector(t));const d=this.write(i,a,c,u);t&&t.appendChild(d)}renderResult(t,i,a,c){const u=t.getMatrix();if(u===null)throw new Fn;const d=u.getWidth(),m=u.getHeight(),y=d+c*2,A=m+c*2,C=Math.max(i,y),R=Math.max(a,A),D=Math.min(Math.floor(C/y),Math.floor(R/A)),k=Math.floor((C-d*D)/2),F=Math.floor((R-m*D)/2),V=this.createSVGElement(C,R);for(let X=0,le=F;X<m;X++,le+=D)for(let be=0,we=k;be<d;be++,we+=D)if(u.get(be,X)===1){const xe=this.createSvgRectElement(we,le,D,D);V.appendChild(xe)}return V}createSVGElement(t,i){const a=document.createElementNS(gr.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",i.toString()),a}createSvgRectElement(t,i,a,c){const u=document.createElementNS(gr.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}gr.QUIET_ZONE_SIZE=4,gr.SVG_NS="http://www.w3.org/2000/svg";class Xr{encode(t,i,a,c,u){if(t.length===0)throw new O("Found empty contents");if(i!==ye.QR_CODE)throw new O("Can only encode QR_CODE, but got "+i);if(a<0||c<0)throw new O(`Requested dimensions are too small: ${a}x${c}`);let d=at.L,m=Xr.QUIET_ZONE_SIZE;u!==null&&(u.get(hn.ERROR_CORRECTION)!==void 0&&(d=at.fromString(u.get(hn.ERROR_CORRECTION).toString())),u.get(hn.MARGIN)!==void 0&&(m=Number.parseInt(u.get(hn.MARGIN).toString(),10)));const y=Ft.encode(t,d,u);return Xr.renderResult(y,a,c,m)}static renderResult(t,i,a,c){const u=t.getMatrix();if(u===null)throw new Fn;const d=u.getWidth(),m=u.getHeight(),y=d+c*2,A=m+c*2,C=Math.max(i,y),R=Math.max(a,A),D=Math.min(Math.floor(C/y),Math.floor(R/A)),k=Math.floor((C-d*D)/2),F=Math.floor((R-m*D)/2),V=new He(C,R);for(let X=0,le=F;X<m;X++,le+=D)for(let be=0,we=k;be<d;be++,we+=D)u.get(be,X)===1&&V.setRegion(we,le,D,D);return V}}Xr.QUIET_ZONE_SIZE=4;class iu{encode(t,i,a,c,u){let d;if(i===ye.QR_CODE)d=new Xr;else throw new O("No encoder available for format "+i);return d.encode(t,i,a,c,u)}}class Ii extends Ce{constructor(t,i,a,c,u,d,m,y){if(super(d,m),this.yuvData=t,this.dataWidth=i,this.dataHeight=a,this.left=c,this.top=u,c+d>i||u+m>a)throw new O("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(d,m)}getRow(t,i){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return z.arraycopy(this.yuvData,c,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const a=t*i,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return z.arraycopy(this.yuvData,u,c,0,a),c;for(let d=0;d<i;d++){const m=d*t;z.arraycopy(this.yuvData,u,c,m,t),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,i,a,c){return new Ii(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,a,c,!1)}renderThumbnail(){const t=this.getWidth()/Ii.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Ii.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*i),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<i;d++){const m=d*t;for(let y=0;y<t;y++){const A=c[u+y*Ii.THUMBNAIL_SCALE_FACTOR]&255;a[m+y]=4278190080|A*65793}u+=this.dataWidth*Ii.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Ii.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ii.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<i;c++,u+=this.dataWidth){const d=u+t/2;for(let m=u,y=u+t-1;m<d;m++,y--){const A=a[m];a[m]=a[y],a[y]=A}}}invert(){return new Re(this)}}Ii.THUMBNAIL_SCALE_FACTOR=2;class dl extends Ce{constructor(t,i,a,c,u,d,m){if(super(i,a),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=m,t.BYTES_PER_ELEMENT===4){const y=i*a,A=new Uint8ClampedArray(y);for(let C=0;C<y;C++){const R=t[C],D=R>>16&255,k=R>>7&510,F=R&255;A[C]=(D+k+F)/4&255}this.luminances=A}else this.luminances=t;if(c===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+a>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return z.arraycopy(this.luminances,c,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const a=t*i,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return z.arraycopy(this.luminances,u,c,0,a),c;for(let d=0;d<i;d++){const m=d*t;z.arraycopy(this.luminances,u,c,m,t),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,i,a,c){return new dl(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new Re(this)}}class So extends re{static forName(t){return this.getCharacterSetECIByName(t)}}class Da{}Da.ISO_8859_1=re.ISO8859_1;class Wr{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class _o{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class Co{constructor(t){this.previous=t}getPrevious(){return this.previous}}class mr extends Co{constructor(t,i,a){super(t),this.value=i,this.bitCount=a}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new mr(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new mr(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Q.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class ds extends mr{constructor(t,i,a){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=a}appendTo(t,i){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+a],8)}addBinaryShift(t,i){return new ds(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function To(I,t,i){return new ds(I,t,i)}function Zr(I,t,i){return new mr(I,t,i)}const Qr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ar=0,gs=1,ti=2,gl=3,di=4,Ma=new mr(null,0,0),pr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ru(I){for(let t of I)se.fill(t,-1);return I[ar][di]=0,I[gs][di]=0,I[gs][ar]=28,I[gl][di]=0,I[ti][di]=0,I[ti][ar]=15,I}const Ba=ru(se.createInt32Array(6,6));class gi{constructor(t,i,a,c){this.token=t,this.mode=i,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let a=this.bitCount,c=this.token;if(t!==this.mode){let d=pr[this.mode][t];c=Zr(c,d&65535,d>>16),a+=d>>16}let u=t===ti?4:5;return c=Zr(c,i,u),new gi(c,t,0,a+u)}shiftAndAppend(t,i){let a=this.token,c=this.mode===ti?4:5;return a=Zr(a,Ba[this.mode][t],c),a=Zr(a,i,5),new gi(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(t){let i=this.token,a=this.mode,c=this.bitCount;if(this.mode===di||this.mode===ti){let m=pr[a][ar];i=Zr(i,m&65535,m>>16),c+=m>>16,a=ar}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new gi(i,a,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(t+1)),d}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=To(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new gi(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(pr[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=gi.calculateBinaryShiftCost(t)-gi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let c=this.endBinaryShift(t.length).token;c!==null;c=c.getPrevious())i.unshift(c);let a=new ue;for(const c of i)c.appendTo(a,t);return a}toString(){return _e.format("%s bits=%d bytes=%d",Qr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}gi.INITIAL_STATE=new gi(Ma,ar,0,0);function No(I){const t=_e.getCharCode(" "),i=_e.getCharCode("."),a=_e.getCharCode(",");I[ar][t]=1;const c=_e.getCharCode("Z"),u=_e.getCharCode("A");for(let D=u;D<=c;D++)I[ar][D]=D-u+2;I[gs][t]=1;const d=_e.getCharCode("z"),m=_e.getCharCode("a");for(let D=m;D<=d;D++)I[gs][D]=D-m+2;I[ti][t]=1;const y=_e.getCharCode("9"),A=_e.getCharCode("0");for(let D=A;D<=y;D++)I[ti][D]=D-A+2;I[ti][a]=12,I[ti][i]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<C.length;D++)I[gl][_e.getCharCode(C[D])]=D;const R=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<R.length;D++)_e.getCharCode(R[D])>0&&(I[di][_e.getCharCode(R[D])]=D);return I}const La=No(se.createInt32Array(5,256));class xr{constructor(t){this.text=t}encode(){const t=_e.getCharCode(" "),i=_e.getCharCode(`
`);let a=_o.singletonList(gi.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,m=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case _e.getCharCode("\r"):d=m===i?2:0;break;case _e.getCharCode("."):d=m===t?3:0;break;case _e.getCharCode(","):d=m===t?4:0;break;case _e.getCharCode(":"):d=m===t?5:0;break;default:d=0}d>0?(a=xr.updateStateListForPair(a,u,d),u++):a=this.updateStateListForChar(a,u)}return _o.min(a,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const a=[];for(let c of t)this.updateStateForChar(c,i,a);return xr.simplifyStates(a)}updateStateForChar(t,i,a){let c=this.text[i]&255,u=La[t.getMode()][c]>0,d=null;for(let m=0;m<=di;m++){let y=La[m][c];if(y>0){if(d==null&&(d=t.endBinaryShift(i)),!u||m===t.getMode()||m===ti){const A=d.latchAndAppend(m,y);a.push(A)}if(!u&&Ba[t.getMode()][m]>=0){const A=d.shiftAndAppend(m,y);a.push(A)}}}if(t.getBinaryShiftByteCount()>0||La[t.getMode()][c]===0){let m=t.addBinaryShiftChar(i);a.push(m)}}static updateStateListForPair(t,i,a){const c=[];for(let u of t)this.updateStateForPair(u,i,a,c);return this.simplifyStates(c)}static updateStateForPair(t,i,a,c){let u=t.endBinaryShift(i);if(c.push(u.latchAndAppend(di,a)),t.getMode()!==di&&c.push(u.shiftAndAppend(di,a)),a===3||a===4){let d=u.latchAndAppend(ti,16-a).latchAndAppend(ti,1);c.push(d)}if(t.getBinaryShiftByteCount()>0){let d=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);c.push(d)}}static simplifyStates(t){let i=[];for(const a of t){let c=!0;for(const u of i){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(i=i.filter(d=>d!==u))}c&&i.push(a)}return i}}class dt{constructor(){}static encodeBytes(t){return dt.encode(t,dt.DEFAULT_EC_PERCENT,dt.DEFAULT_AZTEC_LAYERS)}static encode(t,i,a){let c=new xr(t).encode(),u=Q.truncDivision(c.getSize()*i,100)+11,d=c.getSize()+u,m,y,A,C,R;if(a!==dt.DEFAULT_AZTEC_LAYERS){if(m=a<0,y=Math.abs(a),y>(m?dt.MAX_NB_BITS_COMPACT:dt.MAX_NB_BITS))throw new O(_e.format("Illegal value %s for layers",a));A=dt.totalBitsInLayer(y,m),C=dt.WORD_SIZE[y];let xe=A-A%C;if(R=dt.stuffBits(c,C),R.getSize()+u>xe)throw new O("Data to large for user specified layer");if(m&&R.getSize()>C*64)throw new O("Data to large for user specified layer")}else{C=0,R=null;for(let xe=0;;xe++){if(xe>dt.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(m=xe<=3,y=m?xe+1:xe,A=dt.totalBitsInLayer(y,m),d>A)continue;(R==null||C!==dt.WORD_SIZE[y])&&(C=dt.WORD_SIZE[y],R=dt.stuffBits(c,C));let rt=A-A%C;if(!(m&&R.getSize()>C*64)&&R.getSize()+u<=rt)break}}let D=dt.generateCheckWords(R,A,C),k=R.getSize()/C,F=dt.generateModeMessage(m,y,k),V=(m?11:14)+y*4,X=new Int32Array(V),le;if(m){le=V;for(let xe=0;xe<X.length;xe++)X[xe]=xe}else{le=V+1+2*Q.truncDivision(Q.truncDivision(V,2)-1,15);let xe=Q.truncDivision(V,2),rt=Q.truncDivision(le,2);for(let Qe=0;Qe<xe;Qe++){let rn=Qe+Q.truncDivision(Qe,15);X[xe-Qe-1]=rt-rn-1,X[xe+Qe]=rt+rn+1}}let be=new He(le);for(let xe=0,rt=0;xe<y;xe++){let Qe=(y-xe)*4+(m?9:12);for(let rn=0;rn<Qe;rn++){let ni=rn*2;for(let Mn=0;Mn<2;Mn++)D.get(rt+ni+Mn)&&be.set(X[xe*2+Mn],X[xe*2+rn]),D.get(rt+Qe*2+ni+Mn)&&be.set(X[xe*2+rn],X[V-1-xe*2-Mn]),D.get(rt+Qe*4+ni+Mn)&&be.set(X[V-1-xe*2-Mn],X[V-1-xe*2-rn]),D.get(rt+Qe*6+ni+Mn)&&be.set(X[V-1-xe*2-rn],X[xe*2+Mn])}rt+=Qe*8}if(dt.drawModeMessage(be,m,le,F),m)dt.drawBullsEye(be,Q.truncDivision(le,2),5);else{dt.drawBullsEye(be,Q.truncDivision(le,2),7);for(let xe=0,rt=0;xe<Q.truncDivision(V,2)-1;xe+=15,rt+=16)for(let Qe=Q.truncDivision(le,2)&1;Qe<le;Qe+=2)be.set(Q.truncDivision(le,2)-rt,Qe),be.set(Q.truncDivision(le,2)+rt,Qe),be.set(Qe,Q.truncDivision(le,2)-rt),be.set(Qe,Q.truncDivision(le,2)+rt)}let we=new Wr;return we.setCompact(m),we.setSize(le),we.setLayers(y),we.setCodeWords(k),we.setMatrix(be),we}static drawBullsEye(t,i,a){for(let c=0;c<a;c+=2)for(let u=i-c;u<=i+c;u++)t.set(u,i-c),t.set(u,i+c),t.set(i-c,u),t.set(i+c,u);t.set(i-a,i-a),t.set(i-a+1,i-a),t.set(i-a,i-a+1),t.set(i+a,i-a),t.set(i+a,i-a+1),t.set(i+a,i+a-1)}static generateModeMessage(t,i,a){let c=new ue;return t?(c.appendBits(i-1,2),c.appendBits(a-1,6),c=dt.generateCheckWords(c,28,4)):(c.appendBits(i-1,5),c.appendBits(a-1,11),c=dt.generateCheckWords(c,40,4)),c}static drawModeMessage(t,i,a,c){let u=Q.truncDivision(a,2);if(i)for(let d=0;d<7;d++){let m=u-3+d;c.get(d)&&t.set(m,u-5),c.get(d+7)&&t.set(u+5,m),c.get(20-d)&&t.set(m,u+5),c.get(27-d)&&t.set(u-5,m)}else for(let d=0;d<10;d++){let m=u-5+d+Q.truncDivision(d,5);c.get(d)&&t.set(m,u-7),c.get(d+10)&&t.set(u+7,m),c.get(29-d)&&t.set(m,u+7),c.get(39-d)&&t.set(u-7,m)}}static generateCheckWords(t,i,a){let c=t.getSize()/a,u=new Ra(dt.getGF(a)),d=Q.truncDivision(i,a),m=dt.bitsToWords(t,a,d);u.encode(m,d-c);let y=i%a,A=new ue;A.appendBits(0,y);for(const C of Array.from(m))A.appendBits(C,a);return A}static bitsToWords(t,i,a){let c=new Int32Array(a),u,d;for(u=0,d=t.getSize()/i;u<d;u++){let m=0;for(let y=0;y<i;y++)m|=t.get(u*i+y)?1<<i-y-1:0;c[u]=m}return c}static getGF(t){switch(t){case 4:return lt.AZTEC_PARAM;case 6:return lt.AZTEC_DATA_6;case 8:return lt.AZTEC_DATA_8;case 10:return lt.AZTEC_DATA_10;case 12:return lt.AZTEC_DATA_12;default:throw new O("Unsupported word size "+t)}}static stuffBits(t,i){let a=new ue,c=t.getSize(),u=(1<<i)-2;for(let d=0;d<c;d+=i){let m=0;for(let y=0;y<i;y++)(d+y>=c||t.get(d+y))&&(m|=1<<i-1-y);(m&u)===u?(a.appendBits(m&u,i),d--):(m&u)===0?(a.appendBits(m|1,i),d--):a.appendBits(m,i)}return a}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}dt.DEFAULT_EC_PERCENT=33,dt.DEFAULT_AZTEC_LAYERS=0,dt.MAX_NB_BITS=32,dt.MAX_NB_BITS_COMPACT=4,dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ka{encode(t,i,a,c){return this.encodeWithHints(t,i,a,c,null)}encodeWithHints(t,i,a,c,u){let d=Da.ISO_8859_1,m=dt.DEFAULT_EC_PERCENT,y=dt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(hn.CHARACTER_SET)&&(d=So.forName(u.get(hn.CHARACTER_SET).toString())),u.has(hn.ERROR_CORRECTION)&&(m=Q.parseInt(u.get(hn.ERROR_CORRECTION).toString())),u.has(hn.AZTEC_LAYERS)&&(y=Q.parseInt(u.get(hn.AZTEC_LAYERS).toString()))),ka.encodeLayers(t,i,a,c,d,m,y)}static encodeLayers(t,i,a,c,u,d,m){if(i!==ye.AZTEC)throw new O("Can only encode AZTEC, but got "+i);let y=dt.encode(_e.getBytes(t,u),d,m);return ka.renderResult(y,a,c)}static renderResult(t,i,a){let c=t.getMatrix();if(c==null)throw new Fn;let u=c.getWidth(),d=c.getHeight(),m=Math.max(i,u),y=Math.max(a,d),A=Math.min(m/u,y/d),C=(m-u*A)/2,R=(y-d*A)/2,D=new He(m,y);for(let k=0,F=R;k<d;k++,F+=A)for(let V=0,X=C;V<u;V++,X+=A)c.get(V,k)&&D.setRegion(X,F,A,A);return D}}l.AbstractExpandedDecoder=cn,l.ArgumentException=N,l.ArithmeticException=Kn,l.AztecCode=Wr,l.AztecCodeReader=is,l.AztecCodeWriter=ka,l.AztecDecoder=It,l.AztecDetector=il,l.AztecDetectorResult=go,l.AztecEncoder=dt,l.AztecHighLevelEncoder=xr,l.AztecPoint=Rn,l.BarcodeFormat=ye,l.Binarizer=U,l.BinaryBitmap=B,l.BitArray=ue,l.BitMatrix=He,l.BitSource=hi,l.BrowserAztecCodeReader=Qc,l.BrowserBarcodeReader=Kc,l.BrowserCodeReader=Se,l.BrowserDatamatrixCodeReader=ss,l.BrowserMultiFormatReader=Eo,l.BrowserPDF417Reader=eu,l.BrowserQRCodeReader=tu,l.BrowserQRCodeSvgWriter=gr,l.CharacterSetECI=re,l.ChecksumException=j,l.Code128Reader=Ae,l.Code39Reader=Lt,l.DataMatrixDecodedBitStreamParser=Pi,l.DataMatrixReader=Fi,l.DecodeHintType=ve,l.DecoderResult=st,l.DefaultGridSampler=nl,l.DetectorResult=ns,l.EAN13Reader=Ci,l.EncodeHintType=hn,l.Exception=v,l.FormatException=W,l.GenericGF=lt,l.GenericGFPoly=en,l.GlobalHistogramBinarizer=te,l.GridSampler=tl,l.GridSamplerInstance=oi,l.HTMLCanvasElementLuminanceSource=Ee,l.HybridBinarizer=fe,l.ITFReader=tt,l.IllegalArgumentException=O,l.IllegalStateException=Fn,l.InvertedLuminanceSource=Re,l.LuminanceSource=Ce,l.MathUtils=ot,l.MultiFormatOneDReader=ui,l.MultiFormatReader=Ao,l.MultiFormatWriter=iu,l.NotFoundException=ae,l.OneDReader=Vt,l.PDF417DecodedBitStreamParser=oe,l.PDF417DecoderErrorCorrection=Vi,l.PDF417Reader=Sn,l.PDF417ResultMetadata=qr,l.PerspectiveTransform=Jn,l.PlanarYUVLuminanceSource=Ii,l.QRCodeByteMatrix=fs,l.QRCodeDataMask=Xn,l.QRCodeDecodedBitStreamParser=zt,l.QRCodeDecoderErrorCorrectionLevel=at,l.QRCodeDecoderFormatInformation=gn,l.QRCodeEncoder=Ft,l.QRCodeEncoderQRCode=dr,l.QRCodeMaskUtil=Qt,l.QRCodeMatrixUtil=Fe,l.QRCodeMode=Ue,l.QRCodeReader=Hi,l.QRCodeVersion=Le,l.QRCodeWriter=Xr,l.RGBLuminanceSource=dl,l.RSS14Reader=Tt,l.RSSExpandedReader=pe,l.ReaderException=hs,l.ReedSolomonDecoder=hr,l.ReedSolomonEncoder=Ra,l.ReedSolomonException=In,l.Result=Te,l.ResultMetadataType=$e,l.ResultPoint=Me,l.StringUtils=_e,l.UnsupportedOperationException=At,l.VideoInputDevice=H,l.WhiteRectangleDetector=Jt,l.WriterException=Nt,l.ZXingArrays=se,l.ZXingCharset=So,l.ZXingInteger=Q,l.ZXingStandardCharsets=Da,l.ZXingStringBuilder=De,l.ZXingStringEncoding=We,l.ZXingSystem=z,l.createAbstractExpandedDecoder=zr,Object.defineProperty(l,"__esModule",{value:!0})}))})(Jl,Jl.exports)),Jl.exports}var $t=Pw();const Fw=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var _g=(function(){function o(r,l,f){if(this.formatMap=new Map([[Ie.QR_CODE,$t.BarcodeFormat.QR_CODE],[Ie.AZTEC,$t.BarcodeFormat.AZTEC],[Ie.CODABAR,$t.BarcodeFormat.CODABAR],[Ie.CODE_39,$t.BarcodeFormat.CODE_39],[Ie.CODE_93,$t.BarcodeFormat.CODE_93],[Ie.CODE_128,$t.BarcodeFormat.CODE_128],[Ie.DATA_MATRIX,$t.BarcodeFormat.DATA_MATRIX],[Ie.MAXICODE,$t.BarcodeFormat.MAXICODE],[Ie.ITF,$t.BarcodeFormat.ITF],[Ie.EAN_13,$t.BarcodeFormat.EAN_13],[Ie.EAN_8,$t.BarcodeFormat.EAN_8],[Ie.PDF_417,$t.BarcodeFormat.PDF_417],[Ie.RSS_14,$t.BarcodeFormat.RSS_14],[Ie.RSS_EXPANDED,$t.BarcodeFormat.RSS_EXPANDED],[Ie.UPC_A,$t.BarcodeFormat.UPC_A],[Ie.UPC_E,$t.BarcodeFormat.UPC_E],[Ie.UPC_EAN_EXTENSION,$t.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Fw)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=f;var p=this.createZXingFormats(r),g=new Map;g.set($t.DecodeHintType.POSSIBLE_FORMATS,p),g.set($t.DecodeHintType.TRY_HARDER,!1),this.hints=g}return o.prototype.decodeAsync=function(r){var l=this;return new Promise(function(f,p){try{f(l.decode(r))}catch(g){p(g)}})},o.prototype.decode=function(r){var l=new $t.MultiFormatReader(this.verbose,this.hints),f=new $t.HTMLCanvasElementLuminanceSource(r),p=new $t.BinaryBitmap(new $t.HybridBinarizer(f)),g=l.decode(p);return{text:g.text,format:C2.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},o.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,f,p){r.set(l,f)}),r},o.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},o.prototype.createZXingFormats=function(r){for(var l=[],f=0,p=r;f<p.length;f++){var g=p[f];this.formatMap.has(g)?l.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return l},o.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},o})(),Hw=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},Vw=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Cg=(function(){function o(r,l,f){if(this.formatMap=new Map([[Ie.QR_CODE,"qr_code"],[Ie.AZTEC,"aztec"],[Ie.CODABAR,"codabar"],[Ie.CODE_39,"code_39"],[Ie.CODE_93,"code_93"],[Ie.CODE_128,"code_128"],[Ie.DATA_MATRIX,"data_matrix"],[Ie.ITF,"itf"],[Ie.EAN_13,"ean_13"],[Ie.EAN_8,"ean_8"],[Ie.PDF_417,"pdf417"],[Ie.UPC_A,"upc_a"],[Ie.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!o.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=f;var p=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(p),!this.detector)throw"BarcodeDetector detector not supported"}return o.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},o.prototype.decodeAsync=function(r){return Hw(this,void 0,void 0,function(){var l,f;return Vw(this,function(p){switch(p.label){case 0:return[4,this.detector.detect(r)];case 1:if(l=p.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return f=this.selectLargestBarcode(l),[2,{text:f.rawValue,format:C2.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}]}})})},o.prototype.selectLargestBarcode=function(r){for(var l=null,f=0,p=0,g=r;p<g.length;p++){var b=g[p],S=b.boundingBox.width*b.boundingBox.height;S>f&&(f=S,l=b)}if(!l)throw"No largest barcode found";return l},o.prototype.createBarcodeDetectorFormats=function(r){for(var l=[],f=0,p=r;f<p.length;f++){var g=p[f];this.formatMap.has(g)?l.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},o.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},o.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,f,p){r.set(l,f)}),r},o.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},o})(),Tg=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},Ng=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Gw=(function(){function o(r,l,f,p){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=f,l&&Cg.isSupported()?(this.primaryDecoder=new Cg(r,f,p),this.secondaryDecoder=new _g(r,f,p)):this.primaryDecoder=new _g(r,f,p)}return o.prototype.decodeAsync=function(r){return Tg(this,void 0,void 0,function(){var l;return Ng(this,function(f){switch(f.label){case 0:l=performance.now(),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,f.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},o.prototype.decodeRobustlyAsync=function(r){return Tg(this,void 0,void 0,function(){var l,f;return Ng(this,function(p){switch(p.label){case 0:l=performance.now(),p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,p.sent()];case 3:if(f=p.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw f;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},o.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},o.prototype.possiblyLogPerformance=function(r){if(this.verbose){var l=performance.now()-r;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},o.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,l=0,f=this.executionResults;l<f.length;l++){var p=f[l];r+=p}var g=r/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},o})(),Lf=(function(){var o=function(r,l){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(f[g]=p[g])},o(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");o(r,l);function f(){this.constructor=r}r.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}})(),Vc=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},Gc=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},I2=(function(){function o(r,l){this.name=r,this.track=l}return o.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},o.prototype.apply=function(r){var l={};l[this.name]=r;var f={advanced:[l]};return this.track.applyConstraints(f)},o.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var l=r[this.name];return l}return null},o})(),Yw=(function(o){Lf(r,o);function r(l,f){return o.call(this,l,f)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(l){var f={};f[this.name]=l;var p={advanced:[f]};return this.track.applyConstraints(p)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),f=l[this.name];return{min:f.min,max:f.max,step:f.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(I2),qw=(function(o){Lf(r,o);function r(l){return o.call(this,"zoom",l)||this}return r})(Yw),Xw=(function(o){Lf(r,o);function r(l){return o.call(this,"torch",l)||this}return r})(I2),Ww=(function(){function o(r){this.track=r}return o.prototype.zoomFeature=function(){return new qw(this.track)},o.prototype.torchFeature=function(){return new Xw(this.track)},o})(),Zw=(function(){function o(r,l,f){this.isClosed=!1,this.parentElement=r,this.mediaStream=l,this.callbacks=f,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return o.prototype.createVideoElement=function(r){var l=document.createElement("video");return l.style.width="".concat(r,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},o.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var f=r.surface.clientWidth,p=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(f,p),r.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},o.create=function(r,l,f,p){return Vc(this,void 0,void 0,function(){var g,b;return Gc(this,function(S){switch(S.label){case 0:return g=new o(r,l,p),f.aspectRatio?(b={aspectRatio:f.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(b)]):[3,2];case 1:S.sent(),S.label=2;case 2:return g.setupSurface(),[2,g]}})})},o.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},o.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},o.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},o.prototype.resume=function(r){this.failIfClosed();var l=this,f=function(){setTimeout(r,200),l.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.play()},o.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},o.prototype.getSurface=function(){return this.failIfClosed(),this.surface},o.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},o.prototype.applyVideoConstraints=function(r){return Vc(this,void 0,void 0,function(){return Gc(this,function(l){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},o.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(l,f){var p=r.mediaStream.getVideoTracks(),g=p.length,b=0;r.mediaStream.getVideoTracks().forEach(function(S){r.mediaStream.removeTrack(S),S.stop(),++b,b>=g&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),l())})})},o.prototype.getCapabilities=function(){return new Ww(this.getFirstTrackOrFail())},o})(),Qw=(function(){function o(r){this.mediaStream=r}return o.prototype.render=function(r,l,f){return Vc(this,void 0,void 0,function(){return Gc(this,function(p){return[2,Zw.create(r,this.mediaStream,l,f)]})})},o.create=function(r){return Vc(this,void 0,void 0,function(){var l,f;return Gc(this,function(p){switch(p.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return f=p.sent(),[2,new o(f)]}})})},o})(),Og=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},Ig=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Kw=(function(){function o(){}return o.failIfNotSupported=function(){return Og(this,void 0,void 0,function(){return Ig(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new o]})})},o.prototype.create=function(r){return Og(this,void 0,void 0,function(){return Ig(this,function(l){return[2,Qw.create(r)]})})},o})(),Jw=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},$w=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},ev=(function(){function o(){}return o.retrieve=function(){if(navigator.mediaDevices)return o.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?o.getCamerasFromMediaStreamTrack():o.rejectWithError()},o.rejectWithError=function(){var r=Js.unableToQuerySupportedDevices();return o.isHttpsOrLocalhost()||(r=Js.insecureContextCameraQueryError()),Promise.reject(r)},o.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},o.getCamerasFromMediaDevices=function(){return Jw(this,void 0,void 0,function(){var r,l,f,p,g,b,S;return $w(this,function(_){switch(_.label){case 0:return r=function(v){for(var N=v.getVideoTracks(),O=0,B=N;O<B.length;O++){var j=B[O];j.enabled=!1,j.stop(),v.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(f=_.sent(),p=[],g=0,b=f;g<b.length;g++)S=b[g],S.kind==="videoinput"&&p.push({id:S.deviceId,label:S.label});return r(l),[2,p]}})})},o.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,l){var f=function(g){for(var b=[],S=0,_=g;S<_.length;S++){var v=_[S];v.kind==="video"&&b.push({id:v.id,label:v.label})}r(b)},p=MediaStreamTrack;p.getSources(f)})},o})(),ln;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.NOT_STARTED=1]="NOT_STARTED",o[o.SCANNING=2]="SCANNING",o[o.PAUSED=3]="PAUSED"})(ln||(ln={}));var tv=(function(){function o(){this.state=ln.NOT_STARTED,this.onGoingTransactionNewState=ln.UNKNOWN}return o.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},o.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},o.prototype.execute=function(){if(this.onGoingTransactionNewState===ln.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ln.UNKNOWN,this.directTransition(r)},o.prototype.cancel=function(){if(this.onGoingTransactionNewState===ln.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ln.UNKNOWN},o.prototype.getState=function(){return this.state},o.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ln.UNKNOWN)throw"Cannot transition to a new state, already under transition"},o.prototype.validateTransition=function(r){switch(this.state){case ln.UNKNOWN:throw"Transition from unknown is not allowed";case ln.NOT_STARTED:this.failIfNewStateIs(r,[ln.PAUSED]);break;case ln.SCANNING:break;case ln.PAUSED:break}},o.prototype.failIfNewStateIs=function(r,l){for(var f=0,p=l;f<p.length;f++){var g=p[f];if(r===g)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},o})(),nv=(function(){function o(r){this.stateManager=r}return o.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},o.prototype.directTransition=function(r){this.stateManager.directTransition(r)},o.prototype.getState=function(){return this.stateManager.getState()},o.prototype.canScanFile=function(){return this.stateManager.getState()===ln.NOT_STARTED},o.prototype.isScanning=function(){return this.stateManager.getState()!==ln.NOT_STARTED},o.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ln.SCANNING},o.prototype.isPaused=function(){return this.stateManager.getState()===ln.PAUSED},o})(),iv=(function(){function o(){}return o.create=function(){return new nv(new tv)},o})(),rv=(function(){var o=function(r,l){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(f[g]=p[g])},o(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");o(r,l);function f(){this.constructor=r}r.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}})(),Ai=(function(o){rv(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(Ki),av=(function(){function o(r,l){this.logger=l,this.fps=Ai.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=Ai.DEFAULT_DISABLE_FLIP}return o.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?O2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},o.prototype.isShadedBoxEnabled=function(){return!ur(this.qrbox)},o.create=function(r,l){return new o(r,l)},o})(),Rg=(function(){function o(r,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var f;typeof l=="boolean"?this.verbose=l===!0:l&&(f=l,this.verbose=f.verbose===!0,f.experimentalFeatures),this.logger=new N2(this.verbose),this.qrcode=new Gw(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(f),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=iv.create()}return o.prototype.start=function(r,l,f,p){var g=this;if(!r)throw"cameraIdOrConfig is required";if(!f||typeof f!="function")throw"qrCodeSuccessCallback is required and should be a function.";var b;p?b=p:b=this.verbose?this.logger.log:function(){};var S=av.create(l,this.logger);this.clearElement();var _=!1;S.videoConstraints&&(S.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=_,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:Ai.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var O=this,B=this.stateManagerProxy.startTransition(ln.SCANNING);return new Promise(function(j,U){var z=v?S.videoConstraints:O.createVideoConstraints(r);if(!z){B.cancel(),U("videoConstraints should be defined");return}var q={};(!v||S.aspectRatio)&&(q.aspectRatio=S.aspectRatio);var $={onRenderSurfaceReady:function(se,Q){O.setupUi(se,Q,S),O.isScanning=!0,O.foreverScan(S,f,b)}};Kw.failIfNotSupported().then(function(se){se.create(z).then(function(Q){return Q.render(g.element,q,$).then(function(ue){O.renderedCamera=ue,B.execute(),j(null)}).catch(function(ue){B.cancel(),U(ue)})}).catch(function(Q){B.cancel(),U(Js.errorGettingUserMedia(Q))})}).catch(function(se){B.cancel(),U(Js.cameraStreamingNotSupported())})})},o.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ln.PAUSED),this.showPausedState(),(ur(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},o.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,l=function(){r.stateManagerProxy.directTransition(ln.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},o.prototype.getState=function(){return this.stateManagerProxy.getState()},o.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(ln.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var f=function(){if(r.element){var g=document.getElementById(Ai.SHADED_REGION_ELEMENT_ID);g&&r.element.removeChild(g)}},p=this;return this.renderedCamera.close().then(function(){return p.renderedCamera=null,p.element&&(p.element.removeChild(p.canvasElement),p.canvasElement=null),f(),p.qrRegion&&(p.qrRegion=null),p.context&&(p.context=null),l.execute(),p.hidePausedState(),p.isScanning=!1,Promise.resolve()})},o.prototype.scanFile=function(r,l){return this.scanFileV2(r,l).then(function(f){return f.decodedText})},o.prototype.scanFileV2=function(r,l){var f=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ur(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(p,g){f.possiblyCloseLastScanImageFile(),f.clearElement(),f.lastScanImageFile=URL.createObjectURL(r);var b=new Image;b.onload=function(){var S=b.width,_=b.height,v=document.getElementById(f.elementId),N=v.clientWidth?v.clientWidth:Ai.DEFAULT_WIDTH,O=Math.max(v.clientHeight?v.clientHeight:_,Ai.FILE_SCAN_MIN_HEIGHT),B=f.computeCanvasDrawConfig(S,_,N,O);if(l){var j=f.createCanvasElement(N,O,"qr-canvas-visible");j.style.display="inline-block",v.appendChild(j);var U=j.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=N,U.canvas.height=O,U.drawImage(b,0,0,S,_,B.x,B.y,B.width,B.height)}var z=Ai.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(b.width,B.width),$=Math.max(b.height,B.height),se=q+2*z,Q=$+2*z,ue=f.createCanvasElement(se,Q);v.appendChild(ue);var Ne=ue.getContext("2d");if(!Ne)throw"Unable to get 2d context from canvas";Ne.canvas.width=se,Ne.canvas.height=Q,Ne.drawImage(b,0,0,S,_,z,z,q,$);try{f.qrcode.decodeRobustlyAsync(ue).then(function(ve){p(Ag.createFromQrcodeResult(ve))}).catch(g)}catch(ve){g("QR code parse error, error = ".concat(ve))}},b.onerror=g,b.onabort=g,b.onstalled=g,b.onsuspend=g,b.src=URL.createObjectURL(r)})},o.prototype.clear=function(){this.clearElement()},o.getCameras=function(){return ev.retrieve()},o.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},o.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},o.prototype.applyVideoConstraints=function(r){if(r){if(!O2.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},o.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},o.prototype.getSupportedFormats=function(r){var l=[Ie.QR_CODE,Ie.AZTEC,Ie.CODABAR,Ie.CODE_39,Ie.CODE_93,Ie.CODE_128,Ie.DATA_MATRIX,Ie.MAXICODE,Ie.ITF,Ie.EAN_13,Ie.EAN_8,Ie.PDF_417,Ie.RSS_14,Ie.RSS_EXPANDED,Ie.UPC_A,Ie.UPC_E,Ie.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return l;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var f=[],p=0,g=r.formatsToSupport;p<g.length;p++){var b=g[p];jw(b)?f.push(b):this.logger.warn("Invalid format: ".concat(b," passed in config, ignoring."))}if(f.length===0)throw"None of formatsToSupport match supported values.";return f},o.prototype.getUseBarCodeDetectorIfSupported=function(r){if(ur(r))return!0;if(!ur(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(ur(r.experimentalFeatures))return!0;var l=r.experimentalFeatures;return ur(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},o.prototype.validateQrboxSize=function(r,l,f){var p=this,g=f.qrbox;this.validateQrboxConfig(g);var b=this.toQrdimensions(r,l,g),S=function(v){if(v<Ai.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ai.MIN_QR_BOX_SIZE,"px.")},_=function(v){return v>r&&(p.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=r),v};S(b.width),S(b.height),b.width=_(b.width)},o.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},o.prototype.toQrdimensions=function(r,l,f){if(typeof f=="number")return{width:f,height:f};if(typeof f=="function")try{return f(r,l)}catch(p){throw new Error("qrbox config was passed as a function but it failed with unknown error"+p)}return f},o.prototype.setupUi=function(r,l,f){f.isShadedBoxEnabled()&&this.validateQrboxSize(r,l,f);var p=ur(f.qrbox)?{width:r,height:l}:f.qrbox;this.validateQrboxConfig(p);var g=this.toQrdimensions(r,l,p);g.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var b=f.isShadedBoxEnabled()&&g.height<=l,S={x:0,y:0,width:r,height:l},_=b?this.getShadedRegionBounds(r,l,g):S,v=this.createCanvasElement(_.width,_.height),N={willReadFrequently:!0},O=v.getContext("2d",N);O.canvas.width=_.width,O.canvas.height=_.height,this.element.append(v),b&&this.possiblyInsertShadingElement(this.element,r,l,g),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=O,this.canvasElement=v},o.prototype.createScannerPausedUiElement=function(r){var l=document.createElement("div");l.innerText=Js.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",r.appendChild(l),this.scannerPausedUiElement=l},o.prototype.scanContext=function(r,l){var f=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(p){return r(p.text,Ag.createFromQrcodeResult(p)),f.possiblyUpdateShaders(!0),!0}).catch(function(p){f.possiblyUpdateShaders(!1);var g=Js.codeParseError(p);return l(g,T2.createFrom(g)),!1})},o.prototype.foreverScan=function(r,l,f){var p=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),b=g.videoWidth/g.clientWidth,S=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*b,v=this.qrRegion.height*S,N=this.qrRegion.x*b,O=this.qrRegion.y*S;this.context.drawImage(g,N,O,_,v,0,0,this.qrRegion.width,this.qrRegion.height);var B=function(){p.foreverScanTimeout=setTimeout(function(){p.foreverScan(r,l,f)},p.getTimeoutFps(r.fps))};this.scanContext(l,f).then(function(j){!j&&r.disableFlip!==!0?(p.context.translate(p.context.canvas.width,0),p.context.scale(-1,1),p.scanContext(l,f).finally(function(){B()})):B()}).catch(function(j){p.logger.logError("Error happend while scanning context",j),B()})}},o.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var l="facingMode",f="deviceId",p={user:!0,environment:!0},g="exact",b=function(U){if(U in p)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(U,"'")},S=Object.keys(r);if(S.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(S.length," keys");var _=Object.keys(r)[0];if(_!==l&&_!==f)throw"Only '".concat(l,"' and '").concat(f,"' ")+" are supported for 'cameraIdOrConfig'";if(_===l){var v=r.facingMode;if(typeof v=="string"){if(b(v))return{facingMode:v}}else if(typeof v=="object")if(g in v){if(b(v["".concat(g)]))return{facingMode:{exact:v["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var N=typeof v;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var O=r.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(g in O)return{deviceId:{exact:O["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var B=typeof O;throw"Invalid type of 'deviceId' = ".concat(B)}}}var j=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},o.prototype.computeCanvasDrawConfig=function(r,l,f,p){if(r<=f&&l<=p){var g=(f-r)/2,b=(p-l)/2;return{x:g,y:b,width:r,height:l}}else{var S=r,_=l;return r>f&&(l=f/r*l,r=f),l>p&&(r=p/l*r,l=p),this.logger.log("Image downsampled from "+"".concat(S,"X").concat(_)+" to ".concat(r,"X").concat(l,".")),this.computeCanvasDrawConfig(r,l,f,p)}},o.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},o.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=r?Ai.BORDER_SHADER_MATCH_COLOR:Ai.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},o.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},o.prototype.createCanvasElement=function(r,l,f){var p=r,g=l,b=document.createElement("canvas");return b.style.width="".concat(p,"px"),b.style.height="".concat(g,"px"),b.style.display="none",b.id=ur(f)?"qr-canvas":f,b},o.prototype.getShadedRegionBounds=function(r,l,f){if(f.width>r||f.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-f.width)/2,y:(l-f.height)/2,width:f.width,height:f.height}},o.prototype.possiblyInsertShadingElement=function(r,l,f,p){if(!(l-p.width<1||f-p.height<1)){var g=document.createElement("div");g.style.position="absolute";var b=(l-p.width)/2,S=(f-p.height)/2;if(g.style.borderLeft="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Ai.SHADED_REGION_ELEMENT_ID),l-p.width<11||f-p.height<11)this.hasBorderShaders=!1;else{var _=5,v=40;this.insertShaderBorders(g,v,_,-_,null,0,!0),this.insertShaderBorders(g,v,_,-_,null,0,!1),this.insertShaderBorders(g,v,_,null,-_,0,!0),this.insertShaderBorders(g,v,_,null,-_,0,!1),this.insertShaderBorders(g,_,v+_,-_,null,-_,!0),this.insertShaderBorders(g,_,v+_,null,-_,-_,!0),this.insertShaderBorders(g,_,v+_,-_,null,-_,!1),this.insertShaderBorders(g,_,v+_,null,-_,-_,!1),this.hasBorderShaders=!0}r.append(g)}},o.prototype.insertShaderBorders=function(r,l,f,p,g,b,S){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=Ai.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(l,"px"),_.style.height="".concat(f,"px"),p!==null&&(_.style.top="".concat(p,"px")),g!==null&&(_.style.bottom="".concat(g,"px")),S?_.style.left="".concat(b,"px"):_.style.right="".concat(b,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),r.appendChild(_)},o.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},o.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},o.prototype.getTimeoutFps=function(r){return 1e3/r},o})(),kf="data:image/svg+xml;base64,",sv=kf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",lv=kf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Dg=kf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ov="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Mg=(function(){function o(){}return o.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},o})(),cv=(function(){function o(){this.data=Mg.createDefault();var r=localStorage.getItem(o.LOCAL_STORAGE_KEY);r?this.data=JSON.parse(r):this.reset()}return o.prototype.hasCameraPermissions=function(){return this.data.hasPermission},o.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},o.prototype.setHasPermission=function(r){this.data.hasPermission=r,this.flush()},o.prototype.setLastUsedCameraId=function(r){this.data.lastUsedCameraId=r,this.flush()},o.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},o.prototype.reset=function(){this.data=Mg.createDefault(),this.flush()},o.prototype.flush=function(){localStorage.setItem(o.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},o.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",o})(),uv=(function(){function o(){this.infoDiv=document.createElement("div")}return o.prototype.renderInto=function(r){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Eg.poweredBy();var l=document.createElement("a");l.innerText="ScanApp",l.href="https://scanapp.org",l.target="new",l.style.color="white",this.infoDiv.appendChild(l);var f=document.createElement("br"),p=document.createElement("br");this.infoDiv.appendChild(f),this.infoDiv.appendChild(p);var g=document.createElement("a");g.innerText=Eg.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),r.appendChild(this.infoDiv)},o.prototype.show=function(){this.infoDiv.style.display="block"},o.prototype.hide=function(){this.infoDiv.style.display="none"},o})(),hv=(function(){function o(r,l){this.isShowingInfoIcon=!0,this.onTapIn=r,this.onTapOut=l,this.infoIcon=document.createElement("img")}return o.prototype.renderInto=function(r){var l=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Dg,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(f){return l.onHoverIn()},this.infoIcon.onmouseout=function(f){return l.onHoverOut()},this.infoIcon.onclick=function(f){return l.onClick()},r.appendChild(this.infoIcon)},o.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},o.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},o.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ov,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Dg,this.infoIcon.style.opacity="0.6")},o})(),fv=(function(){function o(){var r=this;this.infoDiv=new uv,this.infoIcon=new hv(function(){r.infoDiv.show()},function(){r.infoDiv.hide()})}return o.prototype.renderInto=function(r){this.infoDiv.renderInto(r),this.infoIcon.renderInto(r)},o})(),dv=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},gv=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Bg=(function(){function o(){}return o.hasPermissions=function(){return dv(this,void 0,void 0,function(){var r,l,f,p;return gv(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(r=g.sent(),l=0,f=r;l<f.length;l++)if(p=f[l],p.kind==="videoinput"&&p.label)return[2,!0];return[2,!1]}})})},o})(),va=(function(){function o(r){this.supportedScanTypes=this.validateAndReturnScanTypes(r)}return o.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},o.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},o.prototype.isCameraScanRequired=function(){for(var r=0,l=this.supportedScanTypes;r<l.length;r++){var f=l[r];if(o.isCameraScanType(f))return!0}return!1},o.isCameraScanType=function(r){return r===Ea.SCAN_TYPE_CAMERA},o.isFileScanType=function(r){return r===Ea.SCAN_TYPE_FILE},o.prototype.validateAndReturnScanTypes=function(r){if(!r||r.length===0)return Ki.DEFAULT_SUPPORTED_SCAN_TYPE;var l=Ki.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(r.length>l)throw"Max ".concat(l," values expected for ")+"supportedScanTypes";for(var f=0,p=r;f<p.length;f++){var g=p[f];if(!Ki.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return r},o})(),_i=(function(){function o(){}return o.ALL_ELEMENT_CLASS="html5-qrcode-element",o.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",o.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",o.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",o.TORCH_BUTTON_ID="html5-qrcode-button-torch",o.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",o.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",o.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",o.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",o.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",o.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",o})(),Lr=(function(){function o(){}return o.createElement=function(r,l){var f=document.createElement(r);return f.id=l,f.classList.add(_i.ALL_ELEMENT_CLASS),r==="button"&&f.setAttribute("type","button"),f},o})(),R2=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},D2=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Lg=(function(){function o(r,l,f){this.isTorchOn=!1,this.torchCapability=r,this.buttonController=l,this.onTorchActionFailureCallback=f}return o.prototype.isTorchEnabled=function(){return this.isTorchOn},o.prototype.flipState=function(){return R2(this,void 0,void 0,function(){var r,l;return D2(this,function(f){switch(f.label){case 0:this.buttonController.disable(),r=!this.isTorchOn,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.torchCapability.apply(r)];case 2:return f.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),r),[3,4];case 3:return l=f.sent(),this.propagateFailure(r,l),this.buttonController.enable(),[3,4];case 4:return[2]}})})},o.prototype.updateUiBasedOnLatestSettings=function(r,l){r===l?(this.buttonController.setText(l?Bt.torchOffButton():Bt.torchOnButton()),this.isTorchOn=l):this.propagateFailure(l),this.buttonController.enable()},o.prototype.propagateFailure=function(r,l){var f=r?Bt.torchOnFailedMessage():Bt.torchOffFailedMessage();l&&(f+="; Error = "+l),this.onTorchActionFailureCallback(f)},o.prototype.reset=function(){this.isTorchOn=!1},o})(),mv=(function(){function o(r,l){this.onTorchActionFailureCallback=l,this.torchButton=Lr.createElement("button",_i.TORCH_BUTTON_ID),this.torchController=new Lg(r,this,l)}return o.prototype.render=function(r,l){var f=this;this.torchButton.innerText=Bt.torchOnButton(),this.torchButton.style.display=l.display,this.torchButton.style.marginLeft=l.marginLeft;var p=this;this.torchButton.addEventListener("click",function(g){return R2(f,void 0,void 0,function(){return D2(this,function(b){switch(b.label){case 0:return[4,p.torchController.flipState()];case 1:return b.sent(),p.torchController.isTorchEnabled()?(p.torchButton.classList.remove(_i.TORCH_BUTTON_CLASS_TORCH_OFF),p.torchButton.classList.add(_i.TORCH_BUTTON_CLASS_TORCH_ON)):(p.torchButton.classList.remove(_i.TORCH_BUTTON_CLASS_TORCH_ON),p.torchButton.classList.add(_i.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),r.appendChild(this.torchButton)},o.prototype.updateTorchCapability=function(r){this.torchController=new Lg(r,this,this.onTorchActionFailureCallback)},o.prototype.getTorchButton=function(){return this.torchButton},o.prototype.hide=function(){this.torchButton.style.display="none"},o.prototype.show=function(){this.torchButton.style.display="inline-block"},o.prototype.disable=function(){this.torchButton.disabled=!0},o.prototype.enable=function(){this.torchButton.disabled=!1},o.prototype.setText=function(r){this.torchButton.innerText=r},o.prototype.reset=function(){this.torchButton.innerText=Bt.torchOnButton(),this.torchController.reset()},o.create=function(r,l,f,p){var g=new o(l,p);return g.render(r,f),g},o})(),pv=(function(){function o(r,l,f){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=l?"block":"none",r.appendChild(this.fileBasedScanRegion);var p=document.createElement("label");p.setAttribute("for",this.getFileScanInputId()),p.style.display="inline-block",this.fileBasedScanRegion.appendChild(p),this.fileSelectionButton=Lr.createElement("button",_i.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(S){p.click()}),p.append(this.fileSelectionButton),this.fileScanInput=Lr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",p.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(S){if(!(S==null||S.target==null)){var _=S.target;if(!(_.files&&_.files.length===0)){var v=_.files,N=v[0],O=N.name;g.setImageNameToButton(O),f(N)}}});var b=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(b),this.fileBasedScanRegion.addEventListener("dragenter",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(S){S.stopPropagation(),S.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var _=S.dataTransfer;if(_){var v=_.files;if(!v||v.length===0)return;for(var N=!1,O=0;O<v.length;++O){var B=v.item(O);if(B){var j=/image.*/;if(B.type.match(j)){N=!0;var U=B.name;g.setImageNameToButton(U),f(B),b.innerText=Bt.dragAndDropMessage();break}}}N||(b.innerText=Bt.dragAndDropMessageOnlyImages())}})}return o.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},o.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},o.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},o.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},o.prototype.createFileBasedScanRegion=function(){var r=document.createElement("div");return r.style.textAlign="center",r.style.margin="auto",r.style.width="80%",r.style.maxWidth="600px",r.style.border=this.fileBasedScanRegionDefaultBorder(),r.style.padding="10px",r.style.marginBottom="10px",r},o.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},o.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},o.prototype.createDragAndDropMessage=function(){var r=document.createElement("div");return r.innerText=Bt.dragAndDropMessage(),r.style.fontWeight="400",r},o.prototype.setImageNameToButton=function(r){var l=20;if(r.length>l){var f=r.substring(0,8),p=r.length,g=r.substring(p-8,p);r="".concat(f,"....").concat(g)}var b=Bt.fileSelectionChooseAnother()+" - "+r;this.fileSelectionButton.innerText=b},o.prototype.setInitialValueToButton=function(){var r=Bt.fileSelectionChooseImage()+" - "+Bt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=r},o.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},o.create=function(r,l,f){var p=new o(r,l,f);return p},o})(),xv=(function(){function o(r){this.selectElement=Lr.createElement("select",_i.CAMERA_SELECTION_SELECT_ID),this.cameras=r,this.options=[]}return o.prototype.render=function(r){var l=document.createElement("span");l.style.marginRight="10px";var f=this.cameras.length;if(f===0)throw new Error("No cameras found");if(f===1)l.style.display="none";else{var p=Bt.selectCamera();l.innerText="".concat(p," (").concat(this.cameras.length,")  ")}for(var g=1,b=0,S=this.cameras;b<S.length;b++){var _=S[b],v=_.id,N=_.label==null?v:_.label;(!N||N==="")&&(N=[Bt.anonymousCameraPrefix(),g++].join(" "));var O=document.createElement("option");O.value=v,O.innerText=N,this.options.push(O),this.selectElement.appendChild(O)}l.appendChild(this.selectElement),r.appendChild(l)},o.prototype.disable=function(){this.selectElement.disabled=!0},o.prototype.isDisabled=function(){return this.selectElement.disabled===!0},o.prototype.enable=function(){this.selectElement.disabled=!1},o.prototype.getValue=function(){return this.selectElement.value},o.prototype.hasValue=function(r){for(var l=0,f=this.options;l<f.length;l++){var p=f[l];if(p.value===r)return!0}return!1},o.prototype.setValue=function(r){if(!this.hasValue(r))throw new Error("".concat(r," is not present in the camera list."));this.selectElement.value=r},o.prototype.hasSingleItem=function(){return this.cameras.length===1},o.prototype.numCameras=function(){return this.cameras.length},o.create=function(r,l){var f=new o(l);return f.render(r),f},o})(),yv=(function(){function o(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Lr.createElement("input",_i.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return o.prototype.render=function(r,l){this.zoomElementContainer.style.display=l?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",r.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var f=Bt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(f),this.rangeText.style.marginRight="10px";var p=this;this.rangeInput.addEventListener("input",function(){return p.onValueChange()}),this.rangeInput.addEventListener("change",function(){return p.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},o.prototype.onValueChange=function(){var r=Bt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},o.prototype.setValues=function(r,l,f,p){this.rangeInput.min=r.toString(),this.rangeInput.max=l.toString(),this.rangeInput.step=p.toString(),this.rangeInput.value=f.toString(),this.onValueChange()},o.prototype.show=function(){this.zoomElementContainer.style.display="block"},o.prototype.hide=function(){this.zoomElementContainer.style.display="none"},o.prototype.setOnCameraZoomValueChangeCallback=function(r){this.onChangeCallback=r},o.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},o.create=function(r,l){var f=new o;return f.render(r,l),f},o})(),Ei;(function(o){o[o.STATUS_DEFAULT=0]="STATUS_DEFAULT",o[o.STATUS_SUCCESS=1]="STATUS_SUCCESS",o[o.STATUS_WARNING=2]="STATUS_WARNING",o[o.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ei||(Ei={}));function wv(o){return{fps:o.fps,qrbox:o.qrbox,aspectRatio:o.aspectRatio,disableFlip:o.disableFlip,videoConstraints:o.videoConstraints}}function vv(o,r){return{formatsToSupport:o.formatsToSupport,useBarCodeDetectorIfSupported:o.useBarCodeDetectorIfSupported,experimentalFeatures:o.experimentalFeatures,verbose:r}}var bv=(function(){function o(r,l,f){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=r,this.config=this.createConfig(l),this.verbose=f===!0,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.scanTypeSelector=new va(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new N2(this.verbose),this.persistedDataManager=new cv,l.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return o.prototype.render=function(r,l){var f=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,b){if(r)r(g,b);else{if(f.lastMatchFound===g)return;f.lastMatchFound=g,f.setHeaderMessage(Bt.lastMatch(g),Ei.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,b){l&&l(g,b)};var p=document.getElementById(this.elementId);if(!p)throw"HTML Element with id=".concat(this.elementId," not found");p.innerHTML="",this.createBasicLayout(p),this.html5Qrcode=new Rg(this.getScanRegionId(),vv(this.config,this.verbose))},o.prototype.pause=function(r){(ur(r)||r!==!0)&&(r=!1),this.getHtml5QrcodeOrFail().pause(r)},o.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},o.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},o.prototype.clear=function(){var r=this,l=function(){var f=document.getElementById(r.elementId);f&&(f.innerHTML="",r.resetBasicLayout(f))};return this.html5Qrcode?new Promise(function(f,p){if(!r.html5Qrcode){f();return}r.html5Qrcode.isScanning?r.html5Qrcode.stop().then(function(g){if(!r.html5Qrcode){f();return}r.html5Qrcode.clear(),l(),f()}).catch(function(g){r.verbose&&r.logger.logError("Unable to stop qrcode scanner",g),p(g)}):(r.html5Qrcode.clear(),l(),f())}):Promise.resolve()},o.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},o.prototype.applyVideoConstraints=function(r){return this.getHtml5QrcodeOrFail().applyVideoConstraints(r)},o.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},o.prototype.createConfig=function(r){return r?(r.fps||(r.fps=Ki.SCAN_DEFAULT_FPS),r.rememberLastUsedCamera!==!Ki.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(r.rememberLastUsedCamera=Ki.DEFAULT_REMEMBER_LAST_CAMERA_USED),r.supportedScanTypes||(r.supportedScanTypes=Ki.DEFAULT_SUPPORTED_SCAN_TYPE),r):{fps:Ki.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ki.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ki.DEFAULT_SUPPORTED_SCAN_TYPE}},o.prototype.createBasicLayout=function(r){r.style.position="relative",r.style.padding="0px",r.style.border="1px solid silver",this.createHeader(r);var l=document.createElement("div"),f=this.getScanRegionId();l.id=f,l.style.width="100%",l.style.minHeight="100px",l.style.textAlign="center",r.appendChild(l),va.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var p=document.createElement("div"),g=this.getDashboardId();p.id=g,p.style.width="100%",r.appendChild(p),this.setupInitialDashboard(p)},o.prototype.resetBasicLayout=function(r){r.style.border="none"},o.prototype.setupInitialDashboard=function(r){this.createSection(r),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},o.prototype.createHeader=function(r){var l=document.createElement("div");l.style.textAlign="left",l.style.margin="0px",r.appendChild(l);var f=new fv;f.renderInto(l);var p=document.createElement("div");p.id=this.getHeaderMessageContainerId(),p.style.display="none",p.style.textAlign="center",p.style.fontSize="14px",p.style.padding="2px 10px",p.style.margin="4px",p.style.borderTop="1px solid #f6f6f6",l.appendChild(p)},o.prototype.createSection=function(r){var l=document.createElement("div");l.id=this.getDashboardSectionId(),l.style.width="100%",l.style.padding="10px 0px 10px 0px",l.style.textAlign="left",r.appendChild(l)},o.prototype.createCameraListUi=function(r,l,f){var p=this;p.showHideScanTypeSwapLink(!1),p.setHeaderMessage(Bt.cameraPermissionRequesting());var g=function(){f||p.createPermissionButton(r,l)};Rg.getCameras().then(function(b){p.persistedDataManager.setHasPermission(!0),p.showHideScanTypeSwapLink(!0),p.resetHeaderMessage(),b&&b.length>0?(r.removeChild(l),p.renderCameraSelection(b)):(p.setHeaderMessage(Bt.noCameraFound(),Ei.STATUS_WARNING),g())}).catch(function(b){p.persistedDataManager.setHasPermission(!1),f?f.disabled=!1:g(),p.setHeaderMessage(b,Ei.STATUS_WARNING),p.showHideScanTypeSwapLink(!0)})},o.prototype.createPermissionButton=function(r,l){var f=this,p=Lr.createElement("button",this.getCameraPermissionButtonId());p.innerText=Bt.cameraPermissionTitle(),p.addEventListener("click",function(){p.disabled=!0,f.createCameraListUi(r,l,p)}),l.appendChild(p)},o.prototype.createPermissionsUi=function(r,l){var f=this;if(va.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Bg.hasPermissions().then(function(p){p?f.createCameraListUi(r,l):(f.persistedDataManager.setHasPermission(!1),f.createPermissionButton(r,l))}).catch(function(p){f.persistedDataManager.setHasPermission(!1),f.createPermissionButton(r,l)});return}this.createPermissionButton(r,l)},o.prototype.createSectionControlPanel=function(){var r=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");r.appendChild(l);var f=document.createElement("div");f.id=this.getDashboardSectionCameraScanRegionId(),f.style.display=va.isCameraScanType(this.currentScanType)?"block":"none",l.appendChild(f);var p=document.createElement("div");p.style.textAlign="center",f.appendChild(p),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(f,p),this.renderFileScanUi(l)},o.prototype.renderFileScanUi=function(r){var l=va.isFileScanType(this.currentScanType),f=this,p=function(g){if(!f.html5Qrcode)throw"html5Qrcode not defined";va.isFileScanType(f.currentScanType)&&(f.setHeaderMessage(Bt.loadingImage()),f.html5Qrcode.scanFileV2(g,!0).then(function(b){f.resetHeaderMessage(),f.qrCodeSuccessCallback(b.decodedText,b)}).catch(function(b){f.setHeaderMessage(b,Ei.STATUS_WARNING),f.qrCodeErrorCallback(b,T2.createFrom(b))}))};this.fileSelectionUi=pv.create(r,l,p)},o.prototype.renderCameraSelection=function(r){var l=this,f=this,p=document.getElementById(this.getDashboardSectionCameraScanRegionId());p.style.textAlign="center";var g=yv.create(p,!1),b=function(z){var q=z.zoomFeature();if(q.isSupported()){g.setOnCameraZoomValueChangeCallback(function(se){q.apply(se)});var $=1;l.config.defaultZoomValueIfSupported&&($=l.config.defaultZoomValueIfSupported),$=Uw($,q.min(),q.max()),g.setValues(q.min(),q.max(),$,q.step()),g.show()}},S=xv.create(p,r),_=document.createElement("span"),v=Lr.createElement("button",_i.CAMERA_START_BUTTON_ID);v.innerText=Bt.scanButtonStartScanningText(),_.appendChild(v);var N=Lr.createElement("button",_i.CAMERA_STOP_BUTTON_ID);N.innerText=Bt.scanButtonStopScanningText(),N.style.display="none",N.disabled=!0,_.appendChild(N);var O,B=function(z){if(!z.torchFeature().isSupported()){O&&O.hide();return}O?O.updateTorchCapability(z.torchFeature()):O=mv.create(_,z.torchFeature(),{display:"none",marginLeft:"5px"},function(q){f.setHeaderMessage(q,Ei.STATUS_WARNING)}),O.show()};p.appendChild(_);var j=function(z){z||(v.style.display="none"),v.innerText=Bt.scanButtonStartScanningText(),v.style.opacity="1",v.disabled=!1,z&&(v.style.display="inline-block")};if(v.addEventListener("click",function(z){v.innerText=Bt.scanButtonScanningStarting(),S.disable(),v.disabled=!0,v.style.opacity="0.5",l.scanTypeSelector.hasMoreThanOneScanType()&&f.showHideScanTypeSwapLink(!1),f.resetHeaderMessage();var q=S.getValue();f.persistedDataManager.setLastUsedCameraId(q),f.html5Qrcode.start(q,wv(f.config),f.qrCodeSuccessCallback,f.qrCodeErrorCallback).then(function($){N.disabled=!1,N.style.display="inline-block",j(!1);var se=f.html5Qrcode.getRunningTrackCameraCapabilities();l.config.showTorchButtonIfSupported===!0&&B(se),l.config.showZoomSliderIfSupported===!0&&b(se)}).catch(function($){f.showHideScanTypeSwapLink(!0),S.enable(),j(!0),f.setHeaderMessage($,Ei.STATUS_WARNING)})}),S.hasSingleItem()&&v.click(),N.addEventListener("click",function(z){if(!f.html5Qrcode)throw"html5Qrcode not defined";N.disabled=!0,f.html5Qrcode.stop().then(function(q){l.scanTypeSelector.hasMoreThanOneScanType()&&f.showHideScanTypeSwapLink(!0),S.enable(),v.disabled=!1,N.style.display="none",v.style.display="inline-block",O&&(O.reset(),O.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),f.insertCameraScanImageToScanRegion()}).catch(function(q){N.disabled=!1,f.setHeaderMessage(q,Ei.STATUS_WARNING)})}),f.persistedDataManager.getLastUsedCameraId()){var U=f.persistedDataManager.getLastUsedCameraId();S.hasValue(U)?(S.setValue(U),v.click()):f.persistedDataManager.resetLastUsedCameraId()}},o.prototype.createSectionSwap=function(){var r=this,l=Bt.textIfCameraScanSelected(),f=Bt.textIfFileScanSelected(),p=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var b=Lr.createElement("span",this.getDashboardSectionSwapLinkId());b.style.textDecoration="underline",b.style.cursor="pointer",b.innerText=va.isCameraScanType(this.currentScanType)?l:f,b.addEventListener("click",function(){if(!r.sectionSwapAllowed){r.verbose&&r.logger.logError("Section swap called when not allowed");return}r.resetHeaderMessage(),r.fileSelectionUi.resetValue(),r.sectionSwapAllowed=!1,va.isCameraScanType(r.currentScanType)?(r.clearScanRegion(),r.getCameraScanRegion().style.display="none",r.fileSelectionUi.show(),b.innerText=f,r.currentScanType=Ea.SCAN_TYPE_FILE,r.insertFileScanImageToScanRegion()):(r.clearScanRegion(),r.getCameraScanRegion().style.display="block",r.fileSelectionUi.hide(),b.innerText=l,r.currentScanType=Ea.SCAN_TYPE_CAMERA,r.insertCameraScanImageToScanRegion(),r.startCameraScanIfPermissionExistsOnSwap()),r.sectionSwapAllowed=!0}),g.appendChild(b),p.appendChild(g)},o.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var r=this,l=this;if(this.persistedDataManager.hasCameraPermissions()){Bg.hasPermissions().then(function(f){if(f){var p=document.getElementById(l.getCameraPermissionButtonId());if(!p)throw r.logger.logError("Permission button not found, fail;"),"Permission button not found";p.click()}else l.persistedDataManager.setHasPermission(!1)}).catch(function(f){l.persistedDataManager.setHasPermission(!1)});return}},o.prototype.resetHeaderMessage=function(){var r=document.getElementById(this.getHeaderMessageContainerId());r.style.display="none"},o.prototype.setHeaderMessage=function(r,l){l||(l=Ei.STATUS_DEFAULT);var f=this.getHeaderMessageDiv();switch(f.innerText=r,f.style.display="block",l){case Ei.STATUS_SUCCESS:f.style.background="rgba(106, 175, 80, 0.26)",f.style.color="#477735";break;case Ei.STATUS_WARNING:f.style.background="rgba(203, 36, 49, 0.14)",f.style.color="#cb2431";break;case Ei.STATUS_DEFAULT:default:f.style.background="rgba(0, 0, 0, 0)",f.style.color="rgb(17, 17, 17)";break}},o.prototype.showHideScanTypeSwapLink=function(r){this.scanTypeSelector.hasMoreThanOneScanType()&&(r!==!0&&(r=!1),this.sectionSwapAllowed=r,this.getDashboardSectionSwapLink().style.display=r?"inline-block":"none")},o.prototype.insertCameraScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){l.innerHTML="<br>",l.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(f){l.innerHTML="<br>",l.appendChild(r.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=sv,this.cameraScanImage.alt=Bt.cameraScanAltText()},o.prototype.insertFileScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.fileScanImage){l.innerHTML="<br>",l.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(f){l.innerHTML="<br>",l.appendChild(r.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=lv,this.fileScanImage.alt=Bt.fileScanAltText()},o.prototype.clearScanRegion=function(){var r=document.getElementById(this.getScanRegionId());r.innerHTML=""},o.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},o.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},o.prototype.getDashboardSectionSwapLinkId=function(){return _i.SCAN_TYPE_CHANGE_ANCHOR_ID},o.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},o.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},o.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},o.prototype.getCameraPermissionButtonId=function(){return _i.CAMERA_PERMISSION_BUTTON_ID},o.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},o.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},o.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},o})();function Av(){const[o,r]=de.useState([]),[l,f]=de.useState(0);de.useEffect(()=>{p()},[]);async function p(){try{if(!Xe)return;const{data:g,error:b}=await Xe.from("attendance").select("date").eq("status","PRESENT").order("date",{ascending:!0});if(b)throw b;const S={};g.forEach(B=>{S[B.date]=(S[B.date]||0)+1});const N=Object.keys(S).sort((B,j)=>new Date(B)-new Date(j)).slice(-5).map(B=>({date:B,count:S[B],label:new Date(B).toLocaleDateString(void 0,{month:"short",day:"numeric"})})),O=Math.max(...N.map(B=>B.count),1);r(N),f(O)}catch(g){console.error(g)}}return o.length===0?null:E.jsxs("div",{className:"chart-card fade-in",children:[E.jsxs("div",{className:"chart-header",children:[E.jsx(lw,{size:16}),E.jsx("span",{children:"Attendance Trend"})]}),E.jsx("div",{className:"chart-container",children:o.map(g=>E.jsxs("div",{className:"chart-bar-group",children:[E.jsx("span",{className:"chart-value",children:g.count}),E.jsx("div",{className:"chart-bar",style:{height:"100%"},children:E.jsx("div",{style:{height:`${g.count/l*100}%`,background:"var(--primary)",borderRadius:"6px 6px 0 0",width:"100%",position:"absolute",bottom:0,transition:"height 1s ease-out"}})}),E.jsx("span",{className:"chart-label",children:g.label})]},g.date))})]})}function Ev(){const[o,r]=de.useState([]);de.useEffect(()=>{l()},[]);async function l(){try{if(!Xe)return;const{data:f,error:p}=await Xe.from("students").select("*");if(p)throw p;const g=new Date().getMonth(),b=f.filter(S=>S.birthday?new Date(S.birthday).getMonth()===g:!1).sort((S,_)=>new Date(S.birthday).getDate()-new Date(_.birthday).getDate());r(b)}catch(f){console.error(f)}}return o.length===0?null:E.jsxs("div",{className:"birthday-card fade-in",children:[E.jsxs("div",{className:"birthday-header",children:[E.jsx(pw,{size:18}),E.jsx("span",{children:"Birthdays this Month"})]}),E.jsx("div",{className:"birthday-list",children:o.map(f=>E.jsxs("div",{className:"birthday-item",children:[E.jsx("div",{className:"birthday-name",children:f.nickname||f.full_name.split(" ")[0]}),E.jsx("div",{className:"birthday-date",children:new Date(f.birthday).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]},f.id))})]})}function Sv({student:o,onClose:r}){return E.jsx("div",{className:"modal-overlay fade-in",children:E.jsxs("div",{className:"modal-content",style:{textAlign:"center"},children:[E.jsx("div",{style:{background:"#ECFDF5",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:E.jsx(ho,{size:48,color:"#10B981"})}),E.jsx("h2",{children:"Welcome Back!"}),E.jsxs("p",{style:{fontSize:"18px",margin:"8px 0 24px"},children:[E.jsx("strong",{children:o.full_name})," is marked present."]}),E.jsx("button",{onClick:r,className:"btn full-width",style:{marginTop:"16px"},children:"OK, Next"})]})})}function kg({onNavigate:o}){const{user:r,logout:l}=Sa(),[f,p]=de.useState(!1),[g,b]=de.useState(null);return de.useEffect(()=>{if(f){const S=new bv("reader",{fps:10,qrbox:250},!1);return S.render(async _=>{try{if(S.clear(),p(!1),!Xe)return;const{data:v,error:N}=await Xe.from("students").select("*").eq("id",_).single();if(N||!v){alert("Invalid QR Code or Student not found!");return}const B=(()=>{const U=new Date,z=U.getFullYear(),q=String(U.getMonth()+1).padStart(2,"0"),$=String(U.getDate()).padStart(2,"0");return`${z}-${q}-${$}`})(),{error:j}=await Xe.from("attendance").upsert({student_id:v.id,date:B,status:"PRESENT"},{onConflict:"student_id, date"});if(j)throw j;b(v)}catch(v){console.error(v),alert("Error marking attendance: "+v.message)}},_=>{}),()=>{try{S.clear()}catch{}}}},[f]),E.jsxs("div",{className:"page fade-in",children:[g&&E.jsx(Sv,{student:g,onClose:()=>b(null)}),f&&E.jsx("div",{className:"modal-overlay",style:{zIndex:999},children:E.jsxs("div",{className:"modal-content",style:{padding:"20px",overflow:"hidden"},children:[E.jsx("button",{onClick:()=>p(!1),style:{position:"absolute",top:10,right:10,zIndex:1e3,background:"#F3F4F6",color:"#000",border:"none",borderRadius:"50%",width:32,height:32},children:"X"}),E.jsx("h3",{style:{marginBottom:"16px",textAlign:"center"},children:"Scan QR Code"}),E.jsx("div",{id:"reader",style:{width:"100%",borderRadius:"12px",overflow:"hidden"}}),E.jsx("p",{style:{textAlign:"center",color:"#6B7280",padding:"10px",fontSize:"13px"},children:"Point camera at Student QR"})]})}),E.jsxs("header",{className:"home-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px"},children:[E.jsxs("div",{children:[E.jsxs("h1",{children:["Hello, ",r?.username||"User","!"]}),E.jsx("p",{style:{fontSize:"12px",opacity:.8},children:r?.full_name})]}),E.jsxs("div",{style:{display:"flex",gap:"8px"},children:[E.jsxs("button",{onClick:()=>p(!0),style:{background:"#10B981",border:"none",color:"#fff",padding:"8px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[E.jsx(E2,{size:20})," ",E.jsx("span",{style:{fontSize:"12px",fontWeight:"bold"},children:"SCAN"})]}),E.jsx("button",{onClick:()=>o("info"),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer"},children:E.jsx(uw,{size:28})}),E.jsx("button",{onClick:l,style:{background:"none",border:"none",color:"#EF4444",cursor:"pointer"},title:"Logout",children:E.jsx(v2,{size:28})})]})]}),E.jsx(Av,{}),E.jsx(Ev,{}),E.jsxs("div",{className:"menu-grid",children:[E.jsxs("button",{className:"menu-card primary",onClick:()=>o("attendance"),children:[E.jsx("div",{className:"icon-bg",children:E.jsx(oo,{size:32})}),E.jsx("h3",{children:"Attendance"}),E.jsx("p",{children:"Mark students present"})]}),E.jsxs("button",{className:"menu-card secondary",onClick:()=>o("activity-log"),children:[E.jsx("div",{className:"icon-bg",children:E.jsx(Qy,{size:32})}),E.jsx("h3",{children:"Activity Log"}),E.jsx("p",{children:"Notes & Verse History"})]}),E.jsxs("button",{className:"menu-card danger",onClick:()=>o("follow-up"),children:[E.jsx("div",{className:"icon-bg",children:E.jsx(Bf,{size:32})}),E.jsx("h3",{children:"Follow Up"}),E.jsx("p",{children:"Missed 3+ Sundays"})]}),E.jsxs("button",{className:"menu-card accent",onClick:()=>o("student-monitor"),children:[E.jsx("div",{className:"icon-bg",children:E.jsx(Zc,{size:32})}),E.jsx("h3",{children:"Profiles"}),E.jsx("p",{children:"Stats & History"})]}),E.jsxs("button",{className:"menu-card",onClick:()=>o("reports"),children:[E.jsx("div",{className:"icon-bg",style:{background:"#EDE9FE",color:"#7C3AED"},children:E.jsx(y2,{size:32})}),E.jsx("h3",{children:"Reports"}),E.jsx("p",{children:"Full History"})]}),E.jsxs("button",{className:"menu-card",onClick:()=>o("student-manager"),children:[E.jsx("div",{className:"icon-bg",style:{background:"#FFEDD5",color:"#C2410C"},children:E.jsx(w2,{size:32})}),E.jsx("h3",{children:"Manage"}),E.jsx("p",{children:"Add/Edit Students"})]}),E.jsxs("button",{className:"menu-card",onClick:()=>o("member-manager"),children:[E.jsx("div",{className:"icon-bg",style:{background:"#E0F2FE",color:"#0284C7"},children:E.jsx(oo,{size:32})}),E.jsx("h3",{children:"Congregation"}),E.jsx("p",{children:"Manage Members"})]}),r?.role==="ADMIN"&&E.jsxs("button",{className:"menu-card",onClick:()=>o("user-manager"),children:[E.jsx("div",{className:"icon-bg",style:{background:"#DBEAFE",color:"#2563EB"},children:E.jsx(Df,{size:32})}),E.jsx("h3",{children:"Users"}),E.jsx("p",{children:"Manage Staff"})]})]})]})}function _v({visible:o,onSave:r,onCancel:l,initialValue:f}){const[p,g]=de.useState("");return de.useEffect(()=>{o&&g(f||"")},[o,f]),o?E.jsx("div",{className:"modal-overlay",onClick:l,children:E.jsxs("div",{className:"modal",onClick:b=>b.stopPropagation(),children:[E.jsx("h3",{style:{marginBottom:"12px"},children:"Add Note"}),E.jsx("textarea",{className:"input",rows:3,placeholder:"e.g. Sick, Brought Friend...",value:p,onChange:b=>g(b.target.value),autoFocus:!0}),E.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[E.jsx("button",{className:"btn",style:{flex:1,background:"#F3F4F6",color:"#333"},onClick:l,children:"Cancel"}),E.jsx("button",{className:"btn",style:{flex:1},onClick:()=>r(p),children:"Save"})]})]})}):null}function Cv({onBack:o}){const{permissions:r}=Sa(),[l,f]=de.useState(""),[p,g]=de.useState([]),[b,S]=de.useState(!0),[_,v]=de.useState(null),[N,O]=de.useState({visible:!1,studentId:null,currentRemark:""}),[B,j]=de.useState(()=>localStorage.getItem("attendance_locked")==="true"),U=()=>{if(!r.canUnlockAttendance){alert("Restricted: Only Admins/Teachers can change lock state.");return}const ee=!B;j(ee),localStorage.setItem("attendance_locked",ee)};de.useEffect(()=>{z()},[]);async function z(){try{if(S(!0),!Xe)return;const{data:ee,error:re}=await Xe.from("students").select("*").order("full_name");if(re)throw re;const We=(()=>{const Re=new Date,Ee=Re.getFullYear(),H=String(Re.getMonth()+1).padStart(2,"0"),ne=String(Re.getDate()).padStart(2,"0");return`${Ee}-${H}-${ne}`})(),{data:_e,error:De}=await Xe.from("attendance").select("student_id, memory_verse, remarks").eq("date",We).eq("status","PRESENT");if(De)throw De;const He={};_e.forEach(Re=>{He[Re.student_id]={present:!0,memory_verse:Re.memory_verse,remarks:Re.remarks}});const{data:ae,error:te}=await Xe.from("attendance").select("student_id").eq("status","PRESENT");if(te)throw te;const fe={};ae.forEach(Re=>{fe[Re.student_id]=(fe[Re.student_id]||0)+1});const Ce=ee.map(Re=>{const Ee=He[Re.id]||{present:!1,memory_verse:!1,remarks:""};return{...Re,present:Ee.present,memory_verse:Ee.memory_verse,remarks:Ee.remarks,visits:fe[Re.id]||0}});g(Ce)}catch(ee){v(ee.message)}finally{S(!1)}}const q=async ee=>{if(B||!Xe)return;const re=!ee.present;re?ee.visits+1:ee.visits-1;const We=(()=>{const _e=new Date,De=_e.getFullYear(),He=String(_e.getMonth()+1).padStart(2,"0"),ae=String(_e.getDate()).padStart(2,"0");return`${De}-${He}-${ae}`})();g(_e=>_e.map(De=>De.id===ee.id?{...De,present:re}:De));try{re?await Xe.from("attendance").insert({student_id:ee.id,status:"PRESENT",date:We}):await Xe.from("attendance").delete().eq("student_id",ee.id).eq("date",We),z()}catch{z()}},$=async(ee,re)=>{if(re.stopPropagation(),B)return;if(!ee.present){alert("Mark them present first!");return}const At=!ee.memory_verse;g(De=>De.map(He=>He.id===ee.id?{...He,memory_verse:At}:He));const _e=(()=>{const De=new Date,He=De.getFullYear(),ae=String(De.getMonth()+1).padStart(2,"0"),te=String(De.getDate()).padStart(2,"0");return`${He}-${ae}-${te}`})();await Xe.from("attendance").update({memory_verse:At}).eq("student_id",ee.id).eq("date",_e)},se=(ee,re)=>{if(re.stopPropagation(),!B){if(!ee.present){alert("Mark them present first!");return}O({visible:!0,studentId:ee.id,currentRemark:ee.remarks})}},Q=async ee=>{const At=(()=>{const _e=new Date,De=_e.getFullYear(),He=String(_e.getMonth()+1).padStart(2,"0"),ae=String(_e.getDate()).padStart(2,"0");return`${De}-${He}-${ae}`})(),We=N.studentId;g(_e=>_e.map(De=>De.id===We?{...De,remarks:ee}:De)),O({...N,visible:!1}),await Xe.from("attendance").update({remarks:ee}).eq("student_id",We).eq("date",At)},ue=p.filter(ee=>ee.full_name.toLowerCase().includes(l.toLowerCase())),Ne=ue.filter(ee=>ee.visits<3),ve=ue.filter(ee=>ee.visits>=3),W=ee=>E.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[E.jsxs("div",{className:"student-info",style:{flex:1},children:[E.jsxs("h3",{children:[ee.full_name," ",ee.nickname&&E.jsxs("span",{style:{color:"var(--primary)",fontWeight:"normal"},children:['"',ee.nickname,'"']})]}),E.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[E.jsx("span",{children:ee.grade_level||"No Grade"}),ee.visits<3&&ee.visits>0&&E.jsx("span",{className:`badge visit-${ee.visits}`,children:ee.visits===1?"1st VISIT":"2nd VISIT"}),ee.visits===0&&E.jsx("span",{className:"badge visit-1",children:"NEW"})]})]}),E.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",opacity:B?.5:1},children:[ee.present&&E.jsxs(E.Fragment,{children:[E.jsx("button",{className:`action-btn ${ee.memory_verse?"active-verse":""}`,onClick:re=>$(ee,re),disabled:B,children:E.jsx(lo,{size:16})}),E.jsx("button",{className:`action-btn ${ee.remarks?"active-remark":""}`,onClick:re=>se(ee,re),disabled:B,children:E.jsx(If,{size:16,fill:ee.remarks?"currentColor":"none"})})]}),E.jsx("div",{className:`check-btn ${ee.present?"active":""}`,onClick:re=>{re.stopPropagation(),q(ee)},style:{cursor:B?"not-allowed":"pointer"},children:B?E.jsx(wg,{size:16,color:ee.present?"white":"var(--text-muted)"}):E.jsx(ho,{size:24,fill:ee.present?"white":"none",color:ee.present?"white":"var(--border-color)"})})]})]},ee.id);return E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsxs("div",{children:[E.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"Attendance"}),E.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:new Date().toDateString()})]}),E.jsxs("button",{onClick:U,style:{background:B?"#FEE2E2":"#F3F4F6",border:"none",padding:"8px",borderRadius:"8px",color:B?"#DC2626":"#6B7280",cursor:"not-allowed",display:"flex",alignItems:"center",gap:"4px"},children:[B?E.jsx(wg,{size:20}):E.jsx(vw,{size:20}),E.jsx("span",{style:{fontSize:"12px",fontWeight:"600"},children:B?"LOCKED":"OPEN"})]})]}),_&&E.jsx("div",{className:"error-banner",children:_}),E.jsxs("div",{className:"search-bar",children:[E.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:l,onChange:ee=>f(ee.target.value)}),E.jsx(fo,{size:20,className:"search-icon"})]}),E.jsx("div",{className:"student-list",children:b?E.jsx("div",{className:"empty-state",children:"Loading..."}):ue.length===0?E.jsx("div",{className:"empty-state",children:"No student found."}):E.jsxs(E.Fragment,{children:[Ne.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"section-header",children:["New Kids / Visitors (",Ne.length,")"]}),Ne.map(W)]}),ve.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"section-header",children:["Regulars (",ve.length,")"]}),ve.map(W)]})]})}),E.jsx(_v,{visible:N.visible,initialValue:N.currentRemark,onCancel:()=>O({...N,visible:!1}),onSave:Q})]})}function Tv({onBack:o}){const[r,l]=de.useState([]),[f,p]=de.useState(!0);de.useEffect(()=>{g()},[]);async function g(){try{p(!0);const{data:S,error:_}=await Xe.from("attendance").select("date, remarks, memory_verse, students (full_name, nickname)").or("memory_verse.eq.true,remarks.neq.null").order("date",{ascending:!1});if(_)throw _;const v={};S.forEach(N=>{v[N.date]||(v[N.date]={date:N.date,verses:[],remarks:[]}),N.memory_verse&&v[N.date].verses.push(N.students.nickname||N.students.full_name),N.remarks&&v[N.date].remarks.push({name:N.students.nickname||N.students.full_name,note:N.remarks})}),l(Object.values(v))}catch(S){console.error(S)}finally{p(!1)}}const b=S=>new Date(S).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"});return E.jsxs("div",{className:"page slide-in",style:{background:"#FAFAFA"},children:[E.jsxs("header",{className:"page-header",style:{background:"#fff",margin:0,padding:"20px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:"Activity Log"})]}),E.jsx("div",{className:"timeline",children:f?E.jsx("div",{className:"empty-state",children:"Loading..."}):r.length===0?E.jsx("div",{className:"empty-state",children:"No activity yet."}):r.map(S=>E.jsxs("div",{className:"timeline-item",children:[E.jsx("div",{className:"timeline-dot"}),E.jsx("div",{className:"timeline-date",children:b(S.date)}),S.verses.length>0&&E.jsxs("div",{className:"timeline-card timeline-section",children:[E.jsxs("div",{className:"timeline-title",style:{color:"#D97706"},children:[E.jsx(lo,{size:14})," Memory Verses (",S.verses.length,")"]}),E.jsx("p",{style:{fontSize:"14px",lineHeight:"1.4",color:"#374151"},children:S.verses.join(", ")})]}),S.remarks.length>0&&E.jsxs("div",{className:"timeline-card timeline-section",children:[E.jsxs("div",{className:"timeline-title",style:{color:"var(--primary)"},children:[E.jsx(If,{size:14})," Remarks"]}),E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:S.remarks.map((_,v)=>E.jsxs("div",{style:{fontSize:"13px"},children:[E.jsxs("span",{style:{fontWeight:"700",color:"#111827"},children:[_.name,":"]})," ",E.jsx("span",{style:{color:"#4B5563"},children:_.note})]},v))})]})]},S.date))})]})}function Nv({onBack:o}){const[r,l]=de.useState([]),[f,p]=de.useState(!0),[g,b]=de.useState([]);de.useEffect(()=>{S()},[]);async function S(){try{p(!0);const{data:_,error:v}=await Xe.from("attendance").select("date").eq("status","PRESENT").order("date",{ascending:!1}),N={id:"demo-absent",full_name:"Sleeping Sam (Demo)",grade_level:"Grade 1",avatar_url:null,isDemo:!0};if(v)throw v;const O=[...new Set(_.map(se=>se.date))].slice(0,3);if(b(O),O.length<3){l([N]);return}const{data:B,error:j}=await Xe.from("attendance").select("student_id").in("date",O).eq("status","PRESENT");if(j)throw j;const U=new Set(B.map(se=>se.student_id)),{data:z,error:q}=await Xe.from("students").select("*").order("full_name");if(q)throw q;const $=z.filter(se=>!U.has(se.id));l([...$,N])}catch(_){console.error(_)}finally{p(!1)}}return E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsxs("div",{children:[E.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"To Visit / Follow Up"}),E.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Missed the last 3 Sundays"})]})]}),g.length<3&&!f&&E.jsxs("div",{className:"error-banner",style:{background:"#FFF7ED",color:"#C2410C",borderColor:"#FFEDD5"},children:["Not enough history yet (",g.length,"/3 Sundays)."]}),E.jsx("div",{className:"student-list",children:f?E.jsx("div",{className:"empty-state",children:"Calculating..."}):r.length===0?E.jsxs("div",{className:"empty-state",children:[E.jsx(ho,{size:48,style:{marginBottom:"16px",color:"var(--success)"}}),E.jsx("p",{children:"Good news! Everyone has attended at least once recently."})]}):r.map(_=>E.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[E.jsxs("div",{className:"student-info",children:[E.jsx("h3",{children:_.full_name}),E.jsx("span",{style:{color:"#EF4444",fontWeight:"500"},children:"Missed 3 Consecutive"})]}),E.jsx("div",{style:{background:"#FEE2E2",padding:"8px",borderRadius:"50%",color:"#DC2626"},children:E.jsx(yw,{size:24})})]},_.id))})]})}var Xs={},af={exports:{}},sf,jg;function Ov(){if(jg)return sf;jg=1;var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sf=o,sf}var lf,Ug;function Iv(){if(Ug)return lf;Ug=1;var o=Ov();function r(){}function l(){}return l.resetWarningCache=r,lf=function(){function f(b,S,_,v,N,O){if(O!==o){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}f.isRequired=f;function p(){return f}var g={array:f,bigint:f,bool:f,func:f,number:f,object:f,string:f,symbol:f,any:f,arrayOf:p,element:f,elementType:f,instanceOf:p,node:f,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:l,resetWarningCache:r};return g.PropTypes=g,g},lf}var zg;function M2(){return zg||(zg=1,af.exports=Iv()()),af.exports}var of,Pg;function B2(){return Pg||(Pg=1,of={L:1,M:0,Q:3,H:2}),of}var cf,Fg;function L2(){return Fg||(Fg=1,cf={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),cf}var uf,Hg;function Rv(){if(Hg)return uf;Hg=1;var o=L2();function r(l){this.mode=o.MODE_8BIT_BYTE,this.data=l}return r.prototype={getLength:function(l){return this.data.length},write:function(l){for(var f=0;f<this.data.length;f++)l.put(this.data.charCodeAt(f),8)}},uf=r,uf}var hf,Vg;function Dv(){if(Vg)return hf;Vg=1;var o=B2();function r(l,f){this.totalCount=l,this.dataCount=f}return r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(l,f){var p=r.getRsBlockTable(l,f);if(p==null)throw new Error("bad rs block @ typeNumber:"+l+"/errorCorrectLevel:"+f);for(var g=p.length/3,b=new Array,S=0;S<g;S++)for(var _=p[S*3+0],v=p[S*3+1],N=p[S*3+2],O=0;O<_;O++)b.push(new r(v,N));return b},r.getRsBlockTable=function(l,f){switch(f){case o.L:return r.RS_BLOCK_TABLE[(l-1)*4+0];case o.M:return r.RS_BLOCK_TABLE[(l-1)*4+1];case o.Q:return r.RS_BLOCK_TABLE[(l-1)*4+2];case o.H:return r.RS_BLOCK_TABLE[(l-1)*4+3];default:return}},hf=r,hf}var ff,Gg;function Mv(){if(Gg)return ff;Gg=1;function o(){this.buffer=new Array,this.length=0}return o.prototype={get:function(r){var l=Math.floor(r/8);return(this.buffer[l]>>>7-r%8&1)==1},put:function(r,l){for(var f=0;f<l;f++)this.putBit((r>>>l-f-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(r){var l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),r&&(this.buffer[l]|=128>>>this.length%8),this.length++}},ff=o,ff}var df,Yg;function k2(){if(Yg)return df;Yg=1;for(var o={glog:function(l){if(l<1)throw new Error("glog("+l+")");return o.LOG_TABLE[l]},gexp:function(l){for(;l<0;)l+=255;for(;l>=256;)l-=255;return o.EXP_TABLE[l]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},r=0;r<8;r++)o.EXP_TABLE[r]=1<<r;for(var r=8;r<256;r++)o.EXP_TABLE[r]=o.EXP_TABLE[r-4]^o.EXP_TABLE[r-5]^o.EXP_TABLE[r-6]^o.EXP_TABLE[r-8];for(var r=0;r<255;r++)o.LOG_TABLE[o.EXP_TABLE[r]]=r;return df=o,df}var gf,qg;function j2(){if(qg)return gf;qg=1;var o=k2();function r(l,f){if(l.length==null)throw new Error(l.length+"/"+f);for(var p=0;p<l.length&&l[p]==0;)p++;this.num=new Array(l.length-p+f);for(var g=0;g<l.length-p;g++)this.num[g]=l[g+p]}return r.prototype={get:function(l){return this.num[l]},getLength:function(){return this.num.length},multiply:function(l){for(var f=new Array(this.getLength()+l.getLength()-1),p=0;p<this.getLength();p++)for(var g=0;g<l.getLength();g++)f[p+g]^=o.gexp(o.glog(this.get(p))+o.glog(l.get(g)));return new r(f,0)},mod:function(l){if(this.getLength()-l.getLength()<0)return this;for(var f=o.glog(this.get(0))-o.glog(l.get(0)),p=new Array(this.getLength()),g=0;g<this.getLength();g++)p[g]=this.get(g);for(var g=0;g<l.getLength();g++)p[g]^=o.gexp(o.glog(l.get(g))+f);return new r(p,0).mod(l)}},gf=r,gf}var mf,Xg;function Bv(){if(Xg)return mf;Xg=1;var o=L2(),r=j2(),l=k2(),f={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(g){for(var b=g<<10;p.getBCHDigit(b)-p.getBCHDigit(p.G15)>=0;)b^=p.G15<<p.getBCHDigit(b)-p.getBCHDigit(p.G15);return(g<<10|b)^p.G15_MASK},getBCHTypeNumber:function(g){for(var b=g<<12;p.getBCHDigit(b)-p.getBCHDigit(p.G18)>=0;)b^=p.G18<<p.getBCHDigit(b)-p.getBCHDigit(p.G18);return g<<12|b},getBCHDigit:function(g){for(var b=0;g!=0;)b++,g>>>=1;return b},getPatternPosition:function(g){return p.PATTERN_POSITION_TABLE[g-1]},getMask:function(g,b,S){switch(g){case f.PATTERN000:return(b+S)%2==0;case f.PATTERN001:return b%2==0;case f.PATTERN010:return S%3==0;case f.PATTERN011:return(b+S)%3==0;case f.PATTERN100:return(Math.floor(b/2)+Math.floor(S/3))%2==0;case f.PATTERN101:return b*S%2+b*S%3==0;case f.PATTERN110:return(b*S%2+b*S%3)%2==0;case f.PATTERN111:return(b*S%3+(b+S)%2)%2==0;default:throw new Error("bad maskPattern:"+g)}},getErrorCorrectPolynomial:function(g){for(var b=new r([1],0),S=0;S<g;S++)b=b.multiply(new r([1,l.gexp(S)],0));return b},getLengthInBits:function(g,b){if(1<=b&&b<10)switch(g){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:return 8;case o.MODE_KANJI:return 8;default:throw new Error("mode:"+g)}else if(b<27)switch(g){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+g)}else if(b<41)switch(g){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+g)}else throw new Error("type:"+b)},getLostPoint:function(g){for(var b=g.getModuleCount(),S=0,_=0;_<b;_++)for(var v=0;v<b;v++){for(var N=0,O=g.isDark(_,v),B=-1;B<=1;B++)if(!(_+B<0||b<=_+B))for(var j=-1;j<=1;j++)v+j<0||b<=v+j||B==0&&j==0||O==g.isDark(_+B,v+j)&&N++;N>5&&(S+=3+N-5)}for(var _=0;_<b-1;_++)for(var v=0;v<b-1;v++){var U=0;g.isDark(_,v)&&U++,g.isDark(_+1,v)&&U++,g.isDark(_,v+1)&&U++,g.isDark(_+1,v+1)&&U++,(U==0||U==4)&&(S+=3)}for(var _=0;_<b;_++)for(var v=0;v<b-6;v++)g.isDark(_,v)&&!g.isDark(_,v+1)&&g.isDark(_,v+2)&&g.isDark(_,v+3)&&g.isDark(_,v+4)&&!g.isDark(_,v+5)&&g.isDark(_,v+6)&&(S+=40);for(var v=0;v<b;v++)for(var _=0;_<b-6;_++)g.isDark(_,v)&&!g.isDark(_+1,v)&&g.isDark(_+2,v)&&g.isDark(_+3,v)&&g.isDark(_+4,v)&&!g.isDark(_+5,v)&&g.isDark(_+6,v)&&(S+=40);for(var z=0,v=0;v<b;v++)for(var _=0;_<b;_++)g.isDark(_,v)&&z++;var q=Math.abs(100*z/b/b-50)/5;return S+=q*10,S}};return mf=p,mf}var pf,Wg;function Lv(){if(Wg)return pf;Wg=1;var o=Rv(),r=Dv(),l=Mv(),f=Bv(),p=j2();function g(S,_){this.typeNumber=S,this.errorCorrectLevel=_,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var b=g.prototype;return b.addData=function(S){var _=new o(S);this.dataList.push(_),this.dataCache=null},b.isDark=function(S,_){if(S<0||this.moduleCount<=S||_<0||this.moduleCount<=_)throw new Error(S+","+_);return this.modules[S][_]},b.getModuleCount=function(){return this.moduleCount},b.make=function(){if(this.typeNumber<1){var S=1;for(S=1;S<40;S++){for(var _=r.getRSBlocks(S,this.errorCorrectLevel),v=new l,N=0,O=0;O<_.length;O++)N+=_[O].dataCount;for(var O=0;O<this.dataList.length;O++){var B=this.dataList[O];v.put(B.mode,4),v.put(B.getLength(),f.getLengthInBits(B.mode,S)),B.write(v)}if(v.getLengthInBits()<=N*8)break}this.typeNumber=S}this.makeImpl(!1,this.getBestMaskPattern())},b.makeImpl=function(S,_){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++){this.modules[v]=new Array(this.moduleCount);for(var N=0;N<this.moduleCount;N++)this.modules[v][N]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(S,_),this.typeNumber>=7&&this.setupTypeNumber(S),this.dataCache==null&&(this.dataCache=g.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,_)},b.setupPositionProbePattern=function(S,_){for(var v=-1;v<=7;v++)if(!(S+v<=-1||this.moduleCount<=S+v))for(var N=-1;N<=7;N++)_+N<=-1||this.moduleCount<=_+N||(0<=v&&v<=6&&(N==0||N==6)||0<=N&&N<=6&&(v==0||v==6)||2<=v&&v<=4&&2<=N&&N<=4?this.modules[S+v][_+N]=!0:this.modules[S+v][_+N]=!1)},b.getBestMaskPattern=function(){for(var S=0,_=0,v=0;v<8;v++){this.makeImpl(!0,v);var N=f.getLostPoint(this);(v==0||S>N)&&(S=N,_=v)}return _},b.createMovieClip=function(S,_,v){var N=S.createEmptyMovieClip(_,v),O=1;this.make();for(var B=0;B<this.modules.length;B++)for(var j=B*O,U=0;U<this.modules[B].length;U++){var z=U*O,q=this.modules[B][U];q&&(N.beginFill(0,100),N.moveTo(z,j),N.lineTo(z+O,j),N.lineTo(z+O,j+O),N.lineTo(z,j+O),N.endFill())}return N},b.setupTimingPattern=function(){for(var S=8;S<this.moduleCount-8;S++)this.modules[S][6]==null&&(this.modules[S][6]=S%2==0);for(var _=8;_<this.moduleCount-8;_++)this.modules[6][_]==null&&(this.modules[6][_]=_%2==0)},b.setupPositionAdjustPattern=function(){for(var S=f.getPatternPosition(this.typeNumber),_=0;_<S.length;_++)for(var v=0;v<S.length;v++){var N=S[_],O=S[v];if(this.modules[N][O]==null)for(var B=-2;B<=2;B++)for(var j=-2;j<=2;j++)B==-2||B==2||j==-2||j==2||B==0&&j==0?this.modules[N+B][O+j]=!0:this.modules[N+B][O+j]=!1}},b.setupTypeNumber=function(S){for(var _=f.getBCHTypeNumber(this.typeNumber),v=0;v<18;v++){var N=!S&&(_>>v&1)==1;this.modules[Math.floor(v/3)][v%3+this.moduleCount-8-3]=N}for(var v=0;v<18;v++){var N=!S&&(_>>v&1)==1;this.modules[v%3+this.moduleCount-8-3][Math.floor(v/3)]=N}},b.setupTypeInfo=function(S,_){for(var v=this.errorCorrectLevel<<3|_,N=f.getBCHTypeInfo(v),O=0;O<15;O++){var B=!S&&(N>>O&1)==1;O<6?this.modules[O][8]=B:O<8?this.modules[O+1][8]=B:this.modules[this.moduleCount-15+O][8]=B}for(var O=0;O<15;O++){var B=!S&&(N>>O&1)==1;O<8?this.modules[8][this.moduleCount-O-1]=B:O<9?this.modules[8][15-O-1+1]=B:this.modules[8][15-O-1]=B}this.modules[this.moduleCount-8][8]=!S},b.mapData=function(S,_){for(var v=-1,N=this.moduleCount-1,O=7,B=0,j=this.moduleCount-1;j>0;j-=2)for(j==6&&j--;;){for(var U=0;U<2;U++)if(this.modules[N][j-U]==null){var z=!1;B<S.length&&(z=(S[B]>>>O&1)==1);var q=f.getMask(_,N,j-U);q&&(z=!z),this.modules[N][j-U]=z,O--,O==-1&&(B++,O=7)}if(N+=v,N<0||this.moduleCount<=N){N-=v,v=-v;break}}},g.PAD0=236,g.PAD1=17,g.createData=function(S,_,v){for(var N=r.getRSBlocks(S,_),O=new l,B=0;B<v.length;B++){var j=v[B];O.put(j.mode,4),O.put(j.getLength(),f.getLengthInBits(j.mode,S)),j.write(O)}for(var U=0,B=0;B<N.length;B++)U+=N[B].dataCount;if(O.getLengthInBits()>U*8)throw new Error("code length overflow. ("+O.getLengthInBits()+">"+U*8+")");for(O.getLengthInBits()+4<=U*8&&O.put(0,4);O.getLengthInBits()%8!=0;)O.putBit(!1);for(;!(O.getLengthInBits()>=U*8||(O.put(g.PAD0,8),O.getLengthInBits()>=U*8));)O.put(g.PAD1,8);return g.createBytes(O,N)},g.createBytes=function(S,_){for(var v=0,N=0,O=0,B=new Array(_.length),j=new Array(_.length),U=0;U<_.length;U++){var z=_[U].dataCount,q=_[U].totalCount-z;N=Math.max(N,z),O=Math.max(O,q),B[U]=new Array(z);for(var $=0;$<B[U].length;$++)B[U][$]=255&S.buffer[$+v];v+=z;var se=f.getErrorCorrectPolynomial(q),Q=new p(B[U],se.getLength()-1),ue=Q.mod(se);j[U]=new Array(se.getLength()-1);for(var $=0;$<j[U].length;$++){var Ne=$+ue.getLength()-j[U].length;j[U][$]=Ne>=0?ue.get(Ne):0}}for(var ve=0,$=0;$<_.length;$++)ve+=_[$].totalCount;for(var W=new Array(ve),ee=0,$=0;$<N;$++)for(var U=0;U<_.length;U++)$<B[U].length&&(W[ee++]=B[U][$]);for(var $=0;$<O;$++)for(var U=0;U<_.length;U++)$<j[U].length&&(W[ee++]=j[U][$]);return W},pf=g,pf}var zc={},Zg;function kv(){if(Zg)return zc;Zg=1,Object.defineProperty(zc,"__esModule",{value:!0});var o=Object.assign||function(v){for(var N=1;N<arguments.length;N++){var O=arguments[N];for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&(v[B]=O[B])}return v},r=M2(),l=g(r),f=co(),p=g(f);function g(v){return v&&v.__esModule?v:{default:v}}function b(v,N){var O={};for(var B in v)N.indexOf(B)>=0||Object.prototype.hasOwnProperty.call(v,B)&&(O[B]=v[B]);return O}var S={bgColor:l.default.oneOfType([l.default.object,l.default.string]).isRequired,bgD:l.default.string.isRequired,fgColor:l.default.oneOfType([l.default.object,l.default.string]).isRequired,fgD:l.default.string.isRequired,size:l.default.number.isRequired,title:l.default.string,viewBoxSize:l.default.number.isRequired,xmlns:l.default.string},_=(0,f.forwardRef)(function(v,N){var O=v.bgColor,B=v.bgD,j=v.fgD,U=v.fgColor,z=v.size,q=v.title,$=v.viewBoxSize,se=v.xmlns,Q=se===void 0?"http://www.w3.org/2000/svg":se,ue=b(v,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return p.default.createElement("svg",o({},ue,{height:z,ref:N,viewBox:"0 0 "+$+" "+$,width:z,xmlns:Q}),q?p.default.createElement("title",null,q):null,p.default.createElement("path",{d:B,fill:O}),p.default.createElement("path",{d:j,fill:U}))});return _.displayName="QRCodeSvg",_.propTypes=S,zc.default=_,zc}var Qg;function jv(){if(Qg)return Xs;Qg=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.QRCode=void 0;var o=Object.assign||function(z){for(var q=1;q<arguments.length;q++){var $=arguments[q];for(var se in $)Object.prototype.hasOwnProperty.call($,se)&&(z[se]=$[se])}return z},r=M2(),l=O(r),f=B2(),p=O(f),g=Lv(),b=O(g),S=co(),_=O(S),v=kv(),N=O(v);function O(z){return z&&z.__esModule?z:{default:z}}function B(z,q){var $={};for(var se in z)q.indexOf(se)>=0||Object.prototype.hasOwnProperty.call(z,se)&&($[se]=z[se]);return $}var j={bgColor:l.default.oneOfType([l.default.object,l.default.string]),fgColor:l.default.oneOfType([l.default.object,l.default.string]),level:l.default.string,size:l.default.number,value:l.default.string.isRequired},U=(0,S.forwardRef)(function(z,q){var $=z.bgColor,se=$===void 0?"#FFFFFF":$,Q=z.fgColor,ue=Q===void 0?"#000000":Q,Ne=z.level,ve=Ne===void 0?"L":Ne,W=z.size,ee=W===void 0?256:W,re=z.value,At=B(z,["bgColor","fgColor","level","size","value"]),We=new b.default(-1,p.default[ve]);We.addData(re),We.make();var _e=We.modules;return _.default.createElement(N.default,o({},At,{bgColor:se,bgD:_e.map(function(De,He){return De.map(function(ae,te){return ae?"":"M "+te+" "+He+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ue,fgD:_e.map(function(De,He){return De.map(function(ae,te){return ae?"M "+te+" "+He+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:q,size:ee,viewBoxSize:_e.length}))});return Xs.QRCode=U,U.displayName="QRCode",U.propTypes=j,Xs.default=U,Xs}var Uv=jv();const zv=tp(Uv);function Pv({stats:o}){const r=(b,S,_,v)=>b>=v?"gold":b>=_?"silver":b>=S?"bronze":"locked",l=r(o.total,1,3,10),f=r(o.verses,1,5,10),p=r(o.streak,2,4,8),g=[{id:"attendance",title:l==="bronze"?"First Step":l==="silver"?"Regular":"Rising Star",desc:l==="gold"?"10+ Visits":"Attendance",icon:E.jsx(S2,{size:24,fill:l==="gold"?"#F59E0B":"currentColor",color:l==="gold"?"#D97706":l==="silver"?"#64748B":"#92400E"}),rank:l},{id:"verses",title:f==="bronze"?"Student":f==="silver"?"Scholar":"Bible Champ",desc:f==="gold"?"10 Verses":"Bible Verse",icon:E.jsx(nw,{size:24,fill:f==="gold"?"#F59E0B":"currentColor",color:f==="gold"?"#D97706":f==="silver"?"#64748B":"#92400E"}),rank:f},{id:"streak",title:p==="bronze"?"Warming Up":p==="silver"?"On Fire":"Unstoppable",desc:p==="gold"?"8 Weeks!":"Streak",icon:E.jsx(gw,{size:24,fill:p==="gold"?"#EF4444":"currentColor",color:p==="gold"?"#B91C1C":p==="silver"?"#64748B":"#92400E"}),rank:p}];return E.jsxs("div",{style:{padding:"0 20px 20px"},children:[E.jsxs("h3",{className:"section-header",style:{marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[E.jsx(_2,{size:18,color:"#D97706"})," Achievements"]}),E.jsx("div",{className:"trophy-grid",children:g.map((b,S)=>E.jsxs("div",{className:`trophy-card ${b.rank!=="locked"?"unlocked":""} rank-${b.rank}`,children:[E.jsx("span",{className:"trophy-icon",children:b.icon}),E.jsx("div",{className:"trophy-title",children:b.title}),E.jsx("div",{className:"trophy-desc",children:b.desc})]},S))})]})}function Fv({student:o,onBack:r}){const[l,f]=de.useState([]),[p,g]=de.useState({total:0,verses:0,streak:0}),[b,S]=de.useState(!0);de.useEffect(()=>{if(o.isDemo){S(!1),g(o.demoStats),f(o.demoHistory);return}_()},[o]);async function _(){try{S(!0);const{data:U,error:z}=await Xe.from("attendance").select("*").eq("student_id",o.id).eq("status","PRESENT").order("date",{ascending:!1});if(z)throw z;f(U);const q=U.length,$=U.filter(Q=>Q.memory_verse).length;let se=0;U.length>0&&(se=Math.min(q,U.length)),g({total:q,verses:$,streak:se})}catch(U){console.error(U)}finally{S(!1)}}const N=(()=>{const U=new Date,z=U.getFullYear(),q=String(U.getMonth()+1).padStart(2,"0"),$=String(U.getDate()).padStart(2,"0");return`${z}-${q}-${$}`})(),O=l.some(U=>U.date===N)||o.isDemo&&o.demoHistory.some(U=>U.date===N),[B,j]=de.useState(!1);return E.jsxs("div",{className:"page slide-in",style:{padding:0,background:"#F9FAFB"},children:[B&&E.jsx("div",{className:"modal-overlay fade-in",onClick:()=>j(!1),children:E.jsxs("div",{className:"modal-content",style:{textAlign:"center"},onClick:U=>U.stopPropagation(),children:[E.jsx("h3",{children:"Student QR Code"}),E.jsx("p",{style:{marginBottom:"16px",color:"#6B7280"},children:"Scan to mark present"}),E.jsx("div",{style:{background:"#fff",padding:"16px",border:"2px solid #E5E7EB",borderRadius:"12px",display:"inline-block"},children:E.jsx(zv,{value:o.id,size:200})}),E.jsx("h4",{style:{marginTop:"16px"},children:o.full_name}),E.jsx("br",{}),E.jsx("button",{className:"btn full-width",onClick:()=>j(!1),style:{marginTop:"16px"},children:"Close"})]})}),E.jsxs("div",{className:"profile-header",children:[E.jsx("button",{onClick:r,className:"back-btn",style:{position:"absolute",top:"20px",left:"20px"},children:E.jsx(Pn,{size:24})}),E.jsx("button",{onClick:()=>j(!0),style:{position:"absolute",top:"20px",right:"20px",background:"var(--primary)",border:"none",color:"#fff",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(79, 70, 229, 0.4)"},children:E.jsx(A2,{size:20})}),E.jsx("div",{className:`big-avatar ${O?"pulsing-border":""}`,style:O?{border:"4px solid #10B981",color:"#10B981",background:"#ECFDF5",borderRadius:"50%",overflow:"hidden"}:{borderRadius:"50%",overflow:"hidden"},children:o.avatar_url?E.jsx("img",{src:o.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):o.nickname?o.nickname[0]:o.full_name[0]}),E.jsx("h2",{className:"profile-name",children:o.full_name}),E.jsxs("div",{className:"profile-meta",children:[E.jsx("span",{children:o.grade_level||"No Grade"}),"  ",E.jsx("span",{children:o.gender||"Student"}),o.nickname&&E.jsxs("span",{children:[' "',o.nickname,'"']})]})]}),E.jsxs("div",{className:"stats-row",children:[E.jsxs("div",{className:"stat-card",children:[E.jsx("span",{className:"stat-val",children:p.total}),E.jsx("span",{className:"stat-label",children:"Attended"})]}),E.jsxs("div",{className:"stat-card",children:[E.jsx("span",{className:"stat-val",style:{color:"#D97706"},children:p.verses}),E.jsx("span",{className:"stat-label",children:"Verses"})]}),E.jsxs("div",{className:"stat-card",children:[E.jsx("span",{className:"stat-val",style:{color:"#EC4899"},children:p.streak}),E.jsx("span",{className:"stat-label",children:"Streak"})]})]}),E.jsx(Pv,{stats:p}),E.jsxs("div",{style:{padding:"0 20px 20px"},children:[E.jsx("h3",{className:"section-header",style:{marginBottom:"16px"},children:"Attendance History"}),b?E.jsx("div",{className:"empty-state",children:"Loading..."}):l.length===0?E.jsx("div",{className:"empty-state",children:"No attendance recorded."}):E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map((U,z)=>E.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[E.jsx("div",{style:{background:"#EEF2FF",padding:"8px",borderRadius:"10px",color:"var(--primary)"},children:E.jsx(aw,{size:20})}),E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:"700",fontSize:"15px",color:"#1F2937"},children:new Date(U.date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}),U.remarks&&E.jsxs("div",{style:{fontSize:"13px",color:"#6B7280",marginTop:"2px"},children:['"',U.remarks,'"']})]})]}),U.memory_verse&&E.jsxs("div",{style:{background:"#FEF3C7",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",color:"#D97706",display:"flex",alignItems:"center",gap:"4px"},children:[E.jsx(lo,{size:14})," Verse"]})]},U.id||z))})]})]})}function Hv({onBack:o}){const[r,l]=de.useState("list"),[f,p]=de.useState(null),[g,b]=de.useState([]),[S,_]=de.useState(!0),[v,N]=de.useState(""),[O,B]=de.useState("alpha"),j={id:"demo-zion",full_name:"Zion Lion",nickname:"Zion",grade_level:"Grade 3",gender:"Male",isDemo:!0,demoStats:{total:15,verses:12,streak:5},demoHistory:[{date:(()=>{const ue=new Date,Ne=ue.getFullYear(),ve=String(ue.getMonth()+1).padStart(2,"0"),W=String(ue.getDate()).padStart(2,"0");return`${Ne}-${ve}-${W}`})(),memory_verse:!0,remarks:"Present today!"},{date:"2023-10-27",memory_verse:!0,remarks:"Led the prayer"},{date:"2023-10-20",memory_verse:!0,remarks:""},{date:"2023-10-13",memory_verse:!1,remarks:"Brought a friend"}]},[U,z]=de.useState(new Set);de.useEffect(()=>{q(),$()},[]);async function q(){try{const{data:ue}=await Xe.from("students").select("*").order("full_name");b(ue)}catch{}finally{_(!1)}}async function $(){try{const Ne=(()=>{const W=new Date,ee=W.getFullYear(),re=String(W.getMonth()+1).padStart(2,"0"),At=String(W.getDate()).padStart(2,"0");return`${ee}-${re}-${At}`})(),{data:ve}=await Xe.from("attendance").select("student_id").eq("date",Ne).eq("status","PRESENT");ve&&z(new Set(ve.map(W=>W.student_id)))}catch(ue){console.error(ue)}}const Q=[...g.filter(ue=>ue.full_name.toLowerCase().includes(v.toLowerCase()))].sort((ue,Ne)=>{if(O==="present"){const ve=U.has(ue.id),W=U.has(Ne.id);if(ve&&!W)return-1;if(!ve&&W)return 1}return ue.full_name.localeCompare(Ne.full_name)});return r==="profile"&&f?E.jsx(Fv,{student:f,onBack:()=>{l("list"),p(null)}}):E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:"Select Student"})]}),E.jsxs("button",{onClick:()=>B(ue=>ue==="alpha"?"present":"alpha"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"8px",border:"1px solid #E5E7EB",background:O==="present"?"#ECFDF5":"#fff",color:O==="present"?"#059669":"#374151",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:[E.jsx(x2,{size:16}),O==="present"?"Present First":"A-Z"]})]}),E.jsxs("div",{className:"search-bar",children:[E.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:v,onChange:ue=>N(ue.target.value)}),E.jsx(fo,{size:20,className:"search-icon"})]}),E.jsxs("div",{className:"student-list",children:[E.jsxs("div",{className:"card student-card",onClick:()=>{p(j),l("profile")},style:{border:"2px dashed #D97706",background:"#FFFBEB"},children:[E.jsxs("div",{className:"student-info",children:[E.jsxs("h3",{children:[j.full_name," ",E.jsx("span",{className:"badge",style:{background:"#FCD34D",color:"#92400E"},children:"DEMO"})]}),E.jsx("span",{children:"Present Today!"})]}),E.jsx(S2,{size:20,fill:"#10B981",color:"#10B981"})]}),S?E.jsx("div",{className:"empty-state",children:"Loading..."}):Q.map(ue=>{const Ne=U.has(ue.id);return E.jsxs("div",{className:"card student-card",onClick:()=>{p(ue),l("profile")},style:Ne?{borderLeft:"3px solid #10B981"}:{},children:[E.jsxs("div",{className:"student-info",children:[E.jsx("h3",{children:ue.full_name}),E.jsx("span",{style:Ne?{color:"#10B981",fontWeight:"bold"}:{},children:Ne?"Present":ue.nickname||"View Profile"})]}),E.jsx("div",{style:{color:Ne?"#10B981":"var(--border-color)"},children:E.jsx(Zc,{size:20,fill:Ne?"#ECFDF5":"none"})})]},ue.id)})]})]})}function Vv({date:o,onBack:r}){const[l,f]=de.useState([]),[p,g]=de.useState(!0);de.useEffect(()=>{b()},[o]);async function b(){try{g(!0);const{data:_,error:v}=await Xe.from("attendance").select("status, students (full_name, grade_level)").eq("date",o).eq("status","PRESENT");if(v)throw v;f(_)}catch(_){console.error(_)}finally{g(!1)}}const S=_=>new Date(_).toLocaleDateString(void 0,{dateStyle:"full"});return E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",children:[E.jsx("button",{onClick:r,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsxs("div",{children:[E.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"Present List"}),E.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:S(o)})]})]}),E.jsx("div",{className:"student-list",children:p?E.jsx("div",{className:"empty-state",children:"Loading..."}):l.length===0?E.jsx("div",{className:"empty-state",children:"No one marked present."}):l.map((_,v)=>E.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[E.jsxs("div",{className:"student-info",children:[E.jsx("h3",{children:_.students.full_name}),E.jsx("span",{children:_.students.grade_level||"No Grade"})]}),E.jsx("div",{className:"check-btn active",style:{width:"24px",height:"24px"},children:E.jsx(ho,{size:16,color:"white"})})]},v))})]})}function Gv({onNavigate:o}){const[r,l]=de.useState("list"),[f,p]=de.useState(null),[g,b]=de.useState([]),[S,_]=de.useState(!0);de.useEffect(()=>{v()},[]);async function v(){try{_(!0);const{data:O,error:B}=await Xe.from("attendance").select("date, status").eq("status","PRESENT").order("date",{ascending:!1});if(B)throw B;const j={};O.forEach(z=>{j[z.date]||(j[z.date]=0),j[z.date]++});const U=Object.keys(j).map(z=>({date:z,count:j[z]}));b(U)}catch(O){console.error(O)}finally{_(!1)}}const N=O=>{const B={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(O).toLocaleDateString(void 0,B)};return r==="detail"?E.jsx(Vv,{date:f,onBack:()=>l("list")}):E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",children:[E.jsx("button",{onClick:()=>o("home"),className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:"Reports"})]}),E.jsx("div",{className:"student-list",children:S?E.jsx("div",{className:"empty-state",children:"Loading reports..."}):g.length===0?E.jsx("div",{className:"empty-state",children:"No attendance records found."}):g.map(O=>E.jsxs("div",{className:"card student-card",onClick:()=>{p(O.date),l("detail")},children:[E.jsxs("div",{className:"student-info",children:[E.jsx("h3",{children:N(O.date)}),E.jsxs("span",{children:[O.count," Present"]})]}),E.jsx("div",{style:{color:"var(--primary)"},children:E.jsx(Pn,{size:20,style:{transform:"rotate(180deg)"}})})]},O.date))})]})}function Yv({onBack:o}){return E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:"Guidelines"})]}),E.jsxs("div",{style:{padding:"0 8px"},children:[E.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid var(--primary)"},children:[E.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[E.jsx(oo,{size:20,color:"var(--primary)"})," New vs Regulars"]}),E.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:[E.jsx("strong",{children:"New Kids:"})," Any child who has visited less than 3 times. They get a special badge so you can welcome them!",E.jsx("br",{}),E.jsx("br",{}),E.jsx("strong",{children:"Regulars:"}),' Once a child visits for the 3rd time, they automatically become a "Regular".']})]}),E.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #D97706"},children:[E.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#D97706"},children:[E.jsx(lo,{size:20})," Bible Verse & Notes"]}),E.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["When marking attendance, tap the details:",E.jsx("br",{}),E.jsx("br",{}),E.jsxs("strong",{style:{color:"#D97706"},children:[E.jsx(lo,{size:14,style:{display:"inline",marginRight:4}})," Bible Icon:"]})," Click this if the student can recite the Memory Verse for the day.",E.jsx("br",{}),E.jsx("br",{}),E.jsxs("strong",{style:{color:"var(--primary)"},children:[E.jsx(If,{size:14,style:{display:"inline",marginRight:4}})," Note Icon:"]}),' Use this to add remarks (e.g. "Sick", "Fetched by Lola").']})]}),E.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #10B981"},children:[E.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#10B981"},children:[E.jsx(E2,{size:20})," Smart Check-in"]}),E.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:[E.jsx("strong",{children:"Teachers:"})," Tap the green ",E.jsx("span",{style:{fontWeight:"bold",color:"#10B981"},children:"SCAN"})," button on the Home Page and point at a student's QR.",E.jsx("br",{}),E.jsx("br",{}),E.jsx("strong",{children:"Students:"})," Go to your Profile and tap the ",E.jsx(A2,{size:14,style:{display:"inline",verticalAlign:"middle"}})," icon to see your code."]})]}),E.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #8B5CF6"},children:[E.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#8B5CF6"},children:[E.jsx(x2,{size:20})," List Sorting"]}),E.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["In the Student List, tap the ",E.jsx("strong",{children:"Sort Button"})," (top right) to toggle:",E.jsx("br",{}),"1. ",E.jsx("strong",{children:"Present First"})," (Green checks at top)",E.jsx("br",{}),"2. ",E.jsx("strong",{children:"A-Z"})," (Alphabetical)"]})]}),E.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #F59E0B"},children:[E.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#F59E0B"},children:[E.jsx(_2,{size:20})," Achievements"]}),E.jsxs("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:[E.jsxs("p",{style:{marginBottom:"12px"},children:["Every medal has 3 Levels: ",E.jsx("strong",{children:"Bronze"}),", ",E.jsx("strong",{children:"Silver"}),", and ",E.jsx("strong",{children:"Gold"}),"."]}),E.jsxs("div",{style:{marginBottom:"8px"},children:[E.jsx("strong",{children:" Attendance"}),E.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[E.jsx("li",{children:"1st Visit: First Step"}),E.jsx("li",{children:"3 Visits: Regular"}),E.jsxs("li",{children:["10 Visits: ",E.jsx("strong",{children:"Rising Star"})," (Gold)"]})]})]}),E.jsxs("div",{style:{marginBottom:"8px"},children:[E.jsx("strong",{children:" Bible Verses"}),E.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[E.jsx("li",{children:"1 Verse: Student"}),E.jsx("li",{children:"5 Verses: Scholar"}),E.jsxs("li",{children:["10 Verses: ",E.jsx("strong",{children:"Bible Champ"})," (Gold)"]})]})]}),E.jsxs("div",{style:{marginBottom:"8px"},children:[E.jsx("strong",{children:" Weekly Streak"}),E.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[E.jsx("li",{children:"2 Weeks: Warming Up"}),E.jsx("li",{children:"4 Weeks: On Fire"}),E.jsxs("li",{children:["8 Weeks: ",E.jsx("strong",{children:"Unstoppable"})," (Gold)"]})]})]})]})]}),E.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #DC2626"},children:[E.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#DC2626"},children:[E.jsx(Bf,{size:20})," Follow Up"]}),E.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["The app monitors attendance automatically.",E.jsx("br",{}),E.jsx("br",{}),"If a student is ",E.jsx("strong",{children:"absent for 3 consecutive Sundays"}),' (based on the last 3 recorded dates), they will appear in the "Follow Up" list so you can visit them.']})]})]})]})}function Kg({onBack:o,onComplete:r,initialData:l,canDelete:f}){const[p,g]=de.useState(l?.full_name||""),[b,S]=de.useState(l?.grade_level||""),[_,v]=de.useState(l?.parent_name||""),[N,O]=de.useState(l?.contact_number||""),[B,j]=de.useState(l?.nickname||""),[U,z]=de.useState(l?.gender||"Male"),[q,$]=de.useState(l?.birthday||""),[se,Q]=de.useState(l?.allergies||""),[ue,Ne]=de.useState(l?.first_visit_date||new Date().toISOString().split("T")[0]),[ve,W]=de.useState(!1),ee=!!l,[re,At]=de.useState(l?.avatar_url||""),[We,_e]=de.useState(!1),He=(Ce=>{if(!Ce)return"";const Re=new Date(Ce),Ee=new Date;let H=Ee.getFullYear()-Re.getFullYear();const ne=Ee.getMonth()-Re.getMonth();return(ne<0||ne===0&&Ee.getDate()<Re.getDate())&&H--,H})(q),ae=async Ce=>{try{_e(!0);const Re=Ce.target.files[0];if(!Re)return;const Ee=document.createElement("img"),H=document.createElement("canvas"),ne=new FileReader;ne.onload=function(Se){Ee.onload=function(){let ye=Ee.width,Je=Ee.height;ye>Je?ye>300&&(Je*=300/ye,ye=300):Je>300&&(ye*=300/Je,Je=300),H.width=ye,H.height=Je,H.getContext("2d").drawImage(Ee,0,0,ye,Je),H.toBlob(async st=>{const Vn=`${Date.now()}-${Math.floor(Math.random()*1e3)}.jpg`,{data:en,error:Kn}=await Xe.storage.from("avatars").upload(Vn,st,{contentType:"image/jpeg",upsert:!1});if(Kn)throw Kn;const lt=Xe.storage.from("avatars").getPublicUrl(Vn).data.publicUrl;At(lt),_e(!1)},"image/jpeg",.8)},Ee.src=Se.target.result},ne.readAsDataURL(Re)}catch(Re){alert("Error uploading: "+Re.message),_e(!1)}},te=async Ce=>{if(Ce.preventDefault(),!p.trim())return;W(!0);const Re={full_name:p,grade_level:b,parent_name:_,contact_number:N,gender:U,nickname:B,birthday:q||null,allergies:se||null,first_visit_date:ue,avatar_url:re};try{if(ee){const{error:Ee}=await Xe.from("students").update(Re).eq("id",l.id);if(Ee)throw Ee}else{const{error:Ee}=await Xe.from("students").insert([Re]);if(Ee)throw Ee}r()}catch(Ee){console.error(Ee),alert("Error saving: "+(Ee.message||"Unknown error"))}finally{W(!1)}},fe=async()=>{if(confirm("Are you sure you want to delete this student?")){W(!0);try{const{error:Ce}=await Xe.from("students").delete().eq("id",l.id);if(Ce)throw Ce;r()}catch(Ce){alert(Ce.message)}finally{W(!1)}}};return E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:ee?"Edit Student":"Register Student"})]}),E.jsxs("form",{onSubmit:te,className:"student-form",children:[E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px"},children:[E.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#F3F4F6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",border:"3px solid #fff",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:re?E.jsx("img",{src:re,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):E.jsx(Zc,{size:48,color:"#9CA3AF"})}),E.jsxs("div",{className:"file-upload-btn",children:[E.jsx("label",{htmlFor:"avatar-upload",className:"btn secondary",style:{fontSize:"12px",padding:"6px 12px",cursor:"pointer"},children:We?"Compressing...":re?"Change Photo":"Upload Photo"}),E.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:ae,style:{display:"none"},disabled:We})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Full Name"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. Timothy Santos",value:p,onChange:Ce=>g(Ce.target.value),autoFocus:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Nickname (Optional)"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. Tim",value:B,onChange:Ce=>j(Ce.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Gender"}),E.jsxs("div",{className:"gender-select",children:[E.jsx("div",{className:`gender-option ${U==="Male"?"selected":""}`,onClick:()=>z("Male"),children:"Male"}),E.jsx("div",{className:`gender-option ${U==="Female"?"selected":""}`,onClick:()=>z("Female"),children:"Female"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Birthday (Optional)"}),E.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[E.jsx("input",{type:"date",className:"input",value:q,onChange:Ce=>$(Ce.target.value),style:{flex:1}}),He!==""&&E.jsxs("div",{style:{background:"#EFF6FF",color:"#2563EB",padding:"8px 12px",borderRadius:"8px",fontWeight:"bold",fontSize:"14px",whiteSpace:"nowrap"},children:[He," yrs old"]})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"First Day of Visit"}),E.jsx("input",{type:"date",className:"input",value:ue,onChange:Ce=>Ne(Ce.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Allergies / Medical Notes"}),E.jsx("textarea",{className:"input",placeholder:"e.g. Peanuts, Asthma, etc.",value:se,onChange:Ce=>Q(Ce.target.value),rows:3,style:{resize:"vertical"}})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Grade Level"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. Grade 1",value:b,onChange:Ce=>S(Ce.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Parent Name (Optional)"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. Mom/Dad Name",value:_,onChange:Ce=>v(Ce.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Contact No. (Optional)"}),E.jsx("input",{type:"text",className:"input",placeholder:"0912...",value:N,onChange:Ce=>O(Ce.target.value)})]}),E.jsx("button",{type:"submit",className:"btn full-width",disabled:ve,children:ve?"Saving...":ee?"Update Changes":"Save Student"}),ee&&f&&E.jsxs("button",{type:"button",onClick:fe,className:"btn full-width",style:{background:"#FEE2E2",color:"#DC2626",marginTop:"12px"},disabled:ve,children:[E.jsx(Mf,{size:20,style:{marginRight:"8px"}})," Delete Student"]})]})]})}function qv({onBack:o}){const{permissions:r}=Sa(),[l,f]=de.useState("list"),[p,g]=de.useState(null),[b,S]=de.useState([]),[_,v]=de.useState(!0),[N,O]=de.useState("");de.useEffect(()=>{B()},[]);async function B(){try{v(!0);const{data:U,error:z}=await Xe.from("students").select("*").order("full_name");if(z)throw z;S(U)}catch(U){console.error(U)}finally{v(!1)}}const j=b.filter(U=>U.full_name.toLowerCase().includes(N.toLowerCase()));return r.canEditStudents?l==="add"?E.jsx(Kg,{onBack:()=>f("list"),onComplete:()=>{f("list"),B()},initialData:null,canDelete:!1}):l==="edit"?E.jsx(Kg,{onBack:()=>f("list"),onComplete:()=>{f("list"),B()},initialData:p,canDelete:r.canDeleteStudents}):E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:"Manage Students"})]}),E.jsxs("button",{onClick:()=>f("add"),className:"btn",style:{padding:"8px 12px",fontSize:"14px"},children:[E.jsx(Rf,{size:18,style:{marginRight:"4px"}})," Add"]})]}),E.jsxs("div",{className:"search-bar",children:[E.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:N,onChange:U=>O(U.target.value)}),E.jsx(fo,{size:20,className:"search-icon"})]}),E.jsx("div",{className:"student-list",children:_?E.jsx("div",{className:"empty-state",children:"Loading..."}):j.length===0?E.jsx("div",{className:"empty-state",children:"No students found."}):j.map(U=>E.jsxs("div",{className:"card student-card",onClick:()=>{g(U),f("edit")},children:[E.jsxs("div",{className:"student-info",children:[E.jsxs("h3",{children:[U.full_name," ",U.nickname&&E.jsxs("span",{style:{color:"var(--primary)",fontWeight:"normal"},children:['"',U.nickname,'"']})]}),E.jsx("span",{children:U.grade_level||"No Grade"})]}),E.jsx("div",{style:{color:"var(--primary)"},children:E.jsx(b2,{size:20})})]},U.id))})]}):E.jsxs("div",{className:"page slide-in",children:[E.jsx("header",{className:"page-header",children:E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})})}),E.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:[E.jsx("h3",{children:"Access Denied"}),E.jsx("p",{children:"Client Access Only. Please see an Admin."})]})]})}function Xv({onBack:o}){const{user:r}=Sa(),[l,f]=de.useState([]),[p,g]=de.useState(!0),[b,S]=de.useState(null),[_,v]=de.useState(!1),[N,O]=de.useState(""),[B,j]=de.useState(""),[U,z]=de.useState("TEACHER"),[q,$]=de.useState("");de.useEffect(()=>{se()},[]);async function se(){try{g(!0);const{data:ee,error:re}=await Xe.from("app_users").select("*").order("created_at");if(re)throw re;f(ee)}catch(ee){S(ee.message)}finally{g(!1)}}const Q=async ee=>{if(ee.preventDefault(),!(!N||!B||!q)){if(B.length<4){alert("PIN must be at least 4 digits");return}try{const{error:re}=await Xe.from("app_users").insert([{full_name:N,username:q,pin:B,role:U}]);if(re)throw re;v(!1),O(""),j(""),$(""),se()}catch(re){alert(re.message)}}},ue=async ee=>{if(confirm("Are you sure you want to delete this user?"))try{if(ee===r.id){alert("You cannot delete yourself!");return}const{error:re}=await Xe.from("app_users").delete().eq("id",ee);if(re)throw re;se()}catch(re){alert(re.message)}};if(!(r?.role==="ADMIN"||r?.role==="USHER_ADMIN"))return E.jsxs("div",{className:"page slide-in",children:[E.jsx("header",{className:"page-header",children:E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})})}),E.jsxs("div",{className:"empty-state",children:[E.jsx(Df,{size:48,color:"#DC2626"}),E.jsx("h3",{children:"Access Denied"}),E.jsx("p",{children:"Only Admins can manage users."})]})]});const ve=l.filter(ee=>r.role==="ADMIN"?!0:r.role==="USHER_ADMIN"?ee.role==="USHER"||ee.id===r.id:!1),W=()=>r.role==="USHER_ADMIN"?E.jsx("option",{value:"USHER",children:"Usher (Service Attendance)"}):E.jsxs(E.Fragment,{children:[E.jsx("option",{value:"TEACHER",children:"Teacher (Kids)"}),E.jsx("option",{value:"ASSISTANT_TEACHER",children:"Assistant (Kids)"}),E.jsx("option",{value:"ADMIN",children:"Kids Admin (Full Access)"}),E.jsx("option",{value:"USHER_ADMIN",children:"Usher Admin (Manage Ushers)"})]});return E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:"Manage Users"})]}),!_&&E.jsxs("button",{onClick:()=>v(!0),className:"btn",style:{padding:"8px 12px",fontSize:"14px"},children:[E.jsx(Rf,{size:18,style:{marginRight:"4px"}})," Add User"]})]}),_&&E.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"24px",border:"2px solid var(--primary)"},children:[E.jsx("h3",{style:{marginBottom:"16px"},children:"Add New Staff"}),E.jsxs("form",{onSubmit:Q,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Full Name"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. John Doe",value:N,onChange:ee=>O(ee.target.value),required:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Username (Unique ID)"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. john",value:q,onChange:ee=>$(ee.target.value),required:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"PIN Code"}),E.jsx("input",{type:"tel",className:"input",placeholder:"e.g. 1234",value:B,onChange:ee=>j(ee.target.value),maxLength:6,required:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Role"}),E.jsx("select",{className:"input",value:U,onChange:ee=>z(ee.target.value),children:W()})]}),E.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[E.jsx("button",{type:"button",className:"btn secondary",onClick:()=>v(!1),style:{flex:1},children:"Cancel"}),E.jsx("button",{type:"submit",className:"btn",style:{flex:1},children:"Create User"})]})]})]}),E.jsx("div",{className:"student-list",children:p?E.jsx("div",{className:"empty-state",children:"Loading..."}):ve.map(ee=>E.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[E.jsxs("div",{className:"student-info",children:[E.jsxs("h3",{children:[ee.full_name," ",E.jsxs("span",{style:{fontSize:"12px",color:"#666",fontWeight:"normal"},children:["(",ee.username,")"]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[E.jsx("span",{className:`badge ${ee.role==="ADMIN"||ee.role==="USHER_ADMIN"?"visit-3":"visit-1"}`,style:{fontSize:"10px"},children:ee.role}),E.jsxs("span",{style:{fontSize:"12px",color:"#9CA3AF"},children:["PIN: ",ee.pin]})]})]}),ee.username!=="admin"&&ee.id!==r.id&&E.jsx("button",{onClick:()=>ue(ee.id),style:{background:"none",border:"none",color:"#DC2626",cursor:"pointer"},children:E.jsx(Mf,{size:20})})]},ee.id))})]})}function Wv({onNavigate:o}){const{user:r,logout:l}=Sa();return E.jsxs("div",{className:"page fade-in",children:[E.jsxs("header",{className:"home-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px",borderBottom:"1px solid #E5E7EB",marginBottom:"24px"},children:[E.jsxs("div",{children:[E.jsx("h1",{style:{fontSize:"24px",color:"#111827"},children:"Usher Team"}),E.jsxs("p",{style:{fontSize:"14px",color:"#6B7280"},children:[r?.full_name," (",r?.role,")"]})]}),E.jsxs("button",{onClick:l,style:{background:"none",border:"none",color:"#EF4444",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",fontSize:"10px"},title:"Logout",children:[E.jsx(v2,{size:24}),E.jsx("span",{children:"Logout"})]})]}),E.jsxs("div",{className:"menu-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px"},children:[E.jsxs("button",{className:"menu-card primary",onClick:()=>o("service-attendance"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[E.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#059669",marginBottom:"8px"},children:E.jsx(oo,{size:40})}),E.jsxs("div",{children:[E.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Service Attendance"}),E.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Check-in Members"})]})]}),E.jsxs("button",{className:"menu-card",onClick:()=>o("member-manager"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[E.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#C2410C",marginBottom:"8px"},children:E.jsx(w2,{size:40})}),E.jsxs("div",{children:[E.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Member Directory"}),E.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Add or Edit Profiles"})]})]}),E.jsxs("button",{className:"menu-card",onClick:()=>o("member-reports"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[E.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#7C3AED",marginBottom:"8px"},children:E.jsx(y2,{size:40})}),E.jsxs("div",{children:[E.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Reports & Export"}),E.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"View History"})]})]}),r?.role==="USHER_ADMIN"&&E.jsxs("button",{className:"menu-card",onClick:()=>o("user-manager"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[E.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#2563EB",marginBottom:"8px"},children:E.jsx(Df,{size:40})}),E.jsxs("div",{children:[E.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Manage Ushers"}),E.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Admin Controls"})]})]})]})]})}function Zv({onBack:o}){const[r,l]=de.useState(""),[f,p]=de.useState([]),[g,b]=de.useState(!0),[S,_]=de.useState(()=>{const z=new Date,q=z.getFullYear(),$=String(z.getMonth()+1).padStart(2,"0"),se=String(z.getDate()).padStart(2,"0");return`${q}-${$}-${se}`}),[v,N]=de.useState("MORNING_SERVICE");de.useEffect(()=>{O()},[S,v]);async function O(){try{b(!0);const{data:z,error:q}=await Xe.from("members").select("*").order("full_name");if(q)throw q;const{data:$,error:se}=await Xe.from("member_attendance").select("member_id, status").eq("date",S).eq("service_type",v).eq("status","PRESENT");if(se)throw se;const Q=new Set($.map(Ne=>Ne.member_id)),ue=z.map(Ne=>({...Ne,present:Q.has(Ne.id)}));p(ue)}catch(z){console.error(z)}finally{b(!1)}}const B=async z=>{const q=!z.present;p($=>$.map(se=>se.id===z.id?{...se,present:q}:se));try{q?await Xe.from("member_attendance").insert({member_id:z.id,date:S,service_type:v,status:"PRESENT"}):await Xe.from("member_attendance").delete().eq("member_id",z.id).eq("date",S).eq("service_type",v)}catch($){console.error($),p(se=>se.map(Q=>Q.id===z.id?{...Q,present:!q}:Q)),alert("Error updating attendance")}},j=f.filter(z=>z.full_name.toLowerCase().includes(r.toLowerCase())),U=f.filter(z=>z.present).length;return E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",style:{flexDirection:"column",alignItems:"stretch",gap:"16px"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:"Check-In"})]}),E.jsxs("div",{style:{background:"#ECFDF5",color:"#059669",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"6px"},children:[E.jsx(oo,{size:16})," ",U," Present"]})]}),E.jsxs("div",{style:{display:"flex",gap:"12px"},children:[E.jsx("div",{style:{flex:1},children:E.jsx("input",{type:"date",className:"input",value:S,onChange:z=>_(z.target.value)})}),E.jsx("div",{style:{flex:1},children:E.jsxs("select",{className:"input",value:v,onChange:z=>N(z.target.value),children:[E.jsx("option",{value:"MORNING_SERVICE",children:" Morning"}),E.jsx("option",{value:"EVENING_SERVICE",children:" Evening"}),E.jsx("option",{value:"SPECIAL_EVENT",children:" Special"})]})})]})]}),E.jsxs("div",{className:"search-bar",children:[E.jsx("input",{type:"text",placeholder:"Search member...",className:"input search-input",value:r,onChange:z=>l(z.target.value)}),E.jsx(fo,{size:20,className:"search-icon"})]}),E.jsx("div",{className:"student-list",children:g?E.jsx("p",{children:"Loading..."}):j.length===0?E.jsx("p",{className:"empty-state",children:"No members found."}):j.map(z=>E.jsxs("div",{className:"student-card",onClick:()=>B(z),style:{cursor:"pointer"},children:[E.jsx("div",{className:"student-info",children:E.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[z.full_name,E.jsx("span",{className:`badge ${z.age_group==="YOUTH"?"visit-2":z.age_group==="SENIOR"?"visit-3":"visit-1"}`,style:{fontSize:"10px",marginTop:0},children:z.age_group})]})}),E.jsx("div",{className:`check-btn ${z.present?"active":""}`,children:E.jsx(ho,{size:24,fill:z.present?"white":"none",color:z.present?"white":"var(--border-color)"})})]},z.id))})]})}function Jg({onBack:o,onComplete:r,initialData:l,canDelete:f}){const[p,g]=de.useState(l?.full_name||""),[b,S]=de.useState(l?.nickname||""),[_,v]=de.useState(l?.gender||"Male"),[N,O]=de.useState(l?.birthday||""),[B,j]=de.useState(l?.civil_status||"Single"),[U,z]=de.useState(l?.contact_number||""),[q,$]=de.useState(l?.address||""),[se,Q]=de.useState(l?.ministry||""),[ue,Ne]=de.useState(l?.allergies||""),[ve,W]=de.useState(l?.first_visit_date||new Date().toISOString().split("T")[0]),[ee,re]=de.useState(!1),At=!!l,[We,_e]=de.useState(l?.avatar_url||""),[De,He]=de.useState(!1),te=(Ee=>{if(!Ee)return"";const H=new Date(Ee),ne=new Date;let Se=ne.getFullYear()-H.getFullYear();const Te=ne.getMonth()-H.getMonth();return(Te<0||Te===0&&ne.getDate()<H.getDate())&&Se--,Se})(N),fe=async Ee=>{try{He(!0);const H=Ee.target.files[0];if(!H)return;const ne=document.createElement("img"),Se=document.createElement("canvas"),Te=new FileReader;Te.onload=function(Ye){ne.onload=function(){let $e=ne.width,st=ne.height;$e>st?$e>300&&(st*=300/$e,$e=300):st>300&&($e*=300/st,st=300),Se.width=$e,Se.height=st,Se.getContext("2d").drawImage(ne,0,0,$e,st),Se.toBlob(async en=>{const Kn=`member-${Date.now()}-${Math.floor(Math.random()*1e3)}.jpg`,{data:lt,error:In}=await Xe.storage.from("avatars").upload(Kn,en,{contentType:"image/jpeg",upsert:!1});if(In)throw In;const Fn=Xe.storage.from("avatars").getPublicUrl(Kn).data.publicUrl;_e(Fn),He(!1)},"image/jpeg",.8)},ne.src=Ye.target.result},Te.readAsDataURL(H)}catch(H){alert("Error uploading: "+H.message),He(!1)}},Ce=async Ee=>{if(Ee.preventDefault(),!p.trim())return;re(!0);const H={full_name:p,nickname:b,gender:_,birthday:N||null,civil_status:B,contact_number:U,address:q,ministry:se,allergies:ue||null,first_visit_date:ve,avatar_url:We};try{if(At){const{error:ne}=await Xe.from("members").update(H).eq("id",l.id);if(ne)throw ne}else{const{error:ne}=await Xe.from("members").insert([H]);if(ne)throw ne}r()}catch(ne){console.error(ne),alert("Error saving: "+(ne.message||"Unknown error"))}finally{re(!1)}},Re=async()=>{if(confirm("Are you sure you want to delete this member?")){re(!0);try{const{error:Ee}=await Xe.from("members").delete().eq("id",l.id);if(Ee)throw Ee;r()}catch(Ee){alert(Ee.message)}finally{re(!1)}}};return E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:At?"Edit Member":"Register Member"})]}),E.jsxs("form",{onSubmit:Ce,className:"student-form",children:[E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px"},children:[E.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#F3F4F6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",border:"3px solid #fff",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:We?E.jsx("img",{src:We,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):E.jsx(Zc,{size:48,color:"#9CA3AF"})}),E.jsxs("div",{className:"file-upload-btn",children:[E.jsx("label",{htmlFor:"avatar-upload",className:"btn secondary",style:{fontSize:"12px",padding:"6px 12px",cursor:"pointer"},children:De?"Compressing...":We?"Change Photo":"Upload Photo"}),E.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:fe,style:{display:"none"},disabled:De})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Full Name"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. Juan Dela Cruz",value:p,onChange:Ee=>g(Ee.target.value),autoFocus:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Nickname (Optional)"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. Johnny",value:b,onChange:Ee=>S(Ee.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Gender"}),E.jsxs("div",{className:"gender-select",children:[E.jsx("div",{className:`gender-option ${_==="Male"?"selected":""}`,onClick:()=>v("Male"),children:"Male"}),E.jsx("div",{className:`gender-option ${_==="Female"?"selected":""}`,onClick:()=>v("Female"),children:"Female"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Civil Status"}),E.jsxs("select",{className:"input",value:B,onChange:Ee=>j(Ee.target.value),children:[E.jsx("option",{value:"Single",children:"Single"}),E.jsx("option",{value:"Married",children:"Married"}),E.jsx("option",{value:"Widowed",children:"Widowed"}),E.jsx("option",{value:"Separated",children:"Separated"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Birthday (Optional)"}),E.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[E.jsx("input",{type:"date",className:"input",value:N,onChange:Ee=>O(Ee.target.value),style:{flex:1}}),te!==""&&E.jsxs("div",{style:{background:"#EFF6FF",color:"#2563EB",padding:"8px 12px",borderRadius:"8px",fontWeight:"bold",fontSize:"14px",whiteSpace:"nowrap"},children:[te," yrs old"]})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Contact Number"}),E.jsx("input",{type:"text",className:"input",placeholder:"0912...",value:U,onChange:Ee=>z(Ee.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Address"}),E.jsx("input",{type:"text",className:"input",placeholder:"Barangay, City...",value:q,onChange:Ee=>$(Ee.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Ministry / Department"}),E.jsx("input",{type:"text",className:"input",placeholder:"e.g. Music, Ushering, None",value:se,onChange:Ee=>Q(Ee.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"First Day of Visit"}),E.jsx("input",{type:"date",className:"input",value:ve,onChange:Ee=>W(Ee.target.value)})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Allergies / Medical Notes"}),E.jsx("textarea",{className:"input",placeholder:"e.g. Hypertension, etc.",value:ue,onChange:Ee=>Ne(Ee.target.value),rows:3,style:{resize:"vertical"}})]}),E.jsx("button",{type:"submit",className:"btn full-width",disabled:ee,children:ee?"Saving...":At?"Update Changes":"Save Member"}),At&&f&&E.jsxs("button",{type:"button",onClick:Re,className:"btn full-width",style:{background:"#FEE2E2",color:"#DC2626",marginTop:"12px"},disabled:ee,children:[E.jsx(Mf,{size:20,style:{marginRight:"8px"}})," Delete Member"]})]})]})}function Qv({onBack:o}){const{permissions:r}=Sa(),[l,f]=de.useState("list"),[p,g]=de.useState(null),[b,S]=de.useState([]),[_,v]=de.useState(!0),[N,O]=de.useState("");de.useEffect(()=>{B()},[]);async function B(){try{v(!0);const{data:U,error:z}=await Xe.from("members").select("*").order("full_name");if(z)throw z;S(U)}catch(U){console.error(U)}finally{v(!1)}}const j=b.filter(U=>U.full_name.toLowerCase().includes(N.toLowerCase()));return r.canEditStudents||r.isUsher,!r.canEditStudents&&r.role,l==="add"?E.jsx(Jg,{onBack:()=>f("list"),onComplete:()=>{f("list"),B()},initialData:null,canDelete:!1}):l==="edit"?E.jsx(Jg,{onBack:()=>f("list"),onComplete:()=>{f("list"),B()},initialData:p,canDelete:r.canDeleteStudents}):E.jsxs("div",{className:"page slide-in",children:[E.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[E.jsx("button",{onClick:o,className:"back-btn",children:E.jsx(Pn,{size:24})}),E.jsx("h2",{children:"Congregation"})]}),E.jsxs("button",{onClick:()=>f("add"),className:"btn",style:{padding:"8px 12px",fontSize:"14px"},children:[E.jsx(Rf,{size:18,style:{marginRight:"4px"}})," Add"]})]}),E.jsxs("div",{className:"search-bar",children:[E.jsx("input",{type:"text",placeholder:"Search member...",className:"input search-input",value:N,onChange:U=>O(U.target.value)}),E.jsx(fo,{size:20,className:"search-icon"})]}),E.jsx("div",{className:"student-list",children:_?E.jsx("div",{className:"empty-state",children:"Loading..."}):j.length===0?E.jsx("div",{className:"empty-state",children:"No members found."}):j.map(U=>E.jsxs("div",{className:"card student-card",onClick:()=>{g(U),f("edit")},children:[E.jsxs("div",{className:"student-info",children:[E.jsxs("h3",{children:[U.full_name," ",U.nickname&&E.jsxs("span",{style:{color:"var(--primary)",fontWeight:"normal"},children:['"',U.nickname,'"']})]}),E.jsxs("div",{style:{display:"flex",gap:"8px",fontSize:"12px",color:"#666"},children:[U.ministry&&E.jsx("span",{children:U.ministry}),U.ministry&&E.jsx("span",{children:""}),E.jsx("span",{children:U.civil_status})]})]}),E.jsx("div",{style:{color:"var(--primary)"},children:E.jsx(b2,{size:20})})]},U.id))})]})}class Kv extends de.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,l){console.error("Uncaught error:",r,l),(r.toString().includes("user")||r.toString().includes("Auth"))&&localStorage.removeItem("app_user")}render(){return this.state.hasError?E.jsxs("div",{style:{padding:"40px",color:"#DC2626",fontFamily:"system-ui",textAlign:"center"},children:[E.jsx("h1",{children:"Something went wrong."}),E.jsx("p",{style:{background:"#FEE2E2",padding:"10px",borderRadius:"8px",display:"inline-block"},children:this.state.error?.toString()}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},style:{padding:"12px 24px",background:"#DC2626",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"Reset & Reload App"})]}):this.props.children}}function Jv(){const{user:o,loading:r}=Sa(),[l,f]=de.useState(!0),[p,g]=de.useState("home");de.useEffect(()=>{},[r]);const b=de.useCallback(()=>{f(!1)},[]);if(l)return E.jsx(Vy,{onFinish:b});if(!o)return E.jsx(kw,{});const S=o.role==="USHER"||o.role==="USHER_ADMIN";if(p==="home"&&S)return E.jsx(Wv,{onNavigate:g});switch(p){case"home":return E.jsx(kg,{onNavigate:g});case"attendance":return E.jsx(Cv,{onBack:()=>g("home")});case"activity-log":return E.jsx(Tv,{onBack:()=>g("home")});case"follow-up":return E.jsx(Nv,{onBack:()=>g("home")});case"student-monitor":return E.jsx(Hv,{onBack:()=>g("home")});case"reports":return E.jsx(Gv,{onNavigate:g});case"info":return E.jsx(Yv,{onBack:()=>g("home")});case"student-manager":return E.jsx(qv,{onBack:()=>g("home")});case"user-manager":return E.jsx(Xv,{onBack:()=>g("home")});case"service-attendance":return E.jsx(Zv,{onBack:()=>g("home")});case"member-manager":return E.jsx(Qv,{onBack:()=>g("home")});case"member-reports":return E.jsxs("div",{style:{padding:20},children:["Member Reports (Coming Soon) ",E.jsx("button",{onClick:()=>g("home"),children:"Back"})]});default:return E.jsx(kg,{onNavigate:g})}}function $v(){return E.jsx(Kv,{children:E.jsx(Fy,{children:E.jsx(Jv,{})})})}hp.createRoot(document.getElementById("root")).render(E.jsx(de.StrictMode,{children:E.jsx($v,{})}));

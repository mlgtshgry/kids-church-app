(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const g of p)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function l(p){const g={};return p.integrity&&(g.integrity=p.integrity),p.referrerPolicy&&(g.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?g.credentials="include":p.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function f(p){if(p.ep)return;p.ep=!0;const g=l(p);fetch(p.href,g)}})();var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ep(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Gh={exports:{}},Zl={};var z1;function tp(){if(z1)return Zl;z1=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function l(f,p,g){var b=null;if(g!==void 0&&(b=""+g),p.key!==void 0&&(b=""+p.key),"key"in p){g={};for(var S in p)S!=="key"&&(g[S]=p[S])}else g=p;return p=g.ref,{$$typeof:o,type:f,key:b,ref:p!==void 0?p:null,props:g}}return Zl.Fragment=r,Zl.jsx=l,Zl.jsxs=l,Zl}var P1;function np(){return P1||(P1=1,Gh.exports=tp()),Gh.exports}var A=np(),qh={exports:{}},Ke={};var F1;function ip(){if(F1)return Ke;F1=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),b=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),B=Symbol.iterator;function k(V){return V===null||typeof V!="object"?null:(V=B&&V[B]||V["@@iterator"],typeof V=="function"?V:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,Y={};function J(V,ue,Se){this.props=V,this.context=ue,this.refs=Y,this.updater=Se||z}J.prototype.isReactComponent={},J.prototype.setState=function(V,ue){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ue,"setState")},J.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ae(){}ae.prototype=J.prototype;function Z(V,ue,Se){this.props=V,this.context=ue,this.refs=Y,this.updater=Se||z}var ce=Z.prototype=new ae;ce.constructor=Z,U(ce,J.prototype),ce.isPureReactComponent=!0;var Ce=Array.isArray;function Ae(){}var Q={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function le(V,ue,Se){var _e=Se.ref;return{$$typeof:o,type:V,key:ue,ref:_e!==void 0?_e:null,props:Se}}function Ne(V,ue){return le(V.type,ue,V.props)}function ke(V){return typeof V=="object"&&V!==null&&V.$$typeof===o}function ye(V){var ue={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Se){return ue[Se]})}var Ue=/\/+/g;function Ge(V,ue){return typeof V=="object"&&V!==null&&V.key!=null?ye(""+V.key):ue.toString(36)}function ie(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Ae,Ae):(V.status="pending",V.then(function(ue){V.status==="pending"&&(V.status="fulfilled",V.value=ue)},function(ue){V.status==="pending"&&(V.status="rejected",V.reason=ue)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function ee(V,ue,Se,_e,Ye){var Ee=typeof V;(Ee==="undefined"||Ee==="boolean")&&(V=null);var ct=!1;if(V===null)ct=!0;else switch(Ee){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(V.$$typeof){case o:case r:ct=!0;break;case N:return ct=V._init,ee(ct(V._payload),ue,Se,_e,Ye)}}if(ct)return Ye=Ye(V),ct=_e===""?"."+Ge(V,0):_e,Ce(Ye)?(Se="",ct!=null&&(Se=ct.replace(Ue,"$&/")+"/"),ee(Ye,ue,Se,"",function(ji){return ji})):Ye!=null&&(ke(Ye)&&(Ye=Ne(Ye,Se+(Ye.key==null||V&&V.key===Ye.key?"":(""+Ye.key).replace(Ue,"$&/")+"/")+ct)),ue.push(Ye)),1;ct=0;var mt=_e===""?".":_e+":";if(Ce(V))for(var Ut=0;Ut<V.length;Ut++)_e=V[Ut],Ee=mt+Ge(_e,Ut),ct+=ee(_e,ue,Se,Ee,Ye);else if(Ut=k(V),typeof Ut=="function")for(V=Ut.call(V),Ut=0;!(_e=V.next()).done;)_e=_e.value,Ee=mt+Ge(_e,Ut++),ct+=ee(_e,ue,Se,Ee,Ye);else if(Ee==="object"){if(typeof V.then=="function")return ee(ie(V),ue,Se,_e,Ye);throw ue=String(V),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return ct}function fe(V,ue,Se){if(V==null)return V;var _e=[],Ye=0;return ee(V,_e,"","",function(Ee){return ue.call(Se,Ee,Ye++)}),_e}function Ie(V){if(V._status===-1){var ue=V._result;ue=ue(),ue.then(function(Se){(V._status===0||V._status===-1)&&(V._status=1,V._result=Se)},function(Se){(V._status===0||V._status===-1)&&(V._status=2,V._result=Se)}),V._status===-1&&(V._status=0,V._result=ue)}if(V._status===1)return V._result.default;throw V._result}var Je=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Qe={map:fe,forEach:function(V,ue,Se){fe(V,function(){ue.apply(this,arguments)},Se)},count:function(V){var ue=0;return fe(V,function(){ue++}),ue},toArray:function(V){return fe(V,function(ue){return ue})||[]},only:function(V){if(!ke(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ke.Activity=O,Ke.Children=Qe,Ke.Component=J,Ke.Fragment=l,Ke.Profiler=p,Ke.PureComponent=Z,Ke.StrictMode=f,Ke.Suspense=_,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(V){return Q.H.useMemoCache(V)}},Ke.cache=function(V){return function(){return V.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(V,ue,Se){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var _e=U({},V.props),Ye=V.key;if(ue!=null)for(Ee in ue.key!==void 0&&(Ye=""+ue.key),ue)!ne.call(ue,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ue.ref===void 0||(_e[Ee]=ue[Ee]);var Ee=arguments.length-2;if(Ee===1)_e.children=Se;else if(1<Ee){for(var ct=Array(Ee),mt=0;mt<Ee;mt++)ct[mt]=arguments[mt+2];_e.children=ct}return le(V.type,Ye,_e)},Ke.createContext=function(V){return V={$$typeof:b,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:g,_context:V},V},Ke.createElement=function(V,ue,Se){var _e,Ye={},Ee=null;if(ue!=null)for(_e in ue.key!==void 0&&(Ee=""+ue.key),ue)ne.call(ue,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(Ye[_e]=ue[_e]);var ct=arguments.length-2;if(ct===1)Ye.children=Se;else if(1<ct){for(var mt=Array(ct),Ut=0;Ut<ct;Ut++)mt[Ut]=arguments[Ut+2];Ye.children=mt}if(V&&V.defaultProps)for(_e in ct=V.defaultProps,ct)Ye[_e]===void 0&&(Ye[_e]=ct[_e]);return le(V,Ee,Ye)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(V){return{$$typeof:S,render:V}},Ke.isValidElement=ke,Ke.lazy=function(V){return{$$typeof:N,_payload:{_status:-1,_result:V},_init:Ie}},Ke.memo=function(V,ue){return{$$typeof:v,type:V,compare:ue===void 0?null:ue}},Ke.startTransition=function(V){var ue=Q.T,Se={};Q.T=Se;try{var _e=V(),Ye=Q.S;Ye!==null&&Ye(Se,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(Ae,Je)}catch(Ee){Je(Ee)}finally{ue!==null&&Se.types!==null&&(ue.types=Se.types),Q.T=ue}},Ke.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Ke.use=function(V){return Q.H.use(V)},Ke.useActionState=function(V,ue,Se){return Q.H.useActionState(V,ue,Se)},Ke.useCallback=function(V,ue){return Q.H.useCallback(V,ue)},Ke.useContext=function(V){return Q.H.useContext(V)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(V,ue){return Q.H.useDeferredValue(V,ue)},Ke.useEffect=function(V,ue){return Q.H.useEffect(V,ue)},Ke.useEffectEvent=function(V){return Q.H.useEffectEvent(V)},Ke.useId=function(){return Q.H.useId()},Ke.useImperativeHandle=function(V,ue,Se){return Q.H.useImperativeHandle(V,ue,Se)},Ke.useInsertionEffect=function(V,ue){return Q.H.useInsertionEffect(V,ue)},Ke.useLayoutEffect=function(V,ue){return Q.H.useLayoutEffect(V,ue)},Ke.useMemo=function(V,ue){return Q.H.useMemo(V,ue)},Ke.useOptimistic=function(V,ue){return Q.H.useOptimistic(V,ue)},Ke.useReducer=function(V,ue,Se){return Q.H.useReducer(V,ue,Se)},Ke.useRef=function(V){return Q.H.useRef(V)},Ke.useState=function(V){return Q.H.useState(V)},Ke.useSyncExternalStore=function(V,ue,Se){return Q.H.useSyncExternalStore(V,ue,Se)},Ke.useTransition=function(){return Q.H.useTransition()},Ke.version="19.2.4",Ke}var H1;function co(){return H1||(H1=1,qh.exports=ip()),qh.exports}var me=co(),Yh={exports:{}},Ql={},Xh={exports:{}},Wh={};var V1;function rp(){return V1||(V1=1,(function(o){function r(ee,fe){var Ie=ee.length;ee.push(fe);e:for(;0<Ie;){var Je=Ie-1>>>1,Qe=ee[Je];if(0<p(Qe,fe))ee[Je]=fe,ee[Ie]=Qe,Ie=Je;else break e}}function l(ee){return ee.length===0?null:ee[0]}function f(ee){if(ee.length===0)return null;var fe=ee[0],Ie=ee.pop();if(Ie!==fe){ee[0]=Ie;e:for(var Je=0,Qe=ee.length,V=Qe>>>1;Je<V;){var ue=2*(Je+1)-1,Se=ee[ue],_e=ue+1,Ye=ee[_e];if(0>p(Se,Ie))_e<Qe&&0>p(Ye,Se)?(ee[Je]=Ye,ee[_e]=Ie,Je=_e):(ee[Je]=Se,ee[ue]=Ie,Je=ue);else if(_e<Qe&&0>p(Ye,Ie))ee[Je]=Ye,ee[_e]=Ie,Je=_e;else break e}}return fe}function p(ee,fe){var Ie=ee.sortIndex-fe.sortIndex;return Ie!==0?Ie:ee.id-fe.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;o.unstable_now=function(){return g.now()}}else{var b=Date,S=b.now();o.unstable_now=function(){return b.now()-S}}var _=[],v=[],N=1,O=null,B=3,k=!1,z=!1,U=!1,Y=!1,J=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ce(ee){for(var fe=l(v);fe!==null;){if(fe.callback===null)f(v);else if(fe.startTime<=ee)f(v),fe.sortIndex=fe.expirationTime,r(_,fe);else break;fe=l(v)}}function Ce(ee){if(U=!1,ce(ee),!z)if(l(_)!==null)z=!0,Ae||(Ae=!0,ye());else{var fe=l(v);fe!==null&&ie(Ce,fe.startTime-ee)}}var Ae=!1,Q=-1,ne=5,le=-1;function Ne(){return Y?!0:!(o.unstable_now()-le<ne)}function ke(){if(Y=!1,Ae){var ee=o.unstable_now();le=ee;var fe=!0;try{e:{z=!1,U&&(U=!1,ae(Q),Q=-1),k=!0;var Ie=B;try{t:{for(ce(ee),O=l(_);O!==null&&!(O.expirationTime>ee&&Ne());){var Je=O.callback;if(typeof Je=="function"){O.callback=null,B=O.priorityLevel;var Qe=Je(O.expirationTime<=ee);if(ee=o.unstable_now(),typeof Qe=="function"){O.callback=Qe,ce(ee),fe=!0;break t}O===l(_)&&f(_),ce(ee)}else f(_);O=l(_)}if(O!==null)fe=!0;else{var V=l(v);V!==null&&ie(Ce,V.startTime-ee),fe=!1}}break e}finally{O=null,B=Ie,k=!1}fe=void 0}}finally{fe?ye():Ae=!1}}}var ye;if(typeof Z=="function")ye=function(){Z(ke)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,Ge=Ue.port2;Ue.port1.onmessage=ke,ye=function(){Ge.postMessage(null)}}else ye=function(){J(ke,0)};function ie(ee,fe){Q=J(function(){ee(o.unstable_now())},fe)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(ee){ee.callback=null},o.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<ee?Math.floor(1e3/ee):5},o.unstable_getCurrentPriorityLevel=function(){return B},o.unstable_next=function(ee){switch(B){case 1:case 2:case 3:var fe=3;break;default:fe=B}var Ie=B;B=fe;try{return ee()}finally{B=Ie}},o.unstable_requestPaint=function(){Y=!0},o.unstable_runWithPriority=function(ee,fe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ie=B;B=ee;try{return fe()}finally{B=Ie}},o.unstable_scheduleCallback=function(ee,fe,Ie){var Je=o.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Je+Ie:Je):Ie=Je,ee){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Ie+Qe,ee={id:N++,callback:fe,priorityLevel:ee,startTime:Ie,expirationTime:Qe,sortIndex:-1},Ie>Je?(ee.sortIndex=Ie,r(v,ee),l(_)===null&&ee===l(v)&&(U?(ae(Q),Q=-1):U=!0,ie(Ce,Ie-Je))):(ee.sortIndex=Qe,r(_,ee),z||k||(z=!0,Ae||(Ae=!0,ye()))),ee},o.unstable_shouldYield=Ne,o.unstable_wrapCallback=function(ee){var fe=B;return function(){var Ie=B;B=fe;try{return ee.apply(this,arguments)}finally{B=Ie}}}})(Wh)),Wh}var G1;function ap(){return G1||(G1=1,Xh.exports=rp()),Xh.exports}var Zh={exports:{}},Pn={};var q1;function sp(){if(q1)return Pn;q1=1;var o=co();function r(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)v+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var f={d:{f:l,r:function(){throw Error(r(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},p=Symbol.for("react.portal");function g(_,v,N){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:O==null?null:""+O,children:_,containerInfo:v,implementation:N}}var b=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,Pn.createPortal=function(_,v){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(r(299));return g(_,v,null,N)},Pn.flushSync=function(_){var v=b.T,N=f.p;try{if(b.T=null,f.p=2,_)return _()}finally{b.T=v,f.p=N,f.d.f()}},Pn.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,f.d.C(_,v))},Pn.prefetchDNS=function(_){typeof _=="string"&&f.d.D(_)},Pn.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var N=v.as,O=S(N,v.crossOrigin),B=typeof v.integrity=="string"?v.integrity:void 0,k=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;N==="style"?f.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:O,integrity:B,fetchPriority:k}):N==="script"&&f.d.X(_,{crossOrigin:O,integrity:B,fetchPriority:k,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Pn.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var N=S(v.as,v.crossOrigin);f.d.M(_,{crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&f.d.M(_)},Pn.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var N=v.as,O=S(N,v.crossOrigin);f.d.L(_,N,{crossOrigin:O,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Pn.preloadModule=function(_,v){if(typeof _=="string")if(v){var N=S(v.as,v.crossOrigin);f.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else f.d.m(_)},Pn.requestFormReset=function(_){f.d.r(_)},Pn.unstable_batchedUpdates=function(_,v){return _(v)},Pn.useFormState=function(_,v,N){return b.H.useFormState(_,v,N)},Pn.useFormStatus=function(){return b.H.useHostTransitionStatus()},Pn.version="19.2.4",Pn}var Y1;function lp(){if(Y1)return Zh.exports;Y1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Zh.exports=sp(),Zh.exports}var X1;function op(){if(X1)return Ql;X1=1;var o=ap(),r=co(),l=lp();function f(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function b(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function S(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(g(e)!==e)throw Error(f(188))}function v(e){var n=e.alternate;if(!n){if(n=g(e),n===null)throw Error(f(188));return n!==e?null:e}for(var s=e,h=n;;){var x=s.return;if(x===null)break;var w=x.alternate;if(w===null){if(h=x.return,h!==null){s=h;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===s)return _(x),e;if(w===h)return _(x),n;w=w.sibling}throw Error(f(188))}if(s.return!==h.return)s=x,h=w;else{for(var T=!1,M=x.child;M;){if(M===s){T=!0,s=x,h=w;break}if(M===h){T=!0,h=x,s=w;break}M=M.sibling}if(!T){for(M=w.child;M;){if(M===s){T=!0,s=w,h=x;break}if(M===h){T=!0,h=w,s=x;break}M=M.sibling}if(!T)throw Error(f(189))}}if(s.alternate!==h)throw Error(f(190))}if(s.tag!==3)throw Error(f(188));return s.stateNode.current===s?e:n}function N(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=N(e),n!==null)return n;e=e.sibling}return null}var O=Object.assign,B=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),Ne=Symbol.for("react.memo_cache_sentinel"),ke=Symbol.iterator;function ye(e){return e===null||typeof e!="object"?null:(e=ke&&e[ke]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Symbol.for("react.client.reference");function Ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case J:return"Profiler";case Y:return"StrictMode";case Ce:return"Suspense";case Ae:return"SuspenseList";case le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case Z:return e.displayName||"Context";case ae:return(e._context.displayName||"Context")+".Consumer";case ce:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return n=e.displayName||null,n!==null?n:Ge(e.type)||"Memo";case ne:n=e._payload,e=e._init;try{return Ge(e(n))}catch{}}return null}var ie=Array.isArray,ee=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},Je=[],Qe=-1;function V(e){return{current:e}}function ue(e){0>Qe||(e.current=Je[Qe],Je[Qe]=null,Qe--)}function Se(e,n){Qe++,Je[Qe]=e.current,e.current=n}var _e=V(null),Ye=V(null),Ee=V(null),ct=V(null);function mt(e,n){switch(Se(Ee,n),Se(Ye,e),Se(_e,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?o1(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=o1(n),e=c1(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ue(_e),Se(_e,e)}function Ut(){ue(_e),ue(Ye),ue(Ee)}function ji(e){e.memoizedState!==null&&Se(ct,e);var n=_e.current,s=c1(n,e.type);n!==s&&(Se(Ye,e),Se(_e,s))}function vn(e){Ye.current===e&&(ue(_e),ue(Ye)),ct.current===e&&(ue(ct),ql._currentValue=Ie)}var kr,pt;function Wn(e){if(kr===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);kr=n&&n[1]||"",pt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kr+e+pt}var Zn=!1;function ur(e,n){if(!e||Zn)return"";Zn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(oe){var te=oe}Reflect.construct(e,[],ge)}else{try{ge.call()}catch(oe){te=oe}e.call(ge.prototype)}}else{try{throw Error()}catch(oe){te=oe}(ge=e())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(oe){if(oe&&te&&typeof oe.stack=="string")return[oe.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),T=w[0],M=w[1];if(T&&M){var P=T.split(`
`),$=M.split(`
`);for(x=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;x<$.length&&!$[x].includes("DetermineComponentFrameRoot");)x++;if(h===P.length||x===$.length)for(h=P.length-1,x=$.length-1;1<=h&&0<=x&&P[h]!==$[x];)x--;for(;1<=h&&0<=x;h--,x--)if(P[h]!==$[x]){if(h!==1||x!==1)do if(h--,x--,0>x||P[h]!==$[x]){var he=`
`+P[h].replace(" at new "," at ");return e.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",e.displayName)),he}while(1<=h&&0<=x);break}}}finally{Zn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Wn(s):""}function bn(e,n){switch(e.tag){case 26:case 27:case 5:return Wn(e.type);case 16:return Wn("Lazy");case 13:return e.child!==n&&n!==null?Wn("Suspense Fallback"):Wn("Suspense");case 19:return Wn("SuspenseList");case 0:case 15:return ur(e.type,!1);case 11:return ur(e.type.render,!1);case 1:return ur(e.type,!0);case 31:return Wn("Activity");default:return""}}function Ot(e){try{var n="",s=null;do n+=bn(e,s),s=e,e=e.return;while(e);return n}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var at=Object.prototype.hasOwnProperty,jr=o.unstable_scheduleCallback,Re=o.unstable_cancelCallback,ns=o.unstable_shouldYield,fo=o.unstable_requestPaint,Jt=o.unstable_now,nl=o.unstable_getCurrentPriorityLevel,Qn=o.unstable_ImmediatePriority,il=o.unstable_UserBlockingPriority,si=o.unstable_NormalPriority,In=o.unstable_LowPriority,rl=o.unstable_IdlePriority,is=o.log,Zc=o.unstable_setDisableYieldValue,Vt=null,be=null;function Bt(e){if(typeof is=="function"&&Zc(e),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(Vt,e)}catch{}}var et=Math.clz32?Math.clz32:al,Zt=Math.log,_a=Math.LN2;function al(e){return e>>>=0,e===0?32:31-(Zt(e)/_a|0)|0}var Ca=256,ut=262144,Si=4194304;function Ki(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ta(e,n,s){var h=e.pendingLanes;if(h===0)return 0;var x=0,w=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var M=h&134217727;return M!==0?(h=M&~w,h!==0?x=Ki(h):(T&=M,T!==0?x=Ki(T):s||(s=M&~e,s!==0&&(x=Ki(s))))):(M=h&~w,M!==0?x=Ki(M):T!==0?x=Ki(T):s||(s=h&~e,s!==0&&(x=Ki(s)))),x===0?0:n!==0&&n!==x&&(n&w)===0&&(w=x&-x,s=n&-n,w>=s||w===32&&(s&4194048)!==0)?n:x}function Rn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function sl(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function En(){var e=Si;return Si<<=1,(Si&62914560)===0&&(Si=4194304),e}function Ji(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function $i(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _i(e,n,s,h,x,w){var T=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var M=e.entanglements,P=e.expirationTimes,$=e.hiddenUpdates;for(s=T&~s;0<s;){var he=31-et(s),ge=1<<he;M[he]=0,P[he]=-1;var te=$[he];if(te!==null)for($[he]=null,he=0;he<te.length;he++){var oe=te[he];oe!==null&&(oe.lane&=-536870913)}s&=~ge}h!==0&&go(e,h,0),w!==0&&x===0&&e.tag!==0&&(e.suspendedLanes|=w&~(T&~n))}function go(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-et(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|s&261930}function er(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var h=31-et(s),x=1<<h;x&n|e[h]&n&&(e[h]|=n),s&=~x}}function rs(e,n){var s=n&-n;return s=(s&42)!==0?1:Nn(s),(s&(e.suspendedLanes|n))!==0?0:s}function Nn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ui(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Fn(){var e=fe.p;return e!==0?e:(e=window.event,e===void 0?32:D1(e.type))}function Te(e,n){var s=fe.p;try{return fe.p=e,n()}finally{fe.p=s}}var Hn=Math.random().toString(36).slice(2),on="__reactFiber$"+Hn,It="__reactProps$"+Hn,li="__reactContainer$"+Hn,Ur="__reactEvents$"+Hn,as="__reactListeners$"+Hn,Ci="__reactHandles$"+Hn,mo="__reactResources$"+Hn,Na="__reactMarker$"+Hn;function Kn(e){delete e[on],delete e[It],delete e[Ur],delete e[as],delete e[Ci]}function en(e){var n=e[on];if(n)return n;for(var s=e.parentNode;s;){if(n=s[li]||s[on]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=p1(e);e!==null;){if(s=e[on])return s;e=p1(e)}return n}e=s,s=e.parentNode}return null}function At(e){if(e=e[on]||e[li]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function zr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(f(33))}function Vn(e){var n=e[mo];return n||(n=e[mo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function tn(e){e[Na]=!0}var pe=new Set,po={};function Ct(e,n){oi(e,n),oi(e+"Capture",n)}function oi(e,n){for(po[e]=n,e=0;e<n.length;e++)pe.add(n[e])}var Qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yt={},xt={};function st(e){return at.call(xt,e)?!0:at.call(yt,e)?!1:Qc.test(e)?xt[e]=!0:(yt[e]=!0,!1)}function Pr(e,n,s){if(st(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function Fr(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function ci(e,n,s,h){if(h===null)e.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+h)}}function vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Kc(e,n,s){var h=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,w=h.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return x.call(this)},set:function(T){s=""+T,w.call(this,T)}}),Object.defineProperty(e,n,{enumerable:h.enumerable}),{getValue:function(){return s},setValue:function(T){s=""+T},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function qt(e){if(!e._valueTracker){var n=zi(e)?"checked":"value";e._valueTracker=Kc(e,n,""+e[n])}}function Pi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),h="";return e&&(h=zi(e)?e.checked?"true":"false":e.value),e=h,e!==s?(n.setValue(e),!0):!1}function ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Hr=/[\n"\\]/g;function rt(e){return e.replace(Hr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function dn(e,n,s,h,x,w,T,M){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),n!=null?T==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+vt(n)):e.value!==""+vt(n)&&(e.value=""+vt(n)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),n!=null?L(e,T,vt(n)):s!=null?L(e,T,vt(s)):h!=null&&e.removeAttribute("value"),x==null&&w!=null&&(e.defaultChecked=!!w),x!=null&&(e.checked=x&&typeof x!="function"&&typeof x!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.name=""+vt(M):e.removeAttribute("name")}function W(e,n,s,h,x,w,T,M){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),n!=null||s!=null){if(!(w!=="submit"&&w!=="reset"||n!=null)){qt(e);return}s=s!=null?""+vt(s):"",n=n!=null?""+vt(n):s,M||n===e.value||(e.value=n),e.defaultValue=n}h=h??x,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=M?e.checked:!!h,e.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T),qt(e)}function L(e,n,s){n==="number"&&ss(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Me(e,n,s,h){if(e=e.options,n){n={};for(var x=0;x<s.length;x++)n["$"+s[x]]=!0;for(s=0;s<e.length;s++)x=n.hasOwnProperty("$"+e[s].value),e[s].selected!==x&&(e[s].selected=x),x&&h&&(e[s].defaultSelected=!0)}else{for(s=""+vt(s),n=null,x=0;x<e.length;x++){if(e[x].value===s){e[x].selected=!0,h&&(e[x].defaultSelected=!0);return}n!==null||e[x].disabled||(n=e[x])}n!==null&&(n.selected=!0)}}function cn(e,n,s){if(n!=null&&(n=""+vt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+vt(s):""}function Gn(e,n,s,h){if(n==null){if(h!=null){if(s!=null)throw Error(f(92));if(ie(h)){if(1<h.length)throw Error(f(93));h=h[0]}s=h}s==null&&(s=""),n=s}s=vt(n),e.defaultValue=s,h=e.textContent,h===s&&h!==""&&h!==null&&(e.value=h),qt(e)}function Vr(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qn(e,n,s){var h=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,s):typeof s!="number"||s===0||ll.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function je(e,n,s){if(n!=null&&typeof n!="object")throw Error(f(62));if(e=e.style,s!=null){for(var h in s)!s.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var x in n)h=n[x],n.hasOwnProperty(x)&&s[x]!==h&&qn(e,x,h)}else for(var w in n)n.hasOwnProperty(w)&&qn(e,w,n[w])}function zt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gr(e){return Jc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Jn(){}var Oa=null;function ol(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yt=null,Ti=null;function Fi(e){var n=At(e);if(n&&(e=n.stateNode)){var s=e[It]||null;e:switch(e=n.stateNode,n.type){case"input":if(dn(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+rt(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var h=s[n];if(h!==e&&h.form===e.form){var x=h[It]||null;if(!x)throw Error(f(90));dn(h,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(n=0;n<s.length;n++)h=s[n],h.form===e.form&&Pi(h)}break e;case"textarea":cn(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Me(e,!!s.multiple,n,!1)}}}var Pe=!1;function yo(e,n,s){if(Pe)return e(n,s);Pe=!0;try{var h=e(n);return h}finally{if(Pe=!1,(Yt!==null||Ti!==null)&&(cc(),Yt&&(n=Yt,e=Ti,Ti=Yt=null,Fi(n),e)))for(n=0;n<e.length;n++)Fi(e[n])}}function We(e,n){var s=e.stateNode;if(s===null)return null;var h=s[It]||null;if(h===null)return null;s=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(f(231,n,typeof s));return s}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=!1;if(Pt)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){cl=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{cl=!1}var Hi=null,Vi=null,ls=null;function qr(){if(ls)return ls;var e,n=Vi,s=n.length,h,x="value"in Hi?Hi.value:Hi.textContent,w=x.length;for(e=0;e<s&&n[e]===x[e];e++);var T=s-e;for(h=1;h<=T&&n[s-h]===x[w-h];h++);return ls=x.slice(e,1<h?1-h:void 0)}function tr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function nr(){return!0}function ul(){return!1}function gn(e){function n(s,h,x,w,T){this._reactName=s,this._targetInst=x,this.type=h,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var M in e)e.hasOwnProperty(M)&&(s=e[M],this[M]=s?s(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?nr:ul,this.isPropagationStopped=ul,this}return O(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),n}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},An=gn(ui),Yr=O({},ui,{view:0,detail:0}),wo=gn(Yr),os,hl,Ia,cs=O({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ra,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ia&&(Ia&&e.type==="mousemove"?(os=e.screenX-Ia.screenX,hl=e.screenY-Ia.screenY):hl=os=0,Ia=e),os)},movementY:function(e){return"movementY"in e?e.movementY:hl}}),St=gn(cs),vo=O({},cs,{dataTransfer:0}),us=gn(vo),ir=O({},Yr,{relatedTarget:0}),fl=gn(ir),se=O({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),tt=gn(se),Sn=O({},ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hs=gn(Sn),bo=O({},ui,{data:0}),Eo=gn(bo),$c={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function un(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=dl[e])?!!n[e]:!1}function Ra(){return un}var Qt=O({},Yr,{key:function(e){if(e.key){var n=$c[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=tr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ra,charCode:function(e){return e.type==="keypress"?tr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fs=gn(Qt),fr=O({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tt=gn(fr),Fe=O({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ra}),tu=gn(Fe),Ft=O({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),dr=gn(Ft),Xr=O({},cs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nu=gn(Xr),Ni=O({},ui,{newState:0,oldState:0}),gl=gn(Ni),Ao=[9,13,27,32],Da=Pt&&"CompositionEvent"in window,Wr=null;Pt&&"documentMode"in document&&(Wr=document.documentMode);var So=Pt&&"TextEvent"in window&&!Wr,_o=Pt&&(!Da||Wr&&8<Wr&&11>=Wr),gr=" ",ds=!1;function Co(e,n){switch(e){case"keyup":return Ao.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function rr(e,n){switch(e){case"compositionend":return Zr(n);case"keypress":return n.which!==32?null:(ds=!0,gr);case"textInput":return e=n.data,e===gr&&ds?null:e;default:return null}}function gs(e,n){if(Qr)return e==="compositionend"||!Da&&Co(e,n)?(e=qr(),ls=Vi=Hi=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _o&&n.locale!=="ko"?null:n.data;default:return null}}var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ml(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!$n[e.type]:n==="textarea"}function hi(e,n,s,h){Yt?Ti?Ti.push(h):Ti=[h]:Yt=h,n=pc(n,"onChange"),0<n.length&&(s=new An("onChange","change",null,s,h),e.push({event:s,listeners:n}))}var Ma=null,mr=null;function iu(e){n1(e,0)}function Ba(e){var n=zr(e);if(Pi(n))return e}function fi(e,n){if(e==="change")return n}var To=!1;if(Pt){var La;if(Pt){var pr="oninput"in document;if(!pr){var ht=document.createElement("div");ht.setAttribute("oninput","return;"),pr=typeof ht.oninput=="function"}La=pr}else La=!1;To=La&&(!document.documentMode||9<document.documentMode)}function ka(){Ma&&(Ma.detachEvent("onpropertychange",I),mr=Ma=null)}function I(e){if(e.propertyName==="value"&&Ba(mr)){var n=[];hi(n,mr,e,ol(e)),yo(iu,n)}}function t(e,n,s){e==="focusin"?(ka(),Ma=n,mr=s,Ma.attachEvent("onpropertychange",I)):e==="focusout"&&ka()}function i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ba(mr)}function a(e,n){if(e==="click")return Ba(n)}function c(e,n){if(e==="input"||e==="change")return Ba(n)}function u(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var d=typeof Object.is=="function"?Object.is:u;function m(e,n){if(d(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),h=Object.keys(n);if(s.length!==h.length)return!1;for(h=0;h<s.length;h++){var x=s[h];if(!at.call(n,x)||!d(e[x],n[x]))return!1}return!0}function y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E(e,n){var s=y(e);e=0;for(var h;s;){if(s.nodeType===3){if(h=e+s.textContent.length,e<=n&&h>=n)return{node:s,offset:n-e};e=h}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=y(s)}}function C(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?C(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function R(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ss(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ss(e.document)}return n}function D(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var j=Pt&&"documentMode"in document&&11>=document.documentMode,F=null,H=null,X=null,re=!1;function ve(e,n,s){var h=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;re||F==null||F!==ss(h)||(h=F,"selectionStart"in h&&D(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),X&&m(X,h)||(X=h,h=pc(H,"onSelect"),0<h.length&&(n=new An("onSelect","select",null,n,s),e.push({event:n,listeners:h}),n.target=F)))}function we(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var xe={animationend:we("Animation","AnimationEnd"),animationiteration:we("Animation","AnimationIteration"),animationstart:we("Animation","AnimationStart"),transitionrun:we("Transition","TransitionRun"),transitionstart:we("Transition","TransitionStart"),transitioncancel:we("Transition","TransitionCancel"),transitionend:we("Transition","TransitionEnd")},it={},Ze={};Pt&&(Ze=document.createElement("div").style,"AnimationEvent"in window||(delete xe.animationend.animation,delete xe.animationiteration.animation,delete xe.animationstart.animation),"TransitionEvent"in window||delete xe.transitionend.transition);function nn(e){if(it[e])return it[e];if(!xe[e])return e;var n=xe[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Ze)return it[e]=n[s];return e}var ei=nn("animationend"),Dn=nn("animationiteration"),Nt=nn("animationstart"),_n=nn("transitionrun"),Yn=nn("transitionstart"),Kr=nn("transitioncancel"),xr=nn("transitionend"),No=new Map,pl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pl.push("scrollEnd");function Gi(e,n){No.set(e,n),Ct(n,[e])}var Oo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Oi=[],ms=0,ru=0;function Io(){for(var e=ms,n=ru=ms=0;n<e;){var s=Oi[n];Oi[n++]=null;var h=Oi[n];Oi[n++]=null;var x=Oi[n];Oi[n++]=null;var w=Oi[n];if(Oi[n++]=null,h!==null&&x!==null){var T=h.pending;T===null?x.next=x:(x.next=T.next,T.next=x),h.pending=x}w!==0&&jf(s,x,w)}}function Ro(e,n,s,h){Oi[ms++]=e,Oi[ms++]=n,Oi[ms++]=s,Oi[ms++]=h,ru|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function au(e,n,s,h){return Ro(e,n,s,h),Do(e)}function ja(e,n){return Ro(e,null,null,n),Do(e)}function jf(e,n,s){e.lanes|=s;var h=e.alternate;h!==null&&(h.lanes|=s);for(var x=!1,w=e.return;w!==null;)w.childLanes|=s,h=w.alternate,h!==null&&(h.childLanes|=s),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(x=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,x&&n!==null&&(x=31-et(s),e=w.hiddenUpdates,h=e[x],h===null?e[x]=[n]:h.push(n),n.lane=s|536870912),w):null}function Do(e){if(50<Ul)throw Ul=0,gh=null,Error(f(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ps={};function j2(e,n,s,h){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(e,n,s,h){return new j2(e,n,s,h)}function su(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yr(e,n){var s=e.alternate;return s===null?(s=di(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Uf(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Mo(e,n,s,h,x,w){var T=0;if(h=e,typeof e=="function")su(e)&&(T=1);else if(typeof e=="string")T=Hm(e,s,_e.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case le:return e=di(31,s,n,x),e.elementType=le,e.lanes=w,e;case U:return Ua(s.children,x,w,n);case Y:T=8,x|=24;break;case J:return e=di(12,s,n,x|2),e.elementType=J,e.lanes=w,e;case Ce:return e=di(13,s,n,x),e.elementType=Ce,e.lanes=w,e;case Ae:return e=di(19,s,n,x),e.elementType=Ae,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:T=10;break e;case ae:T=9;break e;case ce:T=11;break e;case Q:T=14;break e;case ne:T=16,h=null;break e}T=29,s=Error(f(130,e===null?"null":typeof e,"")),h=null}return n=di(T,s,n,x),n.elementType=e,n.type=h,n.lanes=w,n}function Ua(e,n,s,h){return e=di(7,e,h,n),e.lanes=s,e}function lu(e,n,s){return e=di(6,e,null,n),e.lanes=s,e}function zf(e){var n=di(18,null,null,0);return n.stateNode=e,n}function ou(e,n,s){return n=di(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Pf=new WeakMap;function Ii(e,n){if(typeof e=="object"&&e!==null){var s=Pf.get(e);return s!==void 0?s:(n={value:e,source:n,stack:Ot(n)},Pf.set(e,n),n)}return{value:e,source:n,stack:Ot(n)}}var xs=[],ys=0,Bo=null,xl=0,Ri=[],Di=0,Jr=null,ar=1,sr="";function wr(e,n){xs[ys++]=xl,xs[ys++]=Bo,Bo=e,xl=n}function Ff(e,n,s){Ri[Di++]=ar,Ri[Di++]=sr,Ri[Di++]=Jr,Jr=e;var h=ar;e=sr;var x=32-et(h)-1;h&=~(1<<x),s+=1;var w=32-et(n)+x;if(30<w){var T=x-x%5;w=(h&(1<<T)-1).toString(32),h>>=T,x-=T,ar=1<<32-et(n)+x|s<<x|h,sr=w+e}else ar=1<<w|s<<x|h,sr=e}function cu(e){e.return!==null&&(wr(e,1),Ff(e,1,0))}function uu(e){for(;e===Bo;)Bo=xs[--ys],xs[ys]=null,xl=xs[--ys],xs[ys]=null;for(;e===Jr;)Jr=Ri[--Di],Ri[Di]=null,sr=Ri[--Di],Ri[Di]=null,ar=Ri[--Di],Ri[Di]=null}function Hf(e,n){Ri[Di++]=ar,Ri[Di++]=sr,Ri[Di++]=Jr,ar=n.id,sr=n.overflow,Jr=e}var Mn=null,Xt=null,gt=!1,$r=null,Mi=!1,hu=Error(f(519));function ea(e){var n=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yl(Ii(n,e)),hu}function Vf(e){var n=e.stateNode,s=e.type,h=e.memoizedProps;switch(n[on]=e,n[It]=h,s){case"dialog":ot("cancel",n),ot("close",n);break;case"iframe":case"object":case"embed":ot("load",n);break;case"video":case"audio":for(s=0;s<Pl.length;s++)ot(Pl[s],n);break;case"source":ot("error",n);break;case"img":case"image":case"link":ot("error",n),ot("load",n);break;case"details":ot("toggle",n);break;case"input":ot("invalid",n),W(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":ot("invalid",n);break;case"textarea":ot("invalid",n),Gn(n,h.value,h.defaultValue,h.children)}s=h.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||h.suppressHydrationWarning===!0||s1(n.textContent,s)?(h.popover!=null&&(ot("beforetoggle",n),ot("toggle",n)),h.onScroll!=null&&ot("scroll",n),h.onScrollEnd!=null&&ot("scrollend",n),h.onClick!=null&&(n.onclick=Jn),n=!0):n=!1,n||ea(e,!0)}function Gf(e){for(Mn=e.return;Mn;)switch(Mn.tag){case 5:case 31:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:Mn=Mn.return}}function ws(e){if(e!==Mn)return!1;if(!gt)return Gf(e),gt=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Oh(e.type,e.memoizedProps)),s=!s),s&&Xt&&ea(e),Gf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Xt=m1(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Xt=m1(e)}else n===27?(n=Xt,ga(e.type)?(e=Bh,Bh=null,Xt=e):Xt=n):Xt=Mn?Li(e.stateNode.nextSibling):null;return!0}function za(){Xt=Mn=null,gt=!1}function fu(){var e=$r;return e!==null&&(ri===null?ri=e:ri.push.apply(ri,e),$r=null),e}function yl(e){$r===null?$r=[e]:$r.push(e)}var du=V(null),Pa=null,vr=null;function ta(e,n,s){Se(du,n._currentValue),n._currentValue=s}function br(e){e._currentValue=du.current,ue(du)}function gu(e,n,s){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===s)break;e=e.return}}function mu(e,n,s,h){var x=e.child;for(x!==null&&(x.return=e);x!==null;){var w=x.dependencies;if(w!==null){var T=x.child;w=w.firstContext;e:for(;w!==null;){var M=w;w=x;for(var P=0;P<n.length;P++)if(M.context===n[P]){w.lanes|=s,M=w.alternate,M!==null&&(M.lanes|=s),gu(w.return,s,e),h||(T=null);break e}w=M.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(f(341));T.lanes|=s,w=T.alternate,w!==null&&(w.lanes|=s),gu(T,s,e),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===e){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function vs(e,n,s,h){e=null;for(var x=n,w=!1;x!==null;){if(!w){if((x.flags&524288)!==0)w=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(f(387));if(T=T.memoizedProps,T!==null){var M=x.type;d(x.pendingProps.value,T.value)||(e!==null?e.push(M):e=[M])}}else if(x===ct.current){if(T=x.alternate,T===null)throw Error(f(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(e!==null?e.push(ql):e=[ql])}x=x.return}e!==null&&mu(n,e,s,h),n.flags|=262144}function Lo(e){for(e=e.firstContext;e!==null;){if(!d(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fa(e){Pa=e,vr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Bn(e){return qf(Pa,e)}function ko(e,n){return Pa===null&&Fa(e),qf(e,n)}function qf(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},vr===null){if(e===null)throw Error(f(308));vr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else vr=vr.next=n;return s}var U2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},z2=o.unstable_scheduleCallback,P2=o.unstable_NormalPriority,mn={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pu(){return{controller:new U2,data:new Map,refCount:0}}function wl(e){e.refCount--,e.refCount===0&&z2(P2,function(){e.controller.abort()})}var vl=null,xu=0,bs=0,Es=null;function F2(e,n){if(vl===null){var s=vl=[];xu=0,bs=vh(),Es={status:"pending",value:void 0,then:function(h){s.push(h)}}}return xu++,n.then(Yf,Yf),n}function Yf(){if(--xu===0&&vl!==null){Es!==null&&(Es.status="fulfilled");var e=vl;vl=null,bs=0,Es=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function H2(e,n){var s=[],h={status:"pending",value:null,reason:null,then:function(x){s.push(x)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var x=0;x<s.length;x++)(0,s[x])(n)},function(x){for(h.status="rejected",h.reason=x,x=0;x<s.length;x++)(0,s[x])(void 0)}),h}var Xf=ee.S;ee.S=function(e,n){I0=Jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&F2(e,n),Xf!==null&&Xf(e,n)};var Ha=V(null);function yu(){var e=Ha.current;return e!==null?e:Ht.pooledCache}function jo(e,n){n===null?Se(Ha,Ha.current):Se(Ha,n.pool)}function Wf(){var e=yu();return e===null?null:{parent:mn._currentValue,pool:e}}var As=Error(f(460)),wu=Error(f(474)),Uo=Error(f(542)),zo={then:function(){}};function Zf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qf(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(Jn,Jn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jf(e),e;default:if(typeof n.status=="string")n.then(Jn,Jn);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(f(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var x=n;x.status="fulfilled",x.value=h}},function(h){if(n.status==="pending"){var x=n;x.status="rejected",x.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jf(e),e}throw Ga=n,As}}function Va(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Ga=s,As):s}}var Ga=null;function Kf(){if(Ga===null)throw Error(f(459));var e=Ga;return Ga=null,e}function Jf(e){if(e===As||e===Uo)throw Error(f(483))}var Ss=null,bl=0;function Po(e){var n=bl;return bl+=1,Ss===null&&(Ss=[]),Qf(Ss,e,n)}function El(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Fo(e,n){throw n.$$typeof===B?Error(f(525)):(e=Object.prototype.toString.call(n),Error(f(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function $f(e){function n(q,G){if(e){var K=q.deletions;K===null?(q.deletions=[G],q.flags|=16):K.push(G)}}function s(q,G){if(!e)return null;for(;G!==null;)n(q,G),G=G.sibling;return null}function h(q){for(var G=new Map;q!==null;)q.key!==null?G.set(q.key,q):G.set(q.index,q),q=q.sibling;return G}function x(q,G){return q=yr(q,G),q.index=0,q.sibling=null,q}function w(q,G,K){return q.index=K,e?(K=q.alternate,K!==null?(K=K.index,K<G?(q.flags|=67108866,G):K):(q.flags|=67108866,G)):(q.flags|=1048576,G)}function T(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function M(q,G,K,de){return G===null||G.tag!==6?(G=lu(K,q.mode,de),G.return=q,G):(G=x(G,K),G.return=q,G)}function P(q,G,K,de){var ze=K.type;return ze===U?he(q,G,K.props.children,de,K.key):G!==null&&(G.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===ne&&Va(ze)===G.type)?(G=x(G,K.props),El(G,K),G.return=q,G):(G=Mo(K.type,K.key,K.props,null,q.mode,de),El(G,K),G.return=q,G)}function $(q,G,K,de){return G===null||G.tag!==4||G.stateNode.containerInfo!==K.containerInfo||G.stateNode.implementation!==K.implementation?(G=ou(K,q.mode,de),G.return=q,G):(G=x(G,K.children||[]),G.return=q,G)}function he(q,G,K,de,ze){return G===null||G.tag!==7?(G=Ua(K,q.mode,de,ze),G.return=q,G):(G=x(G,K),G.return=q,G)}function ge(q,G,K){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=lu(""+G,q.mode,K),G.return=q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case k:return K=Mo(G.type,G.key,G.props,null,q.mode,K),El(K,G),K.return=q,K;case z:return G=ou(G,q.mode,K),G.return=q,G;case ne:return G=Va(G),ge(q,G,K)}if(ie(G)||ye(G))return G=Ua(G,q.mode,K,null),G.return=q,G;if(typeof G.then=="function")return ge(q,Po(G),K);if(G.$$typeof===Z)return ge(q,ko(q,G),K);Fo(q,G)}return null}function te(q,G,K,de){var ze=G!==null?G.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ze!==null?null:M(q,G,""+K,de);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case k:return K.key===ze?P(q,G,K,de):null;case z:return K.key===ze?$(q,G,K,de):null;case ne:return K=Va(K),te(q,G,K,de)}if(ie(K)||ye(K))return ze!==null?null:he(q,G,K,de,null);if(typeof K.then=="function")return te(q,G,Po(K),de);if(K.$$typeof===Z)return te(q,G,ko(q,K),de);Fo(q,K)}return null}function oe(q,G,K,de,ze){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return q=q.get(K)||null,M(G,q,""+de,ze);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case k:return q=q.get(de.key===null?K:de.key)||null,P(G,q,de,ze);case z:return q=q.get(de.key===null?K:de.key)||null,$(G,q,de,ze);case ne:return de=Va(de),oe(q,G,K,de,ze)}if(ie(de)||ye(de))return q=q.get(K)||null,he(G,q,de,ze,null);if(typeof de.then=="function")return oe(q,G,K,Po(de),ze);if(de.$$typeof===Z)return oe(q,G,K,ko(G,de),ze);Fo(G,de)}return null}function De(q,G,K,de){for(var ze=null,bt=null,Be=G,nt=G=0,dt=null;Be!==null&&nt<K.length;nt++){Be.index>nt?(dt=Be,Be=null):dt=Be.sibling;var Et=te(q,Be,K[nt],de);if(Et===null){Be===null&&(Be=dt);break}e&&Be&&Et.alternate===null&&n(q,Be),G=w(Et,G,nt),bt===null?ze=Et:bt.sibling=Et,bt=Et,Be=dt}if(nt===K.length)return s(q,Be),gt&&wr(q,nt),ze;if(Be===null){for(;nt<K.length;nt++)Be=ge(q,K[nt],de),Be!==null&&(G=w(Be,G,nt),bt===null?ze=Be:bt.sibling=Be,bt=Be);return gt&&wr(q,nt),ze}for(Be=h(Be);nt<K.length;nt++)dt=oe(Be,q,nt,K[nt],de),dt!==null&&(e&&dt.alternate!==null&&Be.delete(dt.key===null?nt:dt.key),G=w(dt,G,nt),bt===null?ze=dt:bt.sibling=dt,bt=dt);return e&&Be.forEach(function(wa){return n(q,wa)}),gt&&wr(q,nt),ze}function He(q,G,K,de){if(K==null)throw Error(f(151));for(var ze=null,bt=null,Be=G,nt=G=0,dt=null,Et=K.next();Be!==null&&!Et.done;nt++,Et=K.next()){Be.index>nt?(dt=Be,Be=null):dt=Be.sibling;var wa=te(q,Be,Et.value,de);if(wa===null){Be===null&&(Be=dt);break}e&&Be&&wa.alternate===null&&n(q,Be),G=w(wa,G,nt),bt===null?ze=wa:bt.sibling=wa,bt=wa,Be=dt}if(Et.done)return s(q,Be),gt&&wr(q,nt),ze;if(Be===null){for(;!Et.done;nt++,Et=K.next())Et=ge(q,Et.value,de),Et!==null&&(G=w(Et,G,nt),bt===null?ze=Et:bt.sibling=Et,bt=Et);return gt&&wr(q,nt),ze}for(Be=h(Be);!Et.done;nt++,Et=K.next())Et=oe(Be,q,nt,Et.value,de),Et!==null&&(e&&Et.alternate!==null&&Be.delete(Et.key===null?nt:Et.key),G=w(Et,G,nt),bt===null?ze=Et:bt.sibling=Et,bt=Et);return e&&Be.forEach(function($m){return n(q,$m)}),gt&&wr(q,nt),ze}function jt(q,G,K,de){if(typeof K=="object"&&K!==null&&K.type===U&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case k:e:{for(var ze=K.key;G!==null;){if(G.key===ze){if(ze=K.type,ze===U){if(G.tag===7){s(q,G.sibling),de=x(G,K.props.children),de.return=q,q=de;break e}}else if(G.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===ne&&Va(ze)===G.type){s(q,G.sibling),de=x(G,K.props),El(de,K),de.return=q,q=de;break e}s(q,G);break}else n(q,G);G=G.sibling}K.type===U?(de=Ua(K.props.children,q.mode,de,K.key),de.return=q,q=de):(de=Mo(K.type,K.key,K.props,null,q.mode,de),El(de,K),de.return=q,q=de)}return T(q);case z:e:{for(ze=K.key;G!==null;){if(G.key===ze)if(G.tag===4&&G.stateNode.containerInfo===K.containerInfo&&G.stateNode.implementation===K.implementation){s(q,G.sibling),de=x(G,K.children||[]),de.return=q,q=de;break e}else{s(q,G);break}else n(q,G);G=G.sibling}de=ou(K,q.mode,de),de.return=q,q=de}return T(q);case ne:return K=Va(K),jt(q,G,K,de)}if(ie(K))return De(q,G,K,de);if(ye(K)){if(ze=ye(K),typeof ze!="function")throw Error(f(150));return K=ze.call(K),He(q,G,K,de)}if(typeof K.then=="function")return jt(q,G,Po(K),de);if(K.$$typeof===Z)return jt(q,G,ko(q,K),de);Fo(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,G!==null&&G.tag===6?(s(q,G.sibling),de=x(G,K),de.return=q,q=de):(s(q,G),de=lu(K,q.mode,de),de.return=q,q=de),T(q)):s(q,G)}return function(q,G,K,de){try{bl=0;var ze=jt(q,G,K,de);return Ss=null,ze}catch(Be){if(Be===As||Be===Uo)throw Be;var bt=di(29,Be,null,q.mode);return bt.lanes=de,bt.return=q,bt}}}var qa=$f(!0),ed=$f(!1),na=!1;function vu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ra(e,n,s){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(_t&2)!==0){var x=h.pending;return x===null?n.next=n:(n.next=x.next,x.next=n),h.pending=n,n=Do(e),jf(e,null,s),n}return Ro(e,h,n,s),Do(e)}function Al(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,er(e,s)}}function Eu(e,n){var s=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,s===h)){var x=null,w=null;if(s=s.firstBaseUpdate,s!==null){do{var T={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};w===null?x=w=T:w=w.next=T,s=s.next}while(s!==null);w===null?x=w=n:w=w.next=n}else x=w=n;s={baseState:h.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var Au=!1;function Sl(){if(Au){var e=Es;if(e!==null)throw e}}function _l(e,n,s,h){Au=!1;var x=e.updateQueue;na=!1;var w=x.firstBaseUpdate,T=x.lastBaseUpdate,M=x.shared.pending;if(M!==null){x.shared.pending=null;var P=M,$=P.next;P.next=null,T===null?w=$:T.next=$,T=P;var he=e.alternate;he!==null&&(he=he.updateQueue,M=he.lastBaseUpdate,M!==T&&(M===null?he.firstBaseUpdate=$:M.next=$,he.lastBaseUpdate=P))}if(w!==null){var ge=x.baseState;T=0,he=$=P=null,M=w;do{var te=M.lane&-536870913,oe=te!==M.lane;if(oe?(ft&te)===te:(h&te)===te){te!==0&&te===bs&&(Au=!0),he!==null&&(he=he.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var De=e,He=M;te=n;var jt=s;switch(He.tag){case 1:if(De=He.payload,typeof De=="function"){ge=De.call(jt,ge,te);break e}ge=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=He.payload,te=typeof De=="function"?De.call(jt,ge,te):De,te==null)break e;ge=O({},ge,te);break e;case 2:na=!0}}te=M.callback,te!==null&&(e.flags|=64,oe&&(e.flags|=8192),oe=x.callbacks,oe===null?x.callbacks=[te]:oe.push(te))}else oe={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},he===null?($=he=oe,P=ge):he=he.next=oe,T|=te;if(M=M.next,M===null){if(M=x.shared.pending,M===null)break;oe=M,M=oe.next,oe.next=null,x.lastBaseUpdate=oe,x.shared.pending=null}}while(!0);he===null&&(P=ge),x.baseState=P,x.firstBaseUpdate=$,x.lastBaseUpdate=he,w===null&&(x.shared.lanes=0),ca|=T,e.lanes=T,e.memoizedState=ge}}function td(e,n){if(typeof e!="function")throw Error(f(191,e));e.call(n)}function nd(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)td(s[e],n)}var _s=V(null),Ho=V(0);function id(e,n){e=Ir,Se(Ho,e),Se(_s,n),Ir=e|n.baseLanes}function Su(){Se(Ho,Ir),Se(_s,_s.current)}function _u(){Ir=Ho.current,ue(_s),ue(Ho)}var gi=V(null),Bi=null;function aa(e){var n=e.alternate;Se(hn,hn.current&1),Se(gi,e),Bi===null&&(n===null||_s.current!==null||n.memoizedState!==null)&&(Bi=e)}function Cu(e){Se(hn,hn.current),Se(gi,e),Bi===null&&(Bi=e)}function rd(e){e.tag===22?(Se(hn,hn.current),Se(gi,e),Bi===null&&(Bi=e)):sa()}function sa(){Se(hn,hn.current),Se(gi,gi.current)}function mi(e){ue(gi),Bi===e&&(Bi=null),ue(hn)}var hn=V(0);function Vo(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Dh(s)||Mh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Er=0,$e=null,Lt=null,pn=null,Go=!1,Cs=!1,Ya=!1,qo=0,Cl=0,Ts=null,V2=0;function rn(){throw Error(f(321))}function Tu(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!d(e[s],n[s]))return!1;return!0}function Nu(e,n,s,h,x,w){return Er=w,$e=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ee.H=e===null||e.memoizedState===null?Fd:Vu,Ya=!1,w=s(h,x),Ya=!1,Cs&&(w=sd(n,s,h,x)),ad(e),w}function ad(e){ee.H=Ol;var n=Lt!==null&&Lt.next!==null;if(Er=0,pn=Lt=$e=null,Go=!1,Cl=0,Ts=null,n)throw Error(f(300));e===null||xn||(e=e.dependencies,e!==null&&Lo(e)&&(xn=!0))}function sd(e,n,s,h){$e=e;var x=0;do{if(Cs&&(Ts=null),Cl=0,Cs=!1,25<=x)throw Error(f(301));if(x+=1,pn=Lt=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ee.H=Hd,w=n(s,h)}while(Cs);return w}function G2(){var e=ee.H,n=e.useState()[0];return n=typeof n.then=="function"?Tl(n):n,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&($e.flags|=1024),n}function Ou(){var e=qo!==0;return qo=0,e}function Iu(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function Ru(e){if(Go){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Go=!1}Er=0,pn=Lt=$e=null,Cs=!1,Cl=qo=0,Ts=null}function Xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?$e.memoizedState=pn=e:pn=pn.next=e,pn}function fn(){if(Lt===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var n=pn===null?$e.memoizedState:pn.next;if(n!==null)pn=n,Lt=e;else{if(e===null)throw $e.alternate===null?Error(f(467)):Error(f(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},pn===null?$e.memoizedState=pn=e:pn=pn.next=e}return pn}function Yo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(e){var n=Cl;return Cl+=1,Ts===null&&(Ts=[]),e=Qf(Ts,e,n),n=$e,(pn===null?n.memoizedState:pn.next)===null&&(n=n.alternate,ee.H=n===null||n.memoizedState===null?Fd:Vu),e}function Xo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tl(e);if(e.$$typeof===Z)return Bn(e)}throw Error(f(438,String(e)))}function Du(e){var n=null,s=$e.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var h=$e.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(x){return x.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Yo(),$e.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),h=0;h<e;h++)s[h]=Ne;return n.index++,s}function Ar(e,n){return typeof n=="function"?n(e):n}function Wo(e){var n=fn();return Mu(n,Lt,e)}function Mu(e,n,s){var h=e.queue;if(h===null)throw Error(f(311));h.lastRenderedReducer=s;var x=e.baseQueue,w=h.pending;if(w!==null){if(x!==null){var T=x.next;x.next=w.next,w.next=T}n.baseQueue=x=w,h.pending=null}if(w=e.baseState,x===null)e.memoizedState=w;else{n=x.next;var M=T=null,P=null,$=n,he=!1;do{var ge=$.lane&-536870913;if(ge!==$.lane?(ft&ge)===ge:(Er&ge)===ge){var te=$.revertLane;if(te===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ge===bs&&(he=!0);else if((Er&te)===te){$=$.next,te===bs&&(he=!0);continue}else ge={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(M=P=ge,T=w):P=P.next=ge,$e.lanes|=te,ca|=te;ge=$.action,Ya&&s(w,ge),w=$.hasEagerState?$.eagerState:s(w,ge)}else te={lane:ge,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(M=P=te,T=w):P=P.next=te,$e.lanes|=ge,ca|=ge;$=$.next}while($!==null&&$!==n);if(P===null?T=w:P.next=M,!d(w,e.memoizedState)&&(xn=!0,he&&(s=Es,s!==null)))throw s;e.memoizedState=w,e.baseState=T,e.baseQueue=P,h.lastRenderedState=w}return x===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function Bu(e){var n=fn(),s=n.queue;if(s===null)throw Error(f(311));s.lastRenderedReducer=e;var h=s.dispatch,x=s.pending,w=n.memoizedState;if(x!==null){s.pending=null;var T=x=x.next;do w=e(w,T.action),T=T.next;while(T!==x);d(w,n.memoizedState)||(xn=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),s.lastRenderedState=w}return[w,h]}function ld(e,n,s){var h=$e,x=fn(),w=gt;if(w){if(s===void 0)throw Error(f(407));s=s()}else s=n();var T=!d((Lt||x).memoizedState,s);if(T&&(x.memoizedState=s,xn=!0),x=x.queue,ju(ud.bind(null,h,x,e),[e]),x.getSnapshot!==n||T||pn!==null&&pn.memoizedState.tag&1){if(h.flags|=2048,Ns(9,{destroy:void 0},cd.bind(null,h,x,s,n),null),Ht===null)throw Error(f(349));w||(Er&127)!==0||od(h,n,s)}return s}function od(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=$e.updateQueue,n===null?(n=Yo(),$e.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function cd(e,n,s,h){n.value=s,n.getSnapshot=h,hd(n)&&fd(e)}function ud(e,n,s){return s(function(){hd(n)&&fd(e)})}function hd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!d(e,s)}catch{return!0}}function fd(e){var n=ja(e,2);n!==null&&ai(n,e,2)}function Lu(e){var n=Xn();if(typeof e=="function"){var s=e;if(e=s(),Ya){Bt(!0);try{s()}finally{Bt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:e},n}function dd(e,n,s,h){return e.baseState=s,Mu(e,Lt,typeof h=="function"?h:Ar)}function q2(e,n,s,h,x){if(Ko(e))throw Error(f(485));if(e=n.action,e!==null){var w={payload:x,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){w.listeners.push(T)}};ee.T!==null?s(!0):w.isTransition=!1,h(w),s=n.pending,s===null?(w.next=n.pending=w,gd(n,w)):(w.next=s.next,n.pending=s.next=w)}}function gd(e,n){var s=n.action,h=n.payload,x=e.state;if(n.isTransition){var w=ee.T,T={};ee.T=T;try{var M=s(x,h),P=ee.S;P!==null&&P(T,M),md(e,n,M)}catch($){ku(e,n,$)}finally{w!==null&&T.types!==null&&(w.types=T.types),ee.T=w}}else try{w=s(x,h),md(e,n,w)}catch($){ku(e,n,$)}}function md(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(h){pd(e,n,h)},function(h){return ku(e,n,h)}):pd(e,n,s)}function pd(e,n,s){n.status="fulfilled",n.value=s,xd(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,gd(e,s)))}function ku(e,n,s){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=s,xd(n),n=n.next;while(n!==h)}e.action=null}function xd(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function yd(e,n){return n}function wd(e,n){if(gt){var s=Ht.formState;if(s!==null){e:{var h=$e;if(gt){if(Xt){t:{for(var x=Xt,w=Mi;x.nodeType!==8;){if(!w){x=null;break t}if(x=Li(x.nextSibling),x===null){x=null;break t}}w=x.data,x=w==="F!"||w==="F"?x:null}if(x){Xt=Li(x.nextSibling),h=x.data==="F!";break e}}ea(h)}h=!1}h&&(n=s[0])}}return s=Xn(),s.memoizedState=s.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yd,lastRenderedState:n},s.queue=h,s=Ud.bind(null,$e,h),h.dispatch=s,h=Lu(!1),w=Hu.bind(null,$e,!1,h.queue),h=Xn(),x={state:n,dispatch:null,action:e,pending:null},h.queue=x,s=q2.bind(null,$e,x,w,s),x.dispatch=s,h.memoizedState=e,[n,s,!1]}function vd(e){var n=fn();return bd(n,Lt,e)}function bd(e,n,s){if(n=Mu(e,n,yd)[0],e=Wo(Ar)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=Tl(n)}catch(T){throw T===As?Uo:T}else h=n;n=fn();var x=n.queue,w=x.dispatch;return s!==n.memoizedState&&($e.flags|=2048,Ns(9,{destroy:void 0},Y2.bind(null,x,s),null)),[h,w,e]}function Y2(e,n){e.action=n}function Ed(e){var n=fn(),s=Lt;if(s!==null)return bd(n,s,e);fn(),n=n.memoizedState,s=fn();var h=s.queue.dispatch;return s.memoizedState=e,[n,h,!1]}function Ns(e,n,s,h){return e={tag:e,create:s,deps:h,inst:n,next:null},n=$e.updateQueue,n===null&&(n=Yo(),$e.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(h=s.next,s.next=e,e.next=h,n.lastEffect=e),e}function Ad(){return fn().memoizedState}function Zo(e,n,s,h){var x=Xn();$e.flags|=e,x.memoizedState=Ns(1|n,{destroy:void 0},s,h===void 0?null:h)}function Qo(e,n,s,h){var x=fn();h=h===void 0?null:h;var w=x.memoizedState.inst;Lt!==null&&h!==null&&Tu(h,Lt.memoizedState.deps)?x.memoizedState=Ns(n,w,s,h):($e.flags|=e,x.memoizedState=Ns(1|n,w,s,h))}function Sd(e,n){Zo(8390656,8,e,n)}function ju(e,n){Qo(2048,8,e,n)}function X2(e){$e.flags|=4;var n=$e.updateQueue;if(n===null)n=Yo(),$e.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function _d(e){var n=fn().memoizedState;return X2({ref:n,nextImpl:e}),function(){if((_t&2)!==0)throw Error(f(440));return n.impl.apply(void 0,arguments)}}function Cd(e,n){return Qo(4,2,e,n)}function Td(e,n){return Qo(4,4,e,n)}function Nd(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Od(e,n,s){s=s!=null?s.concat([e]):null,Qo(4,4,Nd.bind(null,n,e),s)}function Uu(){}function Id(e,n){var s=fn();n=n===void 0?null:n;var h=s.memoizedState;return n!==null&&Tu(n,h[1])?h[0]:(s.memoizedState=[e,n],e)}function Rd(e,n){var s=fn();n=n===void 0?null:n;var h=s.memoizedState;if(n!==null&&Tu(n,h[1]))return h[0];if(h=e(),Ya){Bt(!0);try{e()}finally{Bt(!1)}}return s.memoizedState=[h,n],h}function zu(e,n,s){return s===void 0||(Er&1073741824)!==0&&(ft&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=D0(),$e.lanes|=e,ca|=e,s)}function Dd(e,n,s,h){return d(s,n)?s:_s.current!==null?(e=zu(e,s,h),d(e,n)||(xn=!0),e):(Er&42)===0||(Er&1073741824)!==0&&(ft&261930)===0?(xn=!0,e.memoizedState=s):(e=D0(),$e.lanes|=e,ca|=e,n)}function Md(e,n,s,h,x){var w=fe.p;fe.p=w!==0&&8>w?w:8;var T=ee.T,M={};ee.T=M,Hu(e,!1,n,s);try{var P=x(),$=ee.S;if($!==null&&$(M,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var he=H2(P,h);Nl(e,n,he,yi(e))}else Nl(e,n,h,yi(e))}catch(ge){Nl(e,n,{then:function(){},status:"rejected",reason:ge},yi())}finally{fe.p=w,T!==null&&M.types!==null&&(T.types=M.types),ee.T=T}}function W2(){}function Pu(e,n,s,h){if(e.tag!==5)throw Error(f(476));var x=Bd(e).queue;Md(e,x,n,Ie,s===null?W2:function(){return Ld(e),s(h)})}function Bd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:Ie},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Ld(e){var n=Bd(e);n.next===null&&(n=e.alternate.memoizedState),Nl(e,n.next.queue,{},yi())}function Fu(){return Bn(ql)}function kd(){return fn().memoizedState}function jd(){return fn().memoizedState}function Z2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=yi();e=ia(s);var h=ra(n,e,s);h!==null&&(ai(h,n,s),Al(h,n,s)),n={cache:pu()},e.payload=n;return}n=n.return}}function Q2(e,n,s){var h=yi();s={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ko(e)?zd(n,s):(s=au(e,n,s,h),s!==null&&(ai(s,e,h),Pd(s,n,h)))}function Ud(e,n,s){var h=yi();Nl(e,n,s,h)}function Nl(e,n,s,h){var x={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ko(e))zd(n,x);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=n.lastRenderedReducer,w!==null))try{var T=n.lastRenderedState,M=w(T,s);if(x.hasEagerState=!0,x.eagerState=M,d(M,T))return Ro(e,n,x,0),Ht===null&&Io(),!1}catch{}if(s=au(e,n,x,h),s!==null)return ai(s,e,h),Pd(s,n,h),!0}return!1}function Hu(e,n,s,h){if(h={lane:2,revertLane:vh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ko(e)){if(n)throw Error(f(479))}else n=au(e,s,h,2),n!==null&&ai(n,e,2)}function Ko(e){var n=e.alternate;return e===$e||n!==null&&n===$e}function zd(e,n){Cs=Go=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Pd(e,n,s){if((s&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,er(e,s)}}var Ol={readContext:Bn,use:Xo,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Ol.useEffectEvent=rn;var Fd={readContext:Bn,use:Xo,useCallback:function(e,n){return Xn().memoizedState=[e,n===void 0?null:n],e},useContext:Bn,useEffect:Sd,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Zo(4194308,4,Nd.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Zo(4194308,4,e,n)},useInsertionEffect:function(e,n){Zo(4,2,e,n)},useMemo:function(e,n){var s=Xn();n=n===void 0?null:n;var h=e();if(Ya){Bt(!0);try{e()}finally{Bt(!1)}}return s.memoizedState=[h,n],h},useReducer:function(e,n,s){var h=Xn();if(s!==void 0){var x=s(n);if(Ya){Bt(!0);try{s(n)}finally{Bt(!1)}}}else x=n;return h.memoizedState=h.baseState=x,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:x},h.queue=e,e=e.dispatch=Q2.bind(null,$e,e),[h.memoizedState,e]},useRef:function(e){var n=Xn();return e={current:e},n.memoizedState=e},useState:function(e){e=Lu(e);var n=e.queue,s=Ud.bind(null,$e,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:Uu,useDeferredValue:function(e,n){var s=Xn();return zu(s,e,n)},useTransition:function(){var e=Lu(!1);return e=Md.bind(null,$e,e.queue,!0,!1),Xn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var h=$e,x=Xn();if(gt){if(s===void 0)throw Error(f(407));s=s()}else{if(s=n(),Ht===null)throw Error(f(349));(ft&127)!==0||od(h,n,s)}x.memoizedState=s;var w={value:s,getSnapshot:n};return x.queue=w,Sd(ud.bind(null,h,w,e),[e]),h.flags|=2048,Ns(9,{destroy:void 0},cd.bind(null,h,w,s,n),null),s},useId:function(){var e=Xn(),n=Ht.identifierPrefix;if(gt){var s=sr,h=ar;s=(h&~(1<<32-et(h)-1)).toString(32)+s,n="_"+n+"R_"+s,s=qo++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=V2++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Fu,useFormState:wd,useActionState:wd,useOptimistic:function(e){var n=Xn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Hu.bind(null,$e,!0,s),s.dispatch=n,[e,n]},useMemoCache:Du,useCacheRefresh:function(){return Xn().memoizedState=Z2.bind(null,$e)},useEffectEvent:function(e){var n=Xn(),s={impl:e};return n.memoizedState=s,function(){if((_t&2)!==0)throw Error(f(440));return s.impl.apply(void 0,arguments)}}},Vu={readContext:Bn,use:Xo,useCallback:Id,useContext:Bn,useEffect:ju,useImperativeHandle:Od,useInsertionEffect:Cd,useLayoutEffect:Td,useMemo:Rd,useReducer:Wo,useRef:Ad,useState:function(){return Wo(Ar)},useDebugValue:Uu,useDeferredValue:function(e,n){var s=fn();return Dd(s,Lt.memoizedState,e,n)},useTransition:function(){var e=Wo(Ar)[0],n=fn().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:ld,useId:kd,useHostTransitionStatus:Fu,useFormState:vd,useActionState:vd,useOptimistic:function(e,n){var s=fn();return dd(s,Lt,e,n)},useMemoCache:Du,useCacheRefresh:jd};Vu.useEffectEvent=_d;var Hd={readContext:Bn,use:Xo,useCallback:Id,useContext:Bn,useEffect:ju,useImperativeHandle:Od,useInsertionEffect:Cd,useLayoutEffect:Td,useMemo:Rd,useReducer:Bu,useRef:Ad,useState:function(){return Bu(Ar)},useDebugValue:Uu,useDeferredValue:function(e,n){var s=fn();return Lt===null?zu(s,e,n):Dd(s,Lt.memoizedState,e,n)},useTransition:function(){var e=Bu(Ar)[0],n=fn().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:ld,useId:kd,useHostTransitionStatus:Fu,useFormState:Ed,useActionState:Ed,useOptimistic:function(e,n){var s=fn();return Lt!==null?dd(s,Lt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Du,useCacheRefresh:jd};Hd.useEffectEvent=_d;function Gu(e,n,s,h){n=e.memoizedState,s=s(h,n),s=s==null?n:O({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var qu={enqueueSetState:function(e,n,s){e=e._reactInternals;var h=yi(),x=ia(h);x.payload=n,s!=null&&(x.callback=s),n=ra(e,x,h),n!==null&&(ai(n,e,h),Al(n,e,h))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var h=yi(),x=ia(h);x.tag=1,x.payload=n,s!=null&&(x.callback=s),n=ra(e,x,h),n!==null&&(ai(n,e,h),Al(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=yi(),h=ia(s);h.tag=2,n!=null&&(h.callback=n),n=ra(e,h,s),n!==null&&(ai(n,e,s),Al(n,e,s))}};function Vd(e,n,s,h,x,w,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,w,T):n.prototype&&n.prototype.isPureReactComponent?!m(s,h)||!m(x,w):!0}function Gd(e,n,s,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,h),n.state!==e&&qu.enqueueReplaceState(n,n.state,null)}function Xa(e,n){var s=n;if("ref"in n){s={};for(var h in n)h!=="ref"&&(s[h]=n[h])}if(e=e.defaultProps){s===n&&(s=O({},s));for(var x in e)s[x]===void 0&&(s[x]=e[x])}return s}function qd(e){Oo(e)}function Yd(e){console.error(e)}function Xd(e){Oo(e)}function Jo(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function Wd(e,n,s){try{var h=e.onCaughtError;h(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Yu(e,n,s){return s=ia(s),s.tag=3,s.payload={element:null},s.callback=function(){Jo(e,n)},s}function Zd(e){return e=ia(e),e.tag=3,e}function Qd(e,n,s,h){var x=s.type.getDerivedStateFromError;if(typeof x=="function"){var w=h.value;e.payload=function(){return x(w)},e.callback=function(){Wd(n,s,h)}}var T=s.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){Wd(n,s,h),typeof x!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function K2(e,n,s,h,x){if(s.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=s.alternate,n!==null&&vs(n,s,x,!0),s=gi.current,s!==null){switch(s.tag){case 31:case 13:return Bi===null?uc():s.alternate===null&&an===0&&(an=3),s.flags&=-257,s.flags|=65536,s.lanes=x,h===zo?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([h]):n.add(h),xh(e,h,x)),!1;case 22:return s.flags|=65536,h===zo?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([h]):s.add(h)),xh(e,h,x)),!1}throw Error(f(435,s.tag))}return xh(e,h,x),uc(),!1}if(gt)return n=gi.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=x,h!==hu&&(e=Error(f(422),{cause:h}),yl(Ii(e,s)))):(h!==hu&&(n=Error(f(423),{cause:h}),yl(Ii(n,s))),e=e.current.alternate,e.flags|=65536,x&=-x,e.lanes|=x,h=Ii(h,s),x=Yu(e.stateNode,h,x),Eu(e,x),an!==4&&(an=2)),!1;var w=Error(f(520),{cause:h});if(w=Ii(w,s),jl===null?jl=[w]:jl.push(w),an!==4&&(an=2),n===null)return!0;h=Ii(h,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=x&-x,s.lanes|=e,e=Yu(s.stateNode,h,e),Eu(s,e),!1;case 1:if(n=s.type,w=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ua===null||!ua.has(w))))return s.flags|=65536,x&=-x,s.lanes|=x,x=Zd(x),Qd(x,e,s,h),Eu(s,x),!1}s=s.return}while(s!==null);return!1}var Xu=Error(f(461)),xn=!1;function Ln(e,n,s,h){n.child=e===null?ed(n,null,s,h):qa(n,e.child,s,h)}function Kd(e,n,s,h,x){s=s.render;var w=n.ref;if("ref"in h){var T={};for(var M in h)M!=="ref"&&(T[M]=h[M])}else T=h;return Fa(n),h=Nu(e,n,s,T,w,x),M=Ou(),e!==null&&!xn?(Iu(e,n,x),Sr(e,n,x)):(gt&&M&&cu(n),n.flags|=1,Ln(e,n,h,x),n.child)}function Jd(e,n,s,h,x){if(e===null){var w=s.type;return typeof w=="function"&&!su(w)&&w.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=w,$d(e,n,w,h,x)):(e=Mo(s.type,null,h,n,n.mode,x),e.ref=n.ref,e.return=n,n.child=e)}if(w=e.child,!th(e,x)){var T=w.memoizedProps;if(s=s.compare,s=s!==null?s:m,s(T,h)&&e.ref===n.ref)return Sr(e,n,x)}return n.flags|=1,e=yr(w,h),e.ref=n.ref,e.return=n,n.child=e}function $d(e,n,s,h,x){if(e!==null){var w=e.memoizedProps;if(m(w,h)&&e.ref===n.ref)if(xn=!1,n.pendingProps=h=w,th(e,x))(e.flags&131072)!==0&&(xn=!0);else return n.lanes=e.lanes,Sr(e,n,x)}return Wu(e,n,s,h,x)}function e0(e,n,s,h){var x=h.children,w=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((n.flags&128)!==0){if(w=w!==null?w.baseLanes|s:s,e!==null){for(h=n.child=e.child,x=0;h!==null;)x=x|h.lanes|h.childLanes,h=h.sibling;h=x&~w}else h=0,n.child=null;return t0(e,n,w,s,h)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&jo(n,w!==null?w.cachePool:null),w!==null?id(n,w):Su(),rd(n);else return h=n.lanes=536870912,t0(e,n,w!==null?w.baseLanes|s:s,s,h)}else w!==null?(jo(n,w.cachePool),id(n,w),sa(),n.memoizedState=null):(e!==null&&jo(n,null),Su(),sa());return Ln(e,n,x,s),n.child}function Il(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function t0(e,n,s,h,x){var w=yu();return w=w===null?null:{parent:mn._currentValue,pool:w},n.memoizedState={baseLanes:s,cachePool:w},e!==null&&jo(n,null),Su(),rd(n),e!==null&&vs(e,n,h,!0),n.childLanes=x,null}function $o(e,n){return n=tc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function n0(e,n,s){return qa(n,e.child,null,s),e=$o(n,n.pendingProps),e.flags|=2,mi(n),n.memoizedState=null,e}function J2(e,n,s){var h=n.pendingProps,x=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(gt){if(h.mode==="hidden")return e=$o(n,h),n.lanes=536870912,Il(null,e);if(Cu(n),(e=Xt)?(e=g1(e,Mi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Jr!==null?{id:ar,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},s=zf(e),s.return=n,n.child=s,Mn=n,Xt=null)):e=null,e===null)throw ea(n);return n.lanes=536870912,null}return $o(n,h)}var w=e.memoizedState;if(w!==null){var T=w.dehydrated;if(Cu(n),x)if(n.flags&256)n.flags&=-257,n=n0(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(f(558));else if(xn||vs(e,n,s,!1),x=(s&e.childLanes)!==0,xn||x){if(h=Ht,h!==null&&(T=rs(h,s),T!==0&&T!==w.retryLane))throw w.retryLane=T,ja(e,T),ai(h,e,T),Xu;uc(),n=n0(e,n,s)}else e=w.treeContext,Xt=Li(T.nextSibling),Mn=n,gt=!0,$r=null,Mi=!1,e!==null&&Hf(n,e),n=$o(n,h),n.flags|=4096;return n}return e=yr(e.child,{mode:h.mode,children:h.children}),e.ref=n.ref,n.child=e,e.return=n,e}function ec(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(f(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function Wu(e,n,s,h,x){return Fa(n),s=Nu(e,n,s,h,void 0,x),h=Ou(),e!==null&&!xn?(Iu(e,n,x),Sr(e,n,x)):(gt&&h&&cu(n),n.flags|=1,Ln(e,n,s,x),n.child)}function i0(e,n,s,h,x,w){return Fa(n),n.updateQueue=null,s=sd(n,h,s,x),ad(e),h=Ou(),e!==null&&!xn?(Iu(e,n,w),Sr(e,n,w)):(gt&&h&&cu(n),n.flags|=1,Ln(e,n,s,w),n.child)}function r0(e,n,s,h,x){if(Fa(n),n.stateNode===null){var w=ps,T=s.contextType;typeof T=="object"&&T!==null&&(w=Bn(T)),w=new s(h,w),n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=qu,n.stateNode=w,w._reactInternals=n,w=n.stateNode,w.props=h,w.state=n.memoizedState,w.refs={},vu(n),T=s.contextType,w.context=typeof T=="object"&&T!==null?Bn(T):ps,w.state=n.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(Gu(n,s,T,h),w.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(T=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),T!==w.state&&qu.enqueueReplaceState(w,w.state,null),_l(n,h,w,x),Sl(),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){w=n.stateNode;var M=n.memoizedProps,P=Xa(s,M);w.props=P;var $=w.context,he=s.contextType;T=ps,typeof he=="object"&&he!==null&&(T=Bn(he));var ge=s.getDerivedStateFromProps;he=typeof ge=="function"||typeof w.getSnapshotBeforeUpdate=="function",M=n.pendingProps!==M,he||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M||$!==T)&&Gd(n,w,h,T),na=!1;var te=n.memoizedState;w.state=te,_l(n,h,w,x),Sl(),$=n.memoizedState,M||te!==$||na?(typeof ge=="function"&&(Gu(n,s,ge,h),$=n.memoizedState),(P=na||Vd(n,s,P,h,te,$,T))?(he||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=$),w.props=h,w.state=$,w.context=T,h=P):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{w=n.stateNode,bu(e,n),T=n.memoizedProps,he=Xa(s,T),w.props=he,ge=n.pendingProps,te=w.context,$=s.contextType,P=ps,typeof $=="object"&&$!==null&&(P=Bn($)),M=s.getDerivedStateFromProps,($=typeof M=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==ge||te!==P)&&Gd(n,w,h,P),na=!1,te=n.memoizedState,w.state=te,_l(n,h,w,x),Sl();var oe=n.memoizedState;T!==ge||te!==oe||na||e!==null&&e.dependencies!==null&&Lo(e.dependencies)?(typeof M=="function"&&(Gu(n,s,M,h),oe=n.memoizedState),(he=na||Vd(n,s,he,h,te,oe,P)||e!==null&&e.dependencies!==null&&Lo(e.dependencies))?($||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,oe,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,oe,P)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===e.memoizedProps&&te===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&te===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=oe),w.props=h,w.state=oe,w.context=P,h=he):(typeof w.componentDidUpdate!="function"||T===e.memoizedProps&&te===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&te===e.memoizedState||(n.flags|=1024),h=!1)}return w=h,ec(e,n),h=(n.flags&128)!==0,w||h?(w=n.stateNode,s=h&&typeof s.getDerivedStateFromError!="function"?null:w.render(),n.flags|=1,e!==null&&h?(n.child=qa(n,e.child,null,x),n.child=qa(n,null,s,x)):Ln(e,n,s,x),n.memoizedState=w.state,e=n.child):e=Sr(e,n,x),e}function a0(e,n,s,h){return za(),n.flags|=256,Ln(e,n,s,h),n.child}var Zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qu(e){return{baseLanes:e,cachePool:Wf()}}function Ku(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=xi),e}function s0(e,n,s){var h=n.pendingProps,x=!1,w=(n.flags&128)!==0,T;if((T=w)||(T=e!==null&&e.memoizedState===null?!1:(hn.current&2)!==0),T&&(x=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,e===null){if(gt){if(x?aa(n):sa(),(e=Xt)?(e=g1(e,Mi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Jr!==null?{id:ar,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},s=zf(e),s.return=n,n.child=s,Mn=n,Xt=null)):e=null,e===null)throw ea(n);return Mh(e)?n.lanes=32:n.lanes=536870912,null}var M=h.children;return h=h.fallback,x?(sa(),x=n.mode,M=tc({mode:"hidden",children:M},x),h=Ua(h,x,s,null),M.return=n,h.return=n,M.sibling=h,n.child=M,h=n.child,h.memoizedState=Qu(s),h.childLanes=Ku(e,T,s),n.memoizedState=Zu,Il(null,h)):(aa(n),Ju(n,M))}var P=e.memoizedState;if(P!==null&&(M=P.dehydrated,M!==null)){if(w)n.flags&256?(aa(n),n.flags&=-257,n=$u(e,n,s)):n.memoizedState!==null?(sa(),n.child=e.child,n.flags|=128,n=null):(sa(),M=h.fallback,x=n.mode,h=tc({mode:"visible",children:h.children},x),M=Ua(M,x,s,null),M.flags|=2,h.return=n,M.return=n,h.sibling=M,n.child=h,qa(n,e.child,null,s),h=n.child,h.memoizedState=Qu(s),h.childLanes=Ku(e,T,s),n.memoizedState=Zu,n=Il(null,h));else if(aa(n),Mh(M)){if(T=M.nextSibling&&M.nextSibling.dataset,T)var $=T.dgst;T=$,h=Error(f(419)),h.stack="",h.digest=T,yl({value:h,source:null,stack:null}),n=$u(e,n,s)}else if(xn||vs(e,n,s,!1),T=(s&e.childLanes)!==0,xn||T){if(T=Ht,T!==null&&(h=rs(T,s),h!==0&&h!==P.retryLane))throw P.retryLane=h,ja(e,h),ai(T,e,h),Xu;Dh(M)||uc(),n=$u(e,n,s)}else Dh(M)?(n.flags|=192,n.child=e.child,n=null):(e=P.treeContext,Xt=Li(M.nextSibling),Mn=n,gt=!0,$r=null,Mi=!1,e!==null&&Hf(n,e),n=Ju(n,h.children),n.flags|=4096);return n}return x?(sa(),M=h.fallback,x=n.mode,P=e.child,$=P.sibling,h=yr(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&65011712,$!==null?M=yr($,M):(M=Ua(M,x,s,null),M.flags|=2),M.return=n,h.return=n,h.sibling=M,n.child=h,Il(null,h),h=n.child,M=e.child.memoizedState,M===null?M=Qu(s):(x=M.cachePool,x!==null?(P=mn._currentValue,x=x.parent!==P?{parent:P,pool:P}:x):x=Wf(),M={baseLanes:M.baseLanes|s,cachePool:x}),h.memoizedState=M,h.childLanes=Ku(e,T,s),n.memoizedState=Zu,Il(e.child,h)):(aa(n),s=e.child,e=s.sibling,s=yr(s,{mode:"visible",children:h.children}),s.return=n,s.sibling=null,e!==null&&(T=n.deletions,T===null?(n.deletions=[e],n.flags|=16):T.push(e)),n.child=s,n.memoizedState=null,s)}function Ju(e,n){return n=tc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function tc(e,n){return e=di(22,e,null,n),e.lanes=0,e}function $u(e,n,s){return qa(n,e.child,null,s),e=Ju(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function l0(e,n,s){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),gu(e.return,n,s)}function eh(e,n,s,h,x,w){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:s,tailMode:x,treeForkCount:w}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=s,T.tailMode=x,T.treeForkCount=w)}function o0(e,n,s){var h=n.pendingProps,x=h.revealOrder,w=h.tail;h=h.children;var T=hn.current,M=(T&2)!==0;if(M?(T=T&1|2,n.flags|=128):T&=1,Se(hn,T),Ln(e,n,h,s),h=gt?xl:0,!M&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&l0(e,s,n);else if(e.tag===19)l0(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(x){case"forwards":for(s=n.child,x=null;s!==null;)e=s.alternate,e!==null&&Vo(e)===null&&(x=s),s=s.sibling;s=x,s===null?(x=n.child,n.child=null):(x=s.sibling,s.sibling=null),eh(n,!1,x,s,w,h);break;case"backwards":case"unstable_legacy-backwards":for(s=null,x=n.child,n.child=null;x!==null;){if(e=x.alternate,e!==null&&Vo(e)===null){n.child=x;break}e=x.sibling,x.sibling=s,s=x,x=e}eh(n,!0,s,null,w,h);break;case"together":eh(n,!1,null,null,void 0,h);break;default:n.memoizedState=null}return n.child}function Sr(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ca|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(vs(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(f(153));if(n.child!==null){for(e=n.child,s=yr(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=yr(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function th(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Lo(e)))}function $2(e,n,s){switch(n.tag){case 3:mt(n,n.stateNode.containerInfo),ta(n,mn,e.memoizedState.cache),za();break;case 27:case 5:ji(n);break;case 4:mt(n,n.stateNode.containerInfo);break;case 10:ta(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Cu(n),null;break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(aa(n),n.flags|=128,null):(s&n.child.childLanes)!==0?s0(e,n,s):(aa(n),e=Sr(e,n,s),e!==null?e.sibling:null);aa(n);break;case 19:var x=(e.flags&128)!==0;if(h=(s&n.childLanes)!==0,h||(vs(e,n,s,!1),h=(s&n.childLanes)!==0),x){if(h)return o0(e,n,s);n.flags|=128}if(x=n.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Se(hn,hn.current),h)break;return null;case 22:return n.lanes=0,e0(e,n,s,n.pendingProps);case 24:ta(n,mn,e.memoizedState.cache)}return Sr(e,n,s)}function c0(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)xn=!0;else{if(!th(e,s)&&(n.flags&128)===0)return xn=!1,$2(e,n,s);xn=(e.flags&131072)!==0}else xn=!1,gt&&(n.flags&1048576)!==0&&Ff(n,xl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var h=n.pendingProps;if(e=Va(n.elementType),n.type=e,typeof e=="function")su(e)?(h=Xa(e,h),n.tag=1,n=r0(null,n,e,h,s)):(n.tag=0,n=Wu(null,n,e,h,s));else{if(e!=null){var x=e.$$typeof;if(x===ce){n.tag=11,n=Kd(null,n,e,h,s);break e}else if(x===Q){n.tag=14,n=Jd(null,n,e,h,s);break e}}throw n=Ge(e)||e,Error(f(306,n,""))}}return n;case 0:return Wu(e,n,n.type,n.pendingProps,s);case 1:return h=n.type,x=Xa(h,n.pendingProps),r0(e,n,h,x,s);case 3:e:{if(mt(n,n.stateNode.containerInfo),e===null)throw Error(f(387));h=n.pendingProps;var w=n.memoizedState;x=w.element,bu(e,n),_l(n,h,null,s);var T=n.memoizedState;if(h=T.cache,ta(n,mn,h),h!==w.cache&&mu(n,[mn],s,!0),Sl(),h=T.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=w,n.memoizedState=w,n.flags&256){n=a0(e,n,h,s);break e}else if(h!==x){x=Ii(Error(f(424)),n),yl(x),n=a0(e,n,h,s);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Xt=Li(e.firstChild),Mn=n,gt=!0,$r=null,Mi=!0,s=ed(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(za(),h===x){n=Sr(e,n,s);break e}Ln(e,n,h,s)}n=n.child}return n;case 26:return ec(e,n),e===null?(s=v1(n.type,null,n.pendingProps,null))?n.memoizedState=s:gt||(s=n.type,e=n.pendingProps,h=xc(Ee.current).createElement(s),h[on]=n,h[It]=e,kn(h,s,e),tn(h),n.stateNode=h):n.memoizedState=v1(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ji(n),e===null&&gt&&(h=n.stateNode=x1(n.type,n.pendingProps,Ee.current),Mn=n,Mi=!0,x=Xt,ga(n.type)?(Bh=x,Xt=Li(h.firstChild)):Xt=x),Ln(e,n,n.pendingProps.children,s),ec(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&gt&&((x=h=Xt)&&(h=Om(h,n.type,n.pendingProps,Mi),h!==null?(n.stateNode=h,Mn=n,Xt=Li(h.firstChild),Mi=!1,x=!0):x=!1),x||ea(n)),ji(n),x=n.type,w=n.pendingProps,T=e!==null?e.memoizedProps:null,h=w.children,Oh(x,w)?h=null:T!==null&&Oh(x,T)&&(n.flags|=32),n.memoizedState!==null&&(x=Nu(e,n,G2,null,null,s),ql._currentValue=x),ec(e,n),Ln(e,n,h,s),n.child;case 6:return e===null&&gt&&((e=s=Xt)&&(s=Im(s,n.pendingProps,Mi),s!==null?(n.stateNode=s,Mn=n,Xt=null,e=!0):e=!1),e||ea(n)),null;case 13:return s0(e,n,s);case 4:return mt(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=qa(n,null,h,s):Ln(e,n,h,s),n.child;case 11:return Kd(e,n,n.type,n.pendingProps,s);case 7:return Ln(e,n,n.pendingProps,s),n.child;case 8:return Ln(e,n,n.pendingProps.children,s),n.child;case 12:return Ln(e,n,n.pendingProps.children,s),n.child;case 10:return h=n.pendingProps,ta(n,n.type,h.value),Ln(e,n,h.children,s),n.child;case 9:return x=n.type._context,h=n.pendingProps.children,Fa(n),x=Bn(x),h=h(x),n.flags|=1,Ln(e,n,h,s),n.child;case 14:return Jd(e,n,n.type,n.pendingProps,s);case 15:return $d(e,n,n.type,n.pendingProps,s);case 19:return o0(e,n,s);case 31:return J2(e,n,s);case 22:return e0(e,n,s,n.pendingProps);case 24:return Fa(n),h=Bn(mn),e===null?(x=yu(),x===null&&(x=Ht,w=pu(),x.pooledCache=w,w.refCount++,w!==null&&(x.pooledCacheLanes|=s),x=w),n.memoizedState={parent:h,cache:x},vu(n),ta(n,mn,x)):((e.lanes&s)!==0&&(bu(e,n),_l(n,null,null,s),Sl()),x=e.memoizedState,w=n.memoizedState,x.parent!==h?(x={parent:h,cache:h},n.memoizedState=x,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=x),ta(n,mn,h)):(h=w.cache,ta(n,mn,h),h!==x.cache&&mu(n,[mn],s,!0))),Ln(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(f(156,n.tag))}function _r(e){e.flags|=4}function nh(e,n,s,h,x){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(x&335544128)===x)if(e.stateNode.complete)e.flags|=8192;else if(k0())e.flags|=8192;else throw Ga=zo,wu}else e.flags&=-16777217}function u0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_1(n))if(k0())e.flags|=8192;else throw Ga=zo,wu}function nc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?En():536870912,e.lanes|=n,Ds|=n)}function Rl(e,n){if(!gt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Wt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,h=0;if(n)for(var x=e.child;x!==null;)s|=x.lanes|x.childLanes,h|=x.subtreeFlags&65011712,h|=x.flags&65011712,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)s|=x.lanes|x.childLanes,h|=x.subtreeFlags,h|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=h,e.childLanes=s,n}function em(e,n,s){var h=n.pendingProps;switch(uu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(n),null;case 1:return Wt(n),null;case 3:return s=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),br(mn),Ut(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ws(n)?_r(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,fu())),Wt(n),null;case 26:var x=n.type,w=n.memoizedState;return e===null?(_r(n),w!==null?(Wt(n),u0(n,w)):(Wt(n),nh(n,x,null,h,s))):w?w!==e.memoizedState?(_r(n),Wt(n),u0(n,w)):(Wt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==h&&_r(n),Wt(n),nh(n,x,e,h,s)),null;case 27:if(vn(n),s=Ee.current,x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&_r(n);else{if(!h){if(n.stateNode===null)throw Error(f(166));return Wt(n),null}e=_e.current,ws(n)?Vf(n):(e=x1(x,h,s),n.stateNode=e,_r(n))}return Wt(n),null;case 5:if(vn(n),x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&_r(n);else{if(!h){if(n.stateNode===null)throw Error(f(166));return Wt(n),null}if(w=_e.current,ws(n))Vf(n);else{var T=xc(Ee.current);switch(w){case 1:w=T.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:w=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":w=T.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":w=T.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":w=T.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?T.createElement(x,{is:h.is}):T.createElement(x)}}w[on]=n,w[It]=h;e:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)w.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break e;for(;T.sibling===null;){if(T.return===null||T.return===n)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=w;e:switch(kn(w,x,h),x){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&_r(n)}}return Wt(n),nh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&_r(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(f(166));if(e=Ee.current,ws(n)){if(e=n.stateNode,s=n.memoizedProps,h=null,x=Mn,x!==null)switch(x.tag){case 27:case 5:h=x.memoizedProps}e[on]=n,e=!!(e.nodeValue===s||h!==null&&h.suppressHydrationWarning===!0||s1(e.nodeValue,s)),e||ea(n,!0)}else e=xc(e).createTextNode(h),e[on]=n,n.stateNode=e}return Wt(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(h=ws(n),s!==null){if(e===null){if(!h)throw Error(f(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(557));e[on]=n}else za(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Wt(n),e=!1}else s=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(mi(n),n):(mi(n),null);if((n.flags&128)!==0)throw Error(f(558))}return Wt(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(x=ws(n),h!==null&&h.dehydrated!==null){if(e===null){if(!x)throw Error(f(318));if(x=n.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(f(317));x[on]=n}else za(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Wt(n),x=!1}else x=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=x),x=!0;if(!x)return n.flags&256?(mi(n),n):(mi(n),null)}return mi(n),(n.flags&128)!==0?(n.lanes=s,n):(s=h!==null,e=e!==null&&e.memoizedState!==null,s&&(h=n.child,x=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(x=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==x&&(h.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),nc(n,n.updateQueue),Wt(n),null);case 4:return Ut(),e===null&&Sh(n.stateNode.containerInfo),Wt(n),null;case 10:return br(n.type),Wt(n),null;case 19:if(ue(hn),h=n.memoizedState,h===null)return Wt(n),null;if(x=(n.flags&128)!==0,w=h.rendering,w===null)if(x)Rl(h,!1);else{if(an!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(w=Vo(e),w!==null){for(n.flags|=128,Rl(h,!1),e=w.updateQueue,n.updateQueue=e,nc(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)Uf(s,e),s=s.sibling;return Se(hn,hn.current&1|2),gt&&wr(n,h.treeForkCount),n.child}e=e.sibling}h.tail!==null&&Jt()>lc&&(n.flags|=128,x=!0,Rl(h,!1),n.lanes=4194304)}else{if(!x)if(e=Vo(w),e!==null){if(n.flags|=128,x=!0,e=e.updateQueue,n.updateQueue=e,nc(n,e),Rl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!gt)return Wt(n),null}else 2*Jt()-h.renderingStartTime>lc&&s!==536870912&&(n.flags|=128,x=!0,Rl(h,!1),n.lanes=4194304);h.isBackwards?(w.sibling=n.child,n.child=w):(e=h.last,e!==null?e.sibling=w:n.child=w,h.last=w)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=Jt(),e.sibling=null,s=hn.current,Se(hn,x?s&1|2:s&1),gt&&wr(n,h.treeForkCount),e):(Wt(n),null);case 22:case 23:return mi(n),_u(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(s&536870912)!==0&&(n.flags&128)===0&&(Wt(n),n.subtreeFlags&6&&(n.flags|=8192)):Wt(n),s=n.updateQueue,s!==null&&nc(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==s&&(n.flags|=2048),e!==null&&ue(Ha),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),br(mn),Wt(n),null;case 25:return null;case 30:return null}throw Error(f(156,n.tag))}function tm(e,n){switch(uu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return br(mn),Ut(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return vn(n),null;case 31:if(n.memoizedState!==null){if(mi(n),n.alternate===null)throw Error(f(340));za()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(mi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(f(340));za()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ue(hn),null;case 4:return Ut(),null;case 10:return br(n.type),null;case 22:case 23:return mi(n),_u(),e!==null&&ue(Ha),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return br(mn),null;case 25:return null;default:return null}}function h0(e,n){switch(uu(n),n.tag){case 3:br(mn),Ut();break;case 26:case 27:case 5:vn(n);break;case 4:Ut();break;case 31:n.memoizedState!==null&&mi(n);break;case 13:mi(n);break;case 19:ue(hn);break;case 10:br(n.type);break;case 22:case 23:mi(n),_u(),e!==null&&ue(Ha);break;case 24:br(mn)}}function Dl(e,n){try{var s=n.updateQueue,h=s!==null?s.lastEffect:null;if(h!==null){var x=h.next;s=x;do{if((s.tag&e)===e){h=void 0;var w=s.create,T=s.inst;h=w(),T.destroy=h}s=s.next}while(s!==x)}}catch(M){Dt(n,n.return,M)}}function la(e,n,s){try{var h=n.updateQueue,x=h!==null?h.lastEffect:null;if(x!==null){var w=x.next;h=w;do{if((h.tag&e)===e){var T=h.inst,M=T.destroy;if(M!==void 0){T.destroy=void 0,x=n;var P=s,$=M;try{$()}catch(he){Dt(x,P,he)}}}h=h.next}while(h!==w)}}catch(he){Dt(n,n.return,he)}}function f0(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{nd(n,s)}catch(h){Dt(e,e.return,h)}}}function d0(e,n,s){s.props=Xa(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(h){Dt(e,n,h)}}function Ml(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof s=="function"?e.refCleanup=s(h):s.current=h}}catch(x){Dt(e,n,x)}}function lr(e,n){var s=e.ref,h=e.refCleanup;if(s!==null)if(typeof h=="function")try{h()}catch(x){Dt(e,n,x)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(x){Dt(e,n,x)}else s.current=null}function g0(e){var n=e.type,s=e.memoizedProps,h=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&h.focus();break e;case"img":s.src?h.src=s.src:s.srcSet&&(h.srcset=s.srcSet)}}catch(x){Dt(e,e.return,x)}}function ih(e,n,s){try{var h=e.stateNode;Am(h,e.type,s,n),h[It]=n}catch(x){Dt(e,e.return,x)}}function m0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ga(e.type)||e.tag===4}function rh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||m0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ga(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ah(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Jn));else if(h!==4&&(h===27&&ga(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(ah(e,n,s),e=e.sibling;e!==null;)ah(e,n,s),e=e.sibling}function ic(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(h!==4&&(h===27&&ga(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(ic(e,n,s),e=e.sibling;e!==null;)ic(e,n,s),e=e.sibling}function p0(e){var n=e.stateNode,s=e.memoizedProps;try{for(var h=e.type,x=n.attributes;x.length;)n.removeAttributeNode(x[0]);kn(n,h,s),n[on]=e,n[It]=s}catch(w){Dt(e,e.return,w)}}var Cr=!1,yn=!1,sh=!1,x0=typeof WeakSet=="function"?WeakSet:Set,On=null;function nm(e,n){if(e=e.containerInfo,Th=Sc,e=R(e),D(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var h=s.getSelection&&s.getSelection();if(h&&h.rangeCount!==0){s=h.anchorNode;var x=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{s.nodeType,w.nodeType}catch{s=null;break e}var T=0,M=-1,P=-1,$=0,he=0,ge=e,te=null;t:for(;;){for(var oe;ge!==s||x!==0&&ge.nodeType!==3||(M=T+x),ge!==w||h!==0&&ge.nodeType!==3||(P=T+h),ge.nodeType===3&&(T+=ge.nodeValue.length),(oe=ge.firstChild)!==null;)te=ge,ge=oe;for(;;){if(ge===e)break t;if(te===s&&++$===x&&(M=T),te===w&&++he===h&&(P=T),(oe=ge.nextSibling)!==null)break;ge=te,te=ge.parentNode}ge=oe}s=M===-1||P===-1?null:{start:M,end:P}}else s=null}s=s||{start:0,end:0}}else s=null;for(Nh={focusedElem:e,selectionRange:s},Sc=!1,On=n;On!==null;)if(n=On,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,On=e;else for(;On!==null;){switch(n=On,w=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)x=e[s],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,s=n,x=w.memoizedProps,w=w.memoizedState,h=s.stateNode;try{var De=Xa(s.type,x);e=h.getSnapshotBeforeUpdate(De,w),h.__reactInternalSnapshotBeforeUpdate=e}catch(He){Dt(s,s.return,He)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)Rh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(f(163))}if(e=n.sibling,e!==null){e.return=n.return,On=e;break}On=n.return}}function y0(e,n,s){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Nr(e,s),h&4&&Dl(5,s);break;case 1:if(Nr(e,s),h&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(T){Dt(s,s.return,T)}else{var x=Xa(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(x,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Dt(s,s.return,T)}}h&64&&f0(s),h&512&&Ml(s,s.return);break;case 3:if(Nr(e,s),h&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{nd(e,n)}catch(T){Dt(s,s.return,T)}}break;case 27:n===null&&h&4&&p0(s);case 26:case 5:Nr(e,s),n===null&&h&4&&g0(s),h&512&&Ml(s,s.return);break;case 12:Nr(e,s);break;case 31:Nr(e,s),h&4&&b0(e,s);break;case 13:Nr(e,s),h&4&&E0(e,s),h&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=hm.bind(null,s),Rm(e,s))));break;case 22:if(h=s.memoizedState!==null||Cr,!h){n=n!==null&&n.memoizedState!==null||yn,x=Cr;var w=yn;Cr=h,(yn=n)&&!w?Or(e,s,(s.subtreeFlags&8772)!==0):Nr(e,s),Cr=x,yn=w}break;case 30:break;default:Nr(e,s)}}function w0(e){var n=e.alternate;n!==null&&(e.alternate=null,w0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Kn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Kt=null,ti=!1;function Tr(e,n,s){for(s=s.child;s!==null;)v0(e,n,s),s=s.sibling}function v0(e,n,s){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(Vt,s)}catch{}switch(s.tag){case 26:yn||lr(s,n),Tr(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:yn||lr(s,n);var h=Kt,x=ti;ga(s.type)&&(Kt=s.stateNode,ti=!1),Tr(e,n,s),Hl(s.stateNode),Kt=h,ti=x;break;case 5:yn||lr(s,n);case 6:if(h=Kt,x=ti,Kt=null,Tr(e,n,s),Kt=h,ti=x,Kt!==null)if(ti)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(s.stateNode)}catch(w){Dt(s,n,w)}else try{Kt.removeChild(s.stateNode)}catch(w){Dt(s,n,w)}break;case 18:Kt!==null&&(ti?(e=Kt,f1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Ps(e)):f1(Kt,s.stateNode));break;case 4:h=Kt,x=ti,Kt=s.stateNode.containerInfo,ti=!0,Tr(e,n,s),Kt=h,ti=x;break;case 0:case 11:case 14:case 15:la(2,s,n),yn||la(4,s,n),Tr(e,n,s);break;case 1:yn||(lr(s,n),h=s.stateNode,typeof h.componentWillUnmount=="function"&&d0(s,n,h)),Tr(e,n,s);break;case 21:Tr(e,n,s);break;case 22:yn=(h=yn)||s.memoizedState!==null,Tr(e,n,s),yn=h;break;default:Tr(e,n,s)}}function b0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(s){Dt(n,n.return,s)}}}function E0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(s){Dt(n,n.return,s)}}function im(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new x0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new x0),n;default:throw Error(f(435,e.tag))}}function rc(e,n){var s=im(e);n.forEach(function(h){if(!s.has(h)){s.add(h);var x=fm.bind(null,e,h);h.then(x,x)}})}function ni(e,n){var s=n.deletions;if(s!==null)for(var h=0;h<s.length;h++){var x=s[h],w=e,T=n,M=T;e:for(;M!==null;){switch(M.tag){case 27:if(ga(M.type)){Kt=M.stateNode,ti=!1;break e}break;case 5:Kt=M.stateNode,ti=!1;break e;case 3:case 4:Kt=M.stateNode.containerInfo,ti=!0;break e}M=M.return}if(Kt===null)throw Error(f(160));v0(w,T,x),Kt=null,ti=!1,w=x.alternate,w!==null&&(w.return=null),x.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)A0(n,e),n=n.sibling}var qi=null;function A0(e,n){var s=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ni(n,e),ii(e),h&4&&(la(3,e,e.return),Dl(3,e),la(5,e,e.return));break;case 1:ni(n,e),ii(e),h&512&&(yn||s===null||lr(s,s.return)),h&64&&Cr&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?h:s.concat(h))));break;case 26:var x=qi;if(ni(n,e),ii(e),h&512&&(yn||s===null||lr(s,s.return)),h&4){var w=s!==null?s.memoizedState:null;if(h=e.memoizedState,s===null)if(h===null)if(e.stateNode===null){e:{h=e.type,s=e.memoizedProps,x=x.ownerDocument||x;t:switch(h){case"title":w=x.getElementsByTagName("title")[0],(!w||w[Na]||w[on]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=x.createElement(h),x.head.insertBefore(w,x.querySelector("head > title"))),kn(w,h,s),w[on]=e,tn(w),h=w;break e;case"link":var T=A1("link","href",x).get(h+(s.href||""));if(T){for(var M=0;M<T.length;M++)if(w=T[M],w.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&w.getAttribute("rel")===(s.rel==null?null:s.rel)&&w.getAttribute("title")===(s.title==null?null:s.title)&&w.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){T.splice(M,1);break t}}w=x.createElement(h),kn(w,h,s),x.head.appendChild(w);break;case"meta":if(T=A1("meta","content",x).get(h+(s.content||""))){for(M=0;M<T.length;M++)if(w=T[M],w.getAttribute("content")===(s.content==null?null:""+s.content)&&w.getAttribute("name")===(s.name==null?null:s.name)&&w.getAttribute("property")===(s.property==null?null:s.property)&&w.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&w.getAttribute("charset")===(s.charSet==null?null:s.charSet)){T.splice(M,1);break t}}w=x.createElement(h),kn(w,h,s),x.head.appendChild(w);break;default:throw Error(f(468,h))}w[on]=e,tn(w),h=w}e.stateNode=h}else S1(x,e.type,e.stateNode);else e.stateNode=E1(x,h,e.memoizedProps);else w!==h?(w===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):w.count--,h===null?S1(x,e.type,e.stateNode):E1(x,h,e.memoizedProps)):h===null&&e.stateNode!==null&&ih(e,e.memoizedProps,s.memoizedProps)}break;case 27:ni(n,e),ii(e),h&512&&(yn||s===null||lr(s,s.return)),s!==null&&h&4&&ih(e,e.memoizedProps,s.memoizedProps);break;case 5:if(ni(n,e),ii(e),h&512&&(yn||s===null||lr(s,s.return)),e.flags&32){x=e.stateNode;try{Vr(x,"")}catch(De){Dt(e,e.return,De)}}h&4&&e.stateNode!=null&&(x=e.memoizedProps,ih(e,x,s!==null?s.memoizedProps:x)),h&1024&&(sh=!0);break;case 6:if(ni(n,e),ii(e),h&4){if(e.stateNode===null)throw Error(f(162));h=e.memoizedProps,s=e.stateNode;try{s.nodeValue=h}catch(De){Dt(e,e.return,De)}}break;case 3:if(vc=null,x=qi,qi=yc(n.containerInfo),ni(n,e),qi=x,ii(e),h&4&&s!==null&&s.memoizedState.isDehydrated)try{Ps(n.containerInfo)}catch(De){Dt(e,e.return,De)}sh&&(sh=!1,S0(e));break;case 4:h=qi,qi=yc(e.stateNode.containerInfo),ni(n,e),ii(e),qi=h;break;case 12:ni(n,e),ii(e);break;case 31:ni(n,e),ii(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,rc(e,h)));break;case 13:ni(n,e),ii(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(sc=Jt()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,rc(e,h)));break;case 22:x=e.memoizedState!==null;var P=s!==null&&s.memoizedState!==null,$=Cr,he=yn;if(Cr=$||x,yn=he||P,ni(n,e),yn=he,Cr=$,ii(e),h&8192)e:for(n=e.stateNode,n._visibility=x?n._visibility&-2:n._visibility|1,x&&(s===null||P||Cr||yn||Wa(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){P=s=n;try{if(w=P.stateNode,x)T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{M=P.stateNode;var ge=P.memoizedProps.style,te=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(De){Dt(P,P.return,De)}}}else if(n.tag===6){if(s===null){P=n;try{P.stateNode.nodeValue=x?"":P.memoizedProps}catch(De){Dt(P,P.return,De)}}}else if(n.tag===18){if(s===null){P=n;try{var oe=P.stateNode;x?d1(oe,!0):d1(P.stateNode,!1)}catch(De){Dt(P,P.return,De)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(s=h.retryQueue,s!==null&&(h.retryQueue=null,rc(e,s))));break;case 19:ni(n,e),ii(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,rc(e,h)));break;case 30:break;case 21:break;default:ni(n,e),ii(e)}}function ii(e){var n=e.flags;if(n&2){try{for(var s,h=e.return;h!==null;){if(m0(h)){s=h;break}h=h.return}if(s==null)throw Error(f(160));switch(s.tag){case 27:var x=s.stateNode,w=rh(e);ic(e,w,x);break;case 5:var T=s.stateNode;s.flags&32&&(Vr(T,""),s.flags&=-33);var M=rh(e);ic(e,M,T);break;case 3:case 4:var P=s.stateNode.containerInfo,$=rh(e);ah(e,$,P);break;default:throw Error(f(161))}}catch(he){Dt(e,e.return,he)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function S0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;S0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Nr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)y0(e,n.alternate,n),n=n.sibling}function Wa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:la(4,n,n.return),Wa(n);break;case 1:lr(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&d0(n,n.return,s),Wa(n);break;case 27:Hl(n.stateNode);case 26:case 5:lr(n,n.return),Wa(n);break;case 22:n.memoizedState===null&&Wa(n);break;case 30:Wa(n);break;default:Wa(n)}e=e.sibling}}function Or(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,x=e,w=n,T=w.flags;switch(w.tag){case 0:case 11:case 15:Or(x,w,s),Dl(4,w);break;case 1:if(Or(x,w,s),h=w,x=h.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch($){Dt(h,h.return,$)}if(h=w,x=h.updateQueue,x!==null){var M=h.stateNode;try{var P=x.shared.hiddenCallbacks;if(P!==null)for(x.shared.hiddenCallbacks=null,x=0;x<P.length;x++)td(P[x],M)}catch($){Dt(h,h.return,$)}}s&&T&64&&f0(w),Ml(w,w.return);break;case 27:p0(w);case 26:case 5:Or(x,w,s),s&&h===null&&T&4&&g0(w),Ml(w,w.return);break;case 12:Or(x,w,s);break;case 31:Or(x,w,s),s&&T&4&&b0(x,w);break;case 13:Or(x,w,s),s&&T&4&&E0(x,w);break;case 22:w.memoizedState===null&&Or(x,w,s),Ml(w,w.return);break;case 30:break;default:Or(x,w,s)}n=n.sibling}}function lh(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&wl(s))}function oh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&wl(e))}function Yi(e,n,s,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_0(e,n,s,h),n=n.sibling}function _0(e,n,s,h){var x=n.flags;switch(n.tag){case 0:case 11:case 15:Yi(e,n,s,h),x&2048&&Dl(9,n);break;case 1:Yi(e,n,s,h);break;case 3:Yi(e,n,s,h),x&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&wl(e)));break;case 12:if(x&2048){Yi(e,n,s,h),e=n.stateNode;try{var w=n.memoizedProps,T=w.id,M=w.onPostCommit;typeof M=="function"&&M(T,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(P){Dt(n,n.return,P)}}else Yi(e,n,s,h);break;case 31:Yi(e,n,s,h);break;case 13:Yi(e,n,s,h);break;case 23:break;case 22:w=n.stateNode,T=n.alternate,n.memoizedState!==null?w._visibility&2?Yi(e,n,s,h):Bl(e,n):w._visibility&2?Yi(e,n,s,h):(w._visibility|=2,Os(e,n,s,h,(n.subtreeFlags&10256)!==0||!1)),x&2048&&lh(T,n);break;case 24:Yi(e,n,s,h),x&2048&&oh(n.alternate,n);break;default:Yi(e,n,s,h)}}function Os(e,n,s,h,x){for(x=x&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var w=e,T=n,M=s,P=h,$=T.flags;switch(T.tag){case 0:case 11:case 15:Os(w,T,M,P,x),Dl(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?Os(w,T,M,P,x):Bl(w,T):(he._visibility|=2,Os(w,T,M,P,x)),x&&$&2048&&lh(T.alternate,T);break;case 24:Os(w,T,M,P,x),x&&$&2048&&oh(T.alternate,T);break;default:Os(w,T,M,P,x)}n=n.sibling}}function Bl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,h=n,x=h.flags;switch(h.tag){case 22:Bl(s,h),x&2048&&lh(h.alternate,h);break;case 24:Bl(s,h),x&2048&&oh(h.alternate,h);break;default:Bl(s,h)}n=n.sibling}}var Ll=8192;function Is(e,n,s){if(e.subtreeFlags&Ll)for(e=e.child;e!==null;)C0(e,n,s),e=e.sibling}function C0(e,n,s){switch(e.tag){case 26:Is(e,n,s),e.flags&Ll&&e.memoizedState!==null&&Vm(s,qi,e.memoizedState,e.memoizedProps);break;case 5:Is(e,n,s);break;case 3:case 4:var h=qi;qi=yc(e.stateNode.containerInfo),Is(e,n,s),qi=h;break;case 22:e.memoizedState===null&&(h=e.alternate,h!==null&&h.memoizedState!==null?(h=Ll,Ll=16777216,Is(e,n,s),Ll=h):Is(e,n,s));break;default:Is(e,n,s)}}function T0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function kl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];On=h,O0(h,e)}T0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)N0(e),e=e.sibling}function N0(e){switch(e.tag){case 0:case 11:case 15:kl(e),e.flags&2048&&la(9,e,e.return);break;case 3:kl(e);break;case 12:kl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ac(e)):kl(e);break;default:kl(e)}}function ac(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];On=h,O0(h,e)}T0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:la(8,n,n.return),ac(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,ac(n));break;default:ac(n)}e=e.sibling}}function O0(e,n){for(;On!==null;){var s=On;switch(s.tag){case 0:case 11:case 15:la(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var h=s.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:wl(s.memoizedState.cache)}if(h=s.child,h!==null)h.return=s,On=h;else e:for(s=e;On!==null;){h=On;var x=h.sibling,w=h.return;if(w0(h),h===s){On=null;break e}if(x!==null){x.return=w,On=x;break e}On=w}}}var rm={getCacheForType:function(e){var n=Bn(mn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Bn(mn).controller.signal}},am=typeof WeakMap=="function"?WeakMap:Map,_t=0,Ht=null,lt=null,ft=0,Rt=0,pi=null,oa=!1,Rs=!1,ch=!1,Ir=0,an=0,ca=0,Za=0,uh=0,xi=0,Ds=0,jl=null,ri=null,hh=!1,sc=0,I0=0,lc=1/0,oc=null,ua=null,Cn=0,ha=null,Ms=null,Rr=0,fh=0,dh=null,R0=null,Ul=0,gh=null;function yi(){return(_t&2)!==0&&ft!==0?ft&-ft:ee.T!==null?vh():Fn()}function D0(){if(xi===0)if((ft&536870912)===0||gt){var e=ut;ut<<=1,(ut&3932160)===0&&(ut=262144),xi=e}else xi=536870912;return e=gi.current,e!==null&&(e.flags|=32),xi}function ai(e,n,s){(e===Ht&&(Rt===2||Rt===9)||e.cancelPendingCommit!==null)&&(Bs(e,0),fa(e,ft,xi,!1)),$i(e,s),((_t&2)===0||e!==Ht)&&(e===Ht&&((_t&2)===0&&(Za|=s),an===4&&fa(e,ft,xi,!1)),or(e))}function M0(e,n,s){if((_t&6)!==0)throw Error(f(327));var h=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Rn(e,n),x=h?om(e,n):ph(e,n,!0),w=h;do{if(x===0){Rs&&!h&&fa(e,n,0,!1);break}else{if(s=e.current.alternate,w&&!sm(s)){x=ph(e,n,!1),w=!1;continue}if(x===2){if(w=n,e.errorRecoveryDisabledLanes&w)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var M=e;x=jl;var P=M.current.memoizedState.isDehydrated;if(P&&(Bs(M,T).flags|=256),T=ph(M,T,!1),T!==2){if(ch&&!P){M.errorRecoveryDisabledLanes|=w,Za|=w,x=4;break e}w=ri,ri=x,w!==null&&(ri===null?ri=w:ri.push.apply(ri,w))}x=T}if(w=!1,x!==2)continue}}if(x===1){Bs(e,0),fa(e,n,0,!0);break}e:{switch(h=e,w=x,w){case 0:case 1:throw Error(f(345));case 4:if((n&4194048)!==n)break;case 6:fa(h,n,xi,!oa);break e;case 2:ri=null;break;case 3:case 5:break;default:throw Error(f(329))}if((n&62914560)===n&&(x=sc+300-Jt(),10<x)){if(fa(h,n,xi,!oa),Ta(h,0,!0)!==0)break e;Rr=n,h.timeoutHandle=u1(B0.bind(null,h,s,ri,oc,hh,n,xi,Za,Ds,oa,w,"Throttled",-0,0),x);break e}B0(h,s,ri,oc,hh,n,xi,Za,Ds,oa,w,null,-0,0)}}break}while(!0);or(e)}function B0(e,n,s,h,x,w,T,M,P,$,he,ge,te,oe){if(e.timeoutHandle=-1,ge=n.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},C0(n,w,ge);var De=(w&62914560)===w?sc-Jt():(w&4194048)===w?I0-Jt():0;if(De=Gm(ge,De),De!==null){Rr=w,e.cancelPendingCommit=De(H0.bind(null,e,n,w,s,h,x,T,M,P,he,ge,null,te,oe)),fa(e,w,T,!$);return}}H0(e,n,w,s,h,x,T,M,P)}function sm(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var h=0;h<s.length;h++){var x=s[h],w=x.getSnapshot;x=x.value;try{if(!d(w(),x))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fa(e,n,s,h){n&=~uh,n&=~Za,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var x=n;0<x;){var w=31-et(x),T=1<<w;h[w]=-1,x&=~T}s!==0&&go(e,s,n)}function cc(){return(_t&6)===0?(zl(0),!1):!0}function mh(){if(lt!==null){if(Rt===0)var e=lt.return;else e=lt,vr=Pa=null,Ru(e),Ss=null,bl=0,e=lt;for(;e!==null;)h0(e.alternate,e),e=e.return;lt=null}}function Bs(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Cm(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Rr=0,mh(),Ht=e,lt=s=yr(e.current,null),ft=n,Rt=0,pi=null,oa=!1,Rs=Rn(e,n),ch=!1,Ds=xi=uh=Za=ca=an=0,ri=jl=null,hh=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var x=31-et(h),w=1<<x;n|=e[x],h&=~w}return Ir=n,Io(),s}function L0(e,n){$e=null,ee.H=Ol,n===As||n===Uo?(n=Kf(),Rt=3):n===wu?(n=Kf(),Rt=4):Rt=n===Xu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,pi=n,lt===null&&(an=1,Jo(e,Ii(n,e.current)))}function k0(){var e=gi.current;return e===null?!0:(ft&4194048)===ft?Bi===null:(ft&62914560)===ft||(ft&536870912)!==0?e===Bi:!1}function j0(){var e=ee.H;return ee.H=Ol,e===null?Ol:e}function U0(){var e=ee.A;return ee.A=rm,e}function uc(){an=4,oa||(ft&4194048)!==ft&&gi.current!==null||(Rs=!0),(ca&134217727)===0&&(Za&134217727)===0||Ht===null||fa(Ht,ft,xi,!1)}function ph(e,n,s){var h=_t;_t|=2;var x=j0(),w=U0();(Ht!==e||ft!==n)&&(oc=null,Bs(e,n)),n=!1;var T=an;e:do try{if(Rt!==0&&lt!==null){var M=lt,P=pi;switch(Rt){case 8:mh(),T=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(n=!0);var $=Rt;if(Rt=0,pi=null,Ls(e,M,P,$),s&&Rs){T=0;break e}break;default:$=Rt,Rt=0,pi=null,Ls(e,M,P,$)}}lm(),T=an;break}catch(he){L0(e,he)}while(!0);return n&&e.shellSuspendCounter++,vr=Pa=null,_t=h,ee.H=x,ee.A=w,lt===null&&(Ht=null,ft=0,Io()),T}function lm(){for(;lt!==null;)z0(lt)}function om(e,n){var s=_t;_t|=2;var h=j0(),x=U0();Ht!==e||ft!==n?(oc=null,lc=Jt()+500,Bs(e,n)):Rs=Rn(e,n);e:do try{if(Rt!==0&&lt!==null){n=lt;var w=pi;t:switch(Rt){case 1:Rt=0,pi=null,Ls(e,n,w,1);break;case 2:case 9:if(Zf(w)){Rt=0,pi=null,P0(n);break}n=function(){Rt!==2&&Rt!==9||Ht!==e||(Rt=7),or(e)},w.then(n,n);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:Zf(w)?(Rt=0,pi=null,P0(n)):(Rt=0,pi=null,Ls(e,n,w,7));break;case 5:var T=null;switch(lt.tag){case 26:T=lt.memoizedState;case 5:case 27:var M=lt;if(T?_1(T):M.stateNode.complete){Rt=0,pi=null;var P=M.sibling;if(P!==null)lt=P;else{var $=M.return;$!==null?(lt=$,hc($)):lt=null}break t}}Rt=0,pi=null,Ls(e,n,w,5);break;case 6:Rt=0,pi=null,Ls(e,n,w,6);break;case 8:mh(),an=6;break e;default:throw Error(f(462))}}cm();break}catch(he){L0(e,he)}while(!0);return vr=Pa=null,ee.H=h,ee.A=x,_t=s,lt!==null?0:(Ht=null,ft=0,Io(),an)}function cm(){for(;lt!==null&&!ns();)z0(lt)}function z0(e){var n=c0(e.alternate,e,Ir);e.memoizedProps=e.pendingProps,n===null?hc(e):lt=n}function P0(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=i0(s,n,n.pendingProps,n.type,void 0,ft);break;case 11:n=i0(s,n,n.pendingProps,n.type.render,n.ref,ft);break;case 5:Ru(n);default:h0(s,n),n=lt=Uf(n,Ir),n=c0(s,n,Ir)}e.memoizedProps=e.pendingProps,n===null?hc(e):lt=n}function Ls(e,n,s,h){vr=Pa=null,Ru(n),Ss=null,bl=0;var x=n.return;try{if(K2(e,x,n,s,ft)){an=1,Jo(e,Ii(s,e.current)),lt=null;return}}catch(w){if(x!==null)throw lt=x,w;an=1,Jo(e,Ii(s,e.current)),lt=null;return}n.flags&32768?(gt||h===1?e=!0:Rs||(ft&536870912)!==0?e=!1:(oa=e=!0,(h===2||h===9||h===3||h===6)&&(h=gi.current,h!==null&&h.tag===13&&(h.flags|=16384))),F0(n,e)):hc(n)}function hc(e){var n=e;do{if((n.flags&32768)!==0){F0(n,oa);return}e=n.return;var s=em(n.alternate,n,Ir);if(s!==null){lt=s;return}if(n=n.sibling,n!==null){lt=n;return}lt=n=e}while(n!==null);an===0&&(an=5)}function F0(e,n){do{var s=tm(e.alternate,e);if(s!==null){s.flags&=32767,lt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){lt=e;return}lt=e=s}while(e!==null);an=6,lt=null}function H0(e,n,s,h,x,w,T,M,P){e.cancelPendingCommit=null;do fc();while(Cn!==0);if((_t&6)!==0)throw Error(f(327));if(n!==null){if(n===e.current)throw Error(f(177));if(w=n.lanes|n.childLanes,w|=ru,_i(e,s,w,T,M,P),e===Ht&&(lt=Ht=null,ft=0),Ms=n,ha=e,Rr=s,fh=w,dh=x,R0=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,dm(si,function(){return X0(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,x=fe.p,fe.p=2,T=_t,_t|=4;try{nm(e,n,s)}finally{_t=T,fe.p=x,ee.T=h}}Cn=1,V0(),G0(),q0()}}function V0(){if(Cn===1){Cn=0;var e=ha,n=Ms,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=ee.T,ee.T=null;var h=fe.p;fe.p=2;var x=_t;_t|=4;try{A0(n,e);var w=Nh,T=R(e.containerInfo),M=w.focusedElem,P=w.selectionRange;if(T!==M&&M&&M.ownerDocument&&C(M.ownerDocument.documentElement,M)){if(P!==null&&D(M)){var $=P.start,he=P.end;if(he===void 0&&(he=$),"selectionStart"in M)M.selectionStart=$,M.selectionEnd=Math.min(he,M.value.length);else{var ge=M.ownerDocument||document,te=ge&&ge.defaultView||window;if(te.getSelection){var oe=te.getSelection(),De=M.textContent.length,He=Math.min(P.start,De),jt=P.end===void 0?He:Math.min(P.end,De);!oe.extend&&He>jt&&(T=jt,jt=He,He=T);var q=E(M,He),G=E(M,jt);if(q&&G&&(oe.rangeCount!==1||oe.anchorNode!==q.node||oe.anchorOffset!==q.offset||oe.focusNode!==G.node||oe.focusOffset!==G.offset)){var K=ge.createRange();K.setStart(q.node,q.offset),oe.removeAllRanges(),He>jt?(oe.addRange(K),oe.extend(G.node,G.offset)):(K.setEnd(G.node,G.offset),oe.addRange(K))}}}}for(ge=[],oe=M;oe=oe.parentNode;)oe.nodeType===1&&ge.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ge.length;M++){var de=ge[M];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Sc=!!Th,Nh=Th=null}finally{_t=x,fe.p=h,ee.T=s}}e.current=n,Cn=2}}function G0(){if(Cn===2){Cn=0;var e=ha,n=Ms,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=ee.T,ee.T=null;var h=fe.p;fe.p=2;var x=_t;_t|=4;try{y0(e,n.alternate,n)}finally{_t=x,fe.p=h,ee.T=s}}Cn=3}}function q0(){if(Cn===4||Cn===3){Cn=0,fo();var e=ha,n=Ms,s=Rr,h=R0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Cn=5:(Cn=0,Ms=ha=null,Y0(e,e.pendingLanes));var x=e.pendingLanes;if(x===0&&(ua=null),Ui(s),n=n.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(Vt,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=ee.T,x=fe.p,fe.p=2,ee.T=null;try{for(var w=e.onRecoverableError,T=0;T<h.length;T++){var M=h[T];w(M.value,{componentStack:M.stack})}}finally{ee.T=n,fe.p=x}}(Rr&3)!==0&&fc(),or(e),x=e.pendingLanes,(s&261930)!==0&&(x&42)!==0?e===gh?Ul++:(Ul=0,gh=e):Ul=0,zl(0)}}function Y0(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,wl(n)))}function fc(){return V0(),G0(),q0(),X0()}function X0(){if(Cn!==5)return!1;var e=ha,n=fh;fh=0;var s=Ui(Rr),h=ee.T,x=fe.p;try{fe.p=32>s?32:s,ee.T=null,s=dh,dh=null;var w=ha,T=Rr;if(Cn=0,Ms=ha=null,Rr=0,(_t&6)!==0)throw Error(f(331));var M=_t;if(_t|=4,N0(w.current),_0(w,w.current,T,s),_t=M,zl(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(Vt,w)}catch{}return!0}finally{fe.p=x,ee.T=h,Y0(e,n)}}function W0(e,n,s){n=Ii(s,n),n=Yu(e.stateNode,n,2),e=ra(e,n,2),e!==null&&($i(e,2),or(e))}function Dt(e,n,s){if(e.tag===3)W0(e,e,s);else for(;n!==null;){if(n.tag===3){W0(n,e,s);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ua===null||!ua.has(h))){e=Ii(s,e),s=Zd(2),h=ra(n,s,2),h!==null&&(Qd(s,h,n,e),$i(h,2),or(h));break}}n=n.return}}function xh(e,n,s){var h=e.pingCache;if(h===null){h=e.pingCache=new am;var x=new Set;h.set(n,x)}else x=h.get(n),x===void 0&&(x=new Set,h.set(n,x));x.has(s)||(ch=!0,x.add(s),e=um.bind(null,e,n,s),n.then(e,e))}function um(e,n,s){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ht===e&&(ft&s)===s&&(an===4||an===3&&(ft&62914560)===ft&&300>Jt()-sc?(_t&2)===0&&Bs(e,0):uh|=s,Ds===ft&&(Ds=0)),or(e)}function Z0(e,n){n===0&&(n=En()),e=ja(e,n),e!==null&&($i(e,n),or(e))}function hm(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Z0(e,s)}function fm(e,n){var s=0;switch(e.tag){case 31:case 13:var h=e.stateNode,x=e.memoizedState;x!==null&&(s=x.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(f(314))}h!==null&&h.delete(n),Z0(e,s)}function dm(e,n){return jr(e,n)}var dc=null,ks=null,yh=!1,gc=!1,wh=!1,da=0;function or(e){e!==ks&&e.next===null&&(ks===null?dc=ks=e:ks=ks.next=e),gc=!0,yh||(yh=!0,mm())}function zl(e,n){if(!wh&&gc){wh=!0;do for(var s=!1,h=dc;h!==null;){if(e!==0){var x=h.pendingLanes;if(x===0)var w=0;else{var T=h.suspendedLanes,M=h.pingedLanes;w=(1<<31-et(42|e)+1)-1,w&=x&~(T&~M),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(s=!0,$0(h,w))}else w=ft,w=Ta(h,h===Ht?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Rn(h,w)||(s=!0,$0(h,w));h=h.next}while(s);wh=!1}}function gm(){Q0()}function Q0(){gc=yh=!1;var e=0;da!==0&&_m()&&(e=da);for(var n=Jt(),s=null,h=dc;h!==null;){var x=h.next,w=K0(h,n);w===0?(h.next=null,s===null?dc=x:s.next=x,x===null&&(ks=s)):(s=h,(e!==0||(w&3)!==0)&&(gc=!0)),h=x}Cn!==0&&Cn!==5||zl(e),da!==0&&(da=0)}function K0(e,n){for(var s=e.suspendedLanes,h=e.pingedLanes,x=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var T=31-et(w),M=1<<T,P=x[T];P===-1?((M&s)===0||(M&h)!==0)&&(x[T]=sl(M,n)):P<=n&&(e.expiredLanes|=M),w&=~M}if(n=Ht,s=ft,s=Ta(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,s===0||e===n&&(Rt===2||Rt===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&Re(h),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Rn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(h!==null&&Re(h),Ui(s)){case 2:case 8:s=il;break;case 32:s=si;break;case 268435456:s=rl;break;default:s=si}return h=J0.bind(null,e),s=jr(s,h),e.callbackPriority=n,e.callbackNode=s,n}return h!==null&&h!==null&&Re(h),e.callbackPriority=2,e.callbackNode=null,2}function J0(e,n){if(Cn!==0&&Cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(fc()&&e.callbackNode!==s)return null;var h=ft;return h=Ta(e,e===Ht?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(M0(e,h,n),K0(e,Jt()),e.callbackNode!=null&&e.callbackNode===s?J0.bind(null,e):null)}function $0(e,n){if(fc())return null;M0(e,n,!0)}function mm(){Tm(function(){(_t&6)!==0?jr(Qn,gm):Q0()})}function vh(){if(da===0){var e=bs;e===0&&(e=Ca,Ca<<=1,(Ca&261888)===0&&(Ca=256)),da=e}return da}function e1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Gr(""+e)}function t1(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function pm(e,n,s,h,x){if(n==="submit"&&s&&s.stateNode===x){var w=e1((x[It]||null).action),T=h.submitter;T&&(n=(n=T[It]||null)?e1(n.formAction):T.getAttribute("formAction"),n!==null&&(w=n,T=null));var M=new An("action","action",null,h,x);e.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(da!==0){var P=T?t1(x,T):new FormData(x);Pu(s,{pending:!0,data:P,method:x.method,action:w},null,P)}}else typeof w=="function"&&(M.preventDefault(),P=T?t1(x,T):new FormData(x),Pu(s,{pending:!0,data:P,method:x.method,action:w},w,P))},currentTarget:x}]})}}for(var bh=0;bh<pl.length;bh++){var Eh=pl[bh],xm=Eh.toLowerCase(),ym=Eh[0].toUpperCase()+Eh.slice(1);Gi(xm,"on"+ym)}Gi(ei,"onAnimationEnd"),Gi(Dn,"onAnimationIteration"),Gi(Nt,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(_n,"onTransitionRun"),Gi(Yn,"onTransitionStart"),Gi(Kr,"onTransitionCancel"),Gi(xr,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),Ct("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ct("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ct("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ct("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ct("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ct("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function n1(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var h=e[s],x=h.event;h=h.listeners;e:{var w=void 0;if(n)for(var T=h.length-1;0<=T;T--){var M=h[T],P=M.instance,$=M.currentTarget;if(M=M.listener,P!==w&&x.isPropagationStopped())break e;w=M,x.currentTarget=$;try{w(x)}catch(he){Oo(he)}x.currentTarget=null,w=P}else for(T=0;T<h.length;T++){if(M=h[T],P=M.instance,$=M.currentTarget,M=M.listener,P!==w&&x.isPropagationStopped())break e;w=M,x.currentTarget=$;try{w(x)}catch(he){Oo(he)}x.currentTarget=null,w=P}}}}function ot(e,n){var s=n[Ur];s===void 0&&(s=n[Ur]=new Set);var h=e+"__bubble";s.has(h)||(i1(n,e,2,!1),s.add(h))}function Ah(e,n,s){var h=0;n&&(h|=4),i1(s,e,h,n)}var mc="_reactListening"+Math.random().toString(36).slice(2);function Sh(e){if(!e[mc]){e[mc]=!0,pe.forEach(function(s){s!=="selectionchange"&&(wm.has(s)||Ah(s,!1,e),Ah(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[mc]||(n[mc]=!0,Ah("selectionchange",!1,n))}}function i1(e,n,s,h){switch(D1(n)){case 2:var x=Xm;break;case 8:x=Wm;break;default:x=zh}s=x.bind(null,n,s,e),x=void 0,!cl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(x=!0),h?x!==void 0?e.addEventListener(n,s,{capture:!0,passive:x}):e.addEventListener(n,s,!0):x!==void 0?e.addEventListener(n,s,{passive:x}):e.addEventListener(n,s,!1)}function _h(e,n,s,h,x){var w=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var M=h.stateNode.containerInfo;if(M===x)break;if(T===4)for(T=h.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;M!==null;){if(T=en(M),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){h=w=T;continue e}M=M.parentNode}}h=h.return}yo(function(){var $=w,he=ol(s),ge=[];e:{var te=No.get(e);if(te!==void 0){var oe=An,De=e;switch(e){case"keypress":if(tr(s)===0)break e;case"keydown":case"keyup":oe=fs;break;case"focusin":De="focus",oe=fl;break;case"focusout":De="blur",oe=fl;break;case"beforeblur":case"afterblur":oe=fl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=St;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=us;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=tu;break;case ei:case Dn:case Nt:oe=tt;break;case xr:oe=dr;break;case"scroll":case"scrollend":oe=wo;break;case"wheel":oe=nu;break;case"copy":case"cut":case"paste":oe=hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Tt;break;case"toggle":case"beforetoggle":oe=gl}var He=(n&4)!==0,jt=!He&&(e==="scroll"||e==="scrollend"),q=He?te!==null?te+"Capture":null:te;He=[];for(var G=$,K;G!==null;){var de=G;if(K=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||K===null||q===null||(de=We(G,q),de!=null&&He.push(Fl(G,de,K))),jt)break;G=G.return}0<He.length&&(te=new oe(te,De,null,s,he),ge.push({event:te,listeners:He}))}}if((n&7)===0){e:{if(te=e==="mouseover"||e==="pointerover",oe=e==="mouseout"||e==="pointerout",te&&s!==Oa&&(De=s.relatedTarget||s.fromElement)&&(en(De)||De[li]))break e;if((oe||te)&&(te=he.window===he?he:(te=he.ownerDocument)?te.defaultView||te.parentWindow:window,oe?(De=s.relatedTarget||s.toElement,oe=$,De=De?en(De):null,De!==null&&(jt=g(De),He=De.tag,De!==jt||He!==5&&He!==27&&He!==6)&&(De=null)):(oe=null,De=$),oe!==De)){if(He=St,de="onMouseLeave",q="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(He=Tt,de="onPointerLeave",q="onPointerEnter",G="pointer"),jt=oe==null?te:zr(oe),K=De==null?te:zr(De),te=new He(de,G+"leave",oe,s,he),te.target=jt,te.relatedTarget=K,de=null,en(he)===$&&(He=new He(q,G+"enter",De,s,he),He.target=K,He.relatedTarget=jt,de=He),jt=de,oe&&De)t:{for(He=vm,q=oe,G=De,K=0,de=q;de;de=He(de))K++;de=0;for(var ze=G;ze;ze=He(ze))de++;for(;0<K-de;)q=He(q),K--;for(;0<de-K;)G=He(G),de--;for(;K--;){if(q===G||G!==null&&q===G.alternate){He=q;break t}q=He(q),G=He(G)}He=null}else He=null;oe!==null&&r1(ge,te,oe,He,!1),De!==null&&jt!==null&&r1(ge,jt,De,He,!0)}}e:{if(te=$?zr($):window,oe=te.nodeName&&te.nodeName.toLowerCase(),oe==="select"||oe==="input"&&te.type==="file")var bt=fi;else if(ml(te))if(To)bt=c;else{bt=i;var Be=t}else oe=te.nodeName,!oe||oe.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?$&&zt($.elementType)&&(bt=fi):bt=a;if(bt&&(bt=bt(e,$))){hi(ge,bt,s,he);break e}Be&&Be(e,te,$),e==="focusout"&&$&&te.type==="number"&&$.memoizedProps.value!=null&&L(te,"number",te.value)}switch(Be=$?zr($):window,e){case"focusin":(ml(Be)||Be.contentEditable==="true")&&(F=Be,H=$,X=null);break;case"focusout":X=H=F=null;break;case"mousedown":re=!0;break;case"contextmenu":case"mouseup":case"dragend":re=!1,ve(ge,s,he);break;case"selectionchange":if(j)break;case"keydown":case"keyup":ve(ge,s,he)}var nt;if(Da)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Qr?Co(e,s)&&(dt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(dt="onCompositionStart");dt&&(_o&&s.locale!=="ko"&&(Qr||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Qr&&(nt=qr()):(Hi=he,Vi="value"in Hi?Hi.value:Hi.textContent,Qr=!0)),Be=pc($,dt),0<Be.length&&(dt=new Eo(dt,e,null,s,he),ge.push({event:dt,listeners:Be}),nt?dt.data=nt:(nt=Zr(s),nt!==null&&(dt.data=nt)))),(nt=So?rr(e,s):gs(e,s))&&(dt=pc($,"onBeforeInput"),0<dt.length&&(Be=new Eo("onBeforeInput","beforeinput",null,s,he),ge.push({event:Be,listeners:dt}),Be.data=nt)),pm(ge,e,$,s,he)}n1(ge,n)})}function Fl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function pc(e,n){for(var s=n+"Capture",h=[];e!==null;){var x=e,w=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||w===null||(x=We(e,s),x!=null&&h.unshift(Fl(e,x,w)),x=We(e,n),x!=null&&h.push(Fl(e,x,w))),e.tag===3)return h;e=e.return}return[]}function vm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function r1(e,n,s,h,x){for(var w=n._reactName,T=[];s!==null&&s!==h;){var M=s,P=M.alternate,$=M.stateNode;if(M=M.tag,P!==null&&P===h)break;M!==5&&M!==26&&M!==27||$===null||(P=$,x?($=We(s,w),$!=null&&T.unshift(Fl(s,$,P))):x||($=We(s,w),$!=null&&T.push(Fl(s,$,P)))),s=s.return}T.length!==0&&e.push({event:n,listeners:T})}var bm=/\r\n?/g,Em=/\u0000|\uFFFD/g;function a1(e){return(typeof e=="string"?e:""+e).replace(bm,`
`).replace(Em,"")}function s1(e,n){return n=a1(n),a1(e)===n}function kt(e,n,s,h,x,w){switch(s){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||Vr(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&Vr(e,""+h);break;case"className":Fr(e,"class",h);break;case"tabIndex":Fr(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Fr(e,s,h);break;case"style":je(e,h,w);break;case"data":if(n!=="object"){Fr(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=Gr(""+h),e.setAttribute(s,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(s==="formAction"?(n!=="input"&&kt(e,n,"name",x.name,x,null),kt(e,n,"formEncType",x.formEncType,x,null),kt(e,n,"formMethod",x.formMethod,x,null),kt(e,n,"formTarget",x.formTarget,x,null)):(kt(e,n,"encType",x.encType,x,null),kt(e,n,"method",x.method,x,null),kt(e,n,"target",x.target,x,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=Gr(""+h),e.setAttribute(s,h);break;case"onClick":h!=null&&(e.onclick=Jn);break;case"onScroll":h!=null&&ot("scroll",e);break;case"onScrollEnd":h!=null&&ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(f(61));if(s=h.__html,s!=null){if(x.children!=null)throw Error(f(60));e.innerHTML=s}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}s=Gr(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""+h):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":h===!0?e.setAttribute(s,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,h):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(s,h):e.removeAttribute(s);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(s):e.setAttribute(s,h);break;case"popover":ot("beforetoggle",e),ot("toggle",e),Pr(e,"popover",h);break;case"xlinkActuate":ci(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ci(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ci(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ci(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ci(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ci(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ci(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ci(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ci(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Pr(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=xo.get(s)||s,Pr(e,s,h))}}function Ch(e,n,s,h,x,w){switch(s){case"style":je(e,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(f(61));if(s=h.__html,s!=null){if(x.children!=null)throw Error(f(60));e.innerHTML=s}}break;case"children":typeof h=="string"?Vr(e,h):(typeof h=="number"||typeof h=="bigint")&&Vr(e,""+h);break;case"onScroll":h!=null&&ot("scroll",e);break;case"onScrollEnd":h!=null&&ot("scrollend",e);break;case"onClick":h!=null&&(e.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!po.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(x=s.endsWith("Capture"),n=s.slice(2,x?s.length-7:void 0),w=e[It]||null,w=w!=null?w[s]:null,typeof w=="function"&&e.removeEventListener(n,w,x),typeof h=="function")){typeof w!="function"&&w!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,h,x);break e}s in e?e[s]=h:h===!0?e.setAttribute(s,""):Pr(e,s,h)}}}function kn(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",e),ot("load",e);var h=!1,x=!1,w;for(w in s)if(s.hasOwnProperty(w)){var T=s[w];if(T!=null)switch(w){case"src":h=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,n));default:kt(e,n,w,T,s,null)}}x&&kt(e,n,"srcSet",s.srcSet,s,null),h&&kt(e,n,"src",s.src,s,null);return;case"input":ot("invalid",e);var M=w=T=x=null,P=null,$=null;for(h in s)if(s.hasOwnProperty(h)){var he=s[h];if(he!=null)switch(h){case"name":x=he;break;case"type":T=he;break;case"checked":P=he;break;case"defaultChecked":$=he;break;case"value":w=he;break;case"defaultValue":M=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(f(137,n));break;default:kt(e,n,h,he,s,null)}}W(e,w,M,P,$,T,x,!1);return;case"select":ot("invalid",e),h=T=w=null;for(x in s)if(s.hasOwnProperty(x)&&(M=s[x],M!=null))switch(x){case"value":w=M;break;case"defaultValue":T=M;break;case"multiple":h=M;default:kt(e,n,x,M,s,null)}n=w,s=T,e.multiple=!!h,n!=null?Me(e,!!h,n,!1):s!=null&&Me(e,!!h,s,!0);return;case"textarea":ot("invalid",e),w=x=h=null;for(T in s)if(s.hasOwnProperty(T)&&(M=s[T],M!=null))switch(T){case"value":h=M;break;case"defaultValue":x=M;break;case"children":w=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(f(91));break;default:kt(e,n,T,M,s,null)}Gn(e,h,x,w);return;case"option":for(P in s)s.hasOwnProperty(P)&&(h=s[P],h!=null)&&(P==="selected"?e.selected=h&&typeof h!="function"&&typeof h!="symbol":kt(e,n,P,h,s,null));return;case"dialog":ot("beforetoggle",e),ot("toggle",e),ot("cancel",e),ot("close",e);break;case"iframe":case"object":ot("load",e);break;case"video":case"audio":for(h=0;h<Pl.length;h++)ot(Pl[h],e);break;case"image":ot("error",e),ot("load",e);break;case"details":ot("toggle",e);break;case"embed":case"source":case"link":ot("error",e),ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in s)if(s.hasOwnProperty($)&&(h=s[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,n));default:kt(e,n,$,h,s,null)}return;default:if(zt(n)){for(he in s)s.hasOwnProperty(he)&&(h=s[he],h!==void 0&&Ch(e,n,he,h,s,void 0));return}}for(M in s)s.hasOwnProperty(M)&&(h=s[M],h!=null&&kt(e,n,M,h,s,null))}function Am(e,n,s,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,w=null,T=null,M=null,P=null,$=null,he=null;for(oe in s){var ge=s[oe];if(s.hasOwnProperty(oe)&&ge!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":P=ge;default:h.hasOwnProperty(oe)||kt(e,n,oe,null,h,ge)}}for(var te in h){var oe=h[te];if(ge=s[te],h.hasOwnProperty(te)&&(oe!=null||ge!=null))switch(te){case"type":w=oe;break;case"name":x=oe;break;case"checked":$=oe;break;case"defaultChecked":he=oe;break;case"value":T=oe;break;case"defaultValue":M=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(f(137,n));break;default:oe!==ge&&kt(e,n,te,oe,h,ge)}}dn(e,T,M,P,$,he,w,x);return;case"select":oe=T=M=te=null;for(w in s)if(P=s[w],s.hasOwnProperty(w)&&P!=null)switch(w){case"value":break;case"multiple":oe=P;default:h.hasOwnProperty(w)||kt(e,n,w,null,h,P)}for(x in h)if(w=h[x],P=s[x],h.hasOwnProperty(x)&&(w!=null||P!=null))switch(x){case"value":te=w;break;case"defaultValue":M=w;break;case"multiple":T=w;default:w!==P&&kt(e,n,x,w,h,P)}n=M,s=T,h=oe,te!=null?Me(e,!!s,te,!1):!!h!=!!s&&(n!=null?Me(e,!!s,n,!0):Me(e,!!s,s?[]:"",!1));return;case"textarea":oe=te=null;for(M in s)if(x=s[M],s.hasOwnProperty(M)&&x!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:kt(e,n,M,null,h,x)}for(T in h)if(x=h[T],w=s[T],h.hasOwnProperty(T)&&(x!=null||w!=null))switch(T){case"value":te=x;break;case"defaultValue":oe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(f(91));break;default:x!==w&&kt(e,n,T,x,h,w)}cn(e,te,oe);return;case"option":for(var De in s)te=s[De],s.hasOwnProperty(De)&&te!=null&&!h.hasOwnProperty(De)&&(De==="selected"?e.selected=!1:kt(e,n,De,null,h,te));for(P in h)te=h[P],oe=s[P],h.hasOwnProperty(P)&&te!==oe&&(te!=null||oe!=null)&&(P==="selected"?e.selected=te&&typeof te!="function"&&typeof te!="symbol":kt(e,n,P,te,h,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in s)te=s[He],s.hasOwnProperty(He)&&te!=null&&!h.hasOwnProperty(He)&&kt(e,n,He,null,h,te);for($ in h)if(te=h[$],oe=s[$],h.hasOwnProperty($)&&te!==oe&&(te!=null||oe!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(f(137,n));break;default:kt(e,n,$,te,h,oe)}return;default:if(zt(n)){for(var jt in s)te=s[jt],s.hasOwnProperty(jt)&&te!==void 0&&!h.hasOwnProperty(jt)&&Ch(e,n,jt,void 0,h,te);for(he in h)te=h[he],oe=s[he],!h.hasOwnProperty(he)||te===oe||te===void 0&&oe===void 0||Ch(e,n,he,te,h,oe);return}}for(var q in s)te=s[q],s.hasOwnProperty(q)&&te!=null&&!h.hasOwnProperty(q)&&kt(e,n,q,null,h,te);for(ge in h)te=h[ge],oe=s[ge],!h.hasOwnProperty(ge)||te===oe||te==null&&oe==null||kt(e,n,ge,te,h,oe)}function l1(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Sm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),h=0;h<s.length;h++){var x=s[h],w=x.transferSize,T=x.initiatorType,M=x.duration;if(w&&M&&l1(T)){for(T=0,M=x.responseEnd,h+=1;h<s.length;h++){var P=s[h],$=P.startTime;if($>M)break;var he=P.transferSize,ge=P.initiatorType;he&&l1(ge)&&(P=P.responseEnd,T+=he*(P<M?1:(M-$)/(P-$)))}if(--h,n+=8*(w+T)/(x.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Th=null,Nh=null;function xc(e){return e.nodeType===9?e:e.ownerDocument}function o1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c1(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Oh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ih=null;function _m(){var e=window.event;return e&&e.type==="popstate"?e===Ih?!1:(Ih=e,!0):(Ih=null,!1)}var u1=typeof setTimeout=="function"?setTimeout:void 0,Cm=typeof clearTimeout=="function"?clearTimeout:void 0,h1=typeof Promise=="function"?Promise:void 0,Tm=typeof queueMicrotask=="function"?queueMicrotask:typeof h1<"u"?function(e){return h1.resolve(null).then(e).catch(Nm)}:u1;function Nm(e){setTimeout(function(){throw e})}function ga(e){return e==="head"}function f1(e,n){var s=n,h=0;do{var x=s.nextSibling;if(e.removeChild(s),x&&x.nodeType===8)if(s=x.data,s==="/$"||s==="/&"){if(h===0){e.removeChild(x),Ps(n);return}h--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")h++;else if(s==="html")Hl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Hl(s);for(var w=s.firstChild;w;){var T=w.nextSibling,M=w.nodeName;w[Na]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=T}}else s==="body"&&Hl(e.ownerDocument.body);s=x}while(s);Ps(n)}function d1(e,n){var s=e;e=0;do{var h=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=h}while(s)}function Rh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Rh(s),Kn(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Om(e,n,s,h){for(;e.nodeType===1;){var x=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[Na])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==x.rel||e.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||e.getAttribute("title")!==(x.title==null?null:x.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(x.src==null?null:x.src)||e.getAttribute("type")!==(x.type==null?null:x.type)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var w=x.name==null?null:""+x.name;if(x.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=Li(e.nextSibling),e===null)break}return null}function Im(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Li(e.nextSibling),e===null))return null;return e}function g1(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Li(e.nextSibling),e===null))return null;return e}function Dh(e){return e.data==="$?"||e.data==="$~"}function Mh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Rm(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var h=function(){n(),s.removeEventListener("DOMContentLoaded",h)};s.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function Li(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Bh=null;function m1(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Li(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function p1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function x1(e,n,s){switch(n=xc(s),e){case"html":if(e=n.documentElement,!e)throw Error(f(452));return e;case"head":if(e=n.head,!e)throw Error(f(453));return e;case"body":if(e=n.body,!e)throw Error(f(454));return e;default:throw Error(f(451))}}function Hl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Kn(e)}var ki=new Map,y1=new Set;function yc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Dr=fe.d;fe.d={f:Dm,r:Mm,D:Bm,C:Lm,L:km,m:jm,X:zm,S:Um,M:Pm};function Dm(){var e=Dr.f(),n=cc();return e||n}function Mm(e){var n=At(e);n!==null&&n.tag===5&&n.type==="form"?Ld(n):Dr.r(e)}var js=typeof document>"u"?null:document;function w1(e,n,s){var h=js;if(h&&typeof n=="string"&&n){var x=rt(n);x='link[rel="'+e+'"][href="'+x+'"]',typeof s=="string"&&(x+='[crossorigin="'+s+'"]'),y1.has(x)||(y1.add(x),e={rel:e,crossOrigin:s,href:n},h.querySelector(x)===null&&(n=h.createElement("link"),kn(n,"link",e),tn(n),h.head.appendChild(n)))}}function Bm(e){Dr.D(e),w1("dns-prefetch",e,null)}function Lm(e,n){Dr.C(e,n),w1("preconnect",e,n)}function km(e,n,s){Dr.L(e,n,s);var h=js;if(h&&e&&n){var x='link[rel="preload"][as="'+rt(n)+'"]';n==="image"&&s&&s.imageSrcSet?(x+='[imagesrcset="'+rt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(x+='[imagesizes="'+rt(s.imageSizes)+'"]')):x+='[href="'+rt(e)+'"]';var w=x;switch(n){case"style":w=Us(e);break;case"script":w=zs(e)}ki.has(w)||(e=O({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),ki.set(w,e),h.querySelector(x)!==null||n==="style"&&h.querySelector(Vl(w))||n==="script"&&h.querySelector(Gl(w))||(n=h.createElement("link"),kn(n,"link",e),tn(n),h.head.appendChild(n)))}}function jm(e,n){Dr.m(e,n);var s=js;if(s&&e){var h=n&&typeof n.as=="string"?n.as:"script",x='link[rel="modulepreload"][as="'+rt(h)+'"][href="'+rt(e)+'"]',w=x;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=zs(e)}if(!ki.has(w)&&(e=O({rel:"modulepreload",href:e},n),ki.set(w,e),s.querySelector(x)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Gl(w)))return}h=s.createElement("link"),kn(h,"link",e),tn(h),s.head.appendChild(h)}}}function Um(e,n,s){Dr.S(e,n,s);var h=js;if(h&&e){var x=Vn(h).hoistableStyles,w=Us(e);n=n||"default";var T=x.get(w);if(!T){var M={loading:0,preload:null};if(T=h.querySelector(Vl(w)))M.loading=5;else{e=O({rel:"stylesheet",href:e,"data-precedence":n},s),(s=ki.get(w))&&Lh(e,s);var P=T=h.createElement("link");tn(P),kn(P,"link",e),P._p=new Promise(function($,he){P.onload=$,P.onerror=he}),P.addEventListener("load",function(){M.loading|=1}),P.addEventListener("error",function(){M.loading|=2}),M.loading|=4,wc(T,n,h)}T={type:"stylesheet",instance:T,count:1,state:M},x.set(w,T)}}}function zm(e,n){Dr.X(e,n);var s=js;if(s&&e){var h=Vn(s).hoistableScripts,x=zs(e),w=h.get(x);w||(w=s.querySelector(Gl(x)),w||(e=O({src:e,async:!0},n),(n=ki.get(x))&&kh(e,n),w=s.createElement("script"),tn(w),kn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(x,w))}}function Pm(e,n){Dr.M(e,n);var s=js;if(s&&e){var h=Vn(s).hoistableScripts,x=zs(e),w=h.get(x);w||(w=s.querySelector(Gl(x)),w||(e=O({src:e,async:!0,type:"module"},n),(n=ki.get(x))&&kh(e,n),w=s.createElement("script"),tn(w),kn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(x,w))}}function v1(e,n,s,h){var x=(x=Ee.current)?yc(x):null;if(!x)throw Error(f(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Us(s.href),s=Vn(x).hoistableStyles,h=s.get(n),h||(h={type:"style",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Us(s.href);var w=Vn(x).hoistableStyles,T=w.get(e);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,T),(w=x.querySelector(Vl(e)))&&!w._p&&(T.instance=w,T.state.loading=5),ki.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ki.set(e,s),w||Fm(x,e,s,T.state))),n&&h===null)throw Error(f(528,""));return T}if(n&&h!==null)throw Error(f(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=zs(s),s=Vn(x).hoistableScripts,h=s.get(n),h||(h={type:"script",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,e))}}function Us(e){return'href="'+rt(e)+'"'}function Vl(e){return'link[rel="stylesheet"]['+e+"]"}function b1(e){return O({},e,{"data-precedence":e.precedence,precedence:null})}function Fm(e,n,s,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),kn(n,"link",s),tn(n),e.head.appendChild(n))}function zs(e){return'[src="'+rt(e)+'"]'}function Gl(e){return"script[async]"+e}function E1(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+rt(s.href)+'"]');if(h)return n.instance=h,tn(h),h;var x=O({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),tn(h),kn(h,"style",x),wc(h,s.precedence,e),n.instance=h;case"stylesheet":x=Us(s.href);var w=e.querySelector(Vl(x));if(w)return n.state.loading|=4,n.instance=w,tn(w),w;h=b1(s),(x=ki.get(x))&&Lh(h,x),w=(e.ownerDocument||e).createElement("link"),tn(w);var T=w;return T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),kn(w,"link",h),n.state.loading|=4,wc(w,s.precedence,e),n.instance=w;case"script":return w=zs(s.src),(x=e.querySelector(Gl(w)))?(n.instance=x,tn(x),x):(h=s,(x=ki.get(w))&&(h=O({},s),kh(h,x)),e=e.ownerDocument||e,x=e.createElement("script"),tn(x),kn(x,"link",h),e.head.appendChild(x),n.instance=x);case"void":return null;default:throw Error(f(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,wc(h,s.precedence,e));return n.instance}function wc(e,n,s){for(var h=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=h.length?h[h.length-1]:null,w=x,T=0;T<h.length;T++){var M=h[T];if(M.dataset.precedence===n)w=M;else if(w!==x)break}w?w.parentNode.insertBefore(e,w.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function Lh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function kh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var vc=null;function A1(e,n,s){if(vc===null){var h=new Map,x=vc=new Map;x.set(s,h)}else x=vc,h=x.get(s),h||(h=new Map,x.set(s,h));if(h.has(e))return h;for(h.set(e,null),s=s.getElementsByTagName(e),x=0;x<s.length;x++){var w=s[x];if(!(w[Na]||w[on]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var T=w.getAttribute(n)||"";T=e+T;var M=h.get(T);M?M.push(w):h.set(T,[w])}}return h}function S1(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function Hm(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function _1(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Vm(e,n,s,h){if(s.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var x=Us(h.href),w=n.querySelector(Vl(x));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=bc.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=w,tn(w);return}w=n.ownerDocument||n,h=b1(h),(x=ki.get(x))&&Lh(h,x),w=w.createElement("link"),tn(w);var T=w;T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),kn(w,"link",h),s.instance=w}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=bc.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var jh=0;function Gm(e,n){return e.stylesheets&&e.count===0&&Ac(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var h=setTimeout(function(){if(e.stylesheets&&Ac(e,e.stylesheets),e.unsuspend){var w=e.unsuspend;e.unsuspend=null,w()}},6e4+n);0<e.imgBytes&&jh===0&&(jh=62500*Sm());var x=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ac(e,e.stylesheets),e.unsuspend)){var w=e.unsuspend;e.unsuspend=null,w()}},(e.imgBytes>jh?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(h),clearTimeout(x)}}:null}function bc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ac(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ec=null;function Ac(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ec=new Map,n.forEach(qm,e),Ec=null,bc.call(e))}function qm(e,n){if(!(n.state.loading&4)){var s=Ec.get(e);if(s)var h=s.get(null);else{s=new Map,Ec.set(e,s);for(var x=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<x.length;w++){var T=x[w];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(s.set(T.dataset.precedence,T),h=T)}h&&s.set(null,h)}x=n.instance,T=x.getAttribute("data-precedence"),w=s.get(T)||h,w===h&&s.set(null,x),s.set(T,x),this.count++,h=bc.bind(this),x.addEventListener("load",h),x.addEventListener("error",h),w?w.parentNode.insertBefore(x,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(x,e.firstChild)),n.state.loading|=4}}var ql={$$typeof:Z,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function Ym(e,n,s,h,x,w,T,M,P){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=h,this.onUncaughtError=x,this.onCaughtError=w,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function C1(e,n,s,h,x,w,T,M,P,$,he,ge){return e=new Ym(e,n,s,T,P,$,he,ge,M),n=1,w===!0&&(n|=24),w=di(3,null,null,n),e.current=w,w.stateNode=e,n=pu(),n.refCount++,e.pooledCache=n,n.refCount++,w.memoizedState={element:h,isDehydrated:s,cache:n},vu(w),e}function T1(e){return e?(e=ps,e):ps}function N1(e,n,s,h,x,w){x=T1(x),h.context===null?h.context=x:h.pendingContext=x,h=ia(n),h.payload={element:s},w=w===void 0?null:w,w!==null&&(h.callback=w),s=ra(e,h,n),s!==null&&(ai(s,e,n),Al(s,e,n))}function O1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Uh(e,n){O1(e,n),(e=e.alternate)&&O1(e,n)}function I1(e){if(e.tag===13||e.tag===31){var n=ja(e,67108864);n!==null&&ai(n,e,67108864),Uh(e,67108864)}}function R1(e){if(e.tag===13||e.tag===31){var n=yi();n=Nn(n);var s=ja(e,n);s!==null&&ai(s,e,n),Uh(e,n)}}var Sc=!0;function Xm(e,n,s,h){var x=ee.T;ee.T=null;var w=fe.p;try{fe.p=2,zh(e,n,s,h)}finally{fe.p=w,ee.T=x}}function Wm(e,n,s,h){var x=ee.T;ee.T=null;var w=fe.p;try{fe.p=8,zh(e,n,s,h)}finally{fe.p=w,ee.T=x}}function zh(e,n,s,h){if(Sc){var x=Ph(h);if(x===null)_h(e,n,h,_c,s),M1(e,h);else if(Qm(x,e,n,s,h))h.stopPropagation();else if(M1(e,h),n&4&&-1<Zm.indexOf(e)){for(;x!==null;){var w=At(x);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var T=Ki(w.pendingLanes);if(T!==0){var M=w;for(M.pendingLanes|=2,M.entangledLanes|=2;T;){var P=1<<31-et(T);M.entanglements[1]|=P,T&=~P}or(w),(_t&6)===0&&(lc=Jt()+500,zl(0))}}break;case 31:case 13:M=ja(w,2),M!==null&&ai(M,w,2),cc(),Uh(w,2)}if(w=Ph(h),w===null&&_h(e,n,h,_c,s),w===x)break;x=w}x!==null&&h.stopPropagation()}else _h(e,n,h,null,s)}}function Ph(e){return e=ol(e),Fh(e)}var _c=null;function Fh(e){if(_c=null,e=en(e),e!==null){var n=g(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=b(n),e!==null)return e;e=null}else if(s===31){if(e=S(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return _c=e,null}function D1(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nl()){case Qn:return 2;case il:return 8;case si:case In:return 32;case rl:return 268435456;default:return 32}default:return 32}}var Hh=!1,ma=null,pa=null,xa=null,Yl=new Map,Xl=new Map,ya=[],Zm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M1(e,n){switch(e){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Yl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(n.pointerId)}}function Wl(e,n,s,h,x,w){return e===null||e.nativeEvent!==w?(e={blockedOn:n,domEventName:s,eventSystemFlags:h,nativeEvent:w,targetContainers:[x]},n!==null&&(n=At(n),n!==null&&I1(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,x!==null&&n.indexOf(x)===-1&&n.push(x),e)}function Qm(e,n,s,h,x){switch(n){case"focusin":return ma=Wl(ma,e,n,s,h,x),!0;case"dragenter":return pa=Wl(pa,e,n,s,h,x),!0;case"mouseover":return xa=Wl(xa,e,n,s,h,x),!0;case"pointerover":var w=x.pointerId;return Yl.set(w,Wl(Yl.get(w)||null,e,n,s,h,x)),!0;case"gotpointercapture":return w=x.pointerId,Xl.set(w,Wl(Xl.get(w)||null,e,n,s,h,x)),!0}return!1}function B1(e){var n=en(e.target);if(n!==null){var s=g(n);if(s!==null){if(n=s.tag,n===13){if(n=b(s),n!==null){e.blockedOn=n,Te(e.priority,function(){R1(s)});return}}else if(n===31){if(n=S(s),n!==null){e.blockedOn=n,Te(e.priority,function(){R1(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Ph(e.nativeEvent);if(s===null){s=e.nativeEvent;var h=new s.constructor(s.type,s);Oa=h,s.target.dispatchEvent(h),Oa=null}else return n=At(s),n!==null&&I1(n),e.blockedOn=s,!1;n.shift()}return!0}function L1(e,n,s){Cc(e)&&s.delete(n)}function Km(){Hh=!1,ma!==null&&Cc(ma)&&(ma=null),pa!==null&&Cc(pa)&&(pa=null),xa!==null&&Cc(xa)&&(xa=null),Yl.forEach(L1),Xl.forEach(L1)}function Tc(e,n){e.blockedOn===n&&(e.blockedOn=null,Hh||(Hh=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Km)))}var Nc=null;function k1(e){Nc!==e&&(Nc=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Nc===e&&(Nc=null);for(var n=0;n<e.length;n+=3){var s=e[n],h=e[n+1],x=e[n+2];if(typeof h!="function"){if(Fh(h||s)===null)continue;break}var w=At(s);w!==null&&(e.splice(n,3),n-=3,Pu(w,{pending:!0,data:x,method:s.method,action:h},h,x))}}))}function Ps(e){function n(P){return Tc(P,e)}ma!==null&&Tc(ma,e),pa!==null&&Tc(pa,e),xa!==null&&Tc(xa,e),Yl.forEach(n),Xl.forEach(n);for(var s=0;s<ya.length;s++){var h=ya[s];h.blockedOn===e&&(h.blockedOn=null)}for(;0<ya.length&&(s=ya[0],s.blockedOn===null);)B1(s),s.blockedOn===null&&ya.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(h=0;h<s.length;h+=3){var x=s[h],w=s[h+1],T=x[It]||null;if(typeof w=="function")T||k1(s);else if(T){var M=null;if(w&&w.hasAttribute("formAction")){if(x=w,T=w[It]||null)M=T.formAction;else if(Fh(x)!==null)continue}else M=T.action;typeof M=="function"?s[h+1]=M:(s.splice(h,3),h-=3),k1(s)}}}function j1(){function e(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(T){return x=T})},focusReset:"manual",scroll:"manual"})}function n(){x!==null&&(x(),x=null),h||setTimeout(s,20)}function s(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,x=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){h=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),x!==null&&(x(),x=null)}}}function Vh(e){this._internalRoot=e}Oc.prototype.render=Vh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(f(409));var s=n.current,h=yi();N1(s,h,e,n,null,null)},Oc.prototype.unmount=Vh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;N1(e.current,2,null,e,null,null),cc(),n[li]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Fn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<ya.length&&n!==0&&n<ya[s].priority;s++);ya.splice(s,0,e),s===0&&B1(e)}};var U1=r.version;if(U1!=="19.2.4")throw Error(f(527,U1,"19.2.4"));fe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(f(188)):(e=Object.keys(e).join(","),Error(f(268,e)));return e=v(n),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var Jm={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{Vt=Ic.inject(Jm),be=Ic}catch{}}return Ql.createRoot=function(e,n){if(!p(e))throw Error(f(299));var s=!1,h="",x=qd,w=Yd,T=Xd;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=C1(e,1,!1,null,null,s,h,null,x,w,T,j1),e[li]=n.current,Sh(e),new Vh(n)},Ql.hydrateRoot=function(e,n,s){if(!p(e))throw Error(f(299));var h=!1,x="",w=qd,T=Yd,M=Xd,P=null;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(x=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(M=s.onRecoverableError),s.formState!==void 0&&(P=s.formState)),n=C1(e,1,!0,n,s??null,h,x,P,w,T,M,j1),n.context=T1(null),s=n.current,h=yi(),h=Nn(h),x=ia(h),x.callback=null,ra(s,x,h),s=h,n.current.lanes=s,$i(n,s),or(n),e[li]=n.current,Sh(e),new Oc(n)},Ql.version="19.2.4",Ql}var W1;function cp(){if(W1)return Yh.exports;W1=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Yh.exports=op(),Yh.exports}var up=cp();function Gc(o,r){var l={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&r.indexOf(f)<0&&(l[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,f=Object.getOwnPropertySymbols(o);p<f.length;p++)r.indexOf(f[p])<0&&Object.prototype.propertyIsEnumerable.call(o,f[p])&&(l[f[p]]=o[f[p]]);return l}function hp(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})}const fp=o=>o?(...r)=>o(...r):(...r)=>fetch(...r);class Tf extends Error{constructor(r,l="FunctionsError",f){super(r),this.name=l,this.context=f}}class dp extends Tf{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Z1 extends Tf{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Q1 extends Tf{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var pf;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(pf||(pf={}));class gp{constructor(r,{headers:l={},customFetch:f,region:p=pf.Any}={}){this.url=r,this.headers=l,this.region=p,this.fetch=fp(f)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return hp(this,arguments,void 0,function*(l,f={}){var p;let g,b;try{const{headers:S,method:_,body:v,signal:N,timeout:O}=f;let B={},{region:k}=f;k||(k=this.region);const z=new URL(`${this.url}/${l}`);k&&k!=="any"&&(B["x-region"]=k,z.searchParams.set("forceFunctionRegion",k));let U;v&&(S&&!Object.prototype.hasOwnProperty.call(S,"Content-Type")||!S)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(B["Content-Type"]="application/octet-stream",U=v):typeof v=="string"?(B["Content-Type"]="text/plain",U=v):typeof FormData<"u"&&v instanceof FormData?U=v:(B["Content-Type"]="application/json",U=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?U=JSON.stringify(v):U=v;let Y=N;O&&(b=new AbortController,g=setTimeout(()=>b.abort(),O),N?(Y=b.signal,N.addEventListener("abort",()=>b.abort())):Y=b.signal);const J=yield this.fetch(z.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},B),this.headers),S),body:U,signal:Y}).catch(Ce=>{throw new dp(Ce)}),ae=J.headers.get("x-relay-error");if(ae&&ae==="true")throw new Z1(J);if(!J.ok)throw new Q1(J);let Z=((p=J.headers.get("Content-Type"))!==null&&p!==void 0?p:"text/plain").split(";")[0].trim(),ce;return Z==="application/json"?ce=yield J.json():Z==="application/octet-stream"||Z==="application/pdf"?ce=yield J.blob():Z==="text/event-stream"?ce=J:Z==="multipart/form-data"?ce=yield J.formData():ce=yield J.text(),{data:ce,error:null,response:J}}catch(S){return{data:null,error:S,response:S instanceof Q1||S instanceof Z1?S.context:void 0}}finally{g&&clearTimeout(g)}})}}var mp=class extends Error{constructor(o){super(o.message),this.name="PostgrestError",this.details=o.details,this.hint=o.hint,this.code=o.code}},pp=class{constructor(o){var r,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(r=o.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,r){return this.headers=new Headers(this.headers),this.headers.set(o,r),this}then(o,r){var l=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let p=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{let b=null,S=null,_=null,v=g.status,N=g.statusText;if(g.ok){var O,B;if(l.method!=="HEAD"){var k;const J=await g.text();J===""||(l.headers.get("Accept")==="text/csv"||l.headers.get("Accept")&&(!((k=l.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?S=J:S=JSON.parse(J))}const U=(O=l.headers.get("Prefer"))===null||O===void 0?void 0:O.match(/count=(exact|planned|estimated)/),Y=(B=g.headers.get("content-range"))===null||B===void 0?void 0:B.split("/");U&&Y&&Y.length>1&&(_=parseInt(Y[1])),l.isMaybeSingle&&l.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,v=406,N="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{var z;const U=await g.text();try{b=JSON.parse(U),Array.isArray(b)&&g.status===404&&(S=[],b=null,v=200,N="OK")}catch{g.status===404&&U===""?(v=204,N="No Content"):b={message:U}}if(b&&l.isMaybeSingle&&(!(b==null||(z=b.details)===null||z===void 0)&&z.includes("0 rows"))&&(b=null,v=200,N="OK"),b&&l.shouldThrowOnError)throw new mp(b)}return{error:b,data:S,count:_,status:v,statusText:N}});return this.shouldThrowOnError||(p=p.catch(g=>{var b;let S="";const _=g?.cause;if(_){var v,N,O,B;const z=(v=_?.message)!==null&&v!==void 0?v:"",U=(N=_?.code)!==null&&N!==void 0?N:"";S=`${(O=g?.name)!==null&&O!==void 0?O:"FetchError"}: ${g?.message}`,S+=`

Caused by: ${(B=_?.name)!==null&&B!==void 0?B:"Error"}: ${z}`,U&&(S+=` (${U})`),_?.stack&&(S+=`
${_.stack}`)}else{var k;S=(k=g?.stack)!==null&&k!==void 0?k:""}return{error:{message:`${(b=g?.name)!==null&&b!==void 0?b:"FetchError"}: ${g?.message}`,details:S,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(o,r)}returns(){return this}overrideTypes(){return this}},xp=class extends pp{select(o){let r=!1;const l=(o??"*").split("").map(f=>/\s/.test(f)&&!r?"":(f==='"'&&(r=!r),f)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:r=!0,nullsFirst:l,foreignTable:f,referencedTable:p=f}={}){const g=p?`${p}.order`:"order",b=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${b?`${b},`:""}${o}.${r?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:r,referencedTable:l=r}={}){const f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,r,{foreignTable:l,referencedTable:f=l}={}){const p=typeof f>"u"?"offset":`${f}.offset`,g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(g,`${r-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:r=!1,settings:l=!1,buffers:f=!1,wal:p=!1,format:g="text"}={}){var b;const S=[o?"analyze":null,r?"verbose":null,l?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${_}"; options=${S};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};const K1=new RegExp("[,()]");var Ws=class extends xp{eq(o,r){return this.url.searchParams.append(o,`eq.${r}`),this}neq(o,r){return this.url.searchParams.append(o,`neq.${r}`),this}gt(o,r){return this.url.searchParams.append(o,`gt.${r}`),this}gte(o,r){return this.url.searchParams.append(o,`gte.${r}`),this}lt(o,r){return this.url.searchParams.append(o,`lt.${r}`),this}lte(o,r){return this.url.searchParams.append(o,`lte.${r}`),this}like(o,r){return this.url.searchParams.append(o,`like.${r}`),this}likeAllOf(o,r){return this.url.searchParams.append(o,`like(all).{${r.join(",")}}`),this}likeAnyOf(o,r){return this.url.searchParams.append(o,`like(any).{${r.join(",")}}`),this}ilike(o,r){return this.url.searchParams.append(o,`ilike.${r}`),this}ilikeAllOf(o,r){return this.url.searchParams.append(o,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(o,r){return this.url.searchParams.append(o,`ilike(any).{${r.join(",")}}`),this}regexMatch(o,r){return this.url.searchParams.append(o,`match.${r}`),this}regexIMatch(o,r){return this.url.searchParams.append(o,`imatch.${r}`),this}is(o,r){return this.url.searchParams.append(o,`is.${r}`),this}isDistinct(o,r){return this.url.searchParams.append(o,`isdistinct.${r}`),this}in(o,r){const l=Array.from(new Set(r)).map(f=>typeof f=="string"&&K1.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}notIn(o,r){const l=Array.from(new Set(r)).map(f=>typeof f=="string"&&K1.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`not.in.(${l})`),this}contains(o,r){return typeof r=="string"?this.url.searchParams.append(o,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(o,`cs.{${r.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(r)}`),this}containedBy(o,r){return typeof r=="string"?this.url.searchParams.append(o,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(o,`cd.{${r.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(r)}`),this}rangeGt(o,r){return this.url.searchParams.append(o,`sr.${r}`),this}rangeGte(o,r){return this.url.searchParams.append(o,`nxl.${r}`),this}rangeLt(o,r){return this.url.searchParams.append(o,`sl.${r}`),this}rangeLte(o,r){return this.url.searchParams.append(o,`nxr.${r}`),this}rangeAdjacent(o,r){return this.url.searchParams.append(o,`adj.${r}`),this}overlaps(o,r){return typeof r=="string"?this.url.searchParams.append(o,`ov.${r}`):this.url.searchParams.append(o,`ov.{${r.join(",")}}`),this}textSearch(o,r,{config:l,type:f}={}){let p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");const g=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${p}fts${g}.${r}`),this}match(o){return Object.entries(o).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(o,r,l){return this.url.searchParams.append(o,`not.${r}.${l}`),this}or(o,{foreignTable:r,referencedTable:l=r}={}){const f=l?`${l}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,r,l){return this.url.searchParams.append(o,`${r}.${l}`),this}},yp=class{constructor(o,{headers:r={},schema:l,fetch:f}){this.url=o,this.headers=new Headers(r),this.schema=l,this.fetch=f}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(o,r){const{head:l=!1,count:f}=r??{},p=l?"HEAD":"GET";let g=!1;const b=(o??"*").split("").map(v=>/\s/.test(v)&&!g?"":(v==='"'&&(g=!g),v)).join(""),{url:S,headers:_}=this.cloneRequestState();return S.searchParams.set("select",b),f&&_.append("Prefer",`count=${f}`),new Ws({method:p,url:S,headers:_,schema:this.schema,fetch:this.fetch})}insert(o,{count:r,defaultToNull:l=!0}={}){var f;const p="POST",{url:g,headers:b}=this.cloneRequestState();if(r&&b.append("Prefer",`count=${r}`),l||b.append("Prefer","missing=default"),Array.isArray(o)){const S=o.reduce((_,v)=>_.concat(Object.keys(v)),[]);if(S.length>0){const _=[...new Set(S)].map(v=>`"${v}"`);g.searchParams.set("columns",_.join(","))}}return new Ws({method:p,url:g,headers:b,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:r,ignoreDuplicates:l=!1,count:f,defaultToNull:p=!0}={}){var g;const b="POST",{url:S,headers:_}=this.cloneRequestState();if(_.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),r!==void 0&&S.searchParams.set("on_conflict",r),f&&_.append("Prefer",`count=${f}`),p||_.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((N,O)=>N.concat(Object.keys(O)),[]);if(v.length>0){const N=[...new Set(v)].map(O=>`"${O}"`);S.searchParams.set("columns",N.join(","))}}return new Ws({method:b,url:S,headers:_,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:r}={}){var l;const f="PATCH",{url:p,headers:g}=this.cloneRequestState();return r&&g.append("Prefer",`count=${r}`),new Ws({method:f,url:p,headers:g,schema:this.schema,body:o,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:o}={}){var r;const l="DELETE",{url:f,headers:p}=this.cloneRequestState();return o&&p.append("Prefer",`count=${o}`),new Ws({method:l,url:f,headers:p,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},wp=class Jg{constructor(r,{headers:l={},schema:f,fetch:p}={}){this.url=r,this.headers=new Headers(l),this.schemaName=f,this.fetch=p}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new yp(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new Jg(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,l={},{head:f=!1,get:p=!1,count:g}={}){var b;let S;const _=new URL(`${this.url}/rpc/${r}`);let v;const N=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(N)),O=f&&Object.values(l).some(N);O?(S="POST",v=l):f||p?(S=f?"HEAD":"GET",Object.entries(l).filter(([k,z])=>z!==void 0).map(([k,z])=>[k,Array.isArray(z)?`{${z.join(",")}}`:`${z}`]).forEach(([k,z])=>{_.searchParams.append(k,z)})):(S="POST",v=l);const B=new Headers(this.headers);return O?B.set("Prefer",g?`count=${g},return=minimal`:"return=minimal"):g&&B.set("Prefer",`count=${g}`),new Ws({method:S,url:_,headers:B,schema:this.schemaName,body:v,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};class vp{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const l=globalThis.process;if(l){const f=l.versions;if(f&&f.node){const p=f.node,g=parseInt(p.replace(/^v/,"").split(".")[0]);return g>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${g} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${g} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let l=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(l+=`

Suggested solution: ${r.workaround}`),new Error(l)}static createWebSocket(r,l){const f=this.getWebSocketConstructor();return new f(r,l)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const bp="2.93.3",Ep=`realtime-js/${bp}`,Ap="1.0.0",$g="2.0.0",J1=$g,xf=1e4,Sp=1e3,_p=100;var ba;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(ba||(ba={}));var Tn;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Tn||(Tn={}));var Zi;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Zi||(Zi={}));var yf;(function(o){o.websocket="websocket"})(yf||(yf={}));var $a;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})($a||($a={}));class Cp{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,l){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return l(this._binaryEncodeUserBroadcastPush(r));let f=[r.join_ref,r.ref,r.topic,r.event,r.payload];return l(JSON.stringify(f))}_binaryEncodeUserBroadcastPush(r){var l;return this._isArrayBuffer((l=r.payload)===null||l===void 0?void 0:l.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var l,f;const p=(f=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&f!==void 0?f:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,p)}_encodeJsonUserBroadcastPush(r){var l,f;const p=(f=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&f!==void 0?f:{},b=new TextEncoder().encode(JSON.stringify(p)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,b)}_encodeUserBroadcastPush(r,l,f){var p,g;const b=r.topic,S=(p=r.ref)!==null&&p!==void 0?p:"",_=(g=r.join_ref)!==null&&g!==void 0?g:"",v=r.payload.event,N=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},O=Object.keys(N).length===0?"":JSON.stringify(N);if(_.length>255)throw new Error(`joinRef length ${_.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`ref length ${S.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`topic length ${b.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(O.length>255)throw new Error(`metadata length ${O.length} exceeds maximum of 255`);const B=this.USER_BROADCAST_PUSH_META_LENGTH+_.length+S.length+b.length+v.length+O.length,k=new ArrayBuffer(this.HEADER_LENGTH+B);let z=new DataView(k),U=0;z.setUint8(U++,this.KINDS.userBroadcastPush),z.setUint8(U++,_.length),z.setUint8(U++,S.length),z.setUint8(U++,b.length),z.setUint8(U++,v.length),z.setUint8(U++,O.length),z.setUint8(U++,l),Array.from(_,J=>z.setUint8(U++,J.charCodeAt(0))),Array.from(S,J=>z.setUint8(U++,J.charCodeAt(0))),Array.from(b,J=>z.setUint8(U++,J.charCodeAt(0))),Array.from(v,J=>z.setUint8(U++,J.charCodeAt(0))),Array.from(O,J=>z.setUint8(U++,J.charCodeAt(0)));var Y=new Uint8Array(k.byteLength+f.byteLength);return Y.set(new Uint8Array(k),0),Y.set(new Uint8Array(f),k.byteLength),Y.buffer}decode(r,l){if(this._isArrayBuffer(r)){let f=this._binaryDecode(r);return l(f)}if(typeof r=="string"){const f=JSON.parse(r),[p,g,b,S,_]=f;return l({join_ref:p,ref:g,topic:b,event:S,payload:_})}return l({})}_binaryDecode(r){const l=new DataView(r),f=l.getUint8(0),p=new TextDecoder;if(f===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,l,p)}_decodeUserBroadcast(r,l,f){const p=l.getUint8(1),g=l.getUint8(2),b=l.getUint8(3),S=l.getUint8(4);let _=this.HEADER_LENGTH+4;const v=f.decode(r.slice(_,_+p));_=_+p;const N=f.decode(r.slice(_,_+g));_=_+g;const O=f.decode(r.slice(_,_+b));_=_+b;const B=r.slice(_,r.byteLength),k=S===this.JSON_ENCODING?JSON.parse(f.decode(B)):B,z={type:this.BROADCAST_EVENT,event:N,payload:k};return b>0&&(z.meta=JSON.parse(O)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:z}}_isArrayBuffer(r){var l;return r instanceof ArrayBuffer||((l=r?.constructor)===null||l===void 0?void 0:l.name)==="ArrayBuffer"}_pick(r,l){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([f])=>l.includes(f)))}}class e2{constructor(r,l){this.callback=r,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gt;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Gt||(Gt={}));const $1=(o,r,l={})=>{var f;const p=(f=l.skipTypes)!==null&&f!==void 0?f:[];return r?Object.keys(r).reduce((g,b)=>(g[b]=Tp(b,o,r,p),g),{}):{}},Tp=(o,r,l,f)=>{const p=r.find(S=>S.name===o),g=p?.type,b=l[o];return g&&!f.includes(g)?t2(g,b):wf(b)},t2=(o,r)=>{if(o.charAt(0)==="_"){const l=o.slice(1,o.length);return Rp(r,l)}switch(o){case Gt.bool:return Np(r);case Gt.float4:case Gt.float8:case Gt.int2:case Gt.int4:case Gt.int8:case Gt.numeric:case Gt.oid:return Op(r);case Gt.json:case Gt.jsonb:return Ip(r);case Gt.timestamp:return Dp(r);case Gt.abstime:case Gt.date:case Gt.daterange:case Gt.int4range:case Gt.int8range:case Gt.money:case Gt.reltime:case Gt.text:case Gt.time:case Gt.timestamptz:case Gt.timetz:case Gt.tsrange:case Gt.tstzrange:return wf(r);default:return wf(r)}},wf=o=>o,Np=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Op=o=>{if(typeof o=="string"){const r=parseFloat(o);if(!Number.isNaN(r))return r}return o},Ip=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch{return o}return o},Rp=(o,r)=>{if(typeof o!="string")return o;const l=o.length-1,f=o[l];if(o[0]==="{"&&f==="}"){let g;const b=o.slice(1,l);try{g=JSON.parse("["+b+"]")}catch{g=b?b.split(","):[]}return g.map(S=>t2(r,S))}return o},Dp=o=>typeof o=="string"?o.replace(" ","T"):o,n2=o=>{const r=new URL(o);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Qh{constructor(r,l,f={},p=xf){this.channel=r,this.event=l,this.payload=f,this.timeout=p,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,l){var f;return this._hasReceived(r)&&l((f=this.receivedResp)===null||f===void 0?void 0:f.response),this.recHooks.push({status:r,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:l}){this.recHooks.filter(f=>f.status===r).forEach(f=>f.callback(l))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var eg;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(eg||(eg={}));class eo{constructor(r,l){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const f=l?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(f.state,{},p=>{const{onJoin:g,onLeave:b,onSync:S}=this.caller;this.joinRef=this.channel._joinRef(),this.state=eo.syncState(this.state,p,g,b),this.pendingDiffs.forEach(_=>{this.state=eo.syncDiff(this.state,_,g,b)}),this.pendingDiffs=[],S()}),this.channel._on(f.diff,{},p=>{const{onJoin:g,onLeave:b,onSync:S}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(p):(this.state=eo.syncDiff(this.state,p,g,b),S())}),this.onJoin((p,g,b)=>{this.channel._trigger("presence",{event:"join",key:p,currentPresences:g,newPresences:b})}),this.onLeave((p,g,b)=>{this.channel._trigger("presence",{event:"leave",key:p,currentPresences:g,leftPresences:b})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,l,f,p){const g=this.cloneDeep(r),b=this.transformState(l),S={},_={};return this.map(g,(v,N)=>{b[v]||(_[v]=N)}),this.map(b,(v,N)=>{const O=g[v];if(O){const B=N.map(Y=>Y.presence_ref),k=O.map(Y=>Y.presence_ref),z=N.filter(Y=>k.indexOf(Y.presence_ref)<0),U=O.filter(Y=>B.indexOf(Y.presence_ref)<0);z.length>0&&(S[v]=z),U.length>0&&(_[v]=U)}else S[v]=N}),this.syncDiff(g,{joins:S,leaves:_},f,p)}static syncDiff(r,l,f,p){const{joins:g,leaves:b}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return f||(f=()=>{}),p||(p=()=>{}),this.map(g,(S,_)=>{var v;const N=(v=r[S])!==null&&v!==void 0?v:[];if(r[S]=this.cloneDeep(_),N.length>0){const O=r[S].map(k=>k.presence_ref),B=N.filter(k=>O.indexOf(k.presence_ref)<0);r[S].unshift(...B)}f(S,N,_)}),this.map(b,(S,_)=>{let v=r[S];if(!v)return;const N=_.map(O=>O.presence_ref);v=v.filter(O=>N.indexOf(O.presence_ref)<0),r[S]=v,p(S,v,_),v.length===0&&delete r[S]}),r}static map(r,l){return Object.getOwnPropertyNames(r).map(f=>l(f,r[f]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((l,f)=>{const p=r[f];return"metas"in p?l[f]=p.metas.map(g=>(g.presence_ref=g.phx_ref,delete g.phx_ref,delete g.phx_ref_prev,g)):l[f]=p,l},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tg;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(tg||(tg={}));var to;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(to||(to={}));var Mr;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Mr||(Mr={}));class Ks{constructor(r,l={config:{}},f){var p,g;if(this.topic=r,this.params=l,this.socket=f,this.bindings={},this.state=Tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Qh(this,Zi.join,this.params,this.timeout),this.rejoinTimer=new e2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(b=>b.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tn.closed,this.socket._remove(this)}),this._onError(b=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,b),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",b=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,b),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zi.reply,{},(b,S)=>{this._trigger(this._replyEventName(S),b)}),this.presence=new eo(this),this.broadcastEndpointURL=n2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((g=(p=this.params.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,l=this.timeout){var f,p,g;if(this.socket.isConnected()||this.socket.connect(),this.state==Tn.closed){const{config:{broadcast:b,presence:S,private:_}}=this.params,v=(p=(f=this.bindings.postgres_changes)===null||f===void 0?void 0:f.map(k=>k.filter))!==null&&p!==void 0?p:[],N=!!this.bindings[to.PRESENCE]&&this.bindings[to.PRESENCE].length>0||((g=this.params.config.presence)===null||g===void 0?void 0:g.enabled)===!0,O={},B={broadcast:b,presence:Object.assign(Object.assign({},S),{enabled:N}),postgres_changes:v,private:_};this.socket.accessTokenValue&&(O.access_token=this.socket.accessTokenValue),this._onError(k=>r?.(Mr.CHANNEL_ERROR,k)),this._onClose(()=>r?.(Mr.CLOSED)),this.updateJoinPayload(Object.assign({config:B},O)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:k})=>{var z;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){r?.(Mr.SUBSCRIBED);return}else{const U=this.bindings.postgres_changes,Y=(z=U?.length)!==null&&z!==void 0?z:0,J=[];for(let ae=0;ae<Y;ae++){const Z=U[ae],{filter:{event:ce,schema:Ce,table:Ae,filter:Q}}=Z,ne=k&&k[ae];if(ne&&ne.event===ce&&Ks.isFilterValueEqual(ne.schema,Ce)&&Ks.isFilterValueEqual(ne.table,Ae)&&Ks.isFilterValueEqual(ne.filter,Q))J.push(Object.assign(Object.assign({},Z),{id:ne.id}));else{this.unsubscribe(),this.state=Tn.errored,r?.(Mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=J,r&&r(Mr.SUBSCRIBED);return}}).receive("error",k=>{this.state=Tn.errored,r?.(Mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{r?.(Mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,l={}){return await this.send({type:"presence",event:"track",payload:r},l.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,l,f){return this.state===Tn.joined&&r===to.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,l,f)}async httpSend(r,l,f={}){var p;if(l==null)return Promise.reject("Payload is required for httpSend()");const g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const b={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:l,private:this.private}]})},S=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(p=f.timeout)!==null&&p!==void 0?p:this.timeout);if(S.status===202)return{success:!0};let _=S.statusText;try{const v=await S.json();_=v.error||v.message||_}catch{}return Promise.reject(new Error(_))}async send(r,l={}){var f,p;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:g,payload:b}=r,S={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(S.Authorization=`Bearer ${this.socket.accessTokenValue}`);const _={method:"POST",headers:S,body:JSON.stringify({messages:[{topic:this.subTopic,event:g,payload:b,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(f=l.timeout)!==null&&f!==void 0?f:this.timeout);return await((p=v.body)===null||p===void 0?void 0:p.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(g=>{var b,S,_;const v=this._push(r.type,r,l.timeout||this.timeout);r.type==="broadcast"&&!(!((_=(S=(b=this.params)===null||b===void 0?void 0:b.config)===null||S===void 0?void 0:S.broadcast)===null||_===void 0)&&_.ack)&&g("ok"),v.receive("ok",()=>g("ok")),v.receive("error",()=>g("error")),v.receive("timeout",()=>g("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Tn.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zi.close,"leave",this._joinRef())};this.joinPush.destroy();let f=null;return new Promise(p=>{f=new Qh(this,Zi.leave,{},r),f.receive("ok",()=>{l(),p("ok")}).receive("timeout",()=>{l(),p("timed out")}).receive("error",()=>{p("error")}),f.send(),this._canPush()||f.trigger("ok",{})}).finally(()=>{f?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tn.closed,this.bindings={}}async _fetchWithTimeout(r,l,f){const p=new AbortController,g=setTimeout(()=>p.abort(),f),b=await this.socket.fetch(r,Object.assign(Object.assign({},l),{signal:p.signal}));return clearTimeout(g),b}_push(r,l,f=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let p=new Qh(this,r,l,f);return this._canPush()?p.send():this._addToPushBuffer(p),p}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>_p){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(r,l,f){return l}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,l,f){var p,g;const b=r.toLocaleLowerCase(),{close:S,error:_,leave:v,join:N}=Zi;if(f&&[S,_,v,N].indexOf(b)>=0&&f!==this._joinRef())return;let B=this._onMessage(b,l,f);if(l&&!B)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(b)?(p=this.bindings.postgres_changes)===null||p===void 0||p.filter(k=>{var z,U,Y;return((z=k.filter)===null||z===void 0?void 0:z.event)==="*"||((Y=(U=k.filter)===null||U===void 0?void 0:U.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())===b}).map(k=>k.callback(B,f)):(g=this.bindings[b])===null||g===void 0||g.filter(k=>{var z,U,Y,J,ae,Z;if(["broadcast","presence","postgres_changes"].includes(b))if("id"in k){const ce=k.id,Ce=(z=k.filter)===null||z===void 0?void 0:z.event;return ce&&((U=l.ids)===null||U===void 0?void 0:U.includes(ce))&&(Ce==="*"||Ce?.toLocaleLowerCase()===((Y=l.data)===null||Y===void 0?void 0:Y.type.toLocaleLowerCase()))}else{const ce=(ae=(J=k?.filter)===null||J===void 0?void 0:J.event)===null||ae===void 0?void 0:ae.toLocaleLowerCase();return ce==="*"||ce===((Z=l?.event)===null||Z===void 0?void 0:Z.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===b}).map(k=>{if(typeof B=="object"&&"ids"in B){const z=B.data,{schema:U,table:Y,commit_timestamp:J,type:ae,errors:Z}=z;B=Object.assign(Object.assign({},{schema:U,table:Y,commit_timestamp:J,eventType:ae,new:{},old:{},errors:Z}),this._getPayloadRecords(z))}k.callback(B,f)})}_isClosed(){return this.state===Tn.closed}_isJoined(){return this.state===Tn.joined}_isJoining(){return this.state===Tn.joining}_isLeaving(){return this.state===Tn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,l,f){const p=r.toLocaleLowerCase(),g={type:p,filter:l,callback:f};return this.bindings[p]?this.bindings[p].push(g):this.bindings[p]=[g],this}_off(r,l){const f=r.toLocaleLowerCase();return this.bindings[f]&&(this.bindings[f]=this.bindings[f].filter(p=>{var g;return!(((g=p.type)===null||g===void 0?void 0:g.toLocaleLowerCase())===f&&Ks.isEqual(p.filter,l))})),this}static isEqual(r,l){if(Object.keys(r).length!==Object.keys(l).length)return!1;for(const f in r)if(r[f]!==l[f])return!1;return!0}static isFilterValueEqual(r,l){return(r??void 0)===(l??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Zi.close,{},r)}_onError(r){this._on(Zi.error,{},l=>r(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const l={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(l.new=$1(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(l.old=$1(r.columns,r.old_record)),l}}const Kh=()=>{},Dc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Mp=[1e3,2e3,5e3,1e4],Bp=1e4,Lp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kp{constructor(r,l){var f;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xf,this.transport=null,this.heartbeatIntervalMs=Dc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kh,this.ref=0,this.reconnectTimer=null,this.vsn=J1,this.logger=Kh,this.conn=null,this.sendBuffer=[],this.serializer=new Cp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=p=>p?(...g)=>p(...g):(...g)=>fetch(...g),!(!((f=l?.params)===null||f===void 0)&&f.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${r}/${yf.websocket}`,this.httpEndpoint=n2(r),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vp.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const l=r.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const f=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(f),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,l??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const l=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const r=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,l,f){this.logger(r,l,f)}connectionState(){switch(this.conn&&this.conn.readyState){case ba.connecting:return $a.Connecting;case ba.open:return $a.Open;case ba.closing:return $a.Closing;default:return $a.Closed}}isConnected(){return this.connectionState()===$a.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,l={config:{}}){const f=`realtime:${r}`,p=this.getChannels().find(g=>g.topic===f);if(p)return p;{const g=new Ks(`realtime:${r}`,l,this);return this.channels.push(g),g}}push(r){const{topic:l,event:f,payload:p,ref:g}=r,b=()=>{this.encode(r,S=>{var _;(_=this.conn)===null||_===void 0||_.send(S)})};this.log("push",`${l} ${f} (${g})`,p),this.isConnected()?b():this.sendBuffer.push(b)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Sp,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},Dc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let l=this.channels.find(f=>f.topic===r&&(f._isJoined()||f._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${r}"`),l.unsubscribe())}_remove(r){this.channels=this.channels.filter(l=>l.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply"&&l.ref&&l.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error",v)}catch(N){this.log("error","error in heartbeat callback",N)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:f,event:p,payload:g,ref:b}=l,S=b?`(${b})`:"",_=g.status||"";this.log("receive",`${_} ${f} ${p} ${S}`.trim(),g),this.channels.filter(v=>v._isMember(f)).forEach(v=>v._trigger(p,g,b)),this._triggerStateCallbacks("message",l)})}_clearTimer(r){var l;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===ba.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ba.open||this.conn.readyState===ba.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(l=>{this.log("error","error waiting for auth on connect",l),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this._terminateWorker()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var l;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r);try{this.heartbeatCallback("error")}catch(l){this.log("error","error in heartbeat callback",l)}}_triggerChanError(){this.channels.forEach(r=>r._trigger(Zi.error))}_appendParams(r,l){if(Object.keys(l).length===0)return r;const f=r.match(/\?/)?"&":"?",p=new URLSearchParams(l);return`${r}${f}${p}`}_workerObjectUrl(r){let l;if(r)l=r;else{const f=new Blob([Lp],{type:"application/javascript"});l=URL.createObjectURL(f)}return l}_setConnectionState(r,l=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(r=null){let l,f=!1;if(r)l=r,f=!0;else if(this.accessToken)try{l=await this.accessToken()}catch(p){this.log("error","Error fetching access token from callback",p),l=this.accessTokenValue}else l=this.accessTokenValue;f?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(p=>{const g={access_token:l,version:Ep};l&&p.updateJoinPayload(g),p.joinedOnce&&p._isJoined()&&p._push(Zi.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(l=>{this.log("error",`Error setting auth in ${r}`,l)})}_triggerStateCallbacks(r,l){try{this.stateChangeCallbacks[r].forEach(f=>{try{f(l)}catch(p){this.log("error",`error in ${r} callback`,p)}})}catch(f){this.log("error",`error triggering ${r} callbacks`,f)}}_setupReconnectionTimer(){this.reconnectTimer=new e2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Dc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var l,f,p,g,b,S,_,v,N,O,B,k;switch(this.transport=(l=r?.transport)!==null&&l!==void 0?l:null,this.timeout=(f=r?.timeout)!==null&&f!==void 0?f:xf,this.heartbeatIntervalMs=(p=r?.heartbeatIntervalMs)!==null&&p!==void 0?p:Dc.HEARTBEAT_INTERVAL,this.worker=(g=r?.worker)!==null&&g!==void 0?g:!1,this.accessToken=(b=r?.accessToken)!==null&&b!==void 0?b:null,this.heartbeatCallback=(S=r?.heartbeatCallback)!==null&&S!==void 0?S:Kh,this.vsn=(_=r?.vsn)!==null&&_!==void 0?_:J1,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=r?.reconnectAfterMs)!==null&&v!==void 0?v:(z=>Mp[z-1]||Bp),this.vsn){case Ap:this.encode=(N=r?.encode)!==null&&N!==void 0?N:((z,U)=>U(JSON.stringify(z))),this.decode=(O=r?.decode)!==null&&O!==void 0?O:((z,U)=>U(JSON.parse(z)));break;case $g:this.encode=(B=r?.encode)!==null&&B!==void 0?B:this.serializer.encode.bind(this.serializer),this.decode=(k=r?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var no=class extends Error{constructor(o,r){super(o),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function jp(o,r,l){const f=new URL(r,o);if(l)for(const[p,g]of Object.entries(l))g!==void 0&&f.searchParams.set(p,g);return f.toString()}async function Up(o){return!o||o.type==="none"?{}:o.type==="bearer"?{Authorization:`Bearer ${o.token}`}:o.type==="header"?{[o.name]:o.value}:o.type==="custom"?await o.getHeaders():{}}function zp(o){const r=o.fetchImpl??globalThis.fetch;return{async request({method:l,path:f,query:p,body:g,headers:b}){const S=jp(o.baseUrl,f,p),_=await Up(o.auth),v=await r(S,{method:l,headers:{...g?{"Content-Type":"application/json"}:{},..._,...b},body:g?JSON.stringify(g):void 0}),N=await v.text(),O=(v.headers.get("content-type")||"").includes("application/json"),B=O&&N?JSON.parse(N):N;if(!v.ok){const k=O?B:void 0,z=k?.error;throw new no(z?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:z?.type,icebergCode:z?.code,details:k})}return{status:v.status,headers:v.headers,data:B}}}}function Mc(o){return o.join("")}var Pp=class{constructor(o,r=""){this.client=o,this.prefix=r}async listNamespaces(o){const r=o?{parent:Mc(o.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(f=>({namespace:f}))}async createNamespace(o,r){const l={namespace:o.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:l})).data}async dropNamespace(o){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mc(o.namespace)}`})}async loadNamespaceMetadata(o){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mc(o.namespace)}`})).data.properties}}async namespaceExists(o){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mc(o.namespace)}`}),!0}catch(r){if(r instanceof no&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(o,r){try{return await this.createNamespace(o,r)}catch(l){if(l instanceof no&&l.status===409)return;throw l}}};function Fs(o){return o.join("")}var Fp=class{constructor(o,r="",l){this.client=o,this.prefix=r,this.accessDelegation=l}async listTables(o){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables`})).data.identifiers}async createTable(o,r){const l={};return this.accessDelegation&&(l["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables`,body:r,headers:l})).data.metadata}async updateTable(o,r){const l=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,body:r});return{"metadata-location":l.data["metadata-location"],metadata:l.data.metadata}}async dropTable(o,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(o){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,headers:r})).data.metadata}async tableExists(o){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fs(o.namespace)}/tables/${o.name}`,headers:r}),!0}catch(l){if(l instanceof no&&l.status===404)return!1;throw l}}async createTableIfNotExists(o,r){try{return await this.createTable(o,r)}catch(l){if(l instanceof no&&l.status===409)return await this.loadTable({namespace:o.namespace,name:r.name});throw l}}},Hp=class{constructor(o){let r="v1";o.catalogName&&(r+=`/${o.catalogName}`);const l=o.baseUrl.endsWith("/")?o.baseUrl:`${o.baseUrl}/`;this.client=zp({baseUrl:l,auth:o.auth,fetchImpl:o.fetch}),this.accessDelegation=o.accessDelegation?.join(","),this.namespaceOps=new Pp(this.client,r),this.tableOps=new Fp(this.client,r,this.accessDelegation)}async listNamespaces(o){return this.namespaceOps.listNamespaces(o)}async createNamespace(o,r){return this.namespaceOps.createNamespace(o,r)}async dropNamespace(o){await this.namespaceOps.dropNamespace(o)}async loadNamespaceMetadata(o){return this.namespaceOps.loadNamespaceMetadata(o)}async listTables(o){return this.tableOps.listTables(o)}async createTable(o,r){return this.tableOps.createTable(o,r)}async updateTable(o,r){return this.tableOps.updateTable(o,r)}async dropTable(o,r){await this.tableOps.dropTable(o,r)}async loadTable(o){return this.tableOps.loadTable(o)}async namespaceExists(o){return this.namespaceOps.namespaceExists(o)}async tableExists(o){return this.tableOps.tableExists(o)}async createNamespaceIfNotExists(o,r){return this.namespaceOps.createNamespaceIfNotExists(o,r)}async createTableIfNotExists(o,r){return this.tableOps.createTableIfNotExists(o,r)}},qc=class extends Error{constructor(o,r="storage",l,f){super(o),this.__isStorageError=!0,this.namespace=r,this.name=r==="vectors"?"StorageVectorsError":"StorageError",this.status=l,this.statusCode=f}};function Yc(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}var Bc=class extends qc{constructor(o,r,l,f="storage"){super(o,f,r,l),this.name=f==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},i2=class extends qc{constructor(o,r,l="storage"){super(o,l),this.name=l==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=r}};const Vp=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Gp=o=>{if(typeof o!="object"||o===null)return!1;const r=Object.getPrototypeOf(o);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},vf=o=>{if(Array.isArray(o))return o.map(l=>vf(l));if(typeof o=="function"||o!==Object(o))return o;const r={};return Object.entries(o).forEach(([l,f])=>{const p=l.replace(/([-_][a-z])/gi,g=>g.toUpperCase().replace(/[-_]/g,""));r[p]=vf(f)}),r},qp=o=>!o||typeof o!="string"||o.length===0||o.length>100||o.trim()!==o||o.includes("/")||o.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(o);function io(o){"@babel/helpers - typeof";return io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},io(o)}function Yp(o,r){if(io(o)!="object"||!o)return o;var l=o[Symbol.toPrimitive];if(l!==void 0){var f=l.call(o,r);if(io(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}function Xp(o){var r=Yp(o,"string");return io(r)=="symbol"?r:r+""}function Wp(o,r,l){return(r=Xp(r))in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function ng(o,r){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);r&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable})),l.push.apply(l,f)}return l}function qe(o){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?ng(Object(l),!0).forEach(function(f){Wp(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):ng(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}const ig=o=>{var r;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(r=o.error)===null||r===void 0?void 0:r.message)||JSON.stringify(o)},Zp=async(o,r,l,f)=>{if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!l?.noResolveJson){const p=o,g=p.status||500;if(typeof p.json=="function")p.json().then(b=>{const S=b?.statusCode||b?.code||g+"";r(new Bc(ig(b),g,S,f))}).catch(()=>{if(f==="vectors"){const b=g+"";r(new Bc(p.statusText||`HTTP ${g} error`,g,b,f))}else{const b=g+"";r(new Bc(p.statusText||`HTTP ${g} error`,g,b,f))}});else{const b=g+"";r(new Bc(p.statusText||`HTTP ${g} error`,g,b,f))}}else r(new i2(ig(o),o,f))},Qp=(o,r,l,f)=>{const p={method:o,headers:r?.headers||{}};return o==="GET"||o==="HEAD"||!f?qe(qe({},p),l):(Gp(f)?(p.headers=qe({"Content-Type":"application/json"},r?.headers),p.body=JSON.stringify(f)):p.body=f,r?.duplex&&(p.duplex=r.duplex),qe(qe({},p),l))};async function Kl(o,r,l,f,p,g,b){return new Promise((S,_)=>{o(l,Qp(r,f,p,g)).then(v=>{if(!v.ok)throw v;if(f?.noResolveJson)return v;if(b==="vectors"){const N=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!N||!N.includes("application/json"))return{}}return v.json()}).then(v=>S(v)).catch(v=>Zp(v,_,f,b))})}function r2(o="storage"){return{get:async(r,l,f,p)=>Kl(r,"GET",l,f,p,void 0,o),post:async(r,l,f,p,g)=>Kl(r,"POST",l,p,g,f,o),put:async(r,l,f,p,g)=>Kl(r,"PUT",l,p,g,f,o),head:async(r,l,f,p)=>Kl(r,"HEAD",l,qe(qe({},f),{},{noResolveJson:!0}),p,void 0,o),remove:async(r,l,f,p,g)=>Kl(r,"DELETE",l,p,g,f,o)}}const Kp=r2("storage"),{get:ro,post:Wi,put:bf,head:Jp,remove:Nf}=Kp,Ei=r2("vectors");var el=class{constructor(o,r={},l,f="storage"){this.shouldThrowOnError=!1,this.url=o,this.headers=r,this.fetch=Vp(l),this.namespace=f}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(o){var r=this;try{return{data:await o(),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Yc(l))return{data:null,error:l};throw l}}},$p=class{constructor(o,r){this.downloadFn=o,this.shouldThrowOnError=r}then(o,r){return this.execute().then(o,r)}async execute(){var o=this;try{return{data:(await o.downloadFn()).body,error:null}}catch(r){if(o.shouldThrowOnError)throw r;if(Yc(r))return{data:null,error:r};throw r}}};let a2;a2=Symbol.toStringTag;var ex=class{constructor(o,r){this.downloadFn=o,this.shouldThrowOnError=r,this[a2]="BlobDownloadBuilder",this.promise=null}asStream(){return new $p(this.downloadFn,this.shouldThrowOnError)}then(o,r){return this.getPromise().then(o,r)}catch(o){return this.getPromise().catch(o)}finally(o){return this.getPromise().finally(o)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var o=this;try{return{data:await(await o.downloadFn()).blob(),error:null}}catch(r){if(o.shouldThrowOnError)throw r;if(Yc(r))return{data:null,error:r};throw r}}};const tx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var nx=class extends el{constructor(o,r={},l,f){super(o,r,f,"storage"),this.bucketId=l}async uploadOrUpdate(o,r,l,f){var p=this;return p.handleOperation(async()=>{let g;const b=qe(qe({},rg),f);let S=qe(qe({},p.headers),o==="POST"&&{"x-upsert":String(b.upsert)});const _=b.metadata;typeof Blob<"u"&&l instanceof Blob?(g=new FormData,g.append("cacheControl",b.cacheControl),_&&g.append("metadata",p.encodeMetadata(_)),g.append("",l)):typeof FormData<"u"&&l instanceof FormData?(g=l,g.has("cacheControl")||g.append("cacheControl",b.cacheControl),_&&!g.has("metadata")&&g.append("metadata",p.encodeMetadata(_))):(g=l,S["cache-control"]=`max-age=${b.cacheControl}`,S["content-type"]=b.contentType,_&&(S["x-metadata"]=p.toBase64(p.encodeMetadata(_))),(typeof ReadableStream<"u"&&g instanceof ReadableStream||g&&typeof g=="object"&&"pipe"in g&&typeof g.pipe=="function")&&!b.duplex&&(b.duplex="half")),f?.headers&&(S=qe(qe({},S),f.headers));const v=p._removeEmptyFolders(r),N=p._getFinalPath(v),O=await(o=="PUT"?bf:Wi)(p.fetch,`${p.url}/object/${N}`,g,qe({headers:S},b?.duplex?{duplex:b.duplex}:{}));return{path:v,id:O.Id,fullPath:O.Key}})}async upload(o,r,l){return this.uploadOrUpdate("POST",o,r,l)}async uploadToSignedUrl(o,r,l,f){var p=this;const g=p._removeEmptyFolders(o),b=p._getFinalPath(g),S=new URL(p.url+`/object/upload/sign/${b}`);return S.searchParams.set("token",r),p.handleOperation(async()=>{let _;const v=qe({upsert:rg.upsert},f),N=qe(qe({},p.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&l instanceof Blob?(_=new FormData,_.append("cacheControl",v.cacheControl),_.append("",l)):typeof FormData<"u"&&l instanceof FormData?(_=l,_.append("cacheControl",v.cacheControl)):(_=l,N["cache-control"]=`max-age=${v.cacheControl}`,N["content-type"]=v.contentType),{path:g,fullPath:(await bf(p.fetch,S.toString(),_,{headers:N})).Key}})}async createSignedUploadUrl(o,r){var l=this;return l.handleOperation(async()=>{let f=l._getFinalPath(o);const p=qe({},l.headers);r?.upsert&&(p["x-upsert"]="true");const g=await Wi(l.fetch,`${l.url}/object/upload/sign/${f}`,{},{headers:p}),b=new URL(l.url+g.url),S=b.searchParams.get("token");if(!S)throw new qc("No token returned by API");return{signedUrl:b.toString(),path:o,token:S}})}async update(o,r,l){return this.uploadOrUpdate("PUT",o,r,l)}async move(o,r,l){var f=this;return f.handleOperation(async()=>await Wi(f.fetch,`${f.url}/object/move`,{bucketId:f.bucketId,sourceKey:o,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:f.headers}))}async copy(o,r,l){var f=this;return f.handleOperation(async()=>({path:(await Wi(f.fetch,`${f.url}/object/copy`,{bucketId:f.bucketId,sourceKey:o,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:f.headers})).Key}))}async createSignedUrl(o,r,l){var f=this;return f.handleOperation(async()=>{let p=f._getFinalPath(o),g=await Wi(f.fetch,`${f.url}/object/sign/${p}`,qe({expiresIn:r},l?.transform?{transform:l.transform}:{}),{headers:f.headers});const b=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{signedUrl:encodeURI(`${f.url}${g.signedURL}${b}`)}})}async createSignedUrls(o,r,l){var f=this;return f.handleOperation(async()=>{const p=await Wi(f.fetch,`${f.url}/object/sign/${f.bucketId}`,{expiresIn:r,paths:o},{headers:f.headers}),g=l?.download?`&download=${l.download===!0?"":l.download}`:"";return p.map(b=>qe(qe({},b),{},{signedUrl:b.signedURL?encodeURI(`${f.url}${b.signedURL}${g}`):null}))})}download(o,r){const l=typeof r?.transform<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString(r?.transform||{}),p=f?`?${f}`:"",g=this._getFinalPath(o),b=()=>ro(this.fetch,`${this.url}/${l}/${g}${p}`,{headers:this.headers,noResolveJson:!0});return new ex(b,this.shouldThrowOnError)}async info(o){var r=this;const l=r._getFinalPath(o);return r.handleOperation(async()=>vf(await ro(r.fetch,`${r.url}/object/info/${l}`,{headers:r.headers})))}async exists(o){var r=this;const l=r._getFinalPath(o);try{return await Jp(r.fetch,`${r.url}/object/${l}`,{headers:r.headers}),{data:!0,error:null}}catch(f){if(r.shouldThrowOnError)throw f;if(Yc(f)&&f instanceof i2){const p=f.originalError;if([400,404].includes(p?.status))return{data:!1,error:f}}throw f}}getPublicUrl(o,r){const l=this._getFinalPath(o),f=[],p=r?.download?`download=${r.download===!0?"":r.download}`:"";p!==""&&f.push(p);const g=typeof r?.transform<"u"?"render/image":"object",b=this.transformOptsToQueryString(r?.transform||{});b!==""&&f.push(b);let S=f.join("&");return S!==""&&(S=`?${S}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${l}${S}`)}}}async remove(o){var r=this;return r.handleOperation(async()=>await Nf(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:o},{headers:r.headers}))}async list(o,r,l){var f=this;return f.handleOperation(async()=>{const p=qe(qe(qe({},tx),r),{},{prefix:o||""});return await Wi(f.fetch,`${f.url}/object/list/${f.bucketId}`,p,{headers:f.headers},l)})}async listV2(o,r){var l=this;return l.handleOperation(async()=>{const f=qe({},o);return await Wi(l.fetch,`${l.url}/object/list-v2/${l.bucketId}`,f,{headers:l.headers},r)})}encodeMetadata(o){return JSON.stringify(o)}toBase64(o){return typeof Buffer<"u"?Buffer.from(o).toString("base64"):btoa(o)}_getFinalPath(o){return`${this.bucketId}/${o.replace(/^\/+/,"")}`}_removeEmptyFolders(o){return o.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(o){const r=[];return o.width&&r.push(`width=${o.width}`),o.height&&r.push(`height=${o.height}`),o.resize&&r.push(`resize=${o.resize}`),o.format&&r.push(`format=${o.format}`),o.quality&&r.push(`quality=${o.quality}`),r.join("&")}};const ix="2.93.3",uo={"X-Client-Info":`storage-js/${ix}`};var rx=class extends el{constructor(o,r={},l,f){const p=new URL(o);f?.useNewHostname&&/supabase\.(co|in|red)$/.test(p.hostname)&&!p.hostname.includes("storage.supabase.")&&(p.hostname=p.hostname.replace("supabase.","storage.supabase."));const g=p.href.replace(/\/$/,""),b=qe(qe({},uo),r);super(g,b,l,"storage")}async listBuckets(o){var r=this;return r.handleOperation(async()=>{const l=r.listBucketOptionsToQueryString(o);return await ro(r.fetch,`${r.url}/bucket${l}`,{headers:r.headers})})}async getBucket(o){var r=this;return r.handleOperation(async()=>await ro(r.fetch,`${r.url}/bucket/${o}`,{headers:r.headers}))}async createBucket(o,r={public:!1}){var l=this;return l.handleOperation(async()=>await Wi(l.fetch,`${l.url}/bucket`,{id:o,name:o,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async updateBucket(o,r){var l=this;return l.handleOperation(async()=>await bf(l.fetch,`${l.url}/bucket/${o}`,{id:o,name:o,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async emptyBucket(o){var r=this;return r.handleOperation(async()=>await Wi(r.fetch,`${r.url}/bucket/${o}/empty`,{},{headers:r.headers}))}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Nf(r.fetch,`${r.url}/bucket/${o}`,{},{headers:r.headers}))}listBucketOptionsToQueryString(o){const r={};return o&&("limit"in o&&(r.limit=String(o.limit)),"offset"in o&&(r.offset=String(o.offset)),o.search&&(r.search=o.search),o.sortColumn&&(r.sortColumn=o.sortColumn),o.sortOrder&&(r.sortOrder=o.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},ax=class extends el{constructor(o,r={},l){const f=o.replace(/\/$/,""),p=qe(qe({},uo),r);super(f,p,l,"storage")}async createBucket(o){var r=this;return r.handleOperation(async()=>await Wi(r.fetch,`${r.url}/bucket`,{name:o},{headers:r.headers}))}async listBuckets(o){var r=this;return r.handleOperation(async()=>{const l=new URLSearchParams;o?.limit!==void 0&&l.set("limit",o.limit.toString()),o?.offset!==void 0&&l.set("offset",o.offset.toString()),o?.sortColumn&&l.set("sortColumn",o.sortColumn),o?.sortOrder&&l.set("sortOrder",o.sortOrder),o?.search&&l.set("search",o.search);const f=l.toString(),p=f?`${r.url}/bucket?${f}`:`${r.url}/bucket`;return await ro(r.fetch,p,{headers:r.headers})})}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Nf(r.fetch,`${r.url}/bucket/${o}`,{},{headers:r.headers}))}from(o){var r=this;if(!qp(o))throw new qc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const l=new Hp({baseUrl:this.url,catalogName:o,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),f=this.shouldThrowOnError;return new Proxy(l,{get(p,g){const b=p[g];return typeof b!="function"?b:async(...S)=>{try{return{data:await b.apply(p,S),error:null}}catch(_){if(f)throw _;return{data:null,error:_}}}}})}},sx=class extends el{constructor(o,r={},l){const f=o.replace(/\/$/,""),p=qe(qe({},uo),{},{"Content-Type":"application/json"},r);super(f,p,l,"vectors")}async createIndex(o){var r=this;return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/CreateIndex`,o,{headers:r.headers})||{})}async getIndex(o,r){var l=this;return l.handleOperation(async()=>await Ei.post(l.fetch,`${l.url}/GetIndex`,{vectorBucketName:o,indexName:r},{headers:l.headers}))}async listIndexes(o){var r=this;return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/ListIndexes`,o,{headers:r.headers}))}async deleteIndex(o,r){var l=this;return l.handleOperation(async()=>await Ei.post(l.fetch,`${l.url}/DeleteIndex`,{vectorBucketName:o,indexName:r},{headers:l.headers})||{})}},lx=class extends el{constructor(o,r={},l){const f=o.replace(/\/$/,""),p=qe(qe({},uo),{},{"Content-Type":"application/json"},r);super(f,p,l,"vectors")}async putVectors(o){var r=this;if(o.vectors.length<1||o.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/PutVectors`,o,{headers:r.headers})||{})}async getVectors(o){var r=this;return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/GetVectors`,o,{headers:r.headers}))}async listVectors(o){var r=this;if(o.segmentCount!==void 0){if(o.segmentCount<1||o.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(o.segmentIndex!==void 0&&(o.segmentIndex<0||o.segmentIndex>=o.segmentCount))throw new Error(`segmentIndex must be between 0 and ${o.segmentCount-1}`)}return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/ListVectors`,o,{headers:r.headers}))}async queryVectors(o){var r=this;return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/QueryVectors`,o,{headers:r.headers}))}async deleteVectors(o){var r=this;if(o.keys.length<1||o.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/DeleteVectors`,o,{headers:r.headers})||{})}},ox=class extends el{constructor(o,r={},l){const f=o.replace(/\/$/,""),p=qe(qe({},uo),{},{"Content-Type":"application/json"},r);super(f,p,l,"vectors")}async createBucket(o){var r=this;return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:o},{headers:r.headers})||{})}async getBucket(o){var r=this;return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:o},{headers:r.headers}))}async listBuckets(o={}){var r=this;return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/ListVectorBuckets`,o,{headers:r.headers}))}async deleteBucket(o){var r=this;return r.handleOperation(async()=>await Ei.post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:o},{headers:r.headers})||{})}},cx=class extends ox{constructor(o,r={}){super(o,r.headers||{},r.fetch)}from(o){return new ux(this.url,this.headers,o,this.fetch)}async createBucket(o){var r=()=>super.createBucket,l=this;return r().call(l,o)}async getBucket(o){var r=()=>super.getBucket,l=this;return r().call(l,o)}async listBuckets(o={}){var r=()=>super.listBuckets,l=this;return r().call(l,o)}async deleteBucket(o){var r=()=>super.deleteBucket,l=this;return r().call(l,o)}},ux=class extends sx{constructor(o,r,l,f){super(o,r,f),this.vectorBucketName=l}async createIndex(o){var r=()=>super.createIndex,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName}))}async listIndexes(o={}){var r=()=>super.listIndexes,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName}))}async getIndex(o){var r=()=>super.getIndex,l=this;return r().call(l,l.vectorBucketName,o)}async deleteIndex(o){var r=()=>super.deleteIndex,l=this;return r().call(l,l.vectorBucketName,o)}index(o){return new hx(this.url,this.headers,this.vectorBucketName,o,this.fetch)}},hx=class extends lx{constructor(o,r,l,f,p){super(o,r,p),this.vectorBucketName=l,this.indexName=f}async putVectors(o){var r=()=>super.putVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async getVectors(o){var r=()=>super.getVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async listVectors(o={}){var r=()=>super.listVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async queryVectors(o){var r=()=>super.queryVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async deleteVectors(o){var r=()=>super.deleteVectors,l=this;return r().call(l,qe(qe({},o),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}},fx=class extends rx{constructor(o,r={},l,f){super(o,r,l,f)}from(o){return new nx(this.url,this.headers,o,this.fetch)}get vectors(){return new cx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ax(this.url+"/iceberg",this.headers,this.fetch)}};const s2="2.93.3",Zs=30*1e3,Ef=3,Jh=Ef*Zs,dx="http://localhost:9999",gx="supabase.auth.token",mx={"X-Client-Info":`gotrue-js/${s2}`},Af="X-Supabase-Api-Version",l2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},px=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xx=600*1e3;class ao extends Error{constructor(r,l,f){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=f}}function Le(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class yx extends ao{constructor(r,l,f){super(r,l,f),this.name="AuthApiError",this.status=l,this.code=f}}function wx(o){return Le(o)&&o.name==="AuthApiError"}class es extends ao{constructor(r,l){super(r),this.name="AuthUnknownError",this.originalError=l}}class Lr extends ao{constructor(r,l,f,p){super(r,f,p),this.name=l,this.status=f}}class wi extends Lr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $h(o){return Le(o)&&o.name==="AuthSessionMissingError"}class Hs extends Lr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lc extends Lr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class kc extends Lr{constructor(r,l=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vx(o){return Le(o)&&o.name==="AuthImplicitGrantRedirectError"}class ag extends Lr{constructor(r,l=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bx extends Lr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Sf extends Lr{constructor(r,l){super(r,"AuthRetryableFetchError",l,void 0)}}function ef(o){return Le(o)&&o.name==="AuthRetryableFetchError"}class sg extends Lr{constructor(r,l,f){super(r,"AuthWeakPasswordError",l,"weak_password"),this.reasons=f}}class _f extends Lr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const zc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lg=` 	
\r=`.split(""),Ex=(()=>{const o=new Array(128);for(let r=0;r<o.length;r+=1)o[r]=-1;for(let r=0;r<lg.length;r+=1)o[lg[r].charCodeAt(0)]=-2;for(let r=0;r<zc.length;r+=1)o[zc[r].charCodeAt(0)]=r;return o})();function og(o,r,l){if(o!==null)for(r.queue=r.queue<<8|o,r.queuedBits+=8;r.queuedBits>=6;){const f=r.queue>>r.queuedBits-6&63;l(zc[f]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const f=r.queue>>r.queuedBits-6&63;l(zc[f]),r.queuedBits-=6}}function o2(o,r,l){const f=Ex[o];if(f>-1)for(r.queue=r.queue<<6|f,r.queuedBits+=6;r.queuedBits>=8;)l(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(f===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function cg(o){const r=[],l=b=>{r.push(String.fromCodePoint(b))},f={utf8seq:0,codepoint:0},p={queue:0,queuedBits:0},g=b=>{_x(b,f,l)};for(let b=0;b<o.length;b+=1)o2(o.charCodeAt(b),p,g);return r.join("")}function Ax(o,r){if(o<=127){r(o);return}else if(o<=2047){r(192|o>>6),r(128|o&63);return}else if(o<=65535){r(224|o>>12),r(128|o>>6&63),r(128|o&63);return}else if(o<=1114111){r(240|o>>18),r(128|o>>12&63),r(128|o>>6&63),r(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Sx(o,r){for(let l=0;l<o.length;l+=1){let f=o.charCodeAt(l);if(f>55295&&f<=56319){const p=(f-55296)*1024&65535;f=(o.charCodeAt(l+1)-56320&65535|p)+65536,l+=1}Ax(f,r)}}function _x(o,r,l){if(r.utf8seq===0){if(o<=127){l(o);return}for(let f=1;f<6;f+=1)if((o>>7-f&1)===0){r.utf8seq=f;break}if(r.utf8seq===2)r.codepoint=o&31;else if(r.utf8seq===3)r.codepoint=o&15;else if(r.utf8seq===4)r.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|o&63,r.utf8seq-=1,r.utf8seq===0&&l(r.codepoint)}}function $s(o){const r=[],l={queue:0,queuedBits:0},f=p=>{r.push(p)};for(let p=0;p<o.length;p+=1)o2(o.charCodeAt(p),l,f);return new Uint8Array(r)}function Cx(o){const r=[];return Sx(o,l=>r.push(l)),new Uint8Array(r)}function ts(o){const r=[],l={queue:0,queuedBits:0},f=p=>{r.push(p)};return o.forEach(p=>og(p,l,f)),og(null,l,f),r.join("")}function Tx(o){return Math.round(Date.now()/1e3)+o}function Nx(){return Symbol("auth-callback")}const Un=()=>typeof window<"u"&&typeof document<"u",Qa={tested:!1,writable:!1},c2=()=>{if(!Un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qa.tested)return Qa.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Qa.tested=!0,Qa.writable=!0}catch{Qa.tested=!0,Qa.writable=!1}return Qa.writable};function Ox(o){const r={},l=new URL(o);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((p,g)=>{r[g]=p})}catch{}return l.searchParams.forEach((f,p)=>{r[p]=f}),r}const u2=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Ix=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Qs=async(o,r,l)=>{await o.setItem(r,JSON.stringify(l))},Ka=async(o,r)=>{const l=await o.getItem(r);if(!l)return null;try{return JSON.parse(l)}catch{return l}},jn=async(o,r)=>{await o.removeItem(r)};class Xc{constructor(){this.promise=new Xc.promiseConstructor((r,l)=>{this.resolve=r,this.reject=l})}}Xc.promiseConstructor=Promise;function jc(o){const r=o.split(".");if(r.length!==3)throw new _f("Invalid JWT structure");for(let f=0;f<r.length;f++)if(!px.test(r[f]))throw new _f("JWT not in base64url format");return{header:JSON.parse(cg(r[0])),payload:JSON.parse(cg(r[1])),signature:$s(r[2]),raw:{header:r[0],payload:r[1]}}}async function Rx(o){return await new Promise(r=>{setTimeout(()=>r(null),o)})}function Dx(o,r){return new Promise((f,p)=>{(async()=>{for(let g=0;g<1/0;g++)try{const b=await o(g);if(!r(g,null,b)){f(b);return}}catch(b){if(!r(g,b)){p(b);return}}})()})}function Mx(o){return("0"+o.toString(16)).substr(-2)}function Bx(){const r=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",f=l.length;let p="";for(let g=0;g<56;g++)p+=l.charAt(Math.floor(Math.random()*f));return p}return crypto.getRandomValues(r),Array.from(r,Mx).join("")}async function Lx(o){const l=new TextEncoder().encode(o),f=await crypto.subtle.digest("SHA-256",l),p=new Uint8Array(f);return Array.from(p).map(g=>String.fromCharCode(g)).join("")}async function kx(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const l=await Lx(o);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vs(o,r,l=!1){const f=Bx();let p=f;l&&(p+="/PASSWORD_RECOVERY"),await Qs(o,`${r}-code-verifier`,p);const g=await kx(f);return[g,f===g?"plain":"s256"]}const jx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ux(o){const r=o.headers.get(Af);if(!r||!r.match(jx))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function zx(o){if(!o)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(o<=r)throw new Error("JWT has expired")}function Px(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Fx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gs(o){if(!Fx.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tf(){const o={};return new Proxy(o,{get:(r,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const f=l.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hx(o,r){return new Proxy(o,{get:(l,f,p)=>{if(f==="__isInsecureUserWarningProxy")return!0;if(typeof f=="symbol"){const g=f.toString();if(g==="Symbol(Symbol.toPrimitive)"||g==="Symbol(Symbol.toStringTag)"||g==="Symbol(util.inspect.custom)"||g==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,f,p)}return!r.value&&typeof f=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(l,f,p)}})}function ug(o){return JSON.parse(JSON.stringify(o))}const Ja=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Vx=[502,503,504];async function hg(o){var r;if(!Ix(o))throw new Sf(Ja(o),0);if(Vx.includes(o.status))throw new Sf(Ja(o),o.status);let l;try{l=await o.json()}catch(g){throw new es(Ja(g),g)}let f;const p=Ux(o);if(p&&p.getTime()>=l2["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?f=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(f=l.error_code),f){if(f==="weak_password")throw new sg(Ja(l),o.status,((r=l.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(f==="session_not_found")throw new wi}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((g,b)=>g&&typeof b=="string",!0))throw new sg(Ja(l),o.status,l.weak_password.reasons);throw new yx(Ja(l),o.status||500,f)}const Gx=(o,r,l,f)=>{const p={method:o,headers:r?.headers||{}};return o==="GET"?p:(p.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),p.body=JSON.stringify(f),Object.assign(Object.assign({},p),l))};async function Ve(o,r,l,f){var p;const g=Object.assign({},f?.headers);g[Af]||(g[Af]=l2["2024-01-01"].name),f?.jwt&&(g.Authorization=`Bearer ${f.jwt}`);const b=(p=f?.query)!==null&&p!==void 0?p:{};f?.redirectTo&&(b.redirect_to=f.redirectTo);const S=Object.keys(b).length?"?"+new URLSearchParams(b).toString():"",_=await qx(o,r,l+S,{headers:g,noResolveJson:f?.noResolveJson},{},f?.body);return f?.xform?f?.xform(_):{data:Object.assign({},_),error:null}}async function qx(o,r,l,f,p,g){const b=Gx(r,f,p,g);let S;try{S=await o(l,Object.assign({},b))}catch(_){throw console.error(_),new Sf(Ja(_),0)}if(S.ok||await hg(S),f?.noResolveJson)return S;try{return await S.json()}catch(_){await hg(_)}}function Xi(o){var r;let l=null;Wx(o)&&(l=Object.assign({},o),o.expires_at||(l.expires_at=Tx(o.expires_in)));const f=(r=o.user)!==null&&r!==void 0?r:o;return{data:{session:l,user:f},error:null}}function fg(o){const r=Xi(o);return!r.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((l,f)=>l&&typeof f=="string",!0)&&(r.data.weak_password=o.weak_password),r}function Ea(o){var r;return{data:{user:(r=o.user)!==null&&r!==void 0?r:o},error:null}}function Yx(o){return{data:o,error:null}}function Xx(o){const{action_link:r,email_otp:l,hashed_token:f,redirect_to:p,verification_type:g}=o,b=Gc(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),S={action_link:r,email_otp:l,hashed_token:f,redirect_to:p,verification_type:g},_=Object.assign({},b);return{data:{properties:S,user:_},error:null}}function dg(o){return o}function Wx(o){return o.access_token&&o.refresh_token&&o.expires_in}const nf=["global","local","others"];class Zx{constructor({url:r="",headers:l={},fetch:f}){this.url=r,this.headers=l,this.fetch=u2(f),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,l=nf[0]){if(nf.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nf.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(f){if(Le(f))return{data:null,error:f};throw f}}async inviteUserByEmail(r,l={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:Ea})}catch(f){if(Le(f))return{data:{user:null},error:f};throw f}}async generateLink(r){try{const{options:l}=r,f=Gc(r,["options"]),p=Object.assign(Object.assign({},f),l);return"newEmail"in f&&(p.new_email=f?.newEmail,delete p.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:p,headers:this.headers,xform:Xx,redirectTo:l?.redirectTo})}catch(l){if(Le(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(r){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Ea})}catch(l){if(Le(l))return{data:{user:null},error:l};throw l}}async listUsers(r){var l,f,p,g,b,S,_;try{const v={nextPage:null,lastPage:0,total:0},N=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(f=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&f!==void 0?f:"",per_page:(g=(p=r?.perPage)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""},xform:dg});if(N.error)throw N.error;const O=await N.json(),B=(b=N.headers.get("x-total-count"))!==null&&b!==void 0?b:0,k=(_=(S=N.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&_!==void 0?_:[];return k.length>0&&(k.forEach(z=>{const U=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(z.split(";")[1].split("=")[1]);v[`${Y}Page`]=U}),v.total=parseInt(B)),{data:Object.assign(Object.assign({},O),v),error:null}}catch(v){if(Le(v))return{data:{users:[]},error:v};throw v}}async getUserById(r){Gs(r);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Ea})}catch(l){if(Le(l))return{data:{user:null},error:l};throw l}}async updateUserById(r,l){Gs(r);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:l,headers:this.headers,xform:Ea})}catch(f){if(Le(f))return{data:{user:null},error:f};throw f}}async deleteUser(r,l=!1){Gs(r);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:l},xform:Ea})}catch(f){if(Le(f))return{data:{user:null},error:f};throw f}}async _listFactors(r){Gs(r.userId);try{const{data:l,error:f}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:p=>({data:{factors:p},error:null})});return{data:l,error:f}}catch(l){if(Le(l))return{data:null,error:l};throw l}}async _deleteFactor(r){Gs(r.userId),Gs(r.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(l){if(Le(l))return{data:null,error:l};throw l}}async _listOAuthClients(r){var l,f,p,g,b,S,_;try{const v={nextPage:null,lastPage:0,total:0},N=await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(f=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&f!==void 0?f:"",per_page:(g=(p=r?.perPage)===null||p===void 0?void 0:p.toString())!==null&&g!==void 0?g:""},xform:dg});if(N.error)throw N.error;const O=await N.json(),B=(b=N.headers.get("x-total-count"))!==null&&b!==void 0?b:0,k=(_=(S=N.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&_!==void 0?_:[];return k.length>0&&(k.forEach(z=>{const U=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(z.split(";")[1].split("=")[1]);v[`${Y}Page`]=U}),v.total=parseInt(B)),{data:Object.assign(Object.assign({},O),v),error:null}}catch(v){if(Le(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(r){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Le(l))return{data:null,error:l};throw l}}async _getOAuthClient(r){try{return await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Le(l))return{data:null,error:l};throw l}}async _updateOAuthClient(r,l){try{return await Ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:l,headers:this.headers,xform:f=>({data:f,error:null})})}catch(f){if(Le(f))return{data:null,error:f};throw f}}async _deleteOAuthClient(r){try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Le(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(r){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Le(l))return{data:null,error:l};throw l}}}function gg(o={}){return{getItem:r=>o[r]||null,setItem:(r,l)=>{o[r]=l},removeItem:r=>{delete o[r]}}}const qs={debug:!!(globalThis&&c2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class h2 extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Qx extends h2{}async function Kx(o,r,l){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,r);const f=new globalThis.AbortController;return r>0&&setTimeout(()=>{f.abort(),qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:f.signal},async p=>{if(p){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,p.name);try{return await l()}finally{qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,p.name)}}else{if(r===0)throw qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new Qx(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(qs.debug)try{const g=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(g,null,"  "))}catch(g){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",g)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}function Jx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function f2(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function $x(o){return parseInt(o,16)}function ey(o){const r=new TextEncoder().encode(o);return"0x"+Array.from(r,f=>f.toString(16).padStart(2,"0")).join("")}function ty(o){var r;const{chainId:l,domain:f,expirationTime:p,issuedAt:g=new Date,nonce:b,notBefore:S,requestId:_,resources:v,scheme:N,uri:O,version:B}=o;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(b&&b.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${b}`);if(!O)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(B!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${B}`);if(!((r=o.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const k=f2(o.address),z=N?`${N}://${f}`:f,U=o.statement?`${o.statement}
`:"",Y=`${z} wants you to sign in with your Ethereum account:
${k}

${U}`;let J=`URI: ${O}
Version: ${B}
Chain ID: ${l}${b?`
Nonce: ${b}`:""}
Issued At: ${g.toISOString()}`;if(p&&(J+=`
Expiration Time: ${p.toISOString()}`),S&&(J+=`
Not Before: ${S.toISOString()}`),_&&(J+=`
Request ID: ${_}`),v){let ae=`
Resources:`;for(const Z of v){if(!Z||typeof Z!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Z}`);ae+=`
- ${Z}`}J+=ae}return`${Y}
${J}`}class wn extends Error{constructor({message:r,code:l,cause:f,name:p}){var g;super(r,{cause:f}),this.__isWebAuthnError=!0,this.name=(g=p??(f instanceof Error?f.name:void 0))!==null&&g!==void 0?g:"Unknown Error",this.code=l}}class Pc extends wn{constructor(r,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:r}),this.name="WebAuthnUnknownError",this.originalError=l}}function ny({error:o,options:r}){var l,f,p;const{publicKey:g}=r;if(!g)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new wn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((l=g.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new wn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(r.mediation==="conditional"&&((f=g.authenticatorSelection)===null||f===void 0?void 0:f.userVerification)==="required")return new wn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((p=g.authenticatorSelection)===null||p===void 0?void 0:p.userVerification)==="required")return new wn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new wn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new wn({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return g.pubKeyCredParams.filter(S=>S.type==="public-key").length===0?new wn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new wn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const b=window.location.hostname;if(d2(b)){if(g.rp.id!==b)return new wn({message:`The RP ID "${g.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(g.user.id.byteLength<1||g.user.id.byteLength>64)return new wn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new wn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function iy({error:o,options:r}){const{publicKey:l}=r;if(!l)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(r.signal instanceof AbortSignal)return new wn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new wn({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const f=window.location.hostname;if(d2(f)){if(l.rpId!==f)return new wn({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new wn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class ry{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const ay=new ry;function sy(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:r,user:l,excludeCredentials:f}=o,p=Gc(o,["challenge","user","excludeCredentials"]),g=$s(r).buffer,b=Object.assign(Object.assign({},l),{id:$s(l.id).buffer}),S=Object.assign(Object.assign({},p),{challenge:g,user:b});if(f&&f.length>0){S.excludeCredentials=new Array(f.length);for(let _=0;_<f.length;_++){const v=f[_];S.excludeCredentials[_]=Object.assign(Object.assign({},v),{id:$s(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return S}function ly(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:r,allowCredentials:l}=o,f=Gc(o,["challenge","allowCredentials"]),p=$s(r).buffer,g=Object.assign(Object.assign({},f),{challenge:p});if(l&&l.length>0){g.allowCredentials=new Array(l.length);for(let b=0;b<l.length;b++){const S=l[b];g.allowCredentials[b]=Object.assign(Object.assign({},S),{id:$s(S.id).buffer,type:S.type||"public-key",transports:S.transports})}}return g}function oy(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o;return{id:o.id,rawId:o.id,response:{attestationObject:ts(new Uint8Array(o.response.attestationObject)),clientDataJSON:ts(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function cy(o){var r;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const l=o,f=o.getClientExtensionResults(),p=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:ts(new Uint8Array(p.authenticatorData)),clientDataJSON:ts(new Uint8Array(p.clientDataJSON)),signature:ts(new Uint8Array(p.signature)),userHandle:p.userHandle?ts(new Uint8Array(p.userHandle)):void 0},type:"public-key",clientExtensionResults:f,authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function d2(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function mg(){var o,r;return!!(Un()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function uy(o){try{const r=await navigator.credentials.create(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Pc("Browser returned unexpected credential type",r)}:{data:null,error:new Pc("Empty credential response",r)}}catch(r){return{data:null,error:ny({error:r,options:o})}}}async function hy(o){try{const r=await navigator.credentials.get(o);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Pc("Browser returned unexpected credential type",r)}:{data:null,error:new Pc("Empty credential response",r)}}catch(r){return{data:null,error:iy({error:r,options:o})}}}const fy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},dy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Fc(...o){const r=p=>p!==null&&typeof p=="object"&&!Array.isArray(p),l=p=>p instanceof ArrayBuffer||ArrayBuffer.isView(p),f={};for(const p of o)if(p)for(const g in p){const b=p[g];if(b!==void 0)if(Array.isArray(b))f[g]=b;else if(l(b))f[g]=b;else if(r(b)){const S=f[g];r(S)?f[g]=Fc(S,b):f[g]=Fc(b)}else f[g]=b}return f}function gy(o,r){return Fc(fy,o,r||{})}function my(o,r){return Fc(dy,o,r||{})}class py{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:l,friendlyName:f,signal:p},g){var b;try{const{data:S,error:_}=await this.client.mfa.challenge({factorId:r,webauthn:l});if(!S)return{data:null,error:_};const v=p??ay.createNewAbortSignal();if(S.webauthn.type==="create"){const{user:N}=S.webauthn.credential_options.publicKey;if(!N.name){const O=f;if(O)N.name=`${N.id}:${O}`;else{const k=(await this.client.getUser()).data.user,z=((b=k?.user_metadata)===null||b===void 0?void 0:b.name)||k?.email||k?.id||"User";N.name=`${N.id}:${z}`}}N.displayName||(N.displayName=N.name)}switch(S.webauthn.type){case"create":{const N=gy(S.webauthn.credential_options.publicKey,g?.create),{data:O,error:B}=await uy({publicKey:N,signal:v});return O?{data:{factorId:r,challengeId:S.id,webauthn:{type:S.webauthn.type,credential_response:O}},error:null}:{data:null,error:B}}case"request":{const N=my(S.webauthn.credential_options.publicKey,g?.request),{data:O,error:B}=await hy(Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:N,signal:v}));return O?{data:{factorId:r,challengeId:S.id,webauthn:{type:S.webauthn.type,credential_response:O}},error:null}:{data:null,error:B}}}}catch(S){return Le(S)?{data:null,error:S}:{data:null,error:new es("Unexpected error in challenge",S)}}}async _verify({challengeId:r,factorId:l,webauthn:f}){return this.client.mfa.verify({factorId:l,challengeId:r,webauthn:f})}async _authenticate({factorId:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:f=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},g){if(!l)return{data:null,error:new ao("rpId is required for WebAuthn authentication")};try{if(!mg())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:b,error:S}=await this.challenge({factorId:r,webauthn:{rpId:l,rpOrigins:f},signal:p},{request:g});if(!b)return{data:null,error:S};const{webauthn:_}=b;return this._verify({factorId:r,challengeId:b.challengeId,webauthn:{type:_.type,rpId:l,rpOrigins:f,credential_response:_.credential_response}})}catch(b){return Le(b)?{data:null,error:b}:{data:null,error:new es("Unexpected error in authenticate",b)}}}async _register({friendlyName:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:f=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},g){if(!l)return{data:null,error:new ao("rpId is required for WebAuthn registration")};try{if(!mg())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:b,error:S}=await this._enroll({friendlyName:r});if(!b)return await this.client.mfa.listFactors().then(N=>{var O;return(O=N.data)===null||O===void 0?void 0:O.all.find(B=>B.factor_type==="webauthn"&&B.friendly_name===r&&B.status!=="unverified")}).then(N=>N?this.client.mfa.unenroll({factorId:N?.id}):void 0),{data:null,error:S};const{data:_,error:v}=await this._challenge({factorId:b.id,friendlyName:b.friendly_name,webauthn:{rpId:l,rpOrigins:f},signal:p},{create:g});return _?this._verify({factorId:b.id,challengeId:_.challengeId,webauthn:{rpId:l,rpOrigins:f,type:_.webauthn.type,credential_response:_.webauthn.credential_response}}):{data:null,error:v}}catch(b){return Le(b)?{data:null,error:b}:{data:null,error:new es("Unexpected error in register",b)}}}}Jx();const xy={url:dx,storageKey:gx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function pg(o,r,l){return await l()}const Ys={};class so{get jwks(){var r,l;return(l=(r=Ys[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(r){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,l;return(l=(r=Ys[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{cachedAt:r})}constructor(r){var l,f,p;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const g=Object.assign(Object.assign({},xy),r);if(this.storageKey=g.storageKey,this.instanceID=(l=so.nextInstanceID[this.storageKey])!==null&&l!==void 0?l:0,so.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.instanceID>0&&Un()){const b=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(b),this.logDebugMessages&&console.trace(b)}if(this.persistSession=g.persistSession,this.autoRefreshToken=g.autoRefreshToken,this.admin=new Zx({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=u2(g.fetch),this.lock=g.lock||pg,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,this.throwOnError=g.throwOnError,this.lockAcquireTimeout=g.lockAcquireTimeout,g.lock?this.lock=g.lock:this.persistSession&&Un()&&(!((f=globalThis?.navigator)===null||f===void 0)&&f.locks)?this.lock=Kx:this.lock=pg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new py(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:c2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gg(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=gg(this.memoryStorage)),Un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(b){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",b)}(p=this.broadcastChannel)===null||p===void 0||p.addEventListener("message",async b=>{this._debug("received broadcast notification from other tab or client",b);try{await this._notifyAllSubscribers(b.data.event,b.data.session,!1)}catch(S){this._debug("#broadcastChannel","error",S)}})}this.initialize().catch(b=>{this._debug("#initialize()","error",b)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${s2}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let l={},f="none";if(Un()&&(l=Ox(window.location.href),this._isImplicitGrantCallback(l)?f="implicit":await this._isPKCECallback(l)&&(f="pkce")),Un()&&this.detectSessionInUrl&&f!=="none"){const{data:p,error:g}=await this._getSessionFromURL(l,f);if(g){if(this._debug("#_initialize()","error detecting session from URL",g),vx(g)){const _=(r=g.details)===null||r===void 0?void 0:r.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:g}}return{error:g}}const{session:b,redirectType:S}=p;return this._debug("#_initialize()","detected session in URL",b,"redirect type",S),await this._saveSession(b),setTimeout(async()=>{S==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",b):await this._notifyAllSubscribers("SIGNED_IN",b)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return Le(l)?this._returnResult({error:l}):this._returnResult({error:new es("Unexpected error during initialization",l)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var l,f,p;try{const g=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(f=(l=r?.options)===null||l===void 0?void 0:l.data)!==null&&f!==void 0?f:{},gotrue_meta_security:{captcha_token:(p=r?.options)===null||p===void 0?void 0:p.captchaToken}},xform:Xi}),{data:b,error:S}=g;if(S||!b)return this._returnResult({data:{user:null,session:null},error:S});const _=b.session,v=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(g){if(Le(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signUp(r){var l,f,p;try{let g;if("email"in r){const{email:N,password:O,options:B}=r;let k=null,z=null;this.flowType==="pkce"&&([k,z]=await Vs(this.storage,this.storageKey)),g=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:B?.emailRedirectTo,body:{email:N,password:O,data:(l=B?.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:B?.captchaToken},code_challenge:k,code_challenge_method:z},xform:Xi})}else if("phone"in r){const{phone:N,password:O,options:B}=r;g=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:N,password:O,data:(f=B?.data)!==null&&f!==void 0?f:{},channel:(p=B?.channel)!==null&&p!==void 0?p:"sms",gotrue_meta_security:{captcha_token:B?.captchaToken}},xform:Xi})}else throw new Lc("You must provide either an email or phone number and a password");const{data:b,error:S}=g;if(S||!b)return await jn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:S});const _=b.session,v=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(g){if(await jn(this.storage,`${this.storageKey}-code-verifier`),Le(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithPassword(r){try{let l;if("email"in r){const{email:g,password:b,options:S}=r;l=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:g,password:b,gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:fg})}else if("phone"in r){const{phone:g,password:b,options:S}=r;l=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:g,password:b,gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:fg})}else throw new Lc("You must provide either an email or phone number and a password");const{data:f,error:p}=l;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f||!f.session||!f.user){const g=new Hs;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign({user:f.user,session:f.session},f.weak_password?{weakPassword:f.weak_password}:null),error:p})}catch(l){if(Le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOAuth(r){var l,f,p,g;return await this._handleProviderSignIn(r.provider,{redirectTo:(l=r.options)===null||l===void 0?void 0:l.redirectTo,scopes:(f=r.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:(g=r.options)===null||g===void 0?void 0:g.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:l}=r;switch(l){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(r){var l,f,p,g,b,S,_,v,N,O,B;let k,z;if("message"in r)k=r.message,z=r.signature;else{const{chain:U,wallet:Y,statement:J,options:ae}=r;let Z;if(Un())if(typeof Y=="object")Z=Y;else{const le=window;if("ethereum"in le&&typeof le.ethereum=="object"&&"request"in le.ethereum&&typeof le.ethereum.request=="function")Z=le.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof Y!="object"||!ae?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=Y}const ce=new URL((l=ae?.url)!==null&&l!==void 0?l:window.location.href),Ce=await Z.request({method:"eth_requestAccounts"}).then(le=>le).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ce||Ce.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Ae=f2(Ce[0]);let Q=(f=ae?.signInWithEthereum)===null||f===void 0?void 0:f.chainId;if(!Q){const le=await Z.request({method:"eth_chainId"});Q=$x(le)}const ne={domain:ce.host,address:Ae,statement:J,uri:ce.href,version:"1",chainId:Q,nonce:(p=ae?.signInWithEthereum)===null||p===void 0?void 0:p.nonce,issuedAt:(b=(g=ae?.signInWithEthereum)===null||g===void 0?void 0:g.issuedAt)!==null&&b!==void 0?b:new Date,expirationTime:(S=ae?.signInWithEthereum)===null||S===void 0?void 0:S.expirationTime,notBefore:(_=ae?.signInWithEthereum)===null||_===void 0?void 0:_.notBefore,requestId:(v=ae?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(N=ae?.signInWithEthereum)===null||N===void 0?void 0:N.resources};k=ty(ne),z=await Z.request({method:"personal_sign",params:[ey(k),Ae]})}try{const{data:U,error:Y}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:z},!((O=r.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(B=r.options)===null||B===void 0?void 0:B.captchaToken}}:null),xform:Xi});if(Y)throw Y;if(!U||!U.session||!U.user){const J=new Hs;return this._returnResult({data:{user:null,session:null},error:J})}return U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),this._returnResult({data:Object.assign({},U),error:Y})}catch(U){if(Le(U))return this._returnResult({data:{user:null,session:null},error:U});throw U}}async signInWithSolana(r){var l,f,p,g,b,S,_,v,N,O,B,k;let z,U;if("message"in r)z=r.message,U=r.signature;else{const{chain:Y,wallet:J,statement:ae,options:Z}=r;let ce;if(Un())if(typeof J=="object")ce=J;else{const Ae=window;if("solana"in Ae&&typeof Ae.solana=="object"&&("signIn"in Ae.solana&&typeof Ae.solana.signIn=="function"||"signMessage"in Ae.solana&&typeof Ae.solana.signMessage=="function"))ce=Ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!Z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ce=J}const Ce=new URL((l=Z?.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in ce&&ce.signIn){const Ae=await ce.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Z?.signInWithSolana),{version:"1",domain:Ce.host,uri:Ce.href}),ae?{statement:ae}:null));let Q;if(Array.isArray(Ae)&&Ae[0]&&typeof Ae[0]=="object")Q=Ae[0];else if(Ae&&typeof Ae=="object"&&"signedMessage"in Ae&&"signature"in Ae)Q=Ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)z=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),U=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ce)||typeof ce.signMessage!="function"||!("publicKey"in ce)||typeof ce!="object"||!ce.publicKey||!("toBase58"in ce.publicKey)||typeof ce.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");z=[`${Ce.host} wants you to sign in with your Solana account:`,ce.publicKey.toBase58(),...ae?["",ae,""]:[""],"Version: 1",`URI: ${Ce.href}`,`Issued At: ${(p=(f=Z?.signInWithSolana)===null||f===void 0?void 0:f.issuedAt)!==null&&p!==void 0?p:new Date().toISOString()}`,...!((g=Z?.signInWithSolana)===null||g===void 0)&&g.notBefore?[`Not Before: ${Z.signInWithSolana.notBefore}`]:[],...!((b=Z?.signInWithSolana)===null||b===void 0)&&b.expirationTime?[`Expiration Time: ${Z.signInWithSolana.expirationTime}`]:[],...!((S=Z?.signInWithSolana)===null||S===void 0)&&S.chainId?[`Chain ID: ${Z.signInWithSolana.chainId}`]:[],...!((_=Z?.signInWithSolana)===null||_===void 0)&&_.nonce?[`Nonce: ${Z.signInWithSolana.nonce}`]:[],...!((v=Z?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${Z.signInWithSolana.requestId}`]:[],...!((O=(N=Z?.signInWithSolana)===null||N===void 0?void 0:N.resources)===null||O===void 0)&&O.length?["Resources",...Z.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const Ae=await ce.signMessage(new TextEncoder().encode(z),"utf8");if(!Ae||!(Ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");U=Ae}}try{const{data:Y,error:J}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:z,signature:ts(U)},!((B=r.options)===null||B===void 0)&&B.captchaToken?{gotrue_meta_security:{captcha_token:(k=r.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Xi});if(J)throw J;if(!Y||!Y.session||!Y.user){const ae=new Hs;return this._returnResult({data:{user:null,session:null},error:ae})}return Y.session&&(await this._saveSession(Y.session),await this._notifyAllSubscribers("SIGNED_IN",Y.session)),this._returnResult({data:Object.assign({},Y),error:J})}catch(Y){if(Le(Y))return this._returnResult({data:{user:null,session:null},error:Y});throw Y}}async _exchangeCodeForSession(r){const l=await Ka(this.storage,`${this.storageKey}-code-verifier`),[f,p]=(l??"").split("/");try{if(!f&&this.flowType==="pkce")throw new bx;const{data:g,error:b}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:f},xform:Xi});if(await jn(this.storage,`${this.storageKey}-code-verifier`),b)throw b;if(!g||!g.session||!g.user){const S=new Hs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:S})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign(Object.assign({},g),{redirectType:p??null}),error:b})}catch(g){if(await jn(this.storage,`${this.storageKey}-code-verifier`),Le(g))return this._returnResult({data:{user:null,session:null,redirectType:null},error:g});throw g}}async signInWithIdToken(r){try{const{options:l,provider:f,token:p,access_token:g,nonce:b}=r,S=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:f,id_token:p,access_token:g,nonce:b,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Xi}),{data:_,error:v}=S;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!_||!_.session||!_.user){const N=new Hs;return this._returnResult({data:{user:null,session:null},error:N})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:_,error:v})}catch(l){if(Le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOtp(r){var l,f,p,g,b;try{if("email"in r){const{email:S,options:_}=r;let v=null,N=null;this.flowType==="pkce"&&([v,N]=await Vs(this.storage,this.storageKey));const{error:O}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:S,data:(l=_?.data)!==null&&l!==void 0?l:{},create_user:(f=_?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:v,code_challenge_method:N},redirectTo:_?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:O})}if("phone"in r){const{phone:S,options:_}=r,{data:v,error:N}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:S,data:(p=_?.data)!==null&&p!==void 0?p:{},create_user:(g=_?.shouldCreateUser)!==null&&g!==void 0?g:!0,gotrue_meta_security:{captcha_token:_?.captchaToken},channel:(b=_?.channel)!==null&&b!==void 0?b:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:N})}throw new Lc("You must provide either an email or phone number.")}catch(S){if(await jn(this.storage,`${this.storageKey}-code-verifier`),Le(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async verifyOtp(r){var l,f;try{let p,g;"options"in r&&(p=(l=r.options)===null||l===void 0?void 0:l.redirectTo,g=(f=r.options)===null||f===void 0?void 0:f.captchaToken);const{data:b,error:S}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:g}}),redirectTo:p,xform:Xi});if(S)throw S;if(!b)throw new Error("An error occurred on token verification.");const _=b.session,v=b.user;return _?.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(p){if(Le(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSSO(r){var l,f,p,g,b;try{let S=null,_=null;this.flowType==="pkce"&&([S,_]=await Vs(this.storage,this.storageKey));const v=await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(f=(l=r.options)===null||l===void 0?void 0:l.redirectTo)!==null&&f!==void 0?f:void 0}),!((p=r?.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:S,code_challenge_method:_}),headers:this.headers,xform:Yx});return!((g=v.data)===null||g===void 0)&&g.url&&Un()&&!(!((b=r.options)===null||b===void 0)&&b.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(S){if(await jn(this.storage,`${this.storageKey}-code-verifier`),Le(S))return this._returnResult({data:null,error:S});throw S}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:l},error:f}=r;if(f)throw f;if(!l)throw new wi;const{error:p}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return this._returnResult({data:{user:null,session:null},error:p})})}catch(r){if(Le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const l=`${this.url}/resend`;if("email"in r){const{email:f,type:p,options:g}=r,{error:b}=await Ve(this.fetch,"POST",l,{headers:this.headers,body:{email:f,type:p,gotrue_meta_security:{captcha_token:g?.captchaToken}},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}else if("phone"in r){const{phone:f,type:p,options:g}=r,{data:b,error:S}=await Ve(this.fetch,"POST",l,{headers:this.headers,body:{phone:f,type:p,gotrue_meta_security:{captcha_token:g?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:S})}throw new Lc("You must provide either an email or phone number and a type")}catch(l){if(Le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async l=>l))}async _acquireLock(r,l){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const f=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),p=(async()=>(await f,await l()))();return this.pendingInLock.push((async()=>{try{await p}catch{}})()),p}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const f=l();for(this.pendingInLock.push((async()=>{try{await f}catch{}})()),await f;this.pendingInLock.length;){const p=[...this.pendingInLock];await Promise.all(p),this.pendingInLock.splice(0,p.length)}return await f}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await r(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const l=await Ka(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?r=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const f=r.expires_at?r.expires_at*1e3-Date.now()<Jh:!1;if(this._debug("#__loadSession()",`session has${f?"":" not"} expired`,"expires_at",r.expires_at),!f){if(this.userStorage){const b=await Ka(this.userStorage,this.storageKey+"-user");b?.user?r.user=b.user:r.user=tf()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const b={value:this.suppressGetSessionWarning};r.user=Hx(r.user,b),b.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:p,error:g}=await this._callRefreshToken(r.refresh_token);return g?this._returnResult({data:{session:null},error:g}):this._returnResult({data:{session:p},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const l=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return l.data.user&&(this.suppressGetSessionWarning=!0),l}async _getUser(r){try{return r?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Ea}):await this._useSession(async l=>{var f,p,g;const{data:b,error:S}=l;if(S)throw S;return!(!((f=b.session)===null||f===void 0)&&f.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wi}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(g=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0,xform:Ea})})}catch(l){if(Le(l))return $h(l)&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:l});throw l}}async updateUser(r,l={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,l))}async _updateUser(r,l={}){try{return await this._useSession(async f=>{const{data:p,error:g}=f;if(g)throw g;if(!p.session)throw new wi;const b=p.session;let S=null,_=null;this.flowType==="pkce"&&r.email!=null&&([S,_]=await Vs(this.storage,this.storageKey));const{data:v,error:N}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:S,code_challenge_method:_}),jwt:b.access_token,xform:Ea});if(N)throw N;return b.user=v.user,await this._saveSession(b),await this._notifyAllSubscribers("USER_UPDATED",b),this._returnResult({data:{user:b.user},error:null})})}catch(f){if(await jn(this.storage,`${this.storageKey}-code-verifier`),Le(f))return this._returnResult({data:{user:null},error:f});throw f}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new wi;const l=Date.now()/1e3;let f=l,p=!0,g=null;const{payload:b}=jc(r.access_token);if(b.exp&&(f=b.exp,p=f<=l),p){const{data:S,error:_}=await this._callRefreshToken(r.refresh_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!S)return{data:{user:null,session:null},error:null};g=S}else{const{data:S,error:_}=await this._getUser(r.access_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});g={access_token:r.access_token,refresh_token:r.refresh_token,user:S.user,token_type:"bearer",expires_in:f-l,expires_at:f},await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)}return this._returnResult({data:{user:g.user,session:g},error:null})}catch(l){if(Le(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async l=>{var f;if(!r){const{data:b,error:S}=l;if(S)throw S;r=(f=b.session)!==null&&f!==void 0?f:void 0}if(!r?.refresh_token)throw new wi;const{data:p,error:g}=await this._callRefreshToken(r.refresh_token);return g?this._returnResult({data:{user:null,session:null},error:g}):p?this._returnResult({data:{user:p.user,session:p},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(l){if(Le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async _getSessionFromURL(r,l){try{if(!Un())throw new kc("No browser detected.");if(r.error||r.error_description||r.error_code)throw new kc(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new ag("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new kc("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new ag("No code detected.");const{data:ae,error:Z}=await this._exchangeCodeForSession(r.code);if(Z)throw Z;const ce=new URL(window.location.href);return ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ce.toString()),{data:{session:ae.session,redirectType:null},error:null}}const{provider_token:f,provider_refresh_token:p,access_token:g,refresh_token:b,expires_in:S,expires_at:_,token_type:v}=r;if(!g||!S||!b||!v)throw new kc("No session defined in URL");const N=Math.round(Date.now()/1e3),O=parseInt(S);let B=N+O;_&&(B=parseInt(_));const k=B-N;k*1e3<=Zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${O}s`);const z=B-O;N-z>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",z,B,N):N-z<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",z,B,N);const{data:U,error:Y}=await this._getUser(g);if(Y)throw Y;const J={provider_token:f,provider_refresh_token:p,access_token:g,expires_in:O,expires_at:B,refresh_token:b,token_type:v,user:U.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:J,redirectType:r.type},error:null})}catch(f){if(Le(f))return this._returnResult({data:{session:null,redirectType:null},error:f});throw f}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const l=await Ka(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&l)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async l=>{var f;const{data:p,error:g}=l;if(g&&!$h(g))return this._returnResult({error:g});const b=(f=p.session)===null||f===void 0?void 0:f.access_token;if(b){const{error:S}=await this.admin.signOut(b,r);if(S&&!(wx(S)&&(S.status===404||S.status===401||S.status===403)||$h(S)))return this._returnResult({error:S})}return r!=="others"&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const l=Nx(),f={id:l,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,f),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:f}}}async _emitInitialSession(r){return await this._useSession(async l=>{var f,p;try{const{data:{session:g},error:b}=l;if(b)throw b;await((f=this.stateChangeEmitters.get(r))===null||f===void 0?void 0:f.callback("INITIAL_SESSION",g)),this._debug("INITIAL_SESSION","callback id",r,"session",g)}catch(g){await((p=this.stateChangeEmitters.get(r))===null||p===void 0?void 0:p.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",g),console.error(g)}})}async resetPasswordForEmail(r,l={}){let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Vs(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:f,code_challenge_method:p,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(g){if(await jn(this.storage,`${this.storageKey}-code-verifier`),Le(g))return this._returnResult({data:null,error:g});throw g}}async getUserIdentities(){var r;try{const{data:l,error:f}=await this.getUser();if(f)throw f;return this._returnResult({data:{identities:(r=l.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(l){if(Le(l))return this._returnResult({data:null,error:l});throw l}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var l;try{const{data:f,error:p}=await this._useSession(async g=>{var b,S,_,v,N;const{data:O,error:B}=g;if(B)throw B;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(b=r.options)===null||b===void 0?void 0:b.redirectTo,scopes:(S=r.options)===null||S===void 0?void 0:S.scopes,queryParams:(_=r.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",k,{headers:this.headers,jwt:(N=(v=O.session)===null||v===void 0?void 0:v.access_token)!==null&&N!==void 0?N:void 0})});if(p)throw p;return Un()&&!(!((l=r.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f?.url),this._returnResult({data:{provider:r.provider,url:f?.url},error:null})}catch(f){if(Le(f))return this._returnResult({data:{provider:r.provider,url:null},error:f});throw f}}async linkIdentityIdToken(r){return await this._useSession(async l=>{var f;try{const{error:p,data:{session:g}}=l;if(p)throw p;const{options:b,provider:S,token:_,access_token:v,nonce:N}=r,O=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(f=g?.access_token)!==null&&f!==void 0?f:void 0,body:{provider:S,id_token:_,access_token:v,nonce:N,link_identity:!0,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Xi}),{data:B,error:k}=O;return k?this._returnResult({data:{user:null,session:null},error:k}):!B||!B.session||!B.user?this._returnResult({data:{user:null,session:null},error:new Hs}):(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("USER_UPDATED",B.session)),this._returnResult({data:B,error:k}))}catch(p){if(await jn(this.storage,`${this.storageKey}-code-verifier`),Le(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}})}async unlinkIdentity(r){try{return await this._useSession(async l=>{var f,p;const{data:g,error:b}=l;if(b)throw b;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(p=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})})}catch(l){if(Le(l))return this._returnResult({data:null,error:l});throw l}}async _refreshAccessToken(r){const l=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{const f=Date.now();return await Dx(async p=>(p>0&&await Rx(200*Math.pow(2,p-1)),this._debug(l,"refreshing attempt",p),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Xi})),(p,g)=>{const b=200*Math.pow(2,p);return g&&ef(g)&&Date.now()+b-f<Zs})}catch(f){if(this._debug(l,"error",f),Le(f))return this._returnResult({data:{session:null,user:null},error:f});throw f}finally{this._debug(l,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,l){const f=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",l,"url",f),Un()&&!l.skipBrowserRedirect&&window.location.assign(f),{data:{provider:r,url:f},error:null}}async _recoverAndRefresh(){var r,l;const f="#_recoverAndRefresh()";this._debug(f,"begin");try{const p=await Ka(this.storage,this.storageKey);if(p&&this.userStorage){let b=await Ka(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:p.user},await Qs(this.userStorage,this.storageKey+"-user",b)),p.user=(r=b?.user)!==null&&r!==void 0?r:tf()}else if(p&&!p.user&&!p.user){const b=await Ka(this.storage,this.storageKey+"-user");b&&b?.user?(p.user=b.user,await jn(this.storage,this.storageKey+"-user"),await Qs(this.storage,this.storageKey,p)):p.user=tf()}if(this._debug(f,"session from storage",p),!this._isValidSession(p)){this._debug(f,"session is not valid"),p!==null&&await this._removeSession();return}const g=((l=p.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<Jh;if(this._debug(f,`session has${g?"":" not"} expired with margin of ${Jh}s`),g){if(this.autoRefreshToken&&p.refresh_token){const{error:b}=await this._callRefreshToken(p.refresh_token);b&&(console.error(b),ef(b)||(this._debug(f,"refresh failed with a non-retryable error, removing the session",b),await this._removeSession()))}}else if(p.user&&p.user.__isUserNotAvailableProxy===!0)try{const{data:b,error:S}=await this._getUser(p.access_token);!S&&b?.user?(p.user=b.user,await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)):this._debug(f,"could not get user data, skipping SIGNED_IN notification")}catch(b){console.error("Error getting user data:",b),this._debug(f,"error getting user data, skipping SIGNED_IN notification",b)}else await this._notifyAllSubscribers("SIGNED_IN",p)}catch(p){this._debug(f,"error",p),console.error(p);return}finally{this._debug(f,"end")}}async _callRefreshToken(r){var l,f;if(!r)throw new wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const p=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(p,"begin");try{this.refreshingDeferred=new Xc;const{data:g,error:b}=await this._refreshAccessToken(r);if(b)throw b;if(!g.session)throw new wi;await this._saveSession(g.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",g.session);const S={data:g.session,error:null};return this.refreshingDeferred.resolve(S),S}catch(g){if(this._debug(p,"error",g),Le(g)){const b={data:null,error:g};return ef(g)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(b),b}throw(f=this.refreshingDeferred)===null||f===void 0||f.reject(g),g}finally{this.refreshingDeferred=null,this._debug(p,"end")}}async _notifyAllSubscribers(r,l,f=!0){const p=`#_notifyAllSubscribers(${r})`;this._debug(p,"begin",l,`broadcast = ${f}`);try{this.broadcastChannel&&f&&this.broadcastChannel.postMessage({event:r,session:l});const g=[],b=Array.from(this.stateChangeEmitters.values()).map(async S=>{try{await S.callback(r,l)}catch(_){g.push(_)}});if(await Promise.all(b),g.length>0){for(let S=0;S<g.length;S+=1)console.error(g[S]);throw g[0]}}finally{this._debug(p,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await jn(this.storage,`${this.storageKey}-code-verifier`);const l=Object.assign({},r),f=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!f&&l.user&&await Qs(this.userStorage,this.storageKey+"-user",{user:l.user});const p=Object.assign({},l);delete p.user;const g=ug(p);await Qs(this.storage,this.storageKey,g)}else{const p=ug(l);await Qs(this.storage,this.storageKey,p)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await jn(this.storage,this.storageKey),await jn(this.storage,this.storageKey+"-code-verifier"),await jn(this.storage,this.storageKey+"-user"),this.userStorage&&await jn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Un()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Zs);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const l=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=l,l&&typeof l=="object"&&typeof l.unref=="function"?l.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(l)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const l=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,l&&clearTimeout(l)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async l=>{const{data:{session:f}}=l;if(!f||!f.refresh_token||!f.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const p=Math.floor((f.expires_at*1e3-r)/Zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${p} ticks, a tick lasts ${Zs}ms, refresh threshold is ${Ef} ticks`),p<=Ef&&await this._callRefreshToken(f.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof h2)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Un()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(r){this._debug("#visibilityChangedCallback","error",r)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const l=`#_onVisibilityChanged(${r})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,l,f){const p=[`provider=${encodeURIComponent(l)}`];if(f?.redirectTo&&p.push(`redirect_to=${encodeURIComponent(f.redirectTo)}`),f?.scopes&&p.push(`scopes=${encodeURIComponent(f.scopes)}`),this.flowType==="pkce"){const[g,b]=await Vs(this.storage,this.storageKey),S=new URLSearchParams({code_challenge:`${encodeURIComponent(g)}`,code_challenge_method:`${encodeURIComponent(b)}`});p.push(S.toString())}if(f?.queryParams){const g=new URLSearchParams(f.queryParams);p.push(g.toString())}return f?.skipBrowserRedirect&&p.push(`skip_http_redirect=${f.skipBrowserRedirect}`),`${r}?${p.join("&")}`}async _unenroll(r){try{return await this._useSession(async l=>{var f;const{data:p,error:g}=l;return g?this._returnResult({data:null,error:g}):await Ve(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token})})}catch(l){if(Le(l))return this._returnResult({data:null,error:l});throw l}}async _enroll(r){try{return await this._useSession(async l=>{var f,p;const{data:g,error:b}=l;if(b)return this._returnResult({data:null,error:b});const S=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:_,error:v}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:S,headers:this.headers,jwt:(f=g?.session)===null||f===void 0?void 0:f.access_token});return v?this._returnResult({data:null,error:v}):(r.factorType==="totp"&&_.type==="totp"&&(!((p=_?.totp)===null||p===void 0)&&p.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),this._returnResult({data:_,error:null}))})}catch(l){if(Le(l))return this._returnResult({data:null,error:l});throw l}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var f;const{data:p,error:g}=l;if(g)return this._returnResult({data:null,error:g});const b=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?oy(r.webauthn.credential_response):cy(r.webauthn.credential_response)})}:{code:r.code}),{data:S,error:_}=await Ve(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:b,headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token});return _?this._returnResult({data:null,error:_}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+S.expires_in},S)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",S),this._returnResult({data:S,error:_}))})}catch(l){if(Le(l))return this._returnResult({data:null,error:l});throw l}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var f;const{data:p,error:g}=l;if(g)return this._returnResult({data:null,error:g});const b=await Ve(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(f=p?.session)===null||f===void 0?void 0:f.access_token});if(b.error)return b;const{data:S}=b;if(S.type!=="webauthn")return{data:S,error:null};switch(S.webauthn.type){case"create":return{data:Object.assign(Object.assign({},S),{webauthn:Object.assign(Object.assign({},S.webauthn),{credential_options:Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:sy(S.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},S),{webauthn:Object.assign(Object.assign({},S.webauthn),{credential_options:Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:ly(S.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(Le(l))return this._returnResult({data:null,error:l});throw l}})}async _challengeAndVerify(r){const{data:l,error:f}=await this._challenge({factorId:r.factorId});return f?this._returnResult({data:null,error:f}):await this._verify({factorId:r.factorId,challengeId:l.id,code:r.code})}async _listFactors(){var r;const{data:{user:l},error:f}=await this.getUser();if(f)return{data:null,error:f};const p={all:[],phone:[],totp:[],webauthn:[]};for(const g of(r=l?.factors)!==null&&r!==void 0?r:[])p.all.push(g),g.status==="verified"&&p[g.factor_type].push(g);return{data:p,error:null}}async _getAuthenticatorAssuranceLevel(r){var l,f,p,g;if(r)try{const{payload:k}=jc(r);let z=null;k.aal&&(z=k.aal);let U=z;const{data:{user:Y},error:J}=await this.getUser(r);if(J)return this._returnResult({data:null,error:J});((f=(l=Y?.factors)===null||l===void 0?void 0:l.filter(ce=>ce.status==="verified"))!==null&&f!==void 0?f:[]).length>0&&(U="aal2");const Z=k.amr||[];return{data:{currentLevel:z,nextLevel:U,currentAuthenticationMethods:Z},error:null}}catch(k){if(Le(k))return this._returnResult({data:null,error:k});throw k}const{data:{session:b},error:S}=await this.getSession();if(S)return this._returnResult({data:null,error:S});if(!b)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:_}=jc(b.access_token);let v=null;_.aal&&(v=_.aal);let N=v;((g=(p=b.user.factors)===null||p===void 0?void 0:p.filter(k=>k.status==="verified"))!==null&&g!==void 0?g:[]).length>0&&(N="aal2");const B=_.amr||[];return{data:{currentLevel:v,nextLevel:N,currentAuthenticationMethods:B},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async l=>{const{data:{session:f},error:p}=l;return p?this._returnResult({data:null,error:p}):f?await Ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:f.access_token,xform:g=>({data:g,error:null})}):this._returnResult({data:null,error:new wi})})}catch(l){if(Le(l))return this._returnResult({data:null,error:l});throw l}}async _approveAuthorization(r,l){try{return await this._useSession(async f=>{const{data:{session:p},error:g}=f;if(g)return this._returnResult({data:null,error:g});if(!p)return this._returnResult({data:null,error:new wi});const b=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"approve"},xform:S=>({data:S,error:null})});return b.data&&b.data.redirect_url&&Un()&&!l?.skipBrowserRedirect&&window.location.assign(b.data.redirect_url),b})}catch(f){if(Le(f))return this._returnResult({data:null,error:f});throw f}}async _denyAuthorization(r,l){try{return await this._useSession(async f=>{const{data:{session:p},error:g}=f;if(g)return this._returnResult({data:null,error:g});if(!p)return this._returnResult({data:null,error:new wi});const b=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"deny"},xform:S=>({data:S,error:null})});return b.data&&b.data.redirect_url&&Un()&&!l?.skipBrowserRedirect&&window.location.assign(b.data.redirect_url),b})}catch(f){if(Le(f))return this._returnResult({data:null,error:f});throw f}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:l},error:f}=r;return f?this._returnResult({data:null,error:f}):l?await Ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,xform:p=>({data:p,error:null})}):this._returnResult({data:null,error:new wi})})}catch(r){if(Le(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async l=>{const{data:{session:f},error:p}=l;return p?this._returnResult({data:null,error:p}):f?(await Ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:f.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new wi})})}catch(l){if(Le(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(r,l={keys:[]}){let f=l.keys.find(S=>S.kid===r);if(f)return f;const p=Date.now();if(f=this.jwks.keys.find(S=>S.kid===r),f&&this.jwks_cached_at+xx>p)return f;const{data:g,error:b}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(b)throw b;return!g.keys||g.keys.length===0||(this.jwks=g,this.jwks_cached_at=p,f=g.keys.find(S=>S.kid===r),!f)?null:f}async getClaims(r,l={}){try{let f=r;if(!f){const{data:k,error:z}=await this.getSession();if(z||!k.session)return this._returnResult({data:null,error:z});f=k.session.access_token}const{header:p,payload:g,signature:b,raw:{header:S,payload:_}}=jc(f);l?.allowExpired||zx(g.exp);const v=!p.alg||p.alg.startsWith("HS")||!p.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(p.kid,l?.keys?{keys:l.keys}:l?.jwks);if(!v){const{error:k}=await this.getUser(f);if(k)throw k;return{data:{claims:g,header:p,signature:b},error:null}}const N=Px(p.alg),O=await crypto.subtle.importKey("jwk",v,N,!0,["verify"]);if(!await crypto.subtle.verify(N,O,b,Cx(`${S}.${_}`)))throw new _f("Invalid JWT signature");return{data:{claims:g,header:p,signature:b},error:null}}catch(f){if(Le(f))return this._returnResult({data:null,error:f});throw f}}}so.nextInstanceID={};const yy=so,wy="2.93.3";let Jl="";typeof Deno<"u"?Jl="deno":typeof document<"u"?Jl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jl="react-native":Jl="node";const vy={"X-Client-Info":`supabase-js-${Jl}/${wy}`},by={headers:vy},Ey={schema:"public"},Ay={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Sy={};function lo(o){"@babel/helpers - typeof";return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},lo(o)}function _y(o,r){if(lo(o)!="object"||!o)return o;var l=o[Symbol.toPrimitive];if(l!==void 0){var f=l.call(o,r);if(lo(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}function Cy(o){var r=_y(o,"string");return lo(r)=="symbol"?r:r+""}function Ty(o,r,l){return(r=Cy(r))in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function xg(o,r){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);r&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable})),l.push.apply(l,f)}return l}function ln(o){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?xg(Object(l),!0).forEach(function(f){Ty(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):xg(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}const Ny=o=>o?(...r)=>o(...r):(...r)=>fetch(...r),Oy=()=>Headers,Iy=(o,r,l)=>{const f=Ny(l),p=Oy();return async(g,b)=>{var S;const _=(S=await r())!==null&&S!==void 0?S:o;let v=new p(b?.headers);return v.has("apikey")||v.set("apikey",o),v.has("Authorization")||v.set("Authorization",`Bearer ${_}`),f(g,ln(ln({},b),{},{headers:v}))}};function Ry(o){return o.endsWith("/")?o:o+"/"}function Dy(o,r){var l,f;const{db:p,auth:g,realtime:b,global:S}=o,{db:_,auth:v,realtime:N,global:O}=r,B={db:ln(ln({},_),p),auth:ln(ln({},v),g),realtime:ln(ln({},N),b),storage:{},global:ln(ln(ln({},O),S),{},{headers:ln(ln({},(l=O?.headers)!==null&&l!==void 0?l:{}),(f=S?.headers)!==null&&f!==void 0?f:{})}),accessToken:async()=>""};return o.accessToken?B.accessToken=o.accessToken:delete B.accessToken,B}function My(o){const r=o?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ry(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var By=class extends yy{constructor(o){super(o)}},Ly=class{constructor(o,r,l){var f,p;this.supabaseUrl=o,this.supabaseKey=r;const g=My(o);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const b=`sb-${g.hostname.split(".")[0]}-auth-token`,S={db:Ey,realtime:Sy,auth:ln(ln({},Ay),{},{storageKey:b}),global:by},_=Dy(l??{},S);if(this.storageKey=(f=_.auth.storageKey)!==null&&f!==void 0?f:"",this.headers=(p=_.global.headers)!==null&&p!==void 0?p:{},_.accessToken)this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(N,O)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(O)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=_.auth)!==null&&v!==void 0?v:{},this.headers,_.global.fetch)}this.fetch=Iy(r,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(ln({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(N=>this.realtime.setAuth(N)).catch(N=>console.warn("Failed to set initial Realtime auth token:",N)),this.rest=new wp(new URL("rest/v1",g).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new fx(this.storageUrl.href,this.headers,this.fetch,l?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new gp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(o){return this.rest.from(o)}schema(o){return this.rest.schema(o)}rpc(o,r={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(o,r,l)}channel(o,r={config:{}}){return this.realtime.channel(o,r)}getChannels(){return this.realtime.getChannels()}removeChannel(o){return this.realtime.removeChannel(o)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var o=this,r,l;if(o.accessToken)return await o.accessToken();const{data:f}=await o.auth.getSession();return(r=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&r!==void 0?r:o.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:o,persistSession:r,detectSessionInUrl:l,storage:f,userStorage:p,storageKey:g,flowType:b,lock:S,debug:_,throwOnError:v},N,O){const B={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new By({url:this.authUrl.href,headers:ln(ln({},B),N),storageKey:g,autoRefreshToken:o,persistSession:r,detectSessionInUrl:l,storage:f,userStorage:p,flowType:b,lock:S,debug:_,throwOnError:v,fetch:O,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(o){return new kp(this.realtimeUrl.href,ln(ln({},o),{},{params:ln(ln({},{apikey:this.supabaseKey}),o?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,r)=>{this._handleTokenChanged(o,"CLIENT",r?.access_token)})}_handleTokenChanged(o,r,l){(o==="TOKEN_REFRESHED"||o==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):o==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ky=(o,r,l)=>new Ly(o,r,l);function jy(){if(typeof window<"u")return!1;const o=globalThis.process;if(!o)return!1;const r=o.version;if(r==null)return!1;const l=r.match(/^v(\d+)\./);return l?parseInt(l[1],10)<=18:!1}jy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Uy="https://fjfeecztgyqjgpobyoem.supabase.co",zy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqZmVlY3p0Z3lxamdwb2J5b2VtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4NDc0MDksImV4cCI6MjA4NTQyMzQwOX0.9MY34pcJGIlIs0e24xzbYUWfpr7GeG3-BLIcGtq0XL0",Xe=ky(Uy,zy),g2=me.createContext();function Py({children:o}){const[r,l]=me.useState(null),[f,p]=me.useState(!0);me.useEffect(()=>{const O=localStorage.getItem("app_user");if(O)try{l(JSON.parse(O))}catch(B){console.error("Invalid session data",B),localStorage.removeItem("app_user")}p(!1)},[]);const g=async(O,B)=>{try{if(!Xe)throw new Error("Supabase not connected");const{data:k,error:z}=await Xe.from("app_users").select("*").eq("pin",O).single();if(z||!k)throw new Error("Invalid PIN");const U={id:k.id,username:k.username,role:k.role,full_name:k.full_name};return l(U),B?localStorage.setItem("app_user",JSON.stringify(U)):localStorage.removeItem("app_user"),{success:!0}}catch(k){return{success:!1,error:k.message}}},b=()=>{l(null),localStorage.removeItem("app_user")},S=r&&(r.role==="ADMIN"||r.role==="TEACHER"||r.role==="ASSISTANT_TEACHER"),_=r&&r.role==="ADMIN",v=r&&(r.role==="ADMIN"||r.role==="TEACHER"),N={user:r,loading:f,login:g,logout:b,permissions:{canEditStudents:S,canDeleteStudents:_,canUnlockAttendance:v}};return A.jsx(g2.Provider,{value:N,children:!f&&o})}function Sa(){return me.useContext(g2)}function Fy(){let o=localStorage.getItem("virtual_device_id");return o||(o="dev_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),localStorage.setItem("virtual_device_id",o)),o}function Hy({onFinish:o}){me.useEffect(()=>{const f=setTimeout(o,2e3);return(async()=>{try{const g=Fy(),b=navigator.userAgent;Xe&&await Xe.from("device_logs").insert([{device_id:g,user_agent:b}])}catch(g){console.warn("Logging failed:",g)}})(),()=>clearTimeout(f)},[o]);const[r,l]=me.useState(!1);return me.useEffect(()=>{const f=setTimeout(()=>l(!0),5e3);return()=>clearTimeout(f)},[]),A.jsx("div",{className:"splash-screen",children:A.jsxs("div",{className:"splash-content",children:[A.jsx("img",{src:"/kids-church-app/newlogo.png",alt:"Logo",className:"splash-logo",style:{width:"120px",height:"120px",borderRadius:"20px",marginBottom:"16px",objectFit:"cover"}}),A.jsx("h1",{className:"splash-title",children:"CityPraise"}),A.jsx("p",{className:"splash-text",children:"Connect"}),r&&A.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},style:{marginTop:"32px",padding:"8px 16px",background:"transparent",border:"1px solid #fff",color:"#fff",borderRadius:"8px",cursor:"pointer",opacity:.7},children:"Tap to Reset App"})]})})}const m2=(...o)=>o.filter((r,l,f)=>!!r&&r.trim()!==""&&f.indexOf(r)===l).join(" ").trim();const Vy=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Gy=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,f)=>f?f.toUpperCase():l.toLowerCase());const yg=o=>{const r=Gy(o);return r.charAt(0).toUpperCase()+r.slice(1)};var qy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Yy=o=>{for(const r in o)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};const Xy=me.forwardRef(({color:o="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:f,className:p="",children:g,iconNode:b,...S},_)=>me.createElement("svg",{ref:_,...qy,width:r,height:r,stroke:o,strokeWidth:f?Number(l)*24/Number(r):l,className:m2("lucide",p),...!g&&!Yy(S)&&{"aria-hidden":"true"},...S},[...b.map(([v,N])=>me.createElement(v,N)),...Array.isArray(g)?g:[g]]));const wt=(o,r)=>{const l=me.forwardRef(({className:f,...p},g)=>me.createElement(Xy,{ref:g,iconNode:r,className:m2(`lucide-${Vy(yg(o))}`,`lucide-${o}`,f),...p}));return l.displayName=yg(o),l};const Wy=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Zy=wt("activity",Wy);const Qy=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zn=wt("arrow-left",Qy);const Ky=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Jy=wt("arrow-right",Ky);const $y=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],p2=wt("arrow-up-down",$y);const ew=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],tw=wt("award",ew);const nw=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],oo=wt("book-open",nw);const iw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rw=wt("calendar",iw);const aw=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],sw=wt("chart-no-axes-column",aw);const lw=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tl=wt("circle-check-big",lw);const ow=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cw=wt("circle-question-mark",ow);const uw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],x2=wt("clipboard-list",uw);const hw=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fw=wt("clock",hw);const dw=[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],y2=wt("contact",dw);const gw=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],mw=wt("flame",gw);const pw=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],xw=wt("gift",pw);const yw=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],ww=wt("heart-handshake",yw);const vw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],bw=wt("lock-open",vw);const Ew=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wg=wt("lock",Ew);const Aw=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],w2=wt("log-out",Aw);const Sw=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Of=wt("message-square",Sw);const _w=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Cw=wt("pen-line",_w);const Tw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],v2=wt("pen",Tw);const Nw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],If=wt("plus",Nw);const Ow=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],b2=wt("qr-code",Ow);const Iw=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],E2=wt("scan",Iw);const Rw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ho=wt("search",Rw);const Dw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Rf=wt("shield",Dw);const Mw=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],A2=wt("star",Mw);const Bw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Df=wt("trash-2",Bw);const Lw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mf=wt("triangle-alert",Lw);const kw=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],S2=wt("trophy",kw);const jw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bf=wt("user",jw);const Uw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wc=wt("users",Uw);function zw(){const{login:o,loading:r}=Sa(),[l,f]=me.useState(null),[p,g]=me.useState(""),[b,S]=me.useState(""),[_,v]=me.useState(!1),[N,O]=me.useState(!1),B=Y=>{p.length<6&&g(J=>J+Y),S("")},k=()=>g(Y=>Y.slice(0,-1)),z=()=>g(""),U=async()=>{if(!p)return;v(!0),S("");const Y=await o(p,N);Y.success||(S(Y.error||"Invalid PIN"),g("")),v(!1)};return A.jsx("div",{className:"page fade-in",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"#F3F4F6"},children:A.jsxs("div",{className:"card",style:{padding:"32px",width:"100%",maxWidth:"400px",textAlign:"center"},children:[A.jsx("img",{src:"/kids-church-app/newlogo.png",alt:"Logo",style:{width:"80px",height:"80px",borderRadius:"16px",marginBottom:"8px",objectFit:"cover"}}),A.jsx("h2",{style:{marginBottom:"24px",color:"#1F2937"},children:"Login"}),A.jsxs("div",{style:{marginBottom:"24px"},children:[A.jsx("div",{style:{background:"#F9FAFB",border:"2px solid #E5E7EB",borderRadius:"12px",padding:"16px",fontSize:"24px",letterSpacing:"8px",fontWeight:"bold",minHeight:"64px",display:"flex",alignItems:"center",justifyContent:"center",color:"#374151"},children:p?"*".repeat(p.length):A.jsx("span",{style:{color:"#9CA3AF",fontSize:"16px",letterSpacing:"normal",fontWeight:"normal"},children:"Enter PIN"})}),b&&A.jsxs("div",{style:{color:"#DC2626",fontSize:"14px",marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[A.jsx(Mf,{size:14})," ",b]})]}),A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"24px"},children:[[1,2,3,4,5,6,7,8,9].map(Y=>A.jsx("button",{onClick:()=>B(Y),className:"btn secondary",style:{fontSize:"20px",padding:"16px"},children:Y},Y)),A.jsx("button",{onClick:z,className:"btn secondary",style:{fontSize:"14px",padding:"16px",color:"#EF4444"},children:"C"}),A.jsx("button",{onClick:()=>B(0),className:"btn secondary",style:{fontSize:"20px",padding:"16px"},children:"0"}),A.jsx("button",{onClick:k,className:"btn secondary",style:{fontSize:"14px",padding:"16px"},children:""})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:[A.jsx("input",{type:"checkbox",id:"remember",checked:N,onChange:Y=>O(Y.target.checked),style:{width:"18px",height:"18px"}}),A.jsx("label",{htmlFor:"remember",style:{fontSize:"14px",color:"#4B5563",cursor:"pointer"},children:"Keep me signed in"})]}),A.jsxs("button",{className:"btn full-width",onClick:U,disabled:_||p.length<4,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[_?"Verifying...":"Login"," ",A.jsx(Jy,{size:20})]})]})})}var Oe;(function(o){o[o.QR_CODE=0]="QR_CODE",o[o.AZTEC=1]="AZTEC",o[o.CODABAR=2]="CODABAR",o[o.CODE_39=3]="CODE_39",o[o.CODE_93=4]="CODE_93",o[o.CODE_128=5]="CODE_128",o[o.DATA_MATRIX=6]="DATA_MATRIX",o[o.MAXICODE=7]="MAXICODE",o[o.ITF=8]="ITF",o[o.EAN_13=9]="EAN_13",o[o.EAN_8=10]="EAN_8",o[o.PDF_417=11]="PDF_417",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Oe||(Oe={}));var vg=new Map([[Oe.QR_CODE,"QR_CODE"],[Oe.AZTEC,"AZTEC"],[Oe.CODABAR,"CODABAR"],[Oe.CODE_39,"CODE_39"],[Oe.CODE_93,"CODE_93"],[Oe.CODE_128,"CODE_128"],[Oe.DATA_MATRIX,"DATA_MATRIX"],[Oe.MAXICODE,"MAXICODE"],[Oe.ITF,"ITF"],[Oe.EAN_13,"EAN_13"],[Oe.EAN_8,"EAN_8"],[Oe.PDF_417,"PDF_417"],[Oe.RSS_14,"RSS_14"],[Oe.RSS_EXPANDED,"RSS_EXPANDED"],[Oe.UPC_A,"UPC_A"],[Oe.UPC_E,"UPC_E"],[Oe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),bg;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.URL=1]="URL"})(bg||(bg={}));function Pw(o){return Object.values(Oe).includes(o)}var Aa;(function(o){o[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Aa||(Aa={}));var Qi=(function(){function o(){}return o.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",o.SCAN_DEFAULT_FPS=2,o.DEFAULT_DISABLE_FLIP=!1,o.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,o.DEFAULT_SUPPORTED_SCAN_TYPE=[Aa.SCAN_TYPE_CAMERA,Aa.SCAN_TYPE_FILE],o})(),_2=(function(){function o(r,l){this.format=r,this.formatName=l}return o.prototype.toString=function(){return this.formatName},o.create=function(r){if(!vg.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new o(r,vg.get(r))},o})(),Eg=(function(){function o(){}return o.createFromText=function(r){var l={text:r};return{decodedText:r,result:l}},o.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},o})(),Cf;(function(o){o[o.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",o[o.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",o[o.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Cf||(Cf={}));var C2=(function(){function o(){}return o.createFrom=function(r){return{errorMessage:r,type:Cf.UNKWOWN_ERROR}},o})(),T2=(function(){function o(r){this.verbose=r}return o.prototype.log=function(r){this.verbose&&console.log(r)},o.prototype.warn=function(r){this.verbose&&console.warn(r)},o.prototype.logError=function(r,l){(this.verbose||l===!0)&&console.error(r)},o.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},o})();function cr(o){return typeof o>"u"||o===null}function Fw(o,r,l){return o>l?l:o<r?r:o}var Js=(function(){function o(){}return o.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},o.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},o.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},o.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},o.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},o.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},o.scannerPaused=function(){return"Scanner paused"},o})(),Mt=(function(){function o(){}return o.scanningStatus=function(){return"Scanning"},o.idleStatus=function(){return"Idle"},o.errorStatus=function(){return"Error"},o.permissionStatus=function(){return"Permission"},o.noCameraFoundErrorStatus=function(){return"No Cameras"},o.lastMatch=function(r){return"Last Match: ".concat(r)},o.codeScannerTitle=function(){return"Code Scanner"},o.cameraPermissionTitle=function(){return"Request Camera Permissions"},o.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},o.noCameraFound=function(){return"No camera found"},o.scanButtonStopScanningText=function(){return"Stop Scanning"},o.scanButtonStartScanningText=function(){return"Start Scanning"},o.torchOnButton=function(){return"Switch On Torch"},o.torchOffButton=function(){return"Switch Off Torch"},o.torchOnFailedMessage=function(){return"Failed to turn on torch"},o.torchOffFailedMessage=function(){return"Failed to turn off torch"},o.scanButtonScanningStarting=function(){return"Launching Camera..."},o.textIfCameraScanSelected=function(){return"Scan an Image File"},o.textIfFileScanSelected=function(){return"Scan using camera directly"},o.selectCamera=function(){return"Select Camera"},o.fileSelectionChooseImage=function(){return"Choose Image"},o.fileSelectionChooseAnother=function(){return"Choose Another"},o.fileSelectionNoImageSelected=function(){return"No image choosen"},o.anonymousCameraPrefix=function(){return"Anonymous Camera"},o.dragAndDropMessage=function(){return"Or drop an image to scan"},o.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},o.zoom=function(){return"zoom"},o.loadingImage=function(){return"Loading image..."},o.cameraScanAltText=function(){return"Camera based scan"},o.fileScanAltText=function(){return"Fule based scan"},o})(),Ag=(function(){function o(){}return o.poweredBy=function(){return"Powered by "},o.reportIssues=function(){return"Report issues"},o})(),N2=(function(){function o(){}return o.isMediaStreamConstraintsValid=function(r,l){if(typeof r!="object"){var f=typeof r;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(f,"."),!0),!1}for(var p=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(p),b=Object.keys(r),S=0,_=b;S<_.length;S++){var v=_[S];if(g.has(v))return l.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},o})(),$l={exports:{}},Hw=$l.exports,Sg;function Vw(){return Sg||(Sg=1,(function(o,r){(function(l,f){f(r)})(Hw,(function(l){function f(I){return I==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,t){I.__proto__=t}||function(I,t){for(var i in t)t.hasOwnProperty(i)&&(I[i]=t[i])};function g(I,t){p(I,t);function i(){this.constructor=I}I.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function b(I,t){var i=Object.setPrototypeOf;i?i(I,t):I.__proto__=t}function S(I,t){t===void 0&&(t=I.constructor);var i=Error.captureStackTrace;i&&i(I,t)}var _=(function(I){g(t,I);function t(i){var a=this.constructor,c=I.call(this,i)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),b(c,a.prototype),S(c),c}return t})(Error);class v extends _{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class N extends v{}N.kind="ArgumentException";class O extends v{}O.kind="IllegalArgumentException";class B{constructor(t){if(this.binarizer=t,t===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,a,c){const u=this.binarizer.getLuminanceSource().crop(t,i,a,c);return new B(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new B(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new B(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends v{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class z{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class U{static arraycopy(t,i,a,c,u){for(;u--;)a[c++]=t[i++]}static currentTimeMillis(){return Date.now()}}class Y extends v{}Y.kind="IndexOutOfBoundsException";class J extends Y{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}J.kind="ArrayIndexOutOfBoundsException";class ae{static fill(t,i){for(let a=0,c=t.length;a<c;a++)t[a]=i}static fillWithin(t,i,a,c){ae.rangeCheck(t.length,i,a);for(let u=i;u<a;u++)t[u]=c}static rangeCheck(t,i,a){if(i>a)throw new O("fromIndex("+i+") > toIndex("+a+")");if(i<0)throw new J(i);if(a>t)throw new J(a)}static asList(...t){return t}static create(t,i,a){return Array.from({length:t}).map(u=>Array.from({length:i}).fill(a))}static createInt32Array(t,i,a){return Array.from({length:t}).map(u=>Int32Array.from({length:i}).fill(a))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let a=0,c=t.length;a<c;a++)if(t[a]!==i[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const a of t)i=31*i+a;return i}static fillUint8Array(t,i){for(let a=0;a!==t.length;a++)t[a]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const a=new Uint8Array(i);return a.set(t),a}return t.slice(0,i)}static copyOfRange(t,i,a){const c=a-i,u=new Int32Array(c);return U.arraycopy(t,i,u,0,c),u}static binarySearch(t,i,a){a===void 0&&(a=ae.numberComparator);let c=0,u=t.length-1;for(;c<=u;){const d=u+c>>1,m=a(i,t[d]);if(m>0)c=d+1;else if(m<0)u=d-1;else return d}return-c-1}static numberComparator(t,i){return t-i}}class Z{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let a=31;return i=t<<16,i!==0&&(a-=16,t=i),i=t<<8,i!==0&&(a-=8,t=i),i=t<<4,i!==0&&(a-=4,t=i),i=t<<2,i!==0&&(a-=2,t=i),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}Z.MIN_VALUE_32_BITS=-2147483648,Z.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=ce.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=ce.makeArray(t);U.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const a=this.bits;let c=Math.floor(t/32),u=a[c];u&=~((1<<(t&31))-1);const d=a.length;for(;u===0;){if(++c===d)return i;u=a[c]}const m=c*32+Z.numberOfTrailingZeros(u);return m>i?i:m}getNextUnset(t){const i=this.size;if(t>=i)return i;const a=this.bits;let c=Math.floor(t/32),u=~a[c];u&=~((1<<(t&31))-1);const d=a.length;for(;u===0;){if(++c===d)return i;u=~a[c]}const m=c*32+Z.numberOfTrailingZeros(u);return m>i?i:m}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new O;if(i===t)return;i--;const a=Math.floor(t/32),c=Math.floor(i/32),u=this.bits;for(let d=a;d<=c;d++){const m=d>a?0:t&31,E=(2<<(d<c?31:i&31))-(1<<m);u[d]|=E}}clear(){const t=this.bits.length,i=this.bits;for(let a=0;a<t;a++)i[a]=0}isRange(t,i,a){if(i<t||t<0||i>this.size)throw new O;if(i===t)return!0;i--;const c=Math.floor(t/32),u=Math.floor(i/32),d=this.bits;for(let m=c;m<=u;m++){const y=m>c?0:t&31,C=(2<<(m<u?31:i&31))-(1<<y)&4294967295;if((d[m]&C)!==(a?C:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let a=i;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let a=0;a<i;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new O("Sizes don't match");const i=this.bits;for(let a=0,c=i.length;a<c;a++)i[a]^=t.bits[a]}toBytes(t,i,a,c){for(let u=0;u<c;u++){let d=0;for(let m=0;m<8;m++)this.get(t)&&(d|=1<<7-m),t++;i[a+u]=d}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),a=i+1,c=this.bits;for(let u=0;u<a;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,t[i-u]=d}if(this.size!==a*32){const u=a*32-this.size;let d=t[0]>>>u;for(let m=1;m<a;m++){const y=t[m];d|=y<<32-u,t[m-1]=d,d=y>>>u}t[a-1]=d}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof ce))return!1;const i=t;return this.size===i.size&&ae.equals(this.bits,i.bits)}hashCode(){return 31*this.size+ae.hashCode(this.bits)}toString(){let t="";for(let i=0,a=this.size;i<a;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new ce(this.size,this.bits.slice())}}var Ce;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ce||(Ce={}));var Ae=Ce;class Q extends v{static getFormatInstance(){return new Q}}Q.kind="FormatException";var ne;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(ne||(ne={}));class le{constructor(t,i,a,...c){this.valueIdentifier=t,this.name=a,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=c,le.VALUE_IDENTIFIER_TO_ECI.set(t,this),le.NAME_TO_ECI.set(a,this);const u=this.values;for(let d=0,m=u.length;d!==m;d++){const y=u[d];le.VALUES_TO_ECI.set(y,this)}for(const d of c)le.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new Q("incorect value");const i=le.VALUES_TO_ECI.get(t);if(i===void 0)throw new Q("incorect value");return i}static getCharacterSetECIByName(t){const i=le.NAME_TO_ECI.get(t);if(i===void 0)throw new Q("incorect value");return i}equals(t){if(!(t instanceof le))return!1;const i=t;return this.getName()===i.getName()}}le.VALUE_IDENTIFIER_TO_ECI=new Map,le.VALUES_TO_ECI=new Map,le.NAME_TO_ECI=new Map,le.Cp437=new le(ne.Cp437,Int32Array.from([0,2]),"Cp437"),le.ISO8859_1=new le(ne.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),le.ISO8859_2=new le(ne.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),le.ISO8859_3=new le(ne.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),le.ISO8859_4=new le(ne.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),le.ISO8859_5=new le(ne.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),le.ISO8859_6=new le(ne.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),le.ISO8859_7=new le(ne.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),le.ISO8859_8=new le(ne.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),le.ISO8859_9=new le(ne.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),le.ISO8859_10=new le(ne.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),le.ISO8859_11=new le(ne.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),le.ISO8859_13=new le(ne.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),le.ISO8859_14=new le(ne.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),le.ISO8859_15=new le(ne.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),le.ISO8859_16=new le(ne.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),le.SJIS=new le(ne.SJIS,20,"SJIS","Shift_JIS"),le.Cp1250=new le(ne.Cp1250,21,"Cp1250","windows-1250"),le.Cp1251=new le(ne.Cp1251,22,"Cp1251","windows-1251"),le.Cp1252=new le(ne.Cp1252,23,"Cp1252","windows-1252"),le.Cp1256=new le(ne.Cp1256,24,"Cp1256","windows-1256"),le.UnicodeBigUnmarked=new le(ne.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),le.UTF8=new le(ne.UTF8,26,"UTF8","UTF-8"),le.ASCII=new le(ne.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),le.Big5=new le(ne.Big5,28,"Big5"),le.GB18030=new le(ne.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),le.EUC_KR=new le(ne.EUC_KR,30,"EUC_KR","EUC-KR");class Ne extends v{}Ne.kind="UnsupportedOperationException";class ke{static decode(t,i){const a=this.encodingName(i);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!ke.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const a=this.encodingName(i);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof le?t:le.getCharacterSetECIByName(t)}static decodeFallback(t,i){const a=this.encodingCharacterSet(i);if(ke.isDecodeFallbackSupported(a)){let c="";for(let u=0,d=t.length;u<d;u++){let m=t[u].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(a.equals(le.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Ne(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(le.UTF8)||t.equals(le.ISO8859_1)||t.equals(le.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class ye{static castAsNonUtf8Char(t,i=null){const a=i?i.getName():this.ISO88591;return ke.decode(new Uint8Array([t]),a)}static guessEncoding(t,i){if(i!=null&&i.get(Ae.CHARACTER_SET)!==void 0)return i.get(Ae.CHARACTER_SET).toString();const a=t.length;let c=!0,u=!0,d=!0,m=0,y=0,E=0,C=0,R=0,D=0,j=0,F=0,H=0,X=0,re=0;const ve=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let we=0;we<a&&(c||u||d);we++){const xe=t[we]&255;d&&(m>0?(xe&128)===0?d=!1:m--:(xe&128)!==0&&((xe&64)===0?d=!1:(m++,(xe&32)===0?y++:(m++,(xe&16)===0?E++:(m++,(xe&8)===0?C++:d=!1))))),c&&(xe>127&&xe<160?c=!1:xe>159&&(xe<192||xe===215||xe===247)&&re++),u&&(R>0?xe<64||xe===127||xe>252?u=!1:R--:xe===128||xe===160||xe>239?u=!1:xe>160&&xe<224?(D++,F=0,j++,j>H&&(H=j)):xe>127?(R++,j=0,F++,F>X&&(X=F)):(j=0,F=0))}return d&&m>0&&(d=!1),u&&R>0&&(u=!1),d&&(ve||y+E+C>0)?ye.UTF8:u&&(ye.ASSUME_SHIFT_JIS||H>=3||X>=3)?ye.SHIFT_JIS:c&&u?H===2&&D===2||re*10>=a?ye.SHIFT_JIS:ye.ISO88591:c?ye.ISO88591:u?ye.SHIFT_JIS:d?ye.UTF8:ye.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let a=-1;function c(d,m,y,E,C,R){if(d==="%%")return"%";if(i[++a]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=C?parseInt(C.substr(1)):void 0,j;switch(R){case"s":j=i[a];break;case"c":j=i[a][0];break;case"f":j=parseFloat(i[a]).toFixed(d);break;case"p":j=parseFloat(i[a]).toPrecision(d);break;case"e":j=parseFloat(i[a]).toExponential(d);break;case"x":j=parseInt(i[a]).toString(D||16);break;case"d":j=parseFloat(parseInt(i[a],D||10).toPrecision(d)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(D);let F=parseInt(y),H=y&&y[0]+""=="0"?"0":" ";for(;j.length<F;)j=m!==void 0?j+H:H+j;return j}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,c)}static getBytes(t,i){return ke.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}ye.SHIFT_JIS=le.SJIS.getName(),ye.GB2312="GB2312",ye.ISO88591=le.ISO8859_1.getName(),ye.EUC_JP="EUC_JP",ye.UTF8=le.UTF8.getName(),ye.PLATFORM_DEFAULT_ENCODING=ye.UTF8,ye.ASSUME_SHIFT_JIS=!1;class Ue{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ye.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,a){for(let c=i;i<i+a;c++)this.append(t[c]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class Ge{constructor(t,i,a,c){if(this.width=t,this.height=i,this.rowSize=a,this.bits=c,i==null&&(i=t),this.height=i,t<1||i<1)throw new O("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,a=t[0].length,c=new Ge(a,i);for(let u=0;u<i;u++){const d=t[u];for(let m=0;m<a;m++)d[m]&&c.set(m,u)}return c}static parseFromString(t,i,a){if(t===null)throw new O("stringRepresentation cannot be null");const c=new Array(t.length);let u=0,d=0,m=-1,y=0,E=0;for(;E<t.length;)if(t.charAt(E)===`
`||t.charAt(E)==="\r"){if(u>d){if(m===-1)m=u-d;else if(u-d!==m)throw new O("row lengths do not match");d=u,y++}E++}else if(t.substring(E,E+i.length)===i)E+=i.length,c[u]=!0,u++;else if(t.substring(E,E+a.length)===a)E+=a.length,c[u]=!1,u++;else throw new O("illegal character encountered: "+t.substring(E));if(u>d){if(m===-1)m=u-d;else if(u-d!==m)throw new O("row lengths do not match");y++}const C=new Ge(m,y);for(let R=0;R<u;R++)c[R]&&C.set(Math.floor(R%m),Math.floor(R/m));return C}get(t,i){const a=i*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new O("input matrix dimensions do not match");const i=new ce(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const m=u*a,y=t.getRow(u,i).getBitArray();for(let E=0;E<a;E++)c[m+E]^=y[E]}}clear(){const t=this.bits,i=t.length;for(let a=0;a<i;a++)t[a]=0}setRegion(t,i,a,c){if(i<0||t<0)throw new O("Left and top must be nonnegative");if(c<1||a<1)throw new O("Height and width must be at least 1");const u=t+a,d=i+c;if(d>this.height||u>this.width)throw new O("The region must fit inside the matrix");const m=this.rowSize,y=this.bits;for(let E=i;E<d;E++){const C=E*m;for(let R=t;R<u;R++)y[C+Math.floor(R/32)]|=1<<(R&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new ce(this.width):i.clear();const a=this.rowSize,c=this.bits,u=t*a;for(let d=0;d<a;d++)i.setBulk(d*32,c[u+d]);return i}setRow(t,i){U.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let a=new ce(t),c=new ce(t);for(let u=0,d=Math.floor((i+1)/2);u<d;u++)a=this.getRow(u,a),c=this.getRow(i-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(i-1-u,a)}getEnclosingRectangle(){const t=this.width,i=this.height,a=this.rowSize,c=this.bits;let u=t,d=i,m=-1,y=-1;for(let E=0;E<i;E++)for(let C=0;C<a;C++){const R=c[E*a+C];if(R!==0){if(E<d&&(d=E),E>y&&(y=E),C*32<u){let D=0;for(;(R<<31-D&4294967295)===0;)D++;C*32+D<u&&(u=C*32+D)}if(C*32+31>m){let D=31;for(;!(R>>>D);)D--;C*32+D>m&&(m=C*32+D)}}}return m<u||y<d?null:Int32Array.from([u,d,m-u+1,y-d+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let a=0;for(;a<i.length&&i[a]===0;)a++;if(a===i.length)return null;const c=a/t;let u=a%t*32;const d=i[a];let m=0;for(;(d<<31-m&4294967295)===0;)m++;return u+=m,Int32Array.from([u,c])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let a=i.length-1;for(;a>=0&&i[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/t);let u=Math.floor(a%t)*32;const d=i[a];let m=31;for(;!(d>>>m);)m--;return u+=m,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Ge))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&ae.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+ae.hashCode(this.bits),t}toString(t="X ",i="  ",a=`
`){return this.buildToString(t,i,a)}buildToString(t,i,a){let c=new Ue;for(let u=0,d=this.height;u<d;u++){for(let m=0,y=this.width;m<y;m++)c.append(this.get(m,u)?t:i);c.append(a)}return c.toString()}clone(){return new Ge(this.width,this.height,this.rowSize,this.bits.slice())}}class ie extends v{static getNotFoundInstance(){return new ie}}ie.kind="NotFoundException";class ee extends z{constructor(t){super(t),this.luminances=ee.EMPTY,this.buckets=new Int32Array(ee.LUMINANCE_BUCKETS)}getBlackRow(t,i){const a=this.getLuminanceSource(),c=a.getWidth();i==null||i.getSize()<c?i=new ce(c):i.clear(),this.initArrays(c);const u=a.getRow(t,this.luminances),d=this.buckets;for(let y=0;y<c;y++)d[(u[y]&255)>>ee.LUMINANCE_SHIFT]++;const m=ee.estimateBlackPoint(d);if(c<3)for(let y=0;y<c;y++)(u[y]&255)<m&&i.set(y);else{let y=u[0]&255,E=u[1]&255;for(let C=1;C<c-1;C++){const R=u[C+1]&255;(E*4-y-R)/2<m&&i.set(C),y=E,E=R}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight(),c=new Ge(i,a);this.initArrays(i);const u=this.buckets;for(let y=1;y<5;y++){const E=Math.floor(a*y/5),C=t.getRow(E,this.luminances),R=Math.floor(i*4/5);for(let D=Math.floor(i/5);D<R;D++){const j=C[D]&255;u[j>>ee.LUMINANCE_SHIFT]++}}const d=ee.estimateBlackPoint(u),m=t.getMatrix();for(let y=0;y<a;y++){const E=y*i;for(let C=0;C<i;C++)(m[E+C]&255)<d&&c.set(C,y)}return c}createBinarizer(t){return new ee(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let a=0;a<ee.LUMINANCE_BUCKETS;a++)i[a]=0}static estimateBlackPoint(t){const i=t.length;let a=0,c=0,u=0;for(let C=0;C<i;C++)t[C]>u&&(c=C,u=t[C]),t[C]>a&&(a=t[C]);let d=0,m=0;for(let C=0;C<i;C++){const R=C-c,D=t[C]*R*R;D>m&&(d=C,m=D)}if(c>d){const C=c;c=d,d=C}if(d-c<=i/16)throw new ie;let y=d-1,E=-1;for(let C=d-1;C>c;C--){const R=C-c,D=R*R*(d-C)*(a-t[C]);D>E&&(y=C,E=D)}return y<<ee.LUMINANCE_SHIFT}}ee.LUMINANCE_BITS=5,ee.LUMINANCE_SHIFT=8-ee.LUMINANCE_BITS,ee.LUMINANCE_BUCKETS=1<<ee.LUMINANCE_BITS,ee.EMPTY=Uint8ClampedArray.from([0]);class fe extends ee{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight();if(i>=fe.MINIMUM_DIMENSION&&a>=fe.MINIMUM_DIMENSION){const c=t.getMatrix();let u=i>>fe.BLOCK_SIZE_POWER;(i&fe.BLOCK_SIZE_MASK)!==0&&u++;let d=a>>fe.BLOCK_SIZE_POWER;(a&fe.BLOCK_SIZE_MASK)!==0&&d++;const m=fe.calculateBlackPoints(c,u,d,i,a),y=new Ge(i,a);fe.calculateThresholdForBlock(c,u,d,i,a,m,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new fe(t)}static calculateThresholdForBlock(t,i,a,c,u,d,m){const y=u-fe.BLOCK_SIZE,E=c-fe.BLOCK_SIZE;for(let C=0;C<a;C++){let R=C<<fe.BLOCK_SIZE_POWER;R>y&&(R=y);const D=fe.cap(C,2,a-3);for(let j=0;j<i;j++){let F=j<<fe.BLOCK_SIZE_POWER;F>E&&(F=E);const H=fe.cap(j,2,i-3);let X=0;for(let ve=-2;ve<=2;ve++){const we=d[D+ve];X+=we[H-2]+we[H-1]+we[H]+we[H+1]+we[H+2]}const re=X/25;fe.thresholdBlock(t,F,R,re,c,m)}}}static cap(t,i,a){return t<i?i:t>a?a:t}static thresholdBlock(t,i,a,c,u,d){for(let m=0,y=a*u+i;m<fe.BLOCK_SIZE;m++,y+=u)for(let E=0;E<fe.BLOCK_SIZE;E++)(t[y+E]&255)<=c&&d.set(i+E,a+m)}static calculateBlackPoints(t,i,a,c,u){const d=u-fe.BLOCK_SIZE,m=c-fe.BLOCK_SIZE,y=new Array(a);for(let E=0;E<a;E++){y[E]=new Int32Array(i);let C=E<<fe.BLOCK_SIZE_POWER;C>d&&(C=d);for(let R=0;R<i;R++){let D=R<<fe.BLOCK_SIZE_POWER;D>m&&(D=m);let j=0,F=255,H=0;for(let re=0,ve=C*c+D;re<fe.BLOCK_SIZE;re++,ve+=c){for(let we=0;we<fe.BLOCK_SIZE;we++){const xe=t[ve+we]&255;j+=xe,xe<F&&(F=xe),xe>H&&(H=xe)}if(H-F>fe.MIN_DYNAMIC_RANGE)for(re++,ve+=c;re<fe.BLOCK_SIZE;re++,ve+=c)for(let we=0;we<fe.BLOCK_SIZE;we++)j+=t[ve+we]&255}let X=j>>fe.BLOCK_SIZE_POWER*2;if(H-F<=fe.MIN_DYNAMIC_RANGE&&(X=F/2,E>0&&R>0)){const re=(y[E-1][R]+2*y[E][R-1]+y[E-1][R-1])/4;F<re&&(X=re)}y[E][R]=X}}return y}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class Ie{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,a,c){throw new Ne("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ne("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ne("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new Ue;for(let a=0;a<this.height;a++){const c=this.getRow(a,t);for(let u=0;u<this.width;u++){const d=c[u]&255;let m;d<64?m="#":d<128?m="+":d<192?m=".":m=" ",i.append(m)}i.append(`
`)}return i.toString()}}class Je extends Ie{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const a=this.delegate.getRow(t,i),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(i);for(let c=0;c<i;c++)a[c]=255-(t[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,a,c){return new Je(this.delegate.crop(t,i,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Je(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Je(this.delegate.rotateCounterClockwise45())}}class Qe extends Ie{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=Qe.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return Qe.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,a){const c=new Uint8ClampedArray(i*a);for(let u=0,d=0,m=t.length;u<m;u+=4,d++){let y;if(t[u+3]===0)y=255;else{const C=t[u],R=t[u+1],D=t[u+2];y=306*C+601*R+117*D+512>>10}c[d]=y}return c}getRow(t,i){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const a=this.getWidth(),c=t*a;return i===null?i=this.buffer.slice(c,c+a):(i.length<a&&(i=new Uint8ClampedArray(a)),i.set(this.buffer.slice(c,c+a))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,a,c){return super.crop(t,i,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),a=i.getContext("2d"),c=t*Qe.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),y=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return i.width=m,i.height=y,a.translate(m/2,y/2),a.rotate(c),a.drawImage(this.canvas,u/-2,d/-2),this.buffer=Qe.makeBufferFromCanvasImageData(i),this}invert(){return new Je(this)}}Qe.DEGREE_TO_RADIANS=Math.PI/180;class V{constructor(t,i,a){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ue=(globalThis||Rc||self||window||void 0)&&(globalThis||Rc||self||window||void 0).__awaiter||function(I,t,i,a){function c(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function m(C){try{E(a.next(C))}catch(R){d(R)}}function y(C){try{E(a.throw(C))}catch(R){d(R)}}function E(C){C.done?u(C.value):c(C.value).then(m,y)}E((a=a.apply(I,t||[])).next())})};class Se{constructor(t,i=500,a){this.reader=t,this.timeBetweenScansMillis=i,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return ue(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const a of t){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,d=a.label||`Video device ${i.length+1}`,m=a.groupId,y={deviceId:u,label:d,kind:c,groupId:m};i.push(y)}return i})}getVideoInputDevices(){return ue(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new V(i.deviceId,i.label))})}findDeviceById(t){return ue(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return ue(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return ue(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,i)})}decodeOnceFromConstraints(t,i){return ue(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,i)})}decodeOnceFromStream(t,i){return ue(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,i,a){return ue(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,a)})}decodeFromVideoDevice(t,i,a){return ue(this,void 0,void 0,function*(){let c;t?c={deviceId:{exact:t}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,i,a)})}decodeFromConstraints(t,i,a){return ue(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(c,i,a)})}decodeFromStream(t,i,a){return ue(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return ue(this,void 0,void 0,function*(){const a=this.prepareVideoElement(i);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((i,a)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return ue(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const a=document.getElementById(t);if(!a)throw new N(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==i.toLowerCase())throw new N(`element with id '${t}' must be an ${i} element`);return a}decodeFromImage(t,i){if(!t&&!i)throw new N("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new N("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,a){if(t===void 0&&i===void 0)throw new N("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new N("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let a;return this.isImageLoaded(i)?a=this.decodeOnce(i,!1,!0):a=this._decodeOnLoadImage(i),a}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,i)}_decodeFromVideoElementSetup(t){if(!t)throw new N("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const a=this._decodeOnLoadImage(i);return i.src=t,a}decodeFromVideoUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElement(i);return i.src=t,a}decodeFromVideoUrlContinuously(t,i){if(!t)throw new N("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,i);return a.src=t,c}_decodeOnLoadImage(t){return new Promise((i,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return ue(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return ue(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(t);u(m)}catch(m){const y=i&&m instanceof ie,C=(m instanceof k||m instanceof Q)&&a;if(y||C)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(m)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(t);i(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){i(null,c);const u=c instanceof k||c instanceof Q,d=c instanceof ie;(u||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,a){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,a=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),a=new Qe(i),c=new fe(a);return new B(c)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let a,c;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,c=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,c=t.naturalHeight||t.height)),i.style.width=a+"px",i.style.height=c+"px",i.width=a,i.height=c,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class _e{constructor(t,i,a=i==null?0:8*i.length,c,u,d=U.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=t,this.rawBytes=i,a==null?this.numBits=i==null?0:8*i.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=U.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(i.length+t.length);U.arraycopy(i,0,a,0,i.length),U.arraycopy(t,0,a,i.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ye;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var Ee=Ye,ct;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ct||(ct={}));var mt=ct;class Ut{constructor(t,i,a,c,u=-1,d=-1){this.rawBytes=t,this.text=i,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ji{exp(t){return this.expTable[t]}log(t){if(t===0)throw new O;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class vn{constructor(t,i){if(i.length===0)throw new O;this.field=t;const a=i.length;if(a>1&&i[0]===0){let c=1;for(;c<a&&i[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),U.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let a;if(t===1){a=0;for(let d=0,m=i.length;d!==m;d++){const y=i[d];a=ji.addOrSubtract(a,y)}return a}a=i[0];const c=i.length,u=this.field;for(let d=1;d<c;d++)a=ji.addOrSubtract(u.multiply(t,a),i[d]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){const d=i;i=a,a=d}let c=new Int32Array(a.length);const u=a.length-i.length;U.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=ji.addOrSubtract(i[d-u],a[d]);return new vn(this.field,c)}multiply(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,a=i.length,c=t.coefficients,u=c.length,d=new Int32Array(a+u-1),m=this.field;for(let y=0;y<a;y++){const E=i[y];for(let C=0;C<u;C++)d[y+C]=ji.addOrSubtract(d[y+C],m.multiply(E,c[C]))}return new vn(m,d)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,a=this.field,c=new Int32Array(i),u=this.coefficients;for(let d=0;d<i;d++)c[d]=a.multiply(u[d],t);return new vn(a,c)}multiplyByMonomial(t,i){if(t<0)throw new O;if(i===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+t),d=this.field;for(let m=0;m<c;m++)u[m]=d.multiply(a[m],i);return new vn(d,u)}divide(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new O("Divide by 0");const i=this.field;let a=i.getZero(),c=this;const u=t.getCoefficient(t.getDegree()),d=i.inverse(u);for(;c.getDegree()>=t.getDegree()&&!c.isZero();){const m=c.getDegree()-t.getDegree(),y=i.multiply(c.getCoefficient(c.getDegree()),d),E=t.multiplyByMonomial(m,y),C=i.buildMonomial(m,y);a=a.addOrSubtract(C),c=c.addOrSubtract(E)}return[a,c]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),i===0||a!==1){const c=this.field.log(a);c===0?t+="1":c===1?t+="a":(t+="a^",t+=c)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class kr extends v{}kr.kind="ArithmeticException";class pt extends ji{constructor(t,i,a){super(),this.primitive=t,this.size=i,this.generatorBase=a;const c=new Int32Array(i);let u=1;for(let m=0;m<i;m++)c[m]=u,u*=2,u>=i&&(u^=t,u&=i-1);this.expTable=c;const d=new Int32Array(i);for(let m=0;m<i-1;m++)d[c[m]]=m;this.logTable=d,this.zero=new vn(this,Int32Array.from([0])),this.one=new vn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new O;if(i===0)return this.zero;const a=new Int32Array(t+1);return a[0]=i,new vn(this,a)}inverse(t){if(t===0)throw new kr;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Z.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}pt.AZTEC_DATA_12=new pt(4201,4096,1),pt.AZTEC_DATA_10=new pt(1033,1024,1),pt.AZTEC_DATA_6=new pt(67,64,1),pt.AZTEC_PARAM=new pt(19,16,1),pt.QR_CODE_FIELD_256=new pt(285,256,0),pt.DATA_MATRIX_FIELD_256=new pt(301,256,1),pt.AZTEC_DATA_8=pt.DATA_MATRIX_FIELD_256,pt.MAXICODE_FIELD_64=pt.AZTEC_DATA_6;class Wn extends v{}Wn.kind="ReedSolomonException";class Zn extends v{}Zn.kind="IllegalStateException";class ur{constructor(t){this.field=t}decode(t,i){const a=this.field,c=new vn(a,t),u=new Int32Array(i);let d=!0;for(let j=0;j<i;j++){const F=c.evaluateAt(a.exp(j+a.getGeneratorBase()));u[u.length-1-j]=F,F!==0&&(d=!1)}if(d)return;const m=new vn(a,u),y=this.runEuclideanAlgorithm(a.buildMonomial(i,1),m,i),E=y[0],C=y[1],R=this.findErrorLocations(E),D=this.findErrorMagnitudes(C,R);for(let j=0;j<R.length;j++){const F=t.length-1-a.log(R[j]);if(F<0)throw new Wn("Bad error location");t[F]=pt.addOrSubtract(t[F],D[j])}}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){const j=t;t=i,i=j}const c=this.field;let u=t,d=i,m=c.getZero(),y=c.getOne();for(;d.getDegree()>=(a/2|0);){let j=u,F=m;if(u=d,m=y,u.isZero())throw new Wn("r_{i-1} was zero");d=j;let H=c.getZero();const X=u.getCoefficient(u.getDegree()),re=c.inverse(X);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const ve=d.getDegree()-u.getDegree(),we=c.multiply(d.getCoefficient(d.getDegree()),re);H=H.addOrSubtract(c.buildMonomial(ve,we)),d=d.addOrSubtract(u.multiplyByMonomial(ve,we))}if(y=H.multiply(m).addOrSubtract(F),d.getDegree()>=u.getDegree())throw new Zn("Division algorithm failed to reduce polynomial?")}const E=y.getCoefficient(0);if(E===0)throw new Wn("sigmaTilde(0) was zero");const C=c.inverse(E),R=y.multiplyScalar(C),D=d.multiplyScalar(C);return[R,D]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(i);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<i;d++)t.evaluateAt(d)===0&&(a[c]=u.inverse(d),c++);if(c!==i)throw new Wn("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,i){const a=i.length,c=new Int32Array(a),u=this.field;for(let d=0;d<a;d++){const m=u.inverse(i[d]);let y=1;for(let E=0;E<a;E++)if(d!==E){const C=u.multiply(i[E],m),R=(C&1)===0?C|1:C&-2;y=u.multiply(y,R)}c[d]=u.multiply(t.evaluateAt(m),u.inverse(y)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],m))}return c}}var bn;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(bn||(bn={}));class Ot{decode(t){this.ddata=t;let i=t.getBits(),a=this.extractBits(i),c=this.correctBits(a),u=Ot.convertBoolArrayToByteArray(c),d=Ot.getEncodedData(c),m=new Ut(u,d,null,null);return m.setNumBits(c.length),m}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,a=bn.UPPER,c=bn.UPPER,u="",d=0;for(;d<i;)if(c===bn.BINARY){if(i-d<5)break;let m=Ot.readCode(t,d,5);if(d+=5,m===0){if(i-d<11)break;m=Ot.readCode(t,d,11)+31,d+=11}for(let y=0;y<m;y++){if(i-d<8){d=i;break}const E=Ot.readCode(t,d,8);u+=ye.castAsNonUtf8Char(E),d+=8}c=a}else{let m=c===bn.DIGIT?4:5;if(i-d<m)break;let y=Ot.readCode(t,d,m);d+=m;let E=Ot.getCharacter(c,y);E.startsWith("CTRL_")?(a=c,c=Ot.getTable(E.charAt(5)),E.charAt(6)==="L"&&(a=c)):(u+=E,c=a)}return u}static getTable(t){switch(t){case"L":return bn.LOWER;case"P":return bn.PUNCT;case"M":return bn.MIXED;case"D":return bn.DIGIT;case"B":return bn.BINARY;default:return bn.UPPER}}static getCharacter(t,i){switch(t){case bn.UPPER:return Ot.UPPER_TABLE[i];case bn.LOWER:return Ot.LOWER_TABLE[i];case bn.MIXED:return Ot.MIXED_TABLE[i];case bn.PUNCT:return Ot.PUNCT_TABLE[i];case bn.DIGIT:return Ot.DIGIT_TABLE[i];default:throw new Zn("Bad table")}}correctBits(t){let i,a;this.ddata.getNbLayers()<=2?(a=6,i=pt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,i=pt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,i=pt.AZTEC_DATA_10):(a=12,i=pt.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=t.length/a;if(u<c)throw new Q;let d=t.length%a,m=new Int32Array(u);for(let D=0;D<u;D++,d+=a)m[D]=Ot.readCode(t,d,a);try{new ur(i).decode(m,u-c)}catch(D){throw new Q(D)}let y=(1<<a)-1,E=0;for(let D=0;D<c;D++){let j=m[D];if(j===0||j===y)throw new Q;(j===1||j===y-1)&&E++}let C=new Array(c*a-E),R=0;for(let D=0;D<c;D++){let j=m[D];if(j===1||j===y-1)C.fill(j>1,R,R+a-1),R+=a-1;else for(let F=a-1;F>=0;--F)C[R++]=(j&1<<F)!==0}return C}extractBits(t){let i=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(i?11:14)+a*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,i));if(i)for(let m=0;m<u.length;m++)u[m]=m;else{let m=c+1+2*Z.truncDivision(Z.truncDivision(c,2)-1,15),y=c/2,E=Z.truncDivision(m,2);for(let C=0;C<y;C++){let R=C+Z.truncDivision(C,15);u[y-C-1]=E-R-1,u[y+C]=E+R+1}}for(let m=0,y=0;m<a;m++){let E=(a-m)*4+(i?9:12),C=m*2,R=c-1-C;for(let D=0;D<E;D++){let j=D*2;for(let F=0;F<2;F++)d[y+j+F]=t.get(u[C+F],u[C+D]),d[y+2*E+j+F]=t.get(u[C+D],u[R-F]),d[y+4*E+j+F]=t.get(u[R-F],u[R-D]),d[y+6*E+j+F]=t.get(u[R-D],u[C+F])}y+=E*8}return d}static readCode(t,i,a){let c=0;for(let u=i;u<i+a;u++)c<<=1,t[u]&&(c|=1);return c}static readByte(t,i){let a=t.length-i;return a>=8?Ot.readCode(t,i,8):Ot.readCode(t,i,a)<<8-a}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let a=0;a<i.length;a++)i[a]=Ot.readByte(t,8*a);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Ot.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ot.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ot.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ot.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ot.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class at{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,a,c){const u=t-a,d=i-c;return Math.sqrt(u*u+d*d)}static sum(t){let i=0;for(let a=0,c=t.length;a!==c;a++){const u=t[a];i+=u}return i}}class jr{static floatToIntBits(t){return t}}jr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Re{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Re){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*jr.floatToIntBits(this.x)+jr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),c=this.distance(t[0],t[2]);let u,d,m;if(a>=i&&a>=c?(d=t[0],u=t[1],m=t[2]):c>=a&&c>=i?(d=t[1],u=t[0],m=t[2]):(d=t[2],u=t[0],m=t[1]),this.crossProductZ(u,d,m)<0){const y=u;u=m,m=y}t[0]=u,t[1]=d,t[2]=m}static distance(t,i){return at.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,a){const c=i.x,u=i.y;return(a.x-c)*(t.y-u)-(a.y-u)*(t.x-c)}}class ns{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class fo extends ns{constructor(t,i,a,c,u){super(t,i),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Jt{constructor(t,i,a,c){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Jt.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),c==null&&(c=t.getHeight()/2|0);const u=i/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}detect(){let t=this.leftInit,i=this.rightInit,a=this.upInit,c=this.downInit,u=!1,d=!0,m=!1,y=!1,E=!1,C=!1,R=!1;const D=this.width,j=this.height;for(;d;){d=!1;let F=!0;for(;(F||!y)&&i<D;)F=this.containsBlackPoint(a,c,i,!1),F?(i++,d=!0,y=!0):y||i++;if(i>=D){u=!0;break}let H=!0;for(;(H||!E)&&c<j;)H=this.containsBlackPoint(t,i,c,!0),H?(c++,d=!0,E=!0):E||c++;if(c>=j){u=!0;break}let X=!0;for(;(X||!C)&&t>=0;)X=this.containsBlackPoint(a,c,t,!1),X?(t--,d=!0,C=!0):C||t--;if(t<0){u=!0;break}let re=!0;for(;(re||!R)&&a>=0;)re=this.containsBlackPoint(t,i,a,!0),re?(a--,d=!0,R=!0):R||a--;if(a<0){u=!0;break}d&&(m=!0)}if(!u&&m){const F=i-t;let H=null;for(let we=1;H===null&&we<F;we++)H=this.getBlackPointOnSegment(t,c-we,t+we,c);if(H==null)throw new ie;let X=null;for(let we=1;X===null&&we<F;we++)X=this.getBlackPointOnSegment(t,a+we,t+we,a);if(X==null)throw new ie;let re=null;for(let we=1;re===null&&we<F;we++)re=this.getBlackPointOnSegment(i,a+we,i-we,a);if(re==null)throw new ie;let ve=null;for(let we=1;ve===null&&we<F;we++)ve=this.getBlackPointOnSegment(i,c-we,i-we,c);if(ve==null)throw new ie;return this.centerEdges(ve,H,re,X)}else throw new ie}getBlackPointOnSegment(t,i,a,c){const u=at.round(at.distance(t,i,a,c)),d=(a-t)/u,m=(c-i)/u,y=this.image;for(let E=0;E<u;E++){const C=at.round(t+E*d),R=at.round(i+E*m);if(y.get(C,R))return new Re(C,R)}return null}centerEdges(t,i,a,c){const u=t.getX(),d=t.getY(),m=i.getX(),y=i.getY(),E=a.getX(),C=a.getY(),R=c.getX(),D=c.getY(),j=Jt.CORR;return u<this.width/2?[new Re(R-j,D+j),new Re(m+j,y+j),new Re(E-j,C-j),new Re(u+j,d-j)]:[new Re(R+j,D+j),new Re(m+j,y-j),new Re(E-j,C+j),new Re(u-j,d-j)]}containsBlackPoint(t,i,a,c){const u=this.image;if(c){for(let d=t;d<=i;d++)if(u.get(d,a))return!0}else for(let d=t;d<=i;d++)if(u.get(a,d))return!0;return!1}}Jt.INIT_SIZE=10,Jt.CORR=1;class nl{static checkAndNudgePoints(t,i){const a=t.getWidth(),c=t.getHeight();let u=!0;for(let d=0;d<i.length&&u;d+=2){const m=Math.floor(i[d]),y=Math.floor(i[d+1]);if(m<-1||m>a||y<-1||y>c)throw new ie;u=!1,m===-1?(i[d]=0,u=!0):m===a&&(i[d]=a-1,u=!0),y===-1?(i[d+1]=0,u=!0):y===c&&(i[d+1]=c-1,u=!0)}u=!0;for(let d=i.length-2;d>=0&&u;d-=2){const m=Math.floor(i[d]),y=Math.floor(i[d+1]);if(m<-1||m>a||y<-1||y>c)throw new ie;u=!1,m===-1?(i[d]=0,u=!0):m===a&&(i[d]=a-1,u=!0),y===-1?(i[d+1]=0,u=!0):y===c&&(i[d+1]=c-1,u=!0)}}}class Qn{constructor(t,i,a,c,u,d,m,y,E){this.a11=t,this.a21=i,this.a31=a,this.a12=c,this.a22=u,this.a32=d,this.a13=m,this.a23=y,this.a33=E}static quadrilateralToQuadrilateral(t,i,a,c,u,d,m,y,E,C,R,D,j,F,H,X){const re=Qn.quadrilateralToSquare(t,i,a,c,u,d,m,y);return Qn.squareToQuadrilateral(E,C,R,D,j,F,H,X).times(re)}transformPoints(t){const i=t.length,a=this.a11,c=this.a12,u=this.a13,d=this.a21,m=this.a22,y=this.a23,E=this.a31,C=this.a32,R=this.a33;for(let D=0;D<i;D+=2){const j=t[D],F=t[D+1],H=u*j+y*F+R;t[D]=(a*j+d*F+E)/H,t[D+1]=(c*j+m*F+C)/H}}transformPointsWithValues(t,i){const a=this.a11,c=this.a12,u=this.a13,d=this.a21,m=this.a22,y=this.a23,E=this.a31,C=this.a32,R=this.a33,D=t.length;for(let j=0;j<D;j++){const F=t[j],H=i[j],X=u*F+y*H+R;t[j]=(a*F+d*H+E)/X,i[j]=(c*F+m*H+C)/X}}static squareToQuadrilateral(t,i,a,c,u,d,m,y){const E=t-a+u-m,C=i-c+d-y;if(E===0&&C===0)return new Qn(a-t,u-a,t,c-i,d-c,i,0,0,1);{const R=a-u,D=m-u,j=c-d,F=y-d,H=R*F-D*j,X=(E*F-D*C)/H,re=(R*C-E*j)/H;return new Qn(a-t+X*a,m-t+re*m,t,c-i+X*c,y-i+re*y,i,X,re,1)}}static quadrilateralToSquare(t,i,a,c,u,d,m,y){return Qn.squareToQuadrilateral(t,i,a,c,u,d,m,y).buildAdjoint()}buildAdjoint(){return new Qn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Qn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class il extends nl{sampleGrid(t,i,a,c,u,d,m,y,E,C,R,D,j,F,H,X,re,ve,we){const xe=Qn.quadrilateralToQuadrilateral(c,u,d,m,y,E,C,R,D,j,F,H,X,re,ve,we);return this.sampleGridWithTransform(t,i,a,xe)}sampleGridWithTransform(t,i,a,c){if(i<=0||a<=0)throw new ie;const u=new Ge(i,a),d=new Float32Array(2*i);for(let m=0;m<a;m++){const y=d.length,E=m+.5;for(let C=0;C<y;C+=2)d[C]=C/2+.5,d[C+1]=E;c.transformPoints(d),nl.checkAndNudgePoints(t,d);try{for(let C=0;C<y;C+=2)t.get(Math.floor(d[C]),Math.floor(d[C+1]))&&u.set(C/2,m)}catch{throw new ie}}return u}}class si{static setGridSampler(t){si.gridSampler=t}static getInstance(){return si.gridSampler}}si.gridSampler=new il;class In{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Re(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class rl{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),a=this.getBullsEyeCorners(i);if(t){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new fo(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ie;let i=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(a,i);let c=0;for(let d=0;d<4;d++){let m=a[(this.shift+d)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,i){let a=0;t.forEach((c,u,d)=>{let m=(c>>i-2<<1)+(c&1);a=(a<<3)+m}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(Z.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new ie}getCorrectedParameterData(t,i){let a,c;i?(a=7,c=2):(a=10,c=4);let u=a-c,d=new Int32Array(a);for(let y=a-1;y>=0;--y)d[y]=t&15,t>>=4;try{new ur(pt.AZTEC_PARAM).decode(d,u)}catch{throw new ie}let m=0;for(let y=0;y<c;y++)m=(m<<4)+d[y];return m}getBullsEyeCorners(t){let i=t,a=t,c=t,u=t,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let R=this.getFirstDifferent(i,d,1,-1),D=this.getFirstDifferent(a,d,1,1),j=this.getFirstDifferent(c,d,-1,1),F=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let H=this.distancePoint(F,R)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(H<.75||H>1.25||!this.isWhiteOrBlackRectangle(R,D,j,F))break}i=R,a=D,c=j,u=F,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;let m=new Re(i.getX()+.5,i.getY()-.5),y=new Re(a.getX()+.5,a.getY()+.5),E=new Re(c.getX()-.5,c.getY()+.5),C=new Re(u.getX()-.5,u.getY()-.5);return this.expandSquare([m,y,E,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,a,c;try{let m=new Jt(this.image).detect();t=m[0],i=m[1],a=m[2],c=m[3]}catch{let y=this.image.getWidth()/2,E=this.image.getHeight()/2;t=this.getFirstDifferent(new In(y+7,E-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new In(y+7,E+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new In(y-7,E+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new In(y-7,E-7),!1,-1,-1).toResultPoint()}let u=at.round((t.getX()+c.getX()+i.getX()+a.getX())/4),d=at.round((t.getY()+c.getY()+i.getY()+a.getY())/4);try{let m=new Jt(this.image,15,u,d).detect();t=m[0],i=m[1],a=m[2],c=m[3]}catch{t=this.getFirstDifferent(new In(u+7,d-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new In(u+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new In(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new In(u-7,d-7),!1,-1,-1).toResultPoint()}return u=at.round((t.getX()+c.getX()+i.getX()+a.getX())/4),d=at.round((t.getY()+c.getY()+i.getY()+a.getY())/4),new In(u,d)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,a,c,u){let d=si.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,E=m/2+this.nbCenterLayers;return d.sampleGrid(t,m,m,y,y,E,y,E,E,y,E,i.getX(),i.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(t,i,a){let c=0,u=this.distanceResultPoint(t,i),d=u/a,m=t.getX(),y=t.getY(),E=d*(i.getX()-t.getX())/u,C=d*(i.getY()-t.getY())/u;for(let R=0;R<a;R++)this.image.get(at.round(m+R*E),at.round(y+R*C))&&(c|=1<<a-R-1);return c}isWhiteOrBlackRectangle(t,i,a,c){let u=3;t=new In(t.getX()-u,t.getY()+u),i=new In(i.getX()-u,i.getY()-u),a=new In(a.getX()+u,a.getY()-u),c=new In(c.getX()+u,c.getY()+u);let d=this.getColor(c,t);if(d===0)return!1;let m=this.getColor(t,i);return m!==d||(m=this.getColor(i,a),m!==d)?!1:(m=this.getColor(a,c),m===d)}getColor(t,i){let a=this.distancePoint(t,i),c=(i.getX()-t.getX())/a,u=(i.getY()-t.getY())/a,d=0,m=t.getX(),y=t.getY(),E=this.image.get(t.getX(),t.getY()),C=Math.ceil(a);for(let D=0;D<C;D++)m+=c,y+=u,this.image.get(at.round(m),at.round(y))!==E&&d++;let R=d/a;return R>.1&&R<.9?0:R<=.1===E?1:-1}getFirstDifferent(t,i,a,c){let u=t.getX()+a,d=t.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===i;)u+=a,d+=c;for(u-=a,d-=c;this.isValid(u,d)&&this.image.get(u,d)===i;)u+=a;for(u-=a;this.isValid(u,d)&&this.image.get(u,d)===i;)d+=c;return d-=c,new In(u,d)}expandSquare(t,i,a){let c=a/(2*i),u=t[0].getX()-t[2].getX(),d=t[0].getY()-t[2].getY(),m=(t[0].getX()+t[2].getX())/2,y=(t[0].getY()+t[2].getY())/2,E=new Re(m+c*u,y+c*d),C=new Re(m-c*u,y-c*d);u=t[1].getX()-t[3].getX(),d=t[1].getY()-t[3].getY(),m=(t[1].getX()+t[3].getX())/2,y=(t[1].getY()+t[3].getY())/2;let R=new Re(m+c*u,y+c*d),D=new Re(m-c*u,y-c*d);return[E,R,C,D]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=at.round(t.getX()),a=at.round(t.getY());return this.isValid(i,a)}distancePoint(t,i){return at.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return at.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Z.truncDivision(this.nbLayers-4,8)+1)+15}}class is{decode(t,i=null){let a=null,c=new rl(t.getBlackMatrix()),u=null,d=null;try{let C=c.detectMirror(!1);u=C.getPoints(),this.reportFoundResultPoints(i,u),d=new Ot().decode(C)}catch(C){a=C}if(d==null)try{let C=c.detectMirror(!0);u=C.getPoints(),this.reportFoundResultPoints(i,u),d=new Ot().decode(C)}catch(C){throw a??C}let m=new _e(d.getText(),d.getRawBytes(),d.getNumBits(),u,Ee.AZTEC,U.currentTimeMillis()),y=d.getByteSegments();y!=null&&m.putMetadata(mt.BYTE_SEGMENTS,y);let E=d.getECLevel();return E!=null&&m.putMetadata(mt.ERROR_CORRECTION_LEVEL,E),m}reportFoundResultPoints(t,i){if(t!=null){let a=t.get(Ae.NEED_RESULT_POINT_CALLBACK);a!=null&&i.forEach((c,u,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Zc extends Se{constructor(t=500){super(new is,t)}}class Vt{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(Ae.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),d=this.doDecode(u,i),m=d.getResultMetadata();let y=270;m!==null&&m.get(mt.ORIENTATION)===!0&&(y=y+m.get(mt.ORIENTATION)%360),d.putMetadata(mt.ORIENTATION,y);const E=d.getResultPoints();if(E!==null){const C=u.getHeight();for(let R=0;R<E.length;R++)E[R]=new Re(C-E[R].getY()-1,E[R].getX())}return d}else throw new ie}}reset(){}doDecode(t,i){const a=t.getWidth(),c=t.getHeight();let u=new ce(a);const d=i&&i.get(Ae.TRY_HARDER)===!0,m=Math.max(1,c>>(d?8:5));let y;d?y=c:y=15;const E=Math.trunc(c/2);for(let C=0;C<y;C++){const R=Math.trunc((C+1)/2),D=(C&1)===0,j=E+m*(D?R:-R);if(j<0||j>=c)break;try{u=t.getBlackRow(j,u)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(u.reverse(),i&&i.get(Ae.NEED_RESULT_POINT_CALLBACK)===!0)){const H=new Map;i.forEach((X,re)=>H.set(re,X)),H.delete(Ae.NEED_RESULT_POINT_CALLBACK),i=H}try{const H=this.decodeRow(j,u,i);if(F===1){H.putMetadata(mt.ORIENTATION,180);const X=H.getResultPoints();X!==null&&(X[0]=new Re(a-X[0].getX()-1,X[0].getY()),X[1]=new Re(a-X[1].getX()-1,X[1].getY()))}return H}catch{}}}throw new ie}static recordPattern(t,i,a){const c=a.length;for(let E=0;E<c;E++)a[E]=0;const u=t.getSize();if(i>=u)throw new ie;let d=!t.get(i),m=0,y=i;for(;y<u;){if(t.get(y)!==d)a[m]++;else{if(++m===c)break;a[m]=1,d=!d}y++}if(!(m===c||m===c-1&&y===u))throw new ie}static recordPatternInReverse(t,i,a){let c=a.length,u=t.get(i);for(;i>0&&c>=0;)t.get(--i)!==u&&(c--,u=!u);if(c>=0)throw new ie;Vt.recordPattern(t,i+1,a)}static patternMatchVariance(t,i,a){const c=t.length;let u=0,d=0;for(let E=0;E<c;E++)u+=t[E],d+=i[E];if(u<d)return Number.POSITIVE_INFINITY;const m=u/d;a*=m;let y=0;for(let E=0;E<c;E++){const C=t[E],R=i[E]*m,D=C>R?C-R:R-C;if(D>a)return Number.POSITIVE_INFINITY;y+=D}return y/u}}class be extends Vt{static findStartPattern(t){const i=t.getSize(),a=t.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=a,m=!1;const y=6;for(let E=a;E<i;E++)if(t.get(E)!==m)u[c]++;else{if(c===y-1){let C=be.MAX_AVG_VARIANCE,R=-1;for(let D=be.CODE_START_A;D<=be.CODE_START_C;D++){const j=Vt.patternMatchVariance(u,be.CODE_PATTERNS[D],be.MAX_INDIVIDUAL_VARIANCE);j<C&&(C=j,R=D)}if(R>=0&&t.isRange(Math.max(0,d-(E-d)/2),d,!1))return Int32Array.from([d,E,R]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,m=!m}throw new ie}static decodeCode(t,i,a){Vt.recordPattern(t,a,i);let c=be.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<be.CODE_PATTERNS.length;d++){const m=be.CODE_PATTERNS[d],y=this.patternMatchVariance(i,m,be.MAX_INDIVIDUAL_VARIANCE);y<c&&(c=y,u=d)}if(u>=0)return u;throw new ie}decodeRow(t,i,a){const c=a&&a.get(Ae.ASSUME_GS1)===!0,u=be.findStartPattern(i),d=u[2];let m=0;const y=new Uint8Array(20);y[m++]=d;let E;switch(d){case be.CODE_START_A:E=be.CODE_CODE_A;break;case be.CODE_START_B:E=be.CODE_CODE_B;break;case be.CODE_START_C:E=be.CODE_CODE_C;break;default:throw new Q}let C=!1,R=!1,D="",j=u[0],F=u[1];const H=Int32Array.from([0,0,0,0,0,0]);let X=0,re=0,ve=d,we=0,xe=!0,it=!1,Ze=!1;for(;!C;){const xr=R;switch(R=!1,X=re,re=be.decodeCode(i,H,F),y[m++]=re,re!==be.CODE_STOP&&(xe=!0),re!==be.CODE_STOP&&(we++,ve+=we*re),j=F,F+=H.reduce((No,pl)=>No+pl,0),re){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new Q}switch(E){case be.CODE_CODE_A:if(re<64)Ze===it?D+=String.fromCharCode(32+re):D+=String.fromCharCode(32+re+128),Ze=!1;else if(re<96)Ze===it?D+=String.fromCharCode(re-64):D+=String.fromCharCode(re+64),Ze=!1;else switch(re!==be.CODE_STOP&&(xe=!1),re){case be.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!it&&Ze?(it=!0,Ze=!1):it&&Ze?(it=!1,Ze=!1):Ze=!0;break;case be.CODE_SHIFT:R=!0,E=be.CODE_CODE_B;break;case be.CODE_CODE_B:E=be.CODE_CODE_B;break;case be.CODE_CODE_C:E=be.CODE_CODE_C;break;case be.CODE_STOP:C=!0;break}break;case be.CODE_CODE_B:if(re<96)Ze===it?D+=String.fromCharCode(32+re):D+=String.fromCharCode(32+re+128),Ze=!1;else switch(re!==be.CODE_STOP&&(xe=!1),re){case be.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!it&&Ze?(it=!0,Ze=!1):it&&Ze?(it=!1,Ze=!1):Ze=!0;break;case be.CODE_SHIFT:R=!0,E=be.CODE_CODE_A;break;case be.CODE_CODE_A:E=be.CODE_CODE_A;break;case be.CODE_CODE_C:E=be.CODE_CODE_C;break;case be.CODE_STOP:C=!0;break}break;case be.CODE_CODE_C:if(re<100)re<10&&(D+="0"),D+=re;else switch(re!==be.CODE_STOP&&(xe=!1),re){case be.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case be.CODE_CODE_A:E=be.CODE_CODE_A;break;case be.CODE_CODE_B:E=be.CODE_CODE_B;break;case be.CODE_STOP:C=!0;break}break}xr&&(E=E===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const nn=F-j;if(F=i.getNextUnset(F),!i.isRange(F,Math.min(i.getSize(),F+(F-j)/2),!1))throw new ie;if(ve-=we*X,ve%103!==X)throw new k;const ei=D.length;if(ei===0)throw new ie;ei>0&&xe&&(E===be.CODE_CODE_C?D=D.substring(0,ei-2):D=D.substring(0,ei-1));const Dn=(u[1]+u[0])/2,Nt=j+nn/2,_n=y.length,Yn=new Uint8Array(_n);for(let xr=0;xr<_n;xr++)Yn[xr]=y[xr];const Kr=[new Re(Dn,t),new Re(Nt,t)];return new _e(D,Yn,0,Kr,Ee.CODE_128,new Date().getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class Bt extends Vt{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Bt.findAsteriskPattern(i,c),d=i.getNextSet(u[1]),m=i.getSize(),y,E;do{Bt.recordPattern(i,d,c);let H=Bt.toNarrowWidePattern(c);if(H<0)throw new ie;y=Bt.patternToChar(H),this.decodeRowResult+=y,E=d;for(let X of c)d+=X;d=i.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let H of c)C+=H;let R=d-E-C;if(d!==m&&R*2<C)throw new ie;if(this.usingCheckDigit){let H=this.decodeRowResult.length-1,X=0;for(let re=0;re<H;re++)X+=Bt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(re));if(this.decodeRowResult.charAt(H)!==Bt.ALPHABET_STRING.charAt(X%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,H)}if(this.decodeRowResult.length===0)throw new ie;let D;this.extendedMode?D=Bt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let j=(u[1]+u[0])/2,F=E+C/2;return new _e(D,null,0,[new Re(j,t),new Re(F,t)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let a=t.getSize(),c=t.getNextSet(0),u=0,d=c,m=!1,y=i.length;for(let E=c;E<a;E++)if(t.get(E)!==m)i[u]++;else{if(u===y-1){if(this.toNarrowWidePattern(i)===Bt.ASTERISK_ENCODING&&t.isRange(Math.max(0,d-Math.floor((E-d)/2)),d,!1))return[d,E];d+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,m=!m}throw new ie}static toNarrowWidePattern(t){let i=t.length,a=0,c;do{let u=2147483647;for(let y of t)y<u&&y>a&&(u=y);a=u,c=0;let d=0,m=0;for(let y=0;y<i;y++){let E=t[y];E>a&&(m|=1<<i-1-y,c++,d+=E)}if(c===3){for(let y=0;y<i&&c>0;y++){let E=t[y];if(E>a&&(c--,E*2>=d))return-1}return m}}while(c>3);return-1}static patternToChar(t){for(let i=0;i<Bt.CHARACTER_ENCODINGS.length;i++)if(Bt.CHARACTER_ENCODINGS[i]===t)return Bt.ALPHABET_STRING.charAt(i);if(t===Bt.ASTERISK_ENCODING)return"*";throw new ie}static decodeExtended(t){let i=t.length,a="";for(let c=0;c<i;c++){let u=t.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=t.charAt(c+1),m="\0";switch(u){case"+":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)+32);else throw new Q;break;case"$":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)-64);else throw new Q;break;case"%":if(d>="A"&&d<="E")m=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")m=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")m=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")m="\0";else if(d==="V")m="@";else if(d==="W")m="`";else if(d==="X"||d==="Y"||d==="Z")m="";else throw new Q;break;case"/":if(d>="A"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")m=":";else throw new Q;break}a+=m,c++}else a+=u}return a}}Bt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Bt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Bt.ASTERISK_ENCODING=148;class et extends Vt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,a){let c=this.decodeStart(i),u=this.decodeEnd(i),d=new Ue;et.decodeMiddle(i,c[1],u[0],d);let m=d.toString(),y=null;a!=null&&(y=a.get(Ae.ALLOWED_LENGTHS)),y==null&&(y=et.DEFAULT_ALLOWED_LENGTHS);let E=m.length,C=!1,R=0;for(let F of y){if(E===F){C=!0;break}F>R&&(R=F)}if(!C&&E>R&&(C=!0),!C)throw new Q;const D=[new Re(c[1],t),new Re(u[0],t)];return new _e(m,null,0,D,Ee.ITF,new Date().getTime())}static decodeMiddle(t,i,a,c){let u=new Int32Array(10),d=new Int32Array(5),m=new Int32Array(5);for(u.fill(0),d.fill(0),m.fill(0);i<a;){Vt.recordPattern(t,i,u);for(let E=0;E<5;E++){let C=2*E;d[E]=u[C],m[E]=u[C+1]}let y=et.decodeDigit(d);c.append(y.toString()),y=this.decodeDigit(m),c.append(y.toString()),u.forEach(function(E){i+=E})}}decodeStart(t){let i=et.skipWhiteSpace(t),a=et.findGuardPattern(t,i,et.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,i){let a=this.narrowLineWidth*10;a=a<i?a:i;for(let c=i-1;a>0&&c>=0&&!t.get(c);c--)a--;if(a!==0)throw new ie}static skipWhiteSpace(t){const i=t.getSize(),a=t.getNextSet(0);if(a===i)throw new ie;return a}decodeEnd(t){t.reverse();try{let i=et.skipWhiteSpace(t),a;try{a=et.findGuardPattern(t,i,et.END_PATTERN_REVERSED[0])}catch(u){u instanceof ie&&(a=et.findGuardPattern(t,i,et.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let c=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-c,a}finally{t.reverse()}}static findGuardPattern(t,i,a){let c=a.length,u=new Int32Array(c),d=t.getSize(),m=!1,y=0,E=i;u.fill(0);for(let C=i;C<d;C++)if(t.get(C)!==m)u[y]++;else{if(y===c-1){if(Vt.patternMatchVariance(u,a,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return[E,C];E+=u[0]+u[1],U.arraycopy(u,2,u,0,y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,m=!m}throw new ie}static decodeDigit(t){let i=et.MAX_AVG_VARIANCE,a=-1,c=et.PATTERNS.length;for(let u=0;u<c;u++){let d=et.PATTERNS[u],m=Vt.patternMatchVariance(t,d,et.MAX_INDIVIDUAL_VARIANCE);m<i?(i=m,a=u):m===i&&(a=-1)}if(a>=0)return a%10;throw new ie}}et.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],et.MAX_AVG_VARIANCE=.38,et.MAX_INDIVIDUAL_VARIANCE=.5,et.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],et.START_PATTERN=Int32Array.from([1,1,1,1]),et.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Zt extends Vt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),a=Zt.findGuardPattern(t,c,!1,this.START_END_PATTERN,u);let d=a[0];c=a[1];let m=d-(c-d);m>=0&&(i=t.isRange(m,d,!1))}return a}static checkChecksum(t){return Zt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return Zt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let c=i-1;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new Q;a+=u}a*=3;for(let c=i-2;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new Q;a+=u}return(1e3-a)%10}static decodeEnd(t,i){return Zt.findGuardPattern(t,i,!1,Zt.START_END_PATTERN,new Int32Array(Zt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,a,c){return this.findGuardPattern(t,i,a,c,new Int32Array(c.length))}static findGuardPattern(t,i,a,c,u){let d=t.getSize();i=a?t.getNextUnset(i):t.getNextSet(i);let m=0,y=i,E=c.length,C=a;for(let R=i;R<d;R++)if(t.get(R)!==C)u[m]++;else{if(m===E-1){if(Vt.patternMatchVariance(u,c,Zt.MAX_INDIVIDUAL_VARIANCE)<Zt.MAX_AVG_VARIANCE)return Int32Array.from([y,R]);y+=u[0]+u[1];let D=u.slice(2,u.length-1);for(let j=0;j<m-1;j++)u[j]=D[j];u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,C=!C}throw new ie}static decodeDigit(t,i,a,c){this.recordPattern(t,a,i);let u=this.MAX_AVG_VARIANCE,d=-1,m=c.length;for(let y=0;y<m;y++){let E=c[y],C=Vt.patternMatchVariance(i,E,Zt.MAX_INDIVIDUAL_VARIANCE);C<u&&(u=C,d=y)}if(d>=0)return d;throw new ie}}Zt.MAX_AVG_VARIANCE=.48,Zt.MAX_INDIVIDUAL_VARIANCE=.7,Zt.START_END_PATTERN=Int32Array.from([1,1,1]),Zt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Zt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _a{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,a,c),d=c.toString(),m=_a.parseExtensionString(d),y=[new Re((a[0]+a[1])/2,t),new Re(u,t)],E=new _e(d,null,0,y,Ee.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&E.putAllMetadata(m),E}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=i[1],m=0;for(let E=0;E<5&&d<u;E++){let C=Zt.decodeDigit(t,c,d,Zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)d+=R;C>=10&&(m|=1<<4-E),E!==4&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==5)throw new ie;let y=this.determineCheckDigit(m);if(_a.extensionChecksum(a.toString())!==y)throw new ie;return d}static extensionChecksum(t){let i=t.length,a=0;for(let c=i-2;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;a*=3;for(let c=i-1;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new ie}static parseExtensionString(t){if(t.length!==5)return null;let i=_a.parseExtension5String(t);return i==null?null:new Map([[mt.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let a=parseInt(t.substring(1)),c=(a/100).toString(),u=a%100,d=u<10?"0"+u:u.toString();return i+c+"."+d}}class al{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,a,c),d=c.toString(),m=al.parseExtensionString(d),y=[new Re((a[0]+a[1])/2,t),new Re(u,t)],E=new _e(d,null,0,y,Ee.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&E.putAllMetadata(m),E}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=i[1],m=0;for(let y=0;y<2&&d<u;y++){let E=Zt.decodeDigit(t,c,d,Zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let C of c)d+=C;E>=10&&(m|=1<<1-y),y!==1&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==2)throw new ie;if(parseInt(a.toString())%4!==m)throw new ie;return d}static parseExtensionString(t){return t.length!==2?null:new Map([[mt.ISSUE_NUMBER,parseInt(t)]])}}class Ca{static decodeRow(t,i,a){let c=Zt.findGuardPattern(i,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new _a().decodeRow(t,i,c)}catch{return new al().decodeRow(t,i,c)}}}Ca.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ut extends Zt{constructor(){super(),this.decodeRowStringBuffer="",ut.L_AND_G_PATTERNS=ut.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=ut.L_PATTERNS[t-10],a=new Int32Array(i.length);for(let c=0;c<i.length;c++)a[c]=i[i.length-c-1];ut.L_AND_G_PATTERNS[t]=a}}decodeRow(t,i,a){let c=ut.findStartGuardPattern(i),u=a==null?null:a.get(Ae.NEED_RESULT_POINT_CALLBACK);if(u!=null){const xe=new Re((c[0]+c[1])/2,t);u.foundPossibleResultPoint(xe)}let d=this.decodeMiddle(i,c,this.decodeRowStringBuffer),m=d.rowOffset,y=d.resultString;if(u!=null){const xe=new Re(m,t);u.foundPossibleResultPoint(xe)}let E=this.decodeEnd(i,m);if(u!=null){const xe=new Re((E[0]+E[1])/2,t);u.foundPossibleResultPoint(xe)}let C=E[1],R=C+(C-E[0]);if(R>=i.getSize()||!i.isRange(C,R,!1))throw new ie;let D=y.toString();if(D.length<8)throw new Q;if(!ut.checkChecksum(D))throw new k;let j=(c[1]+c[0])/2,F=(E[1]+E[0])/2,H=this.getBarcodeFormat(),X=[new Re(j,t),new Re(F,t)],re=new _e(D,null,0,X,H,new Date().getTime()),ve=0;try{let xe=Ca.decodeRow(t,i,E[1]);re.putMetadata(mt.UPC_EAN_EXTENSION,xe.getText()),re.putAllMetadata(xe.getResultMetadata()),re.addResultPoints(xe.getResultPoints()),ve=xe.getText().length}catch{}let we=a==null?null:a.get(Ae.ALLOWED_EAN_EXTENSIONS);if(we!=null){let xe=!1;for(let it in we)if(ve.toString()===it){xe=!0;break}if(!xe)throw new ie}return re}decodeEnd(t,i){return ut.findGuardPattern(t,i,!1,ut.START_END_PATTERN,new Int32Array(ut.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return ut.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return ut.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let c=i-1;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new Q;a+=u}a*=3;for(let c=i-2;c>=0;c-=2){let u=t.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new Q;a+=u}return(1e3-a)%10}}class Si extends ut{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=i[1],m=0;for(let E=0;E<6&&d<u;E++){let C=ut.decodeDigit(t,c,d,ut.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)d+=R;C>=10&&(m|=1<<5-E)}a=Si.determineFirstDigit(a,m),d=ut.findGuardPattern(t,d,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&d<u;E++){let C=ut.decodeDigit(t,c,d,ut.L_PATTERNS);a+=String.fromCharCode(48+C);for(let R of c)d+=R}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(t,i){for(let a=0;a<10;a++)if(i===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new ie}}Si.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ki extends ut{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d=i[1];for(let y=0;y<4&&d<u;y++){let E=ut.decodeDigit(t,c,d,ut.L_PATTERNS);a+=String.fromCharCode(48+E);for(let C of c)d+=C}d=ut.findGuardPattern(t,d,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&d<u;y++){let E=ut.decodeDigit(t,c,d,ut.L_PATTERNS);a+=String.fromCharCode(48+E);for(let C of c)d+=C}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return Ee.EAN_8}}class Ta extends ut{constructor(){super(...arguments),this.ean13Reader=new Si}getBarcodeFormat(){return Ee.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,a))}decodeMiddle(t,i,a){return this.ean13Reader.decodeMiddle(t,i,a)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let a=new _e(i.substring(1),null,null,t.getResultPoints(),Ee.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new ie}reset(){this.ean13Reader.reset()}}class Rn extends ut{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,a){const c=this.decodeMiddleCounters.map(E=>E);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=t.getSize();let d=i[1],m=0;for(let E=0;E<6&&d<u;E++){const C=Rn.decodeDigit(t,c,d,Rn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let R of c)d+=R;C>=10&&(m|=1<<5-E)}let y=Rn.determineNumSysAndCheckDigit(a,m);return{rowOffset:d,resultString:y}}decodeEnd(t,i){return Rn.findGuardPatternWithoutCounters(t,i,!0,Rn.MIDDLE_END_PATTERN)}checkChecksum(t){return ut.checkChecksum(Rn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return u+t+d}throw ie.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new Ue;a.append(t.charAt(0));let c=i[5];switch(c){case 0:case 1:case 2:a.appendChars(i,0,2),a.append(c),a.append("0000"),a.appendChars(i,2,3);break;case 3:a.appendChars(i,0,3),a.append("00000"),a.appendChars(i,3,2);break;case 4:a.appendChars(i,0,4),a.append("00000"),a.append(i[4]);break;default:a.appendChars(i,0,5),a.append("0000"),a.append(c);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}Rn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Rn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class sl extends Vt{constructor(t){super();let i=t==null?null:t.get(Ae.POSSIBLE_FORMATS),a=[];f(i)?(a.push(new Si),a.push(new Ta),a.push(new Ki),a.push(new Rn)):(i.indexOf(Ee.EAN_13)>-1&&a.push(new Si),i.indexOf(Ee.UPC_A)>-1&&a.push(new Ta),i.indexOf(Ee.EAN_8)>-1&&a.push(new Ki),i.indexOf(Ee.UPC_E)>-1&&a.push(new Rn)),this.readers=a}decodeRow(t,i,a){for(let c of this.readers)try{const u=c.decodeRow(t,i,a),d=u.getBarcodeFormat()===Ee.EAN_13&&u.getText().charAt(0)==="0",m=a==null?null:a.get(Ae.POSSIBLE_FORMATS),y=m==null||m.includes(Ee.UPC_A);if(d&&y){const E=u.getRawBytes(),C=new _e(u.getText().substring(1),E,E?E.length:null,u.getResultPoints(),Ee.UPC_A);return C.putAllMetadata(u.getResultMetadata()),C}return u}catch{}throw new ie}reset(){for(let t of this.readers)t.reset()}}class En extends Vt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let a=0;a<i.length;a++)if(Vt.patternMatchVariance(t,i[a],En.MAX_INDIVIDUAL_VARIANCE)<En.MAX_AVG_VARIANCE)return a;throw new ie}static count(t){return at.sum(new Int32Array(t))}static increment(t,i){let a=0,c=i[0];for(let u=1;u<t.length;u++)i[u]>c&&(c=i[u],a=u);t[a]++}static decrement(t,i){let a=0,c=i[0];for(let u=1;u<t.length;u++)i[u]<c&&(c=i[u],a=u);t[a]--}static isFinderPattern(t){let i=t[0]+t[1],a=i+t[2]+t[3],c=i/a;if(c>=En.MIN_FINDER_PATTERN_RATIO&&c<=En.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let m of t)m>d&&(d=m),m<u&&(u=m);return d<10*u}return!1}}En.MAX_AVG_VARIANCE=.2,En.MAX_INDIVIDUAL_VARIANCE=.45,En.MIN_FINDER_PATTERN_RATIO=9.5/12,En.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ji{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Ji))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class $i{constructor(t,i,a,c,u){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Re(a,u)),this.resultPoints.push(new Re(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof $i))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class _i{constructor(){}static getRSSvalue(t,i,a){let c=0;for(let y of t)c+=y;let u=0,d=0,m=t.length;for(let y=0;y<m-1;y++){let E;for(E=1,d|=1<<y;E<t[y];E++,d&=~(1<<y)){let C=_i.combins(c-E-1,m-y-2);if(a&&d===0&&c-E-(m-y-1)>=m-y-1&&(C-=_i.combins(c-E-(m-y),m-y-2)),m-y-1>1){let R=0;for(let D=c-E-(m-y-2);D>i;D--)R+=_i.combins(c-E-D-1,m-y-3);C-=R*(m-1-y)}else c-E>i&&C--;u+=C}c-=E}return u}static combins(t,i){let a,c;t-i>i?(c=i,a=t-i):(c=t-i,a=i);let u=1,d=1;for(let m=t;m>a;m--)u*=m,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class go{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let a=12*i,c=new ce(a),u=0,m=t[0].getRightChar().getValue();for(let y=11;y>=0;--y)(m&1<<y)!=0&&c.set(u),u++;for(let y=1;y<t.length;++y){let E=t[y],C=E.getLeftChar().getValue();for(let R=11;R>=0;--R)(C&1<<R)!=0&&c.set(u),u++;if(E.getRightChar()!=null){let R=E.getRightChar().getValue();for(let D=11;D>=0;--D)(R&1<<D)!=0&&c.set(u),u++}}return c}}class er{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rs{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Nn extends rs{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Nn.FNC1}}Nn.FNC1="$";class Ui extends rs{constructor(t,i,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Fn extends rs{constructor(t,i,a){if(super(t),i<0||i>10||a<0||a>10)throw new Q;this.firstDigit=i,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Fn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Fn.FNC1}isAnyFNC1(){return this.firstDigit===Fn.FNC1||this.secondDigit===Fn.FNC1}}Fn.FNC1=10;class Te{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ie;let i=t.substring(0,2);for(let u of Te.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Te.VARIABLE_LENGTH?Te.processVariableAI(2,u[2],t):Te.processFixedAI(2,u[1],t);if(t.length<3)throw new ie;let a=t.substring(0,3);for(let u of Te.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Te.VARIABLE_LENGTH?Te.processVariableAI(3,u[2],t):Te.processFixedAI(3,u[1],t);for(let u of Te.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===Te.VARIABLE_LENGTH?Te.processVariableAI(4,u[2],t):Te.processFixedAI(4,u[1],t);if(t.length<4)throw new ie;let c=t.substring(0,4);for(let u of Te.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===Te.VARIABLE_LENGTH?Te.processVariableAI(4,u[2],t):Te.processFixedAI(4,u[1],t);throw new ie}static processFixedAI(t,i,a){if(a.length<t)throw new ie;let c=a.substring(0,t);if(a.length<t+i)throw new ie;let u=a.substring(t,t+i),d=a.substring(t+i),m="("+c+")"+u,y=Te.parseFieldsInGeneralPurpose(d);return y==null?m:m+y}static processVariableAI(t,i,a){let c=a.substring(0,t),u;a.length<t+i?u=a.length:u=t+i;let d=a.substring(t,u),m=a.substring(u),y="("+c+")"+d,E=Te.parseFieldsInGeneralPurpose(m);return E==null?y:y+E}}Te.VARIABLE_LENGTH=[],Te.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Te.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Te.VARIABLE_LENGTH,20],["22",Te.VARIABLE_LENGTH,29],["30",Te.VARIABLE_LENGTH,8],["37",Te.VARIABLE_LENGTH,8],["90",Te.VARIABLE_LENGTH,30],["91",Te.VARIABLE_LENGTH,30],["92",Te.VARIABLE_LENGTH,30],["93",Te.VARIABLE_LENGTH,30],["94",Te.VARIABLE_LENGTH,30],["95",Te.VARIABLE_LENGTH,30],["96",Te.VARIABLE_LENGTH,30],["97",Te.VARIABLE_LENGTH,3],["98",Te.VARIABLE_LENGTH,30],["99",Te.VARIABLE_LENGTH,30]],Te.THREE_DIGIT_DATA_LENGTH=[["240",Te.VARIABLE_LENGTH,30],["241",Te.VARIABLE_LENGTH,30],["242",Te.VARIABLE_LENGTH,6],["250",Te.VARIABLE_LENGTH,30],["251",Te.VARIABLE_LENGTH,30],["253",Te.VARIABLE_LENGTH,17],["254",Te.VARIABLE_LENGTH,20],["400",Te.VARIABLE_LENGTH,30],["401",Te.VARIABLE_LENGTH,30],["402",17],["403",Te.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Te.VARIABLE_LENGTH,20],["421",Te.VARIABLE_LENGTH,15],["422",3],["423",Te.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Te.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Te.VARIABLE_LENGTH,15],["391",Te.VARIABLE_LENGTH,18],["392",Te.VARIABLE_LENGTH,15],["393",Te.VARIABLE_LENGTH,18],["703",Te.VARIABLE_LENGTH,30]],Te.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Te.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Te.VARIABLE_LENGTH,20],["8003",Te.VARIABLE_LENGTH,30],["8004",Te.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Te.VARIABLE_LENGTH,30],["8008",Te.VARIABLE_LENGTH,12],["8018",18],["8020",Te.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Te.VARIABLE_LENGTH,70],["8200",Te.VARIABLE_LENGTH,70]];class Hn{constructor(t){this.buffer=new Ue,this.information=t}decodeAllCodes(t,i){let a=i,c=null;do{let u=this.decodeGeneralPurposeField(a,c),d=Te.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&t.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new Fn(this.information.getSize(),Fn.FNC1,Fn.FNC1):new Fn(this.information.getSize(),u-1,Fn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),a=(i-8)/11,c=(i-8)%11;return new Fn(t+7,a,c)}extractNumericValueFromBitArray(t,i){return Hn.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,a){let c=0;for(let u=0;u<a;++u)t.get(i+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Ui(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Ui(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let a=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Ui(this.current.getPosition(),this.buffer.toString()):i=new Ui(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new er(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Ui(this.current.getPosition(),this.buffer.toString());return new er(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new er(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Ui(this.current.getPosition(),this.buffer.toString());return new er(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new er(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Ui(this.current.getPosition(),this.buffer.toString());return new er(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new er(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(t,8);return c>=232&&c<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Nn(t+5,Nn.FNC1);if(i>=5&&i<15)return new Nn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new Nn(t+7,""+(a+1));if(a>=90&&a<116)return new Nn(t+7,""+(a+7));let c=this.extractNumericValueFromBitArray(t,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new Q}return new Nn(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Nn(t+5,Nn.FNC1);if(i>=5&&i<15)return new Nn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new Nn(t+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Zn("Decoding invalid alphanumeric value: "+a)}return new Nn(t+6,c)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class on{constructor(t){this.information=t,this.generalDecoder=new Hn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class It extends on{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,a)}encodeCompressedGtinWithoutAI(t,i,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*c,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}It.appendCheckDigit(t,a)}static appendCheckDigit(t,i){let a=0;for(let c=0;c<13;c++){let u=t.charAt(c+i).charCodeAt(0)-48;a+=(c&1)===0?3*u:u}a=10-a%10,a===10&&(a=0),t.append(a)}}It.GTIN_SIZE=40;class li extends It{constructor(t){super(t)}parseInformation(){let t=new Ue;t.append("(01)");let i=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(li.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,li.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,li.HEADER_SIZE+44)}}li.HEADER_SIZE=4;class Ur extends on{constructor(t){super(t)}parseInformation(){let t=new Ue;return this.getGeneralDecoder().decodeAllCodes(t,Ur.HEADER_SIZE)}}Ur.HEADER_SIZE=5;class as extends It{constructor(t){super(t)}encodeCompressedWeight(t,i,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,a);this.addWeightCode(t,c);let u=this.checkWeight(c),d=1e5;for(let m=0;m<5;++m)u/d===0&&t.append("0"),d/=10;t.append(u)}}class Ci extends as{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Ci.HEADER_SIZE+as.GTIN_SIZE+Ci.WEIGHT_SIZE)throw new ie;let t=new Ue;return this.encodeCompressedGtin(t,Ci.HEADER_SIZE),this.encodeCompressedWeight(t,Ci.HEADER_SIZE+as.GTIN_SIZE,Ci.WEIGHT_SIZE),t.toString()}}Ci.HEADER_SIZE=5,Ci.WEIGHT_SIZE=15;class mo extends Ci{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class Na extends Ci{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Kn extends It{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Kn.HEADER_SIZE+It.GTIN_SIZE)throw new ie;let t=new Ue;this.encodeCompressedGtin(t,Kn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Kn.HEADER_SIZE+It.GTIN_SIZE,Kn.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Kn.HEADER_SIZE+It.GTIN_SIZE+Kn.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}Kn.HEADER_SIZE=8,Kn.LAST_DIGIT_SIZE=2;class en extends It{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<en.HEADER_SIZE+It.GTIN_SIZE)throw new ie;let t=new Ue;this.encodeCompressedGtin(t,en.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+It.GTIN_SIZE,en.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+It.GTIN_SIZE+en.LAST_DIGIT_SIZE,en.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(en.HEADER_SIZE+It.GTIN_SIZE+en.LAST_DIGIT_SIZE+en.FIRST_THREE_DIGITS_SIZE,null);return t.append(c.getNewString()),t.toString()}}en.HEADER_SIZE=8,en.LAST_DIGIT_SIZE=2,en.FIRST_THREE_DIGITS_SIZE=10;class At extends as{constructor(t,i,a){super(t),this.dateCode=a,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=At.HEADER_SIZE+At.GTIN_SIZE+At.WEIGHT_SIZE+At.DATE_SIZE)throw new ie;let t=new Ue;return this.encodeCompressedGtin(t,At.HEADER_SIZE),this.encodeCompressedWeight(t,At.HEADER_SIZE+At.GTIN_SIZE,At.WEIGHT_SIZE),this.encodeCompressedDate(t,At.HEADER_SIZE+At.GTIN_SIZE+At.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,At.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let d=a;d/10==0&&t.append("0"),t.append(d),u/10==0&&t.append("0"),t.append(u),c/10==0&&t.append("0"),t.append(c)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}At.HEADER_SIZE=8,At.WEIGHT_SIZE=20,At.DATE_SIZE=16;function zr(I){try{if(I.get(1))return new li(I);if(!I.get(2))return new Ur(I);switch(Hn.extractNumericValueFromBitArray(I,1,4)){case 4:return new mo(I);case 5:return new Na(I)}switch(Hn.extractNumericValueFromBitArray(I,1,5)){case 12:return new Kn(I);case 13:return new en(I)}switch(Hn.extractNumericValueFromBitArray(I,1,7)){case 56:return new At(I,"310","11");case 57:return new At(I,"320","11");case 58:return new At(I,"310","13");case 59:return new At(I,"320","13");case 60:return new At(I,"310","15");case 61:return new At(I,"320","15");case 62:return new At(I,"310","17");case 63:return new At(I,"320","17")}}catch(t){throw console.log(t),new Zn("unknown decoder: "+I)}}class Vn{constructor(t,i,a,c){this.leftchar=t,this.rightchar=i,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof Vn?Vn.equalsOrNull(t.leftchar,i.leftchar)&&Vn.equalsOrNull(t.rightchar,i.rightchar)&&Vn.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:Vn.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class tn{constructor(t,i,a){this.pairs=t,this.rowNumber=i,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof tn?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let a;return t.forEach((c,u)=>{i.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class pe extends En{constructor(t){super(...arguments),this.pairs=new Array(pe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,a){this.pairs.length=0,this.startFromEven=!1;try{return pe.constructResult(this.decodeRow2pairs(t,i))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,pe.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(u){if(u instanceof ie){if(!this.pairs.length)throw new ie;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(t,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new ie}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let a=i;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of t)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!pe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(c);try{return this.checkRows(u,a+1)}catch(d){this.verbose&&console.log(d)}}throw new ie}static isValidSequence(t){for(let i of pe.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let a=!0;for(let c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!=i[c]){a=!1;break}if(a)return!0}return!1}storeRow(t,i){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>t){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}u||c||pe.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new tn(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let a of i)if(a.getPairs().length!==t.length){for(let c of a.getPairs())for(let u of t)if(Vn.equals(c,u))break}}static isPartialRow(t,i){for(let a of i){let c=!0;for(let u of t){let d=!1;for(let m of a.getPairs())if(u.equals(m)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=go.buildBitArray(t),c=zr(i).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),d=t[t.length-1].getFinderPattern().getResultPoints(),m=[u[0],u[1],d[0],d[1]];return new _e(c,null,null,m,Ee.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let m=1;m<this.pairs.size();++m){let y=this.pairs.get(m);c+=y.getLeftChar().getChecksumPortion(),u++;let E=y.getRightChar();E!=null&&(c+=E.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==i.getValue()}static getNextSecondBar(t,i){let a;return t.get(i)?(a=t.getNextUnset(i),a=t.getNextSet(a)):(a=t.getNextSet(i),a=t.getNextUnset(a)),a}retrieveNextPair(t,i,a){let c=i.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,m=-1;do this.findNextPair(t,i,m),u=this.parseFoundFinderPattern(t,a,c),u==null?m=pe.getNextSecondBar(t,this.startEnd[0]):d=!1;while(d);let y=this.decodeDataCharacter(t,u,c,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new ie;let E;try{E=this.decodeDataCharacter(t,u,c,!1)}catch(C){E=null,this.verbose&&console.log(C)}return new Vn(y,E,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=t.getSize(),d;a>=0?d=a:this.isEmptyPair(i)?d=0:d=i[i.length-1].getFinderPattern().getStartEnd()[1];let m=i.length%2!=0;this.startFromEven&&(m=!m);let y=!1;for(;d<u&&(y=!t.get(d),!!y);)d++;let E=0,C=d;for(let R=d;R<u;R++)if(t.get(R)!=y)c[E]++;else{if(E==3){if(m&&pe.reverseCounters(c),pe.isFinderPattern(c)){this.startEnd[0]=C,this.startEnd[1]=R;return}m&&pe.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,E--}else E++;c[E]=1,y=!y}throw new ie}static reverseCounters(t){let i=t.length;for(let a=0;a<i/2;++a){let c=t[a];t[a]=t[i-a-1],t[i-a-1]=c}}parseFoundFinderPattern(t,i,a){let c,u,d;if(a){let E=this.startEnd[0]-1;for(;E>=0&&!t.get(E);)E--;E++,c=this.startEnd[0]-E,u=E,d=this.startEnd[1]}else u=this.startEnd[0],d=t.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let m=this.getDecodeFinderCounters();U.arraycopy(m,0,m,1,m.length-1),m[0]=c;let y;try{y=this.parseFinderValue(m,pe.FINDER_PATTERNS)}catch{return null}return new $i(y,[u,d],u,d,i)}decodeDataCharacter(t,i,a,c){let u=this.getDataCharacterCounters();for(let Nt=0;Nt<u.length;Nt++)u[Nt]=0;if(c)pe.recordPatternInReverse(t,i.getStartEnd()[0],u);else{pe.recordPattern(t,i.getStartEnd()[1],u);for(let Nt=0,_n=u.length-1;Nt<_n;Nt++,_n--){let Yn=u[Nt];u[Nt]=u[_n],u[_n]=Yn}}let d=17,m=at.sum(new Int32Array(u))/d,y=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new ie;let E=this.getOddCounts(),C=this.getEvenCounts(),R=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Nt=0;Nt<u.length;Nt++){let _n=1*u[Nt]/m,Yn=_n+.5;if(Yn<1){if(_n<.3)throw new ie;Yn=1}else if(Yn>8){if(_n>8.7)throw new ie;Yn=8}let Kr=Nt/2;(Nt&1)==0?(E[Kr]=Yn,R[Kr]=_n-Yn):(C[Kr]=Yn,D[Kr]=_n-Yn)}this.adjustOddEvenCounts(d);let j=4*i.getValue()+(a?0:2)+(c?0:1)-1,F=0,H=0;for(let Nt=E.length-1;Nt>=0;Nt--){if(pe.isNotA1left(i,a,c)){let _n=pe.WEIGHTS[j][2*Nt];H+=E[Nt]*_n}F+=E[Nt]}let X=0;for(let Nt=C.length-1;Nt>=0;Nt--)if(pe.isNotA1left(i,a,c)){let _n=pe.WEIGHTS[j][2*Nt+1];X+=C[Nt]*_n}let re=H+X;if((F&1)!=0||F>13||F<4)throw new ie;let ve=(13-F)/2,we=pe.SYMBOL_WIDEST[ve],xe=9-we,it=_i.getRSSvalue(E,we,!0),Ze=_i.getRSSvalue(C,xe,!1),nn=pe.EVEN_TOTAL_SUBSET[ve],ei=pe.GSUM[ve],Dn=it*nn+Ze+ei;return new Ji(Dn,re)}static isNotA1left(t,i,a){return!(t.getValue()==0&&i&&a)}adjustOddEvenCounts(t){let i=at.sum(new Int32Array(this.getOddCounts())),a=at.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);let d=!1,m=!1;a>13?m=!0:a<4&&(d=!0);let y=i+a-t,E=(i&1)==1,C=(a&1)==0;if(y==1)if(E){if(C)throw new ie;u=!0}else{if(!C)throw new ie;m=!0}else if(y==-1)if(E){if(C)throw new ie;c=!0}else{if(!C)throw new ie;d=!0}else if(y==0){if(E){if(!C)throw new ie;i<a?(c=!0,m=!0):(u=!0,d=!0)}else if(C)throw new ie}else throw new ie;if(c){if(u)throw new ie;pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(m)throw new ie;pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pe.SYMBOL_WIDEST=[7,5,4,3,1],pe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],pe.GSUM=[0,348,1388,2948,3988],pe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],pe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],pe.FINDER_PAT_A=0,pe.FINDER_PAT_B=1,pe.FINDER_PAT_C=2,pe.FINDER_PAT_D=3,pe.FINDER_PAT_E=4,pe.FINDER_PAT_F=5,pe.FINDER_PATTERN_SEQUENCES=[[pe.FINDER_PAT_A,pe.FINDER_PAT_A],[pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B],[pe.FINDER_PAT_A,pe.FINDER_PAT_C,pe.FINDER_PAT_B,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_C],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F]],pe.MAX_PAIRS=11;class po extends Ji{constructor(t,i,a){super(t,i),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ct extends En{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,a){const c=this.decodePair(i,!1,t,a);Ct.addOrTally(this.possibleLeftPairs,c),i.reverse();let u=this.decodePair(i,!0,t,a);Ct.addOrTally(this.possibleRightPairs,u),i.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Ct.checkChecksum(d,m))return Ct.constructResult(d,m)}throw new ie}static addOrTally(t,i){if(i==null)return;let a=!1;for(let c of t)if(c.getValue()===i.getValue()){c.incrementCount(),a=!0;break}a||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let a=4537077*t.getValue()+i.getValue(),c=new String(a).toString(),u=new Ue;for(let E=13-c.length;E>0;E--)u.append("0");u.append(c);let d=0;for(let E=0;E<13;E++){let C=u.charAt(E).charCodeAt(0)-48;d+=(E&1)===0?3*C:C}d=10-d%10,d===10&&(d=0),u.append(d.toString());let m=t.getFinderPattern().getResultPoints(),y=i.getFinderPattern().getResultPoints();return new _e(u.toString(),null,0,[m[0],m[1],y[0],y[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(t,i){let a=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,c=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(t,i,a,c){try{let u=this.findFinderPattern(t,i),d=this.parseFoundFinderPattern(t,a,i,u),m=c==null?null:c.get(Ae.NEED_RESULT_POINT_CALLBACK);if(m!=null){let C=(u[0]+u[1])/2;i&&(C=t.getSize()-1-C),m.foundPossibleResultPoint(new Re(C,a))}let y=this.decodeDataCharacter(t,d,!0),E=this.decodeDataCharacter(t,d,!1);return new po(1597*y.getValue()+E.getValue(),y.getChecksumPortion()+4*E.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(t,i,a){let c=this.getDataCharacterCounters();for(let X=0;X<c.length;X++)c[X]=0;if(a)Vt.recordPatternInReverse(t,i.getStartEnd()[0],c);else{Vt.recordPattern(t,i.getStartEnd()[1]+1,c);for(let X=0,re=c.length-1;X<re;X++,re--){let ve=c[X];c[X]=c[re],c[re]=ve}}let u=a?16:15,d=at.sum(new Int32Array(c))/u,m=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let X=0;X<c.length;X++){let re=c[X]/d,ve=Math.floor(re+.5);ve<1?ve=1:ve>8&&(ve=8);let we=Math.floor(X/2);(X&1)===0?(m[we]=ve,E[we]=re-ve):(y[we]=ve,C[we]=re-ve)}this.adjustOddEvenCounts(a,u);let R=0,D=0;for(let X=m.length-1;X>=0;X--)D*=9,D+=m[X],R+=m[X];let j=0,F=0;for(let X=y.length-1;X>=0;X--)j*=9,j+=y[X],F+=y[X];let H=D+3*j;if(a){if((R&1)!==0||R>12||R<4)throw new ie;let X=(12-R)/2,re=Ct.OUTSIDE_ODD_WIDEST[X],ve=9-re,we=_i.getRSSvalue(m,re,!1),xe=_i.getRSSvalue(y,ve,!0),it=Ct.OUTSIDE_EVEN_TOTAL_SUBSET[X],Ze=Ct.OUTSIDE_GSUM[X];return new Ji(we*it+xe+Ze,H)}else{if((F&1)!==0||F>10||F<4)throw new ie;let X=(10-F)/2,re=Ct.INSIDE_ODD_WIDEST[X],ve=9-re,we=_i.getRSSvalue(m,re,!0),xe=_i.getRSSvalue(y,ve,!1),it=Ct.INSIDE_ODD_TOTAL_SUBSET[X],Ze=Ct.INSIDE_GSUM[X];return new Ji(xe*it+we+Ze,H)}}findFinderPattern(t,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),u=!1,d=0;for(;d<c&&(u=!t.get(d),i!==u);)d++;let m=0,y=d;for(let E=d;E<c;E++)if(t.get(E)!==u)a[m]++;else{if(m===3){if(En.isFinderPattern(a))return[y,E];y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,u=!u}throw new ie}parseFoundFinderPattern(t,i,a,c){let u=t.get(c[0]),d=c[0]-1;for(;d>=0&&u!==t.get(d);)d--;d++;const m=c[0]-d,y=this.getDecodeFinderCounters(),E=new Int32Array(y.length);U.arraycopy(y,0,E,1,y.length-1),E[0]=m;const C=this.parseFinderValue(E,Ct.FINDER_PATTERNS);let R=d,D=c[1];return a&&(R=t.getSize()-1-R,D=t.getSize()-1-D),new $i(C,[d,c[1]],R,D,i)}adjustOddEvenCounts(t,i){let a=at.sum(new Int32Array(this.getOddCounts())),c=at.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,m=!1,y=!1;t?(a>12?d=!0:a<4&&(u=!0),c>12?y=!0:c<4&&(m=!0)):(a>11?d=!0:a<5&&(u=!0),c>10?y=!0:c<4&&(m=!0));let E=a+c-i,C=(a&1)===(t?1:0),R=(c&1)===1;if(E===1)if(C){if(R)throw new ie;d=!0}else{if(!R)throw new ie;y=!0}else if(E===-1)if(C){if(R)throw new ie;u=!0}else{if(!R)throw new ie;m=!0}else if(E===0){if(C){if(!R)throw new ie;a<c?(u=!0,y=!0):(d=!0,m=!0)}else if(R)throw new ie}else throw new ie;if(u){if(d)throw new ie;En.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&En.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new ie;En.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&En.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ct.OUTSIDE_GSUM=[0,161,961,2015,2715],Ct.INSIDE_GSUM=[0,336,1036,1516],Ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ct.INSIDE_ODD_WIDEST=[2,4,6,8],Ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class oi extends Vt{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const a=t?t.get(Ae.POSSIBLE_FORMATS):null,c=t&&t.get(Ae.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(Ee.EAN_13)||a.includes(Ee.UPC_A)||a.includes(Ee.EAN_8)||a.includes(Ee.UPC_E))&&this.readers.push(new sl(t)),a.includes(Ee.CODE_39)&&this.readers.push(new Bt(c)),a.includes(Ee.CODE_128)&&this.readers.push(new be),a.includes(Ee.ITF)&&this.readers.push(new et),a.includes(Ee.RSS_14)&&this.readers.push(new Ct),a.includes(Ee.RSS_EXPANDED)&&this.readers.push(new pe(this.verbose))):(this.readers.push(new sl(t)),this.readers.push(new Bt),this.readers.push(new sl(t)),this.readers.push(new be),this.readers.push(new et),this.readers.push(new Ct),this.readers.push(new pe(this.verbose)))}decodeRow(t,i,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(t,i,a)}catch{}throw new ie}reset(){this.readers.forEach(t=>t.reset())}}class Qc extends Se{constructor(t=500,i){super(new oi(i),t,i)}}class yt{constructor(t,i,a){this.ecCodewords=t,this.ecBlocks=[i],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class xt{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class st{constructor(t,i,a,c,u,d){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let m=0;const y=d.getECCodewords(),E=d.getECBlocks();for(let C of E)m+=C.getCount()*(C.getDataCodewords()+y);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new Q;for(let a of st.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===i)return a;throw new Q}toString(){return""+this.versionNumber}static buildVersions(){return[new st(1,10,10,8,8,new yt(5,new xt(1,3))),new st(2,12,12,10,10,new yt(7,new xt(1,5))),new st(3,14,14,12,12,new yt(10,new xt(1,8))),new st(4,16,16,14,14,new yt(12,new xt(1,12))),new st(5,18,18,16,16,new yt(14,new xt(1,18))),new st(6,20,20,18,18,new yt(18,new xt(1,22))),new st(7,22,22,20,20,new yt(20,new xt(1,30))),new st(8,24,24,22,22,new yt(24,new xt(1,36))),new st(9,26,26,24,24,new yt(28,new xt(1,44))),new st(10,32,32,14,14,new yt(36,new xt(1,62))),new st(11,36,36,16,16,new yt(42,new xt(1,86))),new st(12,40,40,18,18,new yt(48,new xt(1,114))),new st(13,44,44,20,20,new yt(56,new xt(1,144))),new st(14,48,48,22,22,new yt(68,new xt(1,174))),new st(15,52,52,24,24,new yt(42,new xt(2,102))),new st(16,64,64,14,14,new yt(56,new xt(2,140))),new st(17,72,72,16,16,new yt(36,new xt(4,92))),new st(18,80,80,18,18,new yt(48,new xt(4,114))),new st(19,88,88,20,20,new yt(56,new xt(4,144))),new st(20,96,96,22,22,new yt(68,new xt(4,174))),new st(21,104,104,24,24,new yt(56,new xt(6,136))),new st(22,120,120,18,18,new yt(68,new xt(6,175))),new st(23,132,132,20,20,new yt(62,new xt(8,163))),new st(24,144,144,22,22,new yt(62,new xt(8,156),new xt(2,155))),new st(25,8,18,6,16,new yt(7,new xt(1,5))),new st(26,8,32,6,14,new yt(11,new xt(1,10))),new st(27,12,26,10,24,new yt(14,new xt(1,16))),new st(28,12,36,10,16,new yt(18,new xt(1,22))),new st(29,16,36,14,16,new yt(24,new xt(1,32))),new st(30,16,48,14,22,new yt(28,new xt(1,49)))]}}st.VERSIONS=st.buildVersions();class Pr{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new Q;this.version=Pr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Ge(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),a=t.getWidth();return st.getVersionForDimensions(i,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let m=!1,y=!1,E=!1,C=!1;do if(a===u&&c===0&&!m)t[i++]=this.readCorner1(u,d)&255,a-=2,c+=2,m=!0;else if(a===u-2&&c===0&&(d&3)!==0&&!y)t[i++]=this.readCorner2(u,d)&255,a-=2,c+=2,y=!0;else if(a===u+4&&c===2&&(d&7)===0&&!E)t[i++]=this.readCorner3(u,d)&255,a-=2,c+=2,E=!0;else if(a===u-2&&c===0&&(d&7)===4&&!C)t[i++]=this.readCorner4(u,d)&255,a-=2,c+=2,C=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(t[i++]=this.readUtah(a,c,u,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(t[i++]=this.readUtah(a,c,u,d)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<d);if(i!==this.version.getTotalCodewords())throw new Q;return t}readModule(t,i,a,c){return t<0&&(t+=a,i+=4-(a+4&7)),i<0&&(i+=c,t+=4-(c+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,a,c){let u=0;return this.readModule(t-2,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t-2,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t-1,i,a,c)&&(u|=1),u<<=1,this.readModule(t,i-2,a,c)&&(u|=1),u<<=1,this.readModule(t,i-1,a,c)&&(u|=1),u<<=1,this.readModule(t,i,a,c)&&(u|=1),u}readCorner1(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,1,t,i)&&(a|=1),a<<=1,this.readModule(t-1,2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}readCorner2(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-4,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner3(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-3,t,i)&&(a|=1),a<<=1,this.readModule(1,i-2,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner4(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new O("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=i/c|0,m=a/u|0,y=d*c,E=m*u,C=new Ge(E,y);for(let R=0;R<d;++R){const D=R*c;for(let j=0;j<m;++j){const F=j*u;for(let H=0;H<c;++H){const X=R*(c+2)+1+H,re=D+H;for(let ve=0;ve<u;++ve){const we=j*(u+2)+1+ve;if(t.get(we,X)){const xe=F+ve;C.set(xe,re)}}}}}return C}}class Fr{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const a=i.getECBlocks();let c=0;const u=a.getECBlocks();for(let H of u)c+=H.getCount();const d=new Array(c);let m=0;for(let H of u)for(let X=0;X<H.getCount();X++){const re=H.getDataCodewords(),ve=a.getECCodewords()+re;d[m++]=new Fr(re,new Uint8Array(ve))}const E=d[0].codewords.length-a.getECCodewords(),C=E-1;let R=0;for(let H=0;H<C;H++)for(let X=0;X<m;X++)d[X].codewords[H]=t[R++];const D=i.getVersionNumber()===24,j=D?8:m;for(let H=0;H<j;H++)d[H].codewords[E-1]=t[R++];const F=d[0].codewords.length;for(let H=E;H<F;H++)for(let X=0;X<m;X++){const re=D?(X+8)%m:X,ve=D&&re>7?H-1:H;d[re].codewords[ve]=t[R++]}if(R!==t.length)throw new O;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ci{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new O(""+t);let i=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const d=8-a,m=t<d?t:d,y=d-m,E=255>>8-m<<y;i=(u[c]&E)>>y,t-=m,a+=m,a===8&&(a=0,c++)}if(t>0){for(;t>=8;)i=i<<8|u[c]&255,c++,t-=8;if(t>0){const d=8-t,m=255>>d<<d;i=i<<t|(u[c]&m)>>d,a+=t}}return this.bitOffset=a,this.byteOffset=c,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var vt;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(vt||(vt={}));class zi{static decode(t){const i=new ci(t),a=new Ue,c=new Ue,u=new Array;let d=vt.ASCII_ENCODE;do if(d===vt.ASCII_ENCODE)d=this.decodeAsciiSegment(i,a,c);else{switch(d){case vt.C40_ENCODE:this.decodeC40Segment(i,a);break;case vt.TEXT_ENCODE:this.decodeTextSegment(i,a);break;case vt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,a);break;case vt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,a);break;case vt.BASE256_ENCODE:this.decodeBase256Segment(i,a,u);break;default:throw new Q}d=vt.ASCII_ENCODE}while(d!==vt.PAD_ENCODE&&i.available()>0);return c.length()>0&&a.append(c.toString()),new Ut(t,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,i,a){let c=!1;do{let u=t.readBits(8);if(u===0)throw new Q;if(u<=128)return c&&(u+=128),i.append(String.fromCharCode(u-1)),vt.ASCII_ENCODE;if(u===129)return vt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&i.append("0"),i.append(""+d)}else switch(u){case 230:return vt.C40_ENCODE;case 231:return vt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:i.append("[)>05"),a.insert(0,"");break;case 237:i.append("[)>06"),a.insert(0,"");break;case 238:return vt.ANSIX12_ENCODE;case 239:return vt.TEXT_ENCODE;case 240:return vt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new Q;break}}while(t.available()>0);return vt.ASCII_ENCODE}static decodeC40Segment(t,i){let a=!1;const c=[];let u=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),c);for(let m=0;m<3;m++){const y=c[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[y];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E)}else throw new Q;break;case 1:a?(i.append(String.fromCharCode(y+128)),a=!1):i.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[y];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E)}else switch(y){case 27:i.append("");break;case 30:a=!0;break;default:throw new Q}u=0;break;case 3:a?(i.append(String.fromCharCode(y+224)),a=!1):i.append(String.fromCharCode(y+96)),u=0;break;default:throw new Q}}}while(t.available()>0)}static decodeTextSegment(t,i){let a=!1,c=[],u=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),c);for(let m=0;m<3;m++){const y=c[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[y];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E)}else throw new Q;break;case 1:a?(i.append(String.fromCharCode(y+128)),a=!1):i.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[y];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E)}else switch(y){case 27:i.append("");break;case 30:a=!0;break;default:throw new Q}u=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[y];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E),u=0}else throw new Q;break;default:throw new Q}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const a=[];do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),a);for(let u=0;u<3;u++){const d=a[u];switch(d){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(d<14)i.append(String.fromCharCode(d+44));else if(d<40)i.append(String.fromCharCode(d+51));else throw new Q;break}}}while(t.available()>0)}static parseTwoBytes(t,i,a){let c=(t<<8)+i-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let c=t.readBits(6);if(c===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}(c&32)===0&&(c|=64),i.append(String.fromCharCode(c))}}while(t.available()>0)}static decodeBase256Segment(t,i,a){let c=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),c++);let d;if(u===0?d=t.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(t.readBits(8),c++),d<0)throw new Q;const m=new Uint8Array(d);for(let y=0;y<d;y++){if(t.available()<8)throw new Q;m[y]=this.unrandomize255State(t.readBits(8),c++)}a.push(m);try{i.append(ke.decode(m,ye.ISO88591))}catch(y){throw new Zn("Platform does not support required encoding: "+y.message)}}static unrandomize255State(t,i){const a=149*i%255+1,c=t-a;return c>=0?c:c+256}}zi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],zi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],zi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],zi.TEXT_SHIFT2_SET_CHARS=zi.C40_SHIFT2_SET_CHARS,zi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Kc{constructor(){this.rsDecoder=new ur(pt.DATA_MATRIX_FIELD_256)}decode(t){const i=new Pr(t),a=i.getVersion(),c=i.readCodewords(),u=Fr.getDataBlocks(c,a);let d=0;for(let E of u)d+=E.getNumDataCodewords();const m=new Uint8Array(d),y=u.length;for(let E=0;E<y;E++){const C=u[E],R=C.getCodewords(),D=C.getNumDataCodewords();this.correctErrors(R,D);for(let j=0;j<D;j++)m[j*y+E]=R[j]}return zi.decode(m)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new k}for(let c=0;c<i;c++)t[c]=a[c]}}class qt{constructor(t){this.image=t,this.rectangleDetector=new Jt(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new ie;i=this.shiftToModuleCenter(i);const a=i[0],c=i[1],u=i[2],d=i[3];let m=this.transitionsBetween(a,d)+1,y=this.transitionsBetween(u,d)+1;(m&1)===1&&(m+=1),(y&1)===1&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));let E=qt.sampleGrid(this.image,a,c,u,d,m,y);return new ns(E,[a,c,u,d])}static shiftPoint(t,i,a){let c=(i.getX()-t.getX())/(a+1),u=(i.getY()-t.getY())/(a+1);return new Re(t.getX()+c,t.getY()+u)}static moveAway(t,i,a){let c=t.getX(),u=t.getY();return c<i?c-=1:c+=1,u<a?u-=1:u+=1,new Re(c,u)}detectSolid1(t){let i=t[0],a=t[1],c=t[3],u=t[2],d=this.transitionsBetween(i,a),m=this.transitionsBetween(a,c),y=this.transitionsBetween(c,u),E=this.transitionsBetween(u,i),C=d,R=[u,i,a,c];return C>m&&(C=m,R[0]=i,R[1]=a,R[2]=c,R[3]=u),C>y&&(C=y,R[0]=a,R[1]=c,R[2]=u,R[3]=i),C>E&&(R[0]=c,R[1]=u,R[2]=i,R[3]=a),R}detectSolid2(t){let i=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(i,u),m=qt.shiftPoint(a,c,(d+1)*4),y=qt.shiftPoint(c,a,(d+1)*4),E=this.transitionsBetween(m,i),C=this.transitionsBetween(y,u);return E<C?(t[0]=i,t[1]=a,t[2]=c,t[3]=u):(t[0]=a,t[1]=c,t[2]=u,t[3]=i),t}correctTopRight(t){let i=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(i,u),m=this.transitionsBetween(a,u),y=qt.shiftPoint(i,a,(m+1)*4),E=qt.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(y,u),m=this.transitionsBetween(E,u);let C=new Re(u.getX()+(c.getX()-a.getX())/(d+1),u.getY()+(c.getY()-a.getY())/(d+1)),R=new Re(u.getX()+(i.getX()-a.getX())/(m+1),u.getY()+(i.getY()-a.getY())/(m+1));if(!this.isValid(C))return this.isValid(R)?R:null;if(!this.isValid(R))return C;let D=this.transitionsBetween(y,C)+this.transitionsBetween(E,C),j=this.transitionsBetween(y,R)+this.transitionsBetween(E,R);return D>j?C:R}shiftToModuleCenter(t){let i=t[0],a=t[1],c=t[2],u=t[3],d=this.transitionsBetween(i,u)+1,m=this.transitionsBetween(c,u)+1,y=qt.shiftPoint(i,a,m*4),E=qt.shiftPoint(c,a,d*4);d=this.transitionsBetween(y,u)+1,m=this.transitionsBetween(E,u)+1,(d&1)===1&&(d+=1),(m&1)===1&&(m+=1);let C=(i.getX()+a.getX()+c.getX()+u.getX())/4,R=(i.getY()+a.getY()+c.getY()+u.getY())/4;i=qt.moveAway(i,C,R),a=qt.moveAway(a,C,R),c=qt.moveAway(c,C,R),u=qt.moveAway(u,C,R);let D,j;return y=qt.shiftPoint(i,a,m*4),y=qt.shiftPoint(y,u,d*4),D=qt.shiftPoint(a,i,m*4),D=qt.shiftPoint(D,c,d*4),E=qt.shiftPoint(c,u,m*4),E=qt.shiftPoint(E,a,d*4),j=qt.shiftPoint(u,c,m*4),j=qt.shiftPoint(j,i,d*4),[y,D,E,j]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,a,c,u,d,m){return si.getInstance().sampleGrid(t,d,m,.5,.5,d-.5,.5,d-.5,m-.5,.5,m-.5,i.getX(),i.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(t,i){let a=Math.trunc(t.getX()),c=Math.trunc(t.getY()),u=Math.trunc(i.getX()),d=Math.trunc(i.getY()),m=Math.abs(d-c)>Math.abs(u-a);if(m){let H=a;a=c,c=H,H=u,u=d,d=H}let y=Math.abs(u-a),E=Math.abs(d-c),C=-y/2,R=c<d?1:-1,D=a<u?1:-1,j=0,F=this.image.get(m?c:a,m?a:c);for(let H=a,X=c;H!==u;H+=D){let re=this.image.get(m?X:H,m?H:X);if(re!==F&&(j++,F=re),C+=E,C>0){if(X===d)break;X+=R,C-=y}}return j}}class Pi{constructor(){this.decoder=new Kc}decode(t,i=null){let a,c;if(i!=null&&i.has(Ae.PURE_BARCODE)){const E=Pi.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(E),c=Pi.NO_POINTS}else{const E=new qt(t.getBlackMatrix()).detect();a=this.decoder.decode(E.getBits()),c=E.getPoints()}const u=a.getRawBytes(),d=new _e(a.getText(),u,8*u.length,c,Ee.DATA_MATRIX,U.currentTimeMillis()),m=a.getByteSegments();m!=null&&d.putMetadata(mt.BYTE_SEGMENTS,m);const y=a.getECLevel();return y!=null&&d.putMetadata(mt.ERROR_CORRECTION_LEVEL,y),d}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i==null||a==null)throw new ie;const c=this.moduleSize(i,t);let u=i[1];const d=a[1];let m=i[0];const E=(a[0]-m+1)/c,C=(d-u+1)/c;if(E<=0||C<=0)throw new ie;const R=c/2;u+=R,m+=R;const D=new Ge(E,C);for(let j=0;j<C;j++){const F=u+j*c;for(let H=0;H<E;H++)t.get(m+H*c,F)&&D.set(H,j)}return D}static moduleSize(t,i){const a=i.getWidth();let c=t[0];const u=t[1];for(;c<a&&i.get(c,u);)c++;if(c===a)throw new ie;const d=c-t[0];if(d===0)throw new ie;return d}}Pi.NO_POINTS=[];class ss extends Se{constructor(t=500){super(new Pi,t)}}var Hr;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(Hr||(Hr={}));class rt{constructor(t,i,a){this.value=t,this.stringValue=i,this.bits=a,rt.FOR_BITS.set(a,this),rt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return rt.L;case"M":return rt.M;case"Q":return rt.Q;case"H":return rt.H;default:throw new N(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof rt))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=rt.FOR_BITS.size)throw new O;return rt.FOR_BITS.get(t)}}rt.FOR_BITS=new Map,rt.FOR_VALUE=new Map,rt.L=new rt(Hr.L,"L",1),rt.M=new rt(Hr.M,"M",0),rt.Q=new rt(Hr.Q,"Q",3),rt.H=new rt(Hr.H,"H",2);class dn{constructor(t){this.errorCorrectionLevel=rt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return Z.bitCount(t^i)}static decodeFormatInformation(t,i){const a=dn.doDecodeFormatInformation(t,i);return a!==null?a:dn.doDecodeFormatInformation(t^dn.FORMAT_INFO_MASK_QR,i^dn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of dn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===t||d===i)return new dn(u[1]);let m=dn.numBitsDiffering(t,d);m<a&&(c=u[1],a=m),t!==i&&(m=dn.numBitsDiffering(i,d),m<a&&(c=u[1],a=m))}return a<=3?new dn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof dn))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}dn.FORMAT_INFO_MASK_QR=21522,dn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class W{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const a of i)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class L{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Me{constructor(t,i,...a){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const m of d)c+=m.getCount()*(m.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new Q;try{return this.getVersionForNumber((t-17)/4)}catch{throw new Q}}static getVersionForNumber(t){if(t<1||t>40)throw new O;return Me.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<Me.VERSION_DECODE_INFO.length;c++){const u=Me.VERSION_DECODE_INFO[c];if(u===t)return Me.getVersionForNumber(c+7);const d=dn.numBitsDiffering(t,u);d<i&&(a=c+7,i=d)}return i<=3?Me.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new Ge(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||i.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}Me.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Me.VERSIONS=[new Me(1,new Int32Array(0),new W(7,new L(1,19)),new W(10,new L(1,16)),new W(13,new L(1,13)),new W(17,new L(1,9))),new Me(2,Int32Array.from([6,18]),new W(10,new L(1,34)),new W(16,new L(1,28)),new W(22,new L(1,22)),new W(28,new L(1,16))),new Me(3,Int32Array.from([6,22]),new W(15,new L(1,55)),new W(26,new L(1,44)),new W(18,new L(2,17)),new W(22,new L(2,13))),new Me(4,Int32Array.from([6,26]),new W(20,new L(1,80)),new W(18,new L(2,32)),new W(26,new L(2,24)),new W(16,new L(4,9))),new Me(5,Int32Array.from([6,30]),new W(26,new L(1,108)),new W(24,new L(2,43)),new W(18,new L(2,15),new L(2,16)),new W(22,new L(2,11),new L(2,12))),new Me(6,Int32Array.from([6,34]),new W(18,new L(2,68)),new W(16,new L(4,27)),new W(24,new L(4,19)),new W(28,new L(4,15))),new Me(7,Int32Array.from([6,22,38]),new W(20,new L(2,78)),new W(18,new L(4,31)),new W(18,new L(2,14),new L(4,15)),new W(26,new L(4,13),new L(1,14))),new Me(8,Int32Array.from([6,24,42]),new W(24,new L(2,97)),new W(22,new L(2,38),new L(2,39)),new W(22,new L(4,18),new L(2,19)),new W(26,new L(4,14),new L(2,15))),new Me(9,Int32Array.from([6,26,46]),new W(30,new L(2,116)),new W(22,new L(3,36),new L(2,37)),new W(20,new L(4,16),new L(4,17)),new W(24,new L(4,12),new L(4,13))),new Me(10,Int32Array.from([6,28,50]),new W(18,new L(2,68),new L(2,69)),new W(26,new L(4,43),new L(1,44)),new W(24,new L(6,19),new L(2,20)),new W(28,new L(6,15),new L(2,16))),new Me(11,Int32Array.from([6,30,54]),new W(20,new L(4,81)),new W(30,new L(1,50),new L(4,51)),new W(28,new L(4,22),new L(4,23)),new W(24,new L(3,12),new L(8,13))),new Me(12,Int32Array.from([6,32,58]),new W(24,new L(2,92),new L(2,93)),new W(22,new L(6,36),new L(2,37)),new W(26,new L(4,20),new L(6,21)),new W(28,new L(7,14),new L(4,15))),new Me(13,Int32Array.from([6,34,62]),new W(26,new L(4,107)),new W(22,new L(8,37),new L(1,38)),new W(24,new L(8,20),new L(4,21)),new W(22,new L(12,11),new L(4,12))),new Me(14,Int32Array.from([6,26,46,66]),new W(30,new L(3,115),new L(1,116)),new W(24,new L(4,40),new L(5,41)),new W(20,new L(11,16),new L(5,17)),new W(24,new L(11,12),new L(5,13))),new Me(15,Int32Array.from([6,26,48,70]),new W(22,new L(5,87),new L(1,88)),new W(24,new L(5,41),new L(5,42)),new W(30,new L(5,24),new L(7,25)),new W(24,new L(11,12),new L(7,13))),new Me(16,Int32Array.from([6,26,50,74]),new W(24,new L(5,98),new L(1,99)),new W(28,new L(7,45),new L(3,46)),new W(24,new L(15,19),new L(2,20)),new W(30,new L(3,15),new L(13,16))),new Me(17,Int32Array.from([6,30,54,78]),new W(28,new L(1,107),new L(5,108)),new W(28,new L(10,46),new L(1,47)),new W(28,new L(1,22),new L(15,23)),new W(28,new L(2,14),new L(17,15))),new Me(18,Int32Array.from([6,30,56,82]),new W(30,new L(5,120),new L(1,121)),new W(26,new L(9,43),new L(4,44)),new W(28,new L(17,22),new L(1,23)),new W(28,new L(2,14),new L(19,15))),new Me(19,Int32Array.from([6,30,58,86]),new W(28,new L(3,113),new L(4,114)),new W(26,new L(3,44),new L(11,45)),new W(26,new L(17,21),new L(4,22)),new W(26,new L(9,13),new L(16,14))),new Me(20,Int32Array.from([6,34,62,90]),new W(28,new L(3,107),new L(5,108)),new W(26,new L(3,41),new L(13,42)),new W(30,new L(15,24),new L(5,25)),new W(28,new L(15,15),new L(10,16))),new Me(21,Int32Array.from([6,28,50,72,94]),new W(28,new L(4,116),new L(4,117)),new W(26,new L(17,42)),new W(28,new L(17,22),new L(6,23)),new W(30,new L(19,16),new L(6,17))),new Me(22,Int32Array.from([6,26,50,74,98]),new W(28,new L(2,111),new L(7,112)),new W(28,new L(17,46)),new W(30,new L(7,24),new L(16,25)),new W(24,new L(34,13))),new Me(23,Int32Array.from([6,30,54,78,102]),new W(30,new L(4,121),new L(5,122)),new W(28,new L(4,47),new L(14,48)),new W(30,new L(11,24),new L(14,25)),new W(30,new L(16,15),new L(14,16))),new Me(24,Int32Array.from([6,28,54,80,106]),new W(30,new L(6,117),new L(4,118)),new W(28,new L(6,45),new L(14,46)),new W(30,new L(11,24),new L(16,25)),new W(30,new L(30,16),new L(2,17))),new Me(25,Int32Array.from([6,32,58,84,110]),new W(26,new L(8,106),new L(4,107)),new W(28,new L(8,47),new L(13,48)),new W(30,new L(7,24),new L(22,25)),new W(30,new L(22,15),new L(13,16))),new Me(26,Int32Array.from([6,30,58,86,114]),new W(28,new L(10,114),new L(2,115)),new W(28,new L(19,46),new L(4,47)),new W(28,new L(28,22),new L(6,23)),new W(30,new L(33,16),new L(4,17))),new Me(27,Int32Array.from([6,34,62,90,118]),new W(30,new L(8,122),new L(4,123)),new W(28,new L(22,45),new L(3,46)),new W(30,new L(8,23),new L(26,24)),new W(30,new L(12,15),new L(28,16))),new Me(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new L(3,117),new L(10,118)),new W(28,new L(3,45),new L(23,46)),new W(30,new L(4,24),new L(31,25)),new W(30,new L(11,15),new L(31,16))),new Me(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new L(7,116),new L(7,117)),new W(28,new L(21,45),new L(7,46)),new W(30,new L(1,23),new L(37,24)),new W(30,new L(19,15),new L(26,16))),new Me(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new L(5,115),new L(10,116)),new W(28,new L(19,47),new L(10,48)),new W(30,new L(15,24),new L(25,25)),new W(30,new L(23,15),new L(25,16))),new Me(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new L(13,115),new L(3,116)),new W(28,new L(2,46),new L(29,47)),new W(30,new L(42,24),new L(1,25)),new W(30,new L(23,15),new L(28,16))),new Me(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new L(17,115)),new W(28,new L(10,46),new L(23,47)),new W(30,new L(10,24),new L(35,25)),new W(30,new L(19,15),new L(35,16))),new Me(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new L(17,115),new L(1,116)),new W(28,new L(14,46),new L(21,47)),new W(30,new L(29,24),new L(19,25)),new W(30,new L(11,15),new L(46,16))),new Me(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new L(13,115),new L(6,116)),new W(28,new L(14,46),new L(23,47)),new W(30,new L(44,24),new L(7,25)),new W(30,new L(59,16),new L(1,17))),new Me(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new L(12,121),new L(7,122)),new W(28,new L(12,47),new L(26,48)),new W(30,new L(39,24),new L(14,25)),new W(30,new L(22,15),new L(41,16))),new Me(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new L(6,121),new L(14,122)),new W(28,new L(6,47),new L(34,48)),new W(30,new L(46,24),new L(10,25)),new W(30,new L(2,15),new L(64,16))),new Me(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new L(17,122),new L(4,123)),new W(28,new L(29,46),new L(14,47)),new W(30,new L(49,24),new L(10,25)),new W(30,new L(24,15),new L(46,16))),new Me(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new L(4,122),new L(18,123)),new W(28,new L(13,46),new L(32,47)),new W(30,new L(48,24),new L(14,25)),new W(30,new L(42,15),new L(32,16))),new Me(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new L(20,117),new L(4,118)),new W(28,new L(40,47),new L(7,48)),new W(30,new L(43,24),new L(22,25)),new W(30,new L(10,15),new L(67,16))),new Me(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new L(19,118),new L(6,119)),new W(28,new L(18,47),new L(31,48)),new W(30,new L(34,24),new L(34,25)),new W(30,new L(20,15),new L(61,16)))];var cn;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(cn||(cn={}));class Gn{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let a=0;a<i;a++)for(let c=0;c<i;c++)this.isMasked(a,c)&&t.flip(c,a)}}Gn.values=new Map([[cn.DATA_MASK_000,new Gn(cn.DATA_MASK_000,(I,t)=>(I+t&1)===0)],[cn.DATA_MASK_001,new Gn(cn.DATA_MASK_001,(I,t)=>(I&1)===0)],[cn.DATA_MASK_010,new Gn(cn.DATA_MASK_010,(I,t)=>t%3===0)],[cn.DATA_MASK_011,new Gn(cn.DATA_MASK_011,(I,t)=>(I+t)%3===0)],[cn.DATA_MASK_100,new Gn(cn.DATA_MASK_100,(I,t)=>(Math.floor(I/2)+Math.floor(t/3)&1)===0)],[cn.DATA_MASK_101,new Gn(cn.DATA_MASK_101,(I,t)=>I*t%6===0)],[cn.DATA_MASK_110,new Gn(cn.DATA_MASK_110,(I,t)=>I*t%6<3)],[cn.DATA_MASK_111,new Gn(cn.DATA_MASK_111,(I,t)=>(I+t+I*t%3&1)===0)]]);class Vr{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new Q;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const i=this.bitMatrix.getHeight();let a=0;const c=i-7;for(let u=i-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=i-8;u<i;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=dn.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return Me.getVersionForNumber(i);let a=0;const c=t-11;for(let d=5;d>=0;d--)for(let m=t-9;m>=c;m--)a=this.copyBit(m,d,a);let u=Me.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;a=0;for(let d=5;d>=0;d--)for(let m=t-9;m>=c;m--)a=this.copyBit(d,m,a);if(u=Me.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new Q}copyBit(t,i,a){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),a=Gn.values.get(t.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=i.buildFunctionPattern();let d=!0;const m=new Uint8Array(i.getTotalCodewords());let y=0,E=0,C=0;for(let R=c-1;R>0;R-=2){R===6&&R--;for(let D=0;D<c;D++){const j=d?c-1-D:D;for(let F=0;F<2;F++)u.get(R-F,j)||(C++,E<<=1,this.bitMatrix.get(R-F,j)&&(E|=1),C===8&&(m[y++]=E,C=0,E=0))}d=!d}if(y!==i.getTotalCodewords())throw new Q;return m}remask(){if(this.parsedFormatInfo===null)return;const t=Gn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,a=t.getWidth();i<a;i++)for(let c=i+1,u=t.getHeight();c<u;c++)t.get(i,c)!==t.get(c,i)&&(t.flip(c,i),t.flip(i,c))}}class ll{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,a){if(t.length!==i.getTotalCodewords())throw new O;const c=i.getECBlocksForLevel(a);let u=0;const d=c.getECBlocks();for(const F of d)u+=F.getCount();const m=new Array(u);let y=0;for(const F of d)for(let H=0;H<F.getCount();H++){const X=F.getDataCodewords(),re=c.getECCodewordsPerBlock()+X;m[y++]=new ll(X,new Uint8Array(re))}const E=m[0].codewords.length;let C=m.length-1;for(;C>=0&&m[C].codewords.length!==E;)C--;C++;const R=E-c.getECCodewordsPerBlock();let D=0;for(let F=0;F<R;F++)for(let H=0;H<y;H++)m[H].codewords[F]=t[D++];for(let F=C;F<y;F++)m[F].codewords[R]=t[D++];const j=m[0].codewords.length;for(let F=R;F<j;F++)for(let H=0;H<y;H++){const X=H<C?F:F+1;m[H].codewords[X]=t[D++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qn;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(qn||(qn={}));class je{constructor(t,i,a,c){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=a,this.bits=c,je.FOR_BITS.set(c,this),je.FOR_VALUE.set(t,this)}static forBits(t){const i=je.FOR_BITS.get(t);if(i===void 0)throw new O;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let a;return i<=9?a=0:i<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof je))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}je.FOR_BITS=new Map,je.FOR_VALUE=new Map,je.TERMINATOR=new je(qn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),je.NUMERIC=new je(qn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),je.ALPHANUMERIC=new je(qn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),je.STRUCTURED_APPEND=new je(qn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),je.BYTE=new je(qn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),je.ECI=new je(qn.ECI,"ECI",Int32Array.from([0,0,0]),7),je.KANJI=new je(qn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),je.FNC1_FIRST_POSITION=new je(qn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),je.FNC1_SECOND_POSITION=new je(qn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),je.HANZI=new je(qn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class zt{static decode(t,i,a,c){const u=new ci(t);let d=new Ue;const m=new Array;let y=-1,E=-1;try{let C=null,R=!1,D;do{if(u.available()<4)D=je.TERMINATOR;else{const j=u.readBits(4);D=je.forBits(j)}switch(D){case je.TERMINATOR:break;case je.FNC1_FIRST_POSITION:case je.FNC1_SECOND_POSITION:R=!0;break;case je.STRUCTURED_APPEND:if(u.available()<16)throw new Q;y=u.readBits(8),E=u.readBits(8);break;case je.ECI:const j=zt.parseECIValue(u);if(C=le.getCharacterSetECIByValue(j),C===null)throw new Q;break;case je.HANZI:const F=u.readBits(4),H=u.readBits(D.getCharacterCountBits(i));F===zt.GB2312_SUBSET&&zt.decodeHanziSegment(u,d,H);break;default:const X=u.readBits(D.getCharacterCountBits(i));switch(D){case je.NUMERIC:zt.decodeNumericSegment(u,d,X);break;case je.ALPHANUMERIC:zt.decodeAlphanumericSegment(u,d,X,R);break;case je.BYTE:zt.decodeByteSegment(u,d,X,C,m,c);break;case je.KANJI:zt.decodeKanjiSegment(u,d,X);break;default:throw new Q}break}}while(D!==je.TERMINATOR)}catch{throw new Q}return new Ut(t,d.toString(),m.length===0?null:m,a===null?null:a.toString(),y,E)}static decodeHanziSegment(t,i,a){if(a*13>t.available())throw new Q;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=t.readBits(13);let m=d/96<<8&4294967295|d%96;m<959?m+=41377:m+=42657,c[u]=m>>8&255,c[u+1]=m&255,u+=2,a--}try{i.append(ke.decode(c,ye.GB2312))}catch(d){throw new Q(d)}}static decodeKanjiSegment(t,i,a){if(a*13>t.available())throw new Q;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=t.readBits(13);let m=d/192<<8&4294967295|d%192;m<7936?m+=33088:m+=49472,c[u]=m>>8,c[u+1]=m,u+=2,a--}try{i.append(ke.decode(c,ye.SHIFT_JIS))}catch(d){throw new Q(d)}}static decodeByteSegment(t,i,a,c,u,d){if(8*a>t.available())throw new Q;const m=new Uint8Array(a);for(let E=0;E<a;E++)m[E]=t.readBits(8);let y;c===null?y=ye.guessEncoding(m,d):y=c.getName();try{i.append(ke.decode(m,y))}catch(E){throw new Q(E)}u.push(m)}static toAlphaNumericChar(t){if(t>=zt.ALPHANUMERIC_CHARS.length)throw new Q;return zt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,a,c){const u=i.length();for(;a>1;){if(t.available()<11)throw new Q;const d=t.readBits(11);i.append(zt.toAlphaNumericChar(Math.floor(d/45))),i.append(zt.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(t.available()<6)throw new Q;i.append(zt.toAlphaNumericChar(t.readBits(6)))}if(c)for(let d=u;d<i.length();d++)i.charAt(d)==="%"&&(d<i.length()-1&&i.charAt(d+1)==="%"?i.deleteCharAt(d+1):i.setCharAt(d,""))}static decodeNumericSegment(t,i,a){for(;a>=3;){if(t.available()<10)throw new Q;const c=t.readBits(10);if(c>=1e3)throw new Q;i.append(zt.toAlphaNumericChar(Math.floor(c/100))),i.append(zt.toAlphaNumericChar(Math.floor(c/10)%10)),i.append(zt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(t.available()<7)throw new Q;const c=t.readBits(7);if(c>=100)throw new Q;i.append(zt.toAlphaNumericChar(Math.floor(c/10))),i.append(zt.toAlphaNumericChar(c%10))}else if(a===1){if(t.available()<4)throw new Q;const c=t.readBits(4);if(c>=10)throw new Q;i.append(zt.toAlphaNumericChar(c))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const a=t.readBits(8);return(i&63)<<8&4294967295|a}if((i&224)===192){const a=t.readBits(16);return(i&31)<<16&4294967295|a}throw new Q}}zt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",zt.GB2312_SUBSET=1;class xo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class Jc{constructor(){this.rsDecoder=new ur(pt.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(Ge.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const a=new Vr(t);let c=null;try{return this.decodeBitMatrixParser(a,i)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,i);return u.setOther(new xo(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(t,i){const a=t.readVersion(),c=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),d=ll.getDataBlocks(u,a,c);let m=0;for(const C of d)m+=C.getNumDataCodewords();const y=new Uint8Array(m);let E=0;for(const C of d){const R=C.getCodewords(),D=C.getNumDataCodewords();this.correctErrors(R,D);for(let j=0;j<D;j++)y[E++]=R[j]}return zt.decode(y,a,c,i)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new k}for(let c=0;c<i;c++)t[c]=a[c]}}class Gr extends Re{constructor(t,i,a){super(t,i),this.estimatedModuleSize=a}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const c=(this.getX()+i)/2,u=(this.getY()+t)/2,d=(this.estimatedModuleSize+a)/2;return new Gr(c,u,d)}}class Jn{constructor(t,i,a,c,u,d,m){this.image=t,this.startX=i,this.startY=a,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,a=this.width,c=t+a,u=this.startY+i/2,d=new Int32Array(3),m=this.image;for(let y=0;y<i;y++){const E=u+((y&1)===0?Math.floor((y+1)/2):-Math.floor((y+1)/2));d[0]=0,d[1]=0,d[2]=0;let C=t;for(;C<c&&!m.get(C,E);)C++;let R=0;for(;C<c;){if(m.get(C,E))if(R===1)d[1]++;else if(R===2){if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,C);if(D!==null)return D}d[0]=d[2],d[1]=1,d[2]=0,R=1}else d[++R]++;else R===1&&R++,d[R]++;C++}if(this.foundPatternCross(d)){const D=this.handlePossibleCenter(d,E,c);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,a=i/2;for(let c=0;c<3;c++)if(Math.abs(i-t[c])>=a)return!1;return!0}crossCheckVertical(t,i,a,c){const u=this.image,d=u.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let y=t;for(;y>=0&&u.get(i,y)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&!u.get(i,y)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(i,y)&&m[1]<=a;)m[1]++,y++;if(y===d||m[1]>a)return NaN;for(;y<d&&!u.get(i,y)&&m[2]<=a;)m[2]++,y++;if(m[2]>a)return NaN;const E=m[0]+m[1]+m[2];return 5*Math.abs(E-c)>=2*c?NaN:this.foundPatternCross(m)?Jn.centerFromEnd(m,y):NaN}handlePossibleCenter(t,i,a){const c=t[0]+t[1]+t[2],u=Jn.centerFromEnd(t,a),d=this.crossCheckVertical(i,u,2*t[1],c);if(!isNaN(d)){const m=(t[0]+t[1]+t[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(m,d,u))return E.combineEstimate(d,u,m);const y=new Gr(u,d,m);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Oa extends Re{constructor(t,i,a,c){super(t,i),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const c=this.count+1,u=(this.count*this.getX()+i)/c,d=(this.count*this.getY()+t)/c,m=(this.count*this.estimatedModuleSize+a)/c;return new Oa(u,d,m,c)}}class ol{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Yt{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(Ae.TRY_HARDER)!==void 0,a=t!=null&&t.get(Ae.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let m=Math.floor(3*u/(4*Yt.MAX_MODULES));(m<Yt.MIN_SKIP||i)&&(m=Yt.MIN_SKIP);let y=!1;const E=new Int32Array(5);for(let R=m-1;R<u&&!y;R+=m){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let D=0;for(let j=0;j<d;j++)if(c.get(j,R))(D&1)===1&&D++,E[D]++;else if((D&1)===0)if(D===4)if(Yt.foundPatternCross(E)){if(this.handlePossibleCenter(E,R,j,a)===!0)if(m=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const H=this.findRowSkip();H>E[2]&&(R+=H-E[2]-m,j=d-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;continue}D=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;else E[++D]++;else E[D]++;Yt.foundPatternCross(E)&&this.handlePossibleCenter(E,R,d,a)===!0&&(m=E[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Re.orderBestPatterns(C),new ol(C)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let u=0;u<5;u++){const d=t[u];if(d===0)return!1;i+=d}if(i<7)return!1;const a=i/7,c=a/2;return Math.abs(a-t[0])<c&&Math.abs(a-t[1])<c&&Math.abs(3*a-t[2])<3*c&&Math.abs(a-t[3])<c&&Math.abs(a-t[4])<c}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,a,c){const u=this.getCrossCheckStateCount();let d=0;const m=this.image;for(;t>=d&&i>=d&&m.get(i-d,t-d);)u[2]++,d++;if(t<d||i<d)return!1;for(;t>=d&&i>=d&&!m.get(i-d,t-d)&&u[1]<=a;)u[1]++,d++;if(t<d||i<d||u[1]>a)return!1;for(;t>=d&&i>=d&&m.get(i-d,t-d)&&u[0]<=a;)u[0]++,d++;if(u[0]>a)return!1;const y=m.getHeight(),E=m.getWidth();for(d=1;t+d<y&&i+d<E&&m.get(i+d,t+d);)u[2]++,d++;if(t+d>=y||i+d>=E)return!1;for(;t+d<y&&i+d<E&&!m.get(i+d,t+d)&&u[3]<a;)u[3]++,d++;if(t+d>=y||i+d>=E||u[3]>=a)return!1;for(;t+d<y&&i+d<E&&m.get(i+d,t+d)&&u[4]<a;)u[4]++,d++;if(u[4]>=a)return!1;const C=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(C-c)<2*c&&Yt.foundPatternCross(u)}crossCheckVertical(t,i,a,c){const u=this.image,d=u.getHeight(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(i,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(i,y)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&u.get(i,y)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(i,y);)m[2]++,y++;if(y===d)return NaN;for(;y<d&&!u.get(i,y)&&m[3]<a;)m[3]++,y++;if(y===d||m[3]>=a)return NaN;for(;y<d&&u.get(i,y)&&m[4]<a;)m[4]++,y++;if(m[4]>=a)return NaN;const E=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(E-c)>=2*c?NaN:Yt.foundPatternCross(m)?Yt.centerFromEnd(m,y):NaN}crossCheckHorizontal(t,i,a,c){const u=this.image,d=u.getWidth(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(y,i);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(y,i)&&m[1]<=a;)m[1]++,y--;if(y<0||m[1]>a)return NaN;for(;y>=0&&u.get(y,i)&&m[0]<=a;)m[0]++,y--;if(m[0]>a)return NaN;for(y=t+1;y<d&&u.get(y,i);)m[2]++,y++;if(y===d)return NaN;for(;y<d&&!u.get(y,i)&&m[3]<a;)m[3]++,y++;if(y===d||m[3]>=a)return NaN;for(;y<d&&u.get(y,i)&&m[4]<a;)m[4]++,y++;if(m[4]>=a)return NaN;const E=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(E-c)>=c?NaN:Yt.foundPatternCross(m)?Yt.centerFromEnd(m,y):NaN}handlePossibleCenter(t,i,a,c){const u=t[0]+t[1]+t[2]+t[3]+t[4];let d=Yt.centerFromEnd(t,a),m=this.crossCheckVertical(i,Math.floor(d),t[2],u);if(!isNaN(m)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(m),t[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(d),t[2],u)))){const y=u/7;let E=!1;const C=this.possibleCenters;for(let R=0,D=C.length;R<D;R++){const j=C[R];if(j.aboutEquals(y,m,d)){C[R]=j.combineEstimate(m,d,y),E=!0;break}}if(!E){const R=new Oa(d,m,y);C.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const a of this.possibleCenters)if(a.getCount()>=Yt.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Yt.CENTER_QUORUM&&(t++,i+=d.getEstimatedModuleSize());if(t<3)return!1;const c=i/a;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ie;const i=this.possibleCenters;let a;if(t>3){let c=0,u=0;for(const y of this.possibleCenters){const E=y.getEstimatedModuleSize();c+=E,u+=E*E}a=c/t;let d=Math.sqrt(u/t-a*a);i.sort((y,E)=>{const C=Math.abs(E.getEstimatedModuleSize()-a),R=Math.abs(y.getEstimatedModuleSize()-a);return C<R?-1:C>R?1:0});const m=Math.max(.2*a,d);for(let y=0;y<i.length&&i.length>3;y++){const E=i[y];Math.abs(E.getEstimatedModuleSize()-a)>m&&(i.splice(y,1),y--)}}if(i.length>3){let c=0;for(const u of i)c+=u.getEstimatedModuleSize();a=c/i.length,i.sort((u,d)=>{if(d.getCount()===u.getCount()){const m=Math.abs(d.getEstimatedModuleSize()-a),y=Math.abs(u.getEstimatedModuleSize()-a);return m<y?1:m>y?-1:0}else return d.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Yt.CENTER_QUORUM=2,Yt.MIN_SKIP=3,Yt.MAX_MODULES=57;class Ti{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(Ae.NEED_RESULT_POINT_CALLBACK);const a=new Yt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const i=t.getTopLeft(),a=t.getTopRight(),c=t.getBottomLeft(),u=this.calculateModuleSize(i,a,c);if(u<1)throw new ie("No pattern found in proccess finder.");const d=Ti.computeDimension(i,a,c,u),m=Me.getProvisionalVersionForDimension(d),y=m.getDimensionForVersion()-7;let E=null;if(m.getAlignmentPatternCenters().length>0){const j=a.getX()-i.getX()+c.getX(),F=a.getY()-i.getY()+c.getY(),H=1-3/y,X=Math.floor(i.getX()+H*(j-i.getX())),re=Math.floor(i.getY()+H*(F-i.getY()));for(let ve=4;ve<=16;ve<<=1)try{E=this.findAlignmentInRegion(u,X,re,ve);break}catch(we){if(!(we instanceof ie))throw we}}const C=Ti.createTransform(i,a,c,E,d),R=Ti.sampleGrid(this.image,C,d);let D;return E===null?D=[c,i,a]:D=[c,i,a,E],new ns(R,D)}static createTransform(t,i,a,c,u){const d=u-3.5;let m,y,E,C;return c!==null?(m=c.getX(),y=c.getY(),E=d-3,C=E):(m=i.getX()-t.getX()+a.getX(),y=i.getY()-t.getY()+a.getY(),E=d,C=d),Qn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,E,C,3.5,d,t.getX(),t.getY(),i.getX(),i.getY(),m,y,a.getX(),a.getY())}static sampleGrid(t,i,a){return si.getInstance().sampleGridWithTransform(t,a,a,i)}static computeDimension(t,i,a,c){const u=at.round(Re.distance(t,i)/c),d=at.round(Re.distance(t,a)/c);let m=Math.floor((u+d)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new ie("Dimensions could be not found.")}return m}calculateModuleSize(t,i,a){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,i){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,a,c){let u=this.sizeOfBlackWhiteBlackRun(t,i,a,c),d=1,m=t-(a-t);m<0?(d=t/(t-m),m=0):m>=this.image.getWidth()&&(d=(this.image.getWidth()-1-t)/(m-t),m=this.image.getWidth()-1);let y=Math.floor(i-(c-i)*d);return d=1,y<0?(d=i/(i-y),y=0):y>=this.image.getHeight()&&(d=(this.image.getHeight()-1-i)/(y-i),y=this.image.getHeight()-1),m=Math.floor(t+(m-t)*d),u+=this.sizeOfBlackWhiteBlackRun(t,i,m,y),u-1}sizeOfBlackWhiteBlackRun(t,i,a,c){const u=Math.abs(c-i)>Math.abs(a-t);if(u){let j=t;t=i,i=j,j=a,a=c,c=j}const d=Math.abs(a-t),m=Math.abs(c-i);let y=-d/2;const E=t<a?1:-1,C=i<c?1:-1;let R=0;const D=a+E;for(let j=t,F=i;j!==D;j+=E){const H=u?F:j,X=u?j:F;if(R===1===this.image.get(H,X)){if(R===2)return at.distance(j,F,t,i);R++}if(y+=m,y>0){if(F===c)break;F+=C,y-=d}}return R===2?at.distance(a+E,c,t,i):NaN}findAlignmentInRegion(t,i,a,c){const u=Math.floor(c*t),d=Math.max(0,i-u),m=Math.min(this.image.getWidth()-1,i+u);if(m-d<t*3)throw new ie("Alignment top exceeds estimated module size.");const y=Math.max(0,a-u),E=Math.min(this.image.getHeight()-1,a+u);if(E-y<t*3)throw new ie("Alignment bottom exceeds estimated module size.");return new Jn(this.image,d,y,m-d,E-y,t,this.resultPointCallback).find()}}class Fi{constructor(){this.decoder=new Jc}getDecoder(){return this.decoder}decode(t,i){let a,c;if(i!=null&&i.get(Ae.PURE_BARCODE)!==void 0){const y=Fi.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(y,i),c=Fi.NO_POINTS}else{const y=new Ti(t.getBlackMatrix()).detect(i);a=this.decoder.decodeBitMatrix(y.getBits(),i),c=y.getPoints()}a.getOther()instanceof xo&&a.getOther().applyMirroredCorrection(c);const u=new _e(a.getText(),a.getRawBytes(),void 0,c,Ee.QR_CODE,void 0),d=a.getByteSegments();d!==null&&u.putMetadata(mt.BYTE_SEGMENTS,d);const m=a.getECLevel();return m!==null&&u.putMetadata(mt.ERROR_CORRECTION_LEVEL,m),a.hasStructuredAppend()&&(u.putMetadata(mt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(mt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i===null||a===null)throw new ie;const c=this.moduleSize(i,t);let u=i[1],d=a[1],m=i[0],y=a[0];if(m>=y||u>=d)throw new ie;if(d-u!==y-m&&(y=m+(d-u),y>=t.getWidth()))throw new ie;const E=Math.round((y-m+1)/c),C=Math.round((d-u+1)/c);if(E<=0||C<=0)throw new ie;if(C!==E)throw new ie;const R=Math.floor(c/2);u+=R,m+=R;const D=m+Math.floor((E-1)*c)-y;if(D>0){if(D>R)throw new ie;m-=D}const j=u+Math.floor((C-1)*c)-d;if(j>0){if(j>R)throw new ie;u-=j}const F=new Ge(E,C);for(let H=0;H<C;H++){const X=u+Math.floor(H*c);for(let re=0;re<E;re++)t.get(m+Math.floor(re*c),X)&&F.set(re,H)}return F}static moduleSize(t,i){const a=i.getHeight(),c=i.getWidth();let u=t[0],d=t[1],m=!0,y=0;for(;u<c&&d<a;){if(m!==i.get(u,d)){if(++y===5)break;m=!m}u++,d++}if(u===c||d===a)throw new ie;return(u-t[0])/7}}Fi.NO_POINTS=new Array;class Pe{PDF417Common(){}static getBitCountSum(t){return at.sum(t)}static toIntArray(t){if(t==null||!t.length)return Pe.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let a=0;for(const c of t)i[a++]=c;return i}static getCodeword(t){const i=ae.binarySearch(Pe.SYMBOL_TABLE,t&262143);return i<0?-1:(Pe.CODEWORD_TABLE[i]-1)%Pe.NUMBER_OF_CODEWORDS}}Pe.NUMBER_OF_CODEWORDS=929,Pe.MAX_CODEWORDS_IN_BARCODE=Pe.NUMBER_OF_CODEWORDS-1,Pe.MIN_ROWS_IN_BARCODE=3,Pe.MAX_ROWS_IN_BARCODE=90,Pe.MODULES_IN_CODEWORD=17,Pe.MODULES_IN_STOP_PATTERN=18,Pe.BARS_IN_MODULE=8,Pe.EMPTY_INT_ARRAY=new Int32Array([]),Pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class yo{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class We{static detectMultiple(t,i,a){let c=t.getBlackMatrix(),u=We.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=We.detect(a,c)),new yo(c,u)}static detect(t,i){const a=new Array;let c=0,u=0,d=!1;for(;c<i.getHeight();){const m=We.findVertices(i,c,u);if(m[0]==null&&m[3]==null){if(!d)break;d=!1,u=0;for(const y of a)y[1]!=null&&(c=Math.trunc(Math.max(c,y[1].getY()))),y[3]!=null&&(c=Math.max(c,Math.trunc(y[3].getY())));c+=We.ROW_STEP;continue}if(d=!0,a.push(m),!t)break;m[2]!=null?(u=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(u=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return a}static findVertices(t,i,a){const c=t.getHeight(),u=t.getWidth(),d=new Array(8);return We.copyToResult(d,We.findRowsWithPattern(t,c,u,i,a,We.START_PATTERN),We.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),i=Math.trunc(d[4].getY())),We.copyToResult(d,We.findRowsWithPattern(t,c,u,i,a,We.STOP_PATTERN),We.INDEXES_STOP_PATTERN),d}static copyToResult(t,i,a){for(let c=0;c<a.length;c++)t[a[c]]=i[c]}static findRowsWithPattern(t,i,a,c,u,d){const m=new Array(4);let y=!1;const E=new Int32Array(d.length);for(;c<i;c+=We.ROW_STEP){let R=We.findGuardPattern(t,u,c,a,!1,d,E);if(R!=null){for(;c>0;){const D=We.findGuardPattern(t,u,--c,a,!1,d,E);if(D!=null)R=D;else{c++;break}}m[0]=new Re(R[0],c),m[1]=new Re(R[1],c),y=!0;break}}let C=c+1;if(y){let R=0,D=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;C<i;C++){const j=We.findGuardPattern(t,D[0],C,a,!1,d,E);if(j!=null&&Math.abs(D[0]-j[0])<We.MAX_PATTERN_DRIFT&&Math.abs(D[1]-j[1])<We.MAX_PATTERN_DRIFT)D=j,R=0;else{if(R>We.SKIPPED_ROW_COUNT_MAX)break;R++}}C-=R+1,m[2]=new Re(D[0],C),m[3]=new Re(D[1],C)}return C-c<We.BARCODE_MIN_HEIGHT&&ae.fill(m,null),m}static findGuardPattern(t,i,a,c,u,d,m){ae.fillWithin(m,0,m.length,0);let y=i,E=0;for(;t.get(y,a)&&y>0&&E++<We.MAX_PIXEL_DRIFT;)y--;let C=y,R=0,D=d.length;for(let j=u;C<c;C++)if(t.get(C,a)!==j)m[R]++;else{if(R===D-1){if(We.patternMatchVariance(m,d,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return new Int32Array([y,C]);y+=m[0]+m[1],U.arraycopy(m,2,m,0,R-1),m[R-1]=0,m[R]=0,R--}else R++;m[R]=1,j=!j}return R===D-1&&We.patternMatchVariance(m,d,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE?new Int32Array([y,C-1]):null}static patternMatchVariance(t,i,a){let c=t.length,u=0,d=0;for(let E=0;E<c;E++)u+=t[E],d+=i[E];if(u<d)return 1/0;let m=u/d;a*=m;let y=0;for(let E=0;E<c;E++){let C=t[E],R=i[E]*m,D=C>R?C-R:R-C;if(D>a)return 1/0;y+=D}return y/u}}We.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),We.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),We.MAX_AVG_VARIANCE=.42,We.MAX_INDIVIDUAL_VARIANCE=.8,We.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),We.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),We.MAX_PIXEL_DRIFT=3,We.MAX_PATTERN_DRIFT=5,We.SKIPPED_ROW_COUNT_MAX=25,We.ROW_STEP=5,We.BARCODE_MIN_HEIGHT=10;class Pt{constructor(t,i){if(i.length===0)throw new O;this.field=t;let a=i.length;if(a>1&&i[0]===0){let c=1;for(;c<a&&i[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),U.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let i=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)i=this.field.add(this.field.multiply(t,i),this.coefficients[c]);return i}add(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){let d=i;i=a,a=d}let c=new Int32Array(a.length),u=a.length-i.length;U.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=this.field.add(i[d-u],a[d]);return new Pt(this.field,c)}subtract(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Pt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Pt(this.field,new Int32Array([0]));let i=this.coefficients,a=i.length,c=t.coefficients,u=c.length,d=new Int32Array(a+u-1);for(let m=0;m<a;m++){let y=i[m];for(let E=0;E<u;E++)d[m+E]=this.field.add(d[m+E],this.field.multiply(y,c[E]))}return new Pt(this.field,d)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let a=0;a<t;a++)i[a]=this.field.subtract(0,this.coefficients[a]);return new Pt(this.field,i)}multiplyScalar(t){if(t===0)return new Pt(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,a=new Int32Array(i);for(let c=0;c<i;c++)a[c]=this.field.multiply(this.coefficients[c],t);return new Pt(this.field,a)}multiplyByMonomial(t,i){if(t<0)throw new O;if(i===0)return new Pt(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+t);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],i);return new Pt(this.field,c)}toString(){let t=new Ue;for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(i===0||a!==1)&&t.append(a),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class cl{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new O;return this.logTable[t]}inverse(t){if(t===0)throw new kr;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class hr extends cl{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let c=0;c<t;c++)this.expTable[c]=a,a=a*i%t;for(let c=0;c<t-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Pt(this,new Int32Array([0])),this.one=new Pt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new O;if(i===0)return this.zero;let a=new Int32Array(t+1);return a[0]=i,new Pt(this,a)}}hr.PDF417_GF=new hr(Pe.NUMBER_OF_CODEWORDS,3);class Hi{constructor(){this.field=hr.PDF417_GF}decode(t,i,a){let c=new Pt(this.field,t),u=new Int32Array(i),d=!1;for(let F=i;F>0;F--){let H=c.evaluateAt(this.field.exp(F));u[i-F]=H,H!==0&&(d=!0)}if(!d)return 0;let m=this.field.getOne();if(a!=null)for(const F of a){let H=this.field.exp(t.length-1-F),X=new Pt(this.field,new Int32Array([this.field.subtract(0,H),1]));m=m.multiply(X)}let y=new Pt(this.field,u),E=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),y,i),C=E[0],R=E[1],D=this.findErrorLocations(C),j=this.findErrorMagnitudes(R,C,D);for(let F=0;F<D.length;F++){let H=t.length-1-this.field.log(D[F]);if(H<0)throw k.getChecksumInstance();t[H]=this.field.subtract(t[H],j[F])}return D.length}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){let D=t;t=i,i=D}let c=t,u=i,d=this.field.getZero(),m=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let D=c,j=d;if(c=u,d=m,c.isZero())throw k.getChecksumInstance();u=D;let F=this.field.getZero(),H=c.getCoefficient(c.getDegree()),X=this.field.inverse(H);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let re=u.getDegree()-c.getDegree(),ve=this.field.multiply(u.getCoefficient(u.getDegree()),X);F=F.add(this.field.buildMonomial(re,ve)),u=u.subtract(c.multiplyByMonomial(re,ve))}m=F.multiply(d).subtract(j).negative()}let y=m.getCoefficient(0);if(y===0)throw k.getChecksumInstance();let E=this.field.inverse(y),C=m.multiply(E),R=u.multiply(E);return[C,R]}findErrorLocations(t){let i=t.getDegree(),a=new Int32Array(i),c=0;for(let u=1;u<this.field.getSize()&&c<i;u++)t.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==i)throw k.getChecksumInstance();return a}findErrorMagnitudes(t,i,a){let c=i.getDegree(),u=new Int32Array(c);for(let E=1;E<=c;E++)u[c-E]=this.field.multiply(E,i.getCoefficient(E));let d=new Pt(this.field,u),m=a.length,y=new Int32Array(m);for(let E=0;E<m;E++){let C=this.field.inverse(a[E]),R=this.field.subtract(0,t.evaluateAt(C)),D=this.field.inverse(d.evaluateAt(C));y[E]=this.field.multiply(R,D)}return y}}class Vi{constructor(t,i,a,c,u){t instanceof Vi?this.constructor_2(t):this.constructor_1(t,i,a,c,u)}constructor_1(t,i,a,c,u){const d=i==null||a==null,m=c==null||u==null;if(d&&m)throw new ie;d?(i=new Re(0,c.getY()),a=new Re(0,u.getY())):m&&(c=new Re(t.getWidth()-1,i.getY()),u=new Re(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=i,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new Vi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,a){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,m=this.bottomRight;if(t>0){let y=a?this.topLeft:this.topRight,E=Math.trunc(y.getY()-t);E<0&&(E=0);let C=new Re(y.getX(),E);a?c=C:d=C}if(i>0){let y=a?this.bottomLeft:this.bottomRight,E=Math.trunc(y.getY()+i);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let C=new Re(y.getX(),E);a?u=C:m=C}return new Vi(this.image,c,u,d,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ls{constructor(t,i,a,c){this.columnCount=t,this.errorCorrectionLevel=c,this.rowCountUpperPart=i,this.rowCountLowerPart=a,this.rowCount=i+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qr{constructor(){this.buffer=""}static form(t,i){let a=-1;function c(d,m,y,E,C,R){if(d==="%%")return"%";if(i[++a]===void 0)return;d=E?parseInt(E.substr(1)):void 0;let D=C?parseInt(C.substr(1)):void 0,j;switch(R){case"s":j=i[a];break;case"c":j=i[a][0];break;case"f":j=parseFloat(i[a]).toFixed(d);break;case"p":j=parseFloat(i[a]).toPrecision(d);break;case"e":j=parseFloat(i[a]).toExponential(d);break;case"x":j=parseInt(i[a]).toString(D||16);break;case"d":j=parseFloat(parseInt(i[a],D||10).toPrecision(d)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(D);let F=parseInt(y),H=y&&y[0]+""=="0"?"0":" ";for(;j.length<F;)j=m!==void 0?j+H:H+j;return j}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,c)}format(t,...i){this.buffer+=qr.form(t,i)}toString(){return this.buffer}}class tr{constructor(t){this.boundingBox=new Vi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let a=1;a<tr.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(t)-a;if(c>=0&&(i=this.codewords[c],i!=null)||(c=this.imageRowToCodewordIndex(t)+a,c<this.codewords.length&&(i=this.codewords[c],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new qr;let i=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}return t.toString()}}tr.MAX_NEARBY_DISTANCE=5;class nr{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>t?(t=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===t&&i.push(u.getKey())}return Pe.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class ul extends tr{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=-1,E=1,C=0;for(let R=d;R<m;R++){if(i[R]==null)continue;let D=i[R],j=D.getRowNumber()-y;if(j===0)C++;else if(j===1)E=Math.max(E,C),C=1,y=D.getRowNumber();else if(j<0||D.getRowNumber()>=t.getRowCount()||j>R)i[R]=null;else{let F;E>2?F=(E-2)*j:F=j;let H=F>=R;for(let X=1;X<=F&&!H;X++)H=i[R-X]!=null;H?i[R]=null:(y=D.getRowNumber(),C=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=i.length)continue;i[c]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),y=-1;for(let E=u;E<d;E++){if(m[E]==null)continue;let C=m[E];C.setRowNumberAsRowIndicatorColumn();let R=C.getRowNumber()-y;R===0||(R===1?y=C.getRowNumber():C.getRowNumber()>=t.getRowCount()?m[E]=null:y=C.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new nr,a=new nr,c=new nr,u=new nr;for(let m of t){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let y=m.getValue()%30,E=m.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:a.setValue(y*3+1);break;case 1:u.setValue(y/3),c.setValue(y%3);break;case 2:i.setValue(y+1);break}}if(i.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<Pe.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>Pe.MAX_ROWS_IN_BARCODE)return null;let d=new ls(i.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,d),d}removeIncorrectCodewords(t,i){for(let a=0;a<t.length;a++){let c=t[a];if(t[a]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>i.getRowCount()){t[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(t[a]=null);break;case 2:u+1!==i.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class gn{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Pe.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let a=this.detectionResultColumns[i].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(i,c,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&i[a]!=null&&t[a].getRowNumber()===i[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(t[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let c=i[a].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let m=this.detectionResultColumns[d].getCodewords()[a];m!=null&&(u=gn.adjustRowNumberIfValid(c,u,m),m.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let c=i[a].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let m=this.detectionResultColumns[d].getCodewords()[a];m!=null&&(u=gn.adjustRowNumberIfValid(c,u,m),m.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,a){if(!this.detectionResultColumns[t-1])return;let c=a[i],u=this.detectionResultColumns[t-1].getCodewords(),d=u;this.detectionResultColumns[t+1]!=null&&(d=this.detectionResultColumns[t+1].getCodewords());let m=new Array(14);m[2]=u[i],m[3]=d[i],i>0&&(m[0]=a[i-1],m[4]=u[i-1],m[5]=d[i-1]),i>1&&(m[8]=a[i-2],m[10]=u[i-2],m[11]=d[i-2]),i<a.length-1&&(m[1]=a[i+1],m[6]=u[i+1],m[7]=d[i+1]),i<a.length-2&&(m[9]=a[i+2],m[12]=u[i+2],m[13]=d[i+2]);for(let y of m)if(gn.adjustRowNumber(c,y))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new qr;for(let a=0;a<t.getCodewords().length;a++){i.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class ui{constructor(t,i,a,c){this.rowNumber=ui.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==ui.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}ui.BARCODE_ROW_UNKNOWN=-1;class An{static initialize(){for(let t=0;t<Pe.SYMBOL_TABLE.length;t++){let i=Pe.SYMBOL_TABLE[t],a=i&1;for(let c=0;c<Pe.BARS_IN_MODULE;c++){let u=0;for(;(i&1)===a;)u+=1,i>>=1;a=i&1,An.RATIOS_TABLE[t]||(An.RATIOS_TABLE[t]=new Array(Pe.BARS_IN_MODULE)),An.RATIOS_TABLE[t][Pe.BARS_IN_MODULE-c-1]=Math.fround(u/Pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=An.getDecodedCodewordValue(An.sampleBitCounts(t));return i!==-1?i:An.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=at.sum(t),a=new Int32Array(Pe.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<Pe.MODULES_IN_CODEWORD;d++){let m=i/(2*Pe.MODULES_IN_CODEWORD)+d*i/Pe.MODULES_IN_CODEWORD;u+t[c]<=m&&(u+=t[c],c++),a[c]++}return a}static getDecodedCodewordValue(t){let i=An.getBitValue(t);return Pe.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let a=0;a<t.length;a++)for(let c=0;c<t[a];c++)i=i<<1|(a%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=at.sum(t),a=new Array(Pe.BARS_IN_MODULE);if(i>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(t[d]/i);let c=jr.MAX_VALUE,u=-1;this.bSymbolTableReady||An.initialize();for(let d=0;d<An.RATIOS_TABLE.length;d++){let m=0,y=An.RATIOS_TABLE[d];for(let E=0;E<Pe.BARS_IN_MODULE;E++){let C=Math.fround(y[E]-a[E]);if(m+=Math.fround(C*C),m>=c)break}m<c&&(c=m,u=Pe.SYMBOL_TABLE[d])}return u}}An.bSymbolTableReady=!1,An.RATIOS_TABLE=new Array(Pe.SYMBOL_TABLE.length).map(I=>new Array(Pe.BARS_IN_MODULE));class Yr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class wo{static parseLong(t,i=void 0){return parseInt(t,i)}}class os extends v{}os.kind="NullPointerException";class hl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,a){if(t==null)throw new os;if(i<0||i>t.length||a<0||i+a>t.length||i+a<0)throw new Y;if(a===0)return;for(let c=0;c<a;c++)this.write(t[i+c])}flush(){}close(){}}class Ia extends v{}class cs extends hl{constructor(t=32){if(super(),this.count=0,t<0)throw new O("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Ia;a=Z.MAX_VALUE}this.buf=ae.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,a){if(i<0||i>t.length||a<0||i+a-t.length>0)throw new Y;this.ensureCapacity(this.count+a),U.arraycopy(t,i,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ae.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var St;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(St||(St={}));function vo(){if(typeof window<"u")return window.BigInt||null;if(typeof Rc<"u")return Rc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let us;function ir(I){if(typeof us>"u"&&(us=vo()),us===null)throw new Error("BigInt is not supported!");return us(I)}function fl(){let I=[];I[0]=ir(1);let t=ir(900);I[1]=t;for(let i=2;i<16;i++)I[i]=I[i-1]*t;return I}class se{static decode(t,i){let a=new Ue(""),c=le.ISO8859_1;a.enableDecoding(c);let u=1,d=t[u++],m=new Yr;for(;u<t[0];){switch(d){case se.TEXT_COMPACTION_MODE_LATCH:u=se.textCompaction(t,u,a);break;case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:u=se.byteCompaction(d,t,c,u,a);break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[u++]);break;case se.NUMERIC_COMPACTION_MODE_LATCH:u=se.numericCompaction(t,u,a);break;case se.ECI_CHARSET:le.getCharacterSetECIByValue(t[u++]);break;case se.ECI_GENERAL_PURPOSE:u+=2;break;case se.ECI_USER_DEFINED:u++;break;case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=se.decodeMacroBlock(t,u,m);break;case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:throw new Q;default:u--,u=se.textCompaction(t,u,a);break}if(u<t.length)d=t[u++];else throw Q.getFormatInstance()}if(a.length()===0)throw Q.getFormatInstance();let y=new Ut(null,a.toString(),null,i);return y.setOther(m),y}static decodeMacroBlock(t,i,a){if(i+se.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw Q.getFormatInstance();let c=new Int32Array(se.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<se.NUMBER_OF_SEQUENCE_CODEWORDS;m++,i++)c[m]=t[i];a.setSegmentIndex(Z.parseInt(se.decodeBase900toBase10(c,se.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Ue;i=se.textCompaction(t,i,u),a.setFileId(u.toString());let d=-1;for(t[i]===se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=i+1);i<t[0];)switch(t[i]){case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case se.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new Ue;i=se.textCompaction(t,i+1,m),a.setFileName(m.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new Ue;i=se.textCompaction(t,i+1,y),a.setSender(y.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new Ue;i=se.textCompaction(t,i+1,E),a.setAddressee(E.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new Ue;i=se.numericCompaction(t,i+1,C),a.setSegmentCount(Z.parseInt(C.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let R=new Ue;i=se.numericCompaction(t,i+1,R),a.setTimestamp(wo.parseLong(R.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new Ue;i=se.numericCompaction(t,i+1,D),a.setChecksum(Z.parseInt(D.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new Ue;i=se.numericCompaction(t,i+1,j),a.setFileSize(wo.parseLong(j.toString()));break;default:throw Q.getFormatInstance()}break;case se.MACRO_PDF417_TERMINATOR:i++,a.setLastSegment(!0);break;default:throw Q.getFormatInstance()}if(d!==-1){let m=i-d;a.isLastSegment()&&m--,a.setOptionalData(ae.copyOfRange(t,d,d+m))}return i}static textCompaction(t,i,a){let c=new Int32Array((t[0]-i)*2),u=new Int32Array((t[0]-i)*2),d=0,m=!1;for(;i<t[0]&&!m;){let y=t[i++];if(y<se.TEXT_COMPACTION_MODE_LATCH)c[d]=y/30,c[d+1]=y%30,d+=2;else switch(y){case se.TEXT_COMPACTION_MODE_LATCH:c[d++]=se.TEXT_COMPACTION_MODE_LATCH;break;case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:i--,m=!0;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=t[i++],u[d]=y,d++;break}}return se.decodeTextCompaction(c,u,d,a),i}static decodeTextCompaction(t,i,a,c){let u=St.ALPHA,d=St.ALPHA,m=0;for(;m<a;){let y=t[m],E="";switch(u){case St.ALPHA:if(y<26)E=String.fromCharCode(65+y);else switch(y){case 26:E=" ";break;case se.LL:u=St.LOWER;break;case se.ML:u=St.MIXED;break;case se.PS:d=u,u=St.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.LOWER:if(y<26)E=String.fromCharCode(97+y);else switch(y){case 26:E=" ";break;case se.AS:d=u,u=St.ALPHA_SHIFT;break;case se.ML:u=St.MIXED;break;case se.PS:d=u,u=St.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.MIXED:if(y<se.PL)E=se.MIXED_CHARS[y];else switch(y){case se.PL:u=St.PUNCT;break;case 26:E=" ";break;case se.LL:u=St.LOWER;break;case se.AL:u=St.ALPHA;break;case se.PS:d=u,u=St.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.PUNCT:if(y<se.PAL)E=se.PUNCT_CHARS[y];else switch(y){case se.PAL:u=St.ALPHA;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.ALPHA_SHIFT:if(u=d,y<26)E=String.fromCharCode(65+y);else switch(y){case 26:E=" ";break;case se.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break;case St.PUNCT_SHIFT:if(u=d,y<se.PAL)E=se.PUNCT_CHARS[y];else switch(y){case se.PAL:u=St.ALPHA;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case se.TEXT_COMPACTION_MODE_LATCH:u=St.ALPHA;break}break}E!==""&&c.append(E),m++}}static byteCompaction(t,i,a,c,u){let d=new cs,m=0,y=0,E=!1;switch(t){case se.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),R=i[c++];for(;c<i[0]&&!E;)switch(C[m++]=R,y=900*y+R,R=i[c++],R){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:c--,E=!0;break;default:if(m%5===0&&m>0){for(let D=0;D<6;++D)d.write(Number(ir(y)>>ir(8*(5-D))));y=0,m=0}break}c===i[0]&&R<se.TEXT_COMPACTION_MODE_LATCH&&(C[m++]=R);for(let D=0;D<m;D++)d.write(C[D]);break;case se.BYTE_COMPACTION_MODE_LATCH_6:for(;c<i[0]&&!E;){let D=i[c++];if(D<se.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+D;else switch(D){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:c--,E=!0;break}if(m%5===0&&m>0){for(let j=0;j<6;++j)d.write(Number(ir(y)>>ir(8*(5-j))));y=0,m=0}}break}return u.append(ke.decode(d.toByteArray(),a)),c}static numericCompaction(t,i,a){let c=0,u=!1,d=new Int32Array(se.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!u;){let m=t[i++];if(i===t[0]&&(u=!0),m<se.TEXT_COMPACTION_MODE_LATCH)d[c]=m,c++;else switch(m){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(c%se.MAX_NUMERIC_CODEWORDS===0||m===se.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(se.decodeBase900toBase10(d,c)),c=0)}return i}static decodeBase900toBase10(t,i){let a=ir(0);for(let u=0;u<i;u++)a+=se.EXP900[i-u-1]*ir(t[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new Q;return c.substring(1)}}se.TEXT_COMPACTION_MODE_LATCH=900,se.BYTE_COMPACTION_MODE_LATCH=901,se.NUMERIC_COMPACTION_MODE_LATCH=902,se.BYTE_COMPACTION_MODE_LATCH_6=924,se.ECI_USER_DEFINED=925,se.ECI_GENERAL_PURPOSE=926,se.ECI_CHARSET=927,se.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,se.MACRO_PDF417_TERMINATOR=922,se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,se.MAX_NUMERIC_CODEWORDS=15,se.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,se.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,se.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,se.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,se.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,se.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,se.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,se.PL=25,se.LL=27,se.AS=27,se.ML=28,se.AL=28,se.PS=29,se.PAL=29,se.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,se.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",se.EXP900=vo()?fl():[],se.NUMBER_OF_SEQUENCE_CODEWORDS=2;class tt{constructor(){}static decode(t,i,a,c,u,d,m){let y=new Vi(t,i,a,c,u),E=null,C=null,R;for(let F=!0;;F=!1){if(i!=null&&(E=tt.getRowIndicatorColumn(t,y,i,!0,d,m)),c!=null&&(C=tt.getRowIndicatorColumn(t,y,c,!1,d,m)),R=tt.merge(E,C),R==null)throw ie.getNotFoundInstance();let H=R.getBoundingBox();if(F&&H!=null&&(H.getMinY()<y.getMinY()||H.getMaxY()>y.getMaxY()))y=H;else break}R.setBoundingBox(y);let D=R.getBarcodeColumnCount()+1;R.setDetectionResultColumn(0,E),R.setDetectionResultColumn(D,C);let j=E!=null;for(let F=1;F<=D;F++){let H=j?F:D-F;if(R.getDetectionResultColumn(H)!==void 0)continue;let X;H===0||H===D?X=new ul(y,H===0):X=new tr(y),R.setDetectionResultColumn(H,X);let re=-1,ve=re;for(let we=y.getMinY();we<=y.getMaxY();we++){if(re=tt.getStartColumn(R,H,we,j),re<0||re>y.getMaxX()){if(ve===-1)continue;re=ve}let xe=tt.detectCodeword(t,y.getMinX(),y.getMaxX(),j,re,we,d,m);xe!=null&&(X.setCodeword(we,xe),ve=re,d=Math.min(d,xe.getWidth()),m=Math.max(m,xe.getWidth()))}}return tt.createDecoderResult(R)}static merge(t,i){if(t==null&&i==null)return null;let a=tt.getBarcodeMetadata(t,i);if(a==null)return null;let c=Vi.merge(tt.adjustBoundingBox(t),tt.adjustBoundingBox(i));return new gn(a,c)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let a=tt.getMax(i),c=0;for(let m of i)if(c+=a-m,m>0)break;let u=t.getCodewords();for(let m=0;c>0&&u[m]==null;m++)c--;let d=0;for(let m=i.length-1;m>=0&&(d+=a-i[m],!(i[m]>0));m--);for(let m=u.length-1;d>0&&u[m]==null;m--)d--;return t.getBoundingBox().addMissingRows(c,d,t.isLeft())}static getMax(t){let i=-1;for(let a of t)i=Math.max(i,a);return i}static getBarcodeMetadata(t,i){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let c;return i==null||(c=i.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(t,i,a,c,u,d){let m=new ul(i,c);for(let y=0;y<2;y++){let E=y===0?1:-1,C=Math.trunc(Math.trunc(a.getX()));for(let R=Math.trunc(Math.trunc(a.getY()));R<=i.getMaxY()&&R>=i.getMinY();R+=E){let D=tt.detectCodeword(t,0,t.getWidth(),c,C,R,u,d);D!=null&&(m.setCodeword(R,D),c?C=D.getStartX():C=D.getEndX())}}return m}static adjustCodewordCount(t,i){let a=i[0][1],c=a.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-tt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(c.length===0){if(u<1||u>Pe.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(t){let i=tt.createBarcodeMatrix(t);tt.adjustCodewordCount(t,i);let a=new Array,c=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],d=new Array;for(let y=0;y<t.getBarcodeRowCount();y++)for(let E=0;E<t.getBarcodeColumnCount();E++){let C=i[y][E+1].getValue(),R=y*t.getBarcodeColumnCount()+E;C.length===0?a.push(R):C.length===1?c[R]=C[0]:(d.push(R),u.push(C))}let m=new Array(u.length);for(let y=0;y<m.length;y++)m[y]=u[y];return tt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),c,Pe.toIntArray(a),Pe.toIntArray(d),m)}static createDecoderResultFromAmbiguousValues(t,i,a,c,u){let d=new Int32Array(c.length),m=100;for(;m-- >0;){for(let y=0;y<d.length;y++)i[c[y]]=u[y][d[y]];try{return tt.decodeCodewords(i,t,a)}catch(y){if(!(y instanceof k))throw y}if(d.length===0)throw k.getChecksumInstance();for(let y=0;y<d.length;y++)if(d[y]<u[y].length-1){d[y]++;break}else if(d[y]=0,y===d.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let c=0;c<i.length;c++)for(let u=0;u<i[c].length;u++)i[c][u]=new nr;let a=0;for(let c of t.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=i.length)continue;i[d][a].setValue(u.getValue())}}}a++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,a,c){let u=c?1:-1,d=null;if(tt.isValidBarcodeColumn(t,i-u)&&(d=t.getDetectionResultColumn(i-u).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=t.getDetectionResultColumn(i).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(tt.isValidBarcodeColumn(t,i-u)&&(d=t.getDetectionResultColumn(i-u).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let m=0;for(;tt.isValidBarcodeColumn(t,i-u);){i-=u;for(let y of t.getDetectionResultColumn(i).getCodewords())if(y!=null)return(c?y.getEndX():y.getStartX())+u*m*(y.getEndX()-y.getStartX());m++}return c?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,a,c,u,d,m,y){u=tt.adjustCodewordStartColumn(t,i,a,c,u,d);let E=tt.getModuleBitCount(t,i,a,c,u,d);if(E==null)return null;let C,R=at.sum(E);if(c)C=u+R;else{for(let F=0;F<E.length/2;F++){let H=E[F];E[F]=E[E.length-1-F],E[E.length-1-F]=H}C=u,u=C-R}if(!tt.checkCodewordSkew(R,m,y))return null;let D=An.getDecodedValue(E),j=Pe.getCodeword(D);return j===-1?null:new ui(u,C,tt.getCodewordBucketNumber(D),j)}static getModuleBitCount(t,i,a,c,u,d){let m=u,y=new Int32Array(8),E=0,C=c?1:-1,R=c;for(;(c?m<a:m>=i)&&E<y.length;)t.get(m,d)===R?(y[E]++,m+=C):(E++,R=!R);return E===y.length||m===(c?a:i)&&E===y.length-1?y:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,a,c,u,d){let m=u,y=c?-1:1;for(let E=0;E<2;E++){for(;(c?m>=i:m<a)&&c===t.get(m,d);){if(Math.abs(u-m)>tt.CODEWORD_SKEW_SIZE)return u;m+=y}y=-y,c=!c}return m}static checkCodewordSkew(t,i,a){return i-tt.CODEWORD_SKEW_SIZE<=t&&t<=a+tt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,a){if(t.length===0)throw Q.getFormatInstance();let c=1<<i+1,u=tt.correctErrors(t,a,c);tt.verifyCodewordCount(t,c);let d=se.decode(t,""+i);return d.setErrorsCorrected(u),d.setErasures(a.length),d}static correctErrors(t,i,a){if(i!=null&&i.length>a/2+tt.MAX_ERRORS||a<0||a>tt.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return tt.errorCorrection.decode(t,a,i)}static verifyCodewordCount(t,i){if(t.length<4)throw Q.getFormatInstance();let a=t[0];if(a>t.length)throw Q.getFormatInstance();if(a===0)if(i<t.length)t[0]=t.length-i;else throw Q.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),a=0,c=i.length-1;for(;!((t&1)!==a&&(a=t&1,c--,c<0));)i[c]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return tt.getCodewordBucketNumber(tt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new qr;for(let a=0;a<t.length;a++){i.format("Row %2d: ",a);for(let c=0;c<t[a].length;c++){let u=t[a][c];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}tt.CODEWORD_SKEW_SIZE=2,tt.MAX_ERRORS=3,tt.MAX_EC_CODEWORDS=512,tt.errorCorrection=new Hi;class Sn{decode(t,i=null){let a=Sn.decode(t,i,!1);if(a==null||a.length===0||a[0]==null)throw ie.getNotFoundInstance();return a[0]}decodeMultiple(t,i=null){try{return Sn.decode(t,i,!0)}catch(a){throw a instanceof Q||a instanceof k?ie.getNotFoundInstance():a}}static decode(t,i,a){const c=new Array,u=We.detectMultiple(t,i,a);for(const d of u.getPoints()){const m=tt.decode(u.getBits(),d[4],d[5],d[6],d[7],Sn.getMinCodewordWidth(d),Sn.getMaxCodewordWidth(d)),y=new _e(m.getText(),m.getRawBytes(),void 0,d,Ee.PDF_417);y.putMetadata(mt.ERROR_CORRECTION_LEVEL,m.getECLevel());const E=m.getOther();E!=null&&y.putMetadata(mt.PDF417_EXTRA_METADATA,E),c.push(y)}return c.map(d=>d)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?Z.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Sn.getMaxWidth(t[0],t[4]),Sn.getMaxWidth(t[6],t[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.max(Sn.getMaxWidth(t[1],t[5]),Sn.getMaxWidth(t[7],t[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Sn.getMinWidth(t[0],t[4]),Sn.getMinWidth(t[6],t[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.min(Sn.getMinWidth(t[1],t[5]),Sn.getMinWidth(t[7],t[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class hs extends v{}hs.kind="ReaderException";class bo{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!f(t)&&t.get(Ae.TRY_HARDER)===!0,a=f(t)?null:t.get(Ae.POSSIBLE_FORMATS),c=new Array;if(!f(a)){const u=a.some(d=>d===Ee.UPC_A||d===Ee.UPC_E||d===Ee.EAN_13||d===Ee.EAN_8||d===Ee.CODABAR||d===Ee.CODE_39||d===Ee.CODE_93||d===Ee.CODE_128||d===Ee.ITF||d===Ee.RSS_14||d===Ee.RSS_EXPANDED);u&&!i&&c.push(new oi(t,this.verbose)),a.includes(Ee.QR_CODE)&&c.push(new Fi),a.includes(Ee.DATA_MATRIX)&&c.push(new Pi),a.includes(Ee.AZTEC)&&c.push(new is),a.includes(Ee.PDF_417)&&c.push(new Sn),u&&i&&c.push(new oi(t,this.verbose))}c.length===0&&(i||c.push(new oi(t,this.verbose)),c.push(new Fi),c.push(new Pi),c.push(new is),c.push(new Sn),i&&c.push(new oi(t,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new hs("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(a){if(a instanceof hs)continue}throw new ie("No MultiFormat Readers were able to detect the code.")}}class Eo extends Se{constructor(t=null,i=500){const a=new bo;a.setHints(t),super(a,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class $c extends Se{constructor(t=500){super(new Sn,t)}}class eu extends Se{constructor(t=500){super(new Fi,t)}}var dl;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(dl||(dl={}));var un=dl;class Ra{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new vn(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let a=i[i.length-1];const c=this.field;for(let u=i.length;u<=t;u++){const d=a.multiply(new vn(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));i.push(d),a=d}}return i[t]}encode(t,i){if(i===0)throw new O("No error correction bytes");const a=t.length-i;if(a<=0)throw new O("No data bytes provided");const c=this.buildGenerator(i),u=new Int32Array(a);U.arraycopy(t,0,u,0,a);let d=new vn(this.field,u);d=d.multiplyByMonomial(i,1);const y=d.divide(c)[1].getCoefficients(),E=i-y.length;for(let C=0;C<E;C++)t[a+C]=0;U.arraycopy(y,0,t,a+E,y.length)}}class Qt{constructor(){}static applyMaskPenaltyRule1(t){return Qt.applyMaskPenaltyRule1Internal(t,!0)+Qt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let d=0;d<u-1;d++){const m=a[d];for(let y=0;y<c-1;y++){const E=m[y];E===m[y+1]&&E===a[d+1][y]&&E===a[d+1][y+1]&&i++}}return Qt.N2*i}static applyMaskPenaltyRule3(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let d=0;d<u;d++)for(let m=0;m<c;m++){const y=a[d];m+6<c&&y[m]===1&&y[m+1]===0&&y[m+2]===1&&y[m+3]===1&&y[m+4]===1&&y[m+5]===0&&y[m+6]===1&&(Qt.isWhiteHorizontal(y,m-4,m)||Qt.isWhiteHorizontal(y,m+7,m+11))&&i++,d+6<u&&a[d][m]===1&&a[d+1][m]===0&&a[d+2][m]===1&&a[d+3][m]===1&&a[d+4][m]===1&&a[d+5][m]===0&&a[d+6][m]===1&&(Qt.isWhiteVertical(a,m,d-4,d)||Qt.isWhiteVertical(a,m,d+7,d+11))&&i++}return i*Qt.N3}static isWhiteHorizontal(t,i,a){i=Math.max(i,0),a=Math.min(a,t.length);for(let c=i;c<a;c++)if(t[c]===1)return!1;return!0}static isWhiteVertical(t,i,a,c){a=Math.max(a,0),c=Math.min(c,t.length);for(let u=a;u<c;u++)if(t[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const a=t.getArray(),c=t.getWidth(),u=t.getHeight();for(let y=0;y<u;y++){const E=a[y];for(let C=0;C<c;C++)E[C]===1&&i++}const d=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-d)*10/d)*Qt.N4}static getDataMaskBit(t,i,a){let c,u;switch(t){case 0:c=a+i&1;break;case 1:c=a&1;break;case 2:c=i%3;break;case 3:c=(a+i)%3;break;case 4:c=Math.floor(a/2)+Math.floor(i/3)&1;break;case 5:u=a*i,c=(u&1)+u%3;break;case 6:u=a*i,c=(u&1)+u%3&1;break;case 7:u=a*i,c=u%3+(a+i&1)&1;break;default:throw new O("Invalid mask pattern: "+t)}return c===0}static applyMaskPenaltyRule1Internal(t,i){let a=0;const c=i?t.getHeight():t.getWidth(),u=i?t.getWidth():t.getHeight(),d=t.getArray();for(let m=0;m<c;m++){let y=0,E=-1;for(let C=0;C<u;C++){const R=i?d[m][C]:d[C][m];R===E?y++:(y>=5&&(a+=Qt.N1+(y-5)),y=1,E=R)}y>=5&&(a+=Qt.N1+(y-5))}return a}}Qt.N1=3,Qt.N2=3,Qt.N3=40,Qt.N4=10;class fs{constructor(t,i){this.width=t,this.height=i;const a=new Array(i);for(let c=0;c!==i;c++)a[c]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,a){this.bytes[i][t]=a}setBoolean(t,i,a){this.bytes[i][t]=a?1:0}clear(t){for(const i of this.bytes)ae.fill(i,t)}equals(t){if(!(t instanceof fs))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],d=i.bytes[a];for(let m=0,y=this.width;m<y;++m)if(u[m]!==d[m])return!1}return!0}toString(){const t=new Ue;for(let i=0,a=this.height;i<a;++i){const c=this.bytes[i];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class fr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new Ue;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<fr.NUM_MASK_PATTERNS}}fr.NUM_MASK_PATTERNS=8;class Tt extends v{}Tt.kind="WriterException";class Fe{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,a,c,u){Fe.clearMatrix(u),Fe.embedBasicPatterns(a,u),Fe.embedTypeInfo(i,c,u),Fe.maybeEmbedVersionInfo(a,u),Fe.embedDataBits(t,c,u)}static embedBasicPatterns(t,i){Fe.embedPositionDetectionPatternsAndSeparators(i),Fe.embedDarkDotAtLeftBottomCorner(i),Fe.maybeEmbedPositionAdjustmentPatterns(t,i),Fe.embedTimingPatterns(i)}static embedTypeInfo(t,i,a){const c=new ce;Fe.makeTypeInfoBits(t,i,c);for(let u=0,d=c.getSize();u<d;++u){const m=c.get(c.getSize()-1-u),y=Fe.TYPE_INFO_COORDINATES[u],E=y[0],C=y[1];if(a.setBoolean(E,C,m),u<8){const R=a.getWidth()-u-1;a.setBoolean(R,8,m)}else{const D=a.getHeight()-7+(u-8);a.setBoolean(8,D,m)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const a=new ce;Fe.makeVersionInfoBits(t,a);let c=17;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const m=a.get(c);c--,i.setBoolean(u,i.getHeight()-11+d,m),i.setBoolean(i.getHeight()-11+d,u,m)}}static embedDataBits(t,i,a){let c=0,u=-1,d=a.getWidth()-1,m=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);m>=0&&m<a.getHeight();){for(let y=0;y<2;++y){const E=d-y;if(!Fe.isEmpty(a.get(E,m)))continue;let C;c<t.getSize()?(C=t.get(c),++c):C=!1,i!==255&&Qt.getDataMaskBit(i,E,m)&&(C=!C),a.setBoolean(E,m,C)}m+=u}u=-u,m+=u,d-=2}if(c!==t.getSize())throw new Tt("Not all bits consumed: "+c+"/"+t.getSize())}static findMSBSet(t){return 32-Z.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new O("0 polynomial");const a=Fe.findMSBSet(i);for(t<<=a-1;Fe.findMSBSet(t)>=a;)t^=i<<Fe.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,i,a){if(!fr.isValidMaskPattern(i))throw new Tt("Invalid mask pattern");const c=t.getBits()<<3|i;a.appendBits(c,5);const u=Fe.calculateBCHCode(c,Fe.TYPE_INFO_POLY);a.appendBits(u,10);const d=new ce;if(d.appendBits(Fe.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new Tt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const a=Fe.calculateBCHCode(t.getVersionNumber(),Fe.VERSION_INFO_POLY);if(i.appendBits(a,12),i.getSize()!==18)throw new Tt("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const a=(i+1)%2;Fe.isEmpty(t.get(i,6))&&t.setNumber(i,6,a),Fe.isEmpty(t.get(6,i))&&t.setNumber(6,i,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Tt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,a){for(let c=0;c<8;++c){if(!Fe.isEmpty(a.get(t+c,i)))throw new Tt;a.setNumber(t+c,i,0)}}static embedVerticalSeparationPattern(t,i,a){for(let c=0;c<7;++c){if(!Fe.isEmpty(a.get(t,i+c)))throw new Tt;a.setNumber(t,i+c,0)}}static embedPositionAdjustmentPattern(t,i,a){for(let c=0;c<5;++c){const u=Fe.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(t+d,i+c,u[d])}}static embedPositionDetectionPattern(t,i,a){for(let c=0;c<7;++c){const u=Fe.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(t+d,i+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(t){const i=Fe.POSITION_DETECTION_PATTERN[0].length;Fe.embedPositionDetectionPattern(0,0,t),Fe.embedPositionDetectionPattern(t.getWidth()-i,0,t),Fe.embedPositionDetectionPattern(0,t.getWidth()-i,t);const a=8;Fe.embedHorizontalSeparationPattern(0,a-1,t),Fe.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),Fe.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const c=7;Fe.embedVerticalSeparationPattern(c,0,t),Fe.embedVerticalSeparationPattern(t.getHeight()-c-1,0,t),Fe.embedVerticalSeparationPattern(c,t.getHeight()-c,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,c=Fe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,d=c.length;u!==d;u++){const m=c[u];if(m>=0)for(let y=0;y!==d;y++){const E=c[y];E>=0&&Fe.isEmpty(i.get(E,m))&&Fe.embedPositionAdjustmentPattern(E-2,m-2,i)}}}}Fe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Fe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Fe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Fe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Fe.VERSION_INFO_POLY=7973,Fe.TYPE_INFO_POLY=1335,Fe.TYPE_INFO_MASK_PATTERN=21522;class tu{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ft{constructor(){}static calculateMaskPenalty(t){return Qt.applyMaskPenaltyRule1(t)+Qt.applyMaskPenaltyRule2(t)+Qt.applyMaskPenaltyRule3(t)+Qt.applyMaskPenaltyRule4(t)}static encode(t,i,a=null){let c=Ft.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(un.CHARACTER_SET)!==void 0;u&&(c=a.get(un.CHARACTER_SET).toString());const d=this.chooseMode(t,c),m=new ce;if(d===je.BYTE&&(u||Ft.DEFAULT_BYTE_MODE_ENCODING!==c)){const we=le.getCharacterSetECIByName(c);we!==void 0&&this.appendECI(we,m)}this.appendModeInfo(d,m);const y=new ce;this.appendBytes(t,d,y,c);let E;if(a!==null&&a.get(un.QR_VERSION)!==void 0){const we=Number.parseInt(a.get(un.QR_VERSION).toString(),10);E=Me.getVersionForNumber(we);const xe=this.calculateBitsNeeded(d,m,y,E);if(!this.willFit(xe,E,i))throw new Tt("Data too big for requested version")}else E=this.recommendVersion(i,d,m,y);const C=new ce;C.appendBitArray(m);const R=d===je.BYTE?y.getSizeInBytes():t.length;this.appendLengthInfo(R,E,d,C),C.appendBitArray(y);const D=E.getECBlocksForLevel(i),j=E.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(j,C);const F=this.interleaveWithECBytes(C,E.getTotalCodewords(),j,D.getNumBlocks()),H=new fr;H.setECLevel(i),H.setMode(d),H.setVersion(E);const X=E.getDimensionForVersion(),re=new fs(X,X),ve=this.chooseMaskPattern(F,i,E,re);return H.setMaskPattern(ve),Fe.buildMatrix(F,i,E,ve,re),H.setMatrix(re),H}static recommendVersion(t,i,a,c){const u=this.calculateBitsNeeded(i,a,c,Me.getVersionForNumber(1)),d=this.chooseVersion(u,t),m=this.calculateBitsNeeded(i,a,c,d);return this.chooseVersion(m,t)}static calculateBitsNeeded(t,i,a,c){return i.getSize()+t.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(t){return t<Ft.ALPHANUMERIC_TABLE.length?Ft.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(le.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return je.KANJI;let a=!1,c=!1;for(let u=0,d=t.length;u<d;++u){const m=t.charAt(u);if(Ft.isDigit(m))a=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return je.BYTE}return c?je.ALPHANUMERIC:a?je.NUMERIC:je.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=ke.encode(t,le.SJIS)}catch{return!1}const a=i.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=i[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,i,a,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let m=0;m<fr.NUM_MASK_PATTERNS;m++){Fe.buildMatrix(t,i,a,m,c);let y=this.calculateMaskPenalty(c);y<u&&(u=y,d=m)}return d}static chooseVersion(t,i){for(let a=1;a<=40;a++){const c=Me.getVersionForNumber(a);if(Ft.willFit(t,c,i))return c}throw new Tt("Data too big")}static willFit(t,i,a){const c=i.getTotalCodewords(),d=i.getECBlocksForLevel(a).getTotalECCodewords(),m=c-d,y=(t+7)/8;return m>=y}static terminateBits(t,i){const a=t*8;if(i.getSize()>a)throw new Tt("data bits cannot fit in the QR Code"+i.getSize()+" > "+a);for(let d=0;d<4&&i.getSize()<a;++d)i.appendBit(!1);const c=i.getSize()&7;if(c>0)for(let d=c;d<8;d++)i.appendBit(!1);const u=t-i.getSizeInBytes();for(let d=0;d<u;++d)i.appendBits((d&1)===0?236:17,8);if(i.getSize()!==a)throw new Tt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,a,c,u,d){if(c>=a)throw new Tt("Block ID too large");const m=t%a,y=a-m,E=Math.floor(t/a),C=E+1,R=Math.floor(i/a),D=R+1,j=E-R,F=C-D;if(j!==F)throw new Tt("EC bytes mismatch");if(a!==y+m)throw new Tt("RS blocks mismatch");if(t!==(R+j)*y+(D+F)*m)throw new Tt("Total bytes mismatch");c<y?(u[0]=R,d[0]=j):(u[0]=D,d[0]=F)}static interleaveWithECBytes(t,i,a,c){if(t.getSizeInBytes()!==a)throw new Tt("Number of bits and data bytes does not match");let u=0,d=0,m=0;const y=new Array;for(let C=0;C<c;++C){const R=new Int32Array(1),D=new Int32Array(1);Ft.getNumDataBytesAndNumECBytesForBlockID(i,a,c,C,R,D);const j=R[0],F=new Uint8Array(j);t.toBytes(8*u,F,0,j);const H=Ft.generateECBytes(F,D[0]);y.push(new tu(F,H)),d=Math.max(d,j),m=Math.max(m,H.length),u+=R[0]}if(a!==u)throw new Tt("Data bytes does not match offset");const E=new ce;for(let C=0;C<d;++C)for(const R of y){const D=R.getDataBytes();C<D.length&&E.appendBits(D[C],8)}for(let C=0;C<m;++C)for(const R of y){const D=R.getErrorCorrectionBytes();C<D.length&&E.appendBits(D[C],8)}if(i!==E.getSizeInBytes())throw new Tt("Interleaving error: "+i+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(t,i){const a=t.length,c=new Int32Array(a+i);for(let d=0;d<a;d++)c[d]=t[d]&255;new Ra(pt.QR_CODE_FIELD_256).encode(c,i);const u=new Uint8Array(i);for(let d=0;d<i;d++)u[d]=c[a+d];return u}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,a,c){const u=a.getCharacterCountBits(i);if(t>=1<<u)throw new Tt(t+" is bigger than "+((1<<u)-1));c.appendBits(t,u)}static appendBytes(t,i,a,c){switch(i){case je.NUMERIC:Ft.appendNumericBytes(t,a);break;case je.ALPHANUMERIC:Ft.appendAlphanumericBytes(t,a);break;case je.BYTE:Ft.append8BitBytes(t,a,c);break;case je.KANJI:Ft.appendKanjiBytes(t,a);break;default:throw new Tt("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=Ft.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const a=t.length;let c=0;for(;c<a;){const u=Ft.getDigit(t.charAt(c));if(c+2<a){const d=Ft.getDigit(t.charAt(c+1)),m=Ft.getDigit(t.charAt(c+2));i.appendBits(u*100+d*10+m,10),c+=3}else if(c+1<a){const d=Ft.getDigit(t.charAt(c+1));i.appendBits(u*10+d,7),c+=2}else i.appendBits(u,4),c++}}static appendAlphanumericBytes(t,i){const a=t.length;let c=0;for(;c<a;){const u=Ft.getAlphanumericCode(t.charCodeAt(c));if(u===-1)throw new Tt;if(c+1<a){const d=Ft.getAlphanumericCode(t.charCodeAt(c+1));if(d===-1)throw new Tt;i.appendBits(u*45+d,11),c+=2}else i.appendBits(u,6),c++}}static append8BitBytes(t,i,a){let c;try{c=ke.encode(t,a)}catch(u){throw new Tt(u)}for(let u=0,d=c.length;u!==d;u++){const m=c[u];i.appendBits(m,8)}}static appendKanjiBytes(t,i){let a;try{a=ke.encode(t,le.SJIS)}catch(u){throw new Tt(u)}const c=a.length;for(let u=0;u<c;u+=2){const d=a[u]&255,m=a[u+1]&255,y=d<<8&4294967295|m;let E=-1;if(y>=33088&&y<=40956?E=y-33088:y>=57408&&y<=60351&&(E=y-49472),E===-1)throw new Tt("Invalid byte sequence");const C=(E>>8)*192+(E&255);i.appendBits(C,13)}}static appendECI(t,i){i.appendBits(je.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}Ft.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ft.DEFAULT_BYTE_MODE_ENCODING=le.UTF8.getName();class dr{write(t,i,a,c=null){if(t.length===0)throw new O("Found empty contents");if(i<0||a<0)throw new O("Requested dimensions are too small: "+i+"x"+a);let u=rt.L,d=dr.QUIET_ZONE_SIZE;c!==null&&(c.get(un.ERROR_CORRECTION)!==void 0&&(u=rt.fromString(c.get(un.ERROR_CORRECTION).toString())),c.get(un.MARGIN)!==void 0&&(d=Number.parseInt(c.get(un.MARGIN).toString(),10)));const m=Ft.encode(t,u,c);return this.renderResult(m,i,a,d)}writeToDom(t,i,a,c,u=null){typeof t=="string"&&(t=document.querySelector(t));const d=this.write(i,a,c,u);t&&t.appendChild(d)}renderResult(t,i,a,c){const u=t.getMatrix();if(u===null)throw new Zn;const d=u.getWidth(),m=u.getHeight(),y=d+c*2,E=m+c*2,C=Math.max(i,y),R=Math.max(a,E),D=Math.min(Math.floor(C/y),Math.floor(R/E)),j=Math.floor((C-d*D)/2),F=Math.floor((R-m*D)/2),H=this.createSVGElement(C,R);for(let X=0,re=F;X<m;X++,re+=D)for(let ve=0,we=j;ve<d;ve++,we+=D)if(u.get(ve,X)===1){const xe=this.createSvgRectElement(we,re,D,D);H.appendChild(xe)}return H}createSVGElement(t,i){const a=document.createElementNS(dr.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",i.toString()),a}createSvgRectElement(t,i,a,c){const u=document.createElementNS(dr.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}dr.QUIET_ZONE_SIZE=4,dr.SVG_NS="http://www.w3.org/2000/svg";class Xr{encode(t,i,a,c,u){if(t.length===0)throw new O("Found empty contents");if(i!==Ee.QR_CODE)throw new O("Can only encode QR_CODE, but got "+i);if(a<0||c<0)throw new O(`Requested dimensions are too small: ${a}x${c}`);let d=rt.L,m=Xr.QUIET_ZONE_SIZE;u!==null&&(u.get(un.ERROR_CORRECTION)!==void 0&&(d=rt.fromString(u.get(un.ERROR_CORRECTION).toString())),u.get(un.MARGIN)!==void 0&&(m=Number.parseInt(u.get(un.MARGIN).toString(),10)));const y=Ft.encode(t,d,u);return Xr.renderResult(y,a,c,m)}static renderResult(t,i,a,c){const u=t.getMatrix();if(u===null)throw new Zn;const d=u.getWidth(),m=u.getHeight(),y=d+c*2,E=m+c*2,C=Math.max(i,y),R=Math.max(a,E),D=Math.min(Math.floor(C/y),Math.floor(R/E)),j=Math.floor((C-d*D)/2),F=Math.floor((R-m*D)/2),H=new Ge(C,R);for(let X=0,re=F;X<m;X++,re+=D)for(let ve=0,we=j;ve<d;ve++,we+=D)u.get(ve,X)===1&&H.setRegion(we,re,D,D);return H}}Xr.QUIET_ZONE_SIZE=4;class nu{encode(t,i,a,c,u){let d;if(i===Ee.QR_CODE)d=new Xr;else throw new O("No encoder available for format "+i);return d.encode(t,i,a,c,u)}}class Ni extends Ie{constructor(t,i,a,c,u,d,m,y){if(super(d,m),this.yuvData=t,this.dataWidth=i,this.dataHeight=a,this.left=c,this.top=u,c+d>i||u+m>a)throw new O("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(d,m)}getRow(t,i){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return U.arraycopy(this.yuvData,c,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const a=t*i,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return U.arraycopy(this.yuvData,u,c,0,a),c;for(let d=0;d<i;d++){const m=d*t;U.arraycopy(this.yuvData,u,c,m,t),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,i,a,c){return new Ni(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,a,c,!1)}renderThumbnail(){const t=this.getWidth()/Ni.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Ni.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*i),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<i;d++){const m=d*t;for(let y=0;y<t;y++){const E=c[u+y*Ni.THUMBNAIL_SCALE_FACTOR]&255;a[m+y]=4278190080|E*65793}u+=this.dataWidth*Ni.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Ni.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ni.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<i;c++,u+=this.dataWidth){const d=u+t/2;for(let m=u,y=u+t-1;m<d;m++,y--){const E=a[m];a[m]=a[y],a[y]=E}}}invert(){return new Je(this)}}Ni.THUMBNAIL_SCALE_FACTOR=2;class gl extends Ie{constructor(t,i,a,c,u,d,m){if(super(i,a),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=m,t.BYTES_PER_ELEMENT===4){const y=i*a,E=new Uint8ClampedArray(y);for(let C=0;C<y;C++){const R=t[C],D=R>>16&255,j=R>>7&510,F=R&255;E[C]=(D+j+F)/4&255}this.luminances=E}else this.luminances=t;if(c===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+a>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return U.arraycopy(this.luminances,c,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const a=t*i,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return U.arraycopy(this.luminances,u,c,0,a),c;for(let d=0;d<i;d++){const m=d*t;U.arraycopy(this.luminances,u,c,m,t),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,i,a,c){return new gl(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new Je(this)}}class Ao extends le{static forName(t){return this.getCharacterSetECIByName(t)}}class Da{}Da.ISO_8859_1=le.ISO8859_1;class Wr{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class So{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class _o{constructor(t){this.previous=t}getPrevious(){return this.previous}}class gr extends _o{constructor(t,i,a){super(t),this.value=i,this.bitCount=a}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new gr(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new gr(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Z.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class ds extends gr{constructor(t,i,a){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=a}appendTo(t,i){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+a],8)}addBinaryShift(t,i){return new ds(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Co(I,t,i){return new ds(I,t,i)}function Zr(I,t,i){return new gr(I,t,i)}const Qr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rr=0,gs=1,$n=2,ml=3,hi=4,Ma=new gr(null,0,0),mr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function iu(I){for(let t of I)ae.fill(t,-1);return I[rr][hi]=0,I[gs][hi]=0,I[gs][rr]=28,I[ml][hi]=0,I[$n][hi]=0,I[$n][rr]=15,I}const Ba=iu(ae.createInt32Array(6,6));class fi{constructor(t,i,a,c){this.token=t,this.mode=i,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let a=this.bitCount,c=this.token;if(t!==this.mode){let d=mr[this.mode][t];c=Zr(c,d&65535,d>>16),a+=d>>16}let u=t===$n?4:5;return c=Zr(c,i,u),new fi(c,t,0,a+u)}shiftAndAppend(t,i){let a=this.token,c=this.mode===$n?4:5;return a=Zr(a,Ba[this.mode][t],c),a=Zr(a,i,5),new fi(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(t){let i=this.token,a=this.mode,c=this.bitCount;if(this.mode===hi||this.mode===$n){let m=mr[a][rr];i=Zr(i,m&65535,m>>16),c+=m>>16,a=rr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new fi(i,a,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(t+1)),d}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Co(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new fi(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(mr[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=fi.calculateBinaryShiftCost(t)-fi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let c=this.endBinaryShift(t.length).token;c!==null;c=c.getPrevious())i.unshift(c);let a=new ce;for(const c of i)c.appendTo(a,t);return a}toString(){return ye.format("%s bits=%d bytes=%d",Qr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}fi.INITIAL_STATE=new fi(Ma,rr,0,0);function To(I){const t=ye.getCharCode(" "),i=ye.getCharCode("."),a=ye.getCharCode(",");I[rr][t]=1;const c=ye.getCharCode("Z"),u=ye.getCharCode("A");for(let D=u;D<=c;D++)I[rr][D]=D-u+2;I[gs][t]=1;const d=ye.getCharCode("z"),m=ye.getCharCode("a");for(let D=m;D<=d;D++)I[gs][D]=D-m+2;I[$n][t]=1;const y=ye.getCharCode("9"),E=ye.getCharCode("0");for(let D=E;D<=y;D++)I[$n][D]=D-E+2;I[$n][a]=12,I[$n][i]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<C.length;D++)I[ml][ye.getCharCode(C[D])]=D;const R=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<R.length;D++)ye.getCharCode(R[D])>0&&(I[hi][ye.getCharCode(R[D])]=D);return I}const La=To(ae.createInt32Array(5,256));class pr{constructor(t){this.text=t}encode(){const t=ye.getCharCode(" "),i=ye.getCharCode(`
`);let a=So.singletonList(fi.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,m=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ye.getCharCode("\r"):d=m===i?2:0;break;case ye.getCharCode("."):d=m===t?3:0;break;case ye.getCharCode(","):d=m===t?4:0;break;case ye.getCharCode(":"):d=m===t?5:0;break;default:d=0}d>0?(a=pr.updateStateListForPair(a,u,d),u++):a=this.updateStateListForChar(a,u)}return So.min(a,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const a=[];for(let c of t)this.updateStateForChar(c,i,a);return pr.simplifyStates(a)}updateStateForChar(t,i,a){let c=this.text[i]&255,u=La[t.getMode()][c]>0,d=null;for(let m=0;m<=hi;m++){let y=La[m][c];if(y>0){if(d==null&&(d=t.endBinaryShift(i)),!u||m===t.getMode()||m===$n){const E=d.latchAndAppend(m,y);a.push(E)}if(!u&&Ba[t.getMode()][m]>=0){const E=d.shiftAndAppend(m,y);a.push(E)}}}if(t.getBinaryShiftByteCount()>0||La[t.getMode()][c]===0){let m=t.addBinaryShiftChar(i);a.push(m)}}static updateStateListForPair(t,i,a){const c=[];for(let u of t)this.updateStateForPair(u,i,a,c);return this.simplifyStates(c)}static updateStateForPair(t,i,a,c){let u=t.endBinaryShift(i);if(c.push(u.latchAndAppend(hi,a)),t.getMode()!==hi&&c.push(u.shiftAndAppend(hi,a)),a===3||a===4){let d=u.latchAndAppend($n,16-a).latchAndAppend($n,1);c.push(d)}if(t.getBinaryShiftByteCount()>0){let d=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);c.push(d)}}static simplifyStates(t){let i=[];for(const a of t){let c=!0;for(const u of i){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(i=i.filter(d=>d!==u))}c&&i.push(a)}return i}}class ht{constructor(){}static encodeBytes(t){return ht.encode(t,ht.DEFAULT_EC_PERCENT,ht.DEFAULT_AZTEC_LAYERS)}static encode(t,i,a){let c=new pr(t).encode(),u=Z.truncDivision(c.getSize()*i,100)+11,d=c.getSize()+u,m,y,E,C,R;if(a!==ht.DEFAULT_AZTEC_LAYERS){if(m=a<0,y=Math.abs(a),y>(m?ht.MAX_NB_BITS_COMPACT:ht.MAX_NB_BITS))throw new O(ye.format("Illegal value %s for layers",a));E=ht.totalBitsInLayer(y,m),C=ht.WORD_SIZE[y];let xe=E-E%C;if(R=ht.stuffBits(c,C),R.getSize()+u>xe)throw new O("Data to large for user specified layer");if(m&&R.getSize()>C*64)throw new O("Data to large for user specified layer")}else{C=0,R=null;for(let xe=0;;xe++){if(xe>ht.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(m=xe<=3,y=m?xe+1:xe,E=ht.totalBitsInLayer(y,m),d>E)continue;(R==null||C!==ht.WORD_SIZE[y])&&(C=ht.WORD_SIZE[y],R=ht.stuffBits(c,C));let it=E-E%C;if(!(m&&R.getSize()>C*64)&&R.getSize()+u<=it)break}}let D=ht.generateCheckWords(R,E,C),j=R.getSize()/C,F=ht.generateModeMessage(m,y,j),H=(m?11:14)+y*4,X=new Int32Array(H),re;if(m){re=H;for(let xe=0;xe<X.length;xe++)X[xe]=xe}else{re=H+1+2*Z.truncDivision(Z.truncDivision(H,2)-1,15);let xe=Z.truncDivision(H,2),it=Z.truncDivision(re,2);for(let Ze=0;Ze<xe;Ze++){let nn=Ze+Z.truncDivision(Ze,15);X[xe-Ze-1]=it-nn-1,X[xe+Ze]=it+nn+1}}let ve=new Ge(re);for(let xe=0,it=0;xe<y;xe++){let Ze=(y-xe)*4+(m?9:12);for(let nn=0;nn<Ze;nn++){let ei=nn*2;for(let Dn=0;Dn<2;Dn++)D.get(it+ei+Dn)&&ve.set(X[xe*2+Dn],X[xe*2+nn]),D.get(it+Ze*2+ei+Dn)&&ve.set(X[xe*2+nn],X[H-1-xe*2-Dn]),D.get(it+Ze*4+ei+Dn)&&ve.set(X[H-1-xe*2-Dn],X[H-1-xe*2-nn]),D.get(it+Ze*6+ei+Dn)&&ve.set(X[H-1-xe*2-nn],X[xe*2+Dn])}it+=Ze*8}if(ht.drawModeMessage(ve,m,re,F),m)ht.drawBullsEye(ve,Z.truncDivision(re,2),5);else{ht.drawBullsEye(ve,Z.truncDivision(re,2),7);for(let xe=0,it=0;xe<Z.truncDivision(H,2)-1;xe+=15,it+=16)for(let Ze=Z.truncDivision(re,2)&1;Ze<re;Ze+=2)ve.set(Z.truncDivision(re,2)-it,Ze),ve.set(Z.truncDivision(re,2)+it,Ze),ve.set(Ze,Z.truncDivision(re,2)-it),ve.set(Ze,Z.truncDivision(re,2)+it)}let we=new Wr;return we.setCompact(m),we.setSize(re),we.setLayers(y),we.setCodeWords(j),we.setMatrix(ve),we}static drawBullsEye(t,i,a){for(let c=0;c<a;c+=2)for(let u=i-c;u<=i+c;u++)t.set(u,i-c),t.set(u,i+c),t.set(i-c,u),t.set(i+c,u);t.set(i-a,i-a),t.set(i-a+1,i-a),t.set(i-a,i-a+1),t.set(i+a,i-a),t.set(i+a,i-a+1),t.set(i+a,i+a-1)}static generateModeMessage(t,i,a){let c=new ce;return t?(c.appendBits(i-1,2),c.appendBits(a-1,6),c=ht.generateCheckWords(c,28,4)):(c.appendBits(i-1,5),c.appendBits(a-1,11),c=ht.generateCheckWords(c,40,4)),c}static drawModeMessage(t,i,a,c){let u=Z.truncDivision(a,2);if(i)for(let d=0;d<7;d++){let m=u-3+d;c.get(d)&&t.set(m,u-5),c.get(d+7)&&t.set(u+5,m),c.get(20-d)&&t.set(m,u+5),c.get(27-d)&&t.set(u-5,m)}else for(let d=0;d<10;d++){let m=u-5+d+Z.truncDivision(d,5);c.get(d)&&t.set(m,u-7),c.get(d+10)&&t.set(u+7,m),c.get(29-d)&&t.set(m,u+7),c.get(39-d)&&t.set(u-7,m)}}static generateCheckWords(t,i,a){let c=t.getSize()/a,u=new Ra(ht.getGF(a)),d=Z.truncDivision(i,a),m=ht.bitsToWords(t,a,d);u.encode(m,d-c);let y=i%a,E=new ce;E.appendBits(0,y);for(const C of Array.from(m))E.appendBits(C,a);return E}static bitsToWords(t,i,a){let c=new Int32Array(a),u,d;for(u=0,d=t.getSize()/i;u<d;u++){let m=0;for(let y=0;y<i;y++)m|=t.get(u*i+y)?1<<i-y-1:0;c[u]=m}return c}static getGF(t){switch(t){case 4:return pt.AZTEC_PARAM;case 6:return pt.AZTEC_DATA_6;case 8:return pt.AZTEC_DATA_8;case 10:return pt.AZTEC_DATA_10;case 12:return pt.AZTEC_DATA_12;default:throw new O("Unsupported word size "+t)}}static stuffBits(t,i){let a=new ce,c=t.getSize(),u=(1<<i)-2;for(let d=0;d<c;d+=i){let m=0;for(let y=0;y<i;y++)(d+y>=c||t.get(d+y))&&(m|=1<<i-1-y);(m&u)===u?(a.appendBits(m&u,i),d--):(m&u)===0?(a.appendBits(m|1,i),d--):a.appendBits(m,i)}return a}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}ht.DEFAULT_EC_PERCENT=33,ht.DEFAULT_AZTEC_LAYERS=0,ht.MAX_NB_BITS=32,ht.MAX_NB_BITS_COMPACT=4,ht.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ka{encode(t,i,a,c){return this.encodeWithHints(t,i,a,c,null)}encodeWithHints(t,i,a,c,u){let d=Da.ISO_8859_1,m=ht.DEFAULT_EC_PERCENT,y=ht.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(un.CHARACTER_SET)&&(d=Ao.forName(u.get(un.CHARACTER_SET).toString())),u.has(un.ERROR_CORRECTION)&&(m=Z.parseInt(u.get(un.ERROR_CORRECTION).toString())),u.has(un.AZTEC_LAYERS)&&(y=Z.parseInt(u.get(un.AZTEC_LAYERS).toString()))),ka.encodeLayers(t,i,a,c,d,m,y)}static encodeLayers(t,i,a,c,u,d,m){if(i!==Ee.AZTEC)throw new O("Can only encode AZTEC, but got "+i);let y=ht.encode(ye.getBytes(t,u),d,m);return ka.renderResult(y,a,c)}static renderResult(t,i,a){let c=t.getMatrix();if(c==null)throw new Zn;let u=c.getWidth(),d=c.getHeight(),m=Math.max(i,u),y=Math.max(a,d),E=Math.min(m/u,y/d),C=(m-u*E)/2,R=(y-d*E)/2,D=new Ge(m,y);for(let j=0,F=R;j<d;j++,F+=E)for(let H=0,X=C;H<u;H++,X+=E)c.get(H,j)&&D.setRegion(X,F,E,E);return D}}l.AbstractExpandedDecoder=on,l.ArgumentException=N,l.ArithmeticException=kr,l.AztecCode=Wr,l.AztecCodeReader=is,l.AztecCodeWriter=ka,l.AztecDecoder=Ot,l.AztecDetector=rl,l.AztecDetectorResult=fo,l.AztecEncoder=ht,l.AztecHighLevelEncoder=pr,l.AztecPoint=In,l.BarcodeFormat=Ee,l.Binarizer=z,l.BinaryBitmap=B,l.BitArray=ce,l.BitMatrix=Ge,l.BitSource=ci,l.BrowserAztecCodeReader=Zc,l.BrowserBarcodeReader=Qc,l.BrowserCodeReader=Se,l.BrowserDatamatrixCodeReader=ss,l.BrowserMultiFormatReader=Eo,l.BrowserPDF417Reader=$c,l.BrowserQRCodeReader=eu,l.BrowserQRCodeSvgWriter=dr,l.CharacterSetECI=le,l.ChecksumException=k,l.Code128Reader=be,l.Code39Reader=Bt,l.DataMatrixDecodedBitStreamParser=zi,l.DataMatrixReader=Pi,l.DecodeHintType=Ae,l.DecoderResult=Ut,l.DefaultGridSampler=il,l.DetectorResult=ns,l.EAN13Reader=Si,l.EncodeHintType=un,l.Exception=v,l.FormatException=Q,l.GenericGF=pt,l.GenericGFPoly=vn,l.GlobalHistogramBinarizer=ee,l.GridSampler=nl,l.GridSamplerInstance=si,l.HTMLCanvasElementLuminanceSource=Qe,l.HybridBinarizer=fe,l.ITFReader=et,l.IllegalArgumentException=O,l.IllegalStateException=Zn,l.InvertedLuminanceSource=Je,l.LuminanceSource=Ie,l.MathUtils=at,l.MultiFormatOneDReader=oi,l.MultiFormatReader=bo,l.MultiFormatWriter=nu,l.NotFoundException=ie,l.OneDReader=Vt,l.PDF417DecodedBitStreamParser=se,l.PDF417DecoderErrorCorrection=Hi,l.PDF417Reader=Sn,l.PDF417ResultMetadata=Yr,l.PerspectiveTransform=Qn,l.PlanarYUVLuminanceSource=Ni,l.QRCodeByteMatrix=fs,l.QRCodeDataMask=Gn,l.QRCodeDecodedBitStreamParser=zt,l.QRCodeDecoderErrorCorrectionLevel=rt,l.QRCodeDecoderFormatInformation=dn,l.QRCodeEncoder=Ft,l.QRCodeEncoderQRCode=fr,l.QRCodeMaskUtil=Qt,l.QRCodeMatrixUtil=Fe,l.QRCodeMode=je,l.QRCodeReader=Fi,l.QRCodeVersion=Me,l.QRCodeWriter=Xr,l.RGBLuminanceSource=gl,l.RSS14Reader=Ct,l.RSSExpandedReader=pe,l.ReaderException=hs,l.ReedSolomonDecoder=ur,l.ReedSolomonEncoder=Ra,l.ReedSolomonException=Wn,l.Result=_e,l.ResultMetadataType=mt,l.ResultPoint=Re,l.StringUtils=ye,l.UnsupportedOperationException=Ne,l.VideoInputDevice=V,l.WhiteRectangleDetector=Jt,l.WriterException=Tt,l.ZXingArrays=ae,l.ZXingCharset=Ao,l.ZXingInteger=Z,l.ZXingStandardCharsets=Da,l.ZXingStringBuilder=Ue,l.ZXingStringEncoding=ke,l.ZXingSystem=U,l.createAbstractExpandedDecoder=zr,Object.defineProperty(l,"__esModule",{value:!0})}))})($l,$l.exports)),$l.exports}var $t=Vw();const Gw=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var _g=(function(){function o(r,l,f){if(this.formatMap=new Map([[Oe.QR_CODE,$t.BarcodeFormat.QR_CODE],[Oe.AZTEC,$t.BarcodeFormat.AZTEC],[Oe.CODABAR,$t.BarcodeFormat.CODABAR],[Oe.CODE_39,$t.BarcodeFormat.CODE_39],[Oe.CODE_93,$t.BarcodeFormat.CODE_93],[Oe.CODE_128,$t.BarcodeFormat.CODE_128],[Oe.DATA_MATRIX,$t.BarcodeFormat.DATA_MATRIX],[Oe.MAXICODE,$t.BarcodeFormat.MAXICODE],[Oe.ITF,$t.BarcodeFormat.ITF],[Oe.EAN_13,$t.BarcodeFormat.EAN_13],[Oe.EAN_8,$t.BarcodeFormat.EAN_8],[Oe.PDF_417,$t.BarcodeFormat.PDF_417],[Oe.RSS_14,$t.BarcodeFormat.RSS_14],[Oe.RSS_EXPANDED,$t.BarcodeFormat.RSS_EXPANDED],[Oe.UPC_A,$t.BarcodeFormat.UPC_A],[Oe.UPC_E,$t.BarcodeFormat.UPC_E],[Oe.UPC_EAN_EXTENSION,$t.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Gw)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=f;var p=this.createZXingFormats(r),g=new Map;g.set($t.DecodeHintType.POSSIBLE_FORMATS,p),g.set($t.DecodeHintType.TRY_HARDER,!1),this.hints=g}return o.prototype.decodeAsync=function(r){var l=this;return new Promise(function(f,p){try{f(l.decode(r))}catch(g){p(g)}})},o.prototype.decode=function(r){var l=new $t.MultiFormatReader(this.verbose,this.hints),f=new $t.HTMLCanvasElementLuminanceSource(r),p=new $t.BinaryBitmap(new $t.HybridBinarizer(f)),g=l.decode(p);return{text:g.text,format:_2.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},o.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,f,p){r.set(l,f)}),r},o.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},o.prototype.createZXingFormats=function(r){for(var l=[],f=0,p=r;f<p.length;f++){var g=p[f];this.formatMap.has(g)?l.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return l},o.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},o})(),qw=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},Yw=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Cg=(function(){function o(r,l,f){if(this.formatMap=new Map([[Oe.QR_CODE,"qr_code"],[Oe.AZTEC,"aztec"],[Oe.CODABAR,"codabar"],[Oe.CODE_39,"code_39"],[Oe.CODE_93,"code_93"],[Oe.CODE_128,"code_128"],[Oe.DATA_MATRIX,"data_matrix"],[Oe.ITF,"itf"],[Oe.EAN_13,"ean_13"],[Oe.EAN_8,"ean_8"],[Oe.PDF_417,"pdf417"],[Oe.UPC_A,"upc_a"],[Oe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!o.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=f;var p=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(p),!this.detector)throw"BarcodeDetector detector not supported"}return o.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},o.prototype.decodeAsync=function(r){return qw(this,void 0,void 0,function(){var l,f;return Yw(this,function(p){switch(p.label){case 0:return[4,this.detector.detect(r)];case 1:if(l=p.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return f=this.selectLargestBarcode(l),[2,{text:f.rawValue,format:_2.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}]}})})},o.prototype.selectLargestBarcode=function(r){for(var l=null,f=0,p=0,g=r;p<g.length;p++){var b=g[p],S=b.boundingBox.width*b.boundingBox.height;S>f&&(f=S,l=b)}if(!l)throw"No largest barcode found";return l},o.prototype.createBarcodeDetectorFormats=function(r){for(var l=[],f=0,p=r;f<p.length;f++){var g=p[f];this.formatMap.has(g)?l.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},o.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},o.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,f,p){r.set(l,f)}),r},o.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},o})(),Tg=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},Ng=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Xw=(function(){function o(r,l,f,p){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=f,l&&Cg.isSupported()?(this.primaryDecoder=new Cg(r,f,p),this.secondaryDecoder=new _g(r,f,p)):this.primaryDecoder=new _g(r,f,p)}return o.prototype.decodeAsync=function(r){return Tg(this,void 0,void 0,function(){var l;return Ng(this,function(f){switch(f.label){case 0:l=performance.now(),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,f.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},o.prototype.decodeRobustlyAsync=function(r){return Tg(this,void 0,void 0,function(){var l,f;return Ng(this,function(p){switch(p.label){case 0:l=performance.now(),p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,p.sent()];case 3:if(f=p.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw f;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},o.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},o.prototype.possiblyLogPerformance=function(r){if(this.verbose){var l=performance.now()-r;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},o.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,l=0,f=this.executionResults;l<f.length;l++){var p=f[l];r+=p}var g=r/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},o})(),Lf=(function(){var o=function(r,l){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(f[g]=p[g])},o(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");o(r,l);function f(){this.constructor=r}r.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}})(),Hc=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},Vc=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},O2=(function(){function o(r,l){this.name=r,this.track=l}return o.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},o.prototype.apply=function(r){var l={};l[this.name]=r;var f={advanced:[l]};return this.track.applyConstraints(f)},o.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var l=r[this.name];return l}return null},o})(),Ww=(function(o){Lf(r,o);function r(l,f){return o.call(this,l,f)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(l){var f={};f[this.name]=l;var p={advanced:[f]};return this.track.applyConstraints(p)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),f=l[this.name];return{min:f.min,max:f.max,step:f.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(O2),Zw=(function(o){Lf(r,o);function r(l){return o.call(this,"zoom",l)||this}return r})(Ww),Qw=(function(o){Lf(r,o);function r(l){return o.call(this,"torch",l)||this}return r})(O2),Kw=(function(){function o(r){this.track=r}return o.prototype.zoomFeature=function(){return new Zw(this.track)},o.prototype.torchFeature=function(){return new Qw(this.track)},o})(),Jw=(function(){function o(r,l,f){this.isClosed=!1,this.parentElement=r,this.mediaStream=l,this.callbacks=f,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return o.prototype.createVideoElement=function(r){var l=document.createElement("video");return l.style.width="".concat(r,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},o.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var f=r.surface.clientWidth,p=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(f,p),r.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},o.create=function(r,l,f,p){return Hc(this,void 0,void 0,function(){var g,b;return Vc(this,function(S){switch(S.label){case 0:return g=new o(r,l,p),f.aspectRatio?(b={aspectRatio:f.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(b)]):[3,2];case 1:S.sent(),S.label=2;case 2:return g.setupSurface(),[2,g]}})})},o.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},o.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},o.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},o.prototype.resume=function(r){this.failIfClosed();var l=this,f=function(){setTimeout(r,200),l.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.play()},o.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},o.prototype.getSurface=function(){return this.failIfClosed(),this.surface},o.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},o.prototype.applyVideoConstraints=function(r){return Hc(this,void 0,void 0,function(){return Vc(this,function(l){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},o.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(l,f){var p=r.mediaStream.getVideoTracks(),g=p.length,b=0;r.mediaStream.getVideoTracks().forEach(function(S){r.mediaStream.removeTrack(S),S.stop(),++b,b>=g&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),l())})})},o.prototype.getCapabilities=function(){return new Kw(this.getFirstTrackOrFail())},o})(),$w=(function(){function o(r){this.mediaStream=r}return o.prototype.render=function(r,l,f){return Hc(this,void 0,void 0,function(){return Vc(this,function(p){return[2,Jw.create(r,this.mediaStream,l,f)]})})},o.create=function(r){return Hc(this,void 0,void 0,function(){var l,f;return Vc(this,function(p){switch(p.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return f=p.sent(),[2,new o(f)]}})})},o})(),Og=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},Ig=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},ev=(function(){function o(){}return o.failIfNotSupported=function(){return Og(this,void 0,void 0,function(){return Ig(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new o]})})},o.prototype.create=function(r){return Og(this,void 0,void 0,function(){return Ig(this,function(l){return[2,$w.create(r)]})})},o})(),tv=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},nv=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},iv=(function(){function o(){}return o.retrieve=function(){if(navigator.mediaDevices)return o.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?o.getCamerasFromMediaStreamTrack():o.rejectWithError()},o.rejectWithError=function(){var r=Js.unableToQuerySupportedDevices();return o.isHttpsOrLocalhost()||(r=Js.insecureContextCameraQueryError()),Promise.reject(r)},o.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},o.getCamerasFromMediaDevices=function(){return tv(this,void 0,void 0,function(){var r,l,f,p,g,b,S;return nv(this,function(_){switch(_.label){case 0:return r=function(v){for(var N=v.getVideoTracks(),O=0,B=N;O<B.length;O++){var k=B[O];k.enabled=!1,k.stop(),v.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(f=_.sent(),p=[],g=0,b=f;g<b.length;g++)S=b[g],S.kind==="videoinput"&&p.push({id:S.deviceId,label:S.label});return r(l),[2,p]}})})},o.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,l){var f=function(g){for(var b=[],S=0,_=g;S<_.length;S++){var v=_[S];v.kind==="video"&&b.push({id:v.id,label:v.label})}r(b)},p=MediaStreamTrack;p.getSources(f)})},o})(),sn;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.NOT_STARTED=1]="NOT_STARTED",o[o.SCANNING=2]="SCANNING",o[o.PAUSED=3]="PAUSED"})(sn||(sn={}));var rv=(function(){function o(){this.state=sn.NOT_STARTED,this.onGoingTransactionNewState=sn.UNKNOWN}return o.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},o.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},o.prototype.execute=function(){if(this.onGoingTransactionNewState===sn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=sn.UNKNOWN,this.directTransition(r)},o.prototype.cancel=function(){if(this.onGoingTransactionNewState===sn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=sn.UNKNOWN},o.prototype.getState=function(){return this.state},o.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==sn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},o.prototype.validateTransition=function(r){switch(this.state){case sn.UNKNOWN:throw"Transition from unknown is not allowed";case sn.NOT_STARTED:this.failIfNewStateIs(r,[sn.PAUSED]);break;case sn.SCANNING:break;case sn.PAUSED:break}},o.prototype.failIfNewStateIs=function(r,l){for(var f=0,p=l;f<p.length;f++){var g=p[f];if(r===g)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},o})(),av=(function(){function o(r){this.stateManager=r}return o.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},o.prototype.directTransition=function(r){this.stateManager.directTransition(r)},o.prototype.getState=function(){return this.stateManager.getState()},o.prototype.canScanFile=function(){return this.stateManager.getState()===sn.NOT_STARTED},o.prototype.isScanning=function(){return this.stateManager.getState()!==sn.NOT_STARTED},o.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===sn.SCANNING},o.prototype.isPaused=function(){return this.stateManager.getState()===sn.PAUSED},o})(),sv=(function(){function o(){}return o.create=function(){return new av(new rv)},o})(),lv=(function(){var o=function(r,l){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(f[g]=p[g])},o(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");o(r,l);function f(){this.constructor=r}r.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}})(),vi=(function(o){lv(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(Qi),ov=(function(){function o(r,l){this.logger=l,this.fps=vi.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=vi.DEFAULT_DISABLE_FLIP}return o.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?N2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},o.prototype.isShadedBoxEnabled=function(){return!cr(this.qrbox)},o.create=function(r,l){return new o(r,l)},o})(),Rg=(function(){function o(r,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var f;typeof l=="boolean"?this.verbose=l===!0:l&&(f=l,this.verbose=f.verbose===!0,f.experimentalFeatures),this.logger=new T2(this.verbose),this.qrcode=new Xw(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(f),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=sv.create()}return o.prototype.start=function(r,l,f,p){var g=this;if(!r)throw"cameraIdOrConfig is required";if(!f||typeof f!="function")throw"qrCodeSuccessCallback is required and should be a function.";var b;p?b=p:b=this.verbose?this.logger.log:function(){};var S=ov.create(l,this.logger);this.clearElement();var _=!1;S.videoConstraints&&(S.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=_,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:vi.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var O=this,B=this.stateManagerProxy.startTransition(sn.SCANNING);return new Promise(function(k,z){var U=v?S.videoConstraints:O.createVideoConstraints(r);if(!U){B.cancel(),z("videoConstraints should be defined");return}var Y={};(!v||S.aspectRatio)&&(Y.aspectRatio=S.aspectRatio);var J={onRenderSurfaceReady:function(ae,Z){O.setupUi(ae,Z,S),O.isScanning=!0,O.foreverScan(S,f,b)}};ev.failIfNotSupported().then(function(ae){ae.create(U).then(function(Z){return Z.render(g.element,Y,J).then(function(ce){O.renderedCamera=ce,B.execute(),k(null)}).catch(function(ce){B.cancel(),z(ce)})}).catch(function(Z){B.cancel(),z(Js.errorGettingUserMedia(Z))})}).catch(function(ae){B.cancel(),z(Js.cameraStreamingNotSupported())})})},o.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(sn.PAUSED),this.showPausedState(),(cr(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},o.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,l=function(){r.stateManagerProxy.directTransition(sn.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},o.prototype.getState=function(){return this.stateManagerProxy.getState()},o.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(sn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var f=function(){if(r.element){var g=document.getElementById(vi.SHADED_REGION_ELEMENT_ID);g&&r.element.removeChild(g)}},p=this;return this.renderedCamera.close().then(function(){return p.renderedCamera=null,p.element&&(p.element.removeChild(p.canvasElement),p.canvasElement=null),f(),p.qrRegion&&(p.qrRegion=null),p.context&&(p.context=null),l.execute(),p.hidePausedState(),p.isScanning=!1,Promise.resolve()})},o.prototype.scanFile=function(r,l){return this.scanFileV2(r,l).then(function(f){return f.decodedText})},o.prototype.scanFileV2=function(r,l){var f=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(cr(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(p,g){f.possiblyCloseLastScanImageFile(),f.clearElement(),f.lastScanImageFile=URL.createObjectURL(r);var b=new Image;b.onload=function(){var S=b.width,_=b.height,v=document.getElementById(f.elementId),N=v.clientWidth?v.clientWidth:vi.DEFAULT_WIDTH,O=Math.max(v.clientHeight?v.clientHeight:_,vi.FILE_SCAN_MIN_HEIGHT),B=f.computeCanvasDrawConfig(S,_,N,O);if(l){var k=f.createCanvasElement(N,O,"qr-canvas-visible");k.style.display="inline-block",v.appendChild(k);var z=k.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=N,z.canvas.height=O,z.drawImage(b,0,0,S,_,B.x,B.y,B.width,B.height)}var U=vi.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(b.width,B.width),J=Math.max(b.height,B.height),ae=Y+2*U,Z=J+2*U,ce=f.createCanvasElement(ae,Z);v.appendChild(ce);var Ce=ce.getContext("2d");if(!Ce)throw"Unable to get 2d context from canvas";Ce.canvas.width=ae,Ce.canvas.height=Z,Ce.drawImage(b,0,0,S,_,U,U,Y,J);try{f.qrcode.decodeRobustlyAsync(ce).then(function(Ae){p(Eg.createFromQrcodeResult(Ae))}).catch(g)}catch(Ae){g("QR code parse error, error = ".concat(Ae))}},b.onerror=g,b.onabort=g,b.onstalled=g,b.onsuspend=g,b.src=URL.createObjectURL(r)})},o.prototype.clear=function(){this.clearElement()},o.getCameras=function(){return iv.retrieve()},o.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},o.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},o.prototype.applyVideoConstraints=function(r){if(r){if(!N2.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},o.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},o.prototype.getSupportedFormats=function(r){var l=[Oe.QR_CODE,Oe.AZTEC,Oe.CODABAR,Oe.CODE_39,Oe.CODE_93,Oe.CODE_128,Oe.DATA_MATRIX,Oe.MAXICODE,Oe.ITF,Oe.EAN_13,Oe.EAN_8,Oe.PDF_417,Oe.RSS_14,Oe.RSS_EXPANDED,Oe.UPC_A,Oe.UPC_E,Oe.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return l;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var f=[],p=0,g=r.formatsToSupport;p<g.length;p++){var b=g[p];Pw(b)?f.push(b):this.logger.warn("Invalid format: ".concat(b," passed in config, ignoring."))}if(f.length===0)throw"None of formatsToSupport match supported values.";return f},o.prototype.getUseBarCodeDetectorIfSupported=function(r){if(cr(r))return!0;if(!cr(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(cr(r.experimentalFeatures))return!0;var l=r.experimentalFeatures;return cr(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},o.prototype.validateQrboxSize=function(r,l,f){var p=this,g=f.qrbox;this.validateQrboxConfig(g);var b=this.toQrdimensions(r,l,g),S=function(v){if(v<vi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(vi.MIN_QR_BOX_SIZE,"px.")},_=function(v){return v>r&&(p.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=r),v};S(b.width),S(b.height),b.width=_(b.width)},o.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},o.prototype.toQrdimensions=function(r,l,f){if(typeof f=="number")return{width:f,height:f};if(typeof f=="function")try{return f(r,l)}catch(p){throw new Error("qrbox config was passed as a function but it failed with unknown error"+p)}return f},o.prototype.setupUi=function(r,l,f){f.isShadedBoxEnabled()&&this.validateQrboxSize(r,l,f);var p=cr(f.qrbox)?{width:r,height:l}:f.qrbox;this.validateQrboxConfig(p);var g=this.toQrdimensions(r,l,p);g.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var b=f.isShadedBoxEnabled()&&g.height<=l,S={x:0,y:0,width:r,height:l},_=b?this.getShadedRegionBounds(r,l,g):S,v=this.createCanvasElement(_.width,_.height),N={willReadFrequently:!0},O=v.getContext("2d",N);O.canvas.width=_.width,O.canvas.height=_.height,this.element.append(v),b&&this.possiblyInsertShadingElement(this.element,r,l,g),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=O,this.canvasElement=v},o.prototype.createScannerPausedUiElement=function(r){var l=document.createElement("div");l.innerText=Js.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",r.appendChild(l),this.scannerPausedUiElement=l},o.prototype.scanContext=function(r,l){var f=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(p){return r(p.text,Eg.createFromQrcodeResult(p)),f.possiblyUpdateShaders(!0),!0}).catch(function(p){f.possiblyUpdateShaders(!1);var g=Js.codeParseError(p);return l(g,C2.createFrom(g)),!1})},o.prototype.foreverScan=function(r,l,f){var p=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),b=g.videoWidth/g.clientWidth,S=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*b,v=this.qrRegion.height*S,N=this.qrRegion.x*b,O=this.qrRegion.y*S;this.context.drawImage(g,N,O,_,v,0,0,this.qrRegion.width,this.qrRegion.height);var B=function(){p.foreverScanTimeout=setTimeout(function(){p.foreverScan(r,l,f)},p.getTimeoutFps(r.fps))};this.scanContext(l,f).then(function(k){!k&&r.disableFlip!==!0?(p.context.translate(p.context.canvas.width,0),p.context.scale(-1,1),p.scanContext(l,f).finally(function(){B()})):B()}).catch(function(k){p.logger.logError("Error happend while scanning context",k),B()})}},o.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var l="facingMode",f="deviceId",p={user:!0,environment:!0},g="exact",b=function(z){if(z in p)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},S=Object.keys(r);if(S.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(S.length," keys");var _=Object.keys(r)[0];if(_!==l&&_!==f)throw"Only '".concat(l,"' and '").concat(f,"' ")+" are supported for 'cameraIdOrConfig'";if(_===l){var v=r.facingMode;if(typeof v=="string"){if(b(v))return{facingMode:v}}else if(typeof v=="object")if(g in v){if(b(v["".concat(g)]))return{facingMode:{exact:v["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var N=typeof v;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var O=r.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(g in O)return{deviceId:{exact:O["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var B=typeof O;throw"Invalid type of 'deviceId' = ".concat(B)}}}var k=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},o.prototype.computeCanvasDrawConfig=function(r,l,f,p){if(r<=f&&l<=p){var g=(f-r)/2,b=(p-l)/2;return{x:g,y:b,width:r,height:l}}else{var S=r,_=l;return r>f&&(l=f/r*l,r=f),l>p&&(r=p/l*r,l=p),this.logger.log("Image downsampled from "+"".concat(S,"X").concat(_)+" to ".concat(r,"X").concat(l,".")),this.computeCanvasDrawConfig(r,l,f,p)}},o.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},o.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=r?vi.BORDER_SHADER_MATCH_COLOR:vi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},o.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},o.prototype.createCanvasElement=function(r,l,f){var p=r,g=l,b=document.createElement("canvas");return b.style.width="".concat(p,"px"),b.style.height="".concat(g,"px"),b.style.display="none",b.id=cr(f)?"qr-canvas":f,b},o.prototype.getShadedRegionBounds=function(r,l,f){if(f.width>r||f.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-f.width)/2,y:(l-f.height)/2,width:f.width,height:f.height}},o.prototype.possiblyInsertShadingElement=function(r,l,f,p){if(!(l-p.width<1||f-p.height<1)){var g=document.createElement("div");g.style.position="absolute";var b=(l-p.width)/2,S=(f-p.height)/2;if(g.style.borderLeft="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(vi.SHADED_REGION_ELEMENT_ID),l-p.width<11||f-p.height<11)this.hasBorderShaders=!1;else{var _=5,v=40;this.insertShaderBorders(g,v,_,-_,null,0,!0),this.insertShaderBorders(g,v,_,-_,null,0,!1),this.insertShaderBorders(g,v,_,null,-_,0,!0),this.insertShaderBorders(g,v,_,null,-_,0,!1),this.insertShaderBorders(g,_,v+_,-_,null,-_,!0),this.insertShaderBorders(g,_,v+_,null,-_,-_,!0),this.insertShaderBorders(g,_,v+_,-_,null,-_,!1),this.insertShaderBorders(g,_,v+_,null,-_,-_,!1),this.hasBorderShaders=!0}r.append(g)}},o.prototype.insertShaderBorders=function(r,l,f,p,g,b,S){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=vi.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(l,"px"),_.style.height="".concat(f,"px"),p!==null&&(_.style.top="".concat(p,"px")),g!==null&&(_.style.bottom="".concat(g,"px")),S?_.style.left="".concat(b,"px"):_.style.right="".concat(b,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),r.appendChild(_)},o.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},o.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},o.prototype.getTimeoutFps=function(r){return 1e3/r},o})(),kf="data:image/svg+xml;base64,",cv=kf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",uv=kf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Dg=kf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",hv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Mg=(function(){function o(){}return o.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},o})(),fv=(function(){function o(){this.data=Mg.createDefault();var r=localStorage.getItem(o.LOCAL_STORAGE_KEY);r?this.data=JSON.parse(r):this.reset()}return o.prototype.hasCameraPermissions=function(){return this.data.hasPermission},o.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},o.prototype.setHasPermission=function(r){this.data.hasPermission=r,this.flush()},o.prototype.setLastUsedCameraId=function(r){this.data.lastUsedCameraId=r,this.flush()},o.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},o.prototype.reset=function(){this.data=Mg.createDefault(),this.flush()},o.prototype.flush=function(){localStorage.setItem(o.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},o.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",o})(),dv=(function(){function o(){this.infoDiv=document.createElement("div")}return o.prototype.renderInto=function(r){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Ag.poweredBy();var l=document.createElement("a");l.innerText="ScanApp",l.href="https://scanapp.org",l.target="new",l.style.color="white",this.infoDiv.appendChild(l);var f=document.createElement("br"),p=document.createElement("br");this.infoDiv.appendChild(f),this.infoDiv.appendChild(p);var g=document.createElement("a");g.innerText=Ag.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),r.appendChild(this.infoDiv)},o.prototype.show=function(){this.infoDiv.style.display="block"},o.prototype.hide=function(){this.infoDiv.style.display="none"},o})(),gv=(function(){function o(r,l){this.isShowingInfoIcon=!0,this.onTapIn=r,this.onTapOut=l,this.infoIcon=document.createElement("img")}return o.prototype.renderInto=function(r){var l=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Dg,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(f){return l.onHoverIn()},this.infoIcon.onmouseout=function(f){return l.onHoverOut()},this.infoIcon.onclick=function(f){return l.onClick()},r.appendChild(this.infoIcon)},o.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},o.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},o.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=hv,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Dg,this.infoIcon.style.opacity="0.6")},o})(),mv=(function(){function o(){var r=this;this.infoDiv=new dv,this.infoIcon=new gv(function(){r.infoDiv.show()},function(){r.infoDiv.hide()})}return o.prototype.renderInto=function(r){this.infoDiv.renderInto(r),this.infoIcon.renderInto(r)},o})(),pv=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},xv=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Bg=(function(){function o(){}return o.hasPermissions=function(){return pv(this,void 0,void 0,function(){var r,l,f,p;return xv(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(r=g.sent(),l=0,f=r;l<f.length;l++)if(p=f[l],p.kind==="videoinput"&&p.label)return[2,!0];return[2,!1]}})})},o})(),va=(function(){function o(r){this.supportedScanTypes=this.validateAndReturnScanTypes(r)}return o.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},o.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},o.prototype.isCameraScanRequired=function(){for(var r=0,l=this.supportedScanTypes;r<l.length;r++){var f=l[r];if(o.isCameraScanType(f))return!0}return!1},o.isCameraScanType=function(r){return r===Aa.SCAN_TYPE_CAMERA},o.isFileScanType=function(r){return r===Aa.SCAN_TYPE_FILE},o.prototype.validateAndReturnScanTypes=function(r){if(!r||r.length===0)return Qi.DEFAULT_SUPPORTED_SCAN_TYPE;var l=Qi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(r.length>l)throw"Max ".concat(l," values expected for ")+"supportedScanTypes";for(var f=0,p=r;f<p.length;f++){var g=p[f];if(!Qi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return r},o})(),Ai=(function(){function o(){}return o.ALL_ELEMENT_CLASS="html5-qrcode-element",o.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",o.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",o.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",o.TORCH_BUTTON_ID="html5-qrcode-button-torch",o.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",o.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",o.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",o.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",o.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",o.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",o})(),Br=(function(){function o(){}return o.createElement=function(r,l){var f=document.createElement(r);return f.id=l,f.classList.add(Ai.ALL_ELEMENT_CLASS),r==="button"&&f.setAttribute("type","button"),f},o})(),I2=function(o,r,l,f){function p(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function S(N){try{v(f.next(N))}catch(O){b(O)}}function _(N){try{v(f.throw(N))}catch(O){b(O)}}function v(N){N.done?g(N.value):p(N.value).then(S,_)}v((f=f.apply(o,r||[])).next())})},R2=function(o,r){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,p,g,b;return b={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function S(v){return function(N){return _([v,N])}}function _(v){if(f)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(f=1,p&&(g=v[0]&2?p.return:v[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,v[1])).done)return g;switch(p=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,p=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=r.call(o,l)}catch(N){v=[6,N],p=0}finally{f=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Lg=(function(){function o(r,l,f){this.isTorchOn=!1,this.torchCapability=r,this.buttonController=l,this.onTorchActionFailureCallback=f}return o.prototype.isTorchEnabled=function(){return this.isTorchOn},o.prototype.flipState=function(){return I2(this,void 0,void 0,function(){var r,l;return R2(this,function(f){switch(f.label){case 0:this.buttonController.disable(),r=!this.isTorchOn,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.torchCapability.apply(r)];case 2:return f.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),r),[3,4];case 3:return l=f.sent(),this.propagateFailure(r,l),this.buttonController.enable(),[3,4];case 4:return[2]}})})},o.prototype.updateUiBasedOnLatestSettings=function(r,l){r===l?(this.buttonController.setText(l?Mt.torchOffButton():Mt.torchOnButton()),this.isTorchOn=l):this.propagateFailure(l),this.buttonController.enable()},o.prototype.propagateFailure=function(r,l){var f=r?Mt.torchOnFailedMessage():Mt.torchOffFailedMessage();l&&(f+="; Error = "+l),this.onTorchActionFailureCallback(f)},o.prototype.reset=function(){this.isTorchOn=!1},o})(),yv=(function(){function o(r,l){this.onTorchActionFailureCallback=l,this.torchButton=Br.createElement("button",Ai.TORCH_BUTTON_ID),this.torchController=new Lg(r,this,l)}return o.prototype.render=function(r,l){var f=this;this.torchButton.innerText=Mt.torchOnButton(),this.torchButton.style.display=l.display,this.torchButton.style.marginLeft=l.marginLeft;var p=this;this.torchButton.addEventListener("click",function(g){return I2(f,void 0,void 0,function(){return R2(this,function(b){switch(b.label){case 0:return[4,p.torchController.flipState()];case 1:return b.sent(),p.torchController.isTorchEnabled()?(p.torchButton.classList.remove(Ai.TORCH_BUTTON_CLASS_TORCH_OFF),p.torchButton.classList.add(Ai.TORCH_BUTTON_CLASS_TORCH_ON)):(p.torchButton.classList.remove(Ai.TORCH_BUTTON_CLASS_TORCH_ON),p.torchButton.classList.add(Ai.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),r.appendChild(this.torchButton)},o.prototype.updateTorchCapability=function(r){this.torchController=new Lg(r,this,this.onTorchActionFailureCallback)},o.prototype.getTorchButton=function(){return this.torchButton},o.prototype.hide=function(){this.torchButton.style.display="none"},o.prototype.show=function(){this.torchButton.style.display="inline-block"},o.prototype.disable=function(){this.torchButton.disabled=!0},o.prototype.enable=function(){this.torchButton.disabled=!1},o.prototype.setText=function(r){this.torchButton.innerText=r},o.prototype.reset=function(){this.torchButton.innerText=Mt.torchOnButton(),this.torchController.reset()},o.create=function(r,l,f,p){var g=new o(l,p);return g.render(r,f),g},o})(),wv=(function(){function o(r,l,f){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=l?"block":"none",r.appendChild(this.fileBasedScanRegion);var p=document.createElement("label");p.setAttribute("for",this.getFileScanInputId()),p.style.display="inline-block",this.fileBasedScanRegion.appendChild(p),this.fileSelectionButton=Br.createElement("button",Ai.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(S){p.click()}),p.append(this.fileSelectionButton),this.fileScanInput=Br.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",p.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(S){if(!(S==null||S.target==null)){var _=S.target;if(!(_.files&&_.files.length===0)){var v=_.files,N=v[0],O=N.name;g.setImageNameToButton(O),f(N)}}});var b=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(b),this.fileBasedScanRegion.addEventListener("dragenter",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(S){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(S){S.stopPropagation(),S.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var _=S.dataTransfer;if(_){var v=_.files;if(!v||v.length===0)return;for(var N=!1,O=0;O<v.length;++O){var B=v.item(O);if(B){var k=/image.*/;if(B.type.match(k)){N=!0;var z=B.name;g.setImageNameToButton(z),f(B),b.innerText=Mt.dragAndDropMessage();break}}}N||(b.innerText=Mt.dragAndDropMessageOnlyImages())}})}return o.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},o.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},o.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},o.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},o.prototype.createFileBasedScanRegion=function(){var r=document.createElement("div");return r.style.textAlign="center",r.style.margin="auto",r.style.width="80%",r.style.maxWidth="600px",r.style.border=this.fileBasedScanRegionDefaultBorder(),r.style.padding="10px",r.style.marginBottom="10px",r},o.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},o.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},o.prototype.createDragAndDropMessage=function(){var r=document.createElement("div");return r.innerText=Mt.dragAndDropMessage(),r.style.fontWeight="400",r},o.prototype.setImageNameToButton=function(r){var l=20;if(r.length>l){var f=r.substring(0,8),p=r.length,g=r.substring(p-8,p);r="".concat(f,"....").concat(g)}var b=Mt.fileSelectionChooseAnother()+" - "+r;this.fileSelectionButton.innerText=b},o.prototype.setInitialValueToButton=function(){var r=Mt.fileSelectionChooseImage()+" - "+Mt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=r},o.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},o.create=function(r,l,f){var p=new o(r,l,f);return p},o})(),vv=(function(){function o(r){this.selectElement=Br.createElement("select",Ai.CAMERA_SELECTION_SELECT_ID),this.cameras=r,this.options=[]}return o.prototype.render=function(r){var l=document.createElement("span");l.style.marginRight="10px";var f=this.cameras.length;if(f===0)throw new Error("No cameras found");if(f===1)l.style.display="none";else{var p=Mt.selectCamera();l.innerText="".concat(p," (").concat(this.cameras.length,")  ")}for(var g=1,b=0,S=this.cameras;b<S.length;b++){var _=S[b],v=_.id,N=_.label==null?v:_.label;(!N||N==="")&&(N=[Mt.anonymousCameraPrefix(),g++].join(" "));var O=document.createElement("option");O.value=v,O.innerText=N,this.options.push(O),this.selectElement.appendChild(O)}l.appendChild(this.selectElement),r.appendChild(l)},o.prototype.disable=function(){this.selectElement.disabled=!0},o.prototype.isDisabled=function(){return this.selectElement.disabled===!0},o.prototype.enable=function(){this.selectElement.disabled=!1},o.prototype.getValue=function(){return this.selectElement.value},o.prototype.hasValue=function(r){for(var l=0,f=this.options;l<f.length;l++){var p=f[l];if(p.value===r)return!0}return!1},o.prototype.setValue=function(r){if(!this.hasValue(r))throw new Error("".concat(r," is not present in the camera list."));this.selectElement.value=r},o.prototype.hasSingleItem=function(){return this.cameras.length===1},o.prototype.numCameras=function(){return this.cameras.length},o.create=function(r,l){var f=new o(l);return f.render(r),f},o})(),bv=(function(){function o(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Br.createElement("input",Ai.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return o.prototype.render=function(r,l){this.zoomElementContainer.style.display=l?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",r.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var f=Mt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(f),this.rangeText.style.marginRight="10px";var p=this;this.rangeInput.addEventListener("input",function(){return p.onValueChange()}),this.rangeInput.addEventListener("change",function(){return p.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},o.prototype.onValueChange=function(){var r=Mt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},o.prototype.setValues=function(r,l,f,p){this.rangeInput.min=r.toString(),this.rangeInput.max=l.toString(),this.rangeInput.step=p.toString(),this.rangeInput.value=f.toString(),this.onValueChange()},o.prototype.show=function(){this.zoomElementContainer.style.display="block"},o.prototype.hide=function(){this.zoomElementContainer.style.display="none"},o.prototype.setOnCameraZoomValueChangeCallback=function(r){this.onChangeCallback=r},o.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},o.create=function(r,l){var f=new o;return f.render(r,l),f},o})(),bi;(function(o){o[o.STATUS_DEFAULT=0]="STATUS_DEFAULT",o[o.STATUS_SUCCESS=1]="STATUS_SUCCESS",o[o.STATUS_WARNING=2]="STATUS_WARNING",o[o.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(bi||(bi={}));function Ev(o){return{fps:o.fps,qrbox:o.qrbox,aspectRatio:o.aspectRatio,disableFlip:o.disableFlip,videoConstraints:o.videoConstraints}}function Av(o,r){return{formatsToSupport:o.formatsToSupport,useBarCodeDetectorIfSupported:o.useBarCodeDetectorIfSupported,experimentalFeatures:o.experimentalFeatures,verbose:r}}var Sv=(function(){function o(r,l,f){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=r,this.config=this.createConfig(l),this.verbose=f===!0,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.scanTypeSelector=new va(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new T2(this.verbose),this.persistedDataManager=new fv,l.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return o.prototype.render=function(r,l){var f=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,b){if(r)r(g,b);else{if(f.lastMatchFound===g)return;f.lastMatchFound=g,f.setHeaderMessage(Mt.lastMatch(g),bi.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,b){l&&l(g,b)};var p=document.getElementById(this.elementId);if(!p)throw"HTML Element with id=".concat(this.elementId," not found");p.innerHTML="",this.createBasicLayout(p),this.html5Qrcode=new Rg(this.getScanRegionId(),Av(this.config,this.verbose))},o.prototype.pause=function(r){(cr(r)||r!==!0)&&(r=!1),this.getHtml5QrcodeOrFail().pause(r)},o.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},o.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},o.prototype.clear=function(){var r=this,l=function(){var f=document.getElementById(r.elementId);f&&(f.innerHTML="",r.resetBasicLayout(f))};return this.html5Qrcode?new Promise(function(f,p){if(!r.html5Qrcode){f();return}r.html5Qrcode.isScanning?r.html5Qrcode.stop().then(function(g){if(!r.html5Qrcode){f();return}r.html5Qrcode.clear(),l(),f()}).catch(function(g){r.verbose&&r.logger.logError("Unable to stop qrcode scanner",g),p(g)}):(r.html5Qrcode.clear(),l(),f())}):Promise.resolve()},o.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},o.prototype.applyVideoConstraints=function(r){return this.getHtml5QrcodeOrFail().applyVideoConstraints(r)},o.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},o.prototype.createConfig=function(r){return r?(r.fps||(r.fps=Qi.SCAN_DEFAULT_FPS),r.rememberLastUsedCamera!==!Qi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(r.rememberLastUsedCamera=Qi.DEFAULT_REMEMBER_LAST_CAMERA_USED),r.supportedScanTypes||(r.supportedScanTypes=Qi.DEFAULT_SUPPORTED_SCAN_TYPE),r):{fps:Qi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Qi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Qi.DEFAULT_SUPPORTED_SCAN_TYPE}},o.prototype.createBasicLayout=function(r){r.style.position="relative",r.style.padding="0px",r.style.border="1px solid silver",this.createHeader(r);var l=document.createElement("div"),f=this.getScanRegionId();l.id=f,l.style.width="100%",l.style.minHeight="100px",l.style.textAlign="center",r.appendChild(l),va.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var p=document.createElement("div"),g=this.getDashboardId();p.id=g,p.style.width="100%",r.appendChild(p),this.setupInitialDashboard(p)},o.prototype.resetBasicLayout=function(r){r.style.border="none"},o.prototype.setupInitialDashboard=function(r){this.createSection(r),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},o.prototype.createHeader=function(r){var l=document.createElement("div");l.style.textAlign="left",l.style.margin="0px",r.appendChild(l);var f=new mv;f.renderInto(l);var p=document.createElement("div");p.id=this.getHeaderMessageContainerId(),p.style.display="none",p.style.textAlign="center",p.style.fontSize="14px",p.style.padding="2px 10px",p.style.margin="4px",p.style.borderTop="1px solid #f6f6f6",l.appendChild(p)},o.prototype.createSection=function(r){var l=document.createElement("div");l.id=this.getDashboardSectionId(),l.style.width="100%",l.style.padding="10px 0px 10px 0px",l.style.textAlign="left",r.appendChild(l)},o.prototype.createCameraListUi=function(r,l,f){var p=this;p.showHideScanTypeSwapLink(!1),p.setHeaderMessage(Mt.cameraPermissionRequesting());var g=function(){f||p.createPermissionButton(r,l)};Rg.getCameras().then(function(b){p.persistedDataManager.setHasPermission(!0),p.showHideScanTypeSwapLink(!0),p.resetHeaderMessage(),b&&b.length>0?(r.removeChild(l),p.renderCameraSelection(b)):(p.setHeaderMessage(Mt.noCameraFound(),bi.STATUS_WARNING),g())}).catch(function(b){p.persistedDataManager.setHasPermission(!1),f?f.disabled=!1:g(),p.setHeaderMessage(b,bi.STATUS_WARNING),p.showHideScanTypeSwapLink(!0)})},o.prototype.createPermissionButton=function(r,l){var f=this,p=Br.createElement("button",this.getCameraPermissionButtonId());p.innerText=Mt.cameraPermissionTitle(),p.addEventListener("click",function(){p.disabled=!0,f.createCameraListUi(r,l,p)}),l.appendChild(p)},o.prototype.createPermissionsUi=function(r,l){var f=this;if(va.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Bg.hasPermissions().then(function(p){p?f.createCameraListUi(r,l):(f.persistedDataManager.setHasPermission(!1),f.createPermissionButton(r,l))}).catch(function(p){f.persistedDataManager.setHasPermission(!1),f.createPermissionButton(r,l)});return}this.createPermissionButton(r,l)},o.prototype.createSectionControlPanel=function(){var r=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");r.appendChild(l);var f=document.createElement("div");f.id=this.getDashboardSectionCameraScanRegionId(),f.style.display=va.isCameraScanType(this.currentScanType)?"block":"none",l.appendChild(f);var p=document.createElement("div");p.style.textAlign="center",f.appendChild(p),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(f,p),this.renderFileScanUi(l)},o.prototype.renderFileScanUi=function(r){var l=va.isFileScanType(this.currentScanType),f=this,p=function(g){if(!f.html5Qrcode)throw"html5Qrcode not defined";va.isFileScanType(f.currentScanType)&&(f.setHeaderMessage(Mt.loadingImage()),f.html5Qrcode.scanFileV2(g,!0).then(function(b){f.resetHeaderMessage(),f.qrCodeSuccessCallback(b.decodedText,b)}).catch(function(b){f.setHeaderMessage(b,bi.STATUS_WARNING),f.qrCodeErrorCallback(b,C2.createFrom(b))}))};this.fileSelectionUi=wv.create(r,l,p)},o.prototype.renderCameraSelection=function(r){var l=this,f=this,p=document.getElementById(this.getDashboardSectionCameraScanRegionId());p.style.textAlign="center";var g=bv.create(p,!1),b=function(U){var Y=U.zoomFeature();if(Y.isSupported()){g.setOnCameraZoomValueChangeCallback(function(ae){Y.apply(ae)});var J=1;l.config.defaultZoomValueIfSupported&&(J=l.config.defaultZoomValueIfSupported),J=Fw(J,Y.min(),Y.max()),g.setValues(Y.min(),Y.max(),J,Y.step()),g.show()}},S=vv.create(p,r),_=document.createElement("span"),v=Br.createElement("button",Ai.CAMERA_START_BUTTON_ID);v.innerText=Mt.scanButtonStartScanningText(),_.appendChild(v);var N=Br.createElement("button",Ai.CAMERA_STOP_BUTTON_ID);N.innerText=Mt.scanButtonStopScanningText(),N.style.display="none",N.disabled=!0,_.appendChild(N);var O,B=function(U){if(!U.torchFeature().isSupported()){O&&O.hide();return}O?O.updateTorchCapability(U.torchFeature()):O=yv.create(_,U.torchFeature(),{display:"none",marginLeft:"5px"},function(Y){f.setHeaderMessage(Y,bi.STATUS_WARNING)}),O.show()};p.appendChild(_);var k=function(U){U||(v.style.display="none"),v.innerText=Mt.scanButtonStartScanningText(),v.style.opacity="1",v.disabled=!1,U&&(v.style.display="inline-block")};if(v.addEventListener("click",function(U){v.innerText=Mt.scanButtonScanningStarting(),S.disable(),v.disabled=!0,v.style.opacity="0.5",l.scanTypeSelector.hasMoreThanOneScanType()&&f.showHideScanTypeSwapLink(!1),f.resetHeaderMessage();var Y=S.getValue();f.persistedDataManager.setLastUsedCameraId(Y),f.html5Qrcode.start(Y,Ev(f.config),f.qrCodeSuccessCallback,f.qrCodeErrorCallback).then(function(J){N.disabled=!1,N.style.display="inline-block",k(!1);var ae=f.html5Qrcode.getRunningTrackCameraCapabilities();l.config.showTorchButtonIfSupported===!0&&B(ae),l.config.showZoomSliderIfSupported===!0&&b(ae)}).catch(function(J){f.showHideScanTypeSwapLink(!0),S.enable(),k(!0),f.setHeaderMessage(J,bi.STATUS_WARNING)})}),S.hasSingleItem()&&v.click(),N.addEventListener("click",function(U){if(!f.html5Qrcode)throw"html5Qrcode not defined";N.disabled=!0,f.html5Qrcode.stop().then(function(Y){l.scanTypeSelector.hasMoreThanOneScanType()&&f.showHideScanTypeSwapLink(!0),S.enable(),v.disabled=!1,N.style.display="none",v.style.display="inline-block",O&&(O.reset(),O.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),f.insertCameraScanImageToScanRegion()}).catch(function(Y){N.disabled=!1,f.setHeaderMessage(Y,bi.STATUS_WARNING)})}),f.persistedDataManager.getLastUsedCameraId()){var z=f.persistedDataManager.getLastUsedCameraId();S.hasValue(z)?(S.setValue(z),v.click()):f.persistedDataManager.resetLastUsedCameraId()}},o.prototype.createSectionSwap=function(){var r=this,l=Mt.textIfCameraScanSelected(),f=Mt.textIfFileScanSelected(),p=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var b=Br.createElement("span",this.getDashboardSectionSwapLinkId());b.style.textDecoration="underline",b.style.cursor="pointer",b.innerText=va.isCameraScanType(this.currentScanType)?l:f,b.addEventListener("click",function(){if(!r.sectionSwapAllowed){r.verbose&&r.logger.logError("Section swap called when not allowed");return}r.resetHeaderMessage(),r.fileSelectionUi.resetValue(),r.sectionSwapAllowed=!1,va.isCameraScanType(r.currentScanType)?(r.clearScanRegion(),r.getCameraScanRegion().style.display="none",r.fileSelectionUi.show(),b.innerText=f,r.currentScanType=Aa.SCAN_TYPE_FILE,r.insertFileScanImageToScanRegion()):(r.clearScanRegion(),r.getCameraScanRegion().style.display="block",r.fileSelectionUi.hide(),b.innerText=l,r.currentScanType=Aa.SCAN_TYPE_CAMERA,r.insertCameraScanImageToScanRegion(),r.startCameraScanIfPermissionExistsOnSwap()),r.sectionSwapAllowed=!0}),g.appendChild(b),p.appendChild(g)},o.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var r=this,l=this;if(this.persistedDataManager.hasCameraPermissions()){Bg.hasPermissions().then(function(f){if(f){var p=document.getElementById(l.getCameraPermissionButtonId());if(!p)throw r.logger.logError("Permission button not found, fail;"),"Permission button not found";p.click()}else l.persistedDataManager.setHasPermission(!1)}).catch(function(f){l.persistedDataManager.setHasPermission(!1)});return}},o.prototype.resetHeaderMessage=function(){var r=document.getElementById(this.getHeaderMessageContainerId());r.style.display="none"},o.prototype.setHeaderMessage=function(r,l){l||(l=bi.STATUS_DEFAULT);var f=this.getHeaderMessageDiv();switch(f.innerText=r,f.style.display="block",l){case bi.STATUS_SUCCESS:f.style.background="rgba(106, 175, 80, 0.26)",f.style.color="#477735";break;case bi.STATUS_WARNING:f.style.background="rgba(203, 36, 49, 0.14)",f.style.color="#cb2431";break;case bi.STATUS_DEFAULT:default:f.style.background="rgba(0, 0, 0, 0)",f.style.color="rgb(17, 17, 17)";break}},o.prototype.showHideScanTypeSwapLink=function(r){this.scanTypeSelector.hasMoreThanOneScanType()&&(r!==!0&&(r=!1),this.sectionSwapAllowed=r,this.getDashboardSectionSwapLink().style.display=r?"inline-block":"none")},o.prototype.insertCameraScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){l.innerHTML="<br>",l.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(f){l.innerHTML="<br>",l.appendChild(r.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=cv,this.cameraScanImage.alt=Mt.cameraScanAltText()},o.prototype.insertFileScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.fileScanImage){l.innerHTML="<br>",l.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(f){l.innerHTML="<br>",l.appendChild(r.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=uv,this.fileScanImage.alt=Mt.fileScanAltText()},o.prototype.clearScanRegion=function(){var r=document.getElementById(this.getScanRegionId());r.innerHTML=""},o.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},o.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},o.prototype.getDashboardSectionSwapLinkId=function(){return Ai.SCAN_TYPE_CHANGE_ANCHOR_ID},o.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},o.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},o.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},o.prototype.getCameraPermissionButtonId=function(){return Ai.CAMERA_PERMISSION_BUTTON_ID},o.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},o.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},o.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},o})();function _v(){const[o,r]=me.useState([]),[l,f]=me.useState(0);me.useEffect(()=>{p()},[]);async function p(){try{if(!Xe)return;const{data:g,error:b}=await Xe.from("attendance").select("date").eq("status","PRESENT").order("date",{ascending:!0});if(b)throw b;const S={};g.forEach(B=>{S[B.date]=(S[B.date]||0)+1});const N=Object.keys(S).sort((B,k)=>new Date(B)-new Date(k)).slice(-5).map(B=>({date:B,count:S[B],label:new Date(B).toLocaleDateString(void 0,{month:"short",day:"numeric"})})),O=Math.max(...N.map(B=>B.count),1);r(N),f(O)}catch(g){console.error(g)}}return o.length===0?null:A.jsxs("div",{className:"chart-card fade-in",children:[A.jsxs("div",{className:"chart-header",children:[A.jsx(sw,{size:16}),A.jsx("span",{children:"Attendance Trend"})]}),A.jsx("div",{className:"chart-container",children:o.map(g=>A.jsxs("div",{className:"chart-bar-group",children:[A.jsx("span",{className:"chart-value",children:g.count}),A.jsx("div",{className:"chart-bar",style:{height:"100%"},children:A.jsx("div",{style:{height:`${g.count/l*100}%`,background:"var(--primary)",borderRadius:"6px 6px 0 0",width:"100%",position:"absolute",bottom:0,transition:"height 1s ease-out"}})}),A.jsx("span",{className:"chart-label",children:g.label})]},g.date))})]})}function Cv(){const[o,r]=me.useState([]);me.useEffect(()=>{l()},[]);async function l(){try{if(!Xe)return;const{data:f,error:p}=await Xe.from("students").select("*");if(p)throw p;const g=new Date().getMonth(),b=f.filter(S=>S.birthday?new Date(S.birthday).getMonth()===g:!1).sort((S,_)=>new Date(S.birthday).getDate()-new Date(_.birthday).getDate());r(b)}catch(f){console.error(f)}}return o.length===0?null:A.jsxs("div",{className:"birthday-card fade-in",children:[A.jsxs("div",{className:"birthday-header",children:[A.jsx(xw,{size:18}),A.jsx("span",{children:"Birthdays this Month"})]}),A.jsx("div",{className:"birthday-list",children:o.map(f=>A.jsxs("div",{className:"birthday-item",children:[A.jsx("div",{className:"birthday-name",children:f.nickname||f.full_name.split(" ")[0]}),A.jsx("div",{className:"birthday-date",children:new Date(f.birthday).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]},f.id))})]})}function Tv({student:o,onClose:r}){return A.jsx("div",{className:"modal-overlay fade-in",children:A.jsxs("div",{className:"modal-content",style:{textAlign:"center"},children:[A.jsx("div",{style:{background:"#ECFDF5",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:A.jsx(tl,{size:48,color:"#10B981"})}),A.jsx("h2",{children:"Welcome Back!"}),A.jsxs("p",{style:{fontSize:"18px",margin:"8px 0 24px"},children:[A.jsx("strong",{children:o.full_name})," is marked present."]}),A.jsx("button",{onClick:r,className:"btn full-width",style:{marginTop:"16px"},children:"OK, Next"})]})})}function kg({onNavigate:o}){const{user:r,logout:l}=Sa(),[f,p]=me.useState(!1),[g,b]=me.useState(null);return me.useEffect(()=>{if(f){const S=new Sv("reader",{fps:10,qrbox:250},!1);return S.render(async _=>{try{if(S.clear(),p(!1),!Xe)return;const{data:v,error:N}=await Xe.from("students").select("*").eq("id",_).single();if(N||!v){alert("Invalid QR Code or Student not found!");return}const O=new Date().toISOString().split("T")[0],{error:B}=await Xe.from("attendance").upsert({student_id:v.id,date:O,status:"PRESENT"},{onConflict:"student_id, date"});if(B)throw B;b(v)}catch(v){console.error(v),alert("Error marking attendance: "+v.message)}},_=>{}),()=>{try{S.clear()}catch{}}}},[f]),A.jsxs("div",{className:"page fade-in",children:[g&&A.jsx(Tv,{student:g,onClose:()=>b(null)}),f&&A.jsx("div",{className:"modal-overlay",style:{zIndex:999},children:A.jsxs("div",{className:"modal-content",style:{padding:"20px",overflow:"hidden"},children:[A.jsx("button",{onClick:()=>p(!1),style:{position:"absolute",top:10,right:10,zIndex:1e3,background:"#F3F4F6",color:"#000",border:"none",borderRadius:"50%",width:32,height:32},children:"X"}),A.jsx("h3",{style:{marginBottom:"16px",textAlign:"center"},children:"Scan QR Code"}),A.jsx("div",{id:"reader",style:{width:"100%",borderRadius:"12px",overflow:"hidden"}}),A.jsx("p",{style:{textAlign:"center",color:"#6B7280",padding:"10px",fontSize:"13px"},children:"Point camera at Student QR"})]})}),A.jsxs("header",{className:"home-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px"},children:[A.jsxs("div",{children:[A.jsxs("h1",{children:["Hello, ",r?.username||"User","!"]}),A.jsx("p",{style:{fontSize:"12px",opacity:.8},children:r?.full_name})]}),A.jsxs("div",{style:{display:"flex",gap:"8px"},children:[A.jsxs("button",{onClick:()=>p(!0),style:{background:"#10B981",border:"none",color:"#fff",padding:"8px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[A.jsx(E2,{size:20})," ",A.jsx("span",{style:{fontSize:"12px",fontWeight:"bold"},children:"SCAN"})]}),A.jsx("button",{onClick:()=>o("info"),style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer"},children:A.jsx(cw,{size:28})}),A.jsx("button",{onClick:l,style:{background:"none",border:"none",color:"#EF4444",cursor:"pointer"},title:"Logout",children:A.jsx(w2,{size:28})})]})]}),A.jsx(_v,{}),A.jsx(Cv,{}),A.jsxs("div",{className:"menu-grid",children:[A.jsxs("button",{className:"menu-card primary",onClick:()=>o("attendance"),children:[A.jsx("div",{className:"icon-bg",children:A.jsx(Wc,{size:32})}),A.jsx("h3",{children:"Attendance"}),A.jsx("p",{children:"Mark students present"})]}),A.jsxs("button",{className:"menu-card secondary",onClick:()=>o("activity-log"),children:[A.jsx("div",{className:"icon-bg",children:A.jsx(Zy,{size:32})}),A.jsx("h3",{children:"Activity Log"}),A.jsx("p",{children:"Notes & Verse History"})]}),A.jsxs("button",{className:"menu-card danger",onClick:()=>o("follow-up"),children:[A.jsx("div",{className:"icon-bg",children:A.jsx(Mf,{size:32})}),A.jsx("h3",{children:"Follow Up"}),A.jsx("p",{children:"Missed 3+ Sundays"})]}),A.jsxs("button",{className:"menu-card accent",onClick:()=>o("student-monitor"),children:[A.jsx("div",{className:"icon-bg",children:A.jsx(Bf,{size:32})}),A.jsx("h3",{children:"Profiles"}),A.jsx("p",{children:"Stats & History"})]}),A.jsxs("button",{className:"menu-card",onClick:()=>o("reports"),children:[A.jsx("div",{className:"icon-bg",style:{background:"#EDE9FE",color:"#7C3AED"},children:A.jsx(x2,{size:32})}),A.jsx("h3",{children:"Reports"}),A.jsx("p",{children:"Full History"})]}),A.jsxs("button",{className:"menu-card",onClick:()=>o("student-manager"),children:[A.jsx("div",{className:"icon-bg",style:{background:"#FFEDD5",color:"#C2410C"},children:A.jsx(y2,{size:32})}),A.jsx("h3",{children:"Manage"}),A.jsx("p",{children:"Add/Edit Students"})]}),r?.role==="ADMIN"&&A.jsxs("button",{className:"menu-card",onClick:()=>o("user-manager"),children:[A.jsx("div",{className:"icon-bg",style:{background:"#DBEAFE",color:"#2563EB"},children:A.jsx(Rf,{size:32})}),A.jsx("h3",{children:"Users"}),A.jsx("p",{children:"Manage Staff"})]})]})]})}function Nv({visible:o,onSave:r,onCancel:l,initialValue:f}){const[p,g]=me.useState("");return me.useEffect(()=>{o&&g(f||"")},[o,f]),o?A.jsx("div",{className:"modal-overlay",onClick:l,children:A.jsxs("div",{className:"modal",onClick:b=>b.stopPropagation(),children:[A.jsx("h3",{style:{marginBottom:"12px"},children:"Add Note"}),A.jsx("textarea",{className:"input",rows:3,placeholder:"e.g. Sick, Brought Friend...",value:p,onChange:b=>g(b.target.value),autoFocus:!0}),A.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[A.jsx("button",{className:"btn",style:{flex:1,background:"#F3F4F6",color:"#333"},onClick:l,children:"Cancel"}),A.jsx("button",{className:"btn",style:{flex:1},onClick:()=>r(p),children:"Save"})]})]})}):null}function Ov({onBack:o}){const{permissions:r}=Sa(),[l,f]=me.useState(""),[p,g]=me.useState([]),[b,S]=me.useState(!0),[_,v]=me.useState(null),[N,O]=me.useState({visible:!1,studentId:null,currentRemark:""}),[B,k]=me.useState(()=>localStorage.getItem("attendance_locked")==="true"),z=()=>{if(!r.canUnlockAttendance){alert("Restricted: Only Admins/Teachers can change lock state.");return}const ne=!B;k(ne),localStorage.setItem("attendance_locked",ne)};me.useEffect(()=>{U()},[]);async function U(){try{if(S(!0),!Xe)return;const{data:ne,error:le}=await Xe.from("students").select("*").order("full_name");if(le)throw le;const Ne=new Date().toISOString().split("T")[0],{data:ke,error:ye}=await Xe.from("attendance").select("student_id, memory_verse, remarks").eq("date",Ne).eq("status","PRESENT");if(ye)throw ye;const Ue={};ke.forEach(Ie=>{Ue[Ie.student_id]={present:!0,memory_verse:Ie.memory_verse,remarks:Ie.remarks}});const{data:Ge,error:ie}=await Xe.from("attendance").select("student_id").eq("status","PRESENT");if(ie)throw ie;const ee={};Ge.forEach(Ie=>{ee[Ie.student_id]=(ee[Ie.student_id]||0)+1});const fe=ne.map(Ie=>{const Je=Ue[Ie.id]||{present:!1,memory_verse:!1,remarks:""};return{...Ie,present:Je.present,memory_verse:Je.memory_verse,remarks:Je.remarks,visits:ee[Ie.id]||0}});g(fe)}catch(ne){v(ne.message)}finally{S(!1)}}const Y=async ne=>{if(B||!Xe)return;const le=!ne.present;le?ne.visits+1:ne.visits-1;const Ne=new Date().toISOString().split("T")[0];g(ke=>ke.map(ye=>ye.id===ne.id?{...ye,present:le}:ye));try{le?await Xe.from("attendance").insert({student_id:ne.id,status:"PRESENT",date:Ne}):await Xe.from("attendance").delete().eq("student_id",ne.id).eq("date",Ne),U()}catch{U()}},J=async(ne,le)=>{if(le.stopPropagation(),B)return;if(!ne.present){alert("Mark them present first!");return}const Ne=!ne.memory_verse;g(ye=>ye.map(Ue=>Ue.id===ne.id?{...Ue,memory_verse:Ne}:Ue));const ke=new Date().toISOString().split("T")[0];await Xe.from("attendance").update({memory_verse:Ne}).eq("student_id",ne.id).eq("date",ke)},ae=(ne,le)=>{if(le.stopPropagation(),!B){if(!ne.present){alert("Mark them present first!");return}O({visible:!0,studentId:ne.id,currentRemark:ne.remarks})}},Z=async ne=>{const le=new Date().toISOString().split("T")[0],Ne=N.studentId;g(ke=>ke.map(ye=>ye.id===Ne?{...ye,remarks:ne}:ye)),O({...N,visible:!1}),await Xe.from("attendance").update({remarks:ne}).eq("student_id",Ne).eq("date",le)},ce=p.filter(ne=>ne.full_name.toLowerCase().includes(l.toLowerCase())),Ce=ce.filter(ne=>ne.visits<3),Ae=ce.filter(ne=>ne.visits>=3),Q=ne=>A.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[A.jsxs("div",{className:"student-info",style:{flex:1},children:[A.jsxs("h3",{children:[ne.full_name," ",ne.nickname&&A.jsxs("span",{style:{color:"var(--primary)",fontWeight:"normal"},children:['"',ne.nickname,'"']})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[A.jsx("span",{children:ne.grade_level||"No Grade"}),ne.visits<3&&ne.visits>0&&A.jsx("span",{className:`badge visit-${ne.visits}`,children:ne.visits===1?"1st VISIT":"2nd VISIT"}),ne.visits===0&&A.jsx("span",{className:"badge visit-1",children:"NEW"})]})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",opacity:B?.5:1},children:[ne.present&&A.jsxs(A.Fragment,{children:[A.jsx("button",{className:`action-btn ${ne.memory_verse?"active-verse":""}`,onClick:le=>J(ne,le),disabled:B,children:A.jsx(oo,{size:16})}),A.jsx("button",{className:`action-btn ${ne.remarks?"active-remark":""}`,onClick:le=>ae(ne,le),disabled:B,children:A.jsx(Of,{size:16,fill:ne.remarks?"currentColor":"none"})})]}),A.jsx("div",{className:`check-btn ${ne.present?"active":""}`,onClick:le=>{le.stopPropagation(),Y(ne)},style:{cursor:B?"not-allowed":"pointer"},children:B?A.jsx(wg,{size:16,color:ne.present?"white":"var(--text-muted)"}):A.jsx(tl,{size:24,fill:ne.present?"white":"none",color:ne.present?"white":"var(--border-color)"})})]})]},ne.id);return A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsxs("div",{children:[A.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"Attendance"}),A.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:new Date().toDateString()})]}),A.jsxs("button",{onClick:z,style:{background:B?"#FEE2E2":"#F3F4F6",border:"none",padding:"8px",borderRadius:"8px",color:B?"#DC2626":"#6B7280",cursor:"not-allowed",display:"flex",alignItems:"center",gap:"4px"},children:[B?A.jsx(wg,{size:20}):A.jsx(bw,{size:20}),A.jsx("span",{style:{fontSize:"12px",fontWeight:"600"},children:B?"LOCKED":"OPEN"})]})]}),_&&A.jsx("div",{className:"error-banner",children:_}),A.jsxs("div",{className:"search-bar",children:[A.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:l,onChange:ne=>f(ne.target.value)}),A.jsx(ho,{size:20,className:"search-icon"})]}),A.jsx("div",{className:"student-list",children:b?A.jsx("div",{className:"empty-state",children:"Loading..."}):ce.length===0?A.jsx("div",{className:"empty-state",children:"No student found."}):A.jsxs(A.Fragment,{children:[Ce.length>0&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"section-header",children:["New Kids / Visitors (",Ce.length,")"]}),Ce.map(Q)]}),Ae.length>0&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"section-header",children:["Regulars (",Ae.length,")"]}),Ae.map(Q)]})]})}),A.jsx(Nv,{visible:N.visible,initialValue:N.currentRemark,onCancel:()=>O({...N,visible:!1}),onSave:Z})]})}function Iv({onBack:o}){const[r,l]=me.useState([]),[f,p]=me.useState(!0);me.useEffect(()=>{g()},[]);async function g(){try{p(!0);const{data:S,error:_}=await Xe.from("attendance").select("date, remarks, memory_verse, students (full_name, nickname)").or("memory_verse.eq.true,remarks.neq.null").order("date",{ascending:!1});if(_)throw _;const v={};S.forEach(N=>{v[N.date]||(v[N.date]={date:N.date,verses:[],remarks:[]}),N.memory_verse&&v[N.date].verses.push(N.students.nickname||N.students.full_name),N.remarks&&v[N.date].remarks.push({name:N.students.nickname||N.students.full_name,note:N.remarks})}),l(Object.values(v))}catch(S){console.error(S)}finally{p(!1)}}const b=S=>new Date(S).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"});return A.jsxs("div",{className:"page slide-in",style:{background:"#FAFAFA"},children:[A.jsxs("header",{className:"page-header",style:{background:"#fff",margin:0,padding:"20px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsx("h2",{children:"Activity Log"})]}),A.jsx("div",{className:"timeline",children:f?A.jsx("div",{className:"empty-state",children:"Loading..."}):r.length===0?A.jsx("div",{className:"empty-state",children:"No activity yet."}):r.map(S=>A.jsxs("div",{className:"timeline-item",children:[A.jsx("div",{className:"timeline-dot"}),A.jsx("div",{className:"timeline-date",children:b(S.date)}),S.verses.length>0&&A.jsxs("div",{className:"timeline-card timeline-section",children:[A.jsxs("div",{className:"timeline-title",style:{color:"#D97706"},children:[A.jsx(oo,{size:14})," Memory Verses (",S.verses.length,")"]}),A.jsx("p",{style:{fontSize:"14px",lineHeight:"1.4",color:"#374151"},children:S.verses.join(", ")})]}),S.remarks.length>0&&A.jsxs("div",{className:"timeline-card timeline-section",children:[A.jsxs("div",{className:"timeline-title",style:{color:"var(--primary)"},children:[A.jsx(Of,{size:14})," Remarks"]}),A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:S.remarks.map((_,v)=>A.jsxs("div",{style:{fontSize:"13px"},children:[A.jsxs("span",{style:{fontWeight:"700",color:"#111827"},children:[_.name,":"]})," ",A.jsx("span",{style:{color:"#4B5563"},children:_.note})]},v))})]})]},S.date))})]})}function Rv({onBack:o}){const[r,l]=me.useState([]),[f,p]=me.useState(!0),[g,b]=me.useState([]);me.useEffect(()=>{S()},[]);async function S(){try{p(!0);const{data:_,error:v}=await Xe.from("attendance").select("date").eq("status","PRESENT").order("date",{ascending:!1}),N={id:"demo-absent",full_name:"Sleeping Sam (Demo)",grade_level:"Grade 1",avatar_url:null,isDemo:!0};if(v)throw v;const O=[...new Set(_.map(ae=>ae.date))].slice(0,3);if(b(O),O.length<3){l([N]);return}const{data:B,error:k}=await Xe.from("attendance").select("student_id").in("date",O).eq("status","PRESENT");if(k)throw k;const z=new Set(B.map(ae=>ae.student_id)),{data:U,error:Y}=await Xe.from("students").select("*").order("full_name");if(Y)throw Y;const J=U.filter(ae=>!z.has(ae.id));l([...J,N])}catch(_){console.error(_)}finally{p(!1)}}return A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsxs("div",{children:[A.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"To Visit / Follow Up"}),A.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Missed the last 3 Sundays"})]})]}),g.length<3&&!f&&A.jsxs("div",{className:"error-banner",style:{background:"#FFF7ED",color:"#C2410C",borderColor:"#FFEDD5"},children:["Not enough history yet (",g.length,"/3 Sundays)."]}),A.jsx("div",{className:"student-list",children:f?A.jsx("div",{className:"empty-state",children:"Calculating..."}):r.length===0?A.jsxs("div",{className:"empty-state",children:[A.jsx(tl,{size:48,style:{marginBottom:"16px",color:"var(--success)"}}),A.jsx("p",{children:"Good news! Everyone has attended at least once recently."})]}):r.map(_=>A.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[A.jsxs("div",{className:"student-info",children:[A.jsx("h3",{children:_.full_name}),A.jsx("span",{style:{color:"#EF4444",fontWeight:"500"},children:"Missed 3 Consecutive"})]}),A.jsx("div",{style:{background:"#FEE2E2",padding:"8px",borderRadius:"50%",color:"#DC2626"},children:A.jsx(ww,{size:24})})]},_.id))})]})}var Xs={},rf={exports:{}},af,jg;function Dv(){if(jg)return af;jg=1;var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return af=o,af}var sf,Ug;function Mv(){if(Ug)return sf;Ug=1;var o=Dv();function r(){}function l(){}return l.resetWarningCache=r,sf=function(){function f(b,S,_,v,N,O){if(O!==o){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}f.isRequired=f;function p(){return f}var g={array:f,bigint:f,bool:f,func:f,number:f,object:f,string:f,symbol:f,any:f,arrayOf:p,element:f,elementType:f,instanceOf:p,node:f,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:l,resetWarningCache:r};return g.PropTypes=g,g},sf}var zg;function D2(){return zg||(zg=1,rf.exports=Mv()()),rf.exports}var lf,Pg;function M2(){return Pg||(Pg=1,lf={L:1,M:0,Q:3,H:2}),lf}var of,Fg;function B2(){return Fg||(Fg=1,of={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),of}var cf,Hg;function Bv(){if(Hg)return cf;Hg=1;var o=B2();function r(l){this.mode=o.MODE_8BIT_BYTE,this.data=l}return r.prototype={getLength:function(l){return this.data.length},write:function(l){for(var f=0;f<this.data.length;f++)l.put(this.data.charCodeAt(f),8)}},cf=r,cf}var uf,Vg;function Lv(){if(Vg)return uf;Vg=1;var o=M2();function r(l,f){this.totalCount=l,this.dataCount=f}return r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(l,f){var p=r.getRsBlockTable(l,f);if(p==null)throw new Error("bad rs block @ typeNumber:"+l+"/errorCorrectLevel:"+f);for(var g=p.length/3,b=new Array,S=0;S<g;S++)for(var _=p[S*3+0],v=p[S*3+1],N=p[S*3+2],O=0;O<_;O++)b.push(new r(v,N));return b},r.getRsBlockTable=function(l,f){switch(f){case o.L:return r.RS_BLOCK_TABLE[(l-1)*4+0];case o.M:return r.RS_BLOCK_TABLE[(l-1)*4+1];case o.Q:return r.RS_BLOCK_TABLE[(l-1)*4+2];case o.H:return r.RS_BLOCK_TABLE[(l-1)*4+3];default:return}},uf=r,uf}var hf,Gg;function kv(){if(Gg)return hf;Gg=1;function o(){this.buffer=new Array,this.length=0}return o.prototype={get:function(r){var l=Math.floor(r/8);return(this.buffer[l]>>>7-r%8&1)==1},put:function(r,l){for(var f=0;f<l;f++)this.putBit((r>>>l-f-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(r){var l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),r&&(this.buffer[l]|=128>>>this.length%8),this.length++}},hf=o,hf}var ff,qg;function L2(){if(qg)return ff;qg=1;for(var o={glog:function(l){if(l<1)throw new Error("glog("+l+")");return o.LOG_TABLE[l]},gexp:function(l){for(;l<0;)l+=255;for(;l>=256;)l-=255;return o.EXP_TABLE[l]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},r=0;r<8;r++)o.EXP_TABLE[r]=1<<r;for(var r=8;r<256;r++)o.EXP_TABLE[r]=o.EXP_TABLE[r-4]^o.EXP_TABLE[r-5]^o.EXP_TABLE[r-6]^o.EXP_TABLE[r-8];for(var r=0;r<255;r++)o.LOG_TABLE[o.EXP_TABLE[r]]=r;return ff=o,ff}var df,Yg;function k2(){if(Yg)return df;Yg=1;var o=L2();function r(l,f){if(l.length==null)throw new Error(l.length+"/"+f);for(var p=0;p<l.length&&l[p]==0;)p++;this.num=new Array(l.length-p+f);for(var g=0;g<l.length-p;g++)this.num[g]=l[g+p]}return r.prototype={get:function(l){return this.num[l]},getLength:function(){return this.num.length},multiply:function(l){for(var f=new Array(this.getLength()+l.getLength()-1),p=0;p<this.getLength();p++)for(var g=0;g<l.getLength();g++)f[p+g]^=o.gexp(o.glog(this.get(p))+o.glog(l.get(g)));return new r(f,0)},mod:function(l){if(this.getLength()-l.getLength()<0)return this;for(var f=o.glog(this.get(0))-o.glog(l.get(0)),p=new Array(this.getLength()),g=0;g<this.getLength();g++)p[g]=this.get(g);for(var g=0;g<l.getLength();g++)p[g]^=o.gexp(o.glog(l.get(g))+f);return new r(p,0).mod(l)}},df=r,df}var gf,Xg;function jv(){if(Xg)return gf;Xg=1;var o=B2(),r=k2(),l=L2(),f={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(g){for(var b=g<<10;p.getBCHDigit(b)-p.getBCHDigit(p.G15)>=0;)b^=p.G15<<p.getBCHDigit(b)-p.getBCHDigit(p.G15);return(g<<10|b)^p.G15_MASK},getBCHTypeNumber:function(g){for(var b=g<<12;p.getBCHDigit(b)-p.getBCHDigit(p.G18)>=0;)b^=p.G18<<p.getBCHDigit(b)-p.getBCHDigit(p.G18);return g<<12|b},getBCHDigit:function(g){for(var b=0;g!=0;)b++,g>>>=1;return b},getPatternPosition:function(g){return p.PATTERN_POSITION_TABLE[g-1]},getMask:function(g,b,S){switch(g){case f.PATTERN000:return(b+S)%2==0;case f.PATTERN001:return b%2==0;case f.PATTERN010:return S%3==0;case f.PATTERN011:return(b+S)%3==0;case f.PATTERN100:return(Math.floor(b/2)+Math.floor(S/3))%2==0;case f.PATTERN101:return b*S%2+b*S%3==0;case f.PATTERN110:return(b*S%2+b*S%3)%2==0;case f.PATTERN111:return(b*S%3+(b+S)%2)%2==0;default:throw new Error("bad maskPattern:"+g)}},getErrorCorrectPolynomial:function(g){for(var b=new r([1],0),S=0;S<g;S++)b=b.multiply(new r([1,l.gexp(S)],0));return b},getLengthInBits:function(g,b){if(1<=b&&b<10)switch(g){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:return 8;case o.MODE_KANJI:return 8;default:throw new Error("mode:"+g)}else if(b<27)switch(g){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+g)}else if(b<41)switch(g){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+g)}else throw new Error("type:"+b)},getLostPoint:function(g){for(var b=g.getModuleCount(),S=0,_=0;_<b;_++)for(var v=0;v<b;v++){for(var N=0,O=g.isDark(_,v),B=-1;B<=1;B++)if(!(_+B<0||b<=_+B))for(var k=-1;k<=1;k++)v+k<0||b<=v+k||B==0&&k==0||O==g.isDark(_+B,v+k)&&N++;N>5&&(S+=3+N-5)}for(var _=0;_<b-1;_++)for(var v=0;v<b-1;v++){var z=0;g.isDark(_,v)&&z++,g.isDark(_+1,v)&&z++,g.isDark(_,v+1)&&z++,g.isDark(_+1,v+1)&&z++,(z==0||z==4)&&(S+=3)}for(var _=0;_<b;_++)for(var v=0;v<b-6;v++)g.isDark(_,v)&&!g.isDark(_,v+1)&&g.isDark(_,v+2)&&g.isDark(_,v+3)&&g.isDark(_,v+4)&&!g.isDark(_,v+5)&&g.isDark(_,v+6)&&(S+=40);for(var v=0;v<b;v++)for(var _=0;_<b-6;_++)g.isDark(_,v)&&!g.isDark(_+1,v)&&g.isDark(_+2,v)&&g.isDark(_+3,v)&&g.isDark(_+4,v)&&!g.isDark(_+5,v)&&g.isDark(_+6,v)&&(S+=40);for(var U=0,v=0;v<b;v++)for(var _=0;_<b;_++)g.isDark(_,v)&&U++;var Y=Math.abs(100*U/b/b-50)/5;return S+=Y*10,S}};return gf=p,gf}var mf,Wg;function Uv(){if(Wg)return mf;Wg=1;var o=Bv(),r=Lv(),l=kv(),f=jv(),p=k2();function g(S,_){this.typeNumber=S,this.errorCorrectLevel=_,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var b=g.prototype;return b.addData=function(S){var _=new o(S);this.dataList.push(_),this.dataCache=null},b.isDark=function(S,_){if(S<0||this.moduleCount<=S||_<0||this.moduleCount<=_)throw new Error(S+","+_);return this.modules[S][_]},b.getModuleCount=function(){return this.moduleCount},b.make=function(){if(this.typeNumber<1){var S=1;for(S=1;S<40;S++){for(var _=r.getRSBlocks(S,this.errorCorrectLevel),v=new l,N=0,O=0;O<_.length;O++)N+=_[O].dataCount;for(var O=0;O<this.dataList.length;O++){var B=this.dataList[O];v.put(B.mode,4),v.put(B.getLength(),f.getLengthInBits(B.mode,S)),B.write(v)}if(v.getLengthInBits()<=N*8)break}this.typeNumber=S}this.makeImpl(!1,this.getBestMaskPattern())},b.makeImpl=function(S,_){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++){this.modules[v]=new Array(this.moduleCount);for(var N=0;N<this.moduleCount;N++)this.modules[v][N]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(S,_),this.typeNumber>=7&&this.setupTypeNumber(S),this.dataCache==null&&(this.dataCache=g.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,_)},b.setupPositionProbePattern=function(S,_){for(var v=-1;v<=7;v++)if(!(S+v<=-1||this.moduleCount<=S+v))for(var N=-1;N<=7;N++)_+N<=-1||this.moduleCount<=_+N||(0<=v&&v<=6&&(N==0||N==6)||0<=N&&N<=6&&(v==0||v==6)||2<=v&&v<=4&&2<=N&&N<=4?this.modules[S+v][_+N]=!0:this.modules[S+v][_+N]=!1)},b.getBestMaskPattern=function(){for(var S=0,_=0,v=0;v<8;v++){this.makeImpl(!0,v);var N=f.getLostPoint(this);(v==0||S>N)&&(S=N,_=v)}return _},b.createMovieClip=function(S,_,v){var N=S.createEmptyMovieClip(_,v),O=1;this.make();for(var B=0;B<this.modules.length;B++)for(var k=B*O,z=0;z<this.modules[B].length;z++){var U=z*O,Y=this.modules[B][z];Y&&(N.beginFill(0,100),N.moveTo(U,k),N.lineTo(U+O,k),N.lineTo(U+O,k+O),N.lineTo(U,k+O),N.endFill())}return N},b.setupTimingPattern=function(){for(var S=8;S<this.moduleCount-8;S++)this.modules[S][6]==null&&(this.modules[S][6]=S%2==0);for(var _=8;_<this.moduleCount-8;_++)this.modules[6][_]==null&&(this.modules[6][_]=_%2==0)},b.setupPositionAdjustPattern=function(){for(var S=f.getPatternPosition(this.typeNumber),_=0;_<S.length;_++)for(var v=0;v<S.length;v++){var N=S[_],O=S[v];if(this.modules[N][O]==null)for(var B=-2;B<=2;B++)for(var k=-2;k<=2;k++)B==-2||B==2||k==-2||k==2||B==0&&k==0?this.modules[N+B][O+k]=!0:this.modules[N+B][O+k]=!1}},b.setupTypeNumber=function(S){for(var _=f.getBCHTypeNumber(this.typeNumber),v=0;v<18;v++){var N=!S&&(_>>v&1)==1;this.modules[Math.floor(v/3)][v%3+this.moduleCount-8-3]=N}for(var v=0;v<18;v++){var N=!S&&(_>>v&1)==1;this.modules[v%3+this.moduleCount-8-3][Math.floor(v/3)]=N}},b.setupTypeInfo=function(S,_){for(var v=this.errorCorrectLevel<<3|_,N=f.getBCHTypeInfo(v),O=0;O<15;O++){var B=!S&&(N>>O&1)==1;O<6?this.modules[O][8]=B:O<8?this.modules[O+1][8]=B:this.modules[this.moduleCount-15+O][8]=B}for(var O=0;O<15;O++){var B=!S&&(N>>O&1)==1;O<8?this.modules[8][this.moduleCount-O-1]=B:O<9?this.modules[8][15-O-1+1]=B:this.modules[8][15-O-1]=B}this.modules[this.moduleCount-8][8]=!S},b.mapData=function(S,_){for(var v=-1,N=this.moduleCount-1,O=7,B=0,k=this.moduleCount-1;k>0;k-=2)for(k==6&&k--;;){for(var z=0;z<2;z++)if(this.modules[N][k-z]==null){var U=!1;B<S.length&&(U=(S[B]>>>O&1)==1);var Y=f.getMask(_,N,k-z);Y&&(U=!U),this.modules[N][k-z]=U,O--,O==-1&&(B++,O=7)}if(N+=v,N<0||this.moduleCount<=N){N-=v,v=-v;break}}},g.PAD0=236,g.PAD1=17,g.createData=function(S,_,v){for(var N=r.getRSBlocks(S,_),O=new l,B=0;B<v.length;B++){var k=v[B];O.put(k.mode,4),O.put(k.getLength(),f.getLengthInBits(k.mode,S)),k.write(O)}for(var z=0,B=0;B<N.length;B++)z+=N[B].dataCount;if(O.getLengthInBits()>z*8)throw new Error("code length overflow. ("+O.getLengthInBits()+">"+z*8+")");for(O.getLengthInBits()+4<=z*8&&O.put(0,4);O.getLengthInBits()%8!=0;)O.putBit(!1);for(;!(O.getLengthInBits()>=z*8||(O.put(g.PAD0,8),O.getLengthInBits()>=z*8));)O.put(g.PAD1,8);return g.createBytes(O,N)},g.createBytes=function(S,_){for(var v=0,N=0,O=0,B=new Array(_.length),k=new Array(_.length),z=0;z<_.length;z++){var U=_[z].dataCount,Y=_[z].totalCount-U;N=Math.max(N,U),O=Math.max(O,Y),B[z]=new Array(U);for(var J=0;J<B[z].length;J++)B[z][J]=255&S.buffer[J+v];v+=U;var ae=f.getErrorCorrectPolynomial(Y),Z=new p(B[z],ae.getLength()-1),ce=Z.mod(ae);k[z]=new Array(ae.getLength()-1);for(var J=0;J<k[z].length;J++){var Ce=J+ce.getLength()-k[z].length;k[z][J]=Ce>=0?ce.get(Ce):0}}for(var Ae=0,J=0;J<_.length;J++)Ae+=_[J].totalCount;for(var Q=new Array(Ae),ne=0,J=0;J<N;J++)for(var z=0;z<_.length;z++)J<B[z].length&&(Q[ne++]=B[z][J]);for(var J=0;J<O;J++)for(var z=0;z<_.length;z++)J<k[z].length&&(Q[ne++]=k[z][J]);return Q},mf=g,mf}var Uc={},Zg;function zv(){if(Zg)return Uc;Zg=1,Object.defineProperty(Uc,"__esModule",{value:!0});var o=Object.assign||function(v){for(var N=1;N<arguments.length;N++){var O=arguments[N];for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&(v[B]=O[B])}return v},r=D2(),l=g(r),f=co(),p=g(f);function g(v){return v&&v.__esModule?v:{default:v}}function b(v,N){var O={};for(var B in v)N.indexOf(B)>=0||Object.prototype.hasOwnProperty.call(v,B)&&(O[B]=v[B]);return O}var S={bgColor:l.default.oneOfType([l.default.object,l.default.string]).isRequired,bgD:l.default.string.isRequired,fgColor:l.default.oneOfType([l.default.object,l.default.string]).isRequired,fgD:l.default.string.isRequired,size:l.default.number.isRequired,title:l.default.string,viewBoxSize:l.default.number.isRequired,xmlns:l.default.string},_=(0,f.forwardRef)(function(v,N){var O=v.bgColor,B=v.bgD,k=v.fgD,z=v.fgColor,U=v.size,Y=v.title,J=v.viewBoxSize,ae=v.xmlns,Z=ae===void 0?"http://www.w3.org/2000/svg":ae,ce=b(v,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return p.default.createElement("svg",o({},ce,{height:U,ref:N,viewBox:"0 0 "+J+" "+J,width:U,xmlns:Z}),Y?p.default.createElement("title",null,Y):null,p.default.createElement("path",{d:B,fill:O}),p.default.createElement("path",{d:k,fill:z}))});return _.displayName="QRCodeSvg",_.propTypes=S,Uc.default=_,Uc}var Qg;function Pv(){if(Qg)return Xs;Qg=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.QRCode=void 0;var o=Object.assign||function(U){for(var Y=1;Y<arguments.length;Y++){var J=arguments[Y];for(var ae in J)Object.prototype.hasOwnProperty.call(J,ae)&&(U[ae]=J[ae])}return U},r=D2(),l=O(r),f=M2(),p=O(f),g=Uv(),b=O(g),S=co(),_=O(S),v=zv(),N=O(v);function O(U){return U&&U.__esModule?U:{default:U}}function B(U,Y){var J={};for(var ae in U)Y.indexOf(ae)>=0||Object.prototype.hasOwnProperty.call(U,ae)&&(J[ae]=U[ae]);return J}var k={bgColor:l.default.oneOfType([l.default.object,l.default.string]),fgColor:l.default.oneOfType([l.default.object,l.default.string]),level:l.default.string,size:l.default.number,value:l.default.string.isRequired},z=(0,S.forwardRef)(function(U,Y){var J=U.bgColor,ae=J===void 0?"#FFFFFF":J,Z=U.fgColor,ce=Z===void 0?"#000000":Z,Ce=U.level,Ae=Ce===void 0?"L":Ce,Q=U.size,ne=Q===void 0?256:Q,le=U.value,Ne=B(U,["bgColor","fgColor","level","size","value"]),ke=new b.default(-1,p.default[Ae]);ke.addData(le),ke.make();var ye=ke.modules;return _.default.createElement(N.default,o({},Ne,{bgColor:ae,bgD:ye.map(function(Ue,Ge){return Ue.map(function(ie,ee){return ie?"":"M "+ee+" "+Ge+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ce,fgD:ye.map(function(Ue,Ge){return Ue.map(function(ie,ee){return ie?"M "+ee+" "+Ge+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:Y,size:ne,viewBoxSize:ye.length}))});return Xs.QRCode=z,z.displayName="QRCode",z.propTypes=k,Xs.default=z,Xs}var Fv=Pv();const Hv=ep(Fv);function Vv({stats:o}){const r=(b,S,_,v)=>b>=v?"gold":b>=_?"silver":b>=S?"bronze":"locked",l=r(o.total,1,3,10),f=r(o.verses,1,5,10),p=r(o.streak,2,4,8),g=[{id:"attendance",title:l==="bronze"?"First Step":l==="silver"?"Regular":"Rising Star",desc:l==="gold"?"10+ Visits":"Attendance",icon:A.jsx(A2,{size:24,fill:l==="gold"?"#F59E0B":"currentColor",color:l==="gold"?"#D97706":l==="silver"?"#64748B":"#92400E"}),rank:l},{id:"verses",title:f==="bronze"?"Student":f==="silver"?"Scholar":"Bible Champ",desc:f==="gold"?"10 Verses":"Bible Verse",icon:A.jsx(tw,{size:24,fill:f==="gold"?"#F59E0B":"currentColor",color:f==="gold"?"#D97706":f==="silver"?"#64748B":"#92400E"}),rank:f},{id:"streak",title:p==="bronze"?"Warming Up":p==="silver"?"On Fire":"Unstoppable",desc:p==="gold"?"8 Weeks!":"Streak",icon:A.jsx(mw,{size:24,fill:p==="gold"?"#EF4444":"currentColor",color:p==="gold"?"#B91C1C":p==="silver"?"#64748B":"#92400E"}),rank:p}];return A.jsxs("div",{style:{padding:"0 20px 20px"},children:[A.jsxs("h3",{className:"section-header",style:{marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx(S2,{size:18,color:"#D97706"})," Achievements"]}),A.jsx("div",{className:"trophy-grid",children:g.map((b,S)=>A.jsxs("div",{className:`trophy-card ${b.rank!=="locked"?"unlocked":""} rank-${b.rank}`,children:[A.jsx("span",{className:"trophy-icon",children:b.icon}),A.jsx("div",{className:"trophy-title",children:b.title}),A.jsx("div",{className:"trophy-desc",children:b.desc})]},S))})]})}function Gv({student:o,onBack:r}){const[l,f]=me.useState([]),[p,g]=me.useState({total:0,verses:0,streak:0}),[b,S]=me.useState(!0);me.useEffect(()=>{if(o.isDemo){S(!1),g(o.demoStats),f(o.demoHistory);return}_()},[o]);async function _(){try{S(!0);const{data:k,error:z}=await Xe.from("attendance").select("*").eq("student_id",o.id).eq("status","PRESENT").order("date",{ascending:!1});if(z)throw z;f(k);const U=k.length,Y=k.filter(ae=>ae.memory_verse).length;let J=0;k.length>0&&(J=Math.min(U,k.length)),g({total:U,verses:Y,streak:J})}catch(k){console.error(k)}finally{S(!1)}}const v=new Date().toISOString().split("T")[0],N=l.some(k=>k.date===v)||o.isDemo&&o.demoHistory.some(k=>k.date===v),[O,B]=me.useState(!1);return A.jsxs("div",{className:"page slide-in",style:{padding:0,background:"#F9FAFB"},children:[O&&A.jsx("div",{className:"modal-overlay fade-in",onClick:()=>B(!1),children:A.jsxs("div",{className:"modal-content",style:{textAlign:"center"},onClick:k=>k.stopPropagation(),children:[A.jsx("h3",{children:"Student QR Code"}),A.jsx("p",{style:{marginBottom:"16px",color:"#6B7280"},children:"Scan to mark present"}),A.jsx("div",{style:{background:"#fff",padding:"16px",border:"2px solid #E5E7EB",borderRadius:"12px",display:"inline-block"},children:A.jsx(Hv,{value:o.id,size:200})}),A.jsx("h4",{style:{marginTop:"16px"},children:o.full_name}),A.jsx("br",{}),A.jsx("button",{className:"btn full-width",onClick:()=>B(!1),style:{marginTop:"16px"},children:"Close"})]})}),A.jsxs("div",{className:"profile-header",children:[A.jsx("button",{onClick:r,className:"back-btn",style:{position:"absolute",top:"20px",left:"20px"},children:A.jsx(zn,{size:24})}),A.jsx("button",{onClick:()=>B(!0),style:{position:"absolute",top:"20px",right:"20px",background:"var(--primary)",border:"none",color:"#fff",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(79, 70, 229, 0.4)"},children:A.jsx(b2,{size:20})}),A.jsx("div",{className:`big-avatar ${N?"pulsing-border":""}`,style:N?{border:"4px solid #10B981",color:"#10B981",background:"#ECFDF5",borderRadius:"50%",overflow:"hidden"}:{borderRadius:"50%",overflow:"hidden"},children:o.avatar_url?A.jsx("img",{src:o.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):o.nickname?o.nickname[0]:o.full_name[0]}),A.jsx("h2",{className:"profile-name",children:o.full_name}),A.jsxs("div",{className:"profile-meta",children:[A.jsx("span",{children:o.grade_level||"No Grade"}),"  ",A.jsx("span",{children:o.gender||"Student"}),o.nickname&&A.jsxs("span",{children:[' "',o.nickname,'"']})]})]}),A.jsxs("div",{className:"stats-row",children:[A.jsxs("div",{className:"stat-card",children:[A.jsx("span",{className:"stat-val",children:p.total}),A.jsx("span",{className:"stat-label",children:"Attended"})]}),A.jsxs("div",{className:"stat-card",children:[A.jsx("span",{className:"stat-val",style:{color:"#D97706"},children:p.verses}),A.jsx("span",{className:"stat-label",children:"Verses"})]}),A.jsxs("div",{className:"stat-card",children:[A.jsx("span",{className:"stat-val",style:{color:"#EC4899"},children:p.streak}),A.jsx("span",{className:"stat-label",children:"Streak"})]})]}),A.jsx(Vv,{stats:p}),A.jsxs("div",{style:{padding:"0 20px 20px"},children:[A.jsx("h3",{className:"section-header",style:{marginBottom:"16px"},children:"Attendance History"}),b?A.jsx("div",{className:"empty-state",children:"Loading..."}):l.length===0?A.jsx("div",{className:"empty-state",children:"No attendance recorded."}):A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map((k,z)=>A.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx("div",{style:{background:"#EEF2FF",padding:"8px",borderRadius:"10px",color:"var(--primary)"},children:A.jsx(rw,{size:20})}),A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:"700",fontSize:"15px",color:"#1F2937"},children:new Date(k.date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}),k.remarks&&A.jsxs("div",{style:{fontSize:"13px",color:"#6B7280",marginTop:"2px"},children:['"',k.remarks,'"']})]})]}),k.memory_verse&&A.jsxs("div",{style:{background:"#FEF3C7",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",color:"#D97706",display:"flex",alignItems:"center",gap:"4px"},children:[A.jsx(oo,{size:14})," Verse"]})]},k.id||z))})]})]})}function qv({onBack:o}){const[r,l]=me.useState("list"),[f,p]=me.useState(null),[g,b]=me.useState([]),[S,_]=me.useState(!0),[v,N]=me.useState(""),[O,B]=me.useState("alpha"),k={id:"demo-zion",full_name:"Zion Lion",nickname:"Zion",grade_level:"Grade 3",gender:"Male",isDemo:!0,demoStats:{total:15,verses:12,streak:5},demoHistory:[{date:new Date().toISOString().split("T")[0],memory_verse:!0,remarks:"Present today!"},{date:"2023-10-27",memory_verse:!0,remarks:"Led the prayer"},{date:"2023-10-20",memory_verse:!0,remarks:""},{date:"2023-10-13",memory_verse:!1,remarks:"Brought a friend"}]},[z,U]=me.useState(new Set);me.useEffect(()=>{Y(),J()},[]);async function Y(){try{const{data:ce}=await Xe.from("students").select("*").order("full_name");b(ce)}catch{}finally{_(!1)}}async function J(){try{const ce=new Date().toISOString().split("T")[0],{data:Ce}=await Xe.from("attendance").select("student_id").eq("date",ce).eq("status","PRESENT");Ce&&U(new Set(Ce.map(Ae=>Ae.student_id)))}catch(ce){console.error(ce)}}const Z=[...g.filter(ce=>ce.full_name.toLowerCase().includes(v.toLowerCase()))].sort((ce,Ce)=>{if(O==="present"){const Ae=z.has(ce.id),Q=z.has(Ce.id);if(Ae&&!Q)return-1;if(!Ae&&Q)return 1}return ce.full_name.localeCompare(Ce.full_name)});return r==="profile"&&f?A.jsx(Gv,{student:f,onBack:()=>{l("list"),p(null)}}):A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsx("h2",{children:"Select Student"})]}),A.jsxs("button",{onClick:()=>B(ce=>ce==="alpha"?"present":"alpha"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"8px",border:"1px solid #E5E7EB",background:O==="present"?"#ECFDF5":"#fff",color:O==="present"?"#059669":"#374151",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:[A.jsx(p2,{size:16}),O==="present"?"Present First":"A-Z"]})]}),A.jsxs("div",{className:"search-bar",children:[A.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:v,onChange:ce=>N(ce.target.value)}),A.jsx(ho,{size:20,className:"search-icon"})]}),A.jsxs("div",{className:"student-list",children:[A.jsxs("div",{className:"card student-card",onClick:()=>{p(k),l("profile")},style:{border:"2px dashed #D97706",background:"#FFFBEB"},children:[A.jsxs("div",{className:"student-info",children:[A.jsxs("h3",{children:[k.full_name," ",A.jsx("span",{className:"badge",style:{background:"#FCD34D",color:"#92400E"},children:"DEMO"})]}),A.jsx("span",{children:"Present Today!"})]}),A.jsx(A2,{size:20,fill:"#10B981",color:"#10B981"})]}),S?A.jsx("div",{className:"empty-state",children:"Loading..."}):Z.map(ce=>{const Ce=z.has(ce.id);return A.jsxs("div",{className:"card student-card",onClick:()=>{p(ce),l("profile")},style:Ce?{borderLeft:"3px solid #10B981"}:{},children:[A.jsxs("div",{className:"student-info",children:[A.jsx("h3",{children:ce.full_name}),A.jsx("span",{style:Ce?{color:"#10B981",fontWeight:"bold"}:{},children:Ce?"Present":ce.nickname||"View Profile"})]}),A.jsx("div",{style:{color:Ce?"#10B981":"var(--border-color)"},children:A.jsx(Bf,{size:20,fill:Ce?"#ECFDF5":"none"})})]},ce.id)})]})]})}function Yv({date:o,onBack:r}){const[l,f]=me.useState([]),[p,g]=me.useState(!0);me.useEffect(()=>{b()},[o]);async function b(){try{g(!0);const{data:_,error:v}=await Xe.from("attendance").select("status, students (full_name, grade_level)").eq("date",o).eq("status","PRESENT");if(v)throw v;f(_)}catch(_){console.error(_)}finally{g(!1)}}const S=_=>new Date(_).toLocaleDateString(void 0,{dateStyle:"full"});return A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",children:[A.jsx("button",{onClick:r,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsxs("div",{children:[A.jsx("h2",{style:{fontSize:"18px",fontWeight:"700"},children:"Present List"}),A.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:S(o)})]})]}),A.jsx("div",{className:"student-list",children:p?A.jsx("div",{className:"empty-state",children:"Loading..."}):l.length===0?A.jsx("div",{className:"empty-state",children:"No one marked present."}):l.map((_,v)=>A.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[A.jsxs("div",{className:"student-info",children:[A.jsx("h3",{children:_.students.full_name}),A.jsx("span",{children:_.students.grade_level||"No Grade"})]}),A.jsx("div",{className:"check-btn active",style:{width:"24px",height:"24px"},children:A.jsx(tl,{size:16,color:"white"})})]},v))})]})}function Xv({onNavigate:o}){const[r,l]=me.useState("list"),[f,p]=me.useState(null),[g,b]=me.useState([]),[S,_]=me.useState(!0);me.useEffect(()=>{v()},[]);async function v(){try{_(!0);const{data:O,error:B}=await Xe.from("attendance").select("date, status").eq("status","PRESENT").order("date",{ascending:!1});if(B)throw B;const k={};O.forEach(U=>{k[U.date]||(k[U.date]=0),k[U.date]++});const z=Object.keys(k).map(U=>({date:U,count:k[U]}));b(z)}catch(O){console.error(O)}finally{_(!1)}}const N=O=>{const B={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(O).toLocaleDateString(void 0,B)};return r==="detail"?A.jsx(Yv,{date:f,onBack:()=>l("list")}):A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",children:[A.jsx("button",{onClick:()=>o("home"),className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsx("h2",{children:"Reports"})]}),A.jsx("div",{className:"student-list",children:S?A.jsx("div",{className:"empty-state",children:"Loading reports..."}):g.length===0?A.jsx("div",{className:"empty-state",children:"No attendance records found."}):g.map(O=>A.jsxs("div",{className:"card student-card",onClick:()=>{p(O.date),l("detail")},children:[A.jsxs("div",{className:"student-info",children:[A.jsx("h3",{children:N(O.date)}),A.jsxs("span",{children:[O.count," Present"]})]}),A.jsx("div",{style:{color:"var(--primary)"},children:A.jsx(zn,{size:20,style:{transform:"rotate(180deg)"}})})]},O.date))})]})}function Wv({onBack:o}){return A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsx("h2",{children:"Guidelines"})]}),A.jsxs("div",{style:{padding:"0 8px"},children:[A.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid var(--primary)"},children:[A.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx(Wc,{size:20,color:"var(--primary)"})," New vs Regulars"]}),A.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:[A.jsx("strong",{children:"New Kids:"})," Any child who has visited less than 3 times. They get a special badge so you can welcome them!",A.jsx("br",{}),A.jsx("br",{}),A.jsx("strong",{children:"Regulars:"}),' Once a child visits for the 3rd time, they automatically become a "Regular".']})]}),A.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #D97706"},children:[A.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#D97706"},children:[A.jsx(oo,{size:20})," Bible Verse & Notes"]}),A.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["When marking attendance, tap the details:",A.jsx("br",{}),A.jsx("br",{}),A.jsxs("strong",{style:{color:"#D97706"},children:[A.jsx(oo,{size:14,style:{display:"inline",marginRight:4}})," Bible Icon:"]})," Click this if the student can recite the Memory Verse for the day.",A.jsx("br",{}),A.jsx("br",{}),A.jsxs("strong",{style:{color:"var(--primary)"},children:[A.jsx(Of,{size:14,style:{display:"inline",marginRight:4}})," Note Icon:"]}),' Use this to add remarks (e.g. "Sick", "Fetched by Lola").']})]}),A.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #10B981"},children:[A.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#10B981"},children:[A.jsx(E2,{size:20})," Smart Check-in"]}),A.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:[A.jsx("strong",{children:"Teachers:"})," Tap the green ",A.jsx("span",{style:{fontWeight:"bold",color:"#10B981"},children:"SCAN"})," button on the Home Page and point at a student's QR.",A.jsx("br",{}),A.jsx("br",{}),A.jsx("strong",{children:"Students:"})," Go to your Profile and tap the ",A.jsx(b2,{size:14,style:{display:"inline",verticalAlign:"middle"}})," icon to see your code."]})]}),A.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #8B5CF6"},children:[A.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#8B5CF6"},children:[A.jsx(p2,{size:20})," List Sorting"]}),A.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["In the Student List, tap the ",A.jsx("strong",{children:"Sort Button"})," (top right) to toggle:",A.jsx("br",{}),"1. ",A.jsx("strong",{children:"Present First"})," (Green checks at top)",A.jsx("br",{}),"2. ",A.jsx("strong",{children:"A-Z"})," (Alphabetical)"]})]}),A.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #F59E0B"},children:[A.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#F59E0B"},children:[A.jsx(S2,{size:20})," Achievements"]}),A.jsxs("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:[A.jsxs("p",{style:{marginBottom:"12px"},children:["Every medal has 3 Levels: ",A.jsx("strong",{children:"Bronze"}),", ",A.jsx("strong",{children:"Silver"}),", and ",A.jsx("strong",{children:"Gold"}),"."]}),A.jsxs("div",{style:{marginBottom:"8px"},children:[A.jsx("strong",{children:" Attendance"}),A.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[A.jsx("li",{children:"1st Visit: First Step"}),A.jsx("li",{children:"3 Visits: Regular"}),A.jsxs("li",{children:["10 Visits: ",A.jsx("strong",{children:"Rising Star"})," (Gold)"]})]})]}),A.jsxs("div",{style:{marginBottom:"8px"},children:[A.jsx("strong",{children:" Bible Verses"}),A.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[A.jsx("li",{children:"1 Verse: Student"}),A.jsx("li",{children:"5 Verses: Scholar"}),A.jsxs("li",{children:["10 Verses: ",A.jsx("strong",{children:"Bible Champ"})," (Gold)"]})]})]}),A.jsxs("div",{style:{marginBottom:"8px"},children:[A.jsx("strong",{children:" Weekly Streak"}),A.jsxs("ul",{style:{paddingLeft:"20px",margin:"4px 0"},children:[A.jsx("li",{children:"2 Weeks: Warming Up"}),A.jsx("li",{children:"4 Weeks: On Fire"}),A.jsxs("li",{children:["8 Weeks: ",A.jsx("strong",{children:"Unstoppable"})," (Gold)"]})]})]})]})]}),A.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px",borderLeft:"4px solid #DC2626"},children:[A.jsxs("h3",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",color:"#DC2626"},children:[A.jsx(Mf,{size:20})," Follow Up"]}),A.jsxs("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"var(--text-muted)"},children:["The app monitors attendance automatically.",A.jsx("br",{}),A.jsx("br",{}),"If a student is ",A.jsx("strong",{children:"absent for 3 consecutive Sundays"}),' (based on the last 3 recorded dates), they will appear in the "Follow Up" list so you can visit them.']})]})]})]})}function Kg({onBack:o,onComplete:r,initialData:l,canDelete:f}){const[p,g]=me.useState(l?.full_name||""),[b,S]=me.useState(l?.grade_level||""),[_,v]=me.useState(l?.parent_name||""),[N,O]=me.useState(l?.contact_number||""),[B,k]=me.useState(l?.nickname||""),[z,U]=me.useState(l?.gender||"Male"),[Y,J]=me.useState(l?.birthday||""),[ae,Z]=me.useState(!1),ce=!!l,[Ce,Ae]=me.useState(l?.avatar_url||""),[Q,ne]=me.useState(!1),le=async ye=>{try{ne(!0);const Ue=ye.target.files[0];if(!Ue)return;const Ge=document.createElement("img"),ie=document.createElement("canvas"),ee=new FileReader;ee.onload=function(fe){Ge.onload=function(){let Qe=Ge.width,V=Ge.height;Qe>V?Qe>300&&(V*=300/Qe,Qe=300):V>300&&(Qe*=300/V,V=300),ie.width=Qe,ie.height=V,ie.getContext("2d").drawImage(Ge,0,0,Qe,V),ie.toBlob(async Se=>{const _e=`${Date.now()}-${Math.floor(Math.random()*1e3)}.jpg`,{data:Ye,error:Ee}=await Xe.storage.from("avatars").upload(_e,Se,{contentType:"image/jpeg",upsert:!1});if(Ee)throw Ee;const ct=Xe.storage.from("avatars").getPublicUrl(_e).data.publicUrl;Ae(ct),ne(!1)},"image/jpeg",.8)},Ge.src=fe.target.result},ee.readAsDataURL(Ue)}catch(Ue){alert("Error uploading: "+Ue.message),ne(!1)}},Ne=async ye=>{if(ye.preventDefault(),!p.trim())return;Z(!0);const Ue={full_name:p,grade_level:b,parent_name:_,contact_number:N,gender:z,nickname:B,birthday:Y||null,avatar_url:Ce};try{if(ce){const{error:Ge}=await Xe.from("students").update(Ue).eq("id",l.id);if(Ge)throw Ge}else{const{error:Ge}=await Xe.from("students").insert([Ue]);if(Ge)throw Ge}r()}catch(Ge){console.error(Ge),alert("Error saving: "+(Ge.message||"Unknown error"))}finally{Z(!1)}},ke=async()=>{if(confirm("Are you sure you want to delete this student?")){Z(!0);try{const{error:ye}=await Xe.from("students").delete().eq("id",l.id);if(ye)throw ye;r()}catch(ye){alert(ye.message)}finally{Z(!1)}}};return A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsx("h2",{children:ce?"Edit Student":"Register Student"})]}),A.jsxs("form",{onSubmit:Ne,className:"student-form",children:[A.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px"},children:[A.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#F3F4F6",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",border:"3px solid #fff",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:Ce?A.jsx("img",{src:Ce,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):A.jsx(Bf,{size:48,color:"#9CA3AF"})}),A.jsxs("div",{className:"file-upload-btn",children:[A.jsx("label",{htmlFor:"avatar-upload",className:"btn secondary",style:{fontSize:"12px",padding:"6px 12px",cursor:"pointer"},children:Q?"Compressing...":Ce?"Change Photo":"Upload Photo"}),A.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:le,style:{display:"none"},disabled:Q})]})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Full Name"}),A.jsx("input",{type:"text",className:"input",placeholder:"e.g. Timothy Santos",value:p,onChange:ye=>g(ye.target.value),autoFocus:!0})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Nickname (Optional)"}),A.jsx("input",{type:"text",className:"input",placeholder:"e.g. Tim",value:B,onChange:ye=>k(ye.target.value)})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Gender"}),A.jsxs("div",{className:"gender-select",children:[A.jsx("div",{className:`gender-option ${z==="Male"?"selected":""}`,onClick:()=>U("Male"),children:"Male"}),A.jsx("div",{className:`gender-option ${z==="Female"?"selected":""}`,onClick:()=>U("Female"),children:"Female"})]})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Birthday (Optional)"}),A.jsx("input",{type:"date",className:"input",value:Y,onChange:ye=>J(ye.target.value)})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Grade Level"}),A.jsx("input",{type:"text",className:"input",placeholder:"e.g. Grade 1",value:b,onChange:ye=>S(ye.target.value)})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Parent Name (Optional)"}),A.jsx("input",{type:"text",className:"input",placeholder:"e.g. Mom/Dad Name",value:_,onChange:ye=>v(ye.target.value)})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Contact No. (Optional)"}),A.jsx("input",{type:"text",className:"input",placeholder:"0912...",value:N,onChange:ye=>O(ye.target.value)})]}),A.jsx("button",{type:"submit",className:"btn full-width",disabled:ae,children:ae?"Saving...":ce?"Update Changes":"Save Student"}),ce&&f&&A.jsxs("button",{type:"button",onClick:ke,className:"btn full-width",style:{background:"#FEE2E2",color:"#DC2626",marginTop:"12px"},disabled:ae,children:[A.jsx(Df,{size:20,style:{marginRight:"8px"}})," Delete Student"]})]})]})}function Zv({onBack:o}){const{permissions:r}=Sa(),[l,f]=me.useState("list"),[p,g]=me.useState(null),[b,S]=me.useState([]),[_,v]=me.useState(!0),[N,O]=me.useState("");me.useEffect(()=>{B()},[]);async function B(){try{v(!0);const{data:z,error:U}=await Xe.from("students").select("*").order("full_name");if(U)throw U;S(z)}catch(z){console.error(z)}finally{v(!1)}}const k=b.filter(z=>z.full_name.toLowerCase().includes(N.toLowerCase()));return r.canEditStudents?l==="add"?A.jsx(Kg,{onBack:()=>f("list"),onComplete:()=>{f("list"),B()},initialData:null,canDelete:!1}):l==="edit"?A.jsx(Kg,{onBack:()=>f("list"),onComplete:()=>{f("list"),B()},initialData:p,canDelete:r.canDeleteStudents}):A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsx("h2",{children:"Manage Students"})]}),A.jsxs("button",{onClick:()=>f("add"),className:"btn",style:{padding:"8px 12px",fontSize:"14px"},children:[A.jsx(If,{size:18,style:{marginRight:"4px"}})," Add"]})]}),A.jsxs("div",{className:"search-bar",children:[A.jsx("input",{type:"text",placeholder:"Search name...",className:"input search-input",value:N,onChange:z=>O(z.target.value)}),A.jsx(ho,{size:20,className:"search-icon"})]}),A.jsx("div",{className:"student-list",children:_?A.jsx("div",{className:"empty-state",children:"Loading..."}):k.length===0?A.jsx("div",{className:"empty-state",children:"No students found."}):k.map(z=>A.jsxs("div",{className:"card student-card",onClick:()=>{g(z),f("edit")},children:[A.jsxs("div",{className:"student-info",children:[A.jsxs("h3",{children:[z.full_name," ",z.nickname&&A.jsxs("span",{style:{color:"var(--primary)",fontWeight:"normal"},children:['"',z.nickname,'"']})]}),A.jsx("span",{children:z.grade_level||"No Grade"})]}),A.jsx("div",{style:{color:"var(--primary)"},children:A.jsx(Cw,{size:20})})]},z.id))})]}):A.jsxs("div",{className:"page slide-in",children:[A.jsx("header",{className:"page-header",children:A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})})}),A.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:[A.jsx("h3",{children:"Access Denied"}),A.jsx("p",{children:"Client Access Only. Please see an Admin."})]})]})}function Qv({onBack:o}){const{user:r}=Sa(),[l,f]=me.useState([]),[p,g]=me.useState(!0),[b,S]=me.useState(null),[_,v]=me.useState(!1),[N,O]=me.useState(""),[B,k]=me.useState(""),[z,U]=me.useState("TEACHER"),[Y,J]=me.useState("");me.useEffect(()=>{ae()},[]);async function ae(){try{g(!0);const{data:ne,error:le}=await Xe.from("app_users").select("*").order("created_at");if(le)throw le;f(ne)}catch(ne){S(ne.message)}finally{g(!1)}}const Z=async ne=>{if(ne.preventDefault(),!(!N||!B||!Y)){if(B.length<4){alert("PIN must be at least 4 digits");return}try{const{error:le}=await Xe.from("app_users").insert([{full_name:N,username:Y,pin:B,role:z}]);if(le)throw le;v(!1),O(""),k(""),J(""),ae()}catch(le){alert(le.message)}}},ce=async ne=>{if(confirm("Are you sure you want to delete this user?"))try{if(ne===r.id){alert("You cannot delete yourself!");return}const{error:le}=await Xe.from("app_users").delete().eq("id",ne);if(le)throw le;ae()}catch(le){alert(le.message)}};if(!(r?.role==="ADMIN"||r?.role==="USHER_ADMIN"))return A.jsxs("div",{className:"page slide-in",children:[A.jsx("header",{className:"page-header",children:A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})})}),A.jsxs("div",{className:"empty-state",children:[A.jsx(Rf,{size:48,color:"#DC2626"}),A.jsx("h3",{children:"Access Denied"}),A.jsx("p",{children:"Only Admins can manage users."})]})]});const Ae=l.filter(ne=>r.role==="ADMIN"?!0:r.role==="USHER_ADMIN"?ne.role==="USHER"||ne.id===r.id:!1),Q=()=>r.role==="USHER_ADMIN"?A.jsx("option",{value:"USHER",children:"Usher (Service Attendance)"}):A.jsxs(A.Fragment,{children:[A.jsx("option",{value:"TEACHER",children:"Teacher (Kids)"}),A.jsx("option",{value:"ASSISTANT_TEACHER",children:"Assistant (Kids)"}),A.jsx("option",{value:"ADMIN",children:"Kids Admin (Full Access)"}),A.jsx("option",{value:"USHER_ADMIN",children:"Usher Admin (Manage Ushers)"})]});return A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",style:{justifyContent:"space-between"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsx("h2",{children:"Manage Users"})]}),!_&&A.jsxs("button",{onClick:()=>v(!0),className:"btn",style:{padding:"8px 12px",fontSize:"14px"},children:[A.jsx(If,{size:18,style:{marginRight:"4px"}})," Add User"]})]}),_&&A.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"24px",border:"2px solid var(--primary)"},children:[A.jsx("h3",{style:{marginBottom:"16px"},children:"Add New Staff"}),A.jsxs("form",{onSubmit:Z,children:[A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Full Name"}),A.jsx("input",{type:"text",className:"input",placeholder:"e.g. John Doe",value:N,onChange:ne=>O(ne.target.value),required:!0})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Username (Unique ID)"}),A.jsx("input",{type:"text",className:"input",placeholder:"e.g. john",value:Y,onChange:ne=>J(ne.target.value),required:!0})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"PIN Code"}),A.jsx("input",{type:"tel",className:"input",placeholder:"e.g. 1234",value:B,onChange:ne=>k(ne.target.value),maxLength:6,required:!0})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Role"}),A.jsx("select",{className:"input",value:z,onChange:ne=>U(ne.target.value),children:Q()})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[A.jsx("button",{type:"button",className:"btn secondary",onClick:()=>v(!1),style:{flex:1},children:"Cancel"}),A.jsx("button",{type:"submit",className:"btn",style:{flex:1},children:"Create User"})]})]})]}),A.jsx("div",{className:"student-list",children:p?A.jsx("div",{className:"empty-state",children:"Loading..."}):Ae.map(ne=>A.jsxs("div",{className:"card student-card",style:{cursor:"default"},children:[A.jsxs("div",{className:"student-info",children:[A.jsxs("h3",{children:[ne.full_name," ",A.jsxs("span",{style:{fontSize:"12px",color:"#666",fontWeight:"normal"},children:["(",ne.username,")"]})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[A.jsx("span",{className:`badge ${ne.role==="ADMIN"||ne.role==="USHER_ADMIN"?"visit-3":"visit-1"}`,style:{fontSize:"10px"},children:ne.role}),A.jsxs("span",{style:{fontSize:"12px",color:"#9CA3AF"},children:["PIN: ",ne.pin]})]})]}),ne.username!=="admin"&&ne.id!==r.id&&A.jsx("button",{onClick:()=>ce(ne.id),style:{background:"none",border:"none",color:"#DC2626",cursor:"pointer"},children:A.jsx(Df,{size:20})})]},ne.id))})]})}function Kv({onNavigate:o}){const{user:r,logout:l}=Sa();return A.jsxs("div",{className:"page fade-in",children:[A.jsxs("header",{className:"home-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"12px",borderBottom:"1px solid #E5E7EB",marginBottom:"24px"},children:[A.jsxs("div",{children:[A.jsx("h1",{style:{fontSize:"24px",color:"#111827"},children:"Usher Team"}),A.jsxs("p",{style:{fontSize:"14px",color:"#6B7280"},children:[r?.full_name," (",r?.role,")"]})]}),A.jsxs("button",{onClick:l,style:{background:"none",border:"none",color:"#EF4444",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",fontSize:"10px"},title:"Logout",children:[A.jsx(w2,{size:24}),A.jsx("span",{children:"Logout"})]})]}),A.jsxs("div",{className:"menu-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px"},children:[A.jsxs("button",{className:"menu-card primary",onClick:()=>o("service-attendance"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[A.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#059669",marginBottom:"8px"},children:A.jsx(Wc,{size:40})}),A.jsxs("div",{children:[A.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Service Attendance"}),A.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Check-in Members"})]})]}),A.jsxs("button",{className:"menu-card",onClick:()=>o("member-manager"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[A.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#C2410C",marginBottom:"8px"},children:A.jsx(y2,{size:40})}),A.jsxs("div",{children:[A.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Member Directory"}),A.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Add or Edit Profiles"})]})]}),A.jsxs("button",{className:"menu-card",onClick:()=>o("member-reports"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[A.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#7C3AED",marginBottom:"8px"},children:A.jsx(x2,{size:40})}),A.jsxs("div",{children:[A.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Reports & Export"}),A.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"View History"})]})]}),r?.role==="USHER_ADMIN"&&A.jsxs("button",{className:"menu-card",onClick:()=>o("user-manager"),style:{flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",textAlign:"center",gap:"12px",aspectRatio:"1/1"},children:[A.jsx("div",{className:"icon-bg",style:{background:"transparent",color:"#2563EB",marginBottom:"8px"},children:A.jsx(Rf,{size:40})}),A.jsxs("div",{children:[A.jsx("h3",{style:{fontSize:"16px",marginBottom:"4px"},children:"Manage Ushers"}),A.jsx("p",{style:{margin:0,fontSize:"12px",opacity:.8},children:"Admin Controls"})]})]})]})]})}function Jv({onBack:o}){const[r,l]=me.useState(""),[f,p]=me.useState([]),[g,b]=me.useState(!0),[S,_]=me.useState(new Date().toISOString().split("T")[0]),[v,N]=me.useState("MORNING_SERVICE");me.useEffect(()=>{O()},[S,v]);async function O(){try{b(!0);const{data:U,error:Y}=await Xe.from("members").select("*").order("full_name");if(Y)throw Y;const{data:J,error:ae}=await Xe.from("member_attendance").select("member_id, status").eq("date",S).eq("service_type",v).eq("status","PRESENT");if(ae)throw ae;const Z=new Set(J.map(Ce=>Ce.member_id)),ce=U.map(Ce=>({...Ce,present:Z.has(Ce.id)}));p(ce)}catch(U){console.error(U)}finally{b(!1)}}const B=async U=>{const Y=!U.present;p(J=>J.map(ae=>ae.id===U.id?{...ae,present:Y}:ae));try{Y?await Xe.from("member_attendance").insert({member_id:U.id,date:S,service_type:v,status:"PRESENT"}):await Xe.from("member_attendance").delete().eq("member_id",U.id).eq("date",S).eq("service_type",v)}catch(J){console.error(J),p(ae=>ae.map(Z=>Z.id===U.id?{...Z,present:!Y}:Z)),alert("Error updating attendance")}},k=f.filter(U=>U.full_name.toLowerCase().includes(r.toLowerCase())),z=f.filter(U=>U.present).length;return A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",style:{flexDirection:"column",alignItems:"stretch",gap:"16px"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsx("h2",{children:"Check-In"})]}),A.jsxs("div",{style:{background:"#ECFDF5",color:"#059669",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"6px"},children:[A.jsx(Wc,{size:16})," ",z," Present"]})]}),A.jsxs("div",{style:{display:"flex",gap:"12px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx("input",{type:"date",className:"input",value:S,onChange:U=>_(U.target.value)})}),A.jsx("div",{style:{flex:1},children:A.jsxs("select",{className:"input",value:v,onChange:U=>N(U.target.value),children:[A.jsx("option",{value:"MORNING_SERVICE",children:" Morning"}),A.jsx("option",{value:"EVENING_SERVICE",children:" Evening"}),A.jsx("option",{value:"SPECIAL_EVENT",children:" Special"})]})})]})]}),A.jsxs("div",{className:"search-bar",children:[A.jsx("input",{type:"text",placeholder:"Search member...",className:"input search-input",value:r,onChange:U=>l(U.target.value)}),A.jsx(ho,{size:20,className:"search-icon"})]}),A.jsx("div",{className:"student-list",children:g?A.jsx("p",{children:"Loading..."}):k.length===0?A.jsx("p",{className:"empty-state",children:"No members found."}):k.map(U=>A.jsxs("div",{className:"student-card",onClick:()=>B(U),style:{cursor:"pointer"},children:[A.jsx("div",{className:"student-info",children:A.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[U.full_name,A.jsx("span",{className:`badge ${U.age_group==="YOUTH"?"visit-2":U.age_group==="SENIOR"?"visit-3":"visit-1"}`,style:{fontSize:"10px",marginTop:0},children:U.age_group})]})}),A.jsx("div",{className:`check-btn ${U.present?"active":""}`,children:A.jsx(tl,{size:24,fill:U.present?"white":"none",color:U.present?"white":"var(--border-color)"})})]},U.id))})]})}function $v({member:o,onBack:r,onEdit:l}){const[f,p]=me.useState([]),[g,b]=me.useState(!0),[S,_]=me.useState({total:0,lastVisit:"Never"});me.useEffect(()=>{v()},[o]);async function v(){try{b(!0);const{data:N,error:O}=await Xe.from("member_attendance").select("*").eq("member_id",o.id).order("date",{ascending:!1});if(O)throw O;p(N);const B=N.filter(z=>z.status==="PRESENT").length,k=N.length>0?new Date(N[0].date).toLocaleDateString():"Never";_({total:B,lastVisit:k})}catch(N){console.error(N)}finally{b(!1)}}return A.jsxs("div",{className:"page slide-in",style:{padding:0,background:"#F9FAFB"},children:[A.jsxs("div",{className:"profile-header",children:[A.jsx("button",{onClick:r,className:"back-btn",style:{position:"absolute",top:"20px",left:"20px"},children:A.jsx(zn,{size:24})}),A.jsx("button",{onClick:()=>l(o),style:{position:"absolute",top:"20px",right:"20px",background:"none",border:"none",color:"var(--primary)",cursor:"pointer"},children:A.jsx(v2,{size:24})}),A.jsx("div",{className:"big-avatar",children:o.full_name[0]}),A.jsx("h2",{className:"profile-name",children:o.full_name}),A.jsxs("div",{className:"profile-meta",children:[A.jsx("span",{className:`badge ${o.age_group==="YOUTH"?"visit-2":o.age_group==="SENIOR"?"visit-3":"visit-1"}`,style:{marginTop:0},children:o.age_group}),o.contact_number&&A.jsxs("span",{children:[" ",o.contact_number]})]}),o.address&&A.jsx("p",{style:{fontSize:"12px",color:"#6B7280",marginTop:"8px"},children:o.address}),o.notes&&A.jsxs("p",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px",fontStyle:"italic"},children:['"',o.notes,'"']})]}),A.jsxs("div",{className:"stats-row",style:{gridTemplateColumns:"1fr 1fr"},children:[A.jsxs("div",{className:"stat-card",children:[A.jsx("span",{className:"stat-val",children:S.total}),A.jsx("span",{className:"stat-label",children:"Total Visits"})]}),A.jsxs("div",{className:"stat-card",children:[A.jsx("span",{className:"stat-val",style:{color:"#059669"},children:S.lastVisit}),A.jsx("span",{className:"stat-label",children:"Last Visit"})]})]}),A.jsxs("div",{style:{padding:"0 20px 20px"},children:[A.jsx("h3",{className:"section-header",style:{marginBottom:"16px"},children:"Attendance History"}),g?A.jsx("div",{className:"empty-state",children:"Loading..."}):f.length===0?A.jsx("div",{className:"empty-state",children:"No attendance recorded."}):A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:f.map(N=>A.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx("div",{style:{background:N.status==="PRESENT"?"#ECFDF5":"#FEF2F2",padding:"8px",borderRadius:"10px",color:N.status==="PRESENT"?"#059669":"#DC2626"},children:N.status==="PRESENT"?A.jsx(tl,{size:20}):A.jsx(fw,{size:20})}),A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:"700",fontSize:"15px",color:"#1F2937"},children:new Date(N.date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}),A.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"2px"},children:N.service_type||"Morning Service"})]})]}),A.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:N.status==="PRESENT"?"#059669":"#DC2626"},children:N.status})]},N.id))})]})]})}function eb({onBack:o}){const{user:r}=Sa(),[l,f]=me.useState([]),[p,g]=me.useState(!0),[b,S]=me.useState(""),[_,v]=me.useState("list"),[N,O]=me.useState(null),[B,k]=me.useState(!1),[z,U]=me.useState(null),[Y,J]=me.useState({full_name:"",contact_number:"",address:"",birthday:"",age_group:"ADULT",notes:""});me.useEffect(()=>{ae()},[]);async function ae(){try{g(!0);const{data:Ne,error:ke}=await Xe.from("members").select("*").order("full_name");if(ke)throw ke;f(Ne)}catch(Ne){console.error(Ne)}finally{g(!1)}}const Z=async Ne=>{Ne.preventDefault();try{if(z){const{error:ke}=await Xe.from("members").update(Y).eq("id",z.id);if(ke)throw ke}else{const{error:ke}=await Xe.from("members").insert([Y]);if(ke)throw ke}Q(),ae(),_==="profile"&&z&&O({...z,...Y})}catch(ke){alert(ke.message)}},ce=async Ne=>{if(confirm("Are you sure you want to delete this member? This will delete all their attendance history!"))try{const{error:ke}=await Xe.from("members").delete().eq("id",Ne);if(ke)throw ke;ae(),_==="profile"&&v("list")}catch(ke){alert("Cannot delete: "+ke.message)}},Ce=()=>{U(null),J({full_name:"",contact_number:"",address:"",birthday:"",age_group:"ADULT",notes:""}),k(!0)},Ae=Ne=>{U(Ne),J({full_name:Ne.full_name,contact_number:Ne.contact_number||"",address:Ne.address||"",birthday:Ne.birthday||"",age_group:Ne.age_group||"ADULT",notes:Ne.notes||""}),k(!0)},Q=()=>{k(!1),U(null)},ne=r?.role==="USHER_ADMIN"||r?.role==="ADMIN",le=l.filter(Ne=>Ne.full_name.toLowerCase().includes(b.toLowerCase()));return A.jsxs(A.Fragment,{children:[_==="profile"&&N?A.jsx($v,{member:N,onBack:()=>{v("list"),O(null)},onEdit:Ae}):A.jsxs("div",{className:"page slide-in",children:[A.jsxs("header",{className:"page-header",style:{justifyContent:"space-between",marginBottom:"16px"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx("button",{onClick:o,className:"back-btn",children:A.jsx(zn,{size:24})}),A.jsxs("h2",{children:["Members (",l.length,")"]})]}),A.jsx("button",{onClick:Ce,className:"btn",style:{width:"40px",height:"40px",padding:0,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:A.jsx(If,{size:24})})]}),A.jsxs("div",{style:{position:"relative",marginBottom:"24px"},children:[A.jsx(ho,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9CA3AF"}}),A.jsx("input",{type:"text",placeholder:"Search members...",className:"input",style:{paddingLeft:"40px"},value:b,onChange:Ne=>S(Ne.target.value)})]}),A.jsx("div",{className:"student-list",children:p?A.jsx("p",{children:"Loading..."}):le.map(Ne=>A.jsxs("div",{className:"student-card",onClick:()=>{O(Ne),v("profile")},children:[A.jsx("div",{className:"student-info",children:A.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[Ne.full_name,A.jsx("span",{className:`badge ${Ne.age_group==="YOUTH"?"visit-2":Ne.age_group==="SENIOR"?"visit-3":"visit-1"}`,style:{fontSize:"10px",marginTop:0},children:Ne.age_group})]})}),A.jsx("div",{style:{color:"#D1D5DB"},children:A.jsx(v2,{size:16})})]},Ne.id))})]}),B&&A.jsx("div",{className:"modal-overlay",children:A.jsxs("div",{className:"modal-content",children:[A.jsx("h3",{children:z?"Edit Member":"Add New Member"}),A.jsxs("form",{onSubmit:Z,style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Full Name"}),A.jsx("input",{className:"input",value:Y.full_name,onChange:Ne=>J({...Y,full_name:Ne.target.value}),required:!0})]}),A.jsxs("div",{style:{display:"flex",gap:"12px"},children:[A.jsxs("div",{className:"form-group",style:{flex:1},children:[A.jsx("label",{children:"Phone"}),A.jsx("input",{className:"input",value:Y.contact_number,onChange:Ne=>J({...Y,contact_number:Ne.target.value})})]}),A.jsxs("div",{className:"form-group",style:{flex:1},children:[A.jsx("label",{children:"Age Group"}),A.jsxs("select",{className:"input",value:Y.age_group,onChange:Ne=>J({...Y,age_group:Ne.target.value}),children:[A.jsx("option",{value:"ADULT",children:"Adult"}),A.jsx("option",{value:"YOUTH",children:"Youth"}),A.jsx("option",{value:"SENIOR",children:"Senior"}),A.jsx("option",{value:"CHILD",children:"Child (Visitor)"})]})]})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Address"}),A.jsx("input",{className:"input",value:Y.address,onChange:Ne=>J({...Y,address:Ne.target.value})})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Birthday"}),A.jsx("input",{type:"date",className:"input",value:Y.birthday,onChange:Ne=>J({...Y,birthday:Ne.target.value})})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Notes"}),A.jsx("textarea",{className:"input",rows:"2",value:Y.notes,onChange:Ne=>J({...Y,notes:Ne.target.value})})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[z&&ne&&A.jsx("button",{type:"button",className:"btn",onClick:()=>{ce(z.id),Q()},style:{background:"#FEE2E2",color:"#DC2626",border:"none"},children:A.jsx(Df,{size:18})}),A.jsx("button",{type:"button",className:"btn secondary",onClick:Q,style:{flex:1},children:"Cancel"}),A.jsx("button",{type:"submit",className:"btn",style:{flex:1},children:z?"Update":"Save"})]})]})]})})]})}class tb extends me.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,l){console.error("Uncaught error:",r,l),(r.toString().includes("user")||r.toString().includes("Auth"))&&localStorage.removeItem("app_user")}render(){return this.state.hasError?A.jsxs("div",{style:{padding:"40px",color:"#DC2626",fontFamily:"system-ui",textAlign:"center"},children:[A.jsx("h1",{children:"Something went wrong."}),A.jsx("p",{style:{background:"#FEE2E2",padding:"10px",borderRadius:"8px",display:"inline-block"},children:this.state.error?.toString()}),A.jsx("br",{}),A.jsx("br",{}),A.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},style:{padding:"12px 24px",background:"#DC2626",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"Reset & Reload App"})]}):this.props.children}}function nb(){const{user:o,loading:r}=Sa(),[l,f]=me.useState(!0),[p,g]=me.useState("home");me.useEffect(()=>{},[r]);const b=me.useCallback(()=>{f(!1)},[]);if(l)return A.jsx(Hy,{onFinish:b});if(!o)return A.jsx(zw,{});const S=o.role==="USHER"||o.role==="USHER_ADMIN";if(p==="home"&&S)return A.jsx(Kv,{onNavigate:g});switch(p){case"home":return A.jsx(kg,{onNavigate:g});case"attendance":return A.jsx(Ov,{onBack:()=>g("home")});case"activity-log":return A.jsx(Iv,{onBack:()=>g("home")});case"follow-up":return A.jsx(Rv,{onBack:()=>g("home")});case"student-monitor":return A.jsx(qv,{onBack:()=>g("home")});case"reports":return A.jsx(Xv,{onNavigate:g});case"info":return A.jsx(Wv,{onBack:()=>g("home")});case"student-manager":return A.jsx(Zv,{onBack:()=>g("home")});case"user-manager":return A.jsx(Qv,{onBack:()=>g("home")});case"service-attendance":return A.jsx(Jv,{onBack:()=>g("home")});case"member-manager":return A.jsx(eb,{onBack:()=>g("home")});case"member-reports":return A.jsxs("div",{style:{padding:20},children:["Member Reports (Coming Soon) ",A.jsx("button",{onClick:()=>g("home"),children:"Back"})]});default:return A.jsx(kg,{onNavigate:g})}}function ib(){return A.jsx(tb,{children:A.jsx(Py,{children:A.jsx(nb,{})})})}up.createRoot(document.getElementById("root")).render(A.jsx(me.StrictMode,{children:A.jsx(ib,{})}));
